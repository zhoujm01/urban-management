(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();function makeMap(n,e){const t=Object.create(null),i=n.split(",");for(let s=0;s<i.length;s++)t[i[s]]=!0;return e?s=>!!t[s.toLowerCase()]:s=>!!t[s]}function normalizeStyle(n){if(isArray$1(n)){const e={};for(let t=0;t<n.length;t++){const i=n[t],s=isString(i)?parseStringStyle(i):normalizeStyle(i);if(s)for(const r in s)e[r]=s[r]}return e}else{if(isString(n))return n;if(isObject$1(n))return n}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*.*?\*\//gs;function parseStringStyle(n){const e={};return n.replace(styleCommentRE,"").split(listDelimiterRE).forEach(t=>{if(t){const i=t.split(propertyDelimiterRE);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function normalizeClass(n){let e="";if(isString(n))e=n;else if(isArray$1(n))for(let t=0;t<n.length;t++){const i=normalizeClass(n[t]);i&&(e+=i+" ")}else if(isObject$1(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(n){return!!n||n===""}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=n=>onRE.test(n),isModelListener=n=>n.startsWith("onUpdate:"),extend=Object.assign,remove=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},hasOwnProperty$2=Object.prototype.hasOwnProperty,hasOwn=(n,e)=>hasOwnProperty$2.call(n,e),isArray$1=Array.isArray,isMap=n=>toTypeString(n)==="[object Map]",isSet=n=>toTypeString(n)==="[object Set]",isFunction=n=>typeof n=="function",isString=n=>typeof n=="string",isSymbol=n=>typeof n=="symbol",isObject$1=n=>n!==null&&typeof n=="object",isPromise$1=n=>isObject$1(n)&&isFunction(n.then)&&isFunction(n.catch),objectToString=Object.prototype.toString,toTypeString=n=>objectToString.call(n),toRawType=n=>toTypeString(n).slice(8,-1),isPlainObject=n=>toTypeString(n)==="[object Object]",isIntegerKey=n=>isString(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(n=>n.replace(camelizeRE,(e,t)=>t?t.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(n=>n.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(n=>n.charAt(0).toUpperCase()+n.slice(1)),toHandlerKey=cacheStringFunction(n=>n?`on${capitalize(n)}`:""),hasChanged=(n,e)=>!Object.is(n,e),invokeArrayFns=(n,e)=>{for(let t=0;t<n.length;t++)n[t](e)},def=(n,e,t)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value:t})},looseToNumber=n=>{const e=parseFloat(n);return isNaN(e)?n:e};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let activeEffectScope;class EffectScope{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!e&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=activeEffectScope;try{return activeEffectScope=this,e()}finally{activeEffectScope=t}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(e){if(this._active){let t,i;for(t=0,i=this.effects.length;t<i;t++)this.effects[t].stop();for(t=0,i=this.cleanups.length;t<i;t++)this.cleanups[t]();if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function recordEffectScope(n,e=activeEffectScope){e&&e.active&&e.effects.push(n)}function getCurrentScope(){return activeEffectScope}const createDep=n=>{const e=new Set(n);return e.w=0,e.n=0,e},wasTracked=n=>(n.w&trackOpBit)>0,newTracked=n=>(n.n&trackOpBit)>0,initDepMarkers=({deps:n})=>{if(n.length)for(let e=0;e<n.length;e++)n[e].w|=trackOpBit},finalizeDepMarkers=n=>{const{deps:e}=n;if(e.length){let t=0;for(let i=0;i<e.length;i++){const s=e[i];wasTracked(s)&&!newTracked(s)?s.delete(n):e[t++]=s,s.w&=~trackOpBit,s.n&=~trackOpBit}e.length=t}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(e,t=null,i){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,i)}run(){if(!this.active)return this.fn();let e=activeEffect,t=shouldTrack;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(n){const{deps:e}=n;if(e.length){for(let t=0;t<e.length;t++)e[t].delete(n);e.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const n=trackStack.pop();shouldTrack=n===void 0?!0:n}function track(n,e,t){if(shouldTrack&&activeEffect){let i=targetMap.get(n);i||targetMap.set(n,i=new Map);let s=i.get(t);s||i.set(t,s=createDep()),trackEffects(s)}}function trackEffects(n,e){let t=!1;effectTrackDepth<=maxMarkerBits?newTracked(n)||(n.n|=trackOpBit,t=!wasTracked(n)):t=!n.has(activeEffect),t&&(n.add(activeEffect),activeEffect.deps.push(n))}function trigger(n,e,t,i,s,r){const o=targetMap.get(n);if(!o)return;let c=[];if(e==="clear")c=[...o.values()];else if(t==="length"&&isArray$1(n)){const _=Number(i);o.forEach((l,d)=>{(d==="length"||d>=_)&&c.push(l)})}else switch(t!==void 0&&c.push(o.get(t)),e){case"add":isArray$1(n)?isIntegerKey(t)&&c.push(o.get("length")):(c.push(o.get(ITERATE_KEY)),isMap(n)&&c.push(o.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$1(n)||(c.push(o.get(ITERATE_KEY)),isMap(n)&&c.push(o.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(n)&&c.push(o.get(ITERATE_KEY));break}if(c.length===1)c[0]&&triggerEffects(c[0]);else{const _=[];for(const l of c)l&&_.push(...l);triggerEffects(createDep(_))}}function triggerEffects(n,e){const t=isArray$1(n)?n:[...n];for(const i of t)i.computed&&triggerEffect(i);for(const i of t)i.computed||triggerEffect(i)}function triggerEffect(n,e){(n!==activeEffect||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(isSymbol)),get$1=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const n={};return["includes","indexOf","lastIndexOf"].forEach(e=>{n[e]=function(...t){const i=toRaw(this);for(let r=0,o=this.length;r<o;r++)track(i,"get",r+"");const s=i[e](...t);return s===-1||s===!1?i[e](...t.map(toRaw)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{n[e]=function(...t){pauseTracking();const i=toRaw(this)[e].apply(this,t);return resetTracking(),i}}),n}function hasOwnProperty$1(n){const e=toRaw(this);return track(e,"has",n),e.hasOwnProperty(n)}function createGetter(n=!1,e=!1){return function(i,s,r){if(s==="__v_isReactive")return!n;if(s==="__v_isReadonly")return n;if(s==="__v_isShallow")return e;if(s==="__v_raw"&&r===(n?e?shallowReadonlyMap:readonlyMap:e?shallowReactiveMap:reactiveMap).get(i))return i;const o=isArray$1(i);if(!n){if(o&&hasOwn(arrayInstrumentations,s))return Reflect.get(arrayInstrumentations,s,r);if(s==="hasOwnProperty")return hasOwnProperty$1}const c=Reflect.get(i,s,r);return(isSymbol(s)?builtInSymbols.has(s):isNonTrackableKeys(s))||(n||track(i,"get",s),e)?c:isRef(c)?o&&isIntegerKey(s)?c:c.value:isObject$1(c)?n?readonly(c):reactive(c):c}}const set$1=createSetter(),shallowSet=createSetter(!0);function createSetter(n=!1){return function(t,i,s,r){let o=t[i];if(isReadonly(o)&&isRef(o)&&!isRef(s))return!1;if(!n&&(!isShallow(s)&&!isReadonly(s)&&(o=toRaw(o),s=toRaw(s)),!isArray$1(t)&&isRef(o)&&!isRef(s)))return o.value=s,!0;const c=isArray$1(t)&&isIntegerKey(i)?Number(i)<t.length:hasOwn(t,i),_=Reflect.set(t,i,s,r);return t===toRaw(r)&&(c?hasChanged(s,o)&&trigger(t,"set",i,s):trigger(t,"add",i,s)),_}}function deleteProperty(n,e){const t=hasOwn(n,e);n[e];const i=Reflect.deleteProperty(n,e);return i&&t&&trigger(n,"delete",e,void 0),i}function has$1(n,e){const t=Reflect.has(n,e);return(!isSymbol(e)||!builtInSymbols.has(e))&&track(n,"has",e),t}function ownKeys(n){return track(n,"iterate",isArray$1(n)?"length":ITERATE_KEY),Reflect.ownKeys(n)}const mutableHandlers={get:get$1,set:set$1,deleteProperty,has:has$1,ownKeys},readonlyHandlers={get:readonlyGet,set(n,e){return!0},deleteProperty(n,e){return!0}},shallowReactiveHandlers=extend({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=n=>n,getProto=n=>Reflect.getPrototypeOf(n);function get(n,e,t=!1,i=!1){n=n.__v_raw;const s=toRaw(n),r=toRaw(e);t||(e!==r&&track(s,"get",e),track(s,"get",r));const{has:o}=getProto(s),c=i?toShallow:t?toReadonly:toReactive;if(o.call(s,e))return c(n.get(e));if(o.call(s,r))return c(n.get(r));n!==s&&n.get(e)}function has(n,e=!1){const t=this.__v_raw,i=toRaw(t),s=toRaw(n);return e||(n!==s&&track(i,"has",n),track(i,"has",s)),n===s?t.has(n):t.has(n)||t.has(s)}function size(n,e=!1){return n=n.__v_raw,!e&&track(toRaw(n),"iterate",ITERATE_KEY),Reflect.get(n,"size",n)}function add$1(n){n=toRaw(n);const e=toRaw(this);return getProto(e).has.call(e,n)||(e.add(n),trigger(e,"add",n,n)),this}function set(n,e){e=toRaw(e);const t=toRaw(this),{has:i,get:s}=getProto(t);let r=i.call(t,n);r||(n=toRaw(n),r=i.call(t,n));const o=s.call(t,n);return t.set(n,e),r?hasChanged(e,o)&&trigger(t,"set",n,e):trigger(t,"add",n,e),this}function deleteEntry(n){const e=toRaw(this),{has:t,get:i}=getProto(e);let s=t.call(e,n);s||(n=toRaw(n),s=t.call(e,n)),i&&i.call(e,n);const r=e.delete(n);return s&&trigger(e,"delete",n,void 0),r}function clear(){const n=toRaw(this),e=n.size!==0,t=n.clear();return e&&trigger(n,"clear",void 0,void 0),t}function createForEach(n,e){return function(i,s){const r=this,o=r.__v_raw,c=toRaw(o),_=e?toShallow:n?toReadonly:toReactive;return!n&&track(c,"iterate",ITERATE_KEY),o.forEach((l,d)=>i.call(s,_(l),_(d),r))}}function createIterableMethod(n,e,t){return function(...i){const s=this.__v_raw,r=toRaw(s),o=isMap(r),c=n==="entries"||n===Symbol.iterator&&o,_=n==="keys"&&o,l=s[n](...i),d=t?toShallow:e?toReadonly:toReactive;return!e&&track(r,"iterate",_?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:f,done:g}=l.next();return g?{value:f,done:g}:{value:c?[d(f[0]),d(f[1])]:d(f),done:g}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(n){return function(...e){return n==="delete"?!1:this}}function createInstrumentations(){const n={get(r){return get(this,r)},get size(){return size(this)},has,add:add$1,set,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},e={get(r){return get(this,r,!1,!0)},get size(){return size(this)},has,add:add$1,set,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},t={get(r){return get(this,r,!0)},get size(){return size(this,!0)},has(r){return has.call(this,r,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},i={get(r){return get(this,r,!0,!0)},get size(){return size(this,!0)},has(r){return has.call(this,r,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=createIterableMethod(r,!1,!1),t[r]=createIterableMethod(r,!0,!1),e[r]=createIterableMethod(r,!1,!0),i[r]=createIterableMethod(r,!0,!0)}),[n,t,e,i]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(n,e){const t=e?n?shallowReadonlyInstrumentations:shallowInstrumentations:n?readonlyInstrumentations:mutableInstrumentations;return(i,s,r)=>s==="__v_isReactive"?!n:s==="__v_isReadonly"?n:s==="__v_raw"?i:Reflect.get(hasOwn(t,s)&&s in i?t:i,s,r)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(n){return n.__v_skip||!Object.isExtensible(n)?0:targetTypeMap(toRawType(n))}function reactive(n){return isReadonly(n)?n:createReactiveObject(n,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(n){return createReactiveObject(n,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(n){return createReactiveObject(n,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(n,e,t,i,s){if(!isObject$1(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const r=s.get(n);if(r)return r;const o=getTargetType(n);if(o===0)return n;const c=new Proxy(n,o===2?i:t);return s.set(n,c),c}function isReactive(n){return isReadonly(n)?isReactive(n.__v_raw):!!(n&&n.__v_isReactive)}function isReadonly(n){return!!(n&&n.__v_isReadonly)}function isShallow(n){return!!(n&&n.__v_isShallow)}function isProxy(n){return isReactive(n)||isReadonly(n)}function toRaw(n){const e=n&&n.__v_raw;return e?toRaw(e):n}function markRaw(n){return def(n,"__v_skip",!0),n}const toReactive=n=>isObject$1(n)?reactive(n):n,toReadonly=n=>isObject$1(n)?readonly(n):n;function trackRefValue(n){shouldTrack&&activeEffect&&(n=toRaw(n),trackEffects(n.dep||(n.dep=createDep())))}function triggerRefValue(n,e){n=toRaw(n);const t=n.dep;t&&triggerEffects(t)}function isRef(n){return!!(n&&n.__v_isRef===!0)}function ref(n){return createRef(n,!1)}function shallowRef(n){return createRef(n,!0)}function createRef(n,e){return isRef(n)?n:new RefImpl(n,e)}class RefImpl{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:toRaw(e),this._value=t?e:toReactive(e)}get value(){return trackRefValue(this),this._value}set value(e){const t=this.__v_isShallow||isShallow(e)||isReadonly(e);e=t?e:toRaw(e),hasChanged(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:toReactive(e),triggerRefValue(this))}}function unref(n){return isRef(n)?n.value:n}const shallowUnwrapHandlers={get:(n,e,t)=>unref(Reflect.get(n,e,t)),set:(n,e,t,i)=>{const s=n[e];return isRef(s)&&!isRef(t)?(s.value=t,!0):Reflect.set(n,e,t,i)}};function proxyRefs(n){return isReactive(n)?n:new Proxy(n,shallowUnwrapHandlers)}var _a$1;class ComputedRefImpl{constructor(e,t,i,s){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this[_a$1]=!1,this._dirty=!0,this.effect=new ReactiveEffect(e,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=i}get value(){const e=toRaw(this);return trackRefValue(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}_a$1="__v_isReadonly";function computed$1(n,e,t=!1){let i,s;const r=isFunction(n);return r?(i=n,s=NOOP):(i=n.get,s=n.set),new ComputedRefImpl(i,s,r||!s,t)}function warn(n,...e){}function callWithErrorHandling(n,e,t,i){let s;try{s=i?n(...i):n()}catch(r){handleError(r,e,t)}return s}function callWithAsyncErrorHandling(n,e,t,i){if(isFunction(n)){const r=callWithErrorHandling(n,e,t,i);return r&&isPromise$1(r)&&r.catch(o=>{handleError(o,e,t)}),r}const s=[];for(let r=0;r<n.length;r++)s.push(callWithAsyncErrorHandling(n[r],e,t,i));return s}function handleError(n,e,t,i=!0){const s=e?e.vnode:null;if(e){let r=e.parent;const o=e.proxy,c=t;for(;r;){const l=r.ec;if(l){for(let d=0;d<l.length;d++)if(l[d](n,o,c)===!1)return}r=r.parent}const _=e.appContext.config.errorHandler;if(_){callWithErrorHandling(_,null,10,[n,o,c]);return}}logError(n,t,s,i)}function logError(n,e,t,i=!0){console.error(n)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(n){const e=currentFlushPromise||resolvedPromise;return n?e.then(this?n.bind(this):n):e}function findInsertionIndex(n){let e=flushIndex+1,t=queue.length;for(;e<t;){const i=e+t>>>1;getId(queue[i])<n?e=i+1:t=i}return e}function queueJob(n){(!queue.length||!queue.includes(n,isFlushing&&n.allowRecurse?flushIndex+1:flushIndex))&&(n.id==null?queue.push(n):queue.splice(findInsertionIndex(n.id),0,n),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(n){const e=queue.indexOf(n);e>flushIndex&&queue.splice(e,1)}function queuePostFlushCb(n){isArray$1(n)?pendingPostFlushCbs.push(...n):(!activePostFlushCbs||!activePostFlushCbs.includes(n,n.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(n),queueFlush()}function flushPreFlushCbs(n,e=isFlushing?flushIndex+1:0){for(;e<queue.length;e++){const t=queue[e];t&&t.pre&&(queue.splice(e,1),e--,t())}}function flushPostFlushCbs(n){if(pendingPostFlushCbs.length){const e=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...e);return}for(activePostFlushCbs=e,activePostFlushCbs.sort((t,i)=>getId(t)-getId(i)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=n=>n.id==null?1/0:n.id,comparator=(n,e)=>{const t=getId(n)-getId(e);if(t===0){if(n.pre&&!e.pre)return-1;if(e.pre&&!n.pre)return 1}return t};function flushJobs(n){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);const e=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const t=queue[flushIndex];t&&t.active!==!1&&callWithErrorHandling(t,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit(n,e,...t){if(n.isUnmounted)return;const i=n.vnode.props||EMPTY_OBJ;let s=t;const r=e.startsWith("update:"),o=r&&e.slice(7);if(o&&o in i){const d=`${o==="modelValue"?"model":o}Modifiers`,{number:f,trim:g}=i[d]||EMPTY_OBJ;g&&(s=t.map(b=>isString(b)?b.trim():b)),f&&(s=t.map(looseToNumber))}let c,_=i[c=toHandlerKey(e)]||i[c=toHandlerKey(camelize(e))];!_&&r&&(_=i[c=toHandlerKey(hyphenate(e))]),_&&callWithAsyncErrorHandling(_,n,6,s);const l=i[c+"Once"];if(l){if(!n.emitted)n.emitted={};else if(n.emitted[c])return;n.emitted[c]=!0,callWithAsyncErrorHandling(l,n,6,s)}}function normalizeEmitsOptions(n,e,t=!1){const i=e.emitsCache,s=i.get(n);if(s!==void 0)return s;const r=n.emits;let o={},c=!1;if(!isFunction(n)){const _=l=>{const d=normalizeEmitsOptions(l,e,!0);d&&(c=!0,extend(o,d))};!t&&e.mixins.length&&e.mixins.forEach(_),n.extends&&_(n.extends),n.mixins&&n.mixins.forEach(_)}return!r&&!c?(isObject$1(n)&&i.set(n,null),null):(isArray$1(r)?r.forEach(_=>o[_]=null):extend(o,r),isObject$1(n)&&i.set(n,o),o)}function isEmitListener(n,e){return!n||!isOn(e)?!1:(e=e.slice(2).replace(/Once$/,""),hasOwn(n,e[0].toLowerCase()+e.slice(1))||hasOwn(n,hyphenate(e))||hasOwn(n,e))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(n){const e=currentRenderingInstance;return currentRenderingInstance=n,currentScopeId=n&&n.type.__scopeId||null,e}function withCtx(n,e=currentRenderingInstance,t){if(!e||n._n)return n;const i=(...s)=>{i._d&&setBlockTracking(-1);const r=setCurrentRenderingInstance(e);let o;try{o=n(...s)}finally{setCurrentRenderingInstance(r),i._d&&setBlockTracking(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function markAttrsAccessed(){}function renderComponentRoot(n){const{type:e,vnode:t,proxy:i,withProxy:s,props:r,propsOptions:[o],slots:c,attrs:_,emit:l,render:d,renderCache:f,data:g,setupState:b,ctx:C,inheritAttrs:P}=n;let S,L;const E=setCurrentRenderingInstance(n);try{if(t.shapeFlag&4){const D=s||i;S=normalizeVNode(d.call(D,D,f,r,b,g,C)),L=_}else{const D=e;S=normalizeVNode(D.length>1?D(r,{attrs:_,slots:c,emit:l}):D(r,null)),L=e.props?_:getFunctionalFallthrough(_)}}catch(D){blockStack.length=0,handleError(D,n,1),S=createVNode(Comment)}let M=S;if(L&&P!==!1){const D=Object.keys(L),{shapeFlag:R}=M;D.length&&R&7&&(o&&D.some(isModelListener)&&(L=filterModelListeners(L,o)),M=cloneVNode(M,L))}return t.dirs&&(M=cloneVNode(M),M.dirs=M.dirs?M.dirs.concat(t.dirs):t.dirs),t.transition&&(M.transition=t.transition),S=M,setCurrentRenderingInstance(E),S}const getFunctionalFallthrough=n=>{let e;for(const t in n)(t==="class"||t==="style"||isOn(t))&&((e||(e={}))[t]=n[t]);return e},filterModelListeners=(n,e)=>{const t={};for(const i in n)(!isModelListener(i)||!(i.slice(9)in e))&&(t[i]=n[i]);return t};function shouldUpdateComponent(n,e,t){const{props:i,children:s,component:r}=n,{props:o,children:c,patchFlag:_}=e,l=r.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&_>=0){if(_&1024)return!0;if(_&16)return i?hasPropsChanged(i,o,l):!!o;if(_&8){const d=e.dynamicProps;for(let f=0;f<d.length;f++){const g=d[f];if(o[g]!==i[g]&&!isEmitListener(l,g))return!0}}}else return(s||c)&&(!c||!c.$stable)?!0:i===o?!1:i?o?hasPropsChanged(i,o,l):!0:!!o;return!1}function hasPropsChanged(n,e,t){const i=Object.keys(e);if(i.length!==Object.keys(n).length)return!0;for(let s=0;s<i.length;s++){const r=i[s];if(e[r]!==n[r]&&!isEmitListener(t,r))return!0}return!1}function updateHOCHostEl({vnode:n,parent:e},t){for(;e&&e.subTree===n;)(n=e.vnode).el=t,e=e.parent}const isSuspense=n=>n.__isSuspense;function queueEffectWithSuspense(n,e){e&&e.pendingBranch?isArray$1(n)?e.effects.push(...n):e.effects.push(n):queuePostFlushCb(n)}function provide(n,e){if(currentInstance){let t=currentInstance.provides;const i=currentInstance.parent&&currentInstance.parent.provides;i===t&&(t=currentInstance.provides=Object.create(i)),t[n]=e}}function inject(n,e,t=!1){const i=currentInstance||currentRenderingInstance;if(i){const s=i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(s&&n in s)return s[n];if(arguments.length>1)return t&&isFunction(e)?e.call(i.proxy):e}}const INITIAL_WATCHER_VALUE={};function watch(n,e,t){return doWatch(n,e,t)}function doWatch(n,e,{immediate:t,deep:i,flush:s,onTrack:r,onTrigger:o}=EMPTY_OBJ){const c=getCurrentScope()===(currentInstance==null?void 0:currentInstance.scope)?currentInstance:null;let _,l=!1,d=!1;if(isRef(n)?(_=()=>n.value,l=isShallow(n)):isReactive(n)?(_=()=>n,i=!0):isArray$1(n)?(d=!0,l=n.some(M=>isReactive(M)||isShallow(M)),_=()=>n.map(M=>{if(isRef(M))return M.value;if(isReactive(M))return traverse(M);if(isFunction(M))return callWithErrorHandling(M,c,2)})):isFunction(n)?e?_=()=>callWithErrorHandling(n,c,2):_=()=>{if(!(c&&c.isUnmounted))return f&&f(),callWithAsyncErrorHandling(n,c,3,[g])}:_=NOOP,e&&i){const M=_;_=()=>traverse(M())}let f,g=M=>{f=L.onStop=()=>{callWithErrorHandling(M,c,4)}},b;if(isInSSRComponentSetup)if(g=NOOP,e?t&&callWithAsyncErrorHandling(e,c,3,[_(),d?[]:void 0,g]):_(),s==="sync"){const M=useSSRContext();b=M.__watcherHandles||(M.__watcherHandles=[])}else return NOOP;let C=d?new Array(n.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const P=()=>{if(L.active)if(e){const M=L.run();(i||l||(d?M.some((D,R)=>hasChanged(D,C[R])):hasChanged(M,C)))&&(f&&f(),callWithAsyncErrorHandling(e,c,3,[M,C===INITIAL_WATCHER_VALUE?void 0:d&&C[0]===INITIAL_WATCHER_VALUE?[]:C,g]),C=M)}else L.run()};P.allowRecurse=!!e;let S;s==="sync"?S=P:s==="post"?S=()=>queuePostRenderEffect(P,c&&c.suspense):(P.pre=!0,c&&(P.id=c.uid),S=()=>queueJob(P));const L=new ReactiveEffect(_,S);e?t?P():C=L.run():s==="post"?queuePostRenderEffect(L.run.bind(L),c&&c.suspense):L.run();const E=()=>{L.stop(),c&&c.scope&&remove(c.scope.effects,L)};return b&&b.push(E),E}function instanceWatch(n,e,t){const i=this.proxy,s=isString(n)?n.includes(".")?createPathGetter(i,n):()=>i[n]:n.bind(i,i);let r;isFunction(e)?r=e:(r=e.handler,t=e);const o=currentInstance;setCurrentInstance(this);const c=doWatch(s,r.bind(i),t);return o?setCurrentInstance(o):unsetCurrentInstance(),c}function createPathGetter(n,e){const t=e.split(".");return()=>{let i=n;for(let s=0;s<t.length&&i;s++)i=i[t[s]];return i}}function traverse(n,e){if(!isObject$1(n)||n.__v_skip||(e=e||new Set,e.has(n)))return n;if(e.add(n),isRef(n))traverse(n.value,e);else if(isArray$1(n))for(let t=0;t<n.length;t++)traverse(n[t],e);else if(isSet(n)||isMap(n))n.forEach(t=>{traverse(t,e)});else if(isPlainObject(n))for(const t in n)traverse(n[t],e);return n}function useTransitionState(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{n.isMounted=!0}),onBeforeUnmount(()=>{n.isUnmounting=!0}),n}const TransitionHookValidator=[Function,Array],BaseTransitionImpl={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},setup(n,{slots:e}){const t=getCurrentInstance(),i=useTransitionState();let s;return()=>{const r=e.default&&getTransitionRawChildren(e.default(),!0);if(!r||!r.length)return;let o=r[0];if(r.length>1){for(const P of r)if(P.type!==Comment){o=P;break}}const c=toRaw(n),{mode:_}=c;if(i.isLeaving)return emptyPlaceholder(o);const l=getKeepAliveChild(o);if(!l)return emptyPlaceholder(o);const d=resolveTransitionHooks(l,c,i,t);setTransitionHooks(l,d);const f=t.subTree,g=f&&getKeepAliveChild(f);let b=!1;const{getTransitionKey:C}=l.type;if(C){const P=C();s===void 0?s=P:P!==s&&(s=P,b=!0)}if(g&&g.type!==Comment&&(!isSameVNodeType(l,g)||b)){const P=resolveTransitionHooks(g,c,i,t);if(setTransitionHooks(g,P),_==="out-in")return i.isLeaving=!0,P.afterLeave=()=>{i.isLeaving=!1,t.update.active!==!1&&t.update()},emptyPlaceholder(o);_==="in-out"&&l.type!==Comment&&(P.delayLeave=(S,L,E)=>{const M=getLeavingNodesForType(i,g);M[String(g.key)]=g,S._leaveCb=()=>{L(),S._leaveCb=void 0,delete d.delayedLeave},d.delayedLeave=E})}return o}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(n,e){const{leavingVNodes:t}=n;let i=t.get(e.type);return i||(i=Object.create(null),t.set(e.type,i)),i}function resolveTransitionHooks(n,e,t,i){const{appear:s,mode:r,persisted:o=!1,onBeforeEnter:c,onEnter:_,onAfterEnter:l,onEnterCancelled:d,onBeforeLeave:f,onLeave:g,onAfterLeave:b,onLeaveCancelled:C,onBeforeAppear:P,onAppear:S,onAfterAppear:L,onAppearCancelled:E}=e,M=String(n.key),D=getLeavingNodesForType(t,n),R=($,B)=>{$&&callWithAsyncErrorHandling($,i,9,B)},k=($,B)=>{const F=B[1];R($,B),isArray$1($)?$.every(z=>z.length<=1)&&F():$.length<=1&&F()},N={mode:r,persisted:o,beforeEnter($){let B=c;if(!t.isMounted)if(s)B=P||c;else return;$._leaveCb&&$._leaveCb(!0);const F=D[M];F&&isSameVNodeType(n,F)&&F.el._leaveCb&&F.el._leaveCb(),R(B,[$])},enter($){let B=_,F=l,z=d;if(!t.isMounted)if(s)B=S||_,F=L||l,z=E||d;else return;let Y=!1;const J=$._enterCb=q=>{Y||(Y=!0,q?R(z,[$]):R(F,[$]),N.delayedLeave&&N.delayedLeave(),$._enterCb=void 0)};B?k(B,[$,J]):J()},leave($,B){const F=String(n.key);if($._enterCb&&$._enterCb(!0),t.isUnmounting)return B();R(f,[$]);let z=!1;const Y=$._leaveCb=J=>{z||(z=!0,B(),J?R(C,[$]):R(b,[$]),$._leaveCb=void 0,D[F]===n&&delete D[F])};D[F]=n,g?k(g,[$,Y]):Y()},clone($){return resolveTransitionHooks($,e,t,i)}};return N}function emptyPlaceholder(n){if(isKeepAlive(n))return n=cloneVNode(n),n.children=null,n}function getKeepAliveChild(n){return isKeepAlive(n)?n.children?n.children[0]:void 0:n}function setTransitionHooks(n,e){n.shapeFlag&6&&n.component?setTransitionHooks(n.component.subTree,e):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function getTransitionRawChildren(n,e=!1,t){let i=[],s=0;for(let r=0;r<n.length;r++){let o=n[r];const c=t==null?o.key:String(t)+String(o.key!=null?o.key:r);o.type===Fragment?(o.patchFlag&128&&s++,i=i.concat(getTransitionRawChildren(o.children,e,c))):(e||o.type!==Comment)&&i.push(c!=null?cloneVNode(o,{key:c}):o)}if(s>1)for(let r=0;r<i.length;r++)i[r].patchFlag=-2;return i}function defineComponent(n){return isFunction(n)?{setup:n,name:n.name}:n}const isAsyncWrapper=n=>!!n.type.__asyncLoader,isKeepAlive=n=>n.type.__isKeepAlive;function onActivated(n,e){registerKeepAliveHook(n,"a",e)}function onDeactivated(n,e){registerKeepAliveHook(n,"da",e)}function registerKeepAliveHook(n,e,t=currentInstance){const i=n.__wdc||(n.__wdc=()=>{let s=t;for(;s;){if(s.isDeactivated)return;s=s.parent}return n()});if(injectHook(e,i,t),t){let s=t.parent;for(;s&&s.parent;)isKeepAlive(s.parent.vnode)&&injectToKeepAliveRoot(i,e,t,s),s=s.parent}}function injectToKeepAliveRoot(n,e,t,i){const s=injectHook(e,n,i,!0);onUnmounted(()=>{remove(i[e],s)},t)}function injectHook(n,e,t=currentInstance,i=!1){if(t){const s=t[n]||(t[n]=[]),r=e.__weh||(e.__weh=(...o)=>{if(t.isUnmounted)return;pauseTracking(),setCurrentInstance(t);const c=callWithAsyncErrorHandling(e,t,n,o);return unsetCurrentInstance(),resetTracking(),c});return i?s.unshift(r):s.push(r),r}}const createHook=n=>(e,t=currentInstance)=>(!isInSSRComponentSetup||n==="sp")&&injectHook(n,(...i)=>e(...i),t),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(n,e=currentInstance){injectHook("ec",n,e)}function invokeDirectiveHook(n,e,t,i){const s=n.dirs,r=e&&e.dirs;for(let o=0;o<s.length;o++){const c=s[o];r&&(c.oldValue=r[o].value);let _=c.dir[i];_&&(pauseTracking(),callWithAsyncErrorHandling(_,t,8,[n.el,c,n,e]),resetTracking())}}const NULL_DYNAMIC_COMPONENT=Symbol(),getPublicInstance=n=>n?isStatefulComponent(n)?getExposeProxy(n)||n.proxy:getPublicInstance(n.parent):null,publicPropertiesMap=extend(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>getPublicInstance(n.parent),$root:n=>getPublicInstance(n.root),$emit:n=>n.emit,$options:n=>resolveMergedOptions(n),$forceUpdate:n=>n.f||(n.f=()=>queueJob(n.update)),$nextTick:n=>n.n||(n.n=nextTick.bind(n.proxy)),$watch:n=>instanceWatch.bind(n)}),hasSetupBinding=(n,e)=>n!==EMPTY_OBJ&&!n.__isScriptSetup&&hasOwn(n,e),PublicInstanceProxyHandlers={get({_:n},e){const{ctx:t,setupState:i,data:s,props:r,accessCache:o,type:c,appContext:_}=n;let l;if(e[0]!=="$"){const b=o[e];if(b!==void 0)switch(b){case 1:return i[e];case 2:return s[e];case 4:return t[e];case 3:return r[e]}else{if(hasSetupBinding(i,e))return o[e]=1,i[e];if(s!==EMPTY_OBJ&&hasOwn(s,e))return o[e]=2,s[e];if((l=n.propsOptions[0])&&hasOwn(l,e))return o[e]=3,r[e];if(t!==EMPTY_OBJ&&hasOwn(t,e))return o[e]=4,t[e];shouldCacheAccess&&(o[e]=0)}}const d=publicPropertiesMap[e];let f,g;if(d)return e==="$attrs"&&track(n,"get",e),d(n);if((f=c.__cssModules)&&(f=f[e]))return f;if(t!==EMPTY_OBJ&&hasOwn(t,e))return o[e]=4,t[e];if(g=_.config.globalProperties,hasOwn(g,e))return g[e]},set({_:n},e,t){const{data:i,setupState:s,ctx:r}=n;return hasSetupBinding(s,e)?(s[e]=t,!0):i!==EMPTY_OBJ&&hasOwn(i,e)?(i[e]=t,!0):hasOwn(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(r[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:i,appContext:s,propsOptions:r}},o){let c;return!!t[o]||n!==EMPTY_OBJ&&hasOwn(n,o)||hasSetupBinding(e,o)||(c=r[0])&&hasOwn(c,o)||hasOwn(i,o)||hasOwn(publicPropertiesMap,o)||hasOwn(s.config.globalProperties,o)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:hasOwn(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};let shouldCacheAccess=!0;function applyOptions(n){const e=resolveMergedOptions(n),t=n.proxy,i=n.ctx;shouldCacheAccess=!1,e.beforeCreate&&callHook(e.beforeCreate,n,"bc");const{data:s,computed:r,methods:o,watch:c,provide:_,inject:l,created:d,beforeMount:f,mounted:g,beforeUpdate:b,updated:C,activated:P,deactivated:S,beforeDestroy:L,beforeUnmount:E,destroyed:M,unmounted:D,render:R,renderTracked:k,renderTriggered:N,errorCaptured:$,serverPrefetch:B,expose:F,inheritAttrs:z,components:Y,directives:J,filters:q}=e;if(l&&resolveInjections(l,i,null,n.appContext.config.unwrapInjectedRef),o)for(const ie in o){const te=o[ie];isFunction(te)&&(i[ie]=te.bind(t))}if(s){const ie=s.call(t,t);isObject$1(ie)&&(n.data=reactive(ie))}if(shouldCacheAccess=!0,r)for(const ie in r){const te=r[ie],ce=isFunction(te)?te.bind(t,t):isFunction(te.get)?te.get.bind(t,t):NOOP,xe=!isFunction(te)&&isFunction(te.set)?te.set.bind(t):NOOP,he=computed({get:ce,set:xe});Object.defineProperty(i,ie,{enumerable:!0,configurable:!0,get:()=>he.value,set:Q=>he.value=Q})}if(c)for(const ie in c)createWatcher(c[ie],i,t,ie);if(_){const ie=isFunction(_)?_.call(t):_;Reflect.ownKeys(ie).forEach(te=>{provide(te,ie[te])})}d&&callHook(d,n,"c");function j(ie,te){isArray$1(te)?te.forEach(ce=>ie(ce.bind(t))):te&&ie(te.bind(t))}if(j(onBeforeMount,f),j(onMounted,g),j(onBeforeUpdate,b),j(onUpdated,C),j(onActivated,P),j(onDeactivated,S),j(onErrorCaptured,$),j(onRenderTracked,k),j(onRenderTriggered,N),j(onBeforeUnmount,E),j(onUnmounted,D),j(onServerPrefetch,B),isArray$1(F))if(F.length){const ie=n.exposed||(n.exposed={});F.forEach(te=>{Object.defineProperty(ie,te,{get:()=>t[te],set:ce=>t[te]=ce})})}else n.exposed||(n.exposed={});R&&n.render===NOOP&&(n.render=R),z!=null&&(n.inheritAttrs=z),Y&&(n.components=Y),J&&(n.directives=J)}function resolveInjections(n,e,t=NOOP,i=!1){isArray$1(n)&&(n=normalizeInject(n));for(const s in n){const r=n[s];let o;isObject$1(r)?"default"in r?o=inject(r.from||s,r.default,!0):o=inject(r.from||s):o=inject(r),isRef(o)&&i?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>o.value,set:c=>o.value=c}):e[s]=o}}function callHook(n,e,t){callWithAsyncErrorHandling(isArray$1(n)?n.map(i=>i.bind(e.proxy)):n.bind(e.proxy),e,t)}function createWatcher(n,e,t,i){const s=i.includes(".")?createPathGetter(t,i):()=>t[i];if(isString(n)){const r=e[n];isFunction(r)&&watch(s,r)}else if(isFunction(n))watch(s,n.bind(t));else if(isObject$1(n))if(isArray$1(n))n.forEach(r=>createWatcher(r,e,t,i));else{const r=isFunction(n.handler)?n.handler.bind(t):e[n.handler];isFunction(r)&&watch(s,r,n)}}function resolveMergedOptions(n){const e=n.type,{mixins:t,extends:i}=e,{mixins:s,optionsCache:r,config:{optionMergeStrategies:o}}=n.appContext,c=r.get(e);let _;return c?_=c:!s.length&&!t&&!i?_=e:(_={},s.length&&s.forEach(l=>mergeOptions$1(_,l,o,!0)),mergeOptions$1(_,e,o)),isObject$1(e)&&r.set(e,_),_}function mergeOptions$1(n,e,t,i=!1){const{mixins:s,extends:r}=e;r&&mergeOptions$1(n,r,t,!0),s&&s.forEach(o=>mergeOptions$1(n,o,t,!0));for(const o in e)if(!(i&&o==="expose")){const c=internalOptionMergeStrats[o]||t&&t[o];n[o]=c?c(n[o],e[o]):e[o]}return n}const internalOptionMergeStrats={data:mergeDataFn,props:mergeObjectOptions,emits:mergeObjectOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(n,e){return e?n?function(){return extend(isFunction(n)?n.call(this,this):n,isFunction(e)?e.call(this,this):e)}:e:n}function mergeInject(n,e){return mergeObjectOptions(normalizeInject(n),normalizeInject(e))}function normalizeInject(n){if(isArray$1(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function mergeAsArray(n,e){return n?[...new Set([].concat(n,e))]:e}function mergeObjectOptions(n,e){return n?extend(extend(Object.create(null),n),e):e}function mergeWatchOptions(n,e){if(!n)return e;if(!e)return n;const t=extend(Object.create(null),n);for(const i in e)t[i]=mergeAsArray(n[i],e[i]);return t}function initProps(n,e,t,i=!1){const s={},r={};def(r,InternalObjectKey,1),n.propsDefaults=Object.create(null),setFullProps(n,e,s,r);for(const o in n.propsOptions[0])o in s||(s[o]=void 0);t?n.props=i?s:shallowReactive(s):n.type.props?n.props=s:n.props=r,n.attrs=r}function updateProps(n,e,t,i){const{props:s,attrs:r,vnode:{patchFlag:o}}=n,c=toRaw(s),[_]=n.propsOptions;let l=!1;if((i||o>0)&&!(o&16)){if(o&8){const d=n.vnode.dynamicProps;for(let f=0;f<d.length;f++){let g=d[f];if(isEmitListener(n.emitsOptions,g))continue;const b=e[g];if(_)if(hasOwn(r,g))b!==r[g]&&(r[g]=b,l=!0);else{const C=camelize(g);s[C]=resolvePropValue(_,c,C,b,n,!1)}else b!==r[g]&&(r[g]=b,l=!0)}}}else{setFullProps(n,e,s,r)&&(l=!0);let d;for(const f in c)(!e||!hasOwn(e,f)&&((d=hyphenate(f))===f||!hasOwn(e,d)))&&(_?t&&(t[f]!==void 0||t[d]!==void 0)&&(s[f]=resolvePropValue(_,c,f,void 0,n,!0)):delete s[f]);if(r!==c)for(const f in r)(!e||!hasOwn(e,f))&&(delete r[f],l=!0)}l&&trigger(n,"set","$attrs")}function setFullProps(n,e,t,i){const[s,r]=n.propsOptions;let o=!1,c;if(e)for(let _ in e){if(isReservedProp(_))continue;const l=e[_];let d;s&&hasOwn(s,d=camelize(_))?!r||!r.includes(d)?t[d]=l:(c||(c={}))[d]=l:isEmitListener(n.emitsOptions,_)||(!(_ in i)||l!==i[_])&&(i[_]=l,o=!0)}if(r){const _=toRaw(t),l=c||EMPTY_OBJ;for(let d=0;d<r.length;d++){const f=r[d];t[f]=resolvePropValue(s,_,f,l[f],n,!hasOwn(l,f))}}return o}function resolvePropValue(n,e,t,i,s,r){const o=n[t];if(o!=null){const c=hasOwn(o,"default");if(c&&i===void 0){const _=o.default;if(o.type!==Function&&isFunction(_)){const{propsDefaults:l}=s;t in l?i=l[t]:(setCurrentInstance(s),i=l[t]=_.call(null,e),unsetCurrentInstance())}else i=_}o[0]&&(r&&!c?i=!1:o[1]&&(i===""||i===hyphenate(t))&&(i=!0))}return i}function normalizePropsOptions(n,e,t=!1){const i=e.propsCache,s=i.get(n);if(s)return s;const r=n.props,o={},c=[];let _=!1;if(!isFunction(n)){const d=f=>{_=!0;const[g,b]=normalizePropsOptions(f,e,!0);extend(o,g),b&&c.push(...b)};!t&&e.mixins.length&&e.mixins.forEach(d),n.extends&&d(n.extends),n.mixins&&n.mixins.forEach(d)}if(!r&&!_)return isObject$1(n)&&i.set(n,EMPTY_ARR),EMPTY_ARR;if(isArray$1(r))for(let d=0;d<r.length;d++){const f=camelize(r[d]);validatePropName(f)&&(o[f]=EMPTY_OBJ)}else if(r)for(const d in r){const f=camelize(d);if(validatePropName(f)){const g=r[d],b=o[f]=isArray$1(g)||isFunction(g)?{type:g}:Object.assign({},g);if(b){const C=getTypeIndex(Boolean,b.type),P=getTypeIndex(String,b.type);b[0]=C>-1,b[1]=P<0||C<P,(C>-1||hasOwn(b,"default"))&&c.push(f)}}}const l=[o,c];return isObject$1(n)&&i.set(n,l),l}function validatePropName(n){return n[0]!=="$"}function getType(n){const e=n&&n.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:n===null?"null":""}function isSameType(n,e){return getType(n)===getType(e)}function getTypeIndex(n,e){return isArray$1(e)?e.findIndex(t=>isSameType(t,n)):isFunction(e)&&isSameType(e,n)?0:-1}const isInternalKey=n=>n[0]==="_"||n==="$stable",normalizeSlotValue=n=>isArray$1(n)?n.map(normalizeVNode):[normalizeVNode(n)],normalizeSlot$1=(n,e,t)=>{if(e._n)return e;const i=withCtx((...s)=>normalizeSlotValue(e(...s)),t);return i._c=!1,i},normalizeObjectSlots=(n,e,t)=>{const i=n._ctx;for(const s in n){if(isInternalKey(s))continue;const r=n[s];if(isFunction(r))e[s]=normalizeSlot$1(s,r,i);else if(r!=null){const o=normalizeSlotValue(r);e[s]=()=>o}}},normalizeVNodeSlots=(n,e)=>{const t=normalizeSlotValue(e);n.slots.default=()=>t},initSlots=(n,e)=>{if(n.vnode.shapeFlag&32){const t=e._;t?(n.slots=toRaw(e),def(e,"_",t)):normalizeObjectSlots(e,n.slots={})}else n.slots={},e&&normalizeVNodeSlots(n,e);def(n.slots,InternalObjectKey,1)},updateSlots=(n,e,t)=>{const{vnode:i,slots:s}=n;let r=!0,o=EMPTY_OBJ;if(i.shapeFlag&32){const c=e._;c?t&&c===1?r=!1:(extend(s,e),!t&&c===1&&delete s._):(r=!e.$stable,normalizeObjectSlots(e,s)),o=e}else e&&(normalizeVNodeSlots(n,e),o={default:1});if(r)for(const c in s)!isInternalKey(c)&&!(c in o)&&delete s[c]};function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(n,e){return function(i,s=null){isFunction(i)||(i=Object.assign({},i)),s!=null&&!isObject$1(s)&&(s=null);const r=createAppContext(),o=new Set;let c=!1;const _=r.app={_uid:uid$1++,_component:i,_props:s,_container:null,_context:r,_instance:null,version,get config(){return r.config},set config(l){},use(l,...d){return o.has(l)||(l&&isFunction(l.install)?(o.add(l),l.install(_,...d)):isFunction(l)&&(o.add(l),l(_,...d))),_},mixin(l){return r.mixins.includes(l)||r.mixins.push(l),_},component(l,d){return d?(r.components[l]=d,_):r.components[l]},directive(l,d){return d?(r.directives[l]=d,_):r.directives[l]},mount(l,d,f){if(!c){const g=createVNode(i,s);return g.appContext=r,d&&e?e(g,l):n(g,l,f),c=!0,_._container=l,l.__vue_app__=_,getExposeProxy(g.component)||g.component.proxy}},unmount(){c&&(n(null,_._container),delete _._container.__vue_app__)},provide(l,d){return r.provides[l]=d,_}};return _}}function setRef(n,e,t,i,s=!1){if(isArray$1(n)){n.forEach((g,b)=>setRef(g,e&&(isArray$1(e)?e[b]:e),t,i,s));return}if(isAsyncWrapper(i)&&!s)return;const r=i.shapeFlag&4?getExposeProxy(i.component)||i.component.proxy:i.el,o=s?null:r,{i:c,r:_}=n,l=e&&e.r,d=c.refs===EMPTY_OBJ?c.refs={}:c.refs,f=c.setupState;if(l!=null&&l!==_&&(isString(l)?(d[l]=null,hasOwn(f,l)&&(f[l]=null)):isRef(l)&&(l.value=null)),isFunction(_))callWithErrorHandling(_,c,12,[o,d]);else{const g=isString(_),b=isRef(_);if(g||b){const C=()=>{if(n.f){const P=g?hasOwn(f,_)?f[_]:d[_]:_.value;s?isArray$1(P)&&remove(P,r):isArray$1(P)?P.includes(r)||P.push(r):g?(d[_]=[r],hasOwn(f,_)&&(f[_]=d[_])):(_.value=[r],n.k&&(d[n.k]=_.value))}else g?(d[_]=o,hasOwn(f,_)&&(f[_]=o)):b&&(_.value=o,n.k&&(d[n.k]=o))};o?(C.id=-1,queuePostRenderEffect(C,t)):C()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(n){return baseCreateRenderer(n)}function baseCreateRenderer(n,e){const t=getGlobalThis();t.__VUE__=!0;const{insert:i,remove:s,patchProp:r,createElement:o,createText:c,createComment:_,setText:l,setElementText:d,parentNode:f,nextSibling:g,setScopeId:b=NOOP,insertStaticContent:C}=n,P=(ae,we,ke,Ne=null,$e=null,qe=null,Je=!1,ve=null,W=!!we.dynamicChildren)=>{if(ae===we)return;ae&&!isSameVNodeType(ae,we)&&(Ne=Ie(ae),Q(ae,$e,qe,!0),ae=null),we.patchFlag===-2&&(W=!1,we.dynamicChildren=null);const{type:U,ref:X,shapeFlag:oe}=we;switch(U){case Text:S(ae,we,ke,Ne);break;case Comment:L(ae,we,ke,Ne);break;case Static:ae==null&&E(we,ke,Ne,Je);break;case Fragment:Y(ae,we,ke,Ne,$e,qe,Je,ve,W);break;default:oe&1?R(ae,we,ke,Ne,$e,qe,Je,ve,W):oe&6?J(ae,we,ke,Ne,$e,qe,Je,ve,W):(oe&64||oe&128)&&U.process(ae,we,ke,Ne,$e,qe,Je,ve,W,Te)}X!=null&&$e&&setRef(X,ae&&ae.ref,qe,we||ae,!we)},S=(ae,we,ke,Ne)=>{if(ae==null)i(we.el=c(we.children),ke,Ne);else{const $e=we.el=ae.el;we.children!==ae.children&&l($e,we.children)}},L=(ae,we,ke,Ne)=>{ae==null?i(we.el=_(we.children||""),ke,Ne):we.el=ae.el},E=(ae,we,ke,Ne)=>{[ae.el,ae.anchor]=C(ae.children,we,ke,Ne,ae.el,ae.anchor)},M=({el:ae,anchor:we},ke,Ne)=>{let $e;for(;ae&&ae!==we;)$e=g(ae),i(ae,ke,Ne),ae=$e;i(we,ke,Ne)},D=({el:ae,anchor:we})=>{let ke;for(;ae&&ae!==we;)ke=g(ae),s(ae),ae=ke;s(we)},R=(ae,we,ke,Ne,$e,qe,Je,ve,W)=>{Je=Je||we.type==="svg",ae==null?k(we,ke,Ne,$e,qe,Je,ve,W):B(ae,we,$e,qe,Je,ve,W)},k=(ae,we,ke,Ne,$e,qe,Je,ve)=>{let W,U;const{type:X,props:oe,shapeFlag:_e,transition:Pe,dirs:De}=ae;if(W=ae.el=o(ae.type,qe,oe&&oe.is,oe),_e&8?d(W,ae.children):_e&16&&$(ae.children,W,null,Ne,$e,qe&&X!=="foreignObject",Je,ve),De&&invokeDirectiveHook(ae,null,Ne,"created"),N(W,ae,ae.scopeId,Je,Ne),oe){for(const Ve in oe)Ve!=="value"&&!isReservedProp(Ve)&&r(W,Ve,null,oe[Ve],qe,ae.children,Ne,$e,Se);"value"in oe&&r(W,"value",null,oe.value),(U=oe.onVnodeBeforeMount)&&invokeVNodeHook(U,Ne,ae)}De&&invokeDirectiveHook(ae,null,Ne,"beforeMount");const Me=(!$e||$e&&!$e.pendingBranch)&&Pe&&!Pe.persisted;Me&&Pe.beforeEnter(W),i(W,we,ke),((U=oe&&oe.onVnodeMounted)||Me||De)&&queuePostRenderEffect(()=>{U&&invokeVNodeHook(U,Ne,ae),Me&&Pe.enter(W),De&&invokeDirectiveHook(ae,null,Ne,"mounted")},$e)},N=(ae,we,ke,Ne,$e)=>{if(ke&&b(ae,ke),Ne)for(let qe=0;qe<Ne.length;qe++)b(ae,Ne[qe]);if($e){let qe=$e.subTree;if(we===qe){const Je=$e.vnode;N(ae,Je,Je.scopeId,Je.slotScopeIds,$e.parent)}}},$=(ae,we,ke,Ne,$e,qe,Je,ve,W=0)=>{for(let U=W;U<ae.length;U++){const X=ae[U]=ve?cloneIfMounted(ae[U]):normalizeVNode(ae[U]);P(null,X,we,ke,Ne,$e,qe,Je,ve)}},B=(ae,we,ke,Ne,$e,qe,Je)=>{const ve=we.el=ae.el;let{patchFlag:W,dynamicChildren:U,dirs:X}=we;W|=ae.patchFlag&16;const oe=ae.props||EMPTY_OBJ,_e=we.props||EMPTY_OBJ;let Pe;ke&&toggleRecurse(ke,!1),(Pe=_e.onVnodeBeforeUpdate)&&invokeVNodeHook(Pe,ke,we,ae),X&&invokeDirectiveHook(we,ae,ke,"beforeUpdate"),ke&&toggleRecurse(ke,!0);const De=$e&&we.type!=="foreignObject";if(U?F(ae.dynamicChildren,U,ve,ke,Ne,De,qe):Je||te(ae,we,ve,null,ke,Ne,De,qe,!1),W>0){if(W&16)z(ve,we,oe,_e,ke,Ne,$e);else if(W&2&&oe.class!==_e.class&&r(ve,"class",null,_e.class,$e),W&4&&r(ve,"style",oe.style,_e.style,$e),W&8){const Me=we.dynamicProps;for(let Ve=0;Ve<Me.length;Ve++){const Ze=Me[Ve],Ue=oe[Ze],xt=_e[Ze];(xt!==Ue||Ze==="value")&&r(ve,Ze,Ue,xt,$e,ae.children,ke,Ne,Se)}}W&1&&ae.children!==we.children&&d(ve,we.children)}else!Je&&U==null&&z(ve,we,oe,_e,ke,Ne,$e);((Pe=_e.onVnodeUpdated)||X)&&queuePostRenderEffect(()=>{Pe&&invokeVNodeHook(Pe,ke,we,ae),X&&invokeDirectiveHook(we,ae,ke,"updated")},Ne)},F=(ae,we,ke,Ne,$e,qe,Je)=>{for(let ve=0;ve<we.length;ve++){const W=ae[ve],U=we[ve],X=W.el&&(W.type===Fragment||!isSameVNodeType(W,U)||W.shapeFlag&70)?f(W.el):ke;P(W,U,X,null,Ne,$e,qe,Je,!0)}},z=(ae,we,ke,Ne,$e,qe,Je)=>{if(ke!==Ne){if(ke!==EMPTY_OBJ)for(const ve in ke)!isReservedProp(ve)&&!(ve in Ne)&&r(ae,ve,ke[ve],null,Je,we.children,$e,qe,Se);for(const ve in Ne){if(isReservedProp(ve))continue;const W=Ne[ve],U=ke[ve];W!==U&&ve!=="value"&&r(ae,ve,U,W,Je,we.children,$e,qe,Se)}"value"in Ne&&r(ae,"value",ke.value,Ne.value)}},Y=(ae,we,ke,Ne,$e,qe,Je,ve,W)=>{const U=we.el=ae?ae.el:c(""),X=we.anchor=ae?ae.anchor:c("");let{patchFlag:oe,dynamicChildren:_e,slotScopeIds:Pe}=we;Pe&&(ve=ve?ve.concat(Pe):Pe),ae==null?(i(U,ke,Ne),i(X,ke,Ne),$(we.children,ke,X,$e,qe,Je,ve,W)):oe>0&&oe&64&&_e&&ae.dynamicChildren?(F(ae.dynamicChildren,_e,ke,$e,qe,Je,ve),(we.key!=null||$e&&we===$e.subTree)&&traverseStaticChildren(ae,we,!0)):te(ae,we,ke,X,$e,qe,Je,ve,W)},J=(ae,we,ke,Ne,$e,qe,Je,ve,W)=>{we.slotScopeIds=ve,ae==null?we.shapeFlag&512?$e.ctx.activate(we,ke,Ne,Je,W):q(we,ke,Ne,$e,qe,Je,W):le(ae,we,W)},q=(ae,we,ke,Ne,$e,qe,Je)=>{const ve=ae.component=createComponentInstance(ae,Ne,$e);if(isKeepAlive(ae)&&(ve.ctx.renderer=Te),setupComponent(ve),ve.asyncDep){if($e&&$e.registerDep(ve,j),!ae.el){const W=ve.subTree=createVNode(Comment);L(null,W,we,ke)}return}j(ve,ae,we,ke,$e,qe,Je)},le=(ae,we,ke)=>{const Ne=we.component=ae.component;if(shouldUpdateComponent(ae,we,ke))if(Ne.asyncDep&&!Ne.asyncResolved){ie(Ne,we,ke);return}else Ne.next=we,invalidateJob(Ne.update),Ne.update();else we.el=ae.el,Ne.vnode=we},j=(ae,we,ke,Ne,$e,qe,Je)=>{const ve=()=>{if(ae.isMounted){let{next:X,bu:oe,u:_e,parent:Pe,vnode:De}=ae,Me=X,Ve;toggleRecurse(ae,!1),X?(X.el=De.el,ie(ae,X,Je)):X=De,oe&&invokeArrayFns(oe),(Ve=X.props&&X.props.onVnodeBeforeUpdate)&&invokeVNodeHook(Ve,Pe,X,De),toggleRecurse(ae,!0);const Ze=renderComponentRoot(ae),Ue=ae.subTree;ae.subTree=Ze,P(Ue,Ze,f(Ue.el),Ie(Ue),ae,$e,qe),X.el=Ze.el,Me===null&&updateHOCHostEl(ae,Ze.el),_e&&queuePostRenderEffect(_e,$e),(Ve=X.props&&X.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(Ve,Pe,X,De),$e)}else{let X;const{el:oe,props:_e}=we,{bm:Pe,m:De,parent:Me}=ae,Ve=isAsyncWrapper(we);if(toggleRecurse(ae,!1),Pe&&invokeArrayFns(Pe),!Ve&&(X=_e&&_e.onVnodeBeforeMount)&&invokeVNodeHook(X,Me,we),toggleRecurse(ae,!0),oe&&ge){const Ze=()=>{ae.subTree=renderComponentRoot(ae),ge(oe,ae.subTree,ae,$e,null)};Ve?we.type.__asyncLoader().then(()=>!ae.isUnmounted&&Ze()):Ze()}else{const Ze=ae.subTree=renderComponentRoot(ae);P(null,Ze,ke,Ne,ae,$e,qe),we.el=Ze.el}if(De&&queuePostRenderEffect(De,$e),!Ve&&(X=_e&&_e.onVnodeMounted)){const Ze=we;queuePostRenderEffect(()=>invokeVNodeHook(X,Me,Ze),$e)}(we.shapeFlag&256||Me&&isAsyncWrapper(Me.vnode)&&Me.vnode.shapeFlag&256)&&ae.a&&queuePostRenderEffect(ae.a,$e),ae.isMounted=!0,we=ke=Ne=null}},W=ae.effect=new ReactiveEffect(ve,()=>queueJob(U),ae.scope),U=ae.update=()=>W.run();U.id=ae.uid,toggleRecurse(ae,!0),U()},ie=(ae,we,ke)=>{we.component=ae;const Ne=ae.vnode.props;ae.vnode=we,ae.next=null,updateProps(ae,we.props,Ne,ke),updateSlots(ae,we.children,ke),pauseTracking(),flushPreFlushCbs(),resetTracking()},te=(ae,we,ke,Ne,$e,qe,Je,ve,W=!1)=>{const U=ae&&ae.children,X=ae?ae.shapeFlag:0,oe=we.children,{patchFlag:_e,shapeFlag:Pe}=we;if(_e>0){if(_e&128){xe(U,oe,ke,Ne,$e,qe,Je,ve,W);return}else if(_e&256){ce(U,oe,ke,Ne,$e,qe,Je,ve,W);return}}Pe&8?(X&16&&Se(U,$e,qe),oe!==U&&d(ke,oe)):X&16?Pe&16?xe(U,oe,ke,Ne,$e,qe,Je,ve,W):Se(U,$e,qe,!0):(X&8&&d(ke,""),Pe&16&&$(oe,ke,Ne,$e,qe,Je,ve,W))},ce=(ae,we,ke,Ne,$e,qe,Je,ve,W)=>{ae=ae||EMPTY_ARR,we=we||EMPTY_ARR;const U=ae.length,X=we.length,oe=Math.min(U,X);let _e;for(_e=0;_e<oe;_e++){const Pe=we[_e]=W?cloneIfMounted(we[_e]):normalizeVNode(we[_e]);P(ae[_e],Pe,ke,null,$e,qe,Je,ve,W)}U>X?Se(ae,$e,qe,!0,!1,oe):$(we,ke,Ne,$e,qe,Je,ve,W,oe)},xe=(ae,we,ke,Ne,$e,qe,Je,ve,W)=>{let U=0;const X=we.length;let oe=ae.length-1,_e=X-1;for(;U<=oe&&U<=_e;){const Pe=ae[U],De=we[U]=W?cloneIfMounted(we[U]):normalizeVNode(we[U]);if(isSameVNodeType(Pe,De))P(Pe,De,ke,null,$e,qe,Je,ve,W);else break;U++}for(;U<=oe&&U<=_e;){const Pe=ae[oe],De=we[_e]=W?cloneIfMounted(we[_e]):normalizeVNode(we[_e]);if(isSameVNodeType(Pe,De))P(Pe,De,ke,null,$e,qe,Je,ve,W);else break;oe--,_e--}if(U>oe){if(U<=_e){const Pe=_e+1,De=Pe<X?we[Pe].el:Ne;for(;U<=_e;)P(null,we[U]=W?cloneIfMounted(we[U]):normalizeVNode(we[U]),ke,De,$e,qe,Je,ve,W),U++}}else if(U>_e)for(;U<=oe;)Q(ae[U],$e,qe,!0),U++;else{const Pe=U,De=U,Me=new Map;for(U=De;U<=_e;U++){const Tt=we[U]=W?cloneIfMounted(we[U]):normalizeVNode(we[U]);Tt.key!=null&&Me.set(Tt.key,U)}let Ve,Ze=0;const Ue=_e-De+1;let xt=!1,ht=0;const Pt=new Array(Ue);for(U=0;U<Ue;U++)Pt[U]=0;for(U=Pe;U<=oe;U++){const Tt=ae[U];if(Ze>=Ue){Q(Tt,$e,qe,!0);continue}let Rt;if(Tt.key!=null)Rt=Me.get(Tt.key);else for(Ve=De;Ve<=_e;Ve++)if(Pt[Ve-De]===0&&isSameVNodeType(Tt,we[Ve])){Rt=Ve;break}Rt===void 0?Q(Tt,$e,qe,!0):(Pt[Rt-De]=U+1,Rt>=ht?ht=Rt:xt=!0,P(Tt,we[Rt],ke,null,$e,qe,Je,ve,W),Ze++)}const Et=xt?getSequence(Pt):EMPTY_ARR;for(Ve=Et.length-1,U=Ue-1;U>=0;U--){const Tt=De+U,Rt=we[Tt],Bt=Tt+1<X?we[Tt+1].el:Ne;Pt[U]===0?P(null,Rt,ke,Bt,$e,qe,Je,ve,W):xt&&(Ve<0||U!==Et[Ve]?he(Rt,ke,Bt,2):Ve--)}}},he=(ae,we,ke,Ne,$e=null)=>{const{el:qe,type:Je,transition:ve,children:W,shapeFlag:U}=ae;if(U&6){he(ae.component.subTree,we,ke,Ne);return}if(U&128){ae.suspense.move(we,ke,Ne);return}if(U&64){Je.move(ae,we,ke,Te);return}if(Je===Fragment){i(qe,we,ke);for(let oe=0;oe<W.length;oe++)he(W[oe],we,ke,Ne);i(ae.anchor,we,ke);return}if(Je===Static){M(ae,we,ke);return}if(Ne!==2&&U&1&&ve)if(Ne===0)ve.beforeEnter(qe),i(qe,we,ke),queuePostRenderEffect(()=>ve.enter(qe),$e);else{const{leave:oe,delayLeave:_e,afterLeave:Pe}=ve,De=()=>i(qe,we,ke),Me=()=>{oe(qe,()=>{De(),Pe&&Pe()})};_e?_e(qe,De,Me):Me()}else i(qe,we,ke)},Q=(ae,we,ke,Ne=!1,$e=!1)=>{const{type:qe,props:Je,ref:ve,children:W,dynamicChildren:U,shapeFlag:X,patchFlag:oe,dirs:_e}=ae;if(ve!=null&&setRef(ve,null,ke,ae,!0),X&256){we.ctx.deactivate(ae);return}const Pe=X&1&&_e,De=!isAsyncWrapper(ae);let Me;if(De&&(Me=Je&&Je.onVnodeBeforeUnmount)&&invokeVNodeHook(Me,we,ae),X&6)me(ae.component,ke,Ne);else{if(X&128){ae.suspense.unmount(ke,Ne);return}Pe&&invokeDirectiveHook(ae,null,we,"beforeUnmount"),X&64?ae.type.remove(ae,we,ke,$e,Te,Ne):U&&(qe!==Fragment||oe>0&&oe&64)?Se(U,we,ke,!1,!0):(qe===Fragment&&oe&384||!$e&&X&16)&&Se(W,we,ke),Ne&&fe(ae)}(De&&(Me=Je&&Je.onVnodeUnmounted)||Pe)&&queuePostRenderEffect(()=>{Me&&invokeVNodeHook(Me,we,ae),Pe&&invokeDirectiveHook(ae,null,we,"unmounted")},ke)},fe=ae=>{const{type:we,el:ke,anchor:Ne,transition:$e}=ae;if(we===Fragment){Ae(ke,Ne);return}if(we===Static){D(ae);return}const qe=()=>{s(ke),$e&&!$e.persisted&&$e.afterLeave&&$e.afterLeave()};if(ae.shapeFlag&1&&$e&&!$e.persisted){const{leave:Je,delayLeave:ve}=$e,W=()=>Je(ke,qe);ve?ve(ae.el,qe,W):W()}else qe()},Ae=(ae,we)=>{let ke;for(;ae!==we;)ke=g(ae),s(ae),ae=ke;s(we)},me=(ae,we,ke)=>{const{bum:Ne,scope:$e,update:qe,subTree:Je,um:ve}=ae;Ne&&invokeArrayFns(Ne),$e.stop(),qe&&(qe.active=!1,Q(Je,ae,we,ke)),ve&&queuePostRenderEffect(ve,we),queuePostRenderEffect(()=>{ae.isUnmounted=!0},we),we&&we.pendingBranch&&!we.isUnmounted&&ae.asyncDep&&!ae.asyncResolved&&ae.suspenseId===we.pendingId&&(we.deps--,we.deps===0&&we.resolve())},Se=(ae,we,ke,Ne=!1,$e=!1,qe=0)=>{for(let Je=qe;Je<ae.length;Je++)Q(ae[Je],we,ke,Ne,$e)},Ie=ae=>ae.shapeFlag&6?Ie(ae.component.subTree):ae.shapeFlag&128?ae.suspense.next():g(ae.anchor||ae.el),pe=(ae,we,ke)=>{ae==null?we._vnode&&Q(we._vnode,null,null,!0):P(we._vnode||null,ae,we,null,null,null,ke),flushPreFlushCbs(),flushPostFlushCbs(),we._vnode=ae},Te={p:P,um:Q,m:he,r:fe,mt:q,mc:$,pc:te,pbc:F,n:Ie,o:n};let ye,ge;return e&&([ye,ge]=e(Te)),{render:pe,hydrate:ye,createApp:createAppAPI(pe,ye)}}function toggleRecurse({effect:n,update:e},t){n.allowRecurse=e.allowRecurse=t}function traverseStaticChildren(n,e,t=!1){const i=n.children,s=e.children;if(isArray$1(i)&&isArray$1(s))for(let r=0;r<i.length;r++){const o=i[r];let c=s[r];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=s[r]=cloneIfMounted(s[r]),c.el=o.el),t||traverseStaticChildren(o,c)),c.type===Text&&(c.el=o.el)}}function getSequence(n){const e=n.slice(),t=[0];let i,s,r,o,c;const _=n.length;for(i=0;i<_;i++){const l=n[i];if(l!==0){if(s=t[t.length-1],n[s]<l){e[i]=s,t.push(i);continue}for(r=0,o=t.length-1;r<o;)c=r+o>>1,n[t[c]]<l?r=c+1:o=c;l<n[t[r]]&&(r>0&&(e[i]=t[r-1]),t[r]=i)}}for(r=t.length,o=t[r-1];r-- >0;)t[r]=o,o=e[o];return t}const isTeleport=n=>n.__isTeleport,Fragment=Symbol(void 0),Text=Symbol(void 0),Comment=Symbol(void 0),Static=Symbol(void 0),blockStack=[];let currentBlock=null;function openBlock(n=!1){blockStack.push(currentBlock=n?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(n){isBlockTreeEnabled+=n}function setupBlock(n){return n.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(n),n}function createElementBlock(n,e,t,i,s,r){return setupBlock(createBaseVNode(n,e,t,i,s,r,!0))}function isVNode(n){return n?n.__v_isVNode===!0:!1}function isSameVNodeType(n,e){return n.type===e.type&&n.key===e.key}const InternalObjectKey="__vInternal",normalizeKey=({key:n})=>n??null,normalizeRef=({ref:n,ref_key:e,ref_for:t})=>n!=null?isString(n)||isRef(n)||isFunction(n)?{i:currentRenderingInstance,r:n,k:e,f:!!t}:n:null;function createBaseVNode(n,e=null,t=null,i=0,s=null,r=n===Fragment?0:1,o=!1,c=!1){const _={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&normalizeKey(e),ref:e&&normalizeRef(e),scopeId:currentScopeId,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return c?(normalizeChildren(_,t),r&128&&n.normalize(_)):t&&(_.shapeFlag|=isString(t)?8:16),isBlockTreeEnabled>0&&!o&&currentBlock&&(_.patchFlag>0||r&6)&&_.patchFlag!==32&&currentBlock.push(_),_}const createVNode=_createVNode;function _createVNode(n,e=null,t=null,i=0,s=null,r=!1){if((!n||n===NULL_DYNAMIC_COMPONENT)&&(n=Comment),isVNode(n)){const c=cloneVNode(n,e,!0);return t&&normalizeChildren(c,t),isBlockTreeEnabled>0&&!r&&currentBlock&&(c.shapeFlag&6?currentBlock[currentBlock.indexOf(n)]=c:currentBlock.push(c)),c.patchFlag|=-2,c}if(isClassComponent(n)&&(n=n.__vccOpts),e){e=guardReactiveProps(e);let{class:c,style:_}=e;c&&!isString(c)&&(e.class=normalizeClass(c)),isObject$1(_)&&(isProxy(_)&&!isArray$1(_)&&(_=extend({},_)),e.style=normalizeStyle(_))}const o=isString(n)?1:isSuspense(n)?128:isTeleport(n)?64:isObject$1(n)?4:isFunction(n)?2:0;return createBaseVNode(n,e,t,i,s,o,r,!0)}function guardReactiveProps(n){return n?isProxy(n)||InternalObjectKey in n?extend({},n):n:null}function cloneVNode(n,e,t=!1){const{props:i,ref:s,patchFlag:r,children:o}=n,c=e?mergeProps(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:n.type,props:c,key:c&&normalizeKey(c),ref:e&&e.ref?t&&s?isArray$1(s)?s.concat(normalizeRef(e)):[s,normalizeRef(e)]:normalizeRef(e):s,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:o,target:n.target,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==Fragment?r===-1?16:r|16:r,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:n.transition,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&cloneVNode(n.ssContent),ssFallback:n.ssFallback&&cloneVNode(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce}}function createTextVNode(n=" ",e=0){return createVNode(Text,null,n,e)}function normalizeVNode(n){return n==null||typeof n=="boolean"?createVNode(Comment):isArray$1(n)?createVNode(Fragment,null,n.slice()):typeof n=="object"?cloneIfMounted(n):createVNode(Text,null,String(n))}function cloneIfMounted(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:cloneVNode(n)}function normalizeChildren(n,e){let t=0;const{shapeFlag:i}=n;if(e==null)e=null;else if(isArray$1(e))t=16;else if(typeof e=="object")if(i&65){const s=e.default;s&&(s._c&&(s._d=!1),normalizeChildren(n,s()),s._c&&(s._d=!0));return}else{t=32;const s=e._;!s&&!(InternalObjectKey in e)?e._ctx=currentRenderingInstance:s===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else isFunction(e)?(e={default:e,_ctx:currentRenderingInstance},t=32):(e=String(e),i&64?(t=16,e=[createTextVNode(e)]):t=8);n.children=e,n.shapeFlag|=t}function mergeProps(...n){const e={};for(let t=0;t<n.length;t++){const i=n[t];for(const s in i)if(s==="class")e.class!==i.class&&(e.class=normalizeClass([e.class,i.class]));else if(s==="style")e.style=normalizeStyle([e.style,i.style]);else if(isOn(s)){const r=e[s],o=i[s];o&&r!==o&&!(isArray$1(r)&&r.includes(o))&&(e[s]=r?[].concat(r,o):o)}else s!==""&&(e[s]=i[s])}return e}function invokeVNodeHook(n,e,t,i=null){callWithAsyncErrorHandling(n,e,7,[t,i])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(n,e,t){const i=n.type,s=(e?e.appContext:n.appContext)||emptyAppContext,r={uid:uid++,vnode:n,type:i,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(i,s),emitsOptions:normalizeEmitsOptions(i,s),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:i.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=emit.bind(null,r),n.ce&&n.ce(r),r}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance,setCurrentInstance=n=>{currentInstance=n,n.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),currentInstance=null};function isStatefulComponent(n){return n.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(n,e=!1){isInSSRComponentSetup=e;const{props:t,children:i}=n.vnode,s=isStatefulComponent(n);initProps(n,t,s,e),initSlots(n,i);const r=s?setupStatefulComponent(n,e):void 0;return isInSSRComponentSetup=!1,r}function setupStatefulComponent(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=markRaw(new Proxy(n.ctx,PublicInstanceProxyHandlers));const{setup:i}=t;if(i){const s=n.setupContext=i.length>1?createSetupContext(n):null;setCurrentInstance(n),pauseTracking();const r=callWithErrorHandling(i,n,0,[n.props,s]);if(resetTracking(),unsetCurrentInstance(),isPromise$1(r)){if(r.then(unsetCurrentInstance,unsetCurrentInstance),e)return r.then(o=>{handleSetupResult(n,o,e)}).catch(o=>{handleError(o,n,0)});n.asyncDep=r}else handleSetupResult(n,r,e)}else finishComponentSetup(n,e)}function handleSetupResult(n,e,t){isFunction(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:isObject$1(e)&&(n.setupState=proxyRefs(e)),finishComponentSetup(n,t)}let compile;function finishComponentSetup(n,e,t){const i=n.type;if(!n.render){if(!e&&compile&&!i.render){const s=i.template||resolveMergedOptions(n).template;if(s){const{isCustomElement:r,compilerOptions:o}=n.appContext.config,{delimiters:c,compilerOptions:_}=i,l=extend(extend({isCustomElement:r,delimiters:c},o),_);i.render=compile(s,l)}}n.render=i.render||NOOP}setCurrentInstance(n),pauseTracking(),applyOptions(n),resetTracking(),unsetCurrentInstance()}function createAttrsProxy(n){return new Proxy(n.attrs,{get(e,t){return track(n,"get","$attrs"),e[t]}})}function createSetupContext(n){const e=i=>{n.exposed=i||{}};let t;return{get attrs(){return t||(t=createAttrsProxy(n))},slots:n.slots,emit:n.emit,expose:e}}function getExposeProxy(n){if(n.exposed)return n.exposeProxy||(n.exposeProxy=new Proxy(proxyRefs(markRaw(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in publicPropertiesMap)return publicPropertiesMap[t](n)},has(e,t){return t in e||t in publicPropertiesMap}}))}function isClassComponent(n){return isFunction(n)&&"__vccOpts"in n}const computed=(n,e)=>computed$1(n,e,isInSSRComponentSetup);function h(n,e,t){const i=arguments.length;return i===2?isObject$1(e)&&!isArray$1(e)?isVNode(e)?createVNode(n,null,[e]):createVNode(n,e):createVNode(n,null,e):(i>3?t=Array.prototype.slice.call(arguments,2):i===3&&isVNode(t)&&(t=[t]),createVNode(n,e,t))}const ssrContextKey=Symbol(""),useSSRContext=()=>inject(ssrContextKey),version="3.2.47",svgNS="http://www.w3.org/2000/svg",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,i)=>{const s=e?doc.createElementNS(svgNS,n):doc.createElement(n,t?{is:t}:void 0);return n==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:n=>doc.createTextNode(n),createComment:n=>doc.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>doc.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,i,s,r){const o=t?t.previousSibling:e.lastChild;if(s&&(s===r||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),t),!(s===r||!(s=s.nextSibling)););else{templateContainer.innerHTML=i?`<svg>${n}</svg>`:n;const c=templateContainer.content;if(i){const _=c.firstChild;for(;_.firstChild;)c.appendChild(_.firstChild);c.removeChild(_)}e.insertBefore(c,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}};function patchClass(n,e,t){const i=n._vtc;i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}function patchStyle(n,e,t){const i=n.style,s=isString(t);if(t&&!s){if(e&&!isString(e))for(const r in e)t[r]==null&&setStyle(i,r,"");for(const r in t)setStyle(i,r,t[r])}else{const r=i.display;s?e!==t&&(i.cssText=t):e&&n.removeAttribute("style"),"_vod"in n&&(i.display=r)}}const importantRE=/\s*!important$/;function setStyle(n,e,t){if(isArray$1(t))t.forEach(i=>setStyle(n,e,i));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const i=autoPrefix(n,e);importantRE.test(t)?n.setProperty(hyphenate(i),t.replace(importantRE,""),"important"):n[i]=t}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(n,e){const t=prefixCache[e];if(t)return t;let i=camelize(e);if(i!=="filter"&&i in n)return prefixCache[e]=i;i=capitalize(i);for(let s=0;s<prefixes.length;s++){const r=prefixes[s]+i;if(r in n)return prefixCache[e]=r}return e}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(n,e,t,i,s){if(i&&e.startsWith("xlink:"))t==null?n.removeAttributeNS(xlinkNS,e.slice(6,e.length)):n.setAttributeNS(xlinkNS,e,t);else{const r=isSpecialBooleanAttr(e);t==null||r&&!includeBooleanAttr(t)?n.removeAttribute(e):n.setAttribute(e,r?"":t)}}function patchDOMProp(n,e,t,i,s,r,o){if(e==="innerHTML"||e==="textContent"){i&&o(i,s,r),n[e]=t??"";return}if(e==="value"&&n.tagName!=="PROGRESS"&&!n.tagName.includes("-")){n._value=t;const _=t??"";(n.value!==_||n.tagName==="OPTION")&&(n.value=_),t==null&&n.removeAttribute(e);return}let c=!1;if(t===""||t==null){const _=typeof n[e];_==="boolean"?t=includeBooleanAttr(t):t==null&&_==="string"?(t="",c=!0):_==="number"&&(t=0,c=!0)}try{n[e]=t}catch{}c&&n.removeAttribute(e)}function addEventListener(n,e,t,i){n.addEventListener(e,t,i)}function removeEventListener(n,e,t,i){n.removeEventListener(e,t,i)}function patchEvent(n,e,t,i,s=null){const r=n._vei||(n._vei={}),o=r[e];if(i&&o)o.value=i;else{const[c,_]=parseName(e);if(i){const l=r[e]=createInvoker(i,s);addEventListener(n,c,l,_)}else o&&(removeEventListener(n,c,o,_),r[e]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(n){let e;if(optionsModifierRE.test(n)){e={};let i;for(;i=n.match(optionsModifierRE);)n=n.slice(0,n.length-i[0].length),e[i[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):hyphenate(n.slice(2)),e]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(n,e){const t=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=t.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(i,t.value),e,5,[i])};return t.value=n,t.attached=getNow(),t}function patchStopImmediatePropagation(n,e){if(isArray$1(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(i=>s=>!s._stopped&&i&&i(s))}else return e}const nativeOnRE=/^on[a-z]/,patchProp=(n,e,t,i,s=!1,r,o,c,_)=>{e==="class"?patchClass(n,i,s):e==="style"?patchStyle(n,t,i):isOn(e)?isModelListener(e)||patchEvent(n,e,t,i,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):shouldSetAsProp(n,e,i,s))?patchDOMProp(n,e,i,r,o,c,_):(e==="true-value"?n._trueValue=i:e==="false-value"&&(n._falseValue=i),patchAttr(n,e,i,s))};function shouldSetAsProp(n,e,t,i){return i?!!(e==="innerHTML"||e==="textContent"||e in n&&nativeOnRE.test(e)&&isFunction(t)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA"||nativeOnRE.test(e)&&isString(t)?!1:e in n}const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};BaseTransition.props;const rendererOptions=extend({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...n)=>{const e=ensureRenderer().createApp(...n),{mount:t}=e;return e.mount=i=>{const s=normalizeContainer(i);if(!s)return;const r=e._component;!isFunction(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.innerHTML="";const o=t(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function normalizeContainer(n){return isString(n)?document.querySelector(n):n}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getAugmentedNamespace(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function i(){if(this instanceof i){var s=[null];s.push.apply(s,arguments);var r=Function.bind.apply(e,s);return new r}return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var s=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:function(){return n[i]}})}),t}var mars3dExports={},mars3d$1={get exports(){return mars3dExports},set exports(n){mars3dExports=n}};const _global_Cesium=Cesium;var js$1G={},jsExports$B={},js$1F={get exports(){return jsExports$B},set exports(n){jsExports$B=n}},js$1E={},js$1D={},js$1C={},hasRequiredJs$1G;function requireJs$1G(){return hasRequiredJs$1G||(hasRequiredJs$1G=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.earthRadius=63710088e-1,n.factors={centimeters:n.earthRadius*100,centimetres:n.earthRadius*100,degrees:n.earthRadius/111325,feet:n.earthRadius*3.28084,inches:n.earthRadius*39.37,kilometers:n.earthRadius/1e3,kilometres:n.earthRadius/1e3,meters:n.earthRadius,metres:n.earthRadius,miles:n.earthRadius/1609.344,millimeters:n.earthRadius*1e3,millimetres:n.earthRadius*1e3,nauticalmiles:n.earthRadius/1852,radians:1,yards:n.earthRadius*1.0936},n.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/n.earthRadius,yards:1.0936133},n.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function e(z,Y,J){J===void 0&&(J={});var q={type:"Feature"};return(J.id===0||J.id)&&(q.id=J.id),J.bbox&&(q.bbox=J.bbox),q.properties=Y||{},q.geometry=z,q}n.feature=e;function t(z,Y,J){switch(z){case"Point":return i(Y).geometry;case"LineString":return c(Y).geometry;case"Polygon":return r(Y).geometry;case"MultiPoint":return f(Y).geometry;case"MultiLineString":return d(Y).geometry;case"MultiPolygon":return g(Y).geometry;default:throw new Error(z+" is invalid")}}n.geometry=t;function i(z,Y,J){if(J===void 0&&(J={}),!z)throw new Error("coordinates is required");if(!Array.isArray(z))throw new Error("coordinates must be an Array");if(z.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!N(z[0])||!N(z[1]))throw new Error("coordinates must contain numbers");var q={type:"Point",coordinates:z};return e(q,Y,J)}n.point=i;function s(z,Y,J){return J===void 0&&(J={}),l(z.map(function(q){return i(q,Y)}),J)}n.points=s;function r(z,Y,J){J===void 0&&(J={});for(var q=0,le=z;q<le.length;q++){var j=le[q];if(j.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var ie=0;ie<j[j.length-1].length;ie++)if(j[j.length-1][ie]!==j[0][ie])throw new Error("First and last Position are not equivalent.")}var te={type:"Polygon",coordinates:z};return e(te,Y,J)}n.polygon=r;function o(z,Y,J){return J===void 0&&(J={}),l(z.map(function(q){return r(q,Y)}),J)}n.polygons=o;function c(z,Y,J){if(J===void 0&&(J={}),z.length<2)throw new Error("coordinates must be an array of two or more positions");var q={type:"LineString",coordinates:z};return e(q,Y,J)}n.lineString=c;function _(z,Y,J){return J===void 0&&(J={}),l(z.map(function(q){return c(q,Y)}),J)}n.lineStrings=_;function l(z,Y){Y===void 0&&(Y={});var J={type:"FeatureCollection"};return Y.id&&(J.id=Y.id),Y.bbox&&(J.bbox=Y.bbox),J.features=z,J}n.featureCollection=l;function d(z,Y,J){J===void 0&&(J={});var q={type:"MultiLineString",coordinates:z};return e(q,Y,J)}n.multiLineString=d;function f(z,Y,J){J===void 0&&(J={});var q={type:"MultiPoint",coordinates:z};return e(q,Y,J)}n.multiPoint=f;function g(z,Y,J){J===void 0&&(J={});var q={type:"MultiPolygon",coordinates:z};return e(q,Y,J)}n.multiPolygon=g;function b(z,Y,J){J===void 0&&(J={});var q={type:"GeometryCollection",geometries:z};return e(q,Y,J)}n.geometryCollection=b;function C(z,Y){if(Y===void 0&&(Y=0),Y&&!(Y>=0))throw new Error("precision must be a positive number");var J=Math.pow(10,Y||0);return Math.round(z*J)/J}n.round=C;function P(z,Y){Y===void 0&&(Y="kilometers");var J=n.factors[Y];if(!J)throw new Error(Y+" units is invalid");return z*J}n.radiansToLength=P;function S(z,Y){Y===void 0&&(Y="kilometers");var J=n.factors[Y];if(!J)throw new Error(Y+" units is invalid");return z/J}n.lengthToRadians=S;function L(z,Y){return M(S(z,Y))}n.lengthToDegrees=L;function E(z){var Y=z%360;return Y<0&&(Y+=360),Y}n.bearingToAzimuth=E;function M(z){var Y=z%(2*Math.PI);return Y*180/Math.PI}n.radiansToDegrees=M;function D(z){var Y=z%360;return Y*Math.PI/180}n.degreesToRadians=D;function R(z,Y,J){if(Y===void 0&&(Y="kilometers"),J===void 0&&(J="kilometers"),!(z>=0))throw new Error("length must be a positive number");return P(S(z,Y),J)}n.convertLength=R;function k(z,Y,J){if(Y===void 0&&(Y="meters"),J===void 0&&(J="kilometers"),!(z>=0))throw new Error("area must be a positive number");var q=n.areaFactors[Y];if(!q)throw new Error("invalid original units");var le=n.areaFactors[J];if(!le)throw new Error("invalid final units");return z/q*le}n.convertArea=k;function N(z){return!isNaN(z)&&z!==null&&!Array.isArray(z)}n.isNumber=N;function $(z){return!!z&&z.constructor===Object}n.isObject=$;function B(z){if(!z)throw new Error("bbox is required");if(!Array.isArray(z))throw new Error("bbox must be an Array");if(z.length!==4&&z.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");z.forEach(function(Y){if(!N(Y))throw new Error("bbox must only contain numbers")})}n.validateBBox=B;function F(z){if(!z)throw new Error("id is required");if(["string","number"].indexOf(typeof z)===-1)throw new Error("id must be a number or a string")}n.validateId=F}(js$1C)),js$1C}var hasRequiredJs$1F;function requireJs$1F(){if(hasRequiredJs$1F)return js$1D;hasRequiredJs$1F=1,Object.defineProperty(js$1D,"__esModule",{value:!0});var n=requireJs$1G();function e(E,M,D){if(E!==null)for(var R,k,N,$,B,F,z,Y=0,J=0,q,le=E.type,j=le==="FeatureCollection",ie=le==="Feature",te=j?E.features.length:1,ce=0;ce<te;ce++){z=j?E.features[ce].geometry:ie?E.geometry:E,q=z?z.type==="GeometryCollection":!1,B=q?z.geometries.length:1;for(var xe=0;xe<B;xe++){var he=0,Q=0;if($=q?z.geometries[xe]:z,$!==null){F=$.coordinates;var fe=$.type;switch(Y=D&&(fe==="Polygon"||fe==="MultiPolygon")?1:0,fe){case null:break;case"Point":if(M(F,J,ce,he,Q)===!1)return!1;J++,he++;break;case"LineString":case"MultiPoint":for(R=0;R<F.length;R++){if(M(F[R],J,ce,he,Q)===!1)return!1;J++,fe==="MultiPoint"&&he++}fe==="LineString"&&he++;break;case"Polygon":case"MultiLineString":for(R=0;R<F.length;R++){for(k=0;k<F[R].length-Y;k++){if(M(F[R][k],J,ce,he,Q)===!1)return!1;J++}fe==="MultiLineString"&&he++,fe==="Polygon"&&Q++}fe==="Polygon"&&he++;break;case"MultiPolygon":for(R=0;R<F.length;R++){for(Q=0,k=0;k<F[R].length;k++){for(N=0;N<F[R][k].length-Y;N++){if(M(F[R][k][N],J,ce,he,Q)===!1)return!1;J++}Q++}he++}break;case"GeometryCollection":for(R=0;R<$.geometries.length;R++)if(e($.geometries[R],M,D)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function t(E,M,D,R){var k=D;return e(E,function(N,$,B,F,z){$===0&&D===void 0?k=N:k=M(k,N,$,B,F,z)},R),k}function i(E,M){var D;switch(E.type){case"FeatureCollection":for(D=0;D<E.features.length&&M(E.features[D].properties,D)!==!1;D++);break;case"Feature":M(E.properties,0);break}}function s(E,M,D){var R=D;return i(E,function(k,N){N===0&&D===void 0?R=k:R=M(R,k,N)}),R}function r(E,M){if(E.type==="Feature")M(E,0);else if(E.type==="FeatureCollection")for(var D=0;D<E.features.length&&M(E.features[D],D)!==!1;D++);}function o(E,M,D){var R=D;return r(E,function(k,N){N===0&&D===void 0?R=k:R=M(R,k,N)}),R}function c(E){var M=[];return e(E,function(D){M.push(D)}),M}function _(E,M){var D,R,k,N,$,B,F,z,Y,J,q=0,le=E.type==="FeatureCollection",j=E.type==="Feature",ie=le?E.features.length:1;for(D=0;D<ie;D++){for(B=le?E.features[D].geometry:j?E.geometry:E,z=le?E.features[D].properties:j?E.properties:{},Y=le?E.features[D].bbox:j?E.bbox:void 0,J=le?E.features[D].id:j?E.id:void 0,F=B?B.type==="GeometryCollection":!1,$=F?B.geometries.length:1,k=0;k<$;k++){if(N=F?B.geometries[k]:B,N===null){if(M(null,q,z,Y,J)===!1)return!1;continue}switch(N.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(M(N,q,z,Y,J)===!1)return!1;break}case"GeometryCollection":{for(R=0;R<N.geometries.length;R++)if(M(N.geometries[R],q,z,Y,J)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}q++}}function l(E,M,D){var R=D;return _(E,function(k,N,$,B,F){N===0&&D===void 0?R=k:R=M(R,k,N,$,B,F)}),R}function d(E,M){_(E,function(D,R,k,N,$){var B=D===null?null:D.type;switch(B){case null:case"Point":case"LineString":case"Polygon":return M(n.feature(D,k,{bbox:N,id:$}),R,0)===!1?!1:void 0}var F;switch(B){case"MultiPoint":F="Point";break;case"MultiLineString":F="LineString";break;case"MultiPolygon":F="Polygon";break}for(var z=0;z<D.coordinates.length;z++){var Y=D.coordinates[z],J={type:F,coordinates:Y};if(M(n.feature(J,k),R,z)===!1)return!1}})}function f(E,M,D){var R=D;return d(E,function(k,N,$){N===0&&$===0&&D===void 0?R=k:R=M(R,k,N,$)}),R}function g(E,M){d(E,function(D,R,k){var N=0;if(D.geometry){var $=D.geometry.type;if(!($==="Point"||$==="MultiPoint")){var B,F=0,z=0,Y=0;if(e(D,function(J,q,le,j,ie){if(B===void 0||R>F||j>z||ie>Y){B=J,F=R,z=j,Y=ie,N=0;return}var te=n.lineString([B,J],D.properties);if(M(te,R,k,ie,N)===!1)return!1;N++,B=J})===!1)return!1}}})}function b(E,M,D){var R=D,k=!1;return g(E,function(N,$,B,F,z){k===!1&&D===void 0?R=N:R=M(R,N,$,B,F,z),k=!0}),R}function C(E,M){if(!E)throw new Error("geojson is required");d(E,function(D,R,k){if(D.geometry!==null){var N=D.geometry.type,$=D.geometry.coordinates;switch(N){case"LineString":if(M(D,R,k,0,0)===!1)return!1;break;case"Polygon":for(var B=0;B<$.length;B++)if(M(n.lineString($[B],D.properties),R,k,B)===!1)return!1;break}}})}function P(E,M,D){var R=D;return C(E,function(k,N,$,B){N===0&&D===void 0?R=k:R=M(R,k,N,$,B)}),R}function S(E,M){if(M=M||{},!n.isObject(M))throw new Error("options is invalid");var D=M.featureIndex||0,R=M.multiFeatureIndex||0,k=M.geometryIndex||0,N=M.segmentIndex||0,$=M.properties,B;switch(E.type){case"FeatureCollection":D<0&&(D=E.features.length+D),$=$||E.features[D].properties,B=E.features[D].geometry;break;case"Feature":$=$||E.properties,B=E.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":B=E;break;default:throw new Error("geojson is invalid")}if(B===null)return null;var F=B.coordinates;switch(B.type){case"Point":case"MultiPoint":return null;case"LineString":return N<0&&(N=F.length+N-1),n.lineString([F[N],F[N+1]],$,M);case"Polygon":return k<0&&(k=F.length+k),N<0&&(N=F[k].length+N-1),n.lineString([F[k][N],F[k][N+1]],$,M);case"MultiLineString":return R<0&&(R=F.length+R),N<0&&(N=F[R].length+N-1),n.lineString([F[R][N],F[R][N+1]],$,M);case"MultiPolygon":return R<0&&(R=F.length+R),k<0&&(k=F[R].length+k),N<0&&(N=F[R][k].length-N-1),n.lineString([F[R][k][N],F[R][k][N+1]],$,M)}throw new Error("geojson is invalid")}function L(E,M){if(M=M||{},!n.isObject(M))throw new Error("options is invalid");var D=M.featureIndex||0,R=M.multiFeatureIndex||0,k=M.geometryIndex||0,N=M.coordIndex||0,$=M.properties,B;switch(E.type){case"FeatureCollection":D<0&&(D=E.features.length+D),$=$||E.features[D].properties,B=E.features[D].geometry;break;case"Feature":$=$||E.properties,B=E.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":B=E;break;default:throw new Error("geojson is invalid")}if(B===null)return null;var F=B.coordinates;switch(B.type){case"Point":return n.point(F,$,M);case"MultiPoint":return R<0&&(R=F.length+R),n.point(F[R],$,M);case"LineString":return N<0&&(N=F.length+N),n.point(F[N],$,M);case"Polygon":return k<0&&(k=F.length+k),N<0&&(N=F[k].length+N),n.point(F[k][N],$,M);case"MultiLineString":return R<0&&(R=F.length+R),N<0&&(N=F[R].length+N),n.point(F[R][N],$,M);case"MultiPolygon":return R<0&&(R=F.length+R),k<0&&(k=F[R].length+k),N<0&&(N=F[R][k].length-N),n.point(F[R][k][N],$,M)}throw new Error("geojson is invalid")}return js$1D.coordAll=c,js$1D.coordEach=e,js$1D.coordReduce=t,js$1D.featureEach=r,js$1D.featureReduce=o,js$1D.findPoint=L,js$1D.findSegment=S,js$1D.flattenEach=d,js$1D.flattenReduce=f,js$1D.geomEach=_,js$1D.geomReduce=l,js$1D.lineEach=C,js$1D.lineReduce=P,js$1D.propEach=i,js$1D.propReduce=s,js$1D.segmentEach=g,js$1D.segmentReduce=b,js$1D}var hasRequiredJs$1E;function requireJs$1E(){if(hasRequiredJs$1E)return js$1E;hasRequiredJs$1E=1,Object.defineProperty(js$1E,"__esModule",{value:!0});var n=requireJs$1F();function e(t){var i=[1/0,1/0,-1/0,-1/0];return n.coordEach(t,function(s){i[0]>s[0]&&(i[0]=s[0]),i[1]>s[1]&&(i[1]=s[1]),i[2]<s[0]&&(i[2]=s[0]),i[3]<s[1]&&(i[3]=s[1])}),i}return e.default=e,js$1E.default=e,js$1E}var js$1B={},hasRequiredJs$1D;function requireJs$1D(){if(hasRequiredJs$1D)return js$1B;hasRequiredJs$1D=1,Object.defineProperty(js$1B,"__esModule",{value:!0});var n=requireJs$1G();function e(l){if(!l)throw new Error("coord is required");if(!Array.isArray(l)){if(l.type==="Feature"&&l.geometry!==null&&l.geometry.type==="Point")return l.geometry.coordinates;if(l.type==="Point")return l.coordinates}if(Array.isArray(l)&&l.length>=2&&!Array.isArray(l[0])&&!Array.isArray(l[1]))return l;throw new Error("coord must be GeoJSON Point or an Array of numbers")}js$1B.getCoord=e;function t(l){if(Array.isArray(l))return l;if(l.type==="Feature"){if(l.geometry!==null)return l.geometry.coordinates}else if(l.coordinates)return l.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}js$1B.getCoords=t;function i(l){if(l.length>1&&n.isNumber(l[0])&&n.isNumber(l[1]))return!0;if(Array.isArray(l[0])&&l[0].length)return i(l[0]);throw new Error("coordinates must only contain numbers")}js$1B.containsNumber=i;function s(l,d,f){if(!d||!f)throw new Error("type and name required");if(!l||l.type!==d)throw new Error("Invalid input to "+f+": must be a "+d+", given "+l.type)}js$1B.geojsonType=s;function r(l,d,f){if(!l)throw new Error("No feature passed");if(!f)throw new Error(".featureOf() requires a name");if(!l||l.type!=="Feature"||!l.geometry)throw new Error("Invalid input to "+f+", Feature with geometry required");if(!l.geometry||l.geometry.type!==d)throw new Error("Invalid input to "+f+": must be a "+d+", given "+l.geometry.type)}js$1B.featureOf=r;function o(l,d,f){if(!l)throw new Error("No featureCollection passed");if(!f)throw new Error(".collectionOf() requires a name");if(!l||l.type!=="FeatureCollection")throw new Error("Invalid input to "+f+", FeatureCollection required");for(var g=0,b=l.features;g<b.length;g++){var C=b[g];if(!C||C.type!=="Feature"||!C.geometry)throw new Error("Invalid input to "+f+", Feature with geometry required");if(!C.geometry||C.geometry.type!==d)throw new Error("Invalid input to "+f+": must be a "+d+", given "+C.geometry.type)}}js$1B.collectionOf=o;function c(l){return l.type==="Feature"?l.geometry:l}js$1B.getGeom=c;function _(l,d){return l.type==="FeatureCollection"?"FeatureCollection":l.type==="GeometryCollection"?"GeometryCollection":l.type==="Feature"&&l.geometry!==null?l.geometry.type:l.type}return js$1B.getType=_,js$1B}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var objectAssign,hasRequiredObjectAssign;function requireObjectAssign(){if(hasRequiredObjectAssign)return objectAssign;hasRequiredObjectAssign=1;var n=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable;function i(r){if(r==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}function s(){try{if(!Object.assign)return!1;var r=new String("abc");if(r[5]="de",Object.getOwnPropertyNames(r)[0]==="5")return!1;for(var o={},c=0;c<10;c++)o["_"+String.fromCharCode(c)]=c;var _=Object.getOwnPropertyNames(o).map(function(d){return o[d]});if(_.join("")!=="0123456789")return!1;var l={};return"abcdefghijklmnopqrst".split("").forEach(function(d){l[d]=d}),Object.keys(Object.assign({},l)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return objectAssign=s()?Object.assign:function(r,o){for(var c,_=i(r),l,d=1;d<arguments.length;d++){c=Object(arguments[d]);for(var f in c)e.call(c,f)&&(_[f]=c[f]);if(n){l=n(c);for(var g=0;g<l.length;g++)t.call(c,l[g])&&(_[l[g]]=c[l[g]])}}return _},objectAssign}var hasRequiredJs$1C;function requireJs$1C(){if(hasRequiredJs$1C)return jsExports$B;hasRequiredJs$1C=1;var n=requireJs$1E(),e=requireJs$1F(),t=requireJs$1D(),i=requireJs$1G(),s=requireObjectAssign();function r($){return $&&typeof $=="object"&&"default"in $?$:{default:$}}var o=r(n),c=r(s);/**
 * @license GNU Affero General Public License.
 * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
 * v. 1.2.0
 * https://github.com/RaumZeit/MarchingSquares.js
 *
 * MarchingSquaresJS is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * MarchingSquaresJS is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * As additional permission under GNU Affero General Public License version 3
 * section 7, third-party projects (personal or commercial) may distribute,
 * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
 * requirement that said third-party project for that reason alone becomes
 * subject to any requirement of the GNU Affero General Public License version 3.
 * Any modifications to MarchingSquaresJS, however, must be shared with the public
 * and made available.
 *
 * In summary this:
 * - allows you to use MarchingSquaresJS at no cost
 * - allows you to use MarchingSquaresJS for both personal and commercial purposes
 * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
 *   license as long as this license notice is included
 * - enables you to keep the source code of your program that uses MarchingSquaresJS
 *   undisclosed
 * - forces you to share any modifications you have made to MarchingSquaresJS,
 *   e.g. bug-fixes
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
 */var _={successCallback:null,verbose:!1},l={};function d($,B,F){F=F||{};for(var z=Object.keys(_),Y=0;Y<z.length;Y++){var J=z[Y],q=F[J];q=typeof q<"u"&&q!==null?q:_[J],l[J]=q}l.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+B);var le=L(g($,B));return typeof l.successCallback=="function"&&l.successCallback(le),le}function f($,B,F){return($-B)/(F-B)}function g($,B){for(var F=$.length-1,z=$[0].length-1,Y={rows:F,cols:z,cells:[]},J=0;J<F;++J){Y.cells[J]=[];for(var q=0;q<z;++q){var le=0,j=$[J+1][q],ie=$[J+1][q+1],te=$[J][q+1],ce=$[J][q];if(!(isNaN(j)||isNaN(ie)||isNaN(te)||isNaN(ce))){le|=j>=B?8:0,le|=ie>=B?4:0,le|=te>=B?2:0,le|=ce>=B?1:0;var xe=!1;if(le===5||le===10){var he=(j+ie+te+ce)/4;le===5&&he<B?(le=10,xe=!0):le===10&&he<B&&(le=5,xe=!0)}if(le!==0&&le!==15){var Q,fe,Ae,me;Q=fe=Ae=me=.5,le===1?(Ae=1-f(B,j,ce),fe=1-f(B,te,ce)):le===2?(fe=f(B,ce,te),me=1-f(B,ie,te)):le===3?(Ae=1-f(B,j,ce),me=1-f(B,ie,te)):le===4?(Q=f(B,j,ie),me=f(B,te,ie)):le===5?(Q=f(B,j,ie),me=f(B,te,ie),fe=1-f(B,te,ce),Ae=1-f(B,j,ce)):le===6?(fe=f(B,ce,te),Q=f(B,j,ie)):le===7?(Ae=1-f(B,j,ce),Q=f(B,j,ie)):le===8?(Ae=f(B,ce,j),Q=1-f(B,ie,j)):le===9?(fe=1-f(B,te,ce),Q=1-f(B,ie,j)):le===10?(Q=1-f(B,ie,j),me=1-f(B,ie,te),fe=f(B,ce,te),Ae=f(B,ce,j)):le===11?(Q=1-f(B,ie,j),me=1-f(B,ie,te)):le===12?(Ae=f(B,ce,j),me=f(B,te,ie)):le===13?(fe=1-f(B,te,ce),me=f(B,te,ie)):le===14?(Ae=f(B,ce,j),fe=f(B,ce,te)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+le),Y.cells[J][q]={cval:le,flipped:xe,top:Q,right:me,bottom:fe,left:Ae}}}}}return Y}function b($){return $.cval===5||$.cval===10}function C($){return $.cval===0||$.cval===15}function P($){!C($)&&$.cval!==5&&$.cval!==10&&($.cval=15)}function S($,B){if(B==="top")return[$.top,1];if(B==="bottom")return[$.bottom,0];if(B==="right")return[1,$.right];if(B==="left")return[0,$.left]}function L($){var B=[],F=0,z=1e-7;return $.cells.forEach(function(Y,J){Y.forEach(function(q,le){if(typeof q<"u"&&!b(q)&&!C(q)){var j=E($.cells,J,le),ie=!1;if(j.info==="mergeable"){for(var te=j.path[j.path.length-1][0],ce=j.path[j.path.length-1][1],xe=F-1;xe>=0;xe--)if(Math.abs(B[xe][0][0]-te)<=z&&Math.abs(B[xe][0][1]-ce)<=z){for(var he=j.path.length-2;he>=0;--he)B[xe].unshift(j.path[he]);ie=!0;break}}ie||(B[F++]=j.path)}})}),B}function E($,B,F){var z=$.length,Y=[],J=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],q=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],le,j,ie=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"],te=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],he,ce=$[B][F],xe=ce.cval,he=ie[xe],Q=S(ce,he);Y.push([F+Q[0],B+Q[1]]),he=te[xe],Q=S(ce,he),Y.push([F+Q[0],B+Q[1]]),P(ce);for(var fe=F+J[xe],Ae=B+q[xe],me=xe;fe>=0&&Ae>=0&&Ae<z&&(fe!=F||Ae!=B)&&(ce=$[Ae][fe],!(typeof ce>"u"));){if(xe=ce.cval,xe===0||xe===15)return{path:Y,info:"mergeable"};he=te[xe],le=J[xe],j=q[xe],(xe===5||xe===10)&&(xe===5?ce.flipped?q[me]===-1?(he="left",le=-1,j=0):(he="right",le=1,j=0):J[me]===-1&&(he="bottom",le=0,j=-1):xe===10&&(ce.flipped?J[me]===-1?(he="top",le=0,j=1):(he="bottom",le=0,j=-1):q[me]===1&&(he="left",le=-1,j=0))),Q=S(ce,he),Y.push([fe+Q[0],Ae+Q[1]]),P(ce),fe+=le,Ae+=j,me=xe}return{path:Y,info:"closed"}}function M($,B){if(B=B||{},!i.isObject(B))throw new Error("options is invalid");var F=B.zProperty||"elevation",z=B.flip,Y=B.flags;t.collectionOf($,"Point","input must contain Points");for(var J=D($,z),q=[],le=0;le<J.length;le++){for(var j=J[le],ie=[],te=0;te<j.length;te++){var ce=j[te];ce.properties[F]?ie.push(ce.properties[F]):ie.push(0),Y===!0&&(ce.properties.matrixPosition=[le,te])}q.push(ie)}return q}function D($,B){var F={};e.featureEach($,function(J){var q=t.getCoords(J)[1];F[q]||(F[q]=[]),F[q].push(J)});var z=Object.keys(F).map(function(J){var q=F[J],le=q.sort(function(j,ie){return t.getCoords(j)[0]-t.getCoords(ie)[0]});return le}),Y=z.sort(function(J,q){return B?t.getCoords(J[0])[1]-t.getCoords(q[0])[1]:t.getCoords(q[0])[1]-t.getCoords(J[0])[1]});return Y}function R($,B,F){if(F=F||{},!i.isObject(F))throw new Error("options is invalid");var z=F.zProperty||"elevation",Y=F.commonProperties||{},J=F.breaksProperties||[];if(t.collectionOf($,"Point","Input must contain Points"),!B)throw new Error("breaks is required");if(!Array.isArray(B))throw new Error("breaks must be an Array");if(!i.isObject(Y))throw new Error("commonProperties must be an Object");if(!Array.isArray(J))throw new Error("breaksProperties must be an Array");var q=M($,{zProperty:z,flip:!0}),le=k(q,B,z,Y,J),j=N(le,q,$);return i.featureCollection(j)}function k($,B,F,z,Y){for(var J=[],q=1;q<B.length;q++){var le=+B[q],j=c.default({},z,Y[q]);j[F]=le;var ie=i.multiLineString(d($,le),j);J.push(ie)}return J}function N($,B,F){var z=o.default(F),Y=z[2]-z[0],J=z[3]-z[1],q=z[0],le=z[1],j=B[0].length-1,ie=B.length-1,te=Y/j,ce=J/ie,xe=function(he){he[0]=he[0]*te+q,he[1]=he[1]*ce+le};return $.forEach(function(he){e.coordEach(he,xe)}),$}return js$1F.exports=R,jsExports$B.default=R,jsExports$B}var js$1A={},concavemanExports={},concaveman={get exports(){return concavemanExports},set exports(n){concavemanExports=n}},rbush_minExports$1={},rbush_min$1={get exports(){return rbush_minExports$1},set exports(n){rbush_minExports$1=n}},hasRequiredRbush_min$1;function requireRbush_min$1(){return hasRequiredRbush_min$1||(hasRequiredRbush_min$1=1,function(n,e){(function(t,i){n.exports=i()})(commonjsGlobal,function(){function t(E,M,D,R,k){(function N($,B,F,z,Y){for(;z>F;){if(z-F>600){var J=z-F+1,q=B-F+1,le=Math.log(J),j=.5*Math.exp(2*le/3),ie=.5*Math.sqrt(le*j*(J-j)/J)*(q-J/2<0?-1:1),te=Math.max(F,Math.floor(B-q*j/J+ie)),ce=Math.min(z,Math.floor(B+(J-q)*j/J+ie));N($,B,te,ce,Y)}var xe=$[B],he=F,Q=z;for(i($,F,B),Y($[z],xe)>0&&i($,F,z);he<Q;){for(i($,he,Q),he++,Q--;Y($[he],xe)<0;)he++;for(;Y($[Q],xe)>0;)Q--}Y($[F],xe)===0?i($,F,Q):i($,++Q,z),Q<=B&&(F=Q+1),B<=Q&&(z=Q-1)}})(E,M,D||0,R||E.length-1,k||s)}function i(E,M,D){var R=E[M];E[M]=E[D],E[D]=R}function s(E,M){return E<M?-1:E>M?1:0}var r=function(E){E===void 0&&(E=9),this._maxEntries=Math.max(4,E),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function o(E,M,D){if(!D)return M.indexOf(E);for(var R=0;R<M.length;R++)if(D(E,M[R]))return R;return-1}function c(E,M){_(E,0,E.children.length,M,E)}function _(E,M,D,R,k){k||(k=S(null)),k.minX=1/0,k.minY=1/0,k.maxX=-1/0,k.maxY=-1/0;for(var N=M;N<D;N++){var $=E.children[N];l(k,E.leaf?R($):$)}return k}function l(E,M){return E.minX=Math.min(E.minX,M.minX),E.minY=Math.min(E.minY,M.minY),E.maxX=Math.max(E.maxX,M.maxX),E.maxY=Math.max(E.maxY,M.maxY),E}function d(E,M){return E.minX-M.minX}function f(E,M){return E.minY-M.minY}function g(E){return(E.maxX-E.minX)*(E.maxY-E.minY)}function b(E){return E.maxX-E.minX+(E.maxY-E.minY)}function C(E,M){return E.minX<=M.minX&&E.minY<=M.minY&&M.maxX<=E.maxX&&M.maxY<=E.maxY}function P(E,M){return M.minX<=E.maxX&&M.minY<=E.maxY&&M.maxX>=E.minX&&M.maxY>=E.minY}function S(E){return{children:E,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function L(E,M,D,R,k){for(var N=[M,D];N.length;)if(!((D=N.pop())-(M=N.pop())<=R)){var $=M+Math.ceil((D-M)/R/2)*R;t(E,$,M,D,k),N.push(M,$,$,D)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(E){var M=this.data,D=[];if(!P(E,M))return D;for(var R=this.toBBox,k=[];M;){for(var N=0;N<M.children.length;N++){var $=M.children[N],B=M.leaf?R($):$;P(E,B)&&(M.leaf?D.push($):C(E,B)?this._all($,D):k.push($))}M=k.pop()}return D},r.prototype.collides=function(E){var M=this.data;if(!P(E,M))return!1;for(var D=[];M;){for(var R=0;R<M.children.length;R++){var k=M.children[R],N=M.leaf?this.toBBox(k):k;if(P(E,N)){if(M.leaf||C(E,N))return!0;D.push(k)}}M=D.pop()}return!1},r.prototype.load=function(E){if(!E||!E.length)return this;if(E.length<this._minEntries){for(var M=0;M<E.length;M++)this.insert(E[M]);return this}var D=this._build(E.slice(),0,E.length-1,0);if(this.data.children.length)if(this.data.height===D.height)this._splitRoot(this.data,D);else{if(this.data.height<D.height){var R=this.data;this.data=D,D=R}this._insert(D,this.data.height-D.height-1,!0)}else this.data=D;return this},r.prototype.insert=function(E){return E&&this._insert(E,this.data.height-1),this},r.prototype.clear=function(){return this.data=S([]),this},r.prototype.remove=function(E,M){if(!E)return this;for(var D,R,k,N=this.data,$=this.toBBox(E),B=[],F=[];N||B.length;){if(N||(N=B.pop(),R=B[B.length-1],D=F.pop(),k=!0),N.leaf){var z=o(E,N.children,M);if(z!==-1)return N.children.splice(z,1),B.push(N),this._condense(B),this}k||N.leaf||!C(N,$)?R?(D++,N=R.children[D],k=!1):N=null:(B.push(N),F.push(D),D=0,R=N,N=N.children[0])}return this},r.prototype.toBBox=function(E){return E},r.prototype.compareMinX=function(E,M){return E.minX-M.minX},r.prototype.compareMinY=function(E,M){return E.minY-M.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(E){return this.data=E,this},r.prototype._all=function(E,M){for(var D=[];E;)E.leaf?M.push.apply(M,E.children):D.push.apply(D,E.children),E=D.pop();return M},r.prototype._build=function(E,M,D,R){var k,N=D-M+1,$=this._maxEntries;if(N<=$)return c(k=S(E.slice(M,D+1)),this.toBBox),k;R||(R=Math.ceil(Math.log(N)/Math.log($)),$=Math.ceil(N/Math.pow($,R-1))),(k=S([])).leaf=!1,k.height=R;var B=Math.ceil(N/$),F=B*Math.ceil(Math.sqrt($));L(E,M,D,F,this.compareMinX);for(var z=M;z<=D;z+=F){var Y=Math.min(z+F-1,D);L(E,z,Y,B,this.compareMinY);for(var J=z;J<=Y;J+=B){var q=Math.min(J+B-1,Y);k.children.push(this._build(E,J,q,R-1))}}return c(k,this.toBBox),k},r.prototype._chooseSubtree=function(E,M,D,R){for(;R.push(M),!M.leaf&&R.length-1!==D;){for(var k=1/0,N=1/0,$=void 0,B=0;B<M.children.length;B++){var F=M.children[B],z=g(F),Y=(J=E,q=F,(Math.max(q.maxX,J.maxX)-Math.min(q.minX,J.minX))*(Math.max(q.maxY,J.maxY)-Math.min(q.minY,J.minY))-z);Y<N?(N=Y,k=z<k?z:k,$=F):Y===N&&z<k&&(k=z,$=F)}M=$||M.children[0]}var J,q;return M},r.prototype._insert=function(E,M,D){var R=D?E:this.toBBox(E),k=[],N=this._chooseSubtree(R,this.data,M,k);for(N.children.push(E),l(N,R);M>=0&&k[M].children.length>this._maxEntries;)this._split(k,M),M--;this._adjustParentBBoxes(R,k,M)},r.prototype._split=function(E,M){var D=E[M],R=D.children.length,k=this._minEntries;this._chooseSplitAxis(D,k,R);var N=this._chooseSplitIndex(D,k,R),$=S(D.children.splice(N,D.children.length-N));$.height=D.height,$.leaf=D.leaf,c(D,this.toBBox),c($,this.toBBox),M?E[M-1].children.push($):this._splitRoot(D,$)},r.prototype._splitRoot=function(E,M){this.data=S([E,M]),this.data.height=E.height+1,this.data.leaf=!1,c(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(E,M,D){for(var R,k,N,$,B,F,z,Y=1/0,J=1/0,q=M;q<=D-M;q++){var le=_(E,0,q,this.toBBox),j=_(E,q,D,this.toBBox),ie=(k=le,N=j,$=void 0,B=void 0,F=void 0,z=void 0,$=Math.max(k.minX,N.minX),B=Math.max(k.minY,N.minY),F=Math.min(k.maxX,N.maxX),z=Math.min(k.maxY,N.maxY),Math.max(0,F-$)*Math.max(0,z-B)),te=g(le)+g(j);ie<Y?(Y=ie,R=q,J=te<J?te:J):ie===Y&&te<J&&(J=te,R=q)}return R||D-M},r.prototype._chooseSplitAxis=function(E,M,D){var R=E.leaf?this.compareMinX:d,k=E.leaf?this.compareMinY:f;this._allDistMargin(E,M,D,R)<this._allDistMargin(E,M,D,k)&&E.children.sort(R)},r.prototype._allDistMargin=function(E,M,D,R){E.children.sort(R);for(var k=this.toBBox,N=_(E,0,M,k),$=_(E,D-M,D,k),B=b(N)+b($),F=M;F<D-M;F++){var z=E.children[F];l(N,E.leaf?k(z):z),B+=b(N)}for(var Y=D-M-1;Y>=M;Y--){var J=E.children[Y];l($,E.leaf?k(J):J),B+=b($)}return B},r.prototype._adjustParentBBoxes=function(E,M,D){for(var R=D;R>=0;R--)l(M[R],E)},r.prototype._condense=function(E){for(var M=E.length-1,D=void 0;M>=0;M--)E[M].children.length===0?M>0?(D=E[M-1].children).splice(D.indexOf(E[M]),1):this.clear():c(E[M],this.toBBox)},r})}(rbush_min$1)),rbush_minExports$1}class TinyQueue{constructor(e=[],t=defaultCompare){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:i}=this,s=t[e];for(;e>0;){const r=e-1>>1,o=t[r];if(i(s,o)>=0)break;t[e]=o,e=r}t[e]=s}_down(e){const{data:t,compare:i}=this,s=this.length>>1,r=t[e];for(;e<s;){let o=(e<<1)+1,c=t[o];const _=o+1;if(_<this.length&&i(t[_],c)<0&&(o=_,c=t[_]),i(c,r)>=0)break;t[e]=c,e=o}t[e]=r}}function defaultCompare(n,e){return n<e?-1:n>e?1:0}const tinyqueue=Object.freeze(Object.defineProperty({__proto__:null,default:TinyQueue},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(tinyqueue);var pointInPolygonExports={},pointInPolygon={get exports(){return pointInPolygonExports},set exports(n){pointInPolygonExports=n}},flat,hasRequiredFlat;function requireFlat(){return hasRequiredFlat||(hasRequiredFlat=1,flat=function(e,t,i,s){var r=e[0],o=e[1],c=!1;i===void 0&&(i=0),s===void 0&&(s=t.length);for(var _=(s-i)/2,l=0,d=_-1;l<_;d=l++){var f=t[i+l*2+0],g=t[i+l*2+1],b=t[i+d*2+0],C=t[i+d*2+1],P=g>o!=C>o&&r<(b-f)*(o-g)/(C-g)+f;P&&(c=!c)}return c}),flat}var nested,hasRequiredNested;function requireNested(){return hasRequiredNested||(hasRequiredNested=1,nested=function(e,t,i,s){var r=e[0],o=e[1],c=!1;i===void 0&&(i=0),s===void 0&&(s=t.length);for(var _=s-i,l=0,d=_-1;l<_;d=l++){var f=t[l+i][0],g=t[l+i][1],b=t[d+i][0],C=t[d+i][1],P=g>o!=C>o&&r<(b-f)*(o-g)/(C-g)+f;P&&(c=!c)}return c}),nested}var hasRequiredPointInPolygon;function requirePointInPolygon(){if(hasRequiredPointInPolygon)return pointInPolygonExports;hasRequiredPointInPolygon=1;var n=requireFlat(),e=requireNested();return pointInPolygon.exports=function(i,s,r,o){return s.length>0&&Array.isArray(s[0])?e(i,s,r,o):n(i,s,r,o)},pointInPolygonExports.nested=e,pointInPolygonExports.flat=n,pointInPolygonExports}var orient2d_minExports={},orient2d_min={get exports(){return orient2d_minExports},set exports(n){orient2d_minExports=n}},hasRequiredOrient2d_min;function requireOrient2d_min(){return hasRequiredOrient2d_min||(hasRequiredOrient2d_min=1,function(n,e){(function(t,i){i(e)})(commonjsGlobal,function(t){const s=33306690738754706e-32;function r(P,S,L,E,M){let D,R,k,N,$=S[0],B=E[0],F=0,z=0;B>$==B>-$?(D=$,$=S[++F]):(D=B,B=E[++z]);let Y=0;if(F<P&&z<L)for(B>$==B>-$?(k=D-((R=$+D)-$),$=S[++F]):(k=D-((R=B+D)-B),B=E[++z]),D=R,k!==0&&(M[Y++]=k);F<P&&z<L;)B>$==B>-$?(k=D-((R=D+$)-(N=R-D))+($-N),$=S[++F]):(k=D-((R=D+B)-(N=R-D))+(B-N),B=E[++z]),D=R,k!==0&&(M[Y++]=k);for(;F<P;)k=D-((R=D+$)-(N=R-D))+($-N),$=S[++F],D=R,k!==0&&(M[Y++]=k);for(;z<L;)k=D-((R=D+B)-(N=R-D))+(B-N),B=E[++z],D=R,k!==0&&(M[Y++]=k);return D===0&&Y!==0||(M[Y++]=D),Y}function o(P){return new Float64Array(P)}const c=33306690738754716e-32,_=22204460492503146e-32,l=11093356479670487e-47,d=o(4),f=o(8),g=o(12),b=o(16),C=o(4);t.orient2d=function(P,S,L,E,M,D){const R=(S-D)*(L-M),k=(P-M)*(E-D),N=R-k;if(R===0||k===0||R>0!=k>0)return N;const $=Math.abs(R+k);return Math.abs(N)>=c*$?N:-function(B,F,z,Y,J,q,le){let j,ie,te,ce,xe,he,Q,fe,Ae,me,Se,Ie,pe,Te,ye,ge,ae,we;const ke=B-J,Ne=z-J,$e=F-q,qe=Y-q;xe=(ye=(fe=ke-(Q=(he=134217729*ke)-(he-ke)))*(me=qe-(Ae=(he=134217729*qe)-(he-qe)))-((Te=ke*qe)-Q*Ae-fe*Ae-Q*me))-(Se=ye-(ae=(fe=$e-(Q=(he=134217729*$e)-(he-$e)))*(me=Ne-(Ae=(he=134217729*Ne)-(he-Ne)))-((ge=$e*Ne)-Q*Ae-fe*Ae-Q*me))),d[0]=ye-(Se+xe)+(xe-ae),xe=(pe=Te-((Ie=Te+Se)-(xe=Ie-Te))+(Se-xe))-(Se=pe-ge),d[1]=pe-(Se+xe)+(xe-ge),xe=(we=Ie+Se)-Ie,d[2]=Ie-(we-xe)+(Se-xe),d[3]=we;let Je=function(oe,_e){let Pe=_e[0];for(let De=1;De<oe;De++)Pe+=_e[De];return Pe}(4,d),ve=_*le;if(Je>=ve||-Je>=ve||(j=B-(ke+(xe=B-ke))+(xe-J),te=z-(Ne+(xe=z-Ne))+(xe-J),ie=F-($e+(xe=F-$e))+(xe-q),ce=Y-(qe+(xe=Y-qe))+(xe-q),j===0&&ie===0&&te===0&&ce===0)||(ve=l*le+s*Math.abs(Je),(Je+=ke*ce+qe*j-($e*te+Ne*ie))>=ve||-Je>=ve))return Je;xe=(ye=(fe=j-(Q=(he=134217729*j)-(he-j)))*(me=qe-(Ae=(he=134217729*qe)-(he-qe)))-((Te=j*qe)-Q*Ae-fe*Ae-Q*me))-(Se=ye-(ae=(fe=ie-(Q=(he=134217729*ie)-(he-ie)))*(me=Ne-(Ae=(he=134217729*Ne)-(he-Ne)))-((ge=ie*Ne)-Q*Ae-fe*Ae-Q*me))),C[0]=ye-(Se+xe)+(xe-ae),xe=(pe=Te-((Ie=Te+Se)-(xe=Ie-Te))+(Se-xe))-(Se=pe-ge),C[1]=pe-(Se+xe)+(xe-ge),xe=(we=Ie+Se)-Ie,C[2]=Ie-(we-xe)+(Se-xe),C[3]=we;const W=r(4,d,4,C,f);xe=(ye=(fe=ke-(Q=(he=134217729*ke)-(he-ke)))*(me=ce-(Ae=(he=134217729*ce)-(he-ce)))-((Te=ke*ce)-Q*Ae-fe*Ae-Q*me))-(Se=ye-(ae=(fe=$e-(Q=(he=134217729*$e)-(he-$e)))*(me=te-(Ae=(he=134217729*te)-(he-te)))-((ge=$e*te)-Q*Ae-fe*Ae-Q*me))),C[0]=ye-(Se+xe)+(xe-ae),xe=(pe=Te-((Ie=Te+Se)-(xe=Ie-Te))+(Se-xe))-(Se=pe-ge),C[1]=pe-(Se+xe)+(xe-ge),xe=(we=Ie+Se)-Ie,C[2]=Ie-(we-xe)+(Se-xe),C[3]=we;const U=r(W,f,4,C,g);xe=(ye=(fe=j-(Q=(he=134217729*j)-(he-j)))*(me=ce-(Ae=(he=134217729*ce)-(he-ce)))-((Te=j*ce)-Q*Ae-fe*Ae-Q*me))-(Se=ye-(ae=(fe=ie-(Q=(he=134217729*ie)-(he-ie)))*(me=te-(Ae=(he=134217729*te)-(he-te)))-((ge=ie*te)-Q*Ae-fe*Ae-Q*me))),C[0]=ye-(Se+xe)+(xe-ae),xe=(pe=Te-((Ie=Te+Se)-(xe=Ie-Te))+(Se-xe))-(Se=pe-ge),C[1]=pe-(Se+xe)+(xe-ge),xe=(we=Ie+Se)-Ie,C[2]=Ie-(we-xe)+(Se-xe),C[3]=we;const X=r(U,g,4,C,b);return b[X-1]}(P,S,L,E,M,D,$)},t.orient2dfast=function(P,S,L,E,M,D){return(S-D)*(L-M)-(P-M)*(E-D)},Object.defineProperty(t,"__esModule",{value:!0})})}(orient2d_min,orient2d_minExports)),orient2d_minExports}var hasRequiredConcaveman;function requireConcaveman(){if(hasRequiredConcaveman)return concavemanExports;hasRequiredConcaveman=1;var n=requireRbush_min$1(),e=require$$1,t=requirePointInPolygon(),i=requireOrient2d_min().orient2d;e.default&&(e=e.default),concaveman.exports=s,concavemanExports.default=s;function s(D,R,k){R=Math.max(0,R===void 0?2:R),k=k||0;var N=b(D),$=new n(16);$.toBBox=function(Q){return{minX:Q[0],minY:Q[1],maxX:Q[0],maxY:Q[1]}},$.compareMinX=function(Q,fe){return Q[0]-fe[0]},$.compareMinY=function(Q,fe){return Q[1]-fe[1]},$.load(D);for(var B=[],F=0,z;F<N.length;F++){var Y=N[F];$.remove(Y),z=C(Y,z),B.push(z)}var J=new n(16);for(F=0;F<B.length;F++)J.insert(g(B[F]));for(var q=R*R,le=k*k;B.length;){var j=B.shift(),ie=j.p,te=j.next.p,ce=P(ie,te);if(!(ce<le)){var xe=ce/q;Y=r($,j.prev.p,ie,te,j.next.next.p,xe,J),Y&&Math.min(P(Y,ie),P(Y,te))<=xe&&(B.push(j),B.push(C(Y,j)),$.remove(Y),J.remove(j),J.insert(g(j)),J.insert(g(j.next)))}}j=z;var he=[];do he.push(j.p),j=j.next;while(j!==z);return he.push(j.p),he}function r(D,R,k,N,$,B,F){for(var z=new e([],o),Y=D.data;Y;){for(var J=0;J<Y.children.length;J++){var q=Y.children[J],le=Y.leaf?S(q,k,N):c(k,N,q);le>B||z.push({node:q,dist:le})}for(;z.length&&!z.peek().node.children;){var j=z.pop(),ie=j.node,te=S(ie,R,k),ce=S(ie,N,$);if(j.dist<te&&j.dist<ce&&l(k,ie,F)&&l(N,ie,F))return ie}Y=z.pop(),Y&&(Y=Y.node)}return null}function o(D,R){return D.dist-R.dist}function c(D,R,k){if(_(D,k)||_(R,k))return 0;var N=L(D[0],D[1],R[0],R[1],k.minX,k.minY,k.maxX,k.minY);if(N===0)return 0;var $=L(D[0],D[1],R[0],R[1],k.minX,k.minY,k.minX,k.maxY);if($===0)return 0;var B=L(D[0],D[1],R[0],R[1],k.maxX,k.minY,k.maxX,k.maxY);if(B===0)return 0;var F=L(D[0],D[1],R[0],R[1],k.minX,k.maxY,k.maxX,k.maxY);return F===0?0:Math.min(N,$,B,F)}function _(D,R){return D[0]>=R.minX&&D[0]<=R.maxX&&D[1]>=R.minY&&D[1]<=R.maxY}function l(D,R,k){for(var N=Math.min(D[0],R[0]),$=Math.min(D[1],R[1]),B=Math.max(D[0],R[0]),F=Math.max(D[1],R[1]),z=k.search({minX:N,minY:$,maxX:B,maxY:F}),Y=0;Y<z.length;Y++)if(f(z[Y].p,z[Y].next.p,D,R))return!1;return!0}function d(D,R,k){return i(D[0],D[1],R[0],R[1],k[0],k[1])}function f(D,R,k,N){return D!==N&&R!==k&&d(D,R,k)>0!=d(D,R,N)>0&&d(k,N,D)>0!=d(k,N,R)>0}function g(D){var R=D.p,k=D.next.p;return D.minX=Math.min(R[0],k[0]),D.minY=Math.min(R[1],k[1]),D.maxX=Math.max(R[0],k[0]),D.maxY=Math.max(R[1],k[1]),D}function b(D){for(var R=D[0],k=D[0],N=D[0],$=D[0],B=0;B<D.length;B++){var F=D[B];F[0]<R[0]&&(R=F),F[0]>N[0]&&(N=F),F[1]<k[1]&&(k=F),F[1]>$[1]&&($=F)}var z=[R,k,N,$],Y=z.slice();for(B=0;B<D.length;B++)t(D[B],z)||Y.push(D[B]);return M(Y)}function C(D,R){var k={p:D,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return R?(k.next=R.next,k.prev=R,R.next.prev=k,R.next=k):(k.prev=k,k.next=k),k}function P(D,R){var k=D[0]-R[0],N=D[1]-R[1];return k*k+N*N}function S(D,R,k){var N=R[0],$=R[1],B=k[0]-N,F=k[1]-$;if(B!==0||F!==0){var z=((D[0]-N)*B+(D[1]-$)*F)/(B*B+F*F);z>1?(N=k[0],$=k[1]):z>0&&(N+=B*z,$+=F*z)}return B=D[0]-N,F=D[1]-$,B*B+F*F}function L(D,R,k,N,$,B,F,z){var Y=k-D,J=N-R,q=F-$,le=z-B,j=D-$,ie=R-B,te=Y*Y+J*J,ce=Y*q+J*le,xe=q*q+le*le,he=Y*j+J*ie,Q=q*j+le*ie,fe=te*xe-ce*ce,Ae,me,Se,Ie,pe=fe,Te=fe;fe===0?(me=0,pe=1,Ie=Q,Te=xe):(me=ce*Q-xe*he,Ie=te*Q-ce*he,me<0?(me=0,Ie=Q,Te=xe):me>pe&&(me=pe,Ie=Q+ce,Te=xe)),Ie<0?(Ie=0,-he<0?me=0:-he>te?me=pe:(me=-he,pe=te)):Ie>Te&&(Ie=Te,-he+ce<0?me=0:-he+ce>te?me=pe:(me=-he+ce,pe=te)),Ae=me===0?0:me/pe,Se=Ie===0?0:Ie/Te;var ye=(1-Ae)*D+Ae*k,ge=(1-Ae)*R+Ae*N,ae=(1-Se)*$+Se*F,we=(1-Se)*B+Se*z,ke=ae-ye,Ne=we-ge;return ke*ke+Ne*Ne}function E(D,R){return D[0]===R[0]?D[1]-R[1]:D[0]-R[0]}function M(D){D.sort(E);for(var R=[],k=0;k<D.length;k++){for(;R.length>=2&&d(R[R.length-2],R[R.length-1],D[k])<=0;)R.pop();R.push(D[k])}for(var N=[],$=D.length-1;$>=0;$--){for(;N.length>=2&&d(N[N.length-2],N[N.length-1],D[$])<=0;)N.pop();N.push(D[$])}return N.pop(),R.pop(),R.concat(N)}return concavemanExports}var hasRequiredJs$1B;function requireJs$1B(){if(hasRequiredJs$1B)return js$1A;hasRequiredJs$1B=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(js$1A,"__esModule",{value:!0});var e=requireJs$1G(),t=requireJs$1F(),i=n(requireConcaveman());function s(r,o){o===void 0&&(o={}),o.concavity=o.concavity||1/0;var c=[];if(t.coordEach(r,function(l){c.push([l[0],l[1]])}),!c.length)return null;var _=i.default(c,o.concavity);return _.length>3?e.polygon([_]):null}return js$1A.default=s,js$1A}var jsExports$A={},js$1z={get exports(){return jsExports$A},set exports(n){jsExports$A=n}},js$1y={},hasRequiredJs$1A;function requireJs$1A(){if(hasRequiredJs$1A)return js$1y;hasRequiredJs$1A=1,Object.defineProperty(js$1y,"__esModule",{value:!0});var n=requireJs$1D();function e(s,r,o){if(o===void 0&&(o={}),!s)throw new Error("point is required");if(!r)throw new Error("polygon is required");var c=n.getCoord(s),_=n.getGeom(r),l=_.type,d=r.bbox,f=_.coordinates;if(d&&i(c,d)===!1)return!1;l==="Polygon"&&(f=[f]);for(var g=!1,b=0;b<f.length&&!g;b++)if(t(c,f[b][0],o.ignoreBoundary)){for(var C=!1,P=1;P<f[b].length&&!C;)t(c,f[b][P],!o.ignoreBoundary)&&(C=!0),P++;C||(g=!0)}return g}js$1y.default=e;function t(s,r,o){var c=!1;r[0][0]===r[r.length-1][0]&&r[0][1]===r[r.length-1][1]&&(r=r.slice(0,r.length-1));for(var _=0,l=r.length-1;_<r.length;l=_++){var d=r[_][0],f=r[_][1],g=r[l][0],b=r[l][1],C=s[1]*(d-g)+f*(g-s[0])+b*(s[0]-d)===0&&(d-s[0])*(g-s[0])<=0&&(f-s[1])*(b-s[1])<=0;if(C)return!o;var P=f>s[1]!=b>s[1]&&s[0]<(g-d)*(s[1]-f)/(b-f)+d;P&&(c=!c)}return c}function i(s,r){return r[0]<=s[0]&&r[1]<=s[1]&&r[2]>=s[0]&&r[3]>=s[1]}return js$1y}var hasRequiredJs$1z;function requireJs$1z(){if(hasRequiredJs$1z)return jsExports$A;hasRequiredJs$1z=1;var n=requireJs$1A(),e=requireJs$1G(),t=requireJs$1F();function i(o){return o&&typeof o=="object"&&"default"in o?o:{default:o}}var s=i(n);function r(o,c){var _=[];return t.featureEach(o,function(l){var d=!1;if(l.geometry.type==="Point")t.geomEach(c,function(g){s.default(l,g)&&(d=!0)}),d&&_.push(l);else if(l.geometry.type==="MultiPoint"){var f=[];t.geomEach(c,function(g){t.coordEach(l,function(b){s.default(b,g)&&(d=!0,f.push(b))})}),d&&_.push(e.multiPoint(f))}else throw new Error("Input geometry must be a Point or MultiPoint")}),e.featureCollection(_)}return js$1z.exports=r,jsExports$A.default=r,jsExports$A}var js$1x={},js$1w={},hasRequiredJs$1y;function requireJs$1y(){if(hasRequiredJs$1y)return js$1w;hasRequiredJs$1y=1,Object.defineProperty(js$1w,"__esModule",{value:!0});var n=requireJs$1D(),e=requireJs$1G();function t(i,s,r){r===void 0&&(r={});var o=n.getCoord(i),c=n.getCoord(s),_=e.degreesToRadians(c[1]-o[1]),l=e.degreesToRadians(c[0]-o[0]),d=e.degreesToRadians(o[1]),f=e.degreesToRadians(c[1]),g=Math.pow(Math.sin(_/2),2)+Math.pow(Math.sin(l/2),2)*Math.cos(d)*Math.cos(f);return e.radiansToLength(2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g)),r.units)}return js$1w.default=t,js$1w}var js$1v={},hasRequiredJs$1x;function requireJs$1x(){if(hasRequiredJs$1x)return js$1v;hasRequiredJs$1x=1,Object.defineProperty(js$1v,"__esModule",{value:!0});var n=requireJs$1G();function e(o,c){var _=!1;return n.featureCollection(r(o.features.map(function(l){var d={x:l.geometry.coordinates[0],y:l.geometry.coordinates[1]};return c?d.z=l.properties[c]:l.geometry.coordinates.length===3&&(_=!0,d.z=l.geometry.coordinates[2]),d})).map(function(l){var d=[l.a.x,l.a.y],f=[l.b.x,l.b.y],g=[l.c.x,l.c.y],b={};return _?(d.push(l.a.z),f.push(l.b.z),g.push(l.c.z)):b={a:l.a.z,b:l.b.z,c:l.c.z},n.polygon([[d,f,g,d]],b)}))}js$1v.default=e;var t=function(){function o(c,_,l){this.a=c,this.b=_,this.c=l;var d=_.x-c.x,f=_.y-c.y,g=l.x-c.x,b=l.y-c.y,C=d*(c.x+_.x)+f*(c.y+_.y),P=g*(c.x+l.x)+b*(c.y+l.y),S=2*(d*(l.y-_.y)-f*(l.x-_.x)),L,E;this.x=(b*C-f*P)/S,this.y=(d*P-g*C)/S,L=this.x-c.x,E=this.y-c.y,this.r=L*L+E*E}return o}();function i(o,c){return c.x-o.x}function s(o){var c=o.length,_,l,d,f,g;e:for(;c;)for(l=o[--c],_=o[--c],d=c;d;)if(g=o[--d],f=o[--d],_===f&&l===g||_===g&&l===f){o.splice(c,2),o.splice(d,2),c-=2;continue e}}function r(o){if(o.length<3)return[];o.sort(i);for(var c=o.length-1,_=o[c].x,l=o[0].x,d=o[c].y,f=d,g=1e-12,b,C,P,S,L,E;c--;)o[c].y<d&&(d=o[c].y),o[c].y>f&&(f=o[c].y);var M=l-_,D=f-d,R=M>D?M:D,k=(l+_)*.5,N=(f+d)*.5,$=[new t({__sentinel:!0,x:k-20*R,y:N-R},{__sentinel:!0,x:k,y:N+20*R},{__sentinel:!0,x:k+20*R,y:N-R})],B=[],F=[],z;for(c=o.length;c--;){for(F.length=0,z=$.length;z--;){if(M=o[c].x-$[z].x,M>0&&M*M>$[z].r){B.push($[z]),$.splice(z,1);continue}D=o[c].y-$[z].y,!(M*M+D*D>$[z].r)&&(F.push($[z].a,$[z].b,$[z].b,$[z].c,$[z].c,$[z].a),$.splice(z,1))}for(s(F),z=F.length;z;)C=F[--z],b=F[--z],P=o[c],S=C.x-b.x,L=C.y-b.y,E=2*(S*(P.y-C.y)-L*(P.x-C.x)),Math.abs(E)>g&&$.push(new t(b,C,P))}for(Array.prototype.push.apply(B,$),c=B.length;c--;)(B[c].a.__sentinel||B[c].b.__sentinel||B[c].c.__sentinel)&&B.splice(c,1);return B}return js$1v}var turfDissolve={},js$1u={},hasRequiredJs$1w;function requireJs$1w(){if(hasRequiredJs$1w)return js$1u;hasRequiredJs$1w=1,Object.defineProperty(js$1u,"__esModule",{value:!0});function n(o){if(!o)throw new Error("geojson is required");switch(o.type){case"Feature":return e(o);case"FeatureCollection":return i(o);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return s(o);default:throw new Error("unknown GeoJSON type")}}function e(o){var c={type:"Feature"};return Object.keys(o).forEach(function(_){switch(_){case"type":case"properties":case"geometry":return;default:c[_]=o[_]}}),c.properties=t(o.properties),c.geometry=s(o.geometry),c}function t(o){var c={};return o&&Object.keys(o).forEach(function(_){var l=o[_];typeof l=="object"?l===null?c[_]=null:Array.isArray(l)?c[_]=l.map(function(d){return d}):c[_]=t(l):c[_]=l}),c}function i(o){var c={type:"FeatureCollection"};return Object.keys(o).forEach(function(_){switch(_){case"type":case"features":return;default:c[_]=o[_]}}),c.features=o.features.map(function(_){return e(_)}),c}function s(o){var c={type:o.type};return o.bbox&&(c.bbox=o.bbox),o.type==="GeometryCollection"?(c.geometries=o.geometries.map(function(_){return s(_)}),c):(c.coordinates=r(o.coordinates),c)}function r(o){var c=o;return typeof c[0]!="object"?c.slice():c.map(function(_){return r(_)})}return js$1u.default=n,js$1u}var turfLineDissolve={},hasRequiredTurfLineDissolve;function requireTurfLineDissolve(){if(hasRequiredTurfLineDissolve)return turfLineDissolve;hasRequiredTurfLineDissolve=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(turfLineDissolve,"__esModule",{value:!0});var e=n(requireJs$1w()),t=requireJs$1G(),i=requireJs$1D(),s=requireJs$1F();function r(_,l){if(l===void 0&&(l={}),l=l||{},!t.isObject(l))throw new Error("options is invalid");var d=l.mutate;if(i.getType(_)!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(!_.features.length)throw new Error("geojson is empty");(d===!1||d===void 0)&&(_=e.default(_));var f=[],g=s.lineReduce(_,function(b,C){var P=c(b,C);return P||(f.push(b),C)});return g&&f.push(g),f.length?f.length===1?f[0]:t.multiLineString(f.map(function(b){return b.coordinates})):null}function o(_){return _[0].toString()+","+_[1].toString()}function c(_,l){var d=_.geometry.coordinates,f=l.geometry.coordinates,g=o(d[0]),b=o(d[d.length-1]),C=o(f[0]),P=o(f[f.length-1]),S;if(g===P)S=f.concat(d.slice(1));else if(C===b)S=d.concat(f.slice(1));else if(g===C)S=d.slice(1).reverse().concat(f);else if(b===P)S=d.concat(f.reverse().slice(1));else return null;return t.lineString(S)}return turfLineDissolve.default=r,turfLineDissolve}var turfPolygonDissolve={};function identity$2(n){return n}function transform$1(n){if(n==null)return identity$2;var e,t,i=n.scale[0],s=n.scale[1],r=n.translate[0],o=n.translate[1];return function(c,_){_||(e=t=0);var l=2,d=c.length,f=new Array(d);for(f[0]=(e+=c[0])*i+r,f[1]=(t+=c[1])*s+o;l<d;)f[l]=c[l],++l;return f}}function bbox(n){var e=transform$1(n.transform),t,i=1/0,s=i,r=-i,o=-i;function c(l){l=e(l),l[0]<i&&(i=l[0]),l[0]>r&&(r=l[0]),l[1]<s&&(s=l[1]),l[1]>o&&(o=l[1])}function _(l){switch(l.type){case"GeometryCollection":l.geometries.forEach(_);break;case"Point":c(l.coordinates);break;case"MultiPoint":l.coordinates.forEach(c);break}}n.arcs.forEach(function(l){for(var d=-1,f=l.length,g;++d<f;)g=e(l[d],d),g[0]<i&&(i=g[0]),g[0]>r&&(r=g[0]),g[1]<s&&(s=g[1]),g[1]>o&&(o=g[1])});for(t in n.objects)_(n.objects[t]);return[i,s,r,o]}function reverse$1(n,e){for(var t,i=n.length,s=i-e;s<--i;)t=n[s],n[s++]=n[i],n[i]=t}function feature(n,e){return typeof e=="string"&&(e=n.objects[e]),e.type==="GeometryCollection"?{type:"FeatureCollection",features:e.geometries.map(function(t){return feature$1(n,t)})}:feature$1(n,e)}function feature$1(n,e){var t=e.id,i=e.bbox,s=e.properties==null?{}:e.properties,r=object$1(n,e);return t==null&&i==null?{type:"Feature",properties:s,geometry:r}:i==null?{type:"Feature",id:t,properties:s,geometry:r}:{type:"Feature",id:t,bbox:i,properties:s,geometry:r}}function object$1(n,e){var t=transform$1(n.transform),i=n.arcs;function s(d,f){f.length&&f.pop();for(var g=i[d<0?~d:d],b=0,C=g.length;b<C;++b)f.push(t(g[b],b));d<0&&reverse$1(f,C)}function r(d){return t(d)}function o(d){for(var f=[],g=0,b=d.length;g<b;++g)s(d[g],f);return f.length<2&&f.push(f[0]),f}function c(d){for(var f=o(d);f.length<4;)f.push(f[0]);return f}function _(d){return d.map(c)}function l(d){var f=d.type,g;switch(f){case"GeometryCollection":return{type:f,geometries:d.geometries.map(l)};case"Point":g=r(d.coordinates);break;case"MultiPoint":g=d.coordinates.map(r);break;case"LineString":g=o(d.arcs);break;case"MultiLineString":g=d.arcs.map(o);break;case"Polygon":g=_(d.arcs);break;case"MultiPolygon":g=d.arcs.map(_);break;default:return null}return{type:f,coordinates:g}}return l(e)}function stitch(n,e){var t={},i={},s={},r=[],o=-1;e.forEach(function(l,d){var f=n.arcs[l<0?~l:l],g;f.length<3&&!f[1][0]&&!f[1][1]&&(g=e[++o],e[o]=l,e[d]=g)}),e.forEach(function(l){var d=c(l),f=d[0],g=d[1],b,C;if(b=s[f])if(delete s[b.end],b.push(l),b.end=g,C=i[g]){delete i[C.start];var P=C===b?b:b.concat(C);i[P.start=b.start]=s[P.end=C.end]=P}else i[b.start]=s[b.end]=b;else if(b=i[g])if(delete i[b.start],b.unshift(l),b.start=f,C=s[f]){delete s[C.end];var S=C===b?b:C.concat(b);i[S.start=C.start]=s[S.end=b.end]=S}else i[b.start]=s[b.end]=b;else b=[l],i[b.start=f]=s[b.end=g]=b});function c(l){var d=n.arcs[l<0?~l:l],f=d[0],g;return n.transform?(g=[0,0],d.forEach(function(b){g[0]+=b[0],g[1]+=b[1]})):g=d[d.length-1],l<0?[g,f]:[f,g]}function _(l,d){for(var f in l){var g=l[f];delete d[g.start],delete g.start,delete g.end,g.forEach(function(b){t[b<0?~b:b]=1}),r.push(g)}}return _(s,i),_(i,s),e.forEach(function(l){t[l<0?~l:l]||r.push([l])}),r}function mesh(n){return object$1(n,meshArcs.apply(this,arguments))}function meshArcs(n,e,t){var i,s,r;if(arguments.length>1)i=extractArcs(n,e,t);else for(s=0,i=new Array(r=n.arcs.length);s<r;++s)i[s]=s;return{type:"MultiLineString",arcs:stitch(n,i)}}function extractArcs(n,e,t){var i=[],s=[],r;function o(f){var g=f<0?~f:f;(s[g]||(s[g]=[])).push({i:f,g:r})}function c(f){f.forEach(o)}function _(f){f.forEach(c)}function l(f){f.forEach(_)}function d(f){switch(r=f,f.type){case"GeometryCollection":f.geometries.forEach(d);break;case"LineString":c(f.arcs);break;case"MultiLineString":case"Polygon":_(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return d(e),s.forEach(t==null?function(f){i.push(f[0].i)}:function(f){t(f[0].g,f[f.length-1].g)&&i.push(f[0].i)}),i}function planarRingArea(n){for(var e=-1,t=n.length,i,s=n[t-1],r=0;++e<t;)i=s,s=n[e],r+=i[0]*s[1]-i[1]*s[0];return Math.abs(r)}function merge$1(n){return object$1(n,mergeArcs.apply(this,arguments))}function mergeArcs(n,e){var t={},i=[],s=[];e.forEach(r);function r(_){switch(_.type){case"GeometryCollection":_.geometries.forEach(r);break;case"Polygon":o(_.arcs);break;case"MultiPolygon":_.arcs.forEach(o);break}}function o(_){_.forEach(function(l){l.forEach(function(d){(t[d=d<0?~d:d]||(t[d]=[])).push(_)})}),i.push(_)}function c(_){return planarRingArea(object$1(n,{type:"Polygon",arcs:[_]}).coordinates[0])}return i.forEach(function(_){if(!_._){var l=[],d=[_];for(_._=1,s.push(l);_=d.pop();)l.push(_),_.forEach(function(f){f.forEach(function(g){t[g<0?~g:g].forEach(function(b){b._||(b._=1,d.push(b))})})})}}),i.forEach(function(_){delete _._}),{type:"MultiPolygon",arcs:s.map(function(_){var l=[],d;if(_.forEach(function(P){P.forEach(function(S){S.forEach(function(L){t[L<0?~L:L].length<2&&l.push(L)})})}),l=stitch(n,l),(d=l.length)>1)for(var f=1,g=c(l[0]),b,C;f<d;++f)(b=c(l[f]))>g&&(C=l[0],l[0]=l[f],l[f]=C,g=b);return l}).filter(function(_){return _.length>0})}}function bisect(n,e){for(var t=0,i=n.length;t<i;){var s=t+i>>>1;n[s]<e?t=s+1:i=s}return t}function neighbors(n){var e={},t=n.map(function(){return[]});function i(P,S){P.forEach(function(L){L<0&&(L=~L);var E=e[L];E?E.push(S):e[L]=[S]})}function s(P,S){P.forEach(function(L){i(L,S)})}function r(P,S){P.type==="GeometryCollection"?P.geometries.forEach(function(L){r(L,S)}):P.type in o&&o[P.type](P.arcs,S)}var o={LineString:i,MultiLineString:s,Polygon:s,MultiPolygon:function(P,S){P.forEach(function(L){s(L,S)})}};n.forEach(r);for(var c in e)for(var _=e[c],l=_.length,d=0;d<l;++d)for(var f=d+1;f<l;++f){var g=_[d],b=_[f],C;(C=t[g])[c=bisect(C,b)]!==b&&C.splice(c,0,b),(C=t[b])[c=bisect(C,g)]!==g&&C.splice(c,0,g)}return t}function untransform(n){if(n==null)return identity$2;var e,t,i=n.scale[0],s=n.scale[1],r=n.translate[0],o=n.translate[1];return function(c,_){_||(e=t=0);var l=2,d=c.length,f=new Array(d),g=Math.round((c[0]-r)/i),b=Math.round((c[1]-o)/s);for(f[0]=g-e,e=g,f[1]=b-t,t=b;l<d;)f[l]=c[l],++l;return f}}function quantize(n,e){if(n.transform)throw new Error("already quantized");if(!e||!e.scale){if(!((o=Math.floor(e))>=2))throw new Error("n must be ≥2");_=n.bbox||bbox(n);var t=_[0],i=_[1],s=_[2],r=_[3],o;e={scale:[s-t?(s-t)/(o-1):1,r-i?(r-i)/(o-1):1],translate:[t,i]}}else _=n.bbox;var c=untransform(e),_,l,d=n.objects,f={};function g(P){return c(P)}function b(P){var S;switch(P.type){case"GeometryCollection":S={type:"GeometryCollection",geometries:P.geometries.map(b)};break;case"Point":S={type:"Point",coordinates:g(P.coordinates)};break;case"MultiPoint":S={type:"MultiPoint",coordinates:P.coordinates.map(g)};break;default:return P}return P.id!=null&&(S.id=P.id),P.bbox!=null&&(S.bbox=P.bbox),P.properties!=null&&(S.properties=P.properties),S}function C(P){var S=0,L=1,E=P.length,M,D=new Array(E);for(D[0]=c(P[0],0);++S<E;)((M=c(P[S],S))[0]||M[1])&&(D[L++]=M);return L===1&&(D[L++]=[0,0]),D.length=L,D}for(l in d)f[l]=b(d[l]);return{type:"Topology",bbox:_,transform:e,objects:f,arcs:n.arcs.map(C)}}const src$2=Object.freeze(Object.defineProperty({__proto__:null,bbox,feature,merge:merge$1,mergeArcs,mesh,meshArcs,neighbors,quantize,transform:transform$1,untransform},Symbol.toStringTag,{value:"Module"})),require$$4=getAugmentedNamespace(src$2);var hasOwnProperty=Object.prototype.hasOwnProperty;function bounds$1(n){var e=1/0,t=1/0,i=-1/0,s=-1/0;function r(f){f!=null&&hasOwnProperty.call(o,f.type)&&o[f.type](f)}var o={GeometryCollection:function(f){f.geometries.forEach(r)},Point:function(f){c(f.coordinates)},MultiPoint:function(f){f.coordinates.forEach(c)},LineString:function(f){_(f.arcs)},MultiLineString:function(f){f.arcs.forEach(_)},Polygon:function(f){f.arcs.forEach(_)},MultiPolygon:function(f){f.arcs.forEach(l)}};function c(f){var g=f[0],b=f[1];g<e&&(e=g),g>i&&(i=g),b<t&&(t=b),b>s&&(s=b)}function _(f){f.forEach(c)}function l(f){f.forEach(_)}for(var d in n)r(n[d]);return i>=e&&s>=t?[e,t,i,s]:void 0}function hashset(n,e,t,i,s){arguments.length===3&&(i=Array,s=null);for(var r=new i(n=1<<Math.max(4,Math.ceil(Math.log(n)/Math.LN2))),o=n-1,c=0;c<n;++c)r[c]=s;function _(f){for(var g=e(f)&o,b=r[g],C=0;b!=s;){if(t(b,f))return!0;if(++C>=n)throw new Error("full hashset");b=r[g=g+1&o]}return r[g]=f,!0}function l(f){for(var g=e(f)&o,b=r[g],C=0;b!=s;){if(t(b,f))return!0;if(++C>=n)break;b=r[g=g+1&o]}return!1}function d(){for(var f=[],g=0,b=r.length;g<b;++g){var C=r[g];C!=s&&f.push(C)}return f}return{add:_,has:l,values:d}}function hashmap(n,e,t,i,s,r){arguments.length===3&&(i=r=Array,s=null);for(var o=new i(n=1<<Math.max(4,Math.ceil(Math.log(n)/Math.LN2))),c=new r(n),_=n-1,l=0;l<n;++l)o[l]=s;function d(C,P){for(var S=e(C)&_,L=o[S],E=0;L!=s;){if(t(L,C))return c[S]=P;if(++E>=n)throw new Error("full hashmap");L=o[S=S+1&_]}return o[S]=C,c[S]=P,P}function f(C,P){for(var S=e(C)&_,L=o[S],E=0;L!=s;){if(t(L,C))return c[S];if(++E>=n)throw new Error("full hashmap");L=o[S=S+1&_]}return o[S]=C,c[S]=P,P}function g(C,P){for(var S=e(C)&_,L=o[S],E=0;L!=s;){if(t(L,C))return c[S];if(++E>=n)break;L=o[S=S+1&_]}return P}function b(){for(var C=[],P=0,S=o.length;P<S;++P){var L=o[P];L!=s&&C.push(L)}return C}return{set:d,maybeSet:f,get:g,keys:b}}function equalPoint(n,e){return n[0]===e[0]&&n[1]===e[1]}var buffer=new ArrayBuffer(16),floats=new Float64Array(buffer),uints=new Uint32Array(buffer);function hashPoint(n){floats[0]=n[0],floats[1]=n[1];var e=uints[0]^uints[1];return e=e<<5^e>>7^uints[2]^uints[3],e&2147483647}function join(n){var e=n.coordinates,t=n.lines,i=n.rings,s=k(),r=new Int32Array(e.length),o=new Int32Array(e.length),c=new Int32Array(e.length),_=new Int8Array(e.length),l=0,d,f,g,b,C;for(d=0,f=e.length;d<f;++d)r[d]=o[d]=c[d]=-1;for(d=0,f=t.length;d<f;++d){var P=t[d],S=P[0],L=P[1];for(b=s[S],C=s[++S],++l,_[b]=1;++S<=L;)R(d,g=b,b=C,C=s[S]);++l,_[C]=1}for(d=0,f=e.length;d<f;++d)r[d]=-1;for(d=0,f=i.length;d<f;++d){var E=i[d],M=E[0]+1,D=E[1];for(g=s[D-1],b=s[M-1],C=s[M],R(d,g,b,C);++M<=D;)R(d,g=b,b=C,C=s[M])}function R(z,Y,J,q){if(r[J]!==z){r[J]=z;var le=o[J];if(le>=0){var j=c[J];(le!==Y||j!==q)&&(le!==q||j!==Y)&&(++l,_[J]=1)}else o[J]=Y,c[J]=q}}function k(){for(var z=hashmap(e.length*1.4,N,$,Int32Array,-1,Int32Array),Y=new Int32Array(e.length),J=0,q=e.length;J<q;++J)Y[J]=z.maybeSet(J,J);return Y}function N(z){return hashPoint(e[z])}function $(z,Y){return equalPoint(e[z],e[Y])}r=o=c=null;var B=hashset(l*1.4,hashPoint,equalPoint),F;for(d=0,f=e.length;d<f;++d)_[F=s[d]]&&B.add(e[F]);return B}function cut(n){var e=join(n),t=n.coordinates,i=n.lines,s=n.rings,r,o,c;for(o=0,c=i.length;o<c;++o)for(var _=i[o],l=_[0],d=_[1];++l<d;)e.has(t[l])&&(r={0:l,1:_[1]},_[1]=l,_=_.next=r);for(o=0,c=s.length;o<c;++o)for(var f=s[o],g=f[0],b=g,C=f[1],P=e.has(t[g]);++b<C;)e.has(t[b])&&(P?(r={0:b,1:f[1]},f[1]=b,f=f.next=r):(rotateArray(t,g,C,C-b),t[C]=t[g],P=!0,b=g));return n}function rotateArray(n,e,t,i){reverse(n,e,t),reverse(n,e,e+i),reverse(n,e+i,t)}function reverse(n,e,t){for(var i=e+(t---e>>1),s;e<i;++e,--t)s=n[e],n[e]=n[t],n[t]=s}function dedup(n){var e=n.coordinates,t=n.lines,i,s=n.rings,r,o=t.length+s.length,c,_;for(delete n.lines,delete n.rings,c=0,_=t.length;c<_;++c)for(i=t[c];i=i.next;)++o;for(c=0,_=s.length;c<_;++c)for(r=s[c];r=r.next;)++o;var l=hashmap(o*2*1.4,hashPoint,equalPoint),d=n.arcs=[];for(c=0,_=t.length;c<_;++c){i=t[c];do f(i);while(i=i.next)}for(c=0,_=s.length;c<_;++c)if(r=s[c],r.next)do f(r);while(r=r.next);else g(r);function f(E){var M,D,R,k,N,$,B,F;if(R=l.get(M=e[E[0]])){for(B=0,F=R.length;B<F;++B)if(k=R[B],b(k,E)){E[0]=k[0],E[1]=k[1];return}}if(N=l.get(D=e[E[1]])){for(B=0,F=N.length;B<F;++B)if($=N[B],C($,E)){E[1]=$[0],E[0]=$[1];return}}R?R.push(E):l.set(M,[E]),N?N.push(E):l.set(D,[E]),d.push(E)}function g(E){var M,D,R,k,N;if(D=l.get(M=e[E[0]]))for(k=0,N=D.length;k<N;++k){if(R=D[k],P(R,E)){E[0]=R[0],E[1]=R[1];return}if(S(R,E)){E[0]=R[1],E[1]=R[0];return}}if(D=l.get(M=e[E[0]+L(E)]))for(k=0,N=D.length;k<N;++k){if(R=D[k],P(R,E)){E[0]=R[0],E[1]=R[1];return}if(S(R,E)){E[0]=R[1],E[1]=R[0];return}}D?D.push(E):l.set(M,[E]),d.push(E)}function b(E,M){var D=E[0],R=M[0],k=E[1],N=M[1];if(D-k!==R-N)return!1;for(;D<=k;++D,++R)if(!equalPoint(e[D],e[R]))return!1;return!0}function C(E,M){var D=E[0],R=M[0],k=E[1],N=M[1];if(D-k!==R-N)return!1;for(;D<=k;++D,--N)if(!equalPoint(e[D],e[N]))return!1;return!0}function P(E,M){var D=E[0],R=M[0],k=E[1],N=M[1],$=k-D;if($!==N-R)return!1;for(var B=L(E),F=L(M),z=0;z<$;++z)if(!equalPoint(e[D+(z+B)%$],e[R+(z+F)%$]))return!1;return!0}function S(E,M){var D=E[0],R=M[0],k=E[1],N=M[1],$=k-D;if($!==N-R)return!1;for(var B=L(E),F=$-L(M),z=0;z<$;++z)if(!equalPoint(e[D+(z+B)%$],e[N-(z+F)%$]))return!1;return!0}function L(E){for(var M=E[0],D=E[1],R=M,k=R,N=e[R];++R<D;){var $=e[R];($[0]<N[0]||$[0]===N[0]&&$[1]<N[1])&&(k=R,N=$)}return k-M}return n}function delta(n){for(var e=-1,t=n.length;++e<t;){for(var i=n[e],s=0,r=1,o=i.length,c=i[0],_=c[0],l=c[1],d,f;++s<o;)c=i[s],d=c[0],f=c[1],(d!==_||f!==l)&&(i[r++]=[d-_,f-l],_=d,l=f);r===1&&(i[r++]=[0,0]),i.length=r}return n}function extract(n){var e=-1,t=[],i=[],s=[];function r(f){f&&hasOwnProperty.call(o,f.type)&&o[f.type](f)}var o={GeometryCollection:function(f){f.geometries.forEach(r)},LineString:function(f){f.arcs=c(f.arcs)},MultiLineString:function(f){f.arcs=f.arcs.map(c)},Polygon:function(f){f.arcs=f.arcs.map(_)},MultiPolygon:function(f){f.arcs=f.arcs.map(l)}};function c(f){for(var g=0,b=f.length;g<b;++g)s[++e]=f[g];var C={0:e-b+1,1:e};return t.push(C),C}function _(f){for(var g=0,b=f.length;g<b;++g)s[++e]=f[g];var C={0:e-b+1,1:e};return i.push(C),C}function l(f){return f.map(_)}for(var d in n)r(n[d]);return{type:"Topology",coordinates:s,lines:t,rings:i,objects:n}}function geometry(n){var e={},t;for(t in n)e[t]=geomifyObject(n[t]);return e}function geomifyObject(n){return n==null?{type:null}:(n.type==="FeatureCollection"?geomifyFeatureCollection:n.type==="Feature"?geomifyFeature:geomifyGeometry)(n)}function geomifyFeatureCollection(n){var e={type:"GeometryCollection",geometries:n.features.map(geomifyFeature)};return n.bbox!=null&&(e.bbox=n.bbox),e}function geomifyFeature(n){var e=geomifyGeometry(n.geometry),t;n.id!=null&&(e.id=n.id),n.bbox!=null&&(e.bbox=n.bbox);for(t in n.properties){e.properties=n.properties;break}return e}function geomifyGeometry(n){if(n==null)return{type:null};var e=n.type==="GeometryCollection"?{type:"GeometryCollection",geometries:n.geometries.map(geomifyGeometry)}:n.type==="Point"||n.type==="MultiPoint"?{type:n.type,coordinates:n.coordinates}:{type:n.type,arcs:n.coordinates};return n.bbox!=null&&(e.bbox=n.bbox),e}function prequantize(n,e,t){var i=e[0],s=e[1],r=e[2],o=e[3],c=r-i?(t-1)/(r-i):1,_=o-s?(t-1)/(o-s):1;function l(L){return[Math.round((L[0]-i)*c),Math.round((L[1]-s)*_)]}function d(L,E){for(var M=-1,D=0,R=L.length,k=new Array(R),N,$,B,F,z;++M<R;)N=L[M],F=Math.round((N[0]-i)*c),z=Math.round((N[1]-s)*_),(F!==$||z!==B)&&(k[D++]=[$=F,B=z]);for(k.length=D;D<E;)D=k.push([k[0][0],k[0][1]]);return k}function f(L){return d(L,2)}function g(L){return d(L,4)}function b(L){return L.map(g)}function C(L){L!=null&&hasOwnProperty.call(P,L.type)&&P[L.type](L)}var P={GeometryCollection:function(L){L.geometries.forEach(C)},Point:function(L){L.coordinates=l(L.coordinates)},MultiPoint:function(L){L.coordinates=L.coordinates.map(l)},LineString:function(L){L.arcs=f(L.arcs)},MultiLineString:function(L){L.arcs=L.arcs.map(f)},Polygon:function(L){L.arcs=b(L.arcs)},MultiPolygon:function(L){L.arcs=L.arcs.map(b)}};for(var S in n)C(n[S]);return{scale:[1/c,1/_],translate:[i,s]}}function topology(n,e){var t=bounds$1(n=geometry(n)),i=e>0&&t&&prequantize(n,t,e),s=dedup(cut(extract(n))),r=s.coordinates,o=hashmap(s.arcs.length*1.4,hashArc,equalArc);n=s.objects,s.bbox=t,s.arcs=s.arcs.map(function(g,b){return o.set(g,b),r.slice(g[0],g[1]+1)}),delete s.coordinates,r=null;function c(g){g&&hasOwnProperty.call(_,g.type)&&_[g.type](g)}var _={GeometryCollection:function(g){g.geometries.forEach(c)},LineString:function(g){g.arcs=l(g.arcs)},MultiLineString:function(g){g.arcs=g.arcs.map(l)},Polygon:function(g){g.arcs=g.arcs.map(l)},MultiPolygon:function(g){g.arcs=g.arcs.map(d)}};function l(g){var b=[];do{var C=o.get(g);b.push(g[0]<g[1]?C:~C)}while(g=g.next);return b}function d(g){return g.map(l)}for(var f in n)c(n[f]);return i&&(s.transform=i,s.arcs=delta(s.arcs)),s}function hashArc(n){var e=n[0],t=n[1],i;return t<e&&(i=e,e=t,t=i),e+31*t}function equalArc(n,e){var t=n[0],i=n[1],s=e[0],r=e[1],o;return i<t&&(o=t,t=i,i=o),r<s&&(o=s,s=r,r=o),t===s&&i===r}const src$1=Object.freeze(Object.defineProperty({__proto__:null,topology},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(src$1);var hasRequiredTurfPolygonDissolve;function requireTurfPolygonDissolve(){if(hasRequiredTurfPolygonDissolve)return turfPolygonDissolve;hasRequiredTurfPolygonDissolve=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(turfPolygonDissolve,"__esModule",{value:!0});var e=n(requireJs$1w()),t=requireJs$1G(),i=requireJs$1D(),s=requireJs$1F(),r=require$$4,o=require$$5;function c(_,l){if(l===void 0&&(l={}),i.getType(_)!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(!_.features.length)throw new Error("geojson is empty");(l.mutate===!1||l.mutate===void 0)&&(_=e.default(_));var d=[];s.flattenEach(_,function(b){d.push(b.geometry)});var f=o.topology({geoms:t.geometryCollection(d).geometry}),g=r.merge(f,f.objects.geoms.geometries);return g}return turfPolygonDissolve.default=c,turfPolygonDissolve}var hasRequiredTurfDissolve;function requireTurfDissolve(){if(hasRequiredTurfDissolve)return turfDissolve;hasRequiredTurfDissolve=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(turfDissolve,"__esModule",{value:!0});var e=n(requireJs$1w()),t=requireJs$1G(),i=requireJs$1D(),s=requireJs$1F(),r=n(requireTurfLineDissolve()),o=n(requireTurfPolygonDissolve());function c(l,d){if(d===void 0&&(d={}),d=d||{},!t.isObject(d))throw new Error("options is invalid");var f=d.mutate;if(i.getType(l)!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(!l.features.length)throw new Error("geojson is empty");(f===!1||f===void 0)&&(l=e.default(l));var g=_(l);if(!g)throw new Error("geojson must be homogenous");var b=l;switch(g){case"LineString":return r.default(b,d);case"Polygon":return o.default(b,d);default:throw new Error(g+" is not supported")}}function _(l){var d={};s.flattenEach(l,function(g){d[g.geometry.type]=!0});var f=Object.keys(d);return f.length===1?f[0]:null}return turfDissolve.default=c,turfDissolve}var hasRequiredJs$1v;function requireJs$1v(){if(hasRequiredJs$1v)return js$1x;hasRequiredJs$1v=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(js$1x,"__esModule",{value:!0});var e=n(requireJs$1y()),t=requireJs$1G(),i=requireJs$1F(),s=n(requireJs$1x()),r=n(requireTurfDissolve());function o(_,l){l===void 0&&(l={});var d=l.maxEdge||1/0,f=c(_),g=s.default(f);if(g.features=g.features.filter(function(C){var P=C.geometry.coordinates[0][0],S=C.geometry.coordinates[0][1],L=C.geometry.coordinates[0][2],E=e.default(P,S,l),M=e.default(S,L,l),D=e.default(P,L,l);return E<=d&&M<=d&&D<=d}),g.features.length<1)return null;var b=r.default(g);return b.coordinates.length===1&&(b.coordinates=b.coordinates[0],b.type="Polygon"),t.feature(b)}function c(_){var l=[],d={};return i.featureEach(_,function(f){if(f.geometry){var g=f.geometry.coordinates.join("-");Object.prototype.hasOwnProperty.call(d,g)||(l.push(f),d[g]=!0)}}),t.featureCollection(l)}return js$1x.default=o,js$1x}var js$1t={},rbushExports={},rbush={get exports(){return rbushExports},set exports(n){rbushExports=n}},quickselectExports={},quickselect={get exports(){return quickselectExports},set exports(n){quickselectExports=n}},hasRequiredQuickselect;function requireQuickselect(){return hasRequiredQuickselect||(hasRequiredQuickselect=1,function(n,e){(function(t,i){n.exports=i()})(commonjsGlobal,function(){function t(o,c,_,l,d){i(o,c,_||0,l||o.length-1,d||r)}function i(o,c,_,l,d){for(;l>_;){if(l-_>600){var f=l-_+1,g=c-_+1,b=Math.log(f),C=.5*Math.exp(2*b/3),P=.5*Math.sqrt(b*C*(f-C)/f)*(g-f/2<0?-1:1),S=Math.max(_,Math.floor(c-g*C/f+P)),L=Math.min(l,Math.floor(c+(f-g)*C/f+P));i(o,c,S,L,d)}var E=o[c],M=_,D=l;for(s(o,_,c),d(o[l],E)>0&&s(o,_,l);M<D;){for(s(o,M,D),M++,D--;d(o[M],E)<0;)M++;for(;d(o[D],E)>0;)D--}d(o[_],E)===0?s(o,_,D):(D++,s(o,D,l)),D<=c&&(_=D+1),c<=D&&(l=D-1)}}function s(o,c,_){var l=o[c];o[c]=o[_],o[_]=l}function r(o,c){return o<c?-1:o>c?1:0}return t})}(quickselect)),quickselectExports}var hasRequiredRbush;function requireRbush(){if(hasRequiredRbush)return rbushExports;hasRequiredRbush=1,rbush.exports=e,rbushExports.default=e;var n=requireQuickselect();function e(S,L){if(!(this instanceof e))return new e(S,L);this._maxEntries=Math.max(4,S||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),L&&this._initFormat(L),this.clear()}e.prototype={all:function(){return this._all(this.data,[])},search:function(S){var L=this.data,E=[],M=this.toBBox;if(!b(S,L))return E;for(var D=[],R,k,N,$;L;){for(R=0,k=L.children.length;R<k;R++)N=L.children[R],$=L.leaf?M(N):N,b(S,$)&&(L.leaf?E.push(N):g(S,$)?this._all(N,E):D.push(N));L=D.pop()}return E},collides:function(S){var L=this.data,E=this.toBBox;if(!b(S,L))return!1;for(var M=[],D,R,k,N;L;){for(D=0,R=L.children.length;D<R;D++)if(k=L.children[D],N=L.leaf?E(k):k,b(S,N)){if(L.leaf||g(S,N))return!0;M.push(k)}L=M.pop()}return!1},load:function(S){if(!(S&&S.length))return this;if(S.length<this._minEntries){for(var L=0,E=S.length;L<E;L++)this.insert(S[L]);return this}var M=this._build(S.slice(),0,S.length-1,0);if(!this.data.children.length)this.data=M;else if(this.data.height===M.height)this._splitRoot(this.data,M);else{if(this.data.height<M.height){var D=this.data;this.data=M,M=D}this._insert(M,this.data.height-M.height-1,!0)}return this},insert:function(S){return S&&this._insert(S,this.data.height-1),this},clear:function(){return this.data=C([]),this},remove:function(S,L){if(!S)return this;for(var E=this.data,M=this.toBBox(S),D=[],R=[],k,N,$,B;E||D.length;){if(E||(E=D.pop(),N=D[D.length-1],k=R.pop(),B=!0),E.leaf&&($=t(S,E.children,L),$!==-1))return E.children.splice($,1),D.push(E),this._condense(D),this;!B&&!E.leaf&&g(E,M)?(D.push(E),R.push(k),k=0,N=E,E=E.children[0]):N?(k++,E=N.children[k],B=!1):E=null}return this},toBBox:function(S){return S},compareMinX:o,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(S){return this.data=S,this},_all:function(S,L){for(var E=[];S;)S.leaf?L.push.apply(L,S.children):E.push.apply(E,S.children),S=E.pop();return L},_build:function(S,L,E,M){var D=E-L+1,R=this._maxEntries,k;if(D<=R)return k=C(S.slice(L,E+1)),i(k,this.toBBox),k;M||(M=Math.ceil(Math.log(D)/Math.log(R)),R=Math.ceil(D/Math.pow(R,M-1))),k=C([]),k.leaf=!1,k.height=M;var N=Math.ceil(D/R),$=N*Math.ceil(Math.sqrt(R)),B,F,z,Y;for(P(S,L,E,$,this.compareMinX),B=L;B<=E;B+=$)for(z=Math.min(B+$-1,E),P(S,B,z,N,this.compareMinY),F=B;F<=z;F+=N)Y=Math.min(F+N-1,z),k.children.push(this._build(S,F,Y,M-1));return i(k,this.toBBox),k},_chooseSubtree:function(S,L,E,M){for(var D,R,k,N,$,B,F,z;M.push(L),!(L.leaf||M.length-1===E);){for(F=z=1/0,D=0,R=L.children.length;D<R;D++)k=L.children[D],$=_(k),B=d(S,k)-$,B<z?(z=B,F=$<F?$:F,N=k):B===z&&$<F&&(F=$,N=k);L=N||L.children[0]}return L},_insert:function(S,L,E){var M=this.toBBox,D=E?S:M(S),R=[],k=this._chooseSubtree(D,this.data,L,R);for(k.children.push(S),r(k,D);L>=0&&R[L].children.length>this._maxEntries;)this._split(R,L),L--;this._adjustParentBBoxes(D,R,L)},_split:function(S,L){var E=S[L],M=E.children.length,D=this._minEntries;this._chooseSplitAxis(E,D,M);var R=this._chooseSplitIndex(E,D,M),k=C(E.children.splice(R,E.children.length-R));k.height=E.height,k.leaf=E.leaf,i(E,this.toBBox),i(k,this.toBBox),L?S[L-1].children.push(k):this._splitRoot(E,k)},_splitRoot:function(S,L){this.data=C([S,L]),this.data.height=S.height+1,this.data.leaf=!1,i(this.data,this.toBBox)},_chooseSplitIndex:function(S,L,E){var M,D,R,k,N,$,B,F;for($=B=1/0,M=L;M<=E-L;M++)D=s(S,0,M,this.toBBox),R=s(S,M,E,this.toBBox),k=f(D,R),N=_(D)+_(R),k<$?($=k,F=M,B=N<B?N:B):k===$&&N<B&&(B=N,F=M);return F},_chooseSplitAxis:function(S,L,E){var M=S.leaf?this.compareMinX:o,D=S.leaf?this.compareMinY:c,R=this._allDistMargin(S,L,E,M),k=this._allDistMargin(S,L,E,D);R<k&&S.children.sort(M)},_allDistMargin:function(S,L,E,M){S.children.sort(M);var D=this.toBBox,R=s(S,0,L,D),k=s(S,E-L,E,D),N=l(R)+l(k),$,B;for($=L;$<E-L;$++)B=S.children[$],r(R,S.leaf?D(B):B),N+=l(R);for($=E-L-1;$>=L;$--)B=S.children[$],r(k,S.leaf?D(B):B),N+=l(k);return N},_adjustParentBBoxes:function(S,L,E){for(var M=E;M>=0;M--)r(L[M],S)},_condense:function(S){for(var L=S.length-1,E;L>=0;L--)S[L].children.length===0?L>0?(E=S[L-1].children,E.splice(E.indexOf(S[L]),1)):this.clear():i(S[L],this.toBBox)},_initFormat:function(S){var L=["return a"," - b",";"];this.compareMinX=new Function("a","b",L.join(S[0])),this.compareMinY=new Function("a","b",L.join(S[1])),this.toBBox=new Function("a","return {minX: a"+S[0]+", minY: a"+S[1]+", maxX: a"+S[2]+", maxY: a"+S[3]+"};")}};function t(S,L,E){if(!E)return L.indexOf(S);for(var M=0;M<L.length;M++)if(E(S,L[M]))return M;return-1}function i(S,L){s(S,0,S.children.length,L,S)}function s(S,L,E,M,D){D||(D=C(null)),D.minX=1/0,D.minY=1/0,D.maxX=-1/0,D.maxY=-1/0;for(var R=L,k;R<E;R++)k=S.children[R],r(D,S.leaf?M(k):k);return D}function r(S,L){return S.minX=Math.min(S.minX,L.minX),S.minY=Math.min(S.minY,L.minY),S.maxX=Math.max(S.maxX,L.maxX),S.maxY=Math.max(S.maxY,L.maxY),S}function o(S,L){return S.minX-L.minX}function c(S,L){return S.minY-L.minY}function _(S){return(S.maxX-S.minX)*(S.maxY-S.minY)}function l(S){return S.maxX-S.minX+(S.maxY-S.minY)}function d(S,L){return(Math.max(L.maxX,S.maxX)-Math.min(L.minX,S.minX))*(Math.max(L.maxY,S.maxY)-Math.min(L.minY,S.minY))}function f(S,L){var E=Math.max(S.minX,L.minX),M=Math.max(S.minY,L.minY),D=Math.min(S.maxX,L.maxX),R=Math.min(S.maxY,L.maxY);return Math.max(0,D-E)*Math.max(0,R-M)}function g(S,L){return S.minX<=L.minX&&S.minY<=L.minY&&L.maxX<=S.maxX&&L.maxY<=S.maxY}function b(S,L){return L.minX<=S.maxX&&L.minY<=S.maxY&&L.maxX>=S.minX&&L.maxY>=S.minY}function C(S){return{children:S,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function P(S,L,E,M,D){for(var R=[L,E],k;R.length;)E=R.pop(),L=R.pop(),!(E-L<=M)&&(k=L+Math.ceil((E-L)/M/2)*M,n(S,k,L,E,D),R.push(L,k,k,E))}return rbushExports}var hasRequiredJs$1u;function requireJs$1u(){if(hasRequiredJs$1u)return js$1t;hasRequiredJs$1u=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(js$1t,"__esModule",{value:!0});var e=n(requireJs$1E()),t=n(requireJs$1A()),i=n(requireRbush());function s(r,o,c,_){var l=i.default(6),d=o.features.map(function(f){var g;return{minX:f.geometry.coordinates[0],minY:f.geometry.coordinates[1],maxX:f.geometry.coordinates[0],maxY:f.geometry.coordinates[1],property:(g=f.properties)===null||g===void 0?void 0:g[c]}});return l.load(d),r.features.forEach(function(f){f.properties||(f.properties={});var g=e.default(f),b=l.search({minX:g[0],minY:g[1],maxX:g[2],maxY:g[3]}),C=[];b.forEach(function(P){t.default([P.minX,P.minY],f)&&C.push(P.property)}),f.properties[_]=C}),r}return js$1t.default=s,js$1t}var jsExports$z={},js$1s={get exports(){return jsExports$z},set exports(n){jsExports$z=n}},hasRequiredJs$1t;function requireJs$1t(){if(hasRequiredJs$1t)return jsExports$z;hasRequiredJs$1t=1;var n=requireJs$1F(),e=requireJs$1G(),t=requireJs$1w();function i(o){return o&&typeof o=="object"&&"default"in o?o:{default:o}}var s=i(t);function r(o,c){if(c=c||{},!e.isObject(c))throw new Error("options is invalid");var _=c.mutate;if(!o)throw new Error("geojson is required");return(_===!1||_===void 0)&&(o=s.default(o)),n.coordEach(o,function(l){var d=l[0],f=l[1];l[0]=f,l[1]=d}),o}return js$1s.exports=r,jsExports$z.default=r,jsExports$z}var jsExports$y={},js$1r={get exports(){return jsExports$y},set exports(n){jsExports$y=n}},js$1q={},hasRequiredJs$1s;function requireJs$1s(){if(hasRequiredJs$1s)return js$1q;hasRequiredJs$1s=1,Object.defineProperty(js$1q,"__esModule",{value:!0});var n=requireJs$1G(),e=requireJs$1D();function t(o,c){c===void 0&&(c={});var _=typeof c=="object"?c.mutate:c;if(!o)throw new Error("geojson is required");var l=e.getType(o),d=[];switch(l){case"LineString":d=i(o);break;case"MultiLineString":case"Polygon":e.getCoords(o).forEach(function(g){d.push(i(g))});break;case"MultiPolygon":e.getCoords(o).forEach(function(g){var b=[];g.forEach(function(C){b.push(i(C))}),d.push(b)});break;case"Point":return o;case"MultiPoint":var f={};e.getCoords(o).forEach(function(g){var b=g.join("-");Object.prototype.hasOwnProperty.call(f,b)||(d.push(g),f[b]=!0)});break;default:throw new Error(l+" geometry not supported")}return o.coordinates?_===!0?(o.coordinates=d,o):{type:l,coordinates:d}:_===!0?(o.geometry.coordinates=d,o):n.feature({type:l,coordinates:d},o.properties,{bbox:o.bbox,id:o.id})}function i(o){var c=e.getCoords(o);if(c.length===2&&!s(c[0],c[1]))return c;var _=[],l=c.length-1,d=_.length;_.push(c[0]);for(var f=1;f<l;f++){var g=_[_.length-1];c[f][0]===g[0]&&c[f][1]===g[1]||(_.push(c[f]),d=_.length,d>2&&r(_[d-3],_[d-1],_[d-2])&&_.splice(_.length-2,1))}if(_.push(c[c.length-1]),d=_.length,s(c[0],c[c.length-1])&&d<4)throw new Error("invalid polygon");return r(_[d-3],_[d-1],_[d-2])&&_.splice(_.length-2,1),_}function s(o,c){return o[0]===c[0]&&o[1]===c[1]}function r(o,c,_){var l=_[0],d=_[1],f=o[0],g=o[1],b=c[0],C=c[1],P=l-f,S=d-g,L=b-f,E=C-g,M=P*E-S*L;return M!==0?!1:Math.abs(L)>=Math.abs(E)?L>0?f<=l&&l<=b:b<=l&&l<=f:E>0?g<=d&&d<=C:C<=d&&d<=g}return js$1q.default=t,js$1q}var hasRequiredJs$1r;function requireJs$1r(){if(hasRequiredJs$1r)return jsExports$y;hasRequiredJs$1r=1;var n=requireJs$1s(),e=requireJs$1w(),t=requireJs$1F(),i=requireJs$1G();function s(E){return E&&typeof E=="object"&&"default"in E?E:{default:E}}var r=s(n),o=s(e);function c(E,M){var D=E.x-M.x,R=E.y-M.y;return D*D+R*R}function _(E,M,D){var R=M.x,k=M.y,N=D.x-R,$=D.y-k;if(N!==0||$!==0){var B=((E.x-R)*N+(E.y-k)*$)/(N*N+$*$);B>1?(R=D.x,k=D.y):B>0&&(R+=N*B,k+=$*B)}return N=E.x-R,$=E.y-k,N*N+$*$}function l(E,M){for(var D=E[0],R=[D],k,N=1,$=E.length;N<$;N++)k=E[N],c(k,D)>M&&(R.push(k),D=k);return D!==k&&R.push(k),R}function d(E,M,D,R,k){for(var N=R,$,B=M+1;B<D;B++){var F=_(E[B],E[M],E[D]);F>N&&($=B,N=F)}N>R&&($-M>1&&d(E,M,$,R,k),k.push(E[$]),D-$>1&&d(E,$,D,R,k))}function f(E,M){var D=E.length-1,R=[E[0]];return d(E,0,D,M,R),R.push(E[D]),R}function g(E,M,D){if(E.length<=2)return E;var R=M!==void 0?M*M:1;return E=D?E:l(E,R),E=f(E,R),E}function b(E,M){if(M=M||{},!i.isObject(M))throw new Error("options is invalid");var D=M.tolerance!==void 0?M.tolerance:1,R=M.highQuality||!1,k=M.mutate||!1;if(!E)throw new Error("geojson is required");if(D&&D<0)throw new Error("invalid tolerance");return k!==!0&&(E=o.default(E)),t.geomEach(E,function(N){C(N,D,R)}),E}function C(E,M,D){var R=E.type;if(R==="Point"||R==="MultiPoint")return E;r.default(E,!0);var k=E.coordinates;switch(R){case"LineString":E.coordinates=P(k,M,D);break;case"MultiLineString":E.coordinates=k.map(function(N){return P(N,M,D)});break;case"Polygon":E.coordinates=S(k,M,D);break;case"MultiPolygon":E.coordinates=k.map(function(N){return S(N,M,D)})}return E}function P(E,M,D){return g(E.map(function(R){return{x:R[0],y:R[1],z:R[2]}}),M,D).map(function(R){return R.z?[R.x,R.y,R.z]:[R.x,R.y]})}function S(E,M,D){return E.map(function(R){var k=R.map(function($){return{x:$[0],y:$[1]}});if(k.length<4)throw new Error("invalid polygon");for(var N=g(k,M,D).map(function($){return[$.x,$.y]});!L(N);)M-=M*.01,N=g(k,M,D).map(function($){return[$.x,$.y]});return(N[N.length-1][0]!==N[0][0]||N[N.length-1][1]!==N[0][1])&&N.push(N[0]),N})}function L(E){return E.length<3?!1:!(E.length===3&&E[2][0]===E[0][0]&&E[2][1]===E[0][1])}return js$1r.exports=b,jsExports$y.default=b,jsExports$y}var js$1p={},spline={},hasRequiredSpline;function requireSpline(){if(hasRequiredSpline)return spline;hasRequiredSpline=1,Object.defineProperty(spline,"__esModule",{value:!0});var n=function(){function i(s){this.points=s.points||[],this.duration=s.duration||1e4,this.sharpness=s.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=s.stepLength||60,this.length=this.points.length,this.delay=0;for(var r=0;r<this.length;r++)this.points[r].z=this.points[r].z||0;for(var r=0;r<this.length-1;r++){var o=this.points[r],c=this.points[r+1];this.centers.push({x:(o.x+c.x)/2,y:(o.y+c.y)/2,z:(o.z+c.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(var r=0;r<this.centers.length-1;r++){var _=this.points[r+1].x-(this.centers[r].x+this.centers[r+1].x)/2,l=this.points[r+1].y-(this.centers[r].y+this.centers[r+1].y)/2,d=this.points[r+1].z-(this.centers[r].y+this.centers[r+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[r+1].x+this.sharpness*(this.centers[r].x+_),y:(1-this.sharpness)*this.points[r+1].y+this.sharpness*(this.centers[r].y+l),z:(1-this.sharpness)*this.points[r+1].z+this.sharpness*(this.centers[r].z+d)},{x:(1-this.sharpness)*this.points[r+1].x+this.sharpness*(this.centers[r+1].x+_),y:(1-this.sharpness)*this.points[r+1].y+this.sharpness*(this.centers[r+1].y+l),z:(1-this.sharpness)*this.points[r+1].z+this.sharpness*(this.centers[r+1].z+d)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}return i.prototype.cacheSteps=function(s){var r=[],o=this.pos(0);r.push(0);for(var c=0;c<this.duration;c+=10){var _=this.pos(c),l=Math.sqrt((_.x-o.x)*(_.x-o.x)+(_.y-o.y)*(_.y-o.y)+(_.z-o.z)*(_.z-o.z));l>s&&(r.push(c),o=_)}return r},i.prototype.vector=function(s){var r=this.pos(s+10),o=this.pos(s-10);return{angle:180*Math.atan2(r.y-o.y,r.x-o.x)/3.14,speed:Math.sqrt((o.x-r.x)*(o.x-r.x)+(o.y-r.y)*(o.y-r.y)+(o.z-r.z)*(o.z-r.z))}},i.prototype.pos=function(s){var r=s-this.delay;r<0&&(r=0),r>this.duration&&(r=this.duration-1);var o=r/this.duration;if(o>=1)return this.points[this.length-1];var c=Math.floor((this.points.length-1)*o),_=(this.length-1)*o-c;return e(_,this.points[c],this.controls[c][1],this.controls[c+1][0],this.points[c+1])},i}();spline.default=n;function e(i,s,r,o,c){var _=t(i),l={x:c.x*_[0]+o.x*_[1]+r.x*_[2]+s.x*_[3],y:c.y*_[0]+o.y*_[1]+r.y*_[2]+s.y*_[3],z:c.z*_[0]+o.z*_[1]+r.z*_[2]+s.z*_[3]};return l}function t(i){var s=i*i,r=s*i;return[r,3*s*(1-i),3*i*(1-i)*(1-i),(1-i)*(1-i)*(1-i)]}return spline}var hasRequiredJs$1q;function requireJs$1q(){if(hasRequiredJs$1q)return js$1p;hasRequiredJs$1q=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(js$1p,"__esModule",{value:!0});var e=requireJs$1G(),t=requireJs$1D(),i=n(requireSpline());function s(r,o){o===void 0&&(o={});for(var c=o.resolution||1e4,_=o.sharpness||.85,l=[],d=t.getGeom(r).coordinates.map(function(C){return{x:C[0],y:C[1]}}),f=new i.default({duration:c,points:d,sharpness:_}),g=function(C){var P=f.pos(C);Math.floor(C/100)%2===0&&l.push([P.x,P.y])},b=0;b<f.duration;b+=10)g(b);return g(f.duration),e.lineString(l,o.properties)}return js$1p.default=s,js$1p}var jsExports$x={},js$1o={get exports(){return jsExports$x},set exports(n){jsExports$x=n}},hasRequiredJs$1p;function requireJs$1p(){if(hasRequiredJs$1p)return jsExports$x;hasRequiredJs$1p=1;var n=requireJs$1A(),e=requireJs$1w(),t=requireJs$1F();function i(c){return c&&typeof c=="object"&&"default"in c?c:{default:c}}var s=i(n),r=i(e);function o(c,_,l,d){return c=r.default(c),_=r.default(_),t.featureEach(c,function(f){f.properties||(f.properties={}),t.featureEach(_,function(g){f.properties[d]===void 0&&s.default(f,g)&&(f.properties[d]=g.properties[l])})}),c}return js$1o.exports=o,jsExports$x.default=o,jsExports$x}var jsExports$w={},js$1n={get exports(){return jsExports$w},set exports(n){jsExports$w=n}},hasRequiredJs$1o;function requireJs$1o(){if(hasRequiredJs$1o)return jsExports$w;hasRequiredJs$1o=1;var n=requireJs$1G();function e(i,s){if(!i)throw new Error("featurecollection is required");if(s==null)throw new Error("num is required");if(typeof s!="number")throw new Error("num must be a number");var r=n.featureCollection(t(i.features,s));return r}function t(i,s){for(var r=i.slice(0),o=i.length,c=o-s,_,l;o-- >c;)l=Math.floor((o+1)*Math.random()),_=r[l],r[l]=r[o],r[o]=_;return r.slice(c)}return js$1n.exports=e,jsExports$w.default=e,jsExports$w}var jsExports$v={},js$1m={get exports(){return jsExports$v},set exports(n){jsExports$v=n}},js$1l={},hasRequiredJs$1n;function requireJs$1n(){if(hasRequiredJs$1n)return js$1l;hasRequiredJs$1n=1,Object.defineProperty(js$1l,"__esModule",{value:!0});var n=requireJs$1G();function e(t,i){i===void 0&&(i={});var s=Number(t[0]),r=Number(t[1]),o=Number(t[2]),c=Number(t[3]);if(t.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var _=[s,r],l=[s,c],d=[o,c],f=[o,r];return n.polygon([[_,f,d,l,_]],i.properties,{bbox:t,id:i.id})}return js$1l.default=e,js$1l}var hasRequiredJs$1m;function requireJs$1m(){if(hasRequiredJs$1m)return jsExports$v;hasRequiredJs$1m=1;var n=requireJs$1E(),e=requireJs$1n();function t(o){return o&&typeof o=="object"&&"default"in o?o:{default:o}}var i=t(n),s=t(e);function r(o){return s.default(i.default(o))}return js$1m.exports=r,jsExports$v.default=r,jsExports$v}var jsExports$u={},js$1k={get exports(){return jsExports$u},set exports(n){jsExports$u=n}},hasRequiredJs$1l;function requireJs$1l(){if(hasRequiredJs$1l)return jsExports$u;hasRequiredJs$1l=1;var n=requireJs$1y();function e(s){return s&&typeof s=="object"&&"default"in s?s:{default:s}}var t=e(n);function i(s){var r=s[0],o=s[1],c=s[2],_=s[3],l=t.default(s.slice(0,2),[c,o]),d=t.default(s.slice(0,2),[r,_]);if(l>=d){var f=(o+_)/2;return[r,f-(c-r)/2,c,f+(c-r)/2]}else{var g=(r+c)/2;return[g-(_-o)/2,o,g+(_-o)/2,_]}}return js$1k.exports=i,jsExports$u.default=i,jsExports$u}var js$1j={},js$1i={},hasRequiredJs$1k;function requireJs$1k(){if(hasRequiredJs$1k)return js$1i;hasRequiredJs$1k=1,Object.defineProperty(js$1i,"__esModule",{value:!0});var n=requireJs$1G(),e=requireJs$1D();function t(i,s,r,o){o===void 0&&(o={});var c=e.getCoord(i),_=n.degreesToRadians(c[0]),l=n.degreesToRadians(c[1]),d=n.degreesToRadians(r),f=n.lengthToRadians(s,o.units),g=Math.asin(Math.sin(l)*Math.cos(f)+Math.cos(l)*Math.sin(f)*Math.cos(d)),b=_+Math.atan2(Math.sin(d)*Math.sin(f)*Math.cos(l),Math.cos(f)-Math.sin(l)*Math.sin(g)),C=n.radiansToDegrees(b),P=n.radiansToDegrees(g);return n.point([C,P],o.properties)}return js$1i.default=t,js$1i}var hasRequiredJs$1j;function requireJs$1j(){if(hasRequiredJs$1j)return js$1j;hasRequiredJs$1j=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(js$1j,"__esModule",{value:!0});var e=n(requireJs$1k()),t=requireJs$1G();function i(s,r,o){o===void 0&&(o={});for(var c=o.steps||64,_=o.properties?o.properties:!Array.isArray(s)&&s.type==="Feature"&&s.properties?s.properties:{},l=[],d=0;d<c;d++)l.push(e.default(s,r,d*-360/c,o).geometry.coordinates);return l.push(l[0]),t.polygon([l],_)}return js$1j.default=i,js$1j}var jsExports$t={},js$1h={get exports(){return jsExports$t},set exports(n){jsExports$t=n}},js$1g={},hasRequiredJs$1i;function requireJs$1i(){if(hasRequiredJs$1i)return js$1g;hasRequiredJs$1i=1,Object.defineProperty(js$1g,"__esModule",{value:!0});var n=requireJs$1G(),e=requireJs$1D();function t(s,r,o){if(o===void 0&&(o={}),o.final===!0)return i(s,r);var c=e.getCoord(s),_=e.getCoord(r),l=n.degreesToRadians(c[0]),d=n.degreesToRadians(_[0]),f=n.degreesToRadians(c[1]),g=n.degreesToRadians(_[1]),b=Math.sin(d-l)*Math.cos(g),C=Math.cos(f)*Math.sin(g)-Math.sin(f)*Math.cos(g)*Math.cos(d-l);return n.radiansToDegrees(Math.atan2(b,C))}js$1g.default=t;function i(s,r){var o=t(r,s);return o=(o+180)%360,o}return js$1g}var hasRequiredJs$1h;function requireJs$1h(){if(hasRequiredJs$1h)return jsExports$t;hasRequiredJs$1h=1;var n=requireJs$1i(),e=requireJs$1k(),t=requireJs$1y();function i(_){return _&&typeof _=="object"&&"default"in _?_:{default:_}}var s=i(n),r=i(e),o=i(t);function c(_,l){var d=o.default(_,l),f=s.default(_,l),g=r.default(_,d/2,f);return g}return js$1h.exports=c,jsExports$t.default=c,jsExports$t}var js$1f={},hasRequiredJs$1g;function requireJs$1g(){if(hasRequiredJs$1g)return js$1f;hasRequiredJs$1g=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(js$1f,"__esModule",{value:!0});var e=n(requireJs$1E()),t=requireJs$1G();function i(s,r){r===void 0&&(r={});var o=e.default(s),c=(o[0]+o[2])/2,_=(o[1]+o[3])/2;return t.point([c,_],r.properties,r)}return js$1f.default=i,js$1f}var js$1e={},js$1d={},hasRequiredJs$1f;function requireJs$1f(){if(hasRequiredJs$1f)return js$1d;hasRequiredJs$1f=1,Object.defineProperty(js$1d,"__esModule",{value:!0});var n=requireJs$1F(),e=requireJs$1G();function t(i,s){s===void 0&&(s={});var r=0,o=0,c=0;return n.coordEach(i,function(_){r+=_[0],o+=_[1],c++},!0),e.point([r/c,o/c],s.properties)}return js$1d.default=t,js$1d}var hasRequiredJs$1e;function requireJs$1e(){if(hasRequiredJs$1e)return js$1e;hasRequiredJs$1e=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(js$1e,"__esModule",{value:!0});var e=n(requireJs$1B()),t=n(requireJs$1f()),i=requireJs$1G(),s=requireJs$1D(),r=requireJs$1F();function o(c,_){switch(_===void 0&&(_={}),s.getType(c)){case"Point":return i.point(s.getCoord(c),_.properties);case"Polygon":var l=[];r.coordEach(c,function(z){l.push(z)});var d=t.default(c,{properties:_.properties}),f=d.geometry.coordinates,g=0,b=0,C=0,P,S,L,E,M,D,R,k,N=l.map(function(z){return[z[0]-f[0],z[1]-f[1]]});for(P=0;P<l.length-1;P++)S=N[P],E=S[0],D=S[1],L=N[P+1],M=L[0],R=L[1],k=E*R-M*D,C+=k,g+=(E+M)*k,b+=(D+R)*k;if(C===0)return d;var $=C*.5,B=1/(6*$);return i.point([f[0]+B*g,f[1]+B*b],_.properties);default:var F=e.default(c);return F?o(F,{properties:_.properties}):t.default(c,{properties:_.properties})}}return js$1e.default=o,js$1e}var js$1c={},hasRequiredJs$1d;function requireJs$1d(){if(hasRequiredJs$1d)return js$1c;hasRequiredJs$1d=1,Object.defineProperty(js$1c,"__esModule",{value:!0});var n=requireJs$1G(),e=requireJs$1F();function t(i){var s={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return e.featureEach(i,function(r){var o,c,_,l;switch((l=r.geometry)===null||l===void 0?void 0:l.type){case"Point":s.MultiPoint.coordinates.push(r.geometry.coordinates),s.MultiPoint.properties.push(r.properties);break;case"MultiPoint":(o=s.MultiPoint.coordinates).push.apply(o,r.geometry.coordinates),s.MultiPoint.properties.push(r.properties);break;case"LineString":s.MultiLineString.coordinates.push(r.geometry.coordinates),s.MultiLineString.properties.push(r.properties);break;case"MultiLineString":(c=s.MultiLineString.coordinates).push.apply(c,r.geometry.coordinates),s.MultiLineString.properties.push(r.properties);break;case"Polygon":s.MultiPolygon.coordinates.push(r.geometry.coordinates),s.MultiPolygon.properties.push(r.properties);break;case"MultiPolygon":(_=s.MultiPolygon.coordinates).push.apply(_,r.geometry.coordinates),s.MultiPolygon.properties.push(r.properties);break}}),n.featureCollection(Object.keys(s).filter(function(r){return s[r].coordinates.length}).sort().map(function(r){var o={type:r,coordinates:s[r].coordinates},c={collectedProperties:s[r].properties};return n.feature(o,c)}))}return js$1c.default=t,js$1c}var jsExports$s={},js$1b={get exports(){return jsExports$s},set exports(n){jsExports$s=n}},hasRequiredJs$1c;function requireJs$1c(){if(hasRequiredJs$1c)return jsExports$s;hasRequiredJs$1c=1;var n=requireJs$1F(),e=requireJs$1G();function t(i){var s=[];return i.type==="FeatureCollection"?n.featureEach(i,function(r){n.coordEach(r,function(o){s.push(e.point(o,r.properties))})}):n.coordEach(i,function(r){s.push(e.point(r,i.properties))}),e.featureCollection(s)}return js$1b.exports=t,jsExports$s.default=t,jsExports$s}var jsExports$r={},js$1a={get exports(){return jsExports$r},set exports(n){jsExports$r=n}},earcutExports={},earcut={get exports(){return earcutExports},set exports(n){earcutExports=n}},hasRequiredEarcut;function requireEarcut(){if(hasRequiredEarcut)return earcutExports;hasRequiredEarcut=1,earcut.exports=n,earcutExports.default=n;function n(j,ie,te){te=te||2;var ce=ie&&ie.length,xe=ce?ie[0]*te:j.length,he=e(j,0,xe,te,!0),Q=[];if(!he||he.next===he.prev)return Q;var fe,Ae,me,Se,Ie,pe,Te;if(ce&&(he=_(j,ie,he,te)),j.length>80*te){fe=me=j[0],Ae=Se=j[1];for(var ye=te;ye<xe;ye+=te)Ie=j[ye],pe=j[ye+1],Ie<fe&&(fe=Ie),pe<Ae&&(Ae=pe),Ie>me&&(me=Ie),pe>Se&&(Se=pe);Te=Math.max(me-fe,Se-Ae),Te=Te!==0?32767/Te:0}return i(he,Q,te,fe,Ae,Te,0),Q}function e(j,ie,te,ce,xe){var he,Q;if(xe===le(j,ie,te,ce)>0)for(he=ie;he<te;he+=ce)Q=Y(he,j[he],j[he+1],Q);else for(he=te-ce;he>=ie;he-=ce)Q=Y(he,j[he],j[he+1],Q);return Q&&D(Q,Q.next)&&(J(Q),Q=Q.next),Q}function t(j,ie){if(!j)return j;ie||(ie=j);var te=j,ce;do if(ce=!1,!te.steiner&&(D(te,te.next)||M(te.prev,te,te.next)===0)){if(J(te),te=ie=te.prev,te===te.next)break;ce=!0}else te=te.next;while(ce||te!==ie);return ie}function i(j,ie,te,ce,xe,he,Q){if(j){!Q&&he&&b(j,ce,xe,he);for(var fe=j,Ae,me;j.prev!==j.next;){if(Ae=j.prev,me=j.next,he?r(j,ce,xe,he):s(j)){ie.push(Ae.i/te|0),ie.push(j.i/te|0),ie.push(me.i/te|0),J(j),j=me.next,fe=me.next;continue}if(j=me,j===fe){Q?Q===1?(j=o(t(j),ie,te),i(j,ie,te,ce,xe,he,2)):Q===2&&c(j,ie,te,ce,xe,he):i(t(j),ie,te,ce,xe,he,1);break}}}}function s(j){var ie=j.prev,te=j,ce=j.next;if(M(ie,te,ce)>=0)return!1;for(var xe=ie.x,he=te.x,Q=ce.x,fe=ie.y,Ae=te.y,me=ce.y,Se=xe<he?xe<Q?xe:Q:he<Q?he:Q,Ie=fe<Ae?fe<me?fe:me:Ae<me?Ae:me,pe=xe>he?xe>Q?xe:Q:he>Q?he:Q,Te=fe>Ae?fe>me?fe:me:Ae>me?Ae:me,ye=ce.next;ye!==ie;){if(ye.x>=Se&&ye.x<=pe&&ye.y>=Ie&&ye.y<=Te&&L(xe,fe,he,Ae,Q,me,ye.x,ye.y)&&M(ye.prev,ye,ye.next)>=0)return!1;ye=ye.next}return!0}function r(j,ie,te,ce){var xe=j.prev,he=j,Q=j.next;if(M(xe,he,Q)>=0)return!1;for(var fe=xe.x,Ae=he.x,me=Q.x,Se=xe.y,Ie=he.y,pe=Q.y,Te=fe<Ae?fe<me?fe:me:Ae<me?Ae:me,ye=Se<Ie?Se<pe?Se:pe:Ie<pe?Ie:pe,ge=fe>Ae?fe>me?fe:me:Ae>me?Ae:me,ae=Se>Ie?Se>pe?Se:pe:Ie>pe?Ie:pe,we=P(Te,ye,ie,te,ce),ke=P(ge,ae,ie,te,ce),Ne=j.prevZ,$e=j.nextZ;Ne&&Ne.z>=we&&$e&&$e.z<=ke;){if(Ne.x>=Te&&Ne.x<=ge&&Ne.y>=ye&&Ne.y<=ae&&Ne!==xe&&Ne!==Q&&L(fe,Se,Ae,Ie,me,pe,Ne.x,Ne.y)&&M(Ne.prev,Ne,Ne.next)>=0||(Ne=Ne.prevZ,$e.x>=Te&&$e.x<=ge&&$e.y>=ye&&$e.y<=ae&&$e!==xe&&$e!==Q&&L(fe,Se,Ae,Ie,me,pe,$e.x,$e.y)&&M($e.prev,$e,$e.next)>=0))return!1;$e=$e.nextZ}for(;Ne&&Ne.z>=we;){if(Ne.x>=Te&&Ne.x<=ge&&Ne.y>=ye&&Ne.y<=ae&&Ne!==xe&&Ne!==Q&&L(fe,Se,Ae,Ie,me,pe,Ne.x,Ne.y)&&M(Ne.prev,Ne,Ne.next)>=0)return!1;Ne=Ne.prevZ}for(;$e&&$e.z<=ke;){if($e.x>=Te&&$e.x<=ge&&$e.y>=ye&&$e.y<=ae&&$e!==xe&&$e!==Q&&L(fe,Se,Ae,Ie,me,pe,$e.x,$e.y)&&M($e.prev,$e,$e.next)>=0)return!1;$e=$e.nextZ}return!0}function o(j,ie,te){var ce=j;do{var xe=ce.prev,he=ce.next.next;!D(xe,he)&&R(xe,ce,ce.next,he)&&B(xe,he)&&B(he,xe)&&(ie.push(xe.i/te|0),ie.push(ce.i/te|0),ie.push(he.i/te|0),J(ce),J(ce.next),ce=j=he),ce=ce.next}while(ce!==j);return t(ce)}function c(j,ie,te,ce,xe,he){var Q=j;do{for(var fe=Q.next.next;fe!==Q.prev;){if(Q.i!==fe.i&&E(Q,fe)){var Ae=z(Q,fe);Q=t(Q,Q.next),Ae=t(Ae,Ae.next),i(Q,ie,te,ce,xe,he,0),i(Ae,ie,te,ce,xe,he,0);return}fe=fe.next}Q=Q.next}while(Q!==j)}function _(j,ie,te,ce){var xe=[],he,Q,fe,Ae,me;for(he=0,Q=ie.length;he<Q;he++)fe=ie[he]*ce,Ae=he<Q-1?ie[he+1]*ce:j.length,me=e(j,fe,Ae,ce,!1),me===me.next&&(me.steiner=!0),xe.push(S(me));for(xe.sort(l),he=0;he<xe.length;he++)te=d(xe[he],te);return te}function l(j,ie){return j.x-ie.x}function d(j,ie){var te=f(j,ie);if(!te)return ie;var ce=z(te,j);return t(ce,ce.next),t(te,te.next)}function f(j,ie){var te=ie,ce=j.x,xe=j.y,he=-1/0,Q;do{if(xe<=te.y&&xe>=te.next.y&&te.next.y!==te.y){var fe=te.x+(xe-te.y)*(te.next.x-te.x)/(te.next.y-te.y);if(fe<=ce&&fe>he&&(he=fe,Q=te.x<te.next.x?te:te.next,fe===ce))return Q}te=te.next}while(te!==ie);if(!Q)return null;var Ae=Q,me=Q.x,Se=Q.y,Ie=1/0,pe;te=Q;do ce>=te.x&&te.x>=me&&ce!==te.x&&L(xe<Se?ce:he,xe,me,Se,xe<Se?he:ce,xe,te.x,te.y)&&(pe=Math.abs(xe-te.y)/(ce-te.x),B(te,j)&&(pe<Ie||pe===Ie&&(te.x>Q.x||te.x===Q.x&&g(Q,te)))&&(Q=te,Ie=pe)),te=te.next;while(te!==Ae);return Q}function g(j,ie){return M(j.prev,j,ie.prev)<0&&M(ie.next,j,j.next)<0}function b(j,ie,te,ce){var xe=j;do xe.z===0&&(xe.z=P(xe.x,xe.y,ie,te,ce)),xe.prevZ=xe.prev,xe.nextZ=xe.next,xe=xe.next;while(xe!==j);xe.prevZ.nextZ=null,xe.prevZ=null,C(xe)}function C(j){var ie,te,ce,xe,he,Q,fe,Ae,me=1;do{for(te=j,j=null,he=null,Q=0;te;){for(Q++,ce=te,fe=0,ie=0;ie<me&&(fe++,ce=ce.nextZ,!!ce);ie++);for(Ae=me;fe>0||Ae>0&&ce;)fe!==0&&(Ae===0||!ce||te.z<=ce.z)?(xe=te,te=te.nextZ,fe--):(xe=ce,ce=ce.nextZ,Ae--),he?he.nextZ=xe:j=xe,xe.prevZ=he,he=xe;te=ce}he.nextZ=null,me*=2}while(Q>1);return j}function P(j,ie,te,ce,xe){return j=(j-te)*xe|0,ie=(ie-ce)*xe|0,j=(j|j<<8)&16711935,j=(j|j<<4)&252645135,j=(j|j<<2)&858993459,j=(j|j<<1)&1431655765,ie=(ie|ie<<8)&16711935,ie=(ie|ie<<4)&252645135,ie=(ie|ie<<2)&858993459,ie=(ie|ie<<1)&1431655765,j|ie<<1}function S(j){var ie=j,te=j;do(ie.x<te.x||ie.x===te.x&&ie.y<te.y)&&(te=ie),ie=ie.next;while(ie!==j);return te}function L(j,ie,te,ce,xe,he,Q,fe){return(xe-Q)*(ie-fe)>=(j-Q)*(he-fe)&&(j-Q)*(ce-fe)>=(te-Q)*(ie-fe)&&(te-Q)*(he-fe)>=(xe-Q)*(ce-fe)}function E(j,ie){return j.next.i!==ie.i&&j.prev.i!==ie.i&&!$(j,ie)&&(B(j,ie)&&B(ie,j)&&F(j,ie)&&(M(j.prev,j,ie.prev)||M(j,ie.prev,ie))||D(j,ie)&&M(j.prev,j,j.next)>0&&M(ie.prev,ie,ie.next)>0)}function M(j,ie,te){return(ie.y-j.y)*(te.x-ie.x)-(ie.x-j.x)*(te.y-ie.y)}function D(j,ie){return j.x===ie.x&&j.y===ie.y}function R(j,ie,te,ce){var xe=N(M(j,ie,te)),he=N(M(j,ie,ce)),Q=N(M(te,ce,j)),fe=N(M(te,ce,ie));return!!(xe!==he&&Q!==fe||xe===0&&k(j,te,ie)||he===0&&k(j,ce,ie)||Q===0&&k(te,j,ce)||fe===0&&k(te,ie,ce))}function k(j,ie,te){return ie.x<=Math.max(j.x,te.x)&&ie.x>=Math.min(j.x,te.x)&&ie.y<=Math.max(j.y,te.y)&&ie.y>=Math.min(j.y,te.y)}function N(j){return j>0?1:j<0?-1:0}function $(j,ie){var te=j;do{if(te.i!==j.i&&te.next.i!==j.i&&te.i!==ie.i&&te.next.i!==ie.i&&R(te,te.next,j,ie))return!0;te=te.next}while(te!==j);return!1}function B(j,ie){return M(j.prev,j,j.next)<0?M(j,ie,j.next)>=0&&M(j,j.prev,ie)>=0:M(j,ie,j.prev)<0||M(j,j.next,ie)<0}function F(j,ie){var te=j,ce=!1,xe=(j.x+ie.x)/2,he=(j.y+ie.y)/2;do te.y>he!=te.next.y>he&&te.next.y!==te.y&&xe<(te.next.x-te.x)*(he-te.y)/(te.next.y-te.y)+te.x&&(ce=!ce),te=te.next;while(te!==j);return ce}function z(j,ie){var te=new q(j.i,j.x,j.y),ce=new q(ie.i,ie.x,ie.y),xe=j.next,he=ie.prev;return j.next=ie,ie.prev=j,te.next=xe,xe.prev=te,ce.next=te,te.prev=ce,he.next=ce,ce.prev=he,ce}function Y(j,ie,te,ce){var xe=new q(j,ie,te);return ce?(xe.next=ce.next,xe.prev=ce,ce.next.prev=xe,ce.next=xe):(xe.prev=xe,xe.next=xe),xe}function J(j){j.next.prev=j.prev,j.prev.next=j.next,j.prevZ&&(j.prevZ.nextZ=j.nextZ),j.nextZ&&(j.nextZ.prevZ=j.prevZ)}function q(j,ie,te){this.i=j,this.x=ie,this.y=te,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}n.deviation=function(j,ie,te,ce){var xe=ie&&ie.length,he=xe?ie[0]*te:j.length,Q=Math.abs(le(j,0,he,te));if(xe)for(var fe=0,Ae=ie.length;fe<Ae;fe++){var me=ie[fe]*te,Se=fe<Ae-1?ie[fe+1]*te:j.length;Q-=Math.abs(le(j,me,Se,te))}var Ie=0;for(fe=0;fe<ce.length;fe+=3){var pe=ce[fe]*te,Te=ce[fe+1]*te,ye=ce[fe+2]*te;Ie+=Math.abs((j[pe]-j[ye])*(j[Te+1]-j[pe+1])-(j[pe]-j[Te])*(j[ye+1]-j[pe+1]))}return Q===0&&Ie===0?0:Math.abs((Ie-Q)/Q)};function le(j,ie,te,ce){for(var xe=0,he=ie,Q=te-ce;he<te;he+=ce)xe+=(j[Q]-j[he])*(j[he+1]+j[Q+1]),Q=he;return xe}return n.flatten=function(j){for(var ie=j[0][0].length,te={vertices:[],holes:[],dimensions:ie},ce=0,xe=0;xe<j.length;xe++){for(var he=0;he<j[xe].length;he++)for(var Q=0;Q<ie;Q++)te.vertices.push(j[xe][he][Q]);xe>0&&(ce+=j[xe-1].length,te.holes.push(ce))}return te},earcutExports}var hasRequiredJs$1b;function requireJs$1b(){if(hasRequiredJs$1b)return jsExports$r;hasRequiredJs$1b=1;var n=requireEarcut(),e=requireJs$1G();function t(c){return c&&typeof c=="object"&&"default"in c?c:{default:c}}var i=t(n);function s(c){if(!c.geometry||c.geometry.type!=="Polygon"&&c.geometry.type!=="MultiPolygon")throw new Error("input must be a Polygon or MultiPolygon");var _={type:"FeatureCollection",features:[]};return c.geometry.type==="Polygon"?_.features=r(c.geometry.coordinates):c.geometry.coordinates.forEach(function(l){_.features=_.features.concat(r(l))}),_}function r(c){var _=o(c),l=2,d=i.default(_.vertices,_.holes,l),f=[],g=[];d.forEach(function(P,S){var L=d[S];g.push([_.vertices[L*l],_.vertices[L*l+1]])});for(var b=0;b<g.length;b+=3){var C=g.slice(b,b+3);C.push(g[b]),f.push(e.polygon([C]))}return f}function o(c){for(var _=c[0][0].length,l={vertices:[],holes:[],dimensions:_},d=0,f=0;f<c.length;f++){for(var g=0;g<c[f].length;g++)for(var b=0;b<_;b++)l.vertices.push(c[f][g][b]);f>0&&(d+=c[f-1].length,l.holes.push(d))}return l}return js$1a.exports=s,jsExports$r.default=s,jsExports$r}var js$19={},hasRequiredJs$1a;function requireJs$1a(){if(hasRequiredJs$1a)return js$19;hasRequiredJs$1a=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(js$19,"__esModule",{value:!0});var e=n(requireJs$1w()),t=n(requireJs$1y()),i=requireJs$1F();function s(r,o){if(!r)throw new Error("targetPoint is required");if(!o)throw new Error("points is required");var c,_=1/0,l=0;return i.featureEach(o,function(d,f){var g=t.default(r,d);g<_&&(l=f,_=g)}),c=e.default(o.features[l]),c.properties.featureIndex=l,c.properties.distanceToPoint=_,c}return js$19.default=s,js$19}var js$18={},js$17={},js$16={},hasRequiredJs$19;function requireJs$19(){if(hasRequiredJs$19)return js$16;hasRequiredJs$19=1,Object.defineProperty(js$16,"__esModule",{value:!0});var n=requireJs$1G(),e=requireJs$1D(),t=requireJs$1F();function i(c){if(!c)throw new Error("geojson is required");var _=[];return t.flattenEach(c,function(l){s(l,_)}),n.featureCollection(_)}function s(c,_){var l=[],d=c.geometry;if(d!==null){switch(d.type){case"Polygon":l=e.getCoords(d);break;case"LineString":l=[e.getCoords(d)]}l.forEach(function(f){var g=r(f,c.properties);g.forEach(function(b){b.id=_.length,_.push(b)})})}}function r(c,_){var l=[];return c.reduce(function(d,f){var g=n.lineString([d,f],_);return g.bbox=o(d,f),l.push(g),f}),l}function o(c,_){var l=c[0],d=c[1],f=_[0],g=_[1],b=l<f?l:f,C=d<g?d:g,P=l>f?l:f,S=d>g?d:g;return[b,C,P,S]}return js$16.default=i,js$16}var geojsonRbushExports={},geojsonRbush={get exports(){return geojsonRbushExports},set exports(n){geojsonRbushExports=n}},rbush_minExports={},rbush_min={get exports(){return rbush_minExports},set exports(n){rbush_minExports=n}},hasRequiredRbush_min;function requireRbush_min(){return hasRequiredRbush_min||(hasRequiredRbush_min=1,function(n,e){(function(t,i){n.exports=i()})(commonjsGlobal,function(){function t(E,M,D,R,k){(function N($,B,F,z,Y){for(;z>F;){if(z-F>600){var J=z-F+1,q=B-F+1,le=Math.log(J),j=.5*Math.exp(2*le/3),ie=.5*Math.sqrt(le*j*(J-j)/J)*(q-J/2<0?-1:1),te=Math.max(F,Math.floor(B-q*j/J+ie)),ce=Math.min(z,Math.floor(B+(J-q)*j/J+ie));N($,B,te,ce,Y)}var xe=$[B],he=F,Q=z;for(i($,F,B),Y($[z],xe)>0&&i($,F,z);he<Q;){for(i($,he,Q),he++,Q--;Y($[he],xe)<0;)he++;for(;Y($[Q],xe)>0;)Q--}Y($[F],xe)===0?i($,F,Q):i($,++Q,z),Q<=B&&(F=Q+1),B<=Q&&(z=Q-1)}})(E,M,D||0,R||E.length-1,k||s)}function i(E,M,D){var R=E[M];E[M]=E[D],E[D]=R}function s(E,M){return E<M?-1:E>M?1:0}var r=function(E){E===void 0&&(E=9),this._maxEntries=Math.max(4,E),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function o(E,M,D){if(!D)return M.indexOf(E);for(var R=0;R<M.length;R++)if(D(E,M[R]))return R;return-1}function c(E,M){_(E,0,E.children.length,M,E)}function _(E,M,D,R,k){k||(k=S(null)),k.minX=1/0,k.minY=1/0,k.maxX=-1/0,k.maxY=-1/0;for(var N=M;N<D;N++){var $=E.children[N];l(k,E.leaf?R($):$)}return k}function l(E,M){return E.minX=Math.min(E.minX,M.minX),E.minY=Math.min(E.minY,M.minY),E.maxX=Math.max(E.maxX,M.maxX),E.maxY=Math.max(E.maxY,M.maxY),E}function d(E,M){return E.minX-M.minX}function f(E,M){return E.minY-M.minY}function g(E){return(E.maxX-E.minX)*(E.maxY-E.minY)}function b(E){return E.maxX-E.minX+(E.maxY-E.minY)}function C(E,M){return E.minX<=M.minX&&E.minY<=M.minY&&M.maxX<=E.maxX&&M.maxY<=E.maxY}function P(E,M){return M.minX<=E.maxX&&M.minY<=E.maxY&&M.maxX>=E.minX&&M.maxY>=E.minY}function S(E){return{children:E,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function L(E,M,D,R,k){for(var N=[M,D];N.length;)if(!((D=N.pop())-(M=N.pop())<=R)){var $=M+Math.ceil((D-M)/R/2)*R;t(E,$,M,D,k),N.push(M,$,$,D)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(E){var M=this.data,D=[];if(!P(E,M))return D;for(var R=this.toBBox,k=[];M;){for(var N=0;N<M.children.length;N++){var $=M.children[N],B=M.leaf?R($):$;P(E,B)&&(M.leaf?D.push($):C(E,B)?this._all($,D):k.push($))}M=k.pop()}return D},r.prototype.collides=function(E){var M=this.data;if(!P(E,M))return!1;for(var D=[];M;){for(var R=0;R<M.children.length;R++){var k=M.children[R],N=M.leaf?this.toBBox(k):k;if(P(E,N)){if(M.leaf||C(E,N))return!0;D.push(k)}}M=D.pop()}return!1},r.prototype.load=function(E){if(!E||!E.length)return this;if(E.length<this._minEntries){for(var M=0;M<E.length;M++)this.insert(E[M]);return this}var D=this._build(E.slice(),0,E.length-1,0);if(this.data.children.length)if(this.data.height===D.height)this._splitRoot(this.data,D);else{if(this.data.height<D.height){var R=this.data;this.data=D,D=R}this._insert(D,this.data.height-D.height-1,!0)}else this.data=D;return this},r.prototype.insert=function(E){return E&&this._insert(E,this.data.height-1),this},r.prototype.clear=function(){return this.data=S([]),this},r.prototype.remove=function(E,M){if(!E)return this;for(var D,R,k,N=this.data,$=this.toBBox(E),B=[],F=[];N||B.length;){if(N||(N=B.pop(),R=B[B.length-1],D=F.pop(),k=!0),N.leaf){var z=o(E,N.children,M);if(z!==-1)return N.children.splice(z,1),B.push(N),this._condense(B),this}k||N.leaf||!C(N,$)?R?(D++,N=R.children[D],k=!1):N=null:(B.push(N),F.push(D),D=0,R=N,N=N.children[0])}return this},r.prototype.toBBox=function(E){return E},r.prototype.compareMinX=function(E,M){return E.minX-M.minX},r.prototype.compareMinY=function(E,M){return E.minY-M.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(E){return this.data=E,this},r.prototype._all=function(E,M){for(var D=[];E;)E.leaf?M.push.apply(M,E.children):D.push.apply(D,E.children),E=D.pop();return M},r.prototype._build=function(E,M,D,R){var k,N=D-M+1,$=this._maxEntries;if(N<=$)return c(k=S(E.slice(M,D+1)),this.toBBox),k;R||(R=Math.ceil(Math.log(N)/Math.log($)),$=Math.ceil(N/Math.pow($,R-1))),(k=S([])).leaf=!1,k.height=R;var B=Math.ceil(N/$),F=B*Math.ceil(Math.sqrt($));L(E,M,D,F,this.compareMinX);for(var z=M;z<=D;z+=F){var Y=Math.min(z+F-1,D);L(E,z,Y,B,this.compareMinY);for(var J=z;J<=Y;J+=B){var q=Math.min(J+B-1,Y);k.children.push(this._build(E,J,q,R-1))}}return c(k,this.toBBox),k},r.prototype._chooseSubtree=function(E,M,D,R){for(;R.push(M),!M.leaf&&R.length-1!==D;){for(var k=1/0,N=1/0,$=void 0,B=0;B<M.children.length;B++){var F=M.children[B],z=g(F),Y=(J=E,q=F,(Math.max(q.maxX,J.maxX)-Math.min(q.minX,J.minX))*(Math.max(q.maxY,J.maxY)-Math.min(q.minY,J.minY))-z);Y<N?(N=Y,k=z<k?z:k,$=F):Y===N&&z<k&&(k=z,$=F)}M=$||M.children[0]}var J,q;return M},r.prototype._insert=function(E,M,D){var R=D?E:this.toBBox(E),k=[],N=this._chooseSubtree(R,this.data,M,k);for(N.children.push(E),l(N,R);M>=0&&k[M].children.length>this._maxEntries;)this._split(k,M),M--;this._adjustParentBBoxes(R,k,M)},r.prototype._split=function(E,M){var D=E[M],R=D.children.length,k=this._minEntries;this._chooseSplitAxis(D,k,R);var N=this._chooseSplitIndex(D,k,R),$=S(D.children.splice(N,D.children.length-N));$.height=D.height,$.leaf=D.leaf,c(D,this.toBBox),c($,this.toBBox),M?E[M-1].children.push($):this._splitRoot(D,$)},r.prototype._splitRoot=function(E,M){this.data=S([E,M]),this.data.height=E.height+1,this.data.leaf=!1,c(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(E,M,D){for(var R,k,N,$,B,F,z,Y=1/0,J=1/0,q=M;q<=D-M;q++){var le=_(E,0,q,this.toBBox),j=_(E,q,D,this.toBBox),ie=(k=le,N=j,$=void 0,B=void 0,F=void 0,z=void 0,$=Math.max(k.minX,N.minX),B=Math.max(k.minY,N.minY),F=Math.min(k.maxX,N.maxX),z=Math.min(k.maxY,N.maxY),Math.max(0,F-$)*Math.max(0,z-B)),te=g(le)+g(j);ie<Y?(Y=ie,R=q,J=te<J?te:J):ie===Y&&te<J&&(J=te,R=q)}return R||D-M},r.prototype._chooseSplitAxis=function(E,M,D){var R=E.leaf?this.compareMinX:d,k=E.leaf?this.compareMinY:f;this._allDistMargin(E,M,D,R)<this._allDistMargin(E,M,D,k)&&E.children.sort(R)},r.prototype._allDistMargin=function(E,M,D,R){E.children.sort(R);for(var k=this.toBBox,N=_(E,0,M,k),$=_(E,D-M,D,k),B=b(N)+b($),F=M;F<D-M;F++){var z=E.children[F];l(N,E.leaf?k(z):z),B+=b(N)}for(var Y=D-M-1;Y>=M;Y--){var J=E.children[Y];l($,E.leaf?k(J):J),B+=b($)}return B},r.prototype._adjustParentBBoxes=function(E,M,D){for(var R=D;R>=0;R--)l(M[R],E)},r.prototype._condense=function(E){for(var M=E.length-1,D=void 0;M>=0;M--)E[M].children.length===0?M>0?(D=E[M-1].children).splice(D.indexOf(E[M]),1):this.clear():c(E[M],this.toBBox)},r})}(rbush_min)),rbush_minExports}var hasRequiredGeojsonRbush;function requireGeojsonRbush(){if(hasRequiredGeojsonRbush)return geojsonRbushExports;hasRequiredGeojsonRbush=1;var n=requireRbush_min(),e=requireJs$1G(),t=requireJs$1F(),i=requireJs$1E().default,s=t.featureEach;t.coordEach,e.polygon;var r=e.featureCollection;function o(c){var _=new n(c);return _.insert=function(l){if(l.type!=="Feature")throw new Error("invalid feature");return l.bbox=l.bbox?l.bbox:i(l),n.prototype.insert.call(this,l)},_.load=function(l){var d=[];return Array.isArray(l)?l.forEach(function(f){if(f.type!=="Feature")throw new Error("invalid features");f.bbox=f.bbox?f.bbox:i(f),d.push(f)}):s(l,function(f){if(f.type!=="Feature")throw new Error("invalid features");f.bbox=f.bbox?f.bbox:i(f),d.push(f)}),n.prototype.load.call(this,d)},_.remove=function(l,d){if(l.type!=="Feature")throw new Error("invalid feature");return l.bbox=l.bbox?l.bbox:i(l),n.prototype.remove.call(this,l,d)},_.clear=function(){return n.prototype.clear.call(this)},_.search=function(l){var d=n.prototype.search.call(this,this.toBBox(l));return r(d)},_.collides=function(l){return n.prototype.collides.call(this,this.toBBox(l))},_.all=function(){var l=n.prototype.all.call(this);return r(l)},_.toJSON=function(){return n.prototype.toJSON.call(this)},_.fromJSON=function(l){return n.prototype.fromJSON.call(this,l)},_.toBBox=function(l){var d;if(l.bbox)d=l.bbox;else if(Array.isArray(l)&&l.length===4)d=l;else if(Array.isArray(l)&&l.length===6)d=[l[0],l[1],l[3],l[4]];else if(l.type==="Feature")d=i(l);else if(l.type==="FeatureCollection")d=i(l);else throw new Error("invalid geojson");return{minX:d[0],minY:d[1],maxX:d[2],maxY:d[3]}},_}return geojsonRbush.exports=o,geojsonRbushExports.default=o,geojsonRbushExports}var hasRequiredJs$18;function requireJs$18(){if(hasRequiredJs$18)return js$17;hasRequiredJs$18=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(js$17,"__esModule",{value:!0});var e=requireJs$1G(),t=requireJs$1D(),i=n(requireJs$19()),s=requireJs$1F(),r=n(requireGeojsonRbush());function o(_,l){var d={},f=[];if(_.type==="LineString"&&(_=e.feature(_)),l.type==="LineString"&&(l=e.feature(l)),_.type==="Feature"&&l.type==="Feature"&&_.geometry!==null&&l.geometry!==null&&_.geometry.type==="LineString"&&l.geometry.type==="LineString"&&_.geometry.coordinates.length===2&&l.geometry.coordinates.length===2){var g=c(_,l);return g&&f.push(g),e.featureCollection(f)}var b=r.default();return b.load(i.default(l)),s.featureEach(i.default(_),function(C){s.featureEach(b.search(C),function(P){var S=c(C,P);if(S){var L=t.getCoords(S).join(",");d[L]||(d[L]=!0,f.push(S))}})}),e.featureCollection(f)}function c(_,l){var d=t.getCoords(_),f=t.getCoords(l);if(d.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(f.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var g=d[0][0],b=d[0][1],C=d[1][0],P=d[1][1],S=f[0][0],L=f[0][1],E=f[1][0],M=f[1][1],D=(M-L)*(C-g)-(E-S)*(P-b),R=(E-S)*(b-L)-(M-L)*(g-S),k=(C-g)*(b-L)-(P-b)*(g-S);if(D===0)return null;var N=R/D,$=k/D;if(N>=0&&N<=1&&$>=0&&$<=1){var B=g+N*(C-g),F=b+N*(P-b);return e.point([B,F])}return null}return js$17.default=o,js$17}var hasRequiredJs$17;function requireJs$17(){if(hasRequiredJs$17)return js$18;hasRequiredJs$17=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(js$18,"__esModule",{value:!0});var e=n(requireJs$1i()),t=n(requireJs$1y()),i=n(requireJs$1k()),s=n(requireJs$18()),r=requireJs$1F(),o=requireJs$1G(),c=requireJs$1D();function _(l,d,f){f===void 0&&(f={});var g=o.point([1/0,1/0],{dist:1/0}),b=0;return r.flattenEach(l,function(C){for(var P=c.getCoords(C),S=0;S<P.length-1;S++){var L=o.point(P[S]);L.properties.dist=t.default(d,L,f);var E=o.point(P[S+1]);E.properties.dist=t.default(d,E,f);var M=t.default(L,E,f),D=Math.max(L.properties.dist,E.properties.dist),R=e.default(L,E),k=i.default(d,D,R+90,f),N=i.default(d,D,R-90,f),$=s.default(o.lineString([k.geometry.coordinates,N.geometry.coordinates]),o.lineString([L.geometry.coordinates,E.geometry.coordinates])),B=null;$.features.length>0&&(B=$.features[0],B.properties.dist=t.default(d,B,f),B.properties.location=b+t.default(L,B,f)),L.properties.dist<g.properties.dist&&(g=L,g.properties.index=S,g.properties.location=b),E.properties.dist<g.properties.dist&&(g=E,g.properties.index=S+1,g.properties.location=b+M),B&&B.properties.dist<g.properties.dist&&(g=B,g.properties.index=S),b+=M}}),g}return js$18.default=_,js$18}var js$15={},js$14={},js$13={},hasRequiredJs$16;function requireJs$16(){if(hasRequiredJs$16)return js$13;hasRequiredJs$16=1,Object.defineProperty(js$13,"__esModule",{value:!0});var n=requireJs$1G(),e=requireJs$1D();function t(s,r,o){o===void 0&&(o={});var c=e.getCoord(s),_=e.getCoord(r);_[0]+=_[0]-c[0]>180?-360:c[0]-_[0]>180?360:0;var l=i(c,_),d=n.convertLength(l,"meters",o.units);return d}function i(s,r,o){o=o===void 0?n.earthRadius:Number(o);var c=o,_=s[1]*Math.PI/180,l=r[1]*Math.PI/180,d=l-_,f=Math.abs(r[0]-s[0])*Math.PI/180;f>Math.PI&&(f-=2*Math.PI);var g=Math.log(Math.tan(l/2+Math.PI/4)/Math.tan(_/2+Math.PI/4)),b=Math.abs(g)>1e-11?d/g:Math.cos(_),C=Math.sqrt(d*d+b*b*f*f),P=C*c;return P}return js$13.default=t,js$13}var hasRequiredJs$15;function requireJs$15(){if(hasRequiredJs$15)return js$14;hasRequiredJs$15=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(js$14,"__esModule",{value:!0});var e=n(requireJs$1y()),t=requireJs$1G(),i=requireJs$1D(),s=requireJs$1F(),r=n(requireJs$16());function o(d,f,g){if(g===void 0&&(g={}),g.method||(g.method="geodesic"),g.units||(g.units="kilometers"),!d)throw new Error("pt is required");if(Array.isArray(d)?d=t.point(d):d.type==="Point"?d=t.feature(d):i.featureOf(d,"Point","point"),!f)throw new Error("line is required");Array.isArray(f)?f=t.lineString(f):f.type==="LineString"?f=t.feature(f):i.featureOf(f,"LineString","line");var b=1/0,C=d.geometry.coordinates;return s.segmentEach(f,function(P){var S=P.geometry.coordinates[0],L=P.geometry.coordinates[1],E=c(C,S,L,g);E<b&&(b=E)}),t.convertLength(b,"degrees",g.units)}function c(d,f,g,b){var C=[g[0]-f[0],g[1]-f[1]],P=[d[0]-f[0],d[1]-f[1]],S=_(P,C);if(S<=0)return l(d,f,{method:b.method,units:"degrees"});var L=_(C,C);if(L<=S)return l(d,g,{method:b.method,units:"degrees"});var E=S/L,M=[f[0]+E*C[0],f[1]+E*C[1]];return l(d,M,{method:b.method,units:"degrees"})}function _(d,f){return d[0]*f[0]+d[1]*f[1]}function l(d,f,g){return g.method==="planar"?r.default(d,f,g):e.default(d,f,g)}return js$14.default=o,js$14}var hasRequiredJs$14;function requireJs$14(){if(hasRequiredJs$14)return js$15;hasRequiredJs$14=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(js$15,"__esModule",{value:!0});var e=requireJs$1D(),t=requireJs$1F(),i=n(requireJs$15()),s=n(requireObjectAssign());function r(c,_,l){l===void 0&&(l={});var d=l.units,f=l.properties||{},g=o(c);if(!g.features.length)throw new Error("points must contain features");if(!_)throw new Error("line is required");if(e.getType(_)!=="LineString")throw new Error("line must be a LineString");var b=1/0,C=null;return t.featureEach(g,function(P){var S=i.default(P,_,{units:d});S<b&&(b=S,C=P)}),C&&(C.properties=s.default({dist:b},C.properties,f)),C}function o(c){var _=[],l=c.geometry?c.geometry.type:c.type;switch(l){case"GeometryCollection":return t.geomEach(c,function(d){d.type==="Point"&&_.push({type:"Feature",properties:{},geometry:d})}),{type:"FeatureCollection",features:_};case"FeatureCollection":return c.features=c.features.filter(function(d){return d.geometry.type==="Point"}),c;default:throw new Error("points must be a Point Collection")}}return js$15.default=r,js$15}var jsExports$q={},js$12={get exports(){return jsExports$q},set exports(n){jsExports$q=n}},hasRequiredJs$13;function requireJs$13(){if(hasRequiredJs$13)return jsExports$q;hasRequiredJs$13=1;var n=requireJs$1D();function e(t,i){var s=n.getCoord(t),r=n.getGeom(i),o=r.coordinates,c=o[0];if(c.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var _=i.properties||{},l=_.a,d=_.b,f=_.c,g=s[0],b=s[1],C=c[0][0],P=c[0][1],S=l!==void 0?l:c[0][2],L=c[1][0],E=c[1][1],M=d!==void 0?d:c[1][2],D=c[2][0],R=c[2][1],k=f!==void 0?f:c[2][2],N=(k*(g-C)*(b-E)+S*(g-L)*(b-R)+M*(g-D)*(b-P)-M*(g-C)*(b-R)-k*(g-L)*(b-P)-S*(g-D)*(b-E))/((g-C)*(b-E)+(g-L)*(b-R)+(g-D)*(b-P)-(g-C)*(b-R)-(g-L)*(b-P)-(g-D)*(b-E));return N}return js$12.exports=e,jsExports$q.default=e,jsExports$q}var js$11={},hasRequiredJs$12;function requireJs$12(){if(hasRequiredJs$12)return js$11;hasRequiredJs$12=1,Object.defineProperty(js$11,"__esModule",{value:!0});var n=requireJs$1G();function e(i){var s,r,o={type:"FeatureCollection",features:[]};if(i.type==="Feature"?r=i.geometry:r=i,r.type==="LineString")s=[r.coordinates];else if(r.type==="MultiLineString")s=r.coordinates;else if(r.type==="MultiPolygon")s=[].concat.apply([],r.coordinates);else if(r.type==="Polygon")s=r.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return s.forEach(function(c){s.forEach(function(_){for(var l=0;l<c.length-1;l++)for(var d=l;d<_.length-1;d++)if(!(c===_&&(Math.abs(l-d)===1||l===0&&d===c.length-2&&c[l][0]===c[c.length-1][0]&&c[l][1]===c[c.length-1][1]))){var f=t(c[l][0],c[l][1],c[l+1][0],c[l+1][1],_[d][0],_[d][1],_[d+1][0],_[d+1][1]);f&&o.features.push(n.point([f[0],f[1]]))}})}),o}js$11.default=e;function t(i,s,r,o,c,_,l,d){var f,g,b,C,P,S={x:null,y:null,onLine1:!1,onLine2:!1};return f=(d-_)*(r-i)-(l-c)*(o-s),f===0?S.x!==null&&S.y!==null?S:!1:(g=s-_,b=i-c,C=(l-c)*g-(d-_)*b,P=(r-i)*g-(o-s)*b,g=C/f,b=P/f,S.x=i+g*(r-i),S.y=s+g*(o-s),g>=0&&g<=1&&(S.onLine1=!0),b>=0&&b<=1&&(S.onLine2=!0),S.onLine1&&S.onLine2?[S.x,S.y]:!1)}return js$11}var jsExports$p={},js$10={get exports(){return jsExports$p},set exports(n){jsExports$p=n}},hasRequiredJs$11;function requireJs$11(){if(hasRequiredJs$11)return jsExports$p;hasRequiredJs$11=1;var n=requireJs$1c(),e=requireJs$1g(),t=requireJs$1a(),i=requireJs$1A(),s=requireJs$1G();function r(b){return b&&typeof b=="object"&&"default"in b?b:{default:b}}var o=r(n),c=r(e),_=r(t),l=r(i);function d(b){for(var C=f(b),P=c.default(C),S=!1,L=0;!S&&L<C.features.length;){var E=C.features[L].geometry,M,D,R,k,N,$,B,F=!1;if(E.type==="Point")P.geometry.coordinates[0]===E.coordinates[0]&&P.geometry.coordinates[1]===E.coordinates[1]&&(S=!0);else if(E.type==="MultiPoint"){var z=!1;for(B=0;!z&&B<E.coordinates.length;)P.geometry.coordinates[0]===E.coordinates[B][0]&&P.geometry.coordinates[1]===E.coordinates[B][1]&&(S=!0,z=!0),B++}else if(E.type==="LineString")for(B=0;!F&&B<E.coordinates.length-1;)M=P.geometry.coordinates[0],D=P.geometry.coordinates[1],R=E.coordinates[B][0],k=E.coordinates[B][1],N=E.coordinates[B+1][0],$=E.coordinates[B+1][1],g(M,D,R,k,N,$)&&(F=!0,S=!0),B++;else if(E.type==="MultiLineString")for(var Y=0;Y<E.coordinates.length;){F=!1,B=0;for(var J=E.coordinates[Y];!F&&B<J.length-1;)M=P.geometry.coordinates[0],D=P.geometry.coordinates[1],R=J[B][0],k=J[B][1],N=J[B+1][0],$=J[B+1][1],g(M,D,R,k,N,$)&&(F=!0,S=!0),B++;Y++}else(E.type==="Polygon"||E.type==="MultiPolygon")&&l.default(P,E)&&(S=!0);L++}if(S)return P;var q=s.featureCollection([]);for(L=0;L<C.features.length;L++)q.features=q.features.concat(o.default(C.features[L]).features);return s.point(_.default(P,q).geometry.coordinates)}function f(b){return b.type!=="FeatureCollection"?b.type!=="Feature"?s.featureCollection([s.feature(b)]):s.featureCollection([b]):b}function g(b,C,P,S,L,E){var M=Math.sqrt((L-P)*(L-P)+(E-S)*(E-S)),D=Math.sqrt((b-P)*(b-P)+(C-S)*(C-S)),R=Math.sqrt((L-b)*(L-b)+(E-C)*(E-C));return M===D+R}return js$10.exports=d,jsExports$p.default=d,jsExports$p}var js$$={},hasRequiredJs$10;function requireJs$10(){if(hasRequiredJs$10)return js$$;hasRequiredJs$10=1,Object.defineProperty(js$$,"__esModule",{value:!0});var n=requireJs$1F(),e=6378137;function t(c){return n.geomReduce(c,function(_,l){return _+i(l)},0)}js$$.default=t;function i(c){var _=0,l;switch(c.type){case"Polygon":return s(c.coordinates);case"MultiPolygon":for(l=0;l<c.coordinates.length;l++)_+=s(c.coordinates[l]);return _;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function s(c){var _=0;if(c&&c.length>0){_+=Math.abs(r(c[0]));for(var l=1;l<c.length;l++)_-=Math.abs(r(c[l]))}return _}function r(c){var _,l,d,f,g,b,C,P=0,S=c.length;if(S>2){for(C=0;C<S;C++)C===S-2?(f=S-2,g=S-1,b=0):C===S-1?(f=S-1,g=0,b=1):(f=C,g=C+1,b=C+2),_=c[f],l=c[g],d=c[b],P+=(o(d[0])-o(_[0]))*Math.sin(o(l[1]));P=P*e*e/2}return P}function o(c){return c*Math.PI/180}return js$$}var js$_={},hasRequiredJs$$;function requireJs$$(){if(hasRequiredJs$$)return js$_;hasRequiredJs$$=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(js$_,"__esModule",{value:!0});var e=n(requireJs$1i()),t=n(requireJs$1k()),i=n(requireJs$1y()),s=requireJs$1G(),r=requireJs$1D();function o(c,_,l){l===void 0&&(l={});for(var d=r.getGeom(c),f=d.coordinates,g=0,b=0;b<f.length&&!(_>=g&&b===f.length-1);b++)if(g>=_){var C=_-g;if(C){var P=e.default(f[b],f[b-1])-180,S=t.default(f[b],C,P,l);return S}else return s.point(f[b])}else g+=i.default(f[b],f[b+1],l);return s.point(f[f.length-1])}return js$_.default=o,js$_}var js$Z={},hasRequiredJs$_;function requireJs$_(){if(hasRequiredJs$_)return js$Z;hasRequiredJs$_=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(js$Z,"__esModule",{value:!0});var e=n(requireJs$1y()),t=requireJs$1F();function i(s,r){return r===void 0&&(r={}),t.segmentReduce(s,function(o,c){var _=c.geometry.coordinates;return o+e.default(_[0],_[1],r)},0)}return js$Z.default=i,js$Z}var jsExports$o={},js$Y={get exports(){return jsExports$o},set exports(n){jsExports$o=n}},hasRequiredJs$Z;function requireJs$Z(){if(hasRequiredJs$Z)return jsExports$o;hasRequiredJs$Z=1;var n=requireJs$1D(),e=requireJs$1G(),t=requireJs$17();function i(o){return o&&typeof o=="object"&&"default"in o?o:{default:o}}var s=i(t);function r(o,c,_){var l=n.getCoords(_);if(n.getType(_)!=="LineString")throw new Error("line must be a LineString");var d=s.default(_,o),f=s.default(_,c),g;d.properties.index<=f.properties.index?g=[d,f]:g=[f,d];for(var b=[g[0].geometry.coordinates],C=g[0].properties.index+1;C<g[1].properties.index+1;C++)b.push(l[C]);return b.push(g[1].geometry.coordinates),e.lineString(b,_.properties)}return js$Y.exports=r,jsExports$o.default=r,jsExports$o}var jsExports$n={},js$X={get exports(){return jsExports$n},set exports(n){jsExports$n=n}},hasRequiredJs$Y;function requireJs$Y(){if(hasRequiredJs$Y)return jsExports$n;hasRequiredJs$Y=1;var n=requireJs$1i(),e=requireJs$1y(),t=requireJs$1k(),i=requireJs$1G();function s(l){return l&&typeof l=="object"&&"default"in l?l:{default:l}}var r=s(n),o=s(e),c=s(t);function _(l,d,f,g){if(g=g||{},!i.isObject(g))throw new Error("options is invalid");var b,C=[];if(l.type==="Feature")b=l.geometry.coordinates;else if(l.type==="LineString")b=l.coordinates;else throw new Error("input must be a LineString Feature or Geometry");for(var P=b.length,S=0,L,E,M,D=0;D<b.length&&!(d>=S&&D===b.length-1);D++){if(S>d&&C.length===0){if(L=d-S,!L)return C.push(b[D]),i.lineString(C);E=r.default(b[D],b[D-1])-180,M=c.default(b[D],L,E,g),C.push(M.geometry.coordinates)}if(S>=f)return L=f-S,L?(E=r.default(b[D],b[D-1])-180,M=c.default(b[D],L,E,g),C.push(M.geometry.coordinates),i.lineString(C)):(C.push(b[D]),i.lineString(C));if(S>=d&&C.push(b[D]),D===b.length-1)return i.lineString(C);S+=o.default(b[D],b[D+1],g)}if(S<d&&b.length===P)throw new Error("Start position is beyond line");var R=b[b.length-1];return i.lineString([R,R])}return js$X.exports=_,jsExports$n.default=_,jsExports$n}var js$W={},js$V={},js$U={},hasRequiredJs$X;function requireJs$X(){if(hasRequiredJs$X)return js$U;hasRequiredJs$X=1,Object.defineProperty(js$U,"__esModule",{value:!0});var n=requireJs$1D();function e(i,s,r){r===void 0&&(r={});for(var o=n.getCoord(i),c=n.getCoords(s),_=0;_<c.length-1;_++){var l=!1;if(r.ignoreEndVertices&&(_===0&&(l="start"),_===c.length-2&&(l="end"),_===0&&_+1===c.length-1&&(l="both")),t(c[_],c[_+1],o,l,typeof r.epsilon>"u"?null:r.epsilon))return!0}return!1}function t(i,s,r,o,c){var _=r[0],l=r[1],d=i[0],f=i[1],g=s[0],b=s[1],C=r[0]-d,P=r[1]-f,S=g-d,L=b-f,E=C*L-P*S;if(c!==null){if(Math.abs(E)>c)return!1}else if(E!==0)return!1;if(o){if(o==="start")return Math.abs(S)>=Math.abs(L)?S>0?d<_&&_<=g:g<=_&&_<d:L>0?f<l&&l<=b:b<=l&&l<f;if(o==="end")return Math.abs(S)>=Math.abs(L)?S>0?d<=_&&_<g:g<_&&_<=d:L>0?f<=l&&l<b:b<l&&l<=f;if(o==="both")return Math.abs(S)>=Math.abs(L)?S>0?d<_&&_<g:g<_&&_<d:L>0?f<l&&l<b:b<l&&l<f}else return Math.abs(S)>=Math.abs(L)?S>0?d<=_&&_<=g:g<=_&&_<=d:L>0?f<=l&&l<=b:b<=l&&l<=f;return!1}return js$U.default=e,js$U}var hasRequiredJs$W;function requireJs$W(){if(hasRequiredJs$W)return js$V;hasRequiredJs$W=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(js$V,"__esModule",{value:!0});var e=n(requireJs$1E()),t=n(requireJs$X()),i=n(requireJs$1A()),s=requireJs$1D();function r(S,L){var E=s.getGeom(S),M=s.getGeom(L),D=E.type,R=M.type;switch(D){case"Point":switch(R){case"MultiPoint":return o(E,M);case"LineString":return t.default(E,M,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return i.default(E,M,{ignoreBoundary:!0});default:throw new Error("feature2 "+R+" geometry not supported")}case"MultiPoint":switch(R){case"MultiPoint":return c(E,M);case"LineString":return _(E,M);case"Polygon":case"MultiPolygon":return l(E,M);default:throw new Error("feature2 "+R+" geometry not supported")}case"LineString":switch(R){case"LineString":return d(E,M);case"Polygon":case"MultiPolygon":return f(E,M);default:throw new Error("feature2 "+R+" geometry not supported")}case"Polygon":switch(R){case"Polygon":case"MultiPolygon":return g(E,M);default:throw new Error("feature2 "+R+" geometry not supported")}default:throw new Error("feature1 "+D+" geometry not supported")}}function o(S,L){var E,M=!1;for(E=0;E<L.coordinates.length;E++)if(C(L.coordinates[E],S.coordinates)){M=!0;break}return M}function c(S,L){for(var E=0;E<S.coordinates.length;E++){for(var M=!1,D=0;D<L.coordinates.length;D++)C(S.coordinates[E],L.coordinates[D])&&(M=!0);if(!M)return!1}return!0}function _(S,L){for(var E=!1,M=0;M<S.coordinates.length;M++){if(!t.default(S.coordinates[M],L))return!1;E||(E=t.default(S.coordinates[M],L,{ignoreEndVertices:!0}))}return E}function l(S,L){for(var E=!0,M=!1,D=0;D<S.coordinates.length;D++){if(M=i.default(S.coordinates[1],L),!M){E=!1;break}M=i.default(S.coordinates[1],L,{ignoreBoundary:!0})}return E&&M}function d(S,L){for(var E=0;E<S.coordinates.length;E++)if(!t.default(S.coordinates[E],L))return!1;return!0}function f(S,L){var E=e.default(L),M=e.default(S);if(!b(E,M))return!1;for(var D=!1,R=0;R<S.coordinates.length-1;R++){if(!i.default(S.coordinates[R],L))return!1;if(D||(D=i.default(S.coordinates[R],L,{ignoreBoundary:!0})),!D){var k=P(S.coordinates[R],S.coordinates[R+1]);D=i.default(k,L,{ignoreBoundary:!0})}}return D}function g(S,L){var E=e.default(S),M=e.default(L);if(!b(M,E))return!1;for(var D=0;D<S.coordinates[0].length;D++)if(!i.default(S.coordinates[0][D],L))return!1;return!0}function b(S,L){return!(S[0]>L[0]||S[2]<L[2]||S[1]>L[1]||S[3]<L[3])}function C(S,L){return S[0]===L[0]&&S[1]===L[1]}function P(S,L){return[(S[0]+L[0])/2,(S[1]+L[1])/2]}return js$V.default=r,js$V}var hasRequiredJs$V;function requireJs$V(){if(hasRequiredJs$V)return js$W;hasRequiredJs$V=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(js$W,"__esModule",{value:!0});var e=n(requireJs$W()),t=n(requireJs$1y()),i=requireJs$1G();function s(r,o,c){c===void 0&&(c={}),c.mask&&!c.units&&(c.units="kilometers");for(var _=[],l=r[0],d=r[1],f=r[2],g=r[3],b=o/t.default([l,d],[f,d],c),C=b*(f-l),P=o/t.default([l,d],[l,g],c),S=P*(g-d),L=f-l,E=g-d,M=Math.floor(L/C),D=Math.floor(E/S),R=(L-M*C)/2,k=(E-D*S)/2,N=l+R;N<=f;){for(var $=d+k;$<=g;){var B=i.point([N,$],c.properties);c.mask?e.default(B,c.mask)&&_.push(B):_.push(B),$+=S}N+=C}return i.featureCollection(_)}return js$W.default=s,js$W}var js$T={},hasRequiredJs$U;function requireJs$U(){if(hasRequiredJs$U)return js$T;hasRequiredJs$U=1,Object.defineProperty(js$T,"__esModule",{value:!0});var n=requireJs$1F();function e(i,s){s===void 0&&(s={});var r=s.precision,o=s.coordinates,c=s.mutate;if(r=r==null||isNaN(r)?6:r,o=o==null||isNaN(o)?3:o,!i)throw new Error("<geojson> is required");if(typeof r!="number")throw new Error("<precision> must be a number");if(typeof o!="number")throw new Error("<coordinates> must be a number");(c===!1||c===void 0)&&(i=JSON.parse(JSON.stringify(i)));var _=Math.pow(10,r);return n.coordEach(i,function(l){t(l,_,o)}),i}function t(i,s,r){i.length>r&&i.splice(r,i.length);for(var o=0;o<i.length;o++)i[o]=Math.round(i[o]*s)/s;return i}return js$T.default=e,js$T}var jsExports$m={},js$S={get exports(){return jsExports$m},set exports(n){jsExports$m=n}},hasRequiredJs$T;function requireJs$T(){if(hasRequiredJs$T)return jsExports$m;hasRequiredJs$T=1;var n=requireJs$1F(),e=requireJs$1G();function t(i){if(!i)throw new Error("geojson is required");var s=[];return n.flattenEach(i,function(r){s.push(r)}),e.featureCollection(s)}return js$S.exports=t,jsExports$m.default=t,jsExports$m}var jsExports$l={},js$R={get exports(){return jsExports$l},set exports(n){jsExports$l=n}},hasRequiredJs$S;function requireJs$S(){if(hasRequiredJs$S)return jsExports$l;hasRequiredJs$S=1;var n=requireJs$_(),e=requireJs$Y(),t=requireJs$1F(),i=requireJs$1G();function s(l){return l&&typeof l=="object"&&"default"in l?l:{default:l}}var r=s(n),o=s(e);function c(l,d,f){if(f=f||{},!i.isObject(f))throw new Error("options is invalid");var g=f.units,b=f.reverse;if(!l)throw new Error("geojson is required");if(d<=0)throw new Error("segmentLength must be greater than 0");var C=[];return t.flattenEach(l,function(P){b&&(P.geometry.coordinates=P.geometry.coordinates.reverse()),_(P,d,g,function(S){C.push(S)})}),i.featureCollection(C)}function _(l,d,f,g){var b=r.default(l,{units:f});if(b<=d)return g(l);var C=b/d;Number.isInteger(C)||(C=Math.floor(C)+1);for(var P=0;P<C;P++){var S=o.default(l,d*P,d*(P+1),{units:f});g(S,P)}}return js$R.exports=c,jsExports$l.default=c,jsExports$l}var jsExports$k={},js$Q={get exports(){return jsExports$k},set exports(n){jsExports$k=n}},hasRequiredJs$R;function requireJs$R(){if(hasRequiredJs$R)return jsExports$k;hasRequiredJs$R=1;var n=requireJs$1F(),e=requireJs$1G(),t=requireRbush(),i=requireJs$10(),s=requireJs$1A();function r(R){return R&&typeof R=="object"&&"default"in R?R:{default:R}}var o=r(t),c=r(i),_=r(s);function l(R,k,N){if(R.geometry.type!=="Polygon")throw new Error("The input feature must be a Polygon");N===void 0&&(N=1);var $=R.geometry.coordinates,B=[],F={};if(N){for(var z=[],Y=0;Y<$.length;Y++)for(var J=0;J<$[Y].length-1;J++)z.push(he(Y,J));var q=o.default();q.load(z)}for(var le=0;le<$.length;le++)for(var j=0;j<$[le].length-1;j++)if(N){var ie=q.search(he(le,j));ie.forEach(function(Q){var fe=Q.ring,Ae=Q.edge;xe(le,j,fe,Ae)})}else for(var te=0;te<$.length;te++)for(var ce=0;ce<$[te].length-1;ce++)xe(le,j,te,ce);return k||(B={type:"Feature",geometry:{type:"MultiPoint",coordinates:B}}),B;function xe(Q,fe,Ae,me){var Se=$[Q][fe],Ie=$[Q][fe+1],pe=$[Ae][me],Te=$[Ae][me+1],ye=d(Se,Ie,pe,Te);if(ye!==null){var ge,ae;if(Ie[0]!==Se[0]?ge=(ye[0]-Se[0])/(Ie[0]-Se[0]):ge=(ye[1]-Se[1])/(Ie[1]-Se[1]),Te[0]!==pe[0]?ae=(ye[0]-pe[0])/(Te[0]-pe[0]):ae=(ye[1]-pe[1])/(Te[1]-pe[1]),!(ge>=1||ge<=0||ae>=1||ae<=0)){var we=ye,ke=!F[we];ke&&(F[we]=!0),k?B.push(k(ye,Q,fe,Se,Ie,ge,Ae,me,pe,Te,ae,ke)):B.push(ye)}}}function he(Q,fe){var Ae=$[Q][fe],me=$[Q][fe+1],Se,Ie,pe,Te;return Ae[0]<me[0]?(Se=Ae[0],Ie=me[0]):(Se=me[0],Ie=Ae[0]),Ae[1]<me[1]?(pe=Ae[1],Te=me[1]):(pe=me[1],Te=Ae[1]),{minX:Se,minY:pe,maxX:Ie,maxY:Te,ring:Q,edge:fe}}}function d(R,k,N,$){if(f(R,N)||f(R,$)||f(k,N)||f($,N))return null;var B=R[0],F=R[1],z=k[0],Y=k[1],J=N[0],q=N[1],le=$[0],j=$[1],ie=(B-z)*(q-j)-(F-Y)*(J-le);if(ie===0)return null;var te=((B*Y-F*z)*(J-le)-(B-z)*(J*j-q*le))/ie,ce=((B*Y-F*z)*(q-j)-(F-Y)*(J*j-q*le))/ie;return[te,ce]}function f(R,k){if(!R||!k||R.length!==k.length)return!1;for(var N=0,$=R.length;N<$;N++)if(R[N]instanceof Array&&k[N]instanceof Array){if(!f(R[N],k[N]))return!1}else if(R[N]!==k[N])return!1;return!0}function g(R){if(R.type!="Feature")throw new Error("The input must a geojson object of type Feature");if(R.geometry===void 0||R.geometry==null)throw new Error("The input must a geojson object with a non-empty geometry");if(R.geometry.type!="Polygon")throw new Error("The input must be a geojson Polygon");for(var k=R.geometry.coordinates.length,N=[],fe=0;fe<k;fe++){var $=R.geometry.coordinates[fe];L($[0],$[$.length-1])||$.push($[0]),N.push.apply(N,$.slice(0,$.length-1))}if(!M(N))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var B=N.length,F=l(R,function(Pe,De,Me,Ve,Ze,Ue,xt,ht,Pt,Et,Tt,Rt){return[Pe,De,Me,Ve,Ze,Ue,xt,ht,Pt,Et,Tt,Rt]}),z=F.length;if(z==0){for(var pe=[],fe=0;fe<k;fe++)pe.push(e.polygon([R.geometry.coordinates[fe]],{parent:-1,winding:S(R.geometry.coordinates[fe])}));var W=e.featureCollection(pe);return U(),X(),W}for(var Y=[],J=[],fe=0;fe<k;fe++){Y.push([]);for(var q=0;q<R.geometry.coordinates[fe].length-1;q++)Y[fe].push([new b(R.geometry.coordinates[fe][E(q+1,R.geometry.coordinates[fe].length-1)],1,[fe,q],[fe,E(q+1,R.geometry.coordinates[fe].length-1)],void 0)]),J.push(new C(R.geometry.coordinates[fe][q],[fe,E(q-1,R.geometry.coordinates[fe].length-1)],[fe,q],void 0,void 0,!1,!0))}for(var fe=0;fe<z;fe++)Y[F[fe][1]][F[fe][2]].push(new b(F[fe][0],F[fe][5],[F[fe][1],F[fe][2]],[F[fe][6],F[fe][7]],void 0)),F[fe][11]&&J.push(new C(F[fe][0],[F[fe][1],F[fe][2]],[F[fe][6],F[fe][7]],void 0,void 0,!0,!0));for(var le=J.length,fe=0;fe<Y.length;fe++)for(var q=0;q<Y[fe].length;q++)Y[fe][q].sort(function(De,Me){return De.param<Me.param?-1:1});for(var j=[],fe=0;fe<le;fe++)j.push({minX:J[fe].coord[0],minY:J[fe].coord[1],maxX:J[fe].coord[0],maxY:J[fe].coord[1],index:fe});var ie=o.default();ie.load(j);for(var fe=0;fe<Y.length;fe++)for(var q=0;q<Y[fe].length;q++)for(var te=0;te<Y[fe][q].length;te++){var ce;te==Y[fe][q].length-1?ce=Y[fe][E(q+1,R.geometry.coordinates[fe].length-1)][0].coord:ce=Y[fe][q][te+1].coord;var xe=ie.search({minX:ce[0],minY:ce[1],maxX:ce[0],maxY:ce[1]})[0];Y[fe][q][te].nxtIsectAlongEdgeIn=xe.index}for(var fe=0;fe<Y.length;fe++)for(var q=0;q<Y[fe].length;q++)for(var te=0;te<Y[fe][q].length;te++){var ce=Y[fe][q][te].coord,xe=ie.search({minX:ce[0],minY:ce[1],maxX:ce[0],maxY:ce[1]})[0],he=xe.index;he<B?J[he].nxtIsectAlongRingAndEdge2=Y[fe][q][te].nxtIsectAlongEdgeIn:L(J[he].ringAndEdge1,Y[fe][q][te].ringAndEdgeIn)?J[he].nxtIsectAlongRingAndEdge1=Y[fe][q][te].nxtIsectAlongEdgeIn:J[he].nxtIsectAlongRingAndEdge2=Y[fe][q][te].nxtIsectAlongEdgeIn}for(var Q=[],fe=0,q=0;q<k;q++){for(var Ae=fe,te=0;te<R.geometry.coordinates[q].length-1;te++)J[fe].coord[0]<J[Ae].coord[0]&&(Ae=fe),fe++;for(var me=J[Ae].nxtIsectAlongRingAndEdge2,te=0;te<J.length;te++)if(J[te].nxtIsectAlongRingAndEdge1==Ae||J[te].nxtIsectAlongRingAndEdge2==Ae){var Se=te;break}var Ie=P([J[Se].coord,J[Ae].coord,J[me].coord],!0)?1:-1;Q.push({isect:Ae,parent:-1,winding:Ie})}Q.sort(function(_e,Pe){return J[_e.isect].coord>J[Pe.isect].coord?-1:1});for(var pe=[];Q.length>0;){var Te=Q.pop(),ye=Te.isect,ge=Te.parent,ae=Te.winding,we=pe.length,ke=[J[ye].coord],Ne=ye;if(J[ye].ringAndEdge1Walkable)var $e=J[ye].ringAndEdge1,qe=J[ye].nxtIsectAlongRingAndEdge1;else var $e=J[ye].ringAndEdge2,qe=J[ye].nxtIsectAlongRingAndEdge2;for(;!L(J[ye].coord,J[qe].coord);){ke.push(J[qe].coord);for(var Je=void 0,fe=0;fe<Q.length;fe++)if(Q[fe].isect==qe){Je=fe;break}if(Je!=null&&Q.splice(Je,1),L($e,J[qe].ringAndEdge1)){if($e=J[qe].ringAndEdge2,J[qe].ringAndEdge2Walkable=!1,J[qe].ringAndEdge1Walkable){var ve={isect:qe};P([J[Ne].coord,J[qe].coord,J[J[qe].nxtIsectAlongRingAndEdge2].coord],ae==1)?(ve.parent=ge,ve.winding=-ae):(ve.parent=we,ve.winding=ae),Q.push(ve)}Ne=qe,qe=J[qe].nxtIsectAlongRingAndEdge2}else{if($e=J[qe].ringAndEdge1,J[qe].ringAndEdge1Walkable=!1,J[qe].ringAndEdge2Walkable){var ve={isect:qe};P([J[Ne].coord,J[qe].coord,J[J[qe].nxtIsectAlongRingAndEdge1].coord],ae==1)?(ve.parent=ge,ve.winding=-ae):(ve.parent=we,ve.winding=ae),Q.push(ve)}Ne=qe,qe=J[qe].nxtIsectAlongRingAndEdge1}}ke.push(J[qe].coord),pe.push(e.polygon([ke],{index:we,parent:ge,winding:ae,netWinding:void 0}))}var W=e.featureCollection(pe);U(),X();function U(){for(var _e=[],Pe=0;Pe<W.features.length;Pe++)W.features[Pe].properties.parent==-1&&_e.push(Pe);if(_e.length>1)for(var Pe=0;Pe<_e.length;Pe++){for(var De=-1,Me=1/0,Ve=0;Ve<W.features.length;Ve++)_e[Pe]!=Ve&&_.default(W.features[_e[Pe]].geometry.coordinates[0][0],W.features[Ve],{ignoreBoundary:!0})&&c.default(W.features[Ve])<Me&&(De=Ve);W.features[_e[Pe]].properties.parent=De}}function X(){for(var _e=0;_e<W.features.length;_e++)if(W.features[_e].properties.parent==-1){var Pe=W.features[_e].properties.winding;W.features[_e].properties.netWinding=Pe,oe(_e,Pe)}}function oe(_e,Pe){for(var De=0;De<W.features.length;De++)if(W.features[De].properties.parent==_e){var Me=Pe+W.features[De].properties.winding;W.features[De].properties.netWinding=Me,oe(De,Me)}}return W}var b=function(R,k,N,$,B){this.coord=R,this.param=k,this.ringAndEdgeIn=N,this.ringAndEdgeOut=$,this.nxtIsectAlongEdgeIn=B},C=function(R,k,N,$,B,F,z){this.coord=R,this.ringAndEdge1=k,this.ringAndEdge2=N,this.nxtIsectAlongRingAndEdge1=$,this.nxtIsectAlongRingAndEdge2=B,this.ringAndEdge1Walkable=F,this.ringAndEdge2Walkable=z};function P(R,k){if(typeof k>"u"&&(k=!0),R.length!=3)throw new Error("This function requires an array of three points [x,y]");var N=(R[1][0]-R[0][0])*(R[2][1]-R[0][1])-(R[1][1]-R[0][1])*(R[2][0]-R[0][0]);return N>=0==k}function S(R){for(var k=0,N=0;N<R.length-1;N++)R[N][0]<R[k][0]&&(k=N);if(P([R[E(k-1,R.length-1)],R[k],R[E(k+1,R.length-1)]],!0))var $=1;else var $=-1;return $}function L(R,k){if(!R||!k||R.length!=k.length)return!1;for(var N=0,$=R.length;N<$;N++)if(R[N]instanceof Array&&k[N]instanceof Array){if(!L(R[N],k[N]))return!1}else if(R[N]!=k[N])return!1;return!0}function E(R,k){return(R%k+k)%k}function M(R){for(var k={},N=1,$=0,B=R.length;$<B;++$){if(Object.prototype.hasOwnProperty.call(k,R[$])){N=0;break}k[R[$]]=1}return N}function D(R){var k=[];return n.flattenEach(R,function(N){N.geometry.type==="Polygon"&&n.featureEach(g(N),function($){k.push(e.polygon($.geometry.coordinates,N.properties))})}),e.featureCollection(k)}return js$Q.exports=D,jsExports$k.default=D,jsExports$k}var jsExports$j={},js$P={get exports(){return jsExports$j},set exports(n){jsExports$j=n}},hasRequiredJs$Q;function requireJs$Q(){if(hasRequiredJs$Q)return jsExports$j;hasRequiredJs$Q=1;var n=requireJs$1D(),e=Math.PI/180,t=180/Math.PI,i=function(_,l){this.lon=_,this.lat=l,this.x=e*_,this.y=e*l};i.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},i.prototype.antipode=function(){var _=-1*this.lat,l=this.lon<0?180+this.lon:(180-this.lon)*-1;return new i(l,_)};var s=function(){this.coords=[],this.length=0};s.prototype.move_to=function(_){this.length++,this.coords.push(_)};var r=function(_){this.properties=_||{},this.geometries=[]};r.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(this.geometries.length===1)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var _=[],l=0;l<this.geometries.length;l++)_.push(this.geometries[l].coords);return{geometry:{type:"MultiLineString",coordinates:_},type:"Feature",properties:this.properties}},r.prototype.wkt=function(){for(var _="",l="LINESTRING(",d=function(b){l+=b[0]+" "+b[1]+","},f=0;f<this.geometries.length;f++){if(this.geometries[f].coords.length===0)return"LINESTRING(empty)";var g=this.geometries[f].coords;g.forEach(d),_+=l.substring(0,l.length-1)+")"}return _};var o=function(_,l,d){if(!_||_.x===void 0||_.y===void 0)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!l||l.x===void 0||l.y===void 0)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new i(_.x,_.y),this.end=new i(l.x,l.y),this.properties=d||{};var f=this.start.x-this.end.x,g=this.start.y-this.end.y,b=Math.pow(Math.sin(g/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(f/2),2);if(this.g=2*Math.asin(Math.sqrt(b)),this.g===Math.PI)throw new Error("it appears "+_.view()+" and "+l.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+_+" and "+l)};o.prototype.interpolate=function(_){var l=Math.sin((1-_)*this.g)/Math.sin(this.g),d=Math.sin(_*this.g)/Math.sin(this.g),f=l*Math.cos(this.start.y)*Math.cos(this.start.x)+d*Math.cos(this.end.y)*Math.cos(this.end.x),g=l*Math.cos(this.start.y)*Math.sin(this.start.x)+d*Math.cos(this.end.y)*Math.sin(this.end.x),b=l*Math.sin(this.start.y)+d*Math.sin(this.end.y),C=t*Math.atan2(b,Math.sqrt(Math.pow(f,2)+Math.pow(g,2))),P=t*Math.atan2(g,f);return[P,C]},o.prototype.Arc=function(_,l){var d=[];if(!_||_<=2)d.push([this.start.lon,this.start.lat]),d.push([this.end.lon,this.end.lat]);else for(var f=1/(_-1),g=0;g<_;++g){var b=f*g,C=this.interpolate(b);d.push(C)}for(var P=!1,S=0,L=l&&l.offset?l.offset:10,E=180-L,M=-180+L,D=360-L,R=1;R<d.length;++R){var k=d[R-1][0],N=d[R][0],$=Math.abs(N-k);$>D&&(N>E&&k<M||k>E&&N<M)?P=!0:$>S&&(S=$)}var B=[];if(P&&S<L){var F=[];B.push(F);for(var z=0;z<d.length;++z){var Y=parseFloat(d[z][0]);if(z>0&&Math.abs(Y-d[z-1][0])>D){var J=parseFloat(d[z-1][0]),q=parseFloat(d[z-1][1]),le=parseFloat(d[z][0]),j=parseFloat(d[z][1]);if(J>-180&&J<M&&le===180&&z+1<d.length&&d[z-1][0]>-180&&d[z-1][0]<M){F.push([-180,d[z][1]]),z++,F.push([d[z][0],d[z][1]]);continue}else if(J>E&&J<180&&le===-180&&z+1<d.length&&d[z-1][0]>E&&d[z-1][0]<180){F.push([180,d[z][1]]),z++,F.push([d[z][0],d[z][1]]);continue}if(J<M&&le>E){var ie=J;J=le,le=ie;var te=q;q=j,j=te}if(J>E&&le<M&&(le+=360),J<=180&&le>=180&&J<le){var ce=(180-J)/(le-J),xe=ce*j+(1-ce)*q;F.push([d[z-1][0]>E?180:-180,xe]),F=[],F.push([d[z-1][0]>E?-180:180,xe]),B.push(F)}else F=[],B.push(F);F.push([Y,d[z][1]])}else F.push([d[z][0],d[z][1]])}}else{var he=[];B.push(he);for(var Q=0;Q<d.length;++Q)he.push([d[Q][0],d[Q][1]])}for(var fe=new r(this.properties),Ae=0;Ae<B.length;++Ae){var me=new s;fe.geometries.push(me);for(var Se=B[Ae],Ie=0;Ie<Se.length;++Ie)me.move_to(Se[Ie])}return fe};function c(_,l,d){if(d=d||{},typeof d!="object")throw new Error("options is invalid");var f=d.properties,g=d.npoints,b=d.offset;_=n.getCoord(_),l=n.getCoord(l),f=f||{},g=g||100,b=b||10;var C=new o({x:_[0],y:_[1]},{x:l[0],y:l[1]},f),P=C.Arc(g,{offset:b});return P.json()}return js$P.exports=c,jsExports$j.default=c,jsExports$j}var jsExports$i={},js$O={get exports(){return jsExports$i},set exports(n){jsExports$i=n}},hasRequiredJs$P;function requireJs$P(){if(hasRequiredJs$P)return jsExports$i;hasRequiredJs$P=1;var n=requireGeojsonRbush(),e=requireJs$1l(),t=requireJs$1E(),i=requireJs$U(),s=requireJs$19(),r=requireJs$18(),o=requireJs$17(),c=requireJs$1D(),_=requireJs$1F(),l=requireJs$1G();function d(N){return N&&typeof N=="object"&&"default"in N?N:{default:N}}var f=d(n),g=d(e),b=d(t),C=d(i),P=d(s),S=d(r),L=d(o);function E(N,$){if(!N)throw new Error("line is required");if(!$)throw new Error("splitter is required");var B=c.getType(N),F=c.getType($);if(B!=="LineString")throw new Error("line must be LineString");if(F==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(F==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var z=C.default($,{precision:7});switch(F){case"Point":return D(N,z);case"MultiPoint":return M(N,z);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return M(N,S.default(N,z))}}function M(N,$){var B=[],F=f.default();return _.flattenEach($,function(z){if(B.forEach(function(q,le){q.id=le}),!B.length)B=D(N,z).features,B.forEach(function(q){q.bbox||(q.bbox=g.default(b.default(q)))}),F.load(l.featureCollection(B));else{var Y=F.search(z);if(Y.features.length){var J=R(z,Y);B=B.filter(function(q){return q.id!==J.id}),F.remove(J),_.featureEach(D(J,z),function(q){B.push(q),F.insert(q)})}}}),l.featureCollection(B)}function D(N,$){var B=[],F=c.getCoords(N)[0],z=c.getCoords(N)[N.geometry.coordinates.length-1];if(k(F,c.getCoord($))||k(z,c.getCoord($)))return l.featureCollection([N]);var Y=f.default(),J=P.default(N);Y.load(J);var q=Y.search($);if(!q.features.length)return l.featureCollection([N]);var le=R($,q),j=[F],ie=_.featureReduce(J,function(te,ce,xe){var he=c.getCoords(ce)[1],Q=c.getCoord($);return xe===le.id?(te.push(Q),B.push(l.lineString(te)),k(Q,he)?[Q]:[Q,he]):(te.push(he),te)},j);return ie.length>1&&B.push(l.lineString(ie)),l.featureCollection(B)}function R(N,$){if(!$.features.length)throw new Error("lines must contain features");if($.features.length===1)return $.features[0];var B,F=1/0;return _.featureEach($,function(z){var Y=L.default(z,N),J=Y.properties.dist;J<F&&(B=z,F=J)}),B}function k(N,$){return N[0]===$[0]&&N[1]===$[1]}return js$O.exports=E,jsExports$i.default=E,jsExports$i}var js$N={},hasRequiredJs$O;function requireJs$O(){if(hasRequiredJs$O)return js$N;hasRequiredJs$O=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(js$N,"__esModule",{value:!0});var e=n(requireJs$1j()),t=n(requireJs$1k()),i=requireJs$1G();function s(o,c,_,l,d){d===void 0&&(d={});var f=d.steps||64,g=r(_),b=r(l),C=!Array.isArray(o)&&o.type==="Feature"?o.properties:{};if(g===b)return i.lineString(e.default(o,c,d).geometry.coordinates[0],C);for(var P=g,S=g<b?b:b+360,L=P,E=[],M=0;L<S;)E.push(t.default(o,c,L,d).geometry.coordinates),M++,L=P+M*360/f;return L>S&&E.push(t.default(o,c,S,d).geometry.coordinates),i.lineString(E,C)}js$N.default=s;function r(o){var c=o%360;return c<0&&(c+=360),c}return js$N}var js$M={},hasRequiredJs$N;function requireJs$N(){if(hasRequiredJs$N)return js$M;hasRequiredJs$N=1,Object.defineProperty(js$M,"__esModule",{value:!0});var n=requireJs$1G(),e=requireJs$1D();function t(o,c){c===void 0&&(c={});var _=e.getGeom(o);switch(!c.properties&&o.type==="Feature"&&(c.properties=o.properties),_.type){case"Polygon":return i(_,c);case"MultiPolygon":return s(_,c);default:throw new Error("invalid poly")}}js$M.default=t;function i(o,c){c===void 0&&(c={});var _=e.getGeom(o),l=_.coordinates,d=c.properties?c.properties:o.type==="Feature"?o.properties:{};return r(l,d)}js$M.polygonToLine=i;function s(o,c){c===void 0&&(c={});var _=e.getGeom(o),l=_.coordinates,d=c.properties?c.properties:o.type==="Feature"?o.properties:{},f=[];return l.forEach(function(g){f.push(r(g,d))}),n.featureCollection(f)}js$M.multiPolygonToLine=s;function r(o,c){return o.length>1?n.multiLineString(o,c):n.lineString(o[0],c)}return js$M.coordsToLine=r,js$M}var js$L={},hasRequiredJs$M;function requireJs$M(){if(hasRequiredJs$M)return js$L;hasRequiredJs$M=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(js$L,"__esModule",{value:!0});var e=n(requireJs$1E()),t=requireJs$1D(),i=requireJs$1G(),s=n(requireJs$1w());function r(l,d){d===void 0&&(d={});var f,g,b,C=d.properties,P=(f=d.autoComplete)!==null&&f!==void 0?f:!0,S=(g=d.orderCoords)!==null&&g!==void 0?g:!0,L=(b=d.mutate)!==null&&b!==void 0?b:!1;switch(L||(l=s.default(l)),l.type){case"FeatureCollection":var E=[];return l.features.forEach(function(M){E.push(t.getCoords(o(M,{},P,S)))}),i.multiPolygon(E,C);default:return o(l,C,P,S)}}function o(l,d,f,g){d=d||(l.type==="Feature"?l.properties:{});var b=t.getGeom(l),C=b.coordinates,P=b.type;if(!C.length)throw new Error("line must contain coordinates");switch(P){case"LineString":return f&&(C=c(C)),i.polygon([C],d);case"MultiLineString":var S=[],L=0;return C.forEach(function(E){if(f&&(E=c(E)),g){var M=_(e.default(i.lineString(E)));M>L?(S.unshift(E),L=M):S.push(E)}else S.push(E)}),i.polygon(S,d);default:throw new Error("geometry type "+P+" is not supported")}}function c(l){var d=l[0],f=d[0],g=d[1],b=l[l.length-1],C=b[0],P=b[1];return(f!==C||g!==P)&&l.push(d),l}function _(l){var d=l[0],f=l[1],g=l[2],b=l[3];return Math.abs(d-g)*Math.abs(f-b)}return js$L.default=r,js$L}var js$K={},lineclip={},hasRequiredLineclip;function requireLineclip(){if(hasRequiredLineclip)return lineclip;hasRequiredLineclip=1,Object.defineProperty(lineclip,"__esModule",{value:!0});function n(s,r,o){var c=s.length,_=i(s[0],r),l=[],d,f,g,b,C;for(o||(o=[]),d=1;d<c;d++){for(b=s[d-1],C=s[d],f=g=i(C,r);;)if(_|f){if(_&f)break;_?(b=t(b,C,_,r),_=i(b,r)):(C=t(b,C,f,r),f=i(C,r))}else{l.push(b),f!==g?(l.push(C),d<c-1&&(o.push(l),l=[])):d===c-1&&l.push(C);break}_=g}return l.length&&o.push(l),o}lineclip.lineclip=n;function e(s,r){var o,c,_,l,d,f,g;for(c=1;c<=8;c*=2){for(o=[],_=s[s.length-1],l=!(i(_,r)&c),d=0;d<s.length;d++)f=s[d],g=!(i(f,r)&c),g!==l&&o.push(t(_,f,c,r)),g&&o.push(f),_=f,l=g;if(s=o,!s.length)break}return o}lineclip.polygonclip=e;function t(s,r,o,c){return o&8?[s[0]+(r[0]-s[0])*(c[3]-s[1])/(r[1]-s[1]),c[3]]:o&4?[s[0]+(r[0]-s[0])*(c[1]-s[1])/(r[1]-s[1]),c[1]]:o&2?[c[2],s[1]+(r[1]-s[1])*(c[2]-s[0])/(r[0]-s[0])]:o&1?[c[0],s[1]+(r[1]-s[1])*(c[0]-s[0])/(r[0]-s[0])]:null}function i(s,r){var o=0;return s[0]<r[0]?o|=1:s[0]>r[2]&&(o|=2),s[1]<r[1]?o|=4:s[1]>r[3]&&(o|=8),o}return lineclip}var hasRequiredJs$L;function requireJs$L(){if(hasRequiredJs$L)return js$K;hasRequiredJs$L=1,Object.defineProperty(js$K,"__esModule",{value:!0});var n=requireJs$1G(),e=requireJs$1D(),t=requireLineclip();function i(r,o){var c=e.getGeom(r),_=c.type,l=r.type==="Feature"?r.properties:{},d=c.coordinates;switch(_){case"LineString":case"MultiLineString":{var f=[];return _==="LineString"&&(d=[d]),d.forEach(function(g){t.lineclip(g,o,f)}),f.length===1?n.lineString(f[0],l):n.multiLineString(f,l)}case"Polygon":return n.polygon(s(d,o),l);case"MultiPolygon":return n.multiPolygon(d.map(function(g){return s(g,o)}),l);default:throw new Error("geometry "+_+" not supported")}}js$K.default=i;function s(r,o){for(var c=[],_=0,l=r;_<l.length;_++){var d=l[_],f=t.polygonclip(d,o);f.length>0&&((f[0][0]!==f[f.length-1][0]||f[0][1]!==f[f.length-1][1])&&f.push(f[0]),f.length>=4&&c.push(f))}return c}return js$K}var js$J={},isArguments$1,hasRequiredIsArguments$1;function requireIsArguments$1(){if(hasRequiredIsArguments$1)return isArguments$1;hasRequiredIsArguments$1=1;var n=Object.prototype.toString;return isArguments$1=function(t){var i=n.call(t),s=i==="[object Arguments]";return s||(s=i!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&n.call(t.callee)==="[object Function]"),s},isArguments$1}var implementation$3,hasRequiredImplementation$3;function requireImplementation$3(){if(hasRequiredImplementation$3)return implementation$3;hasRequiredImplementation$3=1;var n;if(!Object.keys){var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,i=requireIsArguments$1(),s=Object.prototype.propertyIsEnumerable,r=!s.call({toString:null},"toString"),o=s.call(function(){},"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],_=function(g){var b=g.constructor;return b&&b.prototype===g},l={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},d=function(){if(typeof window>"u")return!1;for(var g in window)try{if(!l["$"+g]&&e.call(window,g)&&window[g]!==null&&typeof window[g]=="object")try{_(window[g])}catch{return!0}}catch{return!0}return!1}(),f=function(g){if(typeof window>"u"||!d)return _(g);try{return _(g)}catch{return!1}};n=function(b){var C=b!==null&&typeof b=="object",P=t.call(b)==="[object Function]",S=i(b),L=C&&t.call(b)==="[object String]",E=[];if(!C&&!P&&!S)throw new TypeError("Object.keys called on a non-object");var M=o&&P;if(L&&b.length>0&&!e.call(b,0))for(var D=0;D<b.length;++D)E.push(String(D));if(S&&b.length>0)for(var R=0;R<b.length;++R)E.push(String(R));else for(var k in b)!(M&&k==="prototype")&&e.call(b,k)&&E.push(String(k));if(r)for(var N=f(b),$=0;$<c.length;++$)!(N&&c[$]==="constructor")&&e.call(b,c[$])&&E.push(c[$]);return E}}return implementation$3=n,implementation$3}var objectKeys,hasRequiredObjectKeys;function requireObjectKeys(){if(hasRequiredObjectKeys)return objectKeys;hasRequiredObjectKeys=1;var n=Array.prototype.slice,e=requireIsArguments$1(),t=Object.keys,i=t?function(o){return t(o)}:requireImplementation$3(),s=Object.keys;return i.shim=function(){if(Object.keys){var o=function(){var c=Object.keys(arguments);return c&&c.length===arguments.length}(1,2);o||(Object.keys=function(_){return e(_)?s(n.call(_)):s(_)})}else Object.keys=i;return Object.keys||i},objectKeys=i,objectKeys}var shams$1,hasRequiredShams$1;function requireShams$1(){return hasRequiredShams$1||(hasRequiredShams$1=1,shams$1=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),i=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var s=42;e[t]=s;for(t in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var r=Object.getOwnPropertySymbols(e);if(r.length!==1||r[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,t);if(o.value!==s||o.enumerable!==!0)return!1}return!0}),shams$1}var shams,hasRequiredShams;function requireShams(){if(hasRequiredShams)return shams;hasRequiredShams=1;var n=requireShams$1();return shams=function(){return n()&&!!Symbol.toStringTag},shams}var hasSymbols,hasRequiredHasSymbols;function requireHasSymbols(){if(hasRequiredHasSymbols)return hasSymbols;hasRequiredHasSymbols=1;var n=typeof Symbol<"u"&&Symbol,e=requireShams$1();return hasSymbols=function(){return typeof n!="function"||typeof Symbol!="function"||typeof n("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},hasSymbols}var hasProto,hasRequiredHasProto;function requireHasProto(){if(hasRequiredHasProto)return hasProto;hasRequiredHasProto=1;var n={foo:{}},e=Object;return hasProto=function(){return{__proto__:n}.foo===n.foo&&!({__proto__:null}instanceof e)},hasProto}var implementation$2,hasRequiredImplementation$2;function requireImplementation$2(){if(hasRequiredImplementation$2)return implementation$2;hasRequiredImplementation$2=1;var n="Function.prototype.bind called on incompatible ",e=Array.prototype.slice,t=Object.prototype.toString,i="[object Function]";return implementation$2=function(r){var o=this;if(typeof o!="function"||t.call(o)!==i)throw new TypeError(n+o);for(var c=e.call(arguments,1),_,l=function(){if(this instanceof _){var C=o.apply(this,c.concat(e.call(arguments)));return Object(C)===C?C:this}else return o.apply(r,c.concat(e.call(arguments)))},d=Math.max(0,o.length-c.length),f=[],g=0;g<d;g++)f.push("$"+g);if(_=Function("binder","return function ("+f.join(",")+"){ return binder.apply(this,arguments); }")(l),o.prototype){var b=function(){};b.prototype=o.prototype,_.prototype=new b,b.prototype=null}return _},implementation$2}var functionBind,hasRequiredFunctionBind;function requireFunctionBind(){if(hasRequiredFunctionBind)return functionBind;hasRequiredFunctionBind=1;var n=requireImplementation$2();return functionBind=Function.prototype.bind||n,functionBind}var src,hasRequiredSrc;function requireSrc(){if(hasRequiredSrc)return src;hasRequiredSrc=1;var n=requireFunctionBind();return src=n.call(Function.call,Object.prototype.hasOwnProperty),src}var getIntrinsic,hasRequiredGetIntrinsic;function requireGetIntrinsic(){if(hasRequiredGetIntrinsic)return getIntrinsic;hasRequiredGetIntrinsic=1;var n,e=SyntaxError,t=Function,i=TypeError,s=function(Y){try{return t('"use strict"; return ('+Y+").constructor;")()}catch{}},r=Object.getOwnPropertyDescriptor;if(r)try{r({},"")}catch{r=null}var o=function(){throw new i},c=r?function(){try{return arguments.callee,o}catch{try{return r(arguments,"callee").get}catch{return o}}}():o,_=requireHasSymbols()(),l=requireHasProto()(),d=Object.getPrototypeOf||(l?function(Y){return Y.__proto__}:null),f={},g=typeof Uint8Array>"u"||!d?n:d(Uint8Array),b={"%AggregateError%":typeof AggregateError>"u"?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?n:ArrayBuffer,"%ArrayIteratorPrototype%":_&&d?d([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":f,"%AsyncGenerator%":f,"%AsyncGeneratorFunction%":f,"%AsyncIteratorPrototype%":f,"%Atomics%":typeof Atomics>"u"?n:Atomics,"%BigInt%":typeof BigInt>"u"?n:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?n:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?n:Float32Array,"%Float64Array%":typeof Float64Array>"u"?n:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?n:FinalizationRegistry,"%Function%":t,"%GeneratorFunction%":f,"%Int8Array%":typeof Int8Array>"u"?n:Int8Array,"%Int16Array%":typeof Int16Array>"u"?n:Int16Array,"%Int32Array%":typeof Int32Array>"u"?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":_&&d?d(d([][Symbol.iterator]())):n,"%JSON%":typeof JSON=="object"?JSON:n,"%Map%":typeof Map>"u"?n:Map,"%MapIteratorPrototype%":typeof Map>"u"||!_||!d?n:d(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?n:Promise,"%Proxy%":typeof Proxy>"u"?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?n:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?n:Set,"%SetIteratorPrototype%":typeof Set>"u"||!_||!d?n:d(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":_&&d?d(""[Symbol.iterator]()):n,"%Symbol%":_?Symbol:n,"%SyntaxError%":e,"%ThrowTypeError%":c,"%TypedArray%":g,"%TypeError%":i,"%Uint8Array%":typeof Uint8Array>"u"?n:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?n:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?n:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?n:WeakMap,"%WeakRef%":typeof WeakRef>"u"?n:WeakRef,"%WeakSet%":typeof WeakSet>"u"?n:WeakSet};if(d)try{null.error}catch(Y){var C=d(d(Y));b["%Error.prototype%"]=C}var P=function Y(J){var q;if(J==="%AsyncFunction%")q=s("async function () {}");else if(J==="%GeneratorFunction%")q=s("function* () {}");else if(J==="%AsyncGeneratorFunction%")q=s("async function* () {}");else if(J==="%AsyncGenerator%"){var le=Y("%AsyncGeneratorFunction%");le&&(q=le.prototype)}else if(J==="%AsyncIteratorPrototype%"){var j=Y("%AsyncGenerator%");j&&d&&(q=d(j.prototype))}return b[J]=q,q},S={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},L=requireFunctionBind(),E=requireSrc(),M=L.call(Function.call,Array.prototype.concat),D=L.call(Function.apply,Array.prototype.splice),R=L.call(Function.call,String.prototype.replace),k=L.call(Function.call,String.prototype.slice),N=L.call(Function.call,RegExp.prototype.exec),$=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,B=/\\(\\)?/g,F=function(J){var q=k(J,0,1),le=k(J,-1);if(q==="%"&&le!=="%")throw new e("invalid intrinsic syntax, expected closing `%`");if(le==="%"&&q!=="%")throw new e("invalid intrinsic syntax, expected opening `%`");var j=[];return R(J,$,function(ie,te,ce,xe){j[j.length]=ce?R(xe,B,"$1"):te||ie}),j},z=function(J,q){var le=J,j;if(E(S,le)&&(j=S[le],le="%"+j[0]+"%"),E(b,le)){var ie=b[le];if(ie===f&&(ie=P(le)),typeof ie>"u"&&!q)throw new i("intrinsic "+J+" exists, but is not available. Please file an issue!");return{alias:j,name:le,value:ie}}throw new e("intrinsic "+J+" does not exist!")};return getIntrinsic=function(J,q){if(typeof J!="string"||J.length===0)throw new i("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof q!="boolean")throw new i('"allowMissing" argument must be a boolean');if(N(/^%?[^%]*%?$/,J)===null)throw new e("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var le=F(J),j=le.length>0?le[0]:"",ie=z("%"+j+"%",q),te=ie.name,ce=ie.value,xe=!1,he=ie.alias;he&&(j=he[0],D(le,M([0,1],he)));for(var Q=1,fe=!0;Q<le.length;Q+=1){var Ae=le[Q],me=k(Ae,0,1),Se=k(Ae,-1);if((me==='"'||me==="'"||me==="`"||Se==='"'||Se==="'"||Se==="`")&&me!==Se)throw new e("property names with quotes must have matching quotes");if((Ae==="constructor"||!fe)&&(xe=!0),j+="."+Ae,te="%"+j+"%",E(b,te))ce=b[te];else if(ce!=null){if(!(Ae in ce)){if(!q)throw new i("base intrinsic for "+J+" exists, but the property is not available.");return}if(r&&Q+1>=le.length){var Ie=r(ce,Ae);fe=!!Ie,fe&&"get"in Ie&&!("originalValue"in Ie.get)?ce=Ie.get:ce=ce[Ae]}else fe=E(ce,Ae),ce=ce[Ae];fe&&!xe&&(b[te]=ce)}}return ce},getIntrinsic}var callBindExports={},callBind={get exports(){return callBindExports},set exports(n){callBindExports=n}},hasRequiredCallBind;function requireCallBind(){return hasRequiredCallBind||(hasRequiredCallBind=1,function(n){var e=requireFunctionBind(),t=requireGetIntrinsic(),i=t("%Function.prototype.apply%"),s=t("%Function.prototype.call%"),r=t("%Reflect.apply%",!0)||e.call(s,i),o=t("%Object.getOwnPropertyDescriptor%",!0),c=t("%Object.defineProperty%",!0),_=t("%Math.max%");if(c)try{c({},"a",{value:1})}catch{c=null}n.exports=function(f){var g=r(e,s,arguments);if(o&&c){var b=o(g,"length");b.configurable&&c(g,"length",{value:1+_(0,f.length-(arguments.length-1))})}return g};var l=function(){return r(e,i,arguments)};c?c(n.exports,"apply",{value:l}):n.exports.apply=l}(callBind)),callBindExports}var callBound,hasRequiredCallBound;function requireCallBound(){if(hasRequiredCallBound)return callBound;hasRequiredCallBound=1;var n=requireGetIntrinsic(),e=requireCallBind(),t=e(n("String.prototype.indexOf"));return callBound=function(s,r){var o=n(s,!!r);return typeof o=="function"&&t(s,".prototype.")>-1?e(o):o},callBound}var isArguments,hasRequiredIsArguments;function requireIsArguments(){if(hasRequiredIsArguments)return isArguments;hasRequiredIsArguments=1;var n=requireShams()(),e=requireCallBound(),t=e("Object.prototype.toString"),i=function(c){return n&&c&&typeof c=="object"&&Symbol.toStringTag in c?!1:t(c)==="[object Arguments]"},s=function(c){return i(c)?!0:c!==null&&typeof c=="object"&&typeof c.length=="number"&&c.length>=0&&t(c)!=="[object Array]"&&t(c.callee)==="[object Function]"},r=function(){return i(arguments)}();return i.isLegacyArguments=s,isArguments=r?i:s,isArguments}var hasPropertyDescriptors_1,hasRequiredHasPropertyDescriptors;function requireHasPropertyDescriptors(){if(hasRequiredHasPropertyDescriptors)return hasPropertyDescriptors_1;hasRequiredHasPropertyDescriptors=1;var n=requireGetIntrinsic(),e=n("%Object.defineProperty%",!0),t=function(){if(e)try{return e({},"a",{value:1}),!0}catch{return!1}return!1};return t.hasArrayLengthDefineBug=function(){if(!t())return null;try{return e([],"length",{value:1}).length!==1}catch{return!0}},hasPropertyDescriptors_1=t,hasPropertyDescriptors_1}var defineProperties_1,hasRequiredDefineProperties;function requireDefineProperties(){if(hasRequiredDefineProperties)return defineProperties_1;hasRequiredDefineProperties=1;var n=requireObjectKeys(),e=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",t=Object.prototype.toString,i=Array.prototype.concat,s=Object.defineProperty,r=function(d){return typeof d=="function"&&t.call(d)==="[object Function]"},o=requireHasPropertyDescriptors()(),c=s&&o,_=function(d,f,g,b){if(f in d){if(b===!0){if(d[f]===g)return}else if(!r(b)||!b())return}c?s(d,f,{configurable:!0,enumerable:!1,value:g,writable:!0}):d[f]=g},l=function(d,f){var g=arguments.length>2?arguments[2]:{},b=n(f);e&&(b=i.call(b,Object.getOwnPropertySymbols(f)));for(var C=0;C<b.length;C+=1)_(d,b[C],f[b[C]],g[b[C]])};return l.supportsDescriptors=!!c,defineProperties_1=l,defineProperties_1}var implementation$1,hasRequiredImplementation$1;function requireImplementation$1(){if(hasRequiredImplementation$1)return implementation$1;hasRequiredImplementation$1=1;var n=function(e){return e!==e};return implementation$1=function(t,i){return t===0&&i===0?1/t===1/i:!!(t===i||n(t)&&n(i))},implementation$1}var polyfill$1,hasRequiredPolyfill$1;function requirePolyfill$1(){if(hasRequiredPolyfill$1)return polyfill$1;hasRequiredPolyfill$1=1;var n=requireImplementation$1();return polyfill$1=function(){return typeof Object.is=="function"?Object.is:n},polyfill$1}var shim$1,hasRequiredShim$1;function requireShim$1(){if(hasRequiredShim$1)return shim$1;hasRequiredShim$1=1;var n=requirePolyfill$1(),e=requireDefineProperties();return shim$1=function(){var i=n();return e(Object,{is:i},{is:function(){return Object.is!==i}}),i},shim$1}var objectIs,hasRequiredObjectIs;function requireObjectIs(){if(hasRequiredObjectIs)return objectIs;hasRequiredObjectIs=1;var n=requireDefineProperties(),e=requireCallBind(),t=requireImplementation$1(),i=requirePolyfill$1(),s=requireShim$1(),r=e(i(),Object);return n(r,{getPolyfill:i,implementation:t,shim:s}),objectIs=r,objectIs}var isRegex,hasRequiredIsRegex;function requireIsRegex(){if(hasRequiredIsRegex)return isRegex;hasRequiredIsRegex=1;var n=requireCallBound(),e=requireShams()(),t,i,s,r;if(e){t=n("Object.prototype.hasOwnProperty"),i=n("RegExp.prototype.exec"),s={};var o=function(){throw s};r={toString:o,valueOf:o},typeof Symbol.toPrimitive=="symbol"&&(r[Symbol.toPrimitive]=o)}var c=n("Object.prototype.toString"),_=Object.getOwnPropertyDescriptor,l="[object RegExp]";return isRegex=e?function(f){if(!f||typeof f!="object")return!1;var g=_(f,"lastIndex"),b=g&&t(g,"value");if(!b)return!1;try{i(f,r)}catch(C){return C===s}}:function(f){return!f||typeof f!="object"&&typeof f!="function"?!1:c(f)===l},isRegex}var implementationExports={},implementation={get exports(){return implementationExports},set exports(n){implementationExports=n}},functionsHaveNames_1,hasRequiredFunctionsHaveNames;function requireFunctionsHaveNames(){if(hasRequiredFunctionsHaveNames)return functionsHaveNames_1;hasRequiredFunctionsHaveNames=1;var n=function(){return typeof function(){}.name=="string"},e=Object.getOwnPropertyDescriptor;if(e)try{e([],"length")}catch{e=null}n.functionsHaveConfigurableNames=function(){if(!n()||!e)return!1;var s=e(function(){},"name");return!!s&&!!s.configurable};var t=Function.prototype.bind;return n.boundFunctionsHaveNames=function(){return n()&&typeof t=="function"&&function(){}.bind().name!==""},functionsHaveNames_1=n,functionsHaveNames_1}var hasRequiredImplementation;function requireImplementation(){return hasRequiredImplementation||(hasRequiredImplementation=1,function(n){var e=requireFunctionsHaveNames().functionsHaveConfigurableNames(),t=Object,i=TypeError;n.exports=function(){if(this!=null&&this!==t(this))throw new i("RegExp.prototype.flags getter called on non-object");var r="";return this.hasIndices&&(r+="d"),this.global&&(r+="g"),this.ignoreCase&&(r+="i"),this.multiline&&(r+="m"),this.dotAll&&(r+="s"),this.unicode&&(r+="u"),this.unicodeSets&&(r+="v"),this.sticky&&(r+="y"),r},e&&Object.defineProperty&&Object.defineProperty(n.exports,"name",{value:"get flags"})}(implementation)),implementationExports}var polyfill,hasRequiredPolyfill;function requirePolyfill(){if(hasRequiredPolyfill)return polyfill;hasRequiredPolyfill=1;var n=requireImplementation(),e=requireDefineProperties().supportsDescriptors,t=Object.getOwnPropertyDescriptor;return polyfill=function(){if(e&&/a/mig.flags==="gim"){var s=t(RegExp.prototype,"flags");if(s&&typeof s.get=="function"&&typeof RegExp.prototype.dotAll=="boolean"&&typeof RegExp.prototype.hasIndices=="boolean"){var r="",o={};if(Object.defineProperty(o,"hasIndices",{get:function(){r+="d"}}),Object.defineProperty(o,"sticky",{get:function(){r+="y"}}),r==="dy")return s.get}}return n},polyfill}var shim,hasRequiredShim;function requireShim(){if(hasRequiredShim)return shim;hasRequiredShim=1;var n=requireDefineProperties().supportsDescriptors,e=requirePolyfill(),t=Object.getOwnPropertyDescriptor,i=Object.defineProperty,s=TypeError,r=Object.getPrototypeOf,o=/a/;return shim=function(){if(!n||!r)throw new s("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var _=e(),l=r(o),d=t(l,"flags");return(!d||d.get!==_)&&i(l,"flags",{configurable:!0,enumerable:!1,get:_}),_},shim}var regexp_prototype_flags,hasRequiredRegexp_prototype_flags;function requireRegexp_prototype_flags(){if(hasRequiredRegexp_prototype_flags)return regexp_prototype_flags;hasRequiredRegexp_prototype_flags=1;var n=requireDefineProperties(),e=requireCallBind(),t=requireImplementation(),i=requirePolyfill(),s=requireShim(),r=e(i());return n(r,{getPolyfill:i,implementation:t,shim:s}),regexp_prototype_flags=r,regexp_prototype_flags}var isDateObject,hasRequiredIsDateObject;function requireIsDateObject(){if(hasRequiredIsDateObject)return isDateObject;hasRequiredIsDateObject=1;var n=Date.prototype.getDay,e=function(o){try{return n.call(o),!0}catch{return!1}},t=Object.prototype.toString,i="[object Date]",s=requireShams()();return isDateObject=function(o){return typeof o!="object"||o===null?!1:s?e(o):t.call(o)===i},isDateObject}var deepEqual_1,hasRequiredDeepEqual;function requireDeepEqual(){if(hasRequiredDeepEqual)return deepEqual_1;hasRequiredDeepEqual=1;var n=requireObjectKeys(),e=requireIsArguments(),t=requireObjectIs(),i=requireIsRegex(),s=requireRegexp_prototype_flags(),r=requireIsDateObject(),o=Date.prototype.getTime;function c(f,g,b){var C=b||{};return(C.strict?t(f,g):f===g)?!0:!f||!g||typeof f!="object"&&typeof g!="object"?C.strict?t(f,g):f==g:d(f,g,C)}function _(f){return f==null}function l(f){return!(!f||typeof f!="object"||typeof f.length!="number"||typeof f.copy!="function"||typeof f.slice!="function"||f.length>0&&typeof f[0]!="number")}function d(f,g,b){var C,P;if(typeof f!=typeof g||_(f)||_(g)||f.prototype!==g.prototype||e(f)!==e(g))return!1;var S=i(f),L=i(g);if(S!==L)return!1;if(S||L)return f.source===g.source&&s(f)===s(g);if(r(f)&&r(g))return o.call(f)===o.call(g);var E=l(f),M=l(g);if(E!==M)return!1;if(E||M){if(f.length!==g.length)return!1;for(C=0;C<f.length;C++)if(f[C]!==g[C])return!1;return!0}if(typeof f!=typeof g)return!1;try{var D=n(f),R=n(g)}catch{return!1}if(D.length!==R.length)return!1;for(D.sort(),R.sort(),C=D.length-1;C>=0;C--)if(D[C]!=R[C])return!1;for(C=D.length-1;C>=0;C--)if(P=D[C],!c(f[P],g[P],b))return!1;return!0}return deepEqual_1=c,deepEqual_1}var hasRequiredJs$K;function requireJs$K(){if(hasRequiredJs$K)return js$J;hasRequiredJs$K=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(js$J,"__esModule",{value:!0});var e=n(requireGeojsonRbush()),t=n(requireJs$19()),i=n(requireJs$17()),s=n(requireJs$X()),r=requireJs$1D(),o=requireJs$1F(),c=requireJs$1G(),_=n(requireDeepEqual());function l(f,g,b){if(b===void 0&&(b={}),b=b||{},!c.isObject(b))throw new Error("options is invalid");var C=b.tolerance||0,P=[],S=e.default(),L=t.default(f);S.load(L);var E;return o.segmentEach(g,function(M){var D=!1;M&&(o.featureEach(S.search(M),function(R){if(D===!1){var k=r.getCoords(M).sort(),N=r.getCoords(R).sort();_.default(k,N)||(C===0?s.default(k[0],R)&&s.default(k[1],R):i.default(R,k[0]).properties.dist<=C&&i.default(R,k[1]).properties.dist<=C)?(D=!0,E?E=d(E,M):E=M):(C===0?s.default(N[0],M)&&s.default(N[1],M):i.default(M,N[0]).properties.dist<=C&&i.default(M,N[1]).properties.dist<=C)&&(E?E=d(E,R):E=R)}}),D===!1&&E&&(P.push(E),E=void 0))}),E&&P.push(E),c.featureCollection(P)}function d(f,g){var b=r.getCoords(g),C=r.getCoords(f),P=C[0],S=C[C.length-1],L=f.geometry.coordinates;return _.default(b[0],P)?L.unshift(b[1]):_.default(b[0],S)?L.push(b[1]):_.default(b[1],P)?L.unshift(b[0]):_.default(b[1],S)&&L.push(b[0]),f}return js$J.default=l,js$J}var jsExports$h={},js$I={get exports(){return jsExports$h},set exports(n){jsExports$h=n}},hasRequiredJs$J;function requireJs$J(){if(hasRequiredJs$J)return jsExports$h;hasRequiredJs$J=1;var n=requireJs$1j(),e=requireJs$O(),t=requireJs$1F(),i=requireJs$1G(),s=requireJs$1D();function r(d){return d&&typeof d=="object"&&"default"in d?d:{default:d}}var o=r(n),c=r(e);function _(d,f,g,b,C){if(C=C||{},!i.isObject(C))throw new Error("options is invalid");var P=C.properties;if(!d)throw new Error("center is required");if(g==null)throw new Error("bearing1 is required");if(b==null)throw new Error("bearing2 is required");if(!f)throw new Error("radius is required");if(typeof C!="object")throw new Error("options must be an object");if(l(g)===l(b))return o.default(d,f,C);var S=s.getCoords(d),L=c.default(d,f,g,b,C),E=[[S]];return t.coordEach(L,function(M){E[0].push(M)}),E[0].push(S),i.polygon(E,P)}function l(d){var f=d%360;return f<0&&(f+=360),f}return js$I.exports=_,jsExports$h.default=_,jsExports$h}var js$H={},hasRequiredJs$I;function requireJs$I(){if(hasRequiredJs$I)return js$H;hasRequiredJs$I=1,Object.defineProperty(js$H,"__esModule",{value:!0});var n=requireJs$1G(),e=requireJs$1D();function t(s,r,o){o===void 0&&(o={});var c;o.final?c=i(e.getCoord(r),e.getCoord(s)):c=i(e.getCoord(s),e.getCoord(r));var _=c>180?-(360-c):c;return _}function i(s,r){var o=n.degreesToRadians(s[1]),c=n.degreesToRadians(r[1]),_=n.degreesToRadians(r[0]-s[0]);_>Math.PI&&(_-=2*Math.PI),_<-Math.PI&&(_+=2*Math.PI);var l=Math.log(Math.tan(c/2+Math.PI/4)/Math.tan(o/2+Math.PI/4)),d=Math.atan2(_,l);return(n.radiansToDegrees(d)+360)%360}return js$H.default=t,js$H}var js$G={},hasRequiredJs$H;function requireJs$H(){if(hasRequiredJs$H)return js$G;hasRequiredJs$H=1,Object.defineProperty(js$G,"__esModule",{value:!0});var n=requireJs$1G(),e=requireJs$1D();function t(s,r,o,c){c===void 0&&(c={});var _=r<0,l=n.convertLength(Math.abs(r),c.units,"meters");_&&(l=-Math.abs(l));var d=e.getCoord(s),f=i(d,l,o);return f[0]+=f[0]-d[0]>180?-360:d[0]-f[0]>180?360:0,n.point(f,c.properties)}function i(s,r,o,c){c=c===void 0?n.earthRadius:Number(c);var _=r/c,l=s[0]*Math.PI/180,d=n.degreesToRadians(s[1]),f=n.degreesToRadians(o),g=_*Math.cos(f),b=d+g;Math.abs(b)>Math.PI/2&&(b=b>0?Math.PI-b:-Math.PI-b);var C=Math.log(Math.tan(b/2+Math.PI/4)/Math.tan(d/2+Math.PI/4)),P=Math.abs(C)>1e-11?g/C:Math.cos(d),S=_*Math.sin(f)/P,L=l+S;return[(L*180/Math.PI+540)%360-180,b*180/Math.PI]}return js$G.default=t,js$G}var jsExports$g={},js$F={get exports(){return jsExports$g},set exports(n){jsExports$g=n}},hasRequiredJs$G;function requireJs$G(){if(hasRequiredJs$G)return jsExports$g;hasRequiredJs$G=1;var n=requireJs$1D(),e=requireJs$1G(),t=requireJs$1E(),i=requireJs$1c(),s=requireJs$1a();function r(C){return C&&typeof C=="object"&&"default"in C?C:{default:C}}var o=r(t),c=r(i),_=r(s);function l(C,P){var S=n.getCoords(C),L=n.getCoords(P),E,M,D,R,k=o.default(P),N=0,$=null;S[0]>k[0]&&S[0]<k[2]&&S[1]>k[1]&&S[1]<k[3]&&($=_.default(C,c.default(P)),N=$.properties.featureIndex);var B=n.getType(P);switch(B){case"Polygon":E=L[0][N],M=L[0][0],$!==null&&$.geometry.coordinates[1]<S[1]&&(M=L[0][N]),R=b(L[0][0],L[0][L[0].length-1],S);var F=d(L[0],S,R,D,E,M);E=F[0],M=F[1];break;case"MultiPolygon":for(var z=0,Y=0,J=0,q=0;q<L[0].length;q++){z=q;for(var le=!1,j=0;j<L[0][q].length;j++){if(Y=j,J===N){le=!0;break}J++}if(le)break}E=L[0][z][Y],M=L[0][z][Y],R=b(L[0][0][0],L[0][0][L[0][0].length-1],S),L.forEach(function(ie){var te=d(ie[0],S,R,D,E,M);E=te[0],M=te[1]});break}return e.featureCollection([e.point(E),e.point(M)])}function d(C,P,S,L,E,M){for(var D=0;D<C.length;D++){var R=C[D],k=C[D+1];D===C.length-1&&(k=C[0]),L=b(R,k,P),S<=0&&L>0?g(P,R,E)||(E=R):S>0&&L<=0&&(f(P,R,M)||(M=R)),S=L}return[E,M]}function f(C,P,S){return b(C,P,S)>0}function g(C,P,S){return b(C,P,S)<0}function b(C,P,S){return(P[0]-C[0])*(S[1]-C[1])-(S[0]-C[0])*(P[1]-C[1])}return js$F.exports=l,jsExports$g.default=l,jsExports$g}var jsExports$f={},js$E={get exports(){return jsExports$f},set exports(n){jsExports$f=n}},js$D={},hasRequiredJs$F;function requireJs$F(){if(hasRequiredJs$F)return js$D;hasRequiredJs$F=1,Object.defineProperty(js$D,"__esModule",{value:!0});var n=requireJs$1D();function e(t){for(var i=n.getCoords(t),s=0,r=1,o,c;r<i.length;)o=c||i[0],c=i[r],s+=(c[0]-o[0])*(c[1]+o[1]),r++;return s>0}return js$D.default=e,js$D}var hasRequiredJs$E;function requireJs$E(){if(hasRequiredJs$E)return jsExports$f;hasRequiredJs$E=1;var n=requireJs$1w(),e=requireJs$F(),t=requireJs$1F(),i=requireJs$1D(),s=requireJs$1G();function r(g){return g&&typeof g=="object"&&"default"in g?g:{default:g}}var o=r(n),c=r(e);function _(g,b){if(b=b||{},!s.isObject(b))throw new Error("options is invalid");var C=b.reverse||!1,P=b.mutate||!1;if(!g)throw new Error("<geojson> is required");if(typeof C!="boolean")throw new Error("<reverse> must be a boolean");if(typeof P!="boolean")throw new Error("<mutate> must be a boolean");P===!1&&(g=o.default(g));var S=[];switch(g.type){case"GeometryCollection":return t.geomEach(g,function(L){l(L,C)}),g;case"FeatureCollection":return t.featureEach(g,function(L){t.featureEach(l(L,C),function(E){S.push(E)})}),s.featureCollection(S)}return l(g,C)}function l(g,b){var C=g.type==="Feature"?g.geometry.type:g.type;switch(C){case"GeometryCollection":return t.geomEach(g,function(P){l(P,b)}),g;case"LineString":return d(i.getCoords(g),b),g;case"Polygon":return f(i.getCoords(g),b),g;case"MultiLineString":return i.getCoords(g).forEach(function(P){d(P,b)}),g;case"MultiPolygon":return i.getCoords(g).forEach(function(P){f(P,b)}),g;case"Point":case"MultiPoint":return g}}function d(g,b){c.default(g)===b&&g.reverse()}function f(g,b){c.default(g[0])!==b&&g[0].reverse();for(var C=1;C<g.length;C++)c.default(g[C])===b&&g[C].reverse()}return js$E.exports=_,jsExports$f.default=_,jsExports$f}var jsExports$e={},js$C={get exports(){return jsExports$e},set exports(n){jsExports$e=n}},hasRequiredJs$D;function requireJs$D(){if(hasRequiredJs$D)return jsExports$e;hasRequiredJs$D=1;var n=requireJs$1E(),e=requireJs$10(),t=requireJs$1A(),i=requireJs$1c(),s=requireJs$1D(),r=requireJs$1G(),o=requireObjectAssign(),c=requireJs$1F();function _(se){return se&&typeof se=="object"&&"default"in se?se:{default:se}}var l=_(n),d=_(e),f=_(t),g=_(i),b=_(o);function C(se,ue){if(ue=ue||{},!r.isObject(ue))throw new Error("options is invalid");var je=ue.zProperty||"elevation",Qe=ue.flip,et=ue.flags;s.collectionOf(se,"Point","input must contain Points");for(var Ye=P(se,Qe),be=[],st=0;st<Ye.length;st++){for(var Ge=Ye[st],re=[],Ee=0;Ee<Ge.length;Ee++){var Ce=Ge[Ee];Ce.properties[je]?re.push(Ce.properties[je]):re.push(0),et===!0&&(Ce.properties.matrixPosition=[st,Ee])}be.push(re)}return be}function P(se,ue){var je={};c.featureEach(se,function(Ye){var be=s.getCoords(Ye)[1];je[be]||(je[be]=[]),je[be].push(Ye)});var Qe=Object.keys(je).map(function(Ye){var be=je[Ye],st=be.sort(function(Ge,re){return s.getCoords(Ge)[0]-s.getCoords(re)[0]});return st}),et=Qe.sort(function(Ye,be){return ue?s.getCoords(Ye[0])[1]-s.getCoords(be[0])[1]:s.getCoords(be[0])[1]-s.getCoords(Ye[0])[1]});return et}/*!
 * @license GNU Affero General Public License.
 * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
 * v. 1.2.0
 * https://github.com/RaumZeit/MarchingSquares.js
 *
 * MarchingSquaresJS is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * MarchingSquaresJS is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * As additional permission under GNU Affero General Public License version 3
 * section 7, third-party projects (personal or commercial) may distribute,
 * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
 * requirement that said third-party project for that reason alone becomes
 * subject to any requirement of the GNU Affero General Public License version 3.
 * Any modifications to MarchingSquaresJS, however, must be shared with the public
 * and made available.
 *
 * In summary this:
 * - allows you to use MarchingSquaresJS at no cost
 * - allows you to use MarchingSquaresJS for both personal and commercial purposes
 * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
 *   license as long as this license notice is included
 * - enables you to keep the source code of your program that uses MarchingSquaresJS
 *   undisclosed
 * - forces you to share any modifications you have made to MarchingSquaresJS,
 *   e.g. bug-fixes
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
 */var S={successCallback:null,verbose:!1,polygons:!1},L={};function E(se,ue,je,Qe){Qe=Qe||{};for(var et=Object.keys(S),Ye=0;Ye<et.length;Ye++){var be=et[Ye],st=Qe[be];st=typeof st<"u"&&st!==null?st:S[be],L[be]=st}L.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+ue+":"+(ue+je)+"]");var Ge=ri(se,ue,je),re;return L.polygons?(L.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),re=Ut(Ge)):(L.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),re=h0(Ge)),typeof L.successCallback=="function"&&L.successCallback(re),re}var M=64,D=16,R=4,k=1,N=[],$=[],B=[],F=[],z=[],Y=[],J=[],q=[],le=[],j=[],ie=[],te=[],ce=[],xe=[],he=[],Q=[],fe=[],Ae=[],me=[],Se=[],Ie=[],pe=[],Te=[],ye=[];J[85]=j[85]=-1,q[85]=ie[85]=0,le[85]=te[85]=1,me[85]=pe[85]=1,Se[85]=Te[85]=0,Ie[85]=ye[85]=1,N[85]=F[85]=0,$[85]=z[85]=-1,B[85]=he[85]=0,Q[85]=ce[85]=0,fe[85]=xe[85]=1,Y[85]=Ae[85]=1,pe[1]=pe[169]=0,Te[1]=Te[169]=-1,ye[1]=ye[169]=0,ce[1]=ce[169]=-1,xe[1]=xe[169]=0,he[1]=he[169]=0,j[4]=j[166]=0,ie[4]=ie[166]=-1,te[4]=te[166]=1,Q[4]=Q[166]=1,fe[4]=fe[166]=0,Ae[4]=Ae[166]=0,J[16]=J[154]=0,q[16]=q[154]=1,le[16]=le[154]=1,F[16]=F[154]=1,z[16]=z[154]=0,Y[16]=Y[154]=1,me[64]=me[106]=0,Se[64]=Se[106]=1,Ie[64]=Ie[106]=0,N[64]=N[106]=-1,$[64]=$[106]=0,B[64]=B[106]=1,me[2]=me[168]=0,Se[2]=Se[168]=-1,Ie[2]=Ie[168]=1,pe[2]=pe[168]=0,Te[2]=Te[168]=-1,ye[2]=ye[168]=0,ce[2]=ce[168]=-1,xe[2]=xe[168]=0,he[2]=he[168]=0,Q[2]=Q[168]=-1,fe[2]=fe[168]=0,Ae[2]=Ae[168]=1,J[8]=J[162]=0,q[8]=q[162]=-1,le[8]=le[162]=0,j[8]=j[162]=0,ie[8]=ie[162]=-1,te[8]=te[162]=1,ce[8]=ce[162]=1,xe[8]=xe[162]=0,he[8]=he[162]=1,Q[8]=Q[162]=1,fe[8]=fe[162]=0,Ae[8]=Ae[162]=0,J[32]=J[138]=0,q[32]=q[138]=1,le[32]=le[138]=1,j[32]=j[138]=0,ie[32]=ie[138]=1,te[32]=te[138]=0,N[32]=N[138]=1,$[32]=$[138]=0,B[32]=B[138]=0,F[32]=F[138]=1,z[32]=z[138]=0,Y[32]=Y[138]=1,pe[128]=pe[42]=0,Te[128]=Te[42]=1,ye[128]=ye[42]=1,me[128]=me[42]=0,Se[128]=Se[42]=1,Ie[128]=Ie[42]=0,N[128]=N[42]=-1,$[128]=$[42]=0,B[128]=B[42]=1,F[128]=F[42]=-1,z[128]=z[42]=0,Y[128]=Y[42]=0,j[5]=j[165]=-1,ie[5]=ie[165]=0,te[5]=te[165]=0,pe[5]=pe[165]=1,Te[5]=Te[165]=0,ye[5]=ye[165]=0,Q[20]=Q[150]=0,fe[20]=fe[150]=1,Ae[20]=Ae[150]=1,F[20]=F[150]=0,z[20]=z[150]=-1,Y[20]=Y[150]=1,J[80]=J[90]=-1,q[80]=q[90]=0,le[80]=le[90]=1,me[80]=me[90]=1,Se[80]=Se[90]=0,Ie[80]=Ie[90]=1,ce[65]=ce[105]=0,xe[65]=xe[105]=1,he[65]=he[105]=0,N[65]=N[105]=0,$[65]=$[105]=-1,B[65]=B[105]=0,J[160]=J[10]=-1,q[160]=q[10]=0,le[160]=le[10]=1,j[160]=j[10]=-1,ie[160]=ie[10]=0,te[160]=te[10]=0,pe[160]=pe[10]=1,Te[160]=Te[10]=0,ye[160]=ye[10]=0,me[160]=me[10]=1,Se[160]=Se[10]=0,Ie[160]=Ie[10]=1,Q[130]=Q[40]=0,fe[130]=fe[40]=1,Ae[130]=Ae[40]=1,ce[130]=ce[40]=0,xe[130]=xe[40]=1,he[130]=he[40]=0,N[130]=N[40]=0,$[130]=$[40]=-1,B[130]=B[40]=0,F[130]=F[40]=0,z[130]=z[40]=-1,Y[130]=Y[40]=1,j[37]=j[133]=0,ie[37]=ie[133]=1,te[37]=te[133]=1,pe[37]=pe[133]=0,Te[37]=Te[133]=1,ye[37]=ye[133]=0,N[37]=N[133]=-1,$[37]=$[133]=0,B[37]=B[133]=0,F[37]=F[133]=1,z[37]=z[133]=0,Y[37]=Y[133]=0,Q[148]=Q[22]=-1,fe[148]=fe[22]=0,Ae[148]=Ae[22]=0,pe[148]=pe[22]=0,Te[148]=Te[22]=-1,ye[148]=ye[22]=1,me[148]=me[22]=0,Se[148]=Se[22]=1,Ie[148]=Ie[22]=1,F[148]=F[22]=-1,z[148]=z[22]=0,Y[148]=Y[22]=1,J[82]=J[88]=0,q[82]=q[88]=-1,le[82]=le[88]=1,Q[82]=Q[88]=1,fe[82]=fe[88]=0,Ae[82]=Ae[88]=1,ce[82]=ce[88]=-1,xe[82]=xe[88]=0,he[82]=he[88]=1,me[82]=me[88]=0,Se[82]=Se[88]=-1,Ie[82]=Ie[88]=0,J[73]=J[97]=0,q[73]=q[97]=1,le[73]=le[97]=0,j[73]=j[97]=0,ie[73]=ie[97]=-1,te[73]=te[97]=0,ce[73]=ce[97]=1,xe[73]=xe[97]=0,he[73]=he[97]=0,N[73]=N[97]=1,$[73]=$[97]=0,B[73]=B[97]=1,J[145]=J[25]=0,q[145]=q[25]=-1,le[145]=le[25]=0,ce[145]=ce[25]=1,xe[145]=xe[25]=0,he[145]=he[25]=1,pe[145]=pe[25]=0,Te[145]=Te[25]=1,ye[145]=ye[25]=1,F[145]=F[25]=-1,z[145]=z[25]=0,Y[145]=Y[25]=0,j[70]=j[100]=0,ie[70]=ie[100]=1,te[70]=te[100]=0,Q[70]=Q[100]=-1,fe[70]=fe[100]=0,Ae[70]=Ae[100]=1,me[70]=me[100]=0,Se[70]=Se[100]=-1,Ie[70]=Ie[100]=1,N[70]=N[100]=1,$[70]=$[100]=0,B[70]=B[100]=0,j[101]=j[69]=0,ie[101]=ie[69]=1,te[101]=te[69]=0,N[101]=N[69]=1,$[101]=$[69]=0,B[101]=B[69]=0,pe[149]=pe[21]=0,Te[149]=Te[21]=1,ye[149]=ye[21]=1,F[149]=F[21]=-1,z[149]=z[21]=0,Y[149]=Y[21]=0,Q[86]=Q[84]=-1,fe[86]=fe[84]=0,Ae[86]=Ae[84]=1,me[86]=me[84]=0,Se[86]=Se[84]=-1,Ie[86]=Ie[84]=1,J[89]=J[81]=0,q[89]=q[81]=-1,le[89]=le[81]=0,ce[89]=ce[81]=1,xe[89]=xe[81]=0,he[89]=he[81]=1,J[96]=J[74]=0,q[96]=q[74]=1,le[96]=le[74]=0,j[96]=j[74]=-1,ie[96]=ie[74]=0,te[96]=te[74]=1,me[96]=me[74]=1,Se[96]=Se[74]=0,Ie[96]=Ie[74]=0,N[96]=N[74]=1,$[96]=$[74]=0,B[96]=B[74]=1,J[24]=J[146]=0,q[24]=q[146]=-1,le[24]=le[146]=1,Q[24]=Q[146]=1,fe[24]=fe[146]=0,Ae[24]=Ae[146]=1,ce[24]=ce[146]=0,xe[24]=xe[146]=1,he[24]=he[146]=1,F[24]=F[146]=0,z[24]=z[146]=-1,Y[24]=Y[146]=0,j[6]=j[164]=-1,ie[6]=ie[164]=0,te[6]=te[164]=1,Q[6]=Q[164]=-1,fe[6]=fe[164]=0,Ae[6]=Ae[164]=0,pe[6]=pe[164]=0,Te[6]=Te[164]=-1,ye[6]=ye[164]=1,me[6]=me[164]=1,Se[6]=Se[164]=0,Ie[6]=Ie[164]=0,ce[129]=ce[41]=0,xe[129]=xe[41]=1,he[129]=he[41]=1,pe[129]=pe[41]=0,Te[129]=Te[41]=1,ye[129]=ye[41]=0,N[129]=N[41]=-1,$[129]=$[41]=0,B[129]=B[41]=0,F[129]=F[41]=0,z[129]=z[41]=-1,Y[129]=Y[41]=0,Q[66]=Q[104]=0,fe[66]=fe[104]=1,Ae[66]=Ae[104]=0,ce[66]=ce[104]=-1,xe[66]=xe[104]=0,he[66]=he[104]=1,me[66]=me[104]=0,Se[66]=Se[104]=-1,Ie[66]=Ie[104]=0,N[66]=N[104]=0,$[66]=$[104]=-1,B[66]=B[104]=1,J[144]=J[26]=-1,q[144]=q[26]=0,le[144]=le[26]=0,pe[144]=pe[26]=1,Te[144]=Te[26]=0,ye[144]=ye[26]=1,me[144]=me[26]=0,Se[144]=Se[26]=1,Ie[144]=Ie[26]=1,F[144]=F[26]=-1,z[144]=z[26]=0,Y[144]=Y[26]=1,j[36]=j[134]=0,ie[36]=ie[134]=1,te[36]=te[134]=1,Q[36]=Q[134]=0,fe[36]=fe[134]=1,Ae[36]=Ae[134]=0,N[36]=N[134]=0,$[36]=$[134]=-1,B[36]=B[134]=1,F[36]=F[134]=1,z[36]=z[134]=0,Y[36]=Y[134]=0,J[9]=J[161]=-1,q[9]=q[161]=0,le[9]=le[161]=0,j[9]=j[161]=0,ie[9]=ie[161]=-1,te[9]=te[161]=0,ce[9]=ce[161]=1,xe[9]=xe[161]=0,he[9]=he[161]=0,pe[9]=pe[161]=1,Te[9]=Te[161]=0,ye[9]=ye[161]=1,J[136]=0,q[136]=1,le[136]=1,j[136]=0,ie[136]=1,te[136]=0,Q[136]=-1,fe[136]=0,Ae[136]=1,ce[136]=-1,xe[136]=0,he[136]=0,pe[136]=0,Te[136]=-1,ye[136]=0,me[136]=0,Se[136]=-1,Ie[136]=1,N[136]=1,$[136]=0,B[136]=0,F[136]=1,z[136]=0,Y[136]=1,J[34]=0,q[34]=-1,le[34]=0,j[34]=0,ie[34]=-1,te[34]=1,Q[34]=1,fe[34]=0,Ae[34]=0,ce[34]=1,xe[34]=0,he[34]=1,pe[34]=0,Te[34]=1,ye[34]=1,me[34]=0,Se[34]=1,Ie[34]=0,N[34]=-1,$[34]=0,B[34]=1,F[34]=-1,z[34]=0,Y[34]=0,J[35]=0,q[35]=1,le[35]=1,j[35]=0,ie[35]=-1,te[35]=1,Q[35]=1,fe[35]=0,Ae[35]=0,ce[35]=-1,xe[35]=0,he[35]=0,pe[35]=0,Te[35]=-1,ye[35]=0,me[35]=0,Se[35]=1,Ie[35]=0,N[35]=-1,$[35]=0,B[35]=1,F[35]=1,z[35]=0,Y[35]=1,J[153]=0,q[153]=1,le[153]=1,ce[153]=-1,xe[153]=0,he[153]=0,pe[153]=0,Te[153]=-1,ye[153]=0,F[153]=1,z[153]=0,Y[153]=1,j[102]=0,ie[102]=-1,te[102]=1,Q[102]=1,fe[102]=0,Ae[102]=0,me[102]=0,Se[102]=1,Ie[102]=0,N[102]=-1,$[102]=0,B[102]=1,J[155]=0,q[155]=-1,le[155]=0,ce[155]=1,xe[155]=0,he[155]=1,pe[155]=0,Te[155]=1,ye[155]=1,F[155]=-1,z[155]=0,Y[155]=0,j[103]=0,ie[103]=1,te[103]=0,Q[103]=-1,fe[103]=0,Ae[103]=1,me[103]=0,Se[103]=-1,Ie[103]=1,N[103]=1,$[103]=0,B[103]=0,J[152]=0,q[152]=1,le[152]=1,Q[152]=-1,fe[152]=0,Ae[152]=1,ce[152]=-1,xe[152]=0,he[152]=0,pe[152]=0,Te[152]=-1,ye[152]=0,me[152]=0,Se[152]=-1,Ie[152]=1,F[152]=1,z[152]=0,Y[152]=1,J[156]=0,q[156]=-1,le[156]=1,Q[156]=1,fe[156]=0,Ae[156]=1,ce[156]=-1,xe[156]=0,he[156]=0,pe[156]=0,Te[156]=-1,ye[156]=0,me[156]=0,Se[156]=1,Ie[156]=1,F[156]=-1,z[156]=0,Y[156]=1,J[137]=0,q[137]=1,le[137]=1,j[137]=0,ie[137]=1,te[137]=0,ce[137]=-1,xe[137]=0,he[137]=0,pe[137]=0,Te[137]=-1,ye[137]=0,N[137]=1,$[137]=0,B[137]=0,F[137]=1,z[137]=0,Y[137]=1,J[139]=0,q[139]=1,le[139]=1,j[139]=0,ie[139]=-1,te[139]=0,ce[139]=1,xe[139]=0,he[139]=0,pe[139]=0,Te[139]=1,ye[139]=0,N[139]=-1,$[139]=0,B[139]=0,F[139]=1,z[139]=0,Y[139]=1,J[98]=0,q[98]=-1,le[98]=0,j[98]=0,ie[98]=-1,te[98]=1,Q[98]=1,fe[98]=0,Ae[98]=0,ce[98]=1,xe[98]=0,he[98]=1,me[98]=0,Se[98]=1,Ie[98]=0,N[98]=-1,$[98]=0,B[98]=1,J[99]=0,q[99]=1,le[99]=0,j[99]=0,ie[99]=-1,te[99]=1,Q[99]=1,fe[99]=0,Ae[99]=0,ce[99]=-1,xe[99]=0,he[99]=1,me[99]=0,Se[99]=-1,Ie[99]=0,N[99]=1,$[99]=0,B[99]=1,j[38]=0,ie[38]=-1,te[38]=1,Q[38]=1,fe[38]=0,Ae[38]=0,pe[38]=0,Te[38]=1,ye[38]=1,me[38]=0,Se[38]=1,Ie[38]=0,N[38]=-1,$[38]=0,B[38]=1,F[38]=-1,z[38]=0,Y[38]=0,j[39]=0,ie[39]=1,te[39]=1,Q[39]=-1,fe[39]=0,Ae[39]=0,pe[39]=0,Te[39]=-1,ye[39]=1,me[39]=0,Se[39]=1,Ie[39]=0,N[39]=-1,$[39]=0,B[39]=1,F[39]=1,z[39]=0,Y[39]=0;var ge=function(se){return[[se.bottomleft,0],[0,0],[0,se.leftbottom]]},ae=function(se){return[[1,se.rightbottom],[1,0],[se.bottomright,0]]},we=function(se){return[[se.topright,1],[1,1],[1,se.righttop]]},ke=function(se){return[[0,se.lefttop],[0,1],[se.topleft,1]]},Ne=function(se){return[[se.bottomright,0],[se.bottomleft,0],[0,se.leftbottom],[0,se.lefttop]]},$e=function(se){return[[se.bottomright,0],[se.bottomleft,0],[1,se.righttop],[1,se.rightbottom]]},qe=function(se){return[[1,se.righttop],[1,se.rightbottom],[se.topleft,1],[se.topright,1]]},Je=function(se){return[[0,se.leftbottom],[0,se.lefttop],[se.topleft,1],[se.topright,1]]},ve=function(se){return[[0,0],[0,se.leftbottom],[1,se.rightbottom],[1,0]]},W=function(se){return[[1,0],[se.bottomright,0],[se.topright,1],[1,1]]},U=function(se){return[[1,1],[1,se.righttop],[0,se.lefttop],[0,1]]},X=function(se){return[[se.bottomleft,0],[0,0],[0,1],[se.topleft,1]]},oe=function(se){return[[1,se.righttop],[1,se.rightbottom],[0,se.leftbottom],[0,se.lefttop]]},_e=function(se){return[[se.topleft,1],[se.topright,1],[se.bottomright,0],[se.bottomleft,0]]},Pe=function(){return[[0,0],[0,1],[1,1],[1,0]]},De=function(se){return[[1,se.rightbottom],[1,0],[0,0],[0,1],[se.topleft,1]]},Me=function(se){return[[se.topright,1],[1,1],[1,0],[0,0],[0,se.leftbottom]]},Ve=function(se){return[[1,0],[se.bottomright,0],[0,se.lefttop],[0,1],[1,1]]},Ze=function(se){return[[1,1],[1,se.righttop],[se.bottomleft,0],[0,0],[0,1]]},Ue=function(se){return[[1,se.righttop],[1,se.rightbottom],[0,se.lefttop],[0,1],[se.topleft,1]]},xt=function(se){return[[1,1],[1,se.righttop],[se.bottomright,0],[se.bottomleft,0],[se.topright,1]]},ht=function(se){return[[1,se.rightbottom],[1,0],[se.bottomright,0],[0,se.leftbottom],[0,se.lefttop]]},Pt=function(se){return[[se.topright,1],[se.bottomleft,0],[0,0],[0,se.leftbottom],[se.topleft,1]]},Et=function(se){return[[se.bottomright,0],[se.bottomleft,0],[0,se.lefttop],[0,1],[se.topleft,1]]},Tt=function(se){return[[1,1],[1,se.righttop],[0,se.leftbottom],[0,se.lefttop],[se.topright,1]]},Rt=function(se){return[[1,se.rightbottom],[1,0],[se.bottomright,0],[se.topleft,1],[se.topright,1]]},Bt=function(se){return[[1,se.righttop],[1,se.rightbottom],[se.bottomleft,0],[0,0],[0,se.leftbottom]]},Vt=function(se){return[[1,se.rightbottom],[1,0],[0,0],[0,se.leftbottom],[se.topleft,1],[se.topright,1]]},zt=function(se){return[[1,1],[1,0],[se.bottomright,0],[0,se.leftbottom],[0,se.lefttop],[se.topright,1]]},It=function(se){return[[1,1],[1,se.righttop],[se.bottomright,0],[se.bottomleft,0],[0,se.lefttop],[0,1]]},Ht=function(se){return[[1,se.righttop],[1,se.rightbottom],[se.bottomleft,0],[0,0],[0,1],[se.topleft,1]]},Kt=function(se){return[[1,1],[1,se.righttop],[se.bottomleft,0],[0,0],[0,se.leftbottom],[se.topright,1]]},Xe=function(se){return[[1,se.rightbottom],[1,0],[se.bottomright,0],[0,se.lefttop],[0,1],[se.topleft,1]]},Oi=function(se){return[[1,se.righttop],[1,se.rightbottom],[se.bottomright,0],[se.bottomleft,0],[0,se.leftbottom],[0,se.lefttop],[se.topleft,1],[se.topright,1]]},Ui=function(se){return[[1,1],[1,se.righttop],[se.bottomleft,0],[0,0],[0,se.leftbottom],[se.topright,1]]},Mt=function(se){return[[1,se.rightbottom],[1,0],[se.bottomright,0],[0,se.lefttop],[0,1],[se.topleft,1]]},u0=function(se){return[[1,1],[1,se.righttop],[se.bottomright,0],[se.bottomleft,0],[0,se.leftbottom],[0,se.lefttop],[se.topright,1]]},Ji=function(se){return[[1,se.righttop],[1,se.rightbottom],[se.bottomleft,0],[0,0],[0,se.leftbottom],[se.topleft,1],[se.topright,1]]},Gi=function(se){return[[1,se.righttop],[1,se.rightbottom],[se.bottomright,0],[se.bottomleft,0],[0,se.lefttop],[0,1],[se.topleft,1]]},Wi=function(se){return[[1,se.rightbottom],[1,0],[se.bottomright,0],[0,se.leftbottom],[0,se.lefttop],[se.topleft,1],[se.topright,1]]},ct=[],nt=[],ft=[],ot=[],pt=[],mt=[],Ct=[],rt=[];ot[1]=pt[1]=18,ot[169]=pt[169]=18,ft[4]=nt[4]=12,ft[166]=nt[166]=12,ct[16]=rt[16]=4,ct[154]=rt[154]=4,mt[64]=Ct[64]=22,mt[106]=Ct[106]=22,ft[2]=mt[2]=17,ot[2]=pt[2]=18,ft[168]=mt[168]=17,ot[168]=pt[168]=18,ct[8]=ot[8]=9,nt[8]=ft[8]=12,ct[162]=ot[162]=9,nt[162]=ft[162]=12,ct[32]=rt[32]=4,nt[32]=Ct[32]=1,ct[138]=rt[138]=4,nt[138]=Ct[138]=1,pt[128]=rt[128]=21,mt[128]=Ct[128]=22,pt[42]=rt[42]=21,mt[42]=Ct[42]=22,nt[5]=pt[5]=14,nt[165]=pt[165]=14,ft[20]=rt[20]=6,ft[150]=rt[150]=6,ct[80]=mt[80]=11,ct[90]=mt[90]=11,ot[65]=Ct[65]=3,ot[105]=Ct[105]=3,ct[160]=mt[160]=11,nt[160]=pt[160]=14,ct[10]=mt[10]=11,nt[10]=pt[10]=14,ft[130]=rt[130]=6,ot[130]=Ct[130]=3,ft[40]=rt[40]=6,ot[40]=Ct[40]=3,nt[101]=Ct[101]=1,nt[69]=Ct[69]=1,pt[149]=rt[149]=21,pt[21]=rt[21]=21,ft[86]=mt[86]=17,ft[84]=mt[84]=17,ct[89]=ot[89]=9,ct[81]=ot[81]=9,ct[96]=Ct[96]=0,nt[96]=mt[96]=15,ct[74]=Ct[74]=0,nt[74]=mt[74]=15,ct[24]=ft[24]=8,ot[24]=rt[24]=7,ct[146]=ft[146]=8,ot[146]=rt[146]=7,nt[6]=mt[6]=15,ft[6]=pt[6]=16,nt[164]=mt[164]=15,ft[164]=pt[164]=16,ot[129]=rt[129]=7,pt[129]=Ct[129]=20,ot[41]=rt[41]=7,pt[41]=Ct[41]=20,ft[66]=Ct[66]=2,ot[66]=mt[66]=19,ft[104]=Ct[104]=2,ot[104]=mt[104]=19,ct[144]=pt[144]=10,mt[144]=rt[144]=23,ct[26]=pt[26]=10,mt[26]=rt[26]=23,nt[36]=rt[36]=5,ft[36]=Ct[36]=2,nt[134]=rt[134]=5,ft[134]=Ct[134]=2,ct[9]=pt[9]=10,nt[9]=ot[9]=13,ct[161]=pt[161]=10,nt[161]=ot[161]=13,nt[37]=rt[37]=5,pt[37]=Ct[37]=20,nt[133]=rt[133]=5,pt[133]=Ct[133]=20,ft[148]=pt[148]=16,mt[148]=rt[148]=23,ft[22]=pt[22]=16,mt[22]=rt[22]=23,ct[82]=ft[82]=8,ot[82]=mt[82]=19,ct[88]=ft[88]=8,ot[88]=mt[88]=19,ct[73]=Ct[73]=0,nt[73]=ot[73]=13,ct[97]=Ct[97]=0,nt[97]=ot[97]=13,ct[145]=ot[145]=9,pt[145]=rt[145]=21,ct[25]=ot[25]=9,pt[25]=rt[25]=21,nt[70]=Ct[70]=1,ft[70]=mt[70]=17,nt[100]=Ct[100]=1,ft[100]=mt[100]=17,ct[34]=ot[34]=9,nt[34]=ft[34]=12,pt[34]=rt[34]=21,mt[34]=Ct[34]=22,ct[136]=rt[136]=4,nt[136]=Ct[136]=1,ft[136]=mt[136]=17,ot[136]=pt[136]=18,ct[35]=rt[35]=4,nt[35]=ft[35]=12,ot[35]=pt[35]=18,mt[35]=Ct[35]=22,ct[153]=rt[153]=4,ot[153]=pt[153]=18,nt[102]=ft[102]=12,mt[102]=Ct[102]=22,ct[155]=ot[155]=9,pt[155]=rt[155]=23,nt[103]=Ct[103]=1,ft[103]=mt[103]=17,ct[152]=rt[152]=4,ft[152]=mt[152]=17,ot[152]=pt[152]=18,ct[156]=ft[156]=8,ot[156]=pt[156]=18,mt[156]=rt[156]=23,ct[137]=rt[137]=4,nt[137]=Ct[137]=1,ot[137]=pt[137]=18,ct[139]=rt[139]=4,nt[139]=ot[139]=13,pt[139]=Ct[139]=20,ct[98]=ot[98]=9,nt[98]=ft[98]=12,mt[98]=Ct[98]=22,ct[99]=Ct[99]=0,nt[99]=ft[99]=12,ot[99]=mt[99]=19,nt[38]=ft[38]=12,pt[38]=rt[38]=21,mt[38]=Ct[38]=22,nt[39]=rt[39]=5,ft[39]=pt[39]=16,mt[39]=Ct[39]=22;var Ke=[];Ke[1]=Ke[169]=ge,Ke[4]=Ke[166]=ae,Ke[16]=Ke[154]=we,Ke[64]=Ke[106]=ke,Ke[168]=Ke[2]=Ne,Ke[162]=Ke[8]=$e,Ke[138]=Ke[32]=qe,Ke[42]=Ke[128]=Je,Ke[5]=Ke[165]=ve,Ke[20]=Ke[150]=W,Ke[80]=Ke[90]=U,Ke[65]=Ke[105]=X,Ke[160]=Ke[10]=oe,Ke[130]=Ke[40]=_e,Ke[85]=Pe,Ke[101]=Ke[69]=De,Ke[149]=Ke[21]=Me,Ke[86]=Ke[84]=Ve,Ke[89]=Ke[81]=Ze,Ke[96]=Ke[74]=Ue,Ke[24]=Ke[146]=xt,Ke[6]=Ke[164]=ht,Ke[129]=Ke[41]=Pt,Ke[66]=Ke[104]=Et,Ke[144]=Ke[26]=Tt,Ke[36]=Ke[134]=Rt,Ke[9]=Ke[161]=Bt,Ke[37]=Ke[133]=Vt,Ke[148]=Ke[22]=zt,Ke[82]=Ke[88]=It,Ke[73]=Ke[97]=Ht,Ke[145]=Ke[25]=Kt,Ke[70]=Ke[100]=Xe,Ke[34]=function(se){return[Je(se),$e(se)]},Ke[35]=Oi,Ke[136]=function(se){return[qe(se),Ne(se)]},Ke[153]=function(se){return[we(se),ge(se)]},Ke[102]=function(se){return[ae(se),ke(se)]},Ke[155]=Ui,Ke[103]=Mt,Ke[152]=function(se){return[we(se),Ne(se)]},Ke[156]=u0,Ke[137]=function(se){return[qe(se),ge(se)]},Ke[139]=Ji,Ke[98]=function(se){return[$e(se),ke(se)]},Ke[99]=Gi,Ke[38]=function(se){return[ae(se),Je(se)]},Ke[39]=Wi;function ne(se,ue,je){return(se-ue)/(je-ue)}function yi(se){return se.constructor.toString().indexOf("Array")>-1}function ri(se,ue,je){for(var Qe=se.length-1,et=se[0].length-1,Ye={rows:Qe,cols:et,cells:[]},be=ue+Math.abs(je),st=0;st<Qe;++st){Ye.cells[st]=[];for(var Ge=0;Ge<et;++Ge){var re=0,Ee=se[st+1][Ge],Ce=se[st+1][Ge+1],Oe=se[st][Ge+1],Re=se[st][Ge];if(!(isNaN(Ee)||isNaN(Ce)||isNaN(Oe)||isNaN(Re))){re|=Ee<ue?0:Ee>be?128:64,re|=Ce<ue?0:Ce>be?32:16,re|=Oe<ue?0:Oe>be?8:4,re|=Re<ue?0:Re>be?2:1;var D0=+re,tt=0;if(re===17||re===18||re===33||re===34||re===38||re===68||re===72||re===98||re===102||re===132||re===136||re===137||re===152||re===153){var ua=(Ee+Ce+Oe+Re)/4;tt=ua>be?2:ua<ue?0:1,re===34?tt===1?re=35:tt===0&&(re=136):re===136?tt===1?(re=35,tt=4):tt===0&&(re=34):re===17?tt===1?(re=155,tt=4):tt===0&&(re=153):re===68?tt===1?(re=103,tt=4):tt===0&&(re=102):re===153?tt===1&&(re=155):re===102?tt===1&&(re=103):re===152?tt<2&&(re=156,tt=1):re===137?tt<2&&(re=139,tt=1):re===98?tt<2&&(re=99,tt=1):re===38?tt<2&&(re=39,tt=1):re===18?tt>0?(re=156,tt=4):re=152:re===33?tt>0?(re=139,tt=4):re=137:re===72?tt>0?(re=99,tt=4):re=98:re===132&&(tt>0?(re=39,tt=4):re=38)}if(re!=0&&re!=170){var wt,gt,lt,ut,bt,St,Be,yt;wt=gt=lt=ut=bt=St=Be=yt=.5;var Fe=[];re===1?(lt=1-ne(ue,Oe,Re),yt=1-ne(ue,Ee,Re),Fe.push(ot[re])):re===169?(lt=ne(be,Re,Oe),yt=ne(be,Re,Ee),Fe.push(ot[re])):re===4?(St=1-ne(ue,Ce,Oe),ut=ne(ue,Re,Oe),Fe.push(nt[re])):re===166?(St=ne(be,Oe,Ce),ut=1-ne(be,Oe,Re),Fe.push(nt[re])):re===16?(bt=ne(ue,Oe,Ce),gt=ne(ue,Ee,Ce),Fe.push(ct[re])):re===154?(bt=1-ne(be,Ce,Oe),gt=1-ne(be,Ce,Ee),Fe.push(ct[re])):re===64?(Be=ne(ue,Re,Ee),wt=1-ne(ue,Ce,Ee),Fe.push(mt[re])):re===106?(Be=1-ne(be,Ee,Re),wt=ne(be,Ee,Ce),Fe.push(mt[re])):re===168?(ut=ne(be,Re,Oe),lt=ne(ue,Re,Oe),yt=ne(ue,Re,Ee),Be=ne(be,Re,Ee),Fe.push(ft[re]),Fe.push(ot[re])):re===2?(ut=1-ne(ue,Oe,Re),lt=1-ne(be,Oe,Re),yt=1-ne(be,Ee,Re),Be=1-ne(ue,Ee,Re),Fe.push(ft[re]),Fe.push(ot[re])):re===162?(bt=ne(be,Oe,Ce),St=ne(ue,Oe,Ce),ut=1-ne(ue,Oe,Re),lt=1-ne(be,Oe,Re),Fe.push(ft[re]),Fe.push(ot[re])):re===8?(bt=1-ne(ue,Ce,Oe),St=1-ne(be,Ce,Oe),ut=ne(be,Re,Oe),lt=ne(ue,Re,Oe),Fe.push(ct[re]),Fe.push(nt[re])):re===138?(bt=1-ne(ue,Ce,Oe),St=1-ne(be,Ce,Oe),wt=1-ne(be,Ce,Ee),gt=1-ne(ue,Ce,Ee),Fe.push(ct[re]),Fe.push(nt[re])):re===32?(bt=ne(be,Oe,Ce),St=ne(ue,Oe,Ce),wt=ne(ue,Ee,Ce),gt=ne(be,Ee,Ce),Fe.push(ct[re]),Fe.push(nt[re])):re===42?(yt=1-ne(be,Ee,Re),Be=1-ne(ue,Ee,Re),wt=ne(ue,Ee,Ce),gt=ne(be,Ee,Ce),Fe.push(pt[re]),Fe.push(mt[re])):re===128&&(yt=ne(ue,Re,Ee),Be=ne(be,Re,Ee),wt=1-ne(be,Ce,Ee),gt=1-ne(ue,Ce,Ee),Fe.push(pt[re]),Fe.push(mt[re])),re===5?(St=1-ne(ue,Ce,Oe),yt=1-ne(ue,Ee,Re),Fe.push(nt[re])):re===165?(St=ne(be,Oe,Ce),yt=ne(be,Re,Ee),Fe.push(nt[re])):re===20?(ut=ne(ue,Re,Oe),gt=ne(ue,Ee,Ce),Fe.push(ft[re])):re===150?(ut=1-ne(be,Oe,Re),gt=1-ne(be,Ce,Ee),Fe.push(ft[re])):re===80?(bt=ne(ue,Oe,Ce),Be=ne(ue,Re,Ee),Fe.push(ct[re])):re===90?(bt=1-ne(be,Ce,Oe),Be=1-ne(be,Ee,Re),Fe.push(ct[re])):re===65?(lt=1-ne(ue,Oe,Re),wt=1-ne(ue,Ce,Ee),Fe.push(ot[re])):re===105?(lt=ne(be,Re,Oe),wt=ne(be,Ee,Ce),Fe.push(ot[re])):re===160?(bt=ne(be,Oe,Ce),St=ne(ue,Oe,Ce),yt=ne(ue,Re,Ee),Be=ne(be,Re,Ee),Fe.push(ct[re]),Fe.push(nt[re])):re===10?(bt=1-ne(ue,Ce,Oe),St=1-ne(be,Ce,Oe),yt=1-ne(be,Ee,Re),Be=1-ne(ue,Ee,Re),Fe.push(ct[re]),Fe.push(nt[re])):re===130?(ut=1-ne(ue,Oe,Re),lt=1-ne(be,Oe,Re),wt=1-ne(be,Ce,Ee),gt=1-ne(ue,Ce,Ee),Fe.push(ft[re]),Fe.push(ot[re])):re===40?(ut=ne(be,Re,Oe),lt=ne(ue,Re,Oe),wt=ne(ue,Ee,Ce),gt=ne(be,Ee,Ce),Fe.push(ft[re]),Fe.push(ot[re])):re===101?(St=ne(be,Oe,Ce),wt=ne(be,Ee,Ce),Fe.push(nt[re])):re===69?(St=1-ne(ue,Ce,Oe),wt=1-ne(ue,Ce,Ee),Fe.push(nt[re])):re===149?(yt=ne(be,Re,Ee),gt=1-ne(be,Ce,Ee),Fe.push(pt[re])):re===21?(yt=1-ne(ue,Ee,Re),gt=ne(ue,Ee,Ce),Fe.push(pt[re])):re===86?(ut=1-ne(be,Oe,Re),Be=1-ne(be,Ee,Re),Fe.push(ft[re])):re===84?(ut=ne(ue,Re,Oe),Be=ne(ue,Re,Ee),Fe.push(ft[re])):re===89?(bt=1-ne(be,Ce,Oe),lt=ne(be,Re,Oe),Fe.push(ot[re])):re===81?(bt=ne(ue,Oe,Ce),lt=1-ne(ue,Oe,Re),Fe.push(ot[re])):re===96?(bt=ne(be,Oe,Ce),St=ne(ue,Oe,Ce),Be=ne(ue,Re,Ee),wt=ne(be,Ee,Ce),Fe.push(ct[re]),Fe.push(nt[re])):re===74?(bt=1-ne(ue,Ce,Oe),St=1-ne(be,Ce,Oe),Be=1-ne(be,Ee,Re),wt=1-ne(ue,Ce,Ee),Fe.push(ct[re]),Fe.push(nt[re])):re===24?(bt=1-ne(be,Ce,Oe),ut=ne(be,Re,Oe),lt=ne(ue,Re,Oe),gt=ne(ue,Ee,Ce),Fe.push(ct[re]),Fe.push(ot[re])):re===146?(bt=ne(ue,Oe,Ce),ut=1-ne(ue,Oe,Re),lt=1-ne(be,Oe,Re),gt=1-ne(be,Ce,Ee),Fe.push(ct[re]),Fe.push(ot[re])):re===6?(St=1-ne(ue,Ce,Oe),ut=1-ne(be,Oe,Re),yt=1-ne(be,Ee,Re),Be=1-ne(ue,Ee,Re),Fe.push(nt[re]),Fe.push(ft[re])):re===164?(St=ne(be,Oe,Ce),ut=ne(ue,Re,Oe),yt=ne(ue,Re,Ee),Be=ne(be,Re,Ee),Fe.push(nt[re]),Fe.push(ft[re])):re===129?(lt=1-ne(ue,Oe,Re),yt=ne(be,Re,Ee),wt=1-ne(be,Ce,Ee),gt=1-ne(ue,Ce,Ee),Fe.push(ot[re]),Fe.push(pt[re])):re===41?(lt=ne(be,Re,Oe),yt=1-ne(ue,Ee,Re),wt=ne(ue,Ee,Ce),gt=ne(be,Ee,Ce),Fe.push(ot[re]),Fe.push(pt[re])):re===66?(ut=1-ne(ue,Oe,Re),lt=1-ne(be,Oe,Re),Be=1-ne(be,Ee,Re),wt=1-ne(ue,Ce,Ee),Fe.push(ft[re]),Fe.push(ot[re])):re===104?(ut=ne(be,Re,Oe),lt=ne(ue,Re,Oe),Be=ne(ue,Re,Ee),wt=ne(be,Ee,Ce),Fe.push(ot[re]),Fe.push(Ct[re])):re===144?(bt=ne(ue,Oe,Ce),yt=ne(ue,Re,Ee),Be=ne(be,Re,Ee),gt=1-ne(be,Ce,Ee),Fe.push(ct[re]),Fe.push(mt[re])):re===26?(bt=1-ne(be,Ce,Oe),yt=1-ne(be,Ee,Re),Be=1-ne(ue,Ee,Re),gt=ne(ue,Ee,Ce),Fe.push(ct[re]),Fe.push(mt[re])):re===36?(St=ne(be,Oe,Ce),ut=ne(ue,Re,Oe),wt=ne(ue,Ee,Ce),gt=ne(be,Ee,Ce),Fe.push(nt[re]),Fe.push(ft[re])):re===134?(St=1-ne(ue,Ce,Oe),ut=1-ne(be,Oe,Re),wt=1-ne(be,Ce,Ee),gt=1-ne(ue,Ce,Ee),Fe.push(nt[re]),Fe.push(ft[re])):re===9?(bt=1-ne(ue,Ce,Oe),St=1-ne(be,Ce,Oe),lt=ne(be,Re,Oe),yt=1-ne(ue,Ee,Re),Fe.push(ct[re]),Fe.push(nt[re])):re===161?(bt=ne(be,Oe,Ce),St=ne(ue,Oe,Ce),lt=1-ne(ue,Oe,Re),yt=ne(be,Re,Ee),Fe.push(ct[re]),Fe.push(nt[re])):re===37?(St=ne(be,Oe,Ce),yt=1-ne(ue,Ee,Re),wt=ne(ue,Ee,Ce),gt=ne(be,Ee,Ce),Fe.push(nt[re]),Fe.push(pt[re])):re===133?(St=1-ne(ue,Ce,Oe),yt=ne(be,Re,Ee),wt=1-ne(be,Ce,Ee),gt=1-ne(ue,Ce,Ee),Fe.push(nt[re]),Fe.push(pt[re])):re===148?(ut=ne(ue,Re,Oe),yt=ne(ue,Re,Ee),Be=ne(be,Re,Ee),gt=1-ne(be,Ce,Ee),Fe.push(ft[re]),Fe.push(mt[re])):re===22?(ut=1-ne(be,Oe,Re),yt=1-ne(be,Ee,Re),Be=1-ne(ue,Ee,Re),gt=ne(ue,Ee,Ce),Fe.push(ft[re]),Fe.push(mt[re])):re===82?(bt=ne(ue,Oe,Ce),ut=1-ne(ue,Oe,Re),lt=1-ne(be,Oe,Re),Be=1-ne(be,Ee,Re),Fe.push(ct[re]),Fe.push(ot[re])):re===88?(bt=1-ne(be,Ce,Oe),ut=ne(be,Re,Oe),lt=ne(ue,Re,Oe),Be=ne(ue,Re,Ee),Fe.push(ct[re]),Fe.push(ot[re])):re===73?(bt=1-ne(ue,Ce,Oe),St=1-ne(be,Ce,Oe),lt=ne(be,Re,Oe),wt=1-ne(ue,Ce,Ee),Fe.push(ct[re]),Fe.push(nt[re])):re===97?(bt=ne(be,Oe,Ce),St=ne(ue,Oe,Ce),lt=1-ne(ue,Oe,Re),wt=ne(be,Ee,Ce),Fe.push(ct[re]),Fe.push(nt[re])):re===145?(bt=ne(ue,Oe,Ce),lt=1-ne(ue,Oe,Re),yt=ne(be,Re,Ee),gt=1-ne(be,Ce,Ee),Fe.push(ct[re]),Fe.push(pt[re])):re===25?(bt=1-ne(be,Ce,Oe),lt=ne(be,Re,Oe),yt=1-ne(ue,Ee,Re),gt=ne(ue,Ee,Ce),Fe.push(ct[re]),Fe.push(pt[re])):re===70?(St=1-ne(ue,Ce,Oe),ut=1-ne(be,Oe,Re),Be=1-ne(be,Ee,Re),wt=1-ne(ue,Ce,Ee),Fe.push(nt[re]),Fe.push(ft[re])):re===100?(St=ne(be,Oe,Ce),ut=ne(ue,Re,Oe),Be=ne(ue,Re,Ee),wt=ne(be,Ee,Ce),Fe.push(nt[re]),Fe.push(ft[re])):re===34?(tt===0?(bt=1-ne(ue,Ce,Oe),St=1-ne(be,Ce,Oe),ut=ne(be,Re,Oe),lt=ne(ue,Re,Oe),yt=ne(ue,Re,Ee),Be=ne(be,Re,Ee),wt=1-ne(be,Ce,Ee),gt=1-ne(ue,Ce,Ee)):(bt=ne(be,Oe,Ce),St=ne(ue,Oe,Ce),ut=1-ne(ue,Oe,Re),lt=1-ne(be,Oe,Re),yt=1-ne(be,Ee,Re),Be=1-ne(ue,Ee,Re),wt=ne(ue,Ee,Ce),gt=ne(be,Ee,Ce)),Fe.push(ct[re]),Fe.push(nt[re]),Fe.push(pt[re]),Fe.push(mt[re])):re===35?(tt===4?(bt=1-ne(ue,Ce,Oe),St=1-ne(be,Ce,Oe),ut=ne(be,Re,Oe),lt=ne(ue,Re,Oe),yt=ne(ue,Re,Ee),Be=ne(be,Re,Ee),wt=1-ne(be,Ce,Ee),gt=1-ne(ue,Ce,Ee)):(bt=ne(be,Oe,Ce),St=ne(ue,Oe,Ce),ut=1-ne(ue,Oe,Re),lt=1-ne(be,Oe,Re),yt=1-ne(be,Ee,Re),Be=1-ne(ue,Ee,Re),wt=ne(ue,Ee,Ce),gt=ne(be,Ee,Ce)),Fe.push(ct[re]),Fe.push(nt[re]),Fe.push(ot[re]),Fe.push(mt[re])):re===136?(tt===0?(bt=ne(be,Oe,Ce),St=ne(ue,Oe,Ce),ut=1-ne(ue,Oe,Re),lt=1-ne(be,Oe,Re),yt=1-ne(be,Ee,Re),Be=1-ne(ue,Ee,Re),wt=ne(ue,Ee,Ce),gt=ne(be,Ee,Ce)):(bt=1-ne(ue,Ce,Oe),St=1-ne(be,Ce,Oe),ut=ne(be,Re,Oe),lt=ne(ue,Re,Oe),yt=ne(ue,Re,Ee),Be=ne(be,Re,Ee),wt=1-ne(be,Ce,Ee),gt=1-ne(ue,Ce,Ee)),Fe.push(ct[re]),Fe.push(nt[re]),Fe.push(pt[re]),Fe.push(mt[re])):re===153?(tt===0?(bt=ne(ue,Oe,Ce),lt=1-ne(ue,Oe,Re),yt=1-ne(ue,Ee,Re),gt=ne(ue,Ee,Ce)):(bt=1-ne(be,Ce,Oe),lt=ne(be,Re,Oe),yt=ne(be,Re,Ee),gt=1-ne(be,Ce,Ee)),Fe.push(ct[re]),Fe.push(ot[re])):re===102?(tt===0?(St=1-ne(ue,Ce,Oe),ut=ne(ue,Re,Oe),Be=ne(ue,Re,Ee),wt=1-ne(ue,Ce,Ee)):(St=ne(be,Oe,Ce),ut=1-ne(be,Oe,Re),Be=1-ne(be,Ee,Re),wt=ne(be,Ee,Ce)),Fe.push(nt[re]),Fe.push(mt[re])):re===155?(tt===4?(bt=ne(ue,Oe,Ce),lt=1-ne(ue,Oe,Re),yt=1-ne(ue,Ee,Re),gt=ne(ue,Ee,Ce)):(bt=1-ne(be,Ce,Oe),lt=ne(be,Re,Oe),yt=ne(be,Re,Ee),gt=1-ne(be,Ce,Ee)),Fe.push(ct[re]),Fe.push(pt[re])):re===103?(tt===4?(St=1-ne(ue,Ce,Oe),ut=ne(ue,Re,Oe),Be=ne(ue,Re,Ee),wt=1-ne(ue,Ce,Ee)):(St=ne(be,Oe,Ce),ut=1-ne(be,Oe,Re),Be=1-ne(be,Ee,Re),wt=ne(be,Ee,Ce)),Fe.push(nt[re]),Fe.push(ft[re])):re===152?(tt===0?(bt=ne(ue,Oe,Ce),ut=1-ne(ue,Oe,Re),lt=1-ne(be,Oe,Re),yt=1-ne(be,Ee,Re),Be=1-ne(ue,Ee,Re),gt=ne(ue,Ee,Ce)):(bt=1-ne(be,Ce,Oe),ut=ne(be,Re,Oe),lt=ne(ue,Re,Oe),yt=ne(ue,Re,Ee),Be=ne(be,Re,Ee),gt=1-ne(be,Ce,Ee)),Fe.push(ct[re]),Fe.push(ft[re]),Fe.push(ot[re])):re===156?(tt===4?(bt=ne(ue,Oe,Ce),ut=1-ne(ue,Oe,Re),lt=1-ne(be,Oe,Re),yt=1-ne(be,Ee,Re),Be=1-ne(ue,Ee,Re),gt=ne(ue,Ee,Ce)):(bt=1-ne(be,Ce,Oe),ut=ne(be,Re,Oe),lt=ne(ue,Re,Oe),yt=ne(ue,Re,Ee),Be=ne(be,Re,Ee),gt=1-ne(be,Ce,Ee)),Fe.push(ct[re]),Fe.push(ot[re]),Fe.push(mt[re])):re===137?(tt===0?(bt=ne(be,Oe,Ce),St=ne(ue,Oe,Ce),lt=1-ne(ue,Oe,Re),yt=1-ne(ue,Ee,Re),wt=ne(ue,Ee,Ce),gt=ne(be,Ee,Ce)):(bt=1-ne(ue,Ce,Oe),St=1-ne(be,Ce,Oe),lt=ne(be,Re,Oe),yt=ne(be,Re,Ee),wt=1-ne(be,Ce,Ee),gt=1-ne(ue,Ce,Ee)),Fe.push(ct[re]),Fe.push(nt[re]),Fe.push(ot[re])):re===139?(tt===4?(bt=ne(be,Oe,Ce),St=ne(ue,Oe,Ce),lt=1-ne(ue,Oe,Re),yt=1-ne(ue,Ee,Re),wt=ne(ue,Ee,Ce),gt=ne(be,Ee,Ce)):(bt=1-ne(ue,Ce,Oe),St=1-ne(be,Ce,Oe),lt=ne(be,Re,Oe),yt=ne(be,Re,Ee),wt=1-ne(be,Ce,Ee),gt=1-ne(ue,Ce,Ee)),Fe.push(ct[re]),Fe.push(nt[re]),Fe.push(pt[re])):re===98?(tt===0?(bt=1-ne(ue,Ce,Oe),St=1-ne(be,Ce,Oe),ut=ne(be,Re,Oe),lt=ne(ue,Re,Oe),Be=ne(ue,Re,Ee),wt=1-ne(ue,Ce,Ee)):(bt=ne(be,Oe,Ce),St=ne(ue,Oe,Ce),ut=1-ne(ue,Oe,Re),lt=1-ne(be,Oe,Re),Be=1-ne(be,Ee,Re),wt=ne(be,Ee,Ce)),Fe.push(ct[re]),Fe.push(nt[re]),Fe.push(mt[re])):re===99?(tt===4?(bt=1-ne(ue,Ce,Oe),St=1-ne(be,Ce,Oe),ut=ne(be,Re,Oe),lt=ne(ue,Re,Oe),Be=ne(ue,Re,Ee),wt=1-ne(ue,Ce,Ee)):(bt=ne(be,Oe,Ce),St=ne(ue,Oe,Ce),ut=1-ne(ue,Oe,Re),lt=1-ne(be,Oe,Re),Be=1-ne(be,Ee,Re),wt=ne(be,Ee,Ce)),Fe.push(ct[re]),Fe.push(nt[re]),Fe.push(ot[re])):re===38?(tt===0?(St=1-ne(ue,Ce,Oe),ut=ne(ue,Re,Oe),yt=ne(ue,Re,Ee),Be=ne(be,Re,Ee),wt=1-ne(be,Ce,Ee),gt=1-ne(ue,Ce,Ee)):(St=ne(be,Oe,Ce),ut=1-ne(be,Oe,Re),yt=1-ne(be,Ee,Re),Be=1-ne(ue,Ee,Re),wt=ne(ue,Ee,Ce),gt=ne(be,Ee,Ce)),Fe.push(nt[re]),Fe.push(pt[re]),Fe.push(mt[re])):re===39?(tt===4?(St=1-ne(ue,Ce,Oe),ut=ne(ue,Re,Oe),yt=ne(ue,Re,Ee),Be=ne(be,Re,Ee),wt=1-ne(be,Ce,Ee),gt=1-ne(ue,Ce,Ee)):(St=ne(be,Oe,Ce),ut=1-ne(be,Oe,Re),yt=1-ne(be,Ee,Re),Be=1-ne(ue,Ee,Re),wt=ne(ue,Ee,Ce),gt=ne(be,Ee,Ce)),Fe.push(nt[re]),Fe.push(ft[re]),Fe.push(mt[re])):re===85&&(bt=1,St=0,ut=1,lt=0,yt=0,Be=1,wt=0,gt=1),(wt<0||wt>1||gt<0||gt>1||bt<0||bt>1||ut<0||ut>1||yt<0||yt>1||Be<0||Be>1)&&console.log("MarchingSquaresJS-isoBands: "+re+" "+D0+" "+Ee+","+Ce+","+Oe+","+Re+" "+tt+" "+wt+" "+gt+" "+bt+" "+St+" "+ut+" "+lt+" "+yt+" "+Be),Ye.cells[st][Ge]={cval:re,cval_real:D0,flipped:tt,topleft:wt,topright:gt,righttop:bt,rightbottom:St,bottomright:ut,bottomleft:lt,leftbottom:yt,lefttop:Be,edges:Fe}}}}}return Ye}function h0(se){for(var ue=[],je=se.rows,Qe=se.cols,et=[],Ye=0;Ye<je;Ye++)for(var be=0;be<Qe;be++)if(typeof se.cells[Ye][be]<"u"&&se.cells[Ye][be].edges.length>0){var st=se.cells[Ye][be],Ge=Ei(st),re=null,Ee=be,Ce=Ye;Ge!==null&&et.push([Ge.p[0]+Ee,Ge.p[1]+Ce]);do{if(re=la(se.cells[Ce][Ee],Ge.x,Ge.y,Ge.o),re!==null)et.push([re.p[0]+Ee,re.p[1]+Ce]),Ee+=re.x,Ce+=re.y,Ge=re;else break;if(Ce<0||Ce>=je||Ee<0||Ee>=Qe||typeof se.cells[Ce][Ee]>"u"){Ee-=re.x,Ce-=re.y;var Oe=Pi(se,Ee,Ce,re.x,re.y,re.o);if(Oe!==null)Oe.path.forEach(function(Re){et.push(Re)}),Ee=Oe.i,Ce=Oe.j,Ge=Oe;else break}}while(typeof se.cells[Ce][Ee]<"u"&&se.cells[Ce][Ee].edges.length>0);ue.push(et),et=[],se.cells[Ye][be].edges.length>0&&be--}return ue}function Pi(se,ue,je,Qe,et,Ye){for(var be=se.cells[je][ue],st=be.cval_real,Ge=ue+Qe,re=je+et,Ee=[],Ce=!1;!Ce;){if(typeof se.cells[re]>"u"||typeof se.cells[re][Ge]>"u")if(re-=et,Ge-=Qe,be=se.cells[re][Ge],st=be.cval_real,et===-1)if(Ye===0)if(st&k)Ee.push([Ge,re]),Qe=-1,et=0,Ye=0;else if(st&R)Ee.push([Ge+1,re]),Qe=1,et=0,Ye=0;else{Ee.push([Ge+be.bottomright,re]),Qe=0,et=1,Ye=1,Ce=!0;break}else if(st&k)Ee.push([Ge,re]),Qe=-1,et=0,Ye=0;else if(st&R){Ee.push([Ge+be.bottomright,re]),Qe=0,et=1,Ye=1,Ce=!0;break}else{Ee.push([Ge+be.bottomleft,re]),Qe=0,et=1,Ye=0,Ce=!0;break}else if(et===1)if(Ye===0)if(st&D)Ee.push([Ge+1,re+1]),Qe=1,et=0,Ye=1;else if(st&M){Ee.push([Ge+be.topleft,re+1]),Qe=0,et=-1,Ye=0,Ce=!0;break}else{Ee.push([Ge+be.topright,re+1]),Qe=0,et=-1,Ye=1,Ce=!0;break}else st&D?(Ee.push([Ge+1,re+1]),Qe=1,et=0,Ye=1):(Ee.push([Ge+1,re+1]),Qe=1,et=0,Ye=1);else if(Qe===-1)if(Ye===0)if(st&M)Ee.push([Ge,re+1]),Qe=0,et=1,Ye=0;else if(st&k){Ee.push([Ge,re+be.leftbottom]),Qe=1,et=0,Ye=0,Ce=!0;break}else{Ee.push([Ge,re+be.lefttop]),Qe=1,et=0,Ye=1,Ce=!0;break}else if(st&M)Ee.push([Ge,re+1]),Qe=0,et=1,Ye=0;else{console.log("MarchingSquaresJS-isoBands: wtf");break}else if(Qe===1)if(Ye===0)if(st&R)Ee.push([Ge+1,re]),Qe=0,et=-1,Ye=1;else{Ee.push([Ge+1,re+be.rightbottom]),Qe=-1,et=0,Ye=0,Ce=!0;break}else if(st&R)Ee.push([Ge+1,re]),Qe=0,et=-1,Ye=1;else if(st&D){Ee.push([Ge+1,re+be.righttop]),Qe=-1,et=0,Ye=1;break}else{Ee.push([Ge+1,re+be.rightbottom]),Qe=-1,et=0,Ye=0,Ce=!0;break}else{console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}else if(be=se.cells[re][Ge],st=be.cval_real,Qe===-1)if(Ye===0)if(typeof se.cells[re-1]<"u"&&typeof se.cells[re-1][Ge]<"u")Qe=0,et=-1,Ye=1;else if(st&k)Ee.push([Ge,re]);else{Ee.push([Ge+be.bottomright,re]),Qe=0,et=1,Ye=1,Ce=!0;break}else if(st&M)console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!");else{console.log("MarchingSquaresJS-isoBands: found entry from top at "+Ge+","+re);break}else if(Qe===1)if(Ye===0){console.log("MarchingSquaresJS-isoBands: wtf");break}else if(typeof se.cells[re+1]<"u"&&typeof se.cells[re+1][Ge]<"u")Qe=0,et=1,Ye=0;else if(st&D)Ee.push([Ge+1,re+1]),Qe=1,et=0,Ye=1;else{Ee.push([Ge+be.topleft,re+1]),Qe=0,et=-1,Ye=0,Ce=!0;break}else if(et===-1)if(Ye===1)if(typeof se.cells[re][Ge+1]<"u")Qe=1,et=0,Ye=1;else if(st&R)Ee.push([Ge+1,re]),Qe=0,et=-1,Ye=1;else{Ee.push([Ge+1,re+be.righttop]),Qe=-1,et=0,Ye=1,Ce=!0;break}else{console.log("MarchingSquaresJS-isoBands: wtf");break}else if(et===1)if(Ye===0)if(typeof se.cells[re][Ge-1]<"u")Qe=-1,et=0,Ye=0;else if(st&M)Ee.push([Ge,re+1]),Qe=0,et=1,Ye=0;else{Ee.push([Ge,re+be.leftbottom]),Qe=1,et=0,Ye=0,Ce=!0;break}else{console.log("MarchingSquaresJS-isoBands: wtf");break}else{console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(Ge+=Qe,re+=et,Ge===ue&&re===je)break}return{path:Ee,i:Ge,j:re,x:Qe,y:et,o:Ye}}function ia(se,ue){delete se.edges[ue];for(var je=ue+1;je<se.edges.length;je++)se.edges[je-1]=se.edges[je];se.edges.pop()}function Ei(se){if(se.edges.length>0){var ue=se.edges[se.edges.length-1],je=se.cval_real;switch(ue){case 0:return je&D?{p:[1,se.righttop],x:-1,y:0,o:1}:{p:[se.topleft,1],x:0,y:-1,o:0};case 1:return je&R?{p:[se.topleft,1],x:0,y:-1,o:0}:{p:[1,se.rightbottom],x:-1,y:0,o:0};case 2:return je&R?{p:[se.bottomright,0],x:0,y:1,o:1}:{p:[se.topleft,1],x:0,y:-1,o:0};case 3:return je&k?{p:[se.topleft,1],x:0,y:-1,o:0}:{p:[se.bottomleft,0],x:0,y:1,o:0};case 4:return je&D?{p:[1,se.righttop],x:-1,y:0,o:1}:{p:[se.topright,1],x:0,y:-1,o:1};case 5:return je&R?{p:[se.topright,1],x:0,y:-1,o:1}:{p:[1,se.rightbottom],x:-1,y:0,o:0};case 6:return je&R?{p:[se.bottomright,0],x:0,y:1,o:1}:{p:[se.topright,1],x:0,y:-1,o:1};case 7:return je&k?{p:[se.topright,1],x:0,y:-1,o:1}:{p:[se.bottomleft,0],x:0,y:1,o:0};case 8:return je&R?{p:[se.bottomright,0],x:0,y:1,o:1}:{p:[1,se.righttop],x:-1,y:0,o:1};case 9:return je&k?{p:[1,se.righttop],x:-1,y:0,o:1}:{p:[se.bottomleft,0],x:0,y:1,o:0};case 10:return je&k?{p:[0,se.leftbottom],x:1,y:0,o:0}:{p:[1,se.righttop],x:-1,y:0,o:1};case 11:return je&M?{p:[1,se.righttop],x:-1,y:0,o:1}:{p:[0,se.lefttop],x:1,y:0,o:1};case 12:return je&R?{p:[se.bottomright,0],x:0,y:1,o:1}:{p:[1,se.rightbottom],x:-1,y:0,o:0};case 13:return je&k?{p:[1,se.rightbottom],x:-1,y:0,o:0}:{p:[se.bottomleft,0],x:0,y:1,o:0};case 14:return je&k?{p:[0,se.leftbottom],x:1,y:0,o:0}:{p:[1,se.rightbottom],x:-1,y:0,o:0};case 15:return je&M?{p:[1,se.rightbottom],x:-1,y:0,o:0}:{p:[0,se.lefttop],x:1,y:0,o:1};case 16:return je&R?{p:[se.bottomright,0],x:0,y:1,o:1}:{p:[0,se.leftbottom],x:1,y:0,o:0};case 17:return je&M?{p:[se.bottomright,0],x:0,y:1,o:1}:{p:[0,se.lefttop],x:1,y:0,o:1};case 18:return je&k?{p:[0,se.leftbottom],x:1,y:0,o:0}:{p:[se.bottomleft,0],x:0,y:1,o:0};case 19:return je&M?{p:[se.bottomleft,0],x:0,y:1,o:0}:{p:[0,se.lefttop],x:1,y:0,o:1};case 20:return je&M?{p:[se.topleft,1],x:0,y:-1,o:0}:{p:[0,se.leftbottom],x:1,y:0,o:0};case 21:return je&D?{p:[0,se.leftbottom],x:1,y:0,o:0}:{p:[se.topright,1],x:0,y:-1,o:1};case 22:return je&M?{p:[se.topleft,1],x:0,y:-1,o:0}:{p:[0,se.lefttop],x:1,y:0,o:1};case 23:return je&D?{p:[0,se.lefttop],x:1,y:0,o:1}:{p:[se.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(se);break}}return null}function la(se,ue,je,Qe){var et,Ye,be,st,Ge=se.cval,re;switch(ue){case-1:switch(Qe){case 0:et=nt[Ge],be=j[Ge],st=ie[Ge],re=te[Ge];break;default:et=ct[Ge],be=J[Ge],st=q[Ge],re=le[Ge];break}break;case 1:switch(Qe){case 0:et=pt[Ge],be=pe[Ge],st=Te[Ge],re=ye[Ge];break;default:et=mt[Ge],be=me[Ge],st=Se[Ge],re=Ie[Ge];break}break;default:switch(je){case-1:switch(Qe){case 0:et=Ct[Ge],be=N[Ge],st=$[Ge],re=B[Ge];break;default:et=rt[Ge],be=F[Ge],st=z[Ge],re=Y[Ge];break}break;case 1:switch(Qe){case 0:et=ot[Ge],be=ce[Ge],st=xe[Ge],re=he[Ge];break;default:et=ft[Ge],be=Q[Ge],st=fe[Ge],re=Ae[Ge];break}break}break}if(Ye=se.edges.indexOf(et),typeof se.edges[Ye]<"u")ia(se,Ye);else return null;switch(Ge=se.cval_real,et){case 0:Ge&D?(ue=se.topleft,je=1):(ue=1,je=se.righttop);break;case 1:Ge&R?(ue=1,je=se.rightbottom):(ue=se.topleft,je=1);break;case 2:Ge&R?(ue=se.topleft,je=1):(ue=se.bottomright,je=0);break;case 3:Ge&k?(ue=se.bottomleft,je=0):(ue=se.topleft,je=1);break;case 4:Ge&D?(ue=se.topright,je=1):(ue=1,je=se.righttop);break;case 5:Ge&R?(ue=1,je=se.rightbottom):(ue=se.topright,je=1);break;case 6:Ge&R?(ue=se.topright,je=1):(ue=se.bottomright,je=0);break;case 7:Ge&k?(ue=se.bottomleft,je=0):(ue=se.topright,je=1);break;case 8:Ge&R?(ue=1,je=se.righttop):(ue=se.bottomright,je=0);break;case 9:Ge&k?(ue=se.bottomleft,je=0):(ue=1,je=se.righttop);break;case 10:Ge&k?(ue=1,je=se.righttop):(ue=0,je=se.leftbottom);break;case 11:Ge&M?(ue=0,je=se.lefttop):(ue=1,je=se.righttop);break;case 12:Ge&R?(ue=1,je=se.rightbottom):(ue=se.bottomright,je=0);break;case 13:Ge&k?(ue=se.bottomleft,je=0):(ue=1,je=se.rightbottom);break;case 14:Ge&k?(ue=1,je=se.rightbottom):(ue=0,je=se.leftbottom);break;case 15:Ge&M?(ue=0,je=se.lefttop):(ue=1,je=se.rightbottom);break;case 16:Ge&R?(ue=0,je=se.leftbottom):(ue=se.bottomright,je=0);break;case 17:Ge&M?(ue=0,je=se.lefttop):(ue=se.bottomright,je=0);break;case 18:Ge&k?(ue=se.bottomleft,je=0):(ue=0,je=se.leftbottom);break;case 19:Ge&M?(ue=0,je=se.lefttop):(ue=se.bottomleft,je=0);break;case 20:Ge&M?(ue=0,je=se.leftbottom):(ue=se.topleft,je=1);break;case 21:Ge&D?(ue=se.topright,je=1):(ue=0,je=se.leftbottom);break;case 22:Ge&M?(ue=0,je=se.lefttop):(ue=se.topleft,je=1);break;case 23:Ge&D?(ue=se.topright,je=1):(ue=0,je=se.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(se),null}return(typeof ue>"u"||typeof je>"u"||typeof be>"u"||typeof st>"u"||typeof re>"u")&&(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(se),console.log(ue+" "+je+" "+be+" "+st+" "+re)),{p:[ue,je],x:be,y:st,o:re}}function Ut(se){var ue=[],je=0;return se.cells.forEach(function(Qe,et){Qe.forEach(function(Ye,be){if(typeof Ye<"u"){var st=Ke[Ye.cval](Ye);typeof st=="object"&&yi(st)?typeof st[0]=="object"&&yi(st[0])?typeof st[0][0]=="object"&&yi(st[0][0])?st.forEach(function(Ge){Ge.forEach(function(re){re[0]+=be,re[1]+=et}),ue[je++]=Ge}):(st.forEach(function(Ge){Ge[0]+=be,Ge[1]+=et}),ue[je++]=st):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}})}),ue}function qt(se,ue,je){if(je=je||{},!r.isObject(je))throw new Error("options is invalid");var Qe=je.zProperty||"elevation",et=je.commonProperties||{},Ye=je.breaksProperties||[];if(s.collectionOf(se,"Point","Input must contain Points"),!ue)throw new Error("breaks is required");if(!Array.isArray(ue))throw new Error("breaks is not an Array");if(!r.isObject(et))throw new Error("commonProperties is not an Object");if(!Array.isArray(Ye))throw new Error("breaksProperties is not an Array");var be=C(se,{zProperty:Qe,flip:!0}),st=We(be,ue,Qe);st=ei(st,be,se);var Ge=st.map(function(re,Ee){if(Ye[Ee]&&!r.isObject(Ye[Ee]))throw new Error("Each mappedProperty is required to be an Object");var Ce=b.default({},et,Ye[Ee]);Ce[Qe]=re[Qe];var Oe=r.multiPolygon(re.groupedRings,Ce);return Oe});return r.featureCollection(Ge)}function We(se,ue,je){for(var Qe=[],et=1;et<ue.length;et++){var Ye=+ue[et-1],be=+ue[et],st=E(se,Ye,be-Ye),Ge=s0(st),re=Yt(Ge),Ee={};Ee.groupedRings=re,Ee[je]=Ye+"-"+be,Qe.push(Ee)}return Qe}function ei(se,ue,je){var Qe=l.default(je),et=Qe[2]-Qe[0],Ye=Qe[3]-Qe[1],be=Qe[0],st=Qe[1],Ge=ue[0].length-1,re=ue.length-1,Ee=et/Ge,Ce=Ye/re,Oe=function(Re){Re[0]=Re[0]*Ee+be,Re[1]=Re[1]*Ce+st};return se.forEach(function(Re){Re.groupedRings.forEach(function(D0){D0.forEach(function(tt){tt.forEach(Oe)})})}),se}function s0(se){var ue=[],je=[];se.forEach(function(et){var Ye=d.default(r.polygon([et]));je.push(Ye),ue.push({ring:et,area:Ye})}),je.sort(function(et,Ye){return Ye-et});var Qe=[];return je.forEach(function(et){for(var Ye=0;Ye<ue.length;Ye++)if(ue[Ye].area===et){Qe.push(ue[Ye].ring),ue.splice(Ye,1);break}}),Qe}function Yt(se){for(var ue=se.map(function(Ge){return{lrCoordinates:Ge,grouped:!1}}),je=[];!Yi(ue);)for(var Qe=0;Qe<ue.length;Qe++)if(!ue[Qe].grouped){var et=[];et.push(ue[Qe].lrCoordinates),ue[Qe].grouped=!0;for(var Ye=r.polygon([ue[Qe].lrCoordinates]),be=Qe+1;be<ue.length;be++)if(!ue[be].grouped){var st=r.polygon([ue[be].lrCoordinates]);w0(st,Ye)&&(et.push(ue[be].lrCoordinates),ue[be].grouped=!0)}je.push(et)}return je}function w0(se,ue){for(var je=g.default(se),Qe=0;Qe<je.features.length;Qe++)if(!f.default(je.features[Qe],ue))return!1;return!0}function Yi(se){for(var ue=0;ue<se.length;ue++)if(se[ue].grouped===!1)return!1;return!0}return js$C.exports=qt,jsExports$e.default=qt,jsExports$e}var jsExports$d={},js$B={get exports(){return jsExports$d},set exports(n){jsExports$d=n}},hasRequiredJs$C;function requireJs$C(){if(hasRequiredJs$C)return jsExports$d;hasRequiredJs$C=1;var n=requireJs$1f(),e=requireJs$I(),t=requireJs$16(),i=requireJs$H(),s=requireJs$1w(),r=requireJs$1F(),o=requireJs$1D(),c=requireJs$1G();function _(P){return P&&typeof P=="object"&&"default"in P?P:{default:P}}var l=_(n),d=_(e),f=_(t),g=_(i),b=_(s);function C(P,S,L){if(L=L||{},!c.isObject(L))throw new Error("options is invalid");var E=L.pivot,M=L.mutate;if(!P)throw new Error("geojson is required");if(S==null||isNaN(S))throw new Error("angle is required");return S===0||(E||(E=l.default(P)),(M===!1||M===void 0)&&(P=b.default(P)),r.coordEach(P,function(D){var R=d.default(E,D),k=R+S,N=f.default(E,D),$=o.getCoords(g.default(E,N,k));D[0]=$[0],D[1]=$[1]})),P}return js$B.exports=C,jsExports$d.default=C,jsExports$d}var jsExports$c={},js$A={get exports(){return jsExports$c},set exports(n){jsExports$c=n}},hasRequiredJs$B;function requireJs$B(){if(hasRequiredJs$B)return jsExports$c;hasRequiredJs$B=1;var n=requireJs$1w(),e=requireJs$1g(),t=requireJs$1f(),i=requireJs$1E(),s=requireJs$I(),r=requireJs$16(),o=requireJs$H(),c=requireJs$1F(),_=requireJs$1G(),l=requireJs$1D();function d(R){return R&&typeof R=="object"&&"default"in R?R:{default:R}}var f=d(n),g=d(e),b=d(t),C=d(i),P=d(s),S=d(r),L=d(o);function E(R,k,N){if(N=N||{},!_.isObject(N))throw new Error("options is invalid");var $=N.origin,B=N.mutate;if(!R)throw new Error("geojson required");if(typeof k!="number"||k===0)throw new Error("invalid factor");var F=Array.isArray($)||typeof $=="object";return B!==!0&&(R=f.default(R)),R.type==="FeatureCollection"&&!F?(c.featureEach(R,function(z,Y){R.features[Y]=M(z,k,$)}),R):M(R,k,$)}function M(R,k,N){var $=l.getType(R)==="Point";return N=D(R,N),k===1||$||c.coordEach(R,function(B){var F=S.default(N,B),z=P.default(N,B),Y=F*k,J=l.getCoords(L.default(N,Y,z));B[0]=J[0],B[1]=J[1],B.length===3&&(B[2]*=k)}),R}function D(R,k){if(k==null&&(k="centroid"),Array.isArray(k)||typeof k=="object")return l.getCoord(k);var N=R.bbox?R.bbox:C.default(R),$=N[0],B=N[1],F=N[2],z=N[3];switch(k){case"sw":case"southwest":case"westsouth":case"bottomleft":return _.point([$,B]);case"se":case"southeast":case"eastsouth":case"bottomright":return _.point([F,B]);case"nw":case"northwest":case"westnorth":case"topleft":return _.point([$,z]);case"ne":case"northeast":case"eastnorth":case"topright":return _.point([F,z]);case"center":return g.default(R);case void 0:case null:case"centroid":return b.default(R);default:throw new Error("invalid origin")}}return js$A.exports=E,jsExports$c.default=E,jsExports$c}var jsExports$b={},js$z={get exports(){return jsExports$b},set exports(n){jsExports$b=n}},hasRequiredJs$A;function requireJs$A(){if(hasRequiredJs$A)return jsExports$b;hasRequiredJs$A=1;var n=requireJs$1F(),e=requireJs$1G(),t=requireJs$1D(),i=requireJs$1w(),s=requireJs$H();function r(l){return l&&typeof l=="object"&&"default"in l?l:{default:l}}var o=r(i),c=r(s);function _(l,d,f,g){if(g=g||{},!e.isObject(g))throw new Error("options is invalid");var b=g.units,C=g.zTranslation,P=g.mutate;if(!l)throw new Error("geojson is required");if(d==null||isNaN(d))throw new Error("distance is required");if(C&&typeof C!="number"&&isNaN(C))throw new Error("zTranslation is not a number");if(C=C!==void 0?C:0,d===0&&C===0)return l;if(f==null||isNaN(f))throw new Error("direction is required");return d<0&&(d=-d,f=f+180),(P===!1||P===void 0)&&(l=o.default(l)),n.coordEach(l,function(S){var L=t.getCoords(c.default(S,d,f,{units:b}));S[0]=L[0],S[1]=L[1],C&&S.length===3&&(S[2]+=C)}),l}return js$z.exports=_,jsExports$b.default=_,jsExports$b}var jsExports$a={},js$y={get exports(){return jsExports$a},set exports(n){jsExports$a=n}},hasRequiredJs$z;function requireJs$z(){if(hasRequiredJs$z)return jsExports$a;hasRequiredJs$z=1;var n=requireJs$1F(),e=requireJs$1D(),t=requireJs$1G();function i(C){var P=C[0],S=C[1];return[S[0]-P[0],S[1]-P[1]]}function s(C,P){return C[0]*P[1]-P[0]*C[1]}function r(C,P){return[C[0]+P[0],C[1]+P[1]]}function o(C,P){return[C[0]-P[0],C[1]-P[1]]}function c(C,P){return[C*P[0],C*P[1]]}function _(C,P){var S=C[0],L=i(C),E=P[0],M=i(P),D=s(L,M),R=o(E,S),k=s(R,M),N=k/D,$=r(S,c(N,L));return $}function l(C,P){var S=i(C),L=i(P);return s(S,L)===0}function d(C,P){return l(C,P)?!1:_(C,P)}function f(C,P,S){if(S=S||{},!t.isObject(S))throw new Error("options is invalid");var L=S.units;if(!C)throw new Error("geojson is required");if(P==null||isNaN(P))throw new Error("distance is required");var E=e.getType(C),M=C.properties;switch(E){case"LineString":return g(C,P,L);case"MultiLineString":var D=[];return n.flattenEach(C,function(R){D.push(g(R,P,L).geometry.coordinates)}),t.multiLineString(D,M);default:throw new Error("geometry "+E+" is not supported")}}function g(C,P,S){var L=[],E=t.lengthToDegrees(P,S),M=e.getCoords(C),D=[];return M.forEach(function(R,k){if(k!==M.length-1){var N=b(R,M[k+1],E);if(L.push(N),k>0){var $=L[k-1],B=d(N,$);B!==!1&&($[1]=B,N[0]=B),D.push($[0]),k===M.length-2&&(D.push(N[0]),D.push(N[1]))}M.length===2&&(D.push(N[0]),D.push(N[1]))}}),t.lineString(D,C.properties)}function b(C,P,S){var L=Math.sqrt((C[0]-P[0])*(C[0]-P[0])+(C[1]-P[1])*(C[1]-P[1])),E=C[0]+S*(P[1]-C[1])/L,M=P[0]+S*(P[1]-C[1])/L,D=C[1]+S*(C[0]-P[0])/L,R=P[1]+S*(C[0]-P[0])/L;return[[E,D],[M,R]]}return js$y.exports=f,jsExports$a.default=f,jsExports$a}var js$x={},Graph={},Node={},util={},hasRequiredUtil;function requireUtil(){if(hasRequiredUtil)return util;hasRequiredUtil=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(util,"__esModule",{value:!0});var e=n(requireJs$1A()),t=requireJs$1G();function i(_){return(_>0)-(_<0)||+_}function s(_,l,d){var f=l[0]-_[0],g=l[1]-_[1],b=d[0]-l[0],C=d[1]-l[1];return i(f*C-b*g)}util.orientationIndex=s;function r(_,l){var d=_.geometry.coordinates[0].map(function(C){return C[0]}),f=_.geometry.coordinates[0].map(function(C){return C[1]}),g=l.geometry.coordinates[0].map(function(C){return C[0]}),b=l.geometry.coordinates[0].map(function(C){return C[1]});return Math.max.apply(null,d)===Math.max.apply(null,g)&&Math.max.apply(null,f)===Math.max.apply(null,b)&&Math.min.apply(null,d)===Math.min.apply(null,g)&&Math.min.apply(null,f)===Math.min.apply(null,b)}util.envelopeIsEqual=r;function o(_,l){return l.geometry.coordinates[0].every(function(d){return e.default(t.point(d),_)})}util.envelopeContains=o;function c(_,l){return _[0]===l[0]&&_[1]===l[1]}return util.coordinatesEqual=c,util}var hasRequiredNode;function requireNode(){if(hasRequiredNode)return Node;hasRequiredNode=1,Object.defineProperty(Node,"__esModule",{value:!0});var n=requireUtil(),e=function(){function t(i){this.id=t.buildId(i),this.coordinates=i,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return t.buildId=function(i){return i.join(",")},t.prototype.removeInnerEdge=function(i){this.innerEdges=this.innerEdges.filter(function(s){return s.from.id!==i.from.id})},t.prototype.removeOuterEdge=function(i){this.outerEdges=this.outerEdges.filter(function(s){return s.to.id!==i.to.id})},t.prototype.addOuterEdge=function(i){this.outerEdges.push(i),this.outerEdgesSorted=!1},t.prototype.sortOuterEdges=function(){var i=this;this.outerEdgesSorted||(this.outerEdges.sort(function(s,r){var o=s.to,c=r.to;if(o.coordinates[0]-i.coordinates[0]>=0&&c.coordinates[0]-i.coordinates[0]<0)return 1;if(o.coordinates[0]-i.coordinates[0]<0&&c.coordinates[0]-i.coordinates[0]>=0)return-1;if(o.coordinates[0]-i.coordinates[0]===0&&c.coordinates[0]-i.coordinates[0]===0)return o.coordinates[1]-i.coordinates[1]>=0||c.coordinates[1]-i.coordinates[1]>=0?o.coordinates[1]-c.coordinates[1]:c.coordinates[1]-o.coordinates[1];var _=n.orientationIndex(i.coordinates,o.coordinates,c.coordinates);if(_<0)return 1;if(_>0)return-1;var l=Math.pow(o.coordinates[0]-i.coordinates[0],2)+Math.pow(o.coordinates[1]-i.coordinates[1],2),d=Math.pow(c.coordinates[0]-i.coordinates[0],2)+Math.pow(c.coordinates[1]-i.coordinates[1],2);return l-d}),this.outerEdgesSorted=!0)},t.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},t.prototype.getOuterEdge=function(i){return this.sortOuterEdges(),this.outerEdges[i]},t.prototype.addInnerEdge=function(i){this.innerEdges.push(i)},t}();return Node.default=e,Node}var Edge={},hasRequiredEdge;function requireEdge(){if(hasRequiredEdge)return Edge;hasRequiredEdge=1,Object.defineProperty(Edge,"__esModule",{value:!0});var n=requireJs$1G(),e=requireUtil(),t=function(){function i(s,r){this.from=s,this.to=r,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return i.prototype.getSymetric=function(){return this.symetric||(this.symetric=new i(this.to,this.from),this.symetric.symetric=this),this.symetric},i.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},i.prototype.isEqual=function(s){return this.from.id===s.from.id&&this.to.id===s.to.id},i.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},i.prototype.toLineString=function(){return n.lineString([this.from.coordinates,this.to.coordinates])},i.prototype.compareTo=function(s){return e.orientationIndex(s.from.coordinates,s.to.coordinates,this.to.coordinates)},i}();return Edge.default=t,Edge}var EdgeRing={},hasRequiredEdgeRing;function requireEdgeRing(){if(hasRequiredEdgeRing)return EdgeRing;hasRequiredEdgeRing=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(EdgeRing,"__esModule",{value:!0});var e=requireUtil(),t=requireJs$1G(),i=n(requireJs$1m()),s=n(requireJs$1A()),r=function(){function o(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return o.prototype.push=function(c){this.edges.push(c),this.polygon=this.envelope=void 0},o.prototype.get=function(c){return this.edges[c]},Object.defineProperty(o.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),o.prototype.forEach=function(c){this.edges.forEach(c)},o.prototype.map=function(c){return this.edges.map(c)},o.prototype.some=function(c){return this.edges.some(c)},o.prototype.isValid=function(){return!0},o.prototype.isHole=function(){var c=this,_=this.edges.reduce(function(g,b,C){return b.from.coordinates[1]>c.edges[g].from.coordinates[1]&&(g=C),g},0),l=(_===0?this.length:_)-1,d=(_+1)%this.length,f=e.orientationIndex(this.edges[l].from.coordinates,this.edges[_].from.coordinates,this.edges[d].from.coordinates);return f===0?this.edges[l].from.coordinates[0]>this.edges[d].from.coordinates[0]:f>0},o.prototype.toMultiPoint=function(){return t.multiPoint(this.edges.map(function(c){return c.from.coordinates}))},o.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var c=this.edges.map(function(_){return _.from.coordinates});return c.push(this.edges[0].from.coordinates),this.polygon=t.polygon([c])},o.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=i.default(this.toPolygon())},o.findEdgeRingContaining=function(c,_){var l=c.getEnvelope(),d,f;return _.forEach(function(g){var b=g.getEnvelope();if(f&&(d=f.getEnvelope()),!e.envelopeIsEqual(b,l)&&e.envelopeContains(b,l)){for(var C=c.map(function(D){return D.from.coordinates}),P=void 0,S=function(D){g.some(function(R){return e.coordinatesEqual(D,R.from.coordinates)})||(P=D)},L=0,E=C;L<E.length;L++){var M=E[L];S(M)}P&&g.inside(t.point(P))&&(!f||e.envelopeContains(d,b))&&(f=g)}}),f},o.prototype.inside=function(c){return s.default(c,this.toPolygon())},o}();return EdgeRing.default=r,EdgeRing}var hasRequiredGraph;function requireGraph(){if(hasRequiredGraph)return Graph;hasRequiredGraph=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(Graph,"__esModule",{value:!0});var e=n(requireNode()),t=n(requireEdge()),i=n(requireEdgeRing()),s=requireJs$1F(),r=requireJs$1D();function o(_){if(!_)throw new Error("No geojson passed");if(_.type!=="FeatureCollection"&&_.type!=="GeometryCollection"&&_.type!=="MultiLineString"&&_.type!=="LineString"&&_.type!=="Feature")throw new Error("Invalid input type '"+_.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}var c=function(){function _(){this.edges=[],this.nodes={}}return _.fromGeoJson=function(l){o(l);var d=new _;return s.flattenEach(l,function(f){r.featureOf(f,"LineString","Graph::fromGeoJson"),s.coordReduce(f,function(g,b){if(g){var C=d.getNode(g),P=d.getNode(b);d.addEdge(C,P)}return b})}),d},_.prototype.getNode=function(l){var d=e.default.buildId(l),f=this.nodes[d];return f||(f=this.nodes[d]=new e.default(l)),f},_.prototype.addEdge=function(l,d){var f=new t.default(l,d),g=f.getSymetric();this.edges.push(f),this.edges.push(g)},_.prototype.deleteDangles=function(){var l=this;Object.keys(this.nodes).map(function(d){return l.nodes[d]}).forEach(function(d){return l._removeIfDangle(d)})},_.prototype._removeIfDangle=function(l){var d=this;if(l.innerEdges.length<=1){var f=l.getOuterEdges().map(function(g){return g.to});this.removeNode(l),f.forEach(function(g){return d._removeIfDangle(g)})}},_.prototype.deleteCutEdges=function(){var l=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(d){d.label===d.symetric.label&&(l.removeEdge(d.symetric),l.removeEdge(d))})},_.prototype._computeNextCWEdges=function(l){var d=this;typeof l>"u"?Object.keys(this.nodes).forEach(function(f){return d._computeNextCWEdges(d.nodes[f])}):l.getOuterEdges().forEach(function(f,g){l.getOuterEdge((g===0?l.getOuterEdges().length:g)-1).symetric.next=f})},_.prototype._computeNextCCWEdges=function(l,d){for(var f=l.getOuterEdges(),g,b,C=f.length-1;C>=0;--C){var P=f[C],S=P.symetric,L=void 0,E=void 0;P.label===d&&(L=P),S.label===d&&(E=S),!(!L||!E)&&(E&&(b=E),L&&(b&&(b.next=L,b=void 0),g||(g=L)))}b&&(b.next=g)},_.prototype._findLabeledEdgeRings=function(){var l=[],d=0;return this.edges.forEach(function(f){if(!(f.label>=0)){l.push(f);var g=f;do g.label=d,g=g.next;while(!f.isEqual(g));d++}}),l},_.prototype.getEdgeRings=function(){var l=this;this._computeNextCWEdges(),this.edges.forEach(function(f){f.label=void 0}),this._findLabeledEdgeRings().forEach(function(f){l._findIntersectionNodes(f).forEach(function(g){l._computeNextCCWEdges(g,f.label)})});var d=[];return this.edges.forEach(function(f){f.ring||d.push(l._findEdgeRing(f))}),d},_.prototype._findIntersectionNodes=function(l){var d=[],f=l,g=function(){var b=0;f.from.getOuterEdges().forEach(function(C){C.label===l.label&&++b}),b>1&&d.push(f.from),f=f.next};do g();while(!l.isEqual(f));return d},_.prototype._findEdgeRing=function(l){var d=l,f=new i.default;do f.push(d),d.ring=f,d=d.next;while(!l.isEqual(d));return f},_.prototype.removeNode=function(l){var d=this;l.getOuterEdges().forEach(function(f){return d.removeEdge(f)}),l.innerEdges.forEach(function(f){return d.removeEdge(f)}),delete this.nodes[l.id]},_.prototype.removeEdge=function(l){this.edges=this.edges.filter(function(d){return!d.isEqual(l)}),l.deleteEdge()},_}();return Graph.default=c,Graph}var hasRequiredJs$y;function requireJs$y(){if(hasRequiredJs$y)return js$x;hasRequiredJs$y=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(js$x,"__esModule",{value:!0});var e=requireJs$1G(),t=n(requireGraph()),i=n(requireEdgeRing());function s(r){var o=t.default.fromGeoJson(r);o.deleteDangles(),o.deleteCutEdges();var c=[],_=[];return o.getEdgeRings().filter(function(l){return l.isValid()}).forEach(function(l){l.isHole()?c.push(l):_.push(l)}),c.forEach(function(l){i.default.findEdgeRingContaining(l,_)&&_.push(l)}),e.featureCollection(_.map(function(l){return l.toPolygon()}))}return js$x.default=s,js$x}var js$w={},hasRequiredJs$x;function requireJs$x(){if(hasRequiredJs$x)return js$w;hasRequiredJs$x=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(js$w,"__esModule",{value:!0});var e=n(requireJs$1A()),t=n(requireJs$18()),i=requireJs$1F(),s=n(requireJs$N());function r(b,C){var P=!0;return i.flattenEach(b,function(S){i.flattenEach(C,function(L){if(P===!1)return!1;P=o(S.geometry,L.geometry)})}),P}function o(b,C){switch(b.type){case"Point":switch(C.type){case"Point":return!g(b.coordinates,C.coordinates);case"LineString":return!c(C,b);case"Polygon":return!e.default(b,C)}break;case"LineString":switch(C.type){case"Point":return!c(b,C);case"LineString":return!_(b,C);case"Polygon":return!l(C,b)}break;case"Polygon":switch(C.type){case"Point":return!e.default(C,b);case"LineString":return!l(b,C);case"Polygon":return!d(C,b)}}return!1}function c(b,C){for(var P=0;P<b.coordinates.length-1;P++)if(f(b.coordinates[P],b.coordinates[P+1],C.coordinates))return!0;return!1}function _(b,C){var P=t.default(b,C);return P.features.length>0}function l(b,C){for(var P=0,S=C.coordinates;P<S.length;P++){var L=S[P];if(e.default(L,b))return!0}var E=t.default(C,s.default(b));return E.features.length>0}function d(b,C){for(var P=0,S=b.coordinates[0];P<S.length;P++){var L=S[P];if(e.default(L,C))return!0}for(var E=0,M=C.coordinates[0];E<M.length;E++){var D=M[E];if(e.default(D,b))return!0}var R=t.default(s.default(b),s.default(C));return R.features.length>0}function f(b,C,P){var S=P[0]-b[0],L=P[1]-b[1],E=C[0]-b[0],M=C[1]-b[1],D=S*M-L*E;return D!==0?!1:Math.abs(E)>=Math.abs(M)?E>0?b[0]<=P[0]&&P[0]<=C[0]:C[0]<=P[0]&&P[0]<=b[0]:M>0?b[1]<=P[1]&&P[1]<=C[1]:C[1]<=P[1]&&P[1]<=b[1]}function g(b,C){return b[0]===C[0]&&b[1]===C[1]}return js$w.default=r,js$w}var js$v={},hasRequiredJs$w;function requireJs$w(){if(hasRequiredJs$w)return js$v;hasRequiredJs$w=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(js$v,"__esModule",{value:!0});var e=n(requireJs$1E()),t=n(requireJs$1A()),i=n(requireJs$X()),s=requireJs$1D();function r(S,L){var E=s.getGeom(S),M=s.getGeom(L),D=E.type,R=M.type,k=E.coordinates,N=M.coordinates;switch(D){case"Point":switch(R){case"Point":return C(k,N);default:throw new Error("feature2 "+R+" geometry not supported")}case"MultiPoint":switch(R){case"Point":return o(E,M);case"MultiPoint":return c(E,M);default:throw new Error("feature2 "+R+" geometry not supported")}case"LineString":switch(R){case"Point":return i.default(M,E,{ignoreEndVertices:!0});case"LineString":return d(E,M);case"MultiPoint":return _(E,M);default:throw new Error("feature2 "+R+" geometry not supported")}case"Polygon":switch(R){case"Point":return t.default(M,E,{ignoreBoundary:!0});case"LineString":return f(E,M);case"Polygon":return g(E,M);case"MultiPoint":return l(E,M);default:throw new Error("feature2 "+R+" geometry not supported")}default:throw new Error("feature1 "+D+" geometry not supported")}}js$v.default=r;function o(S,L){var E,M=!1;for(E=0;E<S.coordinates.length;E++)if(C(S.coordinates[E],L.coordinates)){M=!0;break}return M}js$v.isPointInMultiPoint=o;function c(S,L){for(var E=0,M=L.coordinates;E<M.length;E++){for(var D=M[E],R=!1,k=0,N=S.coordinates;k<N.length;k++){var $=N[k];if(C(D,$)){R=!0;break}}if(!R)return!1}return!0}js$v.isMultiPointInMultiPoint=c;function _(S,L){for(var E=!1,M=0,D=L.coordinates;M<D.length;M++){var R=D[M];if(i.default(R,S,{ignoreEndVertices:!0})&&(E=!0),!i.default(R,S))return!1}return!!E}js$v.isMultiPointOnLine=_;function l(S,L){for(var E=0,M=L.coordinates;E<M.length;E++){var D=M[E];if(!t.default(D,S,{ignoreBoundary:!0}))return!1}return!0}js$v.isMultiPointInPoly=l;function d(S,L){for(var E=!1,M=0,D=L.coordinates;M<D.length;M++){var R=D[M];if(i.default({type:"Point",coordinates:R},S,{ignoreEndVertices:!0})&&(E=!0),!i.default({type:"Point",coordinates:R},S,{ignoreEndVertices:!1}))return!1}return E}js$v.isLineOnLine=d;function f(S,L){var E=!1,M=0,D=e.default(S),R=e.default(L);if(!b(D,R))return!1;for(M;M<L.coordinates.length-1;M++){var k=P(L.coordinates[M],L.coordinates[M+1]);if(t.default({type:"Point",coordinates:k},S,{ignoreBoundary:!0})){E=!0;break}}return E}js$v.isLineInPoly=f;function g(S,L){if(S.type==="Feature"&&S.geometry===null||L.type==="Feature"&&L.geometry===null)return!1;var E=e.default(S),M=e.default(L);if(!b(E,M))return!1;for(var D=s.getGeom(L).coordinates,R=0,k=D;R<k.length;R++)for(var N=k[R],$=0,B=N;$<B.length;$++){var F=B[$];if(!t.default(F,S))return!1}return!0}js$v.isPolyInPoly=g;function b(S,L){return!(S[0]>L[0]||S[2]<L[2]||S[1]>L[1]||S[3]<L[3])}js$v.doBBoxOverlap=b;function C(S,L){return S[0]===L[0]&&S[1]===L[1]}js$v.compareCoords=C;function P(S,L){return[(S[0]+L[0])/2,(S[1]+L[1])/2]}return js$v.getMidpoint=P,js$v}var js$u={},hasRequiredJs$v;function requireJs$v(){if(hasRequiredJs$v)return js$u;hasRequiredJs$v=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(js$u,"__esModule",{value:!0});var e=n(requireJs$18()),t=requireJs$N(),i=n(requireJs$1A()),s=requireJs$1D(),r=requireJs$1G();function o(g,b){var C=s.getGeom(g),P=s.getGeom(b),S=C.type,L=P.type;switch(S){case"MultiPoint":switch(L){case"LineString":return c(C,P);case"Polygon":return d(C,P);default:throw new Error("feature2 "+L+" geometry not supported")}case"LineString":switch(L){case"MultiPoint":return c(P,C);case"LineString":return _(C,P);case"Polygon":return l(C,P);default:throw new Error("feature2 "+L+" geometry not supported")}case"Polygon":switch(L){case"MultiPoint":return d(P,C);case"LineString":return l(P,C);default:throw new Error("feature2 "+L+" geometry not supported")}default:throw new Error("feature1 "+S+" geometry not supported")}}function c(g,b){for(var C=!1,P=!1,S=g.coordinates.length,L=0;L<S&&!C&&!P;){for(var E=0;E<b.coordinates.length-1;E++){var M=!0;(E===0||E===b.coordinates.length-2)&&(M=!1),f(b.coordinates[E],b.coordinates[E+1],g.coordinates[L],M)?C=!0:P=!0}L++}return C&&P}function _(g,b){var C=e.default(g,b);if(C.features.length>0)for(var P=0;P<g.coordinates.length-1;P++)for(var S=0;S<b.coordinates.length-1;S++){var L=!0;if((S===0||S===b.coordinates.length-2)&&(L=!1),f(g.coordinates[P],g.coordinates[P+1],b.coordinates[S],L))return!0}return!1}function l(g,b){var C=t.polygonToLine(b),P=e.default(g,C);return P.features.length>0}function d(g,b){for(var C=!1,P=!1,S=g.coordinates.length,L=0;L<S&&(!C||!P);L++)i.default(r.point(g.coordinates[L]),b)?C=!0:P=!0;return P&&C}function f(g,b,C,P){var S=C[0]-g[0],L=C[1]-g[1],E=b[0]-g[0],M=b[1]-g[1],D=S*M-L*E;return D!==0?!1:P?Math.abs(E)>=Math.abs(M)?E>0?g[0]<=C[0]&&C[0]<=b[0]:b[0]<=C[0]&&C[0]<=g[0]:M>0?g[1]<=C[1]&&C[1]<=b[1]:b[1]<=C[1]&&C[1]<=g[1]:Math.abs(E)>=Math.abs(M)?E>0?g[0]<C[0]&&C[0]<b[0]:b[0]<C[0]&&C[0]<g[0]:M>0?g[1]<C[1]&&C[1]<b[1]:b[1]<C[1]&&C[1]<g[1]}return js$u.default=o,js$u}var js$t={},geojsonEquality,hasRequiredGeojsonEquality;function requireGeojsonEquality(){if(hasRequiredGeojsonEquality)return geojsonEquality;hasRequiredGeojsonEquality=1;var n=requireDeepEqual(),e=function(r){this.precision=r&&r.precision?r.precision:17,this.direction=r&&r.direction?r.direction:!1,this.pseudoNode=r&&r.pseudoNode?r.pseudoNode:!1,this.objectComparator=r&&r.objectComparator?r.objectComparator:s};e.prototype.compare=function(r,o){if(r.type!==o.type||!i(r,o))return!1;switch(r.type){case"Point":return this.compareCoord(r.coordinates,o.coordinates);case"LineString":return this.compareLine(r.coordinates,o.coordinates,0,!1);case"Polygon":return this.comparePolygon(r,o);case"Feature":return this.compareFeature(r,o);default:if(r.type.indexOf("Multi")===0){var c=this,_=t(r),l=t(o);return _.every(function(d){return this.some(function(f){return c.compare(d,f)})},l)}}return!1};function t(r){return r.coordinates.map(function(o){return{type:r.type.replace("Multi",""),coordinates:o}})}function i(r,o){return r.hasOwnProperty("coordinates")?r.coordinates.length===o.coordinates.length:r.length===o.length}e.prototype.compareCoord=function(r,o){if(r.length!==o.length)return!1;for(var c=0;c<r.length;c++)if(r[c].toFixed(this.precision)!==o[c].toFixed(this.precision))return!1;return!0},e.prototype.compareLine=function(r,o,c,_){if(!i(r,o))return!1;var l=this.pseudoNode?r:this.removePseudo(r),d=this.pseudoNode?o:this.removePseudo(o);if(!(_&&!this.compareCoord(l[0],d[0])&&(d=this.fixStartIndex(d,l),!d))){var f=this.compareCoord(l[c],d[c]);return this.direction||f?this.comparePath(l,d):this.compareCoord(l[c],d[d.length-(1+c)])?this.comparePath(l.slice().reverse(),d):!1}},e.prototype.fixStartIndex=function(r,o){for(var c,_=-1,l=0;l<r.length;l++)if(this.compareCoord(r[l],o[0])){_=l;break}return _>=0&&(c=[].concat(r.slice(_,r.length),r.slice(1,_+1))),c},e.prototype.comparePath=function(r,o){var c=this;return r.every(function(_,l){return c.compareCoord(_,this[l])},o)},e.prototype.comparePolygon=function(r,o){if(this.compareLine(r.coordinates[0],o.coordinates[0],1,!0)){var c=r.coordinates.slice(1,r.coordinates.length),_=o.coordinates.slice(1,o.coordinates.length),l=this;return c.every(function(d){return this.some(function(f){return l.compareLine(d,f,1,!0)})},_)}else return!1},e.prototype.compareFeature=function(r,o){return r.id!==o.id||!this.objectComparator(r.properties,o.properties)||!this.compareBBox(r,o)?!1:this.compare(r.geometry,o.geometry)},e.prototype.compareBBox=function(r,o){return!!(!r.bbox&&!o.bbox||r.bbox&&o.bbox&&this.compareCoord(r.bbox,o.bbox))},e.prototype.removePseudo=function(r){return r};function s(r,o){return n(r,o,{strict:!0})}return geojsonEquality=e,geojsonEquality}var hasRequiredJs$u;function requireJs$u(){if(hasRequiredJs$u)return js$t;hasRequiredJs$u=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(js$t,"__esModule",{value:!0});var e=requireJs$1F(),t=requireJs$1D(),i=n(requireJs$K()),s=n(requireJs$18()),r=n(requireGeojsonEquality());function o(c,_){var l=t.getGeom(c),d=t.getGeom(_),f=l.type,g=d.type;if(f==="MultiPoint"&&g!=="MultiPoint"||(f==="LineString"||f==="MultiLineString")&&g!=="LineString"&&g!=="MultiLineString"||(f==="Polygon"||f==="MultiPolygon")&&g!=="Polygon"&&g!=="MultiPolygon")throw new Error("features must be of the same type");if(f==="Point")throw new Error("Point geometry not supported");var b=new r.default({precision:6});if(b.compare(c,_))return!1;var C=0;switch(f){case"MultiPoint":for(var P=0;P<l.coordinates.length;P++)for(var S=0;S<d.coordinates.length;S++){var L=l.coordinates[P],E=d.coordinates[S];if(L[0]===E[0]&&L[1]===E[1])return!0}return!1;case"LineString":case"MultiLineString":e.segmentEach(c,function(M){e.segmentEach(_,function(D){i.default(M,D).features.length&&C++})});break;case"Polygon":case"MultiPolygon":e.segmentEach(c,function(M){e.segmentEach(_,function(D){s.default(M,D).features.length&&C++})});break}return C>0}return js$t.default=o,js$t}var js$s={},hasRequiredJs$t;function requireJs$t(){if(hasRequiredJs$t)return js$s;hasRequiredJs$t=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(js$s,"__esModule",{value:!0});var e=n(requireGeojsonEquality()),t=n(requireJs$1s()),i=requireJs$1D();function s(r,o){var c=i.getGeom(r).type,_=i.getGeom(o).type;if(c!==_)return!1;var l=new e.default({precision:6});return l.compare(t.default(r),t.default(o))}return js$s.default=s,js$s}var js$r={},hasRequiredJs$s;function requireJs$s(){if(hasRequiredJs$s)return js$r;hasRequiredJs$s=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(js$r,"__esModule",{value:!0});var e=n(requireJs$x()),t=requireJs$1F();function i(s,r){var o=!1;return t.flattenEach(s,function(c){t.flattenEach(r,function(_){if(o===!0)return!0;o=!e.default(c.geometry,_.geometry)})}),o}return js$r.default=i,js$r}var js$q={},libExports={},lib={get exports(){return libExports},set exports(n){libExports=n}},DBSCANExports={},DBSCAN={get exports(){return DBSCANExports},set exports(n){DBSCANExports=n}},hasRequiredDBSCAN;function requireDBSCAN(){return hasRequiredDBSCAN||(hasRequiredDBSCAN=1,function(n){function e(t,i,s,r){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,i,s,r)}e.prototype.run=function(t,i,s,r){this._init(t,i,s,r);for(var o=0;o<this._datasetLength;o++)if(this._visited[o]!==1){this._visited[o]=1;var c=this._regionQuery(o);if(c.length<this.minPts)this.noise.push(o);else{var _=this.clusters.length;this.clusters.push([]),this._addToCluster(o,_),this._expandCluster(_,c)}}return this.clusters},e.prototype._init=function(t,i,s,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}i&&(this.epsilon=i),s&&(this.minPts=s),r&&(this.distance=r)},e.prototype._expandCluster=function(t,i){for(var s=0;s<i.length;s++){var r=i[s];if(this._visited[r]!==1){this._visited[r]=1;var o=this._regionQuery(r);o.length>=this.minPts&&(i=this._mergeArrays(i,o))}this._assigned[r]!==1&&this._addToCluster(r,t)}},e.prototype._addToCluster=function(t,i){this.clusters[i].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var i=[],s=0;s<this._datasetLength;s++){var r=this.distance(this.dataset[t],this.dataset[s]);r<this.epsilon&&i.push(s)}return i},e.prototype._mergeArrays=function(t,i){for(var s=i.length,r=0;r<s;r++){var o=i[r];t.indexOf(o)<0&&t.push(o)}return t},e.prototype._euclideanDistance=function(t,i){for(var s=0,r=Math.min(t.length,i.length);r--;)s+=(t[r]-i[r])*(t[r]-i[r]);return Math.sqrt(s)},n.exports&&(n.exports=e)}(DBSCAN)),DBSCANExports}var KMEANSExports={},KMEANS={get exports(){return KMEANSExports},set exports(n){KMEANSExports=n}},hasRequiredKMEANS;function requireKMEANS(){return hasRequiredKMEANS||(hasRequiredKMEANS=1,function(n){function e(t,i,s){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,i,s)}e.prototype.init=function(t,i,s){this.assignments=[],this.centroids=[],typeof t<"u"&&(this.dataset=t),typeof i<"u"&&(this.k=i),typeof s<"u"&&(this.distance=s)},e.prototype.run=function(t,i){this.init(t,i);for(var s=this.dataset.length,r=0;r<this.k;r++)this.centroids[r]=this.randomCentroid();for(var o=!0;o;){o=this.assign();for(var c=0;c<this.k;c++){for(var _=new Array(g),l=0,d=0;d<g;d++)_[d]=0;for(var f=0;f<s;f++){var g=this.dataset[f].length;if(c===this.assignments[f]){for(var d=0;d<g;d++)_[d]+=this.dataset[f][d];l++}}if(l>0){for(var d=0;d<g;d++)_[d]/=l;this.centroids[c]=_}else this.centroids[c]=this.randomCentroid(),o=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t=this.dataset.length-1,i,s;do s=Math.round(Math.random()*t),i=this.dataset[s];while(this.centroids.indexOf(i)>=0);return i},e.prototype.assign=function(){for(var t=!1,i=this.dataset.length,s,r=0;r<i;r++)s=this.argmin(this.dataset[r],this.centroids,this.distance),s!=this.assignments[r]&&(this.assignments[r]=s,t=!0);return t},e.prototype.getClusters=function(){for(var t=new Array(this.k),i,s=0;s<this.assignments.length;s++)i=this.assignments[s],typeof t[i]>"u"&&(t[i]=[]),t[i].push(s);return t},e.prototype.argmin=function(t,i,s){for(var r=Number.MAX_VALUE,o=0,c=i.length,_,l=0;l<c;l++)_=s(t,i[l]),_<r&&(r=_,o=l);return o},e.prototype.distance=function(t,i){for(var s=0,r=Math.min(t.length,i.length);r--;){var o=t[r]-i[r];s+=o*o}return Math.sqrt(s)},n.exports&&(n.exports=e)}(KMEANS)),KMEANSExports}var OPTICSExports={},OPTICS={get exports(){return OPTICSExports},set exports(n){OPTICSExports=n}},PriorityQueueExports={},PriorityQueue={get exports(){return PriorityQueueExports},set exports(n){PriorityQueueExports=n}},hasRequiredPriorityQueue;function requirePriorityQueue(){return hasRequiredPriorityQueue||(hasRequiredPriorityQueue=1,function(n){function e(t,i,s){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,i,s)}e.prototype.insert=function(t,i){for(var s=this._queue.length,r=s;r--;){var o=this._priorities[r];this._sorting==="desc"?i>o&&(s=r):i<o&&(s=r)}this._insertAt(t,i,s)},e.prototype.remove=function(t){for(var i=this._queue.length;i--;){var s=this._queue[i];if(t===s){this._queue.splice(i,1),this._priorities.splice(i,1);break}}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],i=0,s=this._queue.length;i<s;i++)t.push([this._queue[i],this._priorities[i]]);return t},e.prototype._init=function(t,i,s){if(t&&i){if(this._queue=[],this._priorities=[],t.length!==i.length)throw new Error("Arrays must have the same length");for(var r=0;r<t.length;r++)this.insert(t[r],i[r])}s&&(this._sorting=s)},e.prototype._insertAt=function(t,i,s){this._queue.length===s?(this._queue.push(t),this._priorities.push(i)):(this._queue.splice(s,0,t),this._priorities.splice(s,0,i))},n.exports&&(n.exports=e)}(PriorityQueue)),PriorityQueueExports}var hasRequiredOPTICS;function requireOPTICS(){return hasRequiredOPTICS||(hasRequiredOPTICS=1,function(n){if(n.exports)var e=requirePriorityQueue();function t(i,s,r,o){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(i,s,r,o)}t.prototype.run=function(i,s,r,o){this._init(i,s,r,o);for(var c=0,_=this.dataset.length;c<_;c++)if(this._processed[c]!==1){this._processed[c]=1,this.clusters.push([c]);var l=this.clusters.length-1;this._orderedList.push(c);var d=new e(null,null,"asc"),f=this._regionQuery(c);this._distanceToCore(c)!==void 0&&(this._updateQueue(c,f,d),this._expandCluster(l,d))}return this.clusters},t.prototype.getReachabilityPlot=function(){for(var i=[],s=0,r=this._orderedList.length;s<r;s++){var o=this._orderedList[s],c=this._reachability[o];i.push([o,c])}return i},t.prototype._init=function(i,s,r,o){if(i){if(!(i instanceof Array))throw Error("Dataset must be of type array, "+typeof i+" given");this.dataset=i,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}s&&(this.epsilon=s),r&&(this.minPts=r),o&&(this.distance=o)},t.prototype._updateQueue=function(i,s,r){var o=this;this._coreDistance=this._distanceToCore(i),s.forEach(function(c){if(o._processed[c]===void 0){var _=o.distance(o.dataset[i],o.dataset[c]),l=Math.max(o._coreDistance,_);o._reachability[c]===void 0?(o._reachability[c]=l,r.insert(c,l)):l<o._reachability[c]&&(o._reachability[c]=l,r.remove(c),r.insert(c,l))}})},t.prototype._expandCluster=function(i,s){for(var r=s.getElements(),o=0,c=r.length;o<c;o++){var _=r[o];if(this._processed[_]===void 0){var l=this._regionQuery(_);this._processed[_]=1,this.clusters[i].push(_),this._orderedList.push(_),this._distanceToCore(_)!==void 0&&(this._updateQueue(_,l,s),this._expandCluster(i,s))}}},t.prototype._distanceToCore=function(i){for(var s=this.epsilon,r=0;r<s;r++){var o=this._regionQuery(i,r);if(o.length>=this.minPts)return r}},t.prototype._regionQuery=function(i,s){s=s||this.epsilon;for(var r=[],o=0,c=this.dataset.length;o<c;o++)this.distance(this.dataset[i],this.dataset[o])<s&&r.push(o);return r},t.prototype._euclideanDistance=function(i,s){for(var r=0,o=Math.min(i.length,s.length);o--;)r+=(i[o]-s[o])*(i[o]-s[o]);return Math.sqrt(r)},n.exports&&(n.exports=t)}(OPTICS)),OPTICSExports}var hasRequiredLib;function requireLib(){return hasRequiredLib||(hasRequiredLib=1,function(n){n.exports&&(n.exports={DBSCAN:requireDBSCAN(),KMEANS:requireKMEANS(),OPTICS:requireOPTICS(),PriorityQueue:requirePriorityQueue()})}(lib)),libExports}var hasRequiredJs$r;function requireJs$r(){if(hasRequiredJs$r)return js$q;hasRequiredJs$r=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(js$q,"__esModule",{value:!0});var e=n(requireJs$1w()),t=n(requireJs$1y()),i=requireJs$1F(),s=requireJs$1G(),r=n(requireLib());function o(c,_,l){l===void 0&&(l={}),l.mutate!==!0&&(c=e.default(c)),l.minPoints=l.minPoints||3;var d=new r.default.DBSCAN,f=d.run(i.coordAll(c),s.convertLength(_,l.units),l.minPoints,t.default),g=-1;return f.forEach(function(b){g++,b.forEach(function(C){var P=c.features[C];P.properties||(P.properties={}),P.properties.cluster=g,P.properties.dbscan="core"})}),d.noise.forEach(function(b){var C=c.features[b];C.properties||(C.properties={}),C.properties.cluster?C.properties.dbscan="edge":C.properties.dbscan="noise"}),c}return js$q.default=o,js$q}var js$p={},distance$1,hasRequiredDistance;function requireDistance(){return hasRequiredDistance||(hasRequiredDistance=1,distance$1={eudist:function(e,t,i){for(var s=e.length,r=0,o=0;o<s;o++){var c=(e[o]||0)-(t[o]||0);r+=c*c}return i?Math.sqrt(r):r},mandist:function(e,t,i){for(var s=e.length,r=0,o=0;o<s;o++)r+=Math.abs((e[o]||0)-(t[o]||0));return i?Math.sqrt(r):r},dist:function(e,t,i){var s=Math.abs(e-t);return i?s:s*s}}),distance$1}var kinit,hasRequiredKinit;function requireKinit(){if(hasRequiredKinit)return kinit;hasRequiredKinit=1;var n=requireDistance(),e=n.eudist,t=n.dist;return kinit={kmrand:function(s,r){for(var o={},c=[],_=r<<2,l=s.length,d=s[0].length>0;c.length<r&&_-- >0;){var f=s[Math.floor(Math.random()*l)],g=d?f.join("_"):""+f;o[g]||(o[g]=!0,c.push(f))}if(c.length<r)throw new Error("Error initializating clusters");return c},kmpp:function(s,r){var o=s[0].length?e:t,c=[],_=s.length,l=s[0].length>0,d=s[Math.floor(Math.random()*_)];for(l?d.join("_"):""+d,c.push(d);c.length<r;){for(var f=[],g=c.length,b=0,C=[],P=0;P<_;P++){for(var S=1/0,L=0;L<g;L++){var E=o(s[P],c[L]);E<=S&&(S=E)}f[P]=S}for(var M=0;M<_;M++)b+=f[M];for(var D=0;D<_;D++)C[D]={i:D,v:s[D],pr:f[D]/b,cs:0};C.sort(function($,B){return $.pr-B.pr}),C[0].cs=C[0].pr;for(var R=1;R<_;R++)C[R].cs=C[R-1].cs+C[R].pr;for(var k=Math.random(),N=0;N<_-1&&C[N++].cs<k;);c.push(C[N-1].v)}return c}},kinit}var main,hasRequiredMain;function requireMain(){if(hasRequiredMain)return main;hasRequiredMain=1;var n=requireDistance(),e=requireKinit(),t=n.eudist;n.mandist,n.dist;var i=e.kmrand,s=e.kmpp,r=1e4;function o(_,l,d){d=d||[];for(var f=0;f<_;f++)d[f]=l;return d}function c(_,l,d,f){var g=[],b=[],C=[],P=[],S=!1,L=f||r,E=_.length,M=_[0].length,D=M>0,R=[];if(d)d=="kmrand"?g=i(_,l):d=="kmpp"?g=s(_,l):g=d;else for(var k={};g.length<l;){var N=Math.floor(Math.random()*E);k[N]||(k[N]=!0,g.push(_[N]))}do{o(l,0,R);for(var $=0;$<E;$++){for(var B=1/0,F=0,z=0;z<l;z++){var P=D?t(_[$],g[z]):Math.abs(_[$]-g[z]);P<=B&&(B=P,F=z)}C[$]=F,R[F]++}for(var Y=[],b=[],J=0;J<l;J++)Y[J]=D?o(M,0,Y[J]):0,b[J]=g[J];if(D){for(var q=0;q<l;q++)g[q]=[];for(var le=0;le<E;le++)for(var j=C[le],ie=Y[j],te=_[le],ce=0;ce<M;ce++)ie[ce]+=te[ce];S=!0;for(var xe=0;xe<l;xe++){for(var he=g[xe],Q=Y[xe],fe=b[xe],Ae=R[xe],me=0;me<M;me++)he[me]=Q[me]/Ae||0;if(S){for(var Se=0;Se<M;Se++)if(fe[Se]!=he[Se]){S=!1;break}}}}else{for(var Ie=0;Ie<E;Ie++){var pe=C[Ie];Y[pe]+=_[Ie]}for(var Te=0;Te<l;Te++)g[Te]=Y[Te]/R[Te]||0;S=!0;for(var ye=0;ye<l;ye++)if(b[ye]!=g[ye]){S=!1;break}}S=S||--L<=0}while(!S);return{it:r-L,k:l,idxs:C,centroids:g}}return main=c,main}var hasRequiredJs$q;function requireJs$q(){if(hasRequiredJs$q)return js$p;hasRequiredJs$q=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(js$p,"__esModule",{value:!0});var e=n(requireJs$1w()),t=requireJs$1F(),i=n(requireMain());function s(r,o){o===void 0&&(o={});var c=r.features.length;o.numberOfClusters=o.numberOfClusters||Math.round(Math.sqrt(c/2)),o.numberOfClusters>c&&(o.numberOfClusters=c),o.mutate!==!0&&(r=e.default(r));var _=t.coordAll(r),l=_.slice(0,o.numberOfClusters),d=i.default(_,o.numberOfClusters,l),f={};return d.centroids.forEach(function(g,b){f[b]=g}),t.featureEach(r,function(g,b){var C=d.idxs[b];g.properties.cluster=C,g.properties.centroid=f[C]}),r}return js$p.default=s,js$p}var js$o={},hasRequiredJs$p;function requireJs$p(){if(hasRequiredJs$p)return js$o;hasRequiredJs$p=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(js$o,"__esModule",{value:!0});var e=n(requireJs$1s()),t=n(requireJs$19()),i=n(requireJs$I()),s=requireJs$1G();function r(_,l){if(!_)throw new Error("line1 is required");if(!l)throw new Error("line2 is required");var d=c(_,"line1");if(d!=="LineString")throw new Error("line1 must be a LineString");var f=c(l,"line2");if(f!=="LineString")throw new Error("line2 must be a LineString");for(var g=t.default(e.default(_)).features,b=t.default(e.default(l)).features,C=0;C<g.length;C++){var P=g[C].geometry.coordinates;if(!b[C])break;var S=b[C].geometry.coordinates;if(!o(P,S))return!1}return!0}function o(_,l){var d=s.bearingToAzimuth(i.default(_[0],_[1])),f=s.bearingToAzimuth(i.default(l[0],l[1]));return d===f}function c(_,l){if(_.geometry&&_.geometry.type)return _.geometry.type;if(_.type)return _.type;throw new Error("Invalid GeoJSON object for "+l)}return js$o.default=r,js$o}var jsExports$9={},js$n={get exports(){return jsExports$9},set exports(n){jsExports$9=n}},hasRequiredJs$o;function requireJs$o(){if(hasRequiredJs$o)return jsExports$9;hasRequiredJs$o=1;var n=requireJs$1E(),e=requireJs$1A(),t=requireJs$1y(),i=requireJs$B(),s=requireJs$1s(),r=requireJs$1n(),o=requireJs$1D(),c=requireJs$1G();function _(N){return N&&typeof N=="object"&&"default"in N?N:{default:N}}var l=_(n),d=_(e),f=_(t),g=_(i),b=_(s),C=_(r);function P(N){for(var $=N,B=[];$.parent;)B.unshift($),$=$.parent;return B}function S(){return new D(function(N){return N.f})}var L={search:function(N,$,B,F){N.cleanDirty(),F=F||{};var z=F.heuristic||L.heuristics.manhattan,Y=F.closest||!1,J=S(),q=$;for($.h=z($,B),J.push($);J.size()>0;){var le=J.pop();if(le===B)return P(le);le.closed=!0;for(var j=N.neighbors(le),ie=0,te=j.length;ie<te;++ie){var ce=j[ie];if(!(ce.closed||ce.isWall())){var xe=le.g+ce.getCost(le),he=ce.visited;(!he||xe<ce.g)&&(ce.visited=!0,ce.parent=le,ce.h=ce.h||z(ce,B),ce.g=xe,ce.f=ce.g+ce.h,N.markDirty(ce),Y&&(ce.h<q.h||ce.h===q.h&&ce.g<q.g)&&(q=ce),he?J.rescoreElement(ce):J.push(ce))}}}return Y?P(q):[]},heuristics:{manhattan:function(N,$){var B=Math.abs($.x-N.x),F=Math.abs($.y-N.y);return B+F},diagonal:function(N,$){var B=1,F=Math.sqrt(2),z=Math.abs($.x-N.x),Y=Math.abs($.y-N.y);return B*(z+Y)+(F-2*B)*Math.min(z,Y)}},cleanNode:function(N){N.f=0,N.g=0,N.h=0,N.visited=!1,N.closed=!1,N.parent=null}};function E(N,$){$=$||{},this.nodes=[],this.diagonal=!!$.diagonal,this.grid=[];for(var B=0;B<N.length;B++){this.grid[B]=[];for(var F=0,z=N[B];F<z.length;F++){var Y=new M(B,F,z[F]);this.grid[B][F]=Y,this.nodes.push(Y)}}this.init()}E.prototype.init=function(){this.dirtyNodes=[];for(var N=0;N<this.nodes.length;N++)L.cleanNode(this.nodes[N])},E.prototype.cleanDirty=function(){for(var N=0;N<this.dirtyNodes.length;N++)L.cleanNode(this.dirtyNodes[N]);this.dirtyNodes=[]},E.prototype.markDirty=function(N){this.dirtyNodes.push(N)},E.prototype.neighbors=function(N){var $=[],B=N.x,F=N.y,z=this.grid;return z[B-1]&&z[B-1][F]&&$.push(z[B-1][F]),z[B+1]&&z[B+1][F]&&$.push(z[B+1][F]),z[B]&&z[B][F-1]&&$.push(z[B][F-1]),z[B]&&z[B][F+1]&&$.push(z[B][F+1]),this.diagonal&&(z[B-1]&&z[B-1][F-1]&&$.push(z[B-1][F-1]),z[B+1]&&z[B+1][F-1]&&$.push(z[B+1][F-1]),z[B-1]&&z[B-1][F+1]&&$.push(z[B-1][F+1]),z[B+1]&&z[B+1][F+1]&&$.push(z[B+1][F+1])),$},E.prototype.toString=function(){for(var N=[],$=this.grid,B,F,z,Y,J=0,q=$.length;J<q;J++){for(B=[],F=$[J],z=0,Y=F.length;z<Y;z++)B.push(F[z].weight);N.push(B.join(" "))}return N.join(`
`)};function M(N,$,B){this.x=N,this.y=$,this.weight=B}M.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},M.prototype.getCost=function(N){return N&&N.x!==this.x&&N.y!==this.y?this.weight*1.41421:this.weight},M.prototype.isWall=function(){return this.weight===0};function D(N){this.content=[],this.scoreFunction=N}D.prototype={push:function(N){this.content.push(N),this.sinkDown(this.content.length-1)},pop:function(){var N=this.content[0],$=this.content.pop();return this.content.length>0&&(this.content[0]=$,this.bubbleUp(0)),N},remove:function(N){var $=this.content.indexOf(N),B=this.content.pop();$!==this.content.length-1&&(this.content[$]=B,this.scoreFunction(B)<this.scoreFunction(N)?this.sinkDown($):this.bubbleUp($))},size:function(){return this.content.length},rescoreElement:function(N){this.sinkDown(this.content.indexOf(N))},sinkDown:function(N){for(var $=this.content[N];N>0;){var B=(N+1>>1)-1,F=this.content[B];if(this.scoreFunction($)<this.scoreFunction(F))this.content[B]=$,this.content[N]=F,N=B;else break}},bubbleUp:function(N){for(var $=this.content.length,B=this.content[N],F=this.scoreFunction(B);;){var z=N+1<<1,Y=z-1,J=null,q;if(Y<$){var le=this.content[Y];q=this.scoreFunction(le),q<F&&(J=Y)}if(z<$){var j=this.content[z],ie=this.scoreFunction(j);ie<(J===null?F:q)&&(J=z)}if(J!==null)this.content[N]=this.content[J],this.content[J]=B,N=J;else break}}};function R(N,$,B){if(B=B||{},!c.isObject(B))throw new Error("options is invalid");var F=B.resolution,z=B.minDistance,Y=B.obstacles||c.featureCollection([]);if(!N)throw new Error("start is required");if(!$)throw new Error("end is required");if(F&&!c.isNumber(F)||F<=0)throw new Error("options.resolution must be a number, greater than 0");if(z)throw new Error("options.minDistance is not yet implemented");var J=o.getCoord(N),q=o.getCoord($);switch(N=c.point(J),$=c.point(q),o.getType(Y)){case"FeatureCollection":if(Y.features.length===0)return c.lineString([J,q]);break;case"Polygon":Y=c.featureCollection([c.feature(o.getGeom(Y))]);break;default:throw new Error("invalid obstacles")}var le=Y;le.features.push(N),le.features.push($);var j=l.default(g.default(C.default(l.default(le)),1.15));if(!F){var ie=f.default([j[0],j[1]],[j[2],j[1]],B);F=ie/100}le.features.pop(),le.features.pop();for(var te=j[0],ce=j[1],xe=j[2],he=j[3],Q=F/f.default([te,ce],[xe,ce],B),fe=Q*(xe-te),Ae=F/f.default([te,ce],[te,he],B),me=Ae*(he-ce),Se=xe-te,Ie=he-ce,pe=Math.floor(Se/fe),Te=Math.floor(Ie/me),ye=(Se-pe*fe)/2,ge=(Ie-Te*me)/2,ae=[],we=[],ke=[],Ne=[],$e=1/0,qe=1/0,Je=he-ge,ve=0;Je>=ce;){for(var W=[],U=[],X=te+ye,oe=0;X<=xe;){var _e=c.point([X,Je]),Pe=k(_e,Y);W.push(Pe?0:1),U.push(X+"|"+Je);var De=f.default(_e,N);!Pe&&De<$e&&($e=De,ke={x:oe,y:ve});var Me=f.default(_e,$);!Pe&&Me<qe&&(qe=Me,Ne={x:oe,y:ve}),X+=fe,oe++}we.push(W),ae.push(U),Je-=me,ve++}var Ve=new E(we,{diagonal:!0}),Ze=Ve.grid[ke.y][ke.x],Ue=Ve.grid[Ne.y][Ne.x],xt=L.search(Ve,Ze,Ue),ht=[J];return xt.forEach(function(Pt){var Et=ae[Pt.x][Pt.y].split("|");ht.push([+Et[0],+Et[1]])}),ht.push(q),b.default(c.lineString(ht))}function k(N,$){for(var B=0;B<$.features.length;B++)if(d.default(N,$.features[B]))return!0;return!1}return js$n.exports=R,jsExports$9.default=R,jsExports$9}var jsExports$8={},js$m={get exports(){return jsExports$8},set exports(n){jsExports$8=n}};function constant$1(n){return function(){return n}}function x(n){return n[0]}function y(n){return n[1]}function RedBlackTree(){this._=null}function RedBlackNode(n){n.U=n.C=n.L=n.R=n.P=n.N=null}RedBlackTree.prototype={constructor:RedBlackTree,insert:function(n,e){var t,i,s;if(n){if(e.P=n,e.N=n.N,n.N&&(n.N.P=e),n.N=e,n.R){for(n=n.R;n.L;)n=n.L;n.L=e}else n.R=e;t=n}else this._?(n=RedBlackFirst(this._),e.P=null,e.N=n,n.P=n.L=e,t=n):(e.P=e.N=null,this._=e,t=null);for(e.L=e.R=null,e.U=t,e.C=!0,n=e;t&&t.C;)i=t.U,t===i.L?(s=i.R,s&&s.C?(t.C=s.C=!1,i.C=!0,n=i):(n===t.R&&(RedBlackRotateLeft(this,t),n=t,t=n.U),t.C=!1,i.C=!0,RedBlackRotateRight(this,i))):(s=i.L,s&&s.C?(t.C=s.C=!1,i.C=!0,n=i):(n===t.L&&(RedBlackRotateRight(this,t),n=t,t=n.U),t.C=!1,i.C=!0,RedBlackRotateLeft(this,i))),t=n.U;this._.C=!1},remove:function(n){n.N&&(n.N.P=n.P),n.P&&(n.P.N=n.N),n.N=n.P=null;var e=n.U,t,i=n.L,s=n.R,r,o;if(i?s?r=RedBlackFirst(s):r=i:r=s,e?e.L===n?e.L=r:e.R=r:this._=r,i&&s?(o=r.C,r.C=n.C,r.L=i,i.U=r,r!==s?(e=r.U,r.U=n.U,n=r.R,e.L=n,r.R=s,s.U=r):(r.U=e,e=r,n=r.R)):(o=n.C,n=r),n&&(n.U=e),!o){if(n&&n.C){n.C=!1;return}do{if(n===this._)break;if(n===e.L){if(t=e.R,t.C&&(t.C=!1,e.C=!0,RedBlackRotateLeft(this,e),t=e.R),t.L&&t.L.C||t.R&&t.R.C){(!t.R||!t.R.C)&&(t.L.C=!1,t.C=!0,RedBlackRotateRight(this,t),t=e.R),t.C=e.C,e.C=t.R.C=!1,RedBlackRotateLeft(this,e),n=this._;break}}else if(t=e.L,t.C&&(t.C=!1,e.C=!0,RedBlackRotateRight(this,e),t=e.L),t.L&&t.L.C||t.R&&t.R.C){(!t.L||!t.L.C)&&(t.R.C=!1,t.C=!0,RedBlackRotateLeft(this,t),t=e.L),t.C=e.C,e.C=t.L.C=!1,RedBlackRotateRight(this,e),n=this._;break}t.C=!0,n=e,e=e.U}while(!n.C);n&&(n.C=!1)}}};function RedBlackRotateLeft(n,e){var t=e,i=e.R,s=t.U;s?s.L===t?s.L=i:s.R=i:n._=i,i.U=s,t.U=i,t.R=i.L,t.R&&(t.R.U=t),i.L=t}function RedBlackRotateRight(n,e){var t=e,i=e.L,s=t.U;s?s.L===t?s.L=i:s.R=i:n._=i,i.U=s,t.U=i,t.L=i.R,t.L&&(t.L.U=t),i.R=t}function RedBlackFirst(n){for(;n.L;)n=n.L;return n}function createEdge(n,e,t,i){var s=[null,null],r=edges.push(s)-1;return s.left=n,s.right=e,t&&setEdgeEnd(s,n,e,t),i&&setEdgeEnd(s,e,n,i),cells[n.index].halfedges.push(r),cells[e.index].halfedges.push(r),s}function createBorderEdge(n,e,t){var i=[e,t];return i.left=n,i}function setEdgeEnd(n,e,t,i){!n[0]&&!n[1]?(n[0]=i,n.left=e,n.right=t):n.left===t?n[1]=i:n[0]=i}function clipEdge(n,e,t,i,s){var r=n[0],o=n[1],c=r[0],_=r[1],l=o[0],d=o[1],f=0,g=1,b=l-c,C=d-_,P;if(P=e-c,!(!b&&P>0)){if(P/=b,b<0){if(P<f)return;P<g&&(g=P)}else if(b>0){if(P>g)return;P>f&&(f=P)}if(P=i-c,!(!b&&P<0)){if(P/=b,b<0){if(P>g)return;P>f&&(f=P)}else if(b>0){if(P<f)return;P<g&&(g=P)}if(P=t-_,!(!C&&P>0)){if(P/=C,C<0){if(P<f)return;P<g&&(g=P)}else if(C>0){if(P>g)return;P>f&&(f=P)}if(P=s-_,!(!C&&P<0)){if(P/=C,C<0){if(P>g)return;P>f&&(f=P)}else if(C>0){if(P<f)return;P<g&&(g=P)}return!(f>0)&&!(g<1)||(f>0&&(n[0]=[c+f*b,_+f*C]),g<1&&(n[1]=[c+g*b,_+g*C])),!0}}}}}function connectEdge(n,e,t,i,s){var r=n[1];if(r)return!0;var o=n[0],c=n.left,_=n.right,l=c[0],d=c[1],f=_[0],g=_[1],b=(l+f)/2,C=(d+g)/2,P,S;if(g===d){if(b<e||b>=i)return;if(l>f){if(!o)o=[b,t];else if(o[1]>=s)return;r=[b,s]}else{if(!o)o=[b,s];else if(o[1]<t)return;r=[b,t]}}else if(P=(l-f)/(g-d),S=C-P*b,P<-1||P>1)if(l>f){if(!o)o=[(t-S)/P,t];else if(o[1]>=s)return;r=[(s-S)/P,s]}else{if(!o)o=[(s-S)/P,s];else if(o[1]<t)return;r=[(t-S)/P,t]}else if(d<g){if(!o)o=[e,P*e+S];else if(o[0]>=i)return;r=[i,P*i+S]}else{if(!o)o=[i,P*i+S];else if(o[0]<e)return;r=[e,P*e+S]}return n[0]=o,n[1]=r,!0}function clipEdges(n,e,t,i){for(var s=edges.length,r;s--;)(!connectEdge(r=edges[s],n,e,t,i)||!clipEdge(r,n,e,t,i)||!(Math.abs(r[0][0]-r[1][0])>epsilon$1||Math.abs(r[0][1]-r[1][1])>epsilon$1))&&delete edges[s]}function createCell(n){return cells[n.index]={site:n,halfedges:[]}}function cellHalfedgeAngle(n,e){var t=n.site,i=e.left,s=e.right;return t===s&&(s=i,i=t),s?Math.atan2(s[1]-i[1],s[0]-i[0]):(t===i?(i=e[1],s=e[0]):(i=e[0],s=e[1]),Math.atan2(i[0]-s[0],s[1]-i[1]))}function cellHalfedgeStart(n,e){return e[+(e.left!==n.site)]}function cellHalfedgeEnd(n,e){return e[+(e.left===n.site)]}function sortCellHalfedges(){for(var n=0,e=cells.length,t,i,s,r;n<e;++n)if((t=cells[n])&&(r=(i=t.halfedges).length)){var o=new Array(r),c=new Array(r);for(s=0;s<r;++s)o[s]=s,c[s]=cellHalfedgeAngle(t,edges[i[s]]);for(o.sort(function(_,l){return c[l]-c[_]}),s=0;s<r;++s)c[s]=i[o[s]];for(s=0;s<r;++s)i[s]=c[s]}}function clipCells(n,e,t,i){var s=cells.length,r,o,c,_,l,d,f,g,b,C,P,S,L=!0;for(r=0;r<s;++r)if(o=cells[r]){for(c=o.site,l=o.halfedges,_=l.length;_--;)edges[l[_]]||l.splice(_,1);for(_=0,d=l.length;_<d;)C=cellHalfedgeEnd(o,edges[l[_]]),P=C[0],S=C[1],f=cellHalfedgeStart(o,edges[l[++_%d]]),g=f[0],b=f[1],(Math.abs(P-g)>epsilon$1||Math.abs(S-b)>epsilon$1)&&(l.splice(_,0,edges.push(createBorderEdge(c,C,Math.abs(P-n)<epsilon$1&&i-S>epsilon$1?[n,Math.abs(g-n)<epsilon$1?b:i]:Math.abs(S-i)<epsilon$1&&t-P>epsilon$1?[Math.abs(b-i)<epsilon$1?g:t,i]:Math.abs(P-t)<epsilon$1&&S-e>epsilon$1?[t,Math.abs(g-t)<epsilon$1?b:e]:Math.abs(S-e)<epsilon$1&&P-n>epsilon$1?[Math.abs(b-e)<epsilon$1?g:n,e]:null))-1),++d);d&&(L=!1)}if(L){var E,M,D,R=1/0;for(r=0,L=null;r<s;++r)(o=cells[r])&&(c=o.site,E=c[0]-n,M=c[1]-e,D=E*E+M*M,D<R&&(R=D,L=o));if(L){var k=[n,e],N=[n,i],$=[t,i],B=[t,e];L.halfedges.push(edges.push(createBorderEdge(c=L.site,k,N))-1,edges.push(createBorderEdge(c,N,$))-1,edges.push(createBorderEdge(c,$,B))-1,edges.push(createBorderEdge(c,B,k))-1)}}for(r=0;r<s;++r)(o=cells[r])&&(o.halfedges.length||delete cells[r])}var circlePool=[],firstCircle;function Circle(){RedBlackNode(this),this.x=this.y=this.arc=this.site=this.cy=null}function attachCircle(n){var e=n.P,t=n.N;if(!(!e||!t)){var i=e.site,s=n.site,r=t.site;if(i!==r){var o=s[0],c=s[1],_=i[0]-o,l=i[1]-c,d=r[0]-o,f=r[1]-c,g=2*(_*f-l*d);if(!(g>=-epsilon2$1)){var b=_*_+l*l,C=d*d+f*f,P=(f*b-l*C)/g,S=(_*C-d*b)/g,L=circlePool.pop()||new Circle;L.arc=n,L.site=s,L.x=P+o,L.y=(L.cy=S+c)+Math.sqrt(P*P+S*S),n.circle=L;for(var E=null,M=circles._;M;)if(L.y<M.y||L.y===M.y&&L.x<=M.x)if(M.L)M=M.L;else{E=M.P;break}else if(M.R)M=M.R;else{E=M;break}circles.insert(E,L),E||(firstCircle=L)}}}}function detachCircle(n){var e=n.circle;e&&(e.P||(firstCircle=e.N),circles.remove(e),circlePool.push(e),RedBlackNode(e),n.circle=null)}var beachPool=[];function Beach(){RedBlackNode(this),this.edge=this.site=this.circle=null}function createBeach(n){var e=beachPool.pop()||new Beach;return e.site=n,e}function detachBeach(n){detachCircle(n),beaches.remove(n),beachPool.push(n),RedBlackNode(n)}function removeBeach(n){var e=n.circle,t=e.x,i=e.cy,s=[t,i],r=n.P,o=n.N,c=[n];detachBeach(n);for(var _=r;_.circle&&Math.abs(t-_.circle.x)<epsilon$1&&Math.abs(i-_.circle.cy)<epsilon$1;)r=_.P,c.unshift(_),detachBeach(_),_=r;c.unshift(_),detachCircle(_);for(var l=o;l.circle&&Math.abs(t-l.circle.x)<epsilon$1&&Math.abs(i-l.circle.cy)<epsilon$1;)o=l.N,c.push(l),detachBeach(l),l=o;c.push(l),detachCircle(l);var d=c.length,f;for(f=1;f<d;++f)l=c[f],_=c[f-1],setEdgeEnd(l.edge,_.site,l.site,s);_=c[0],l=c[d-1],l.edge=createEdge(_.site,l.site,null,s),attachCircle(_),attachCircle(l)}function addBeach(n){for(var e=n[0],t=n[1],i,s,r,o,c=beaches._;c;)if(r=leftBreakPoint(c,t)-e,r>epsilon$1)c=c.L;else if(o=e-rightBreakPoint(c,t),o>epsilon$1){if(!c.R){i=c;break}c=c.R}else{r>-epsilon$1?(i=c.P,s=c):o>-epsilon$1?(i=c,s=c.N):i=s=c;break}createCell(n);var _=createBeach(n);if(beaches.insert(i,_),!(!i&&!s)){if(i===s){detachCircle(i),s=createBeach(i.site),beaches.insert(_,s),_.edge=s.edge=createEdge(i.site,_.site),attachCircle(i),attachCircle(s);return}if(!s){_.edge=createEdge(i.site,_.site);return}detachCircle(i),detachCircle(s);var l=i.site,d=l[0],f=l[1],g=n[0]-d,b=n[1]-f,C=s.site,P=C[0]-d,S=C[1]-f,L=2*(g*S-b*P),E=g*g+b*b,M=P*P+S*S,D=[(S*E-b*M)/L+d,(g*M-P*E)/L+f];setEdgeEnd(s.edge,l,C,D),_.edge=createEdge(l,n,null,D),s.edge=createEdge(n,C,null,D),attachCircle(i),attachCircle(s)}}function leftBreakPoint(n,e){var t=n.site,i=t[0],s=t[1],r=s-e;if(!r)return i;var o=n.P;if(!o)return-1/0;t=o.site;var c=t[0],_=t[1],l=_-e;if(!l)return c;var d=c-i,f=1/r-1/l,g=d/l;return f?(-g+Math.sqrt(g*g-2*f*(d*d/(-2*l)-_+l/2+s-r/2)))/f+i:(i+c)/2}function rightBreakPoint(n,e){var t=n.N;if(t)return leftBreakPoint(t,e);var i=n.site;return i[1]===e?i[0]:1/0}var epsilon$1=1e-6,epsilon2$1=1e-12,beaches,cells,circles,edges;function triangleArea(n,e,t){return(n[0]-t[0])*(e[1]-n[1])-(n[0]-e[0])*(t[1]-n[1])}function lexicographic(n,e){return e[1]-n[1]||e[0]-n[0]}function Diagram(n,e){var t=n.sort(lexicographic).pop(),i,s,r;for(edges=[],cells=new Array(n.length),beaches=new RedBlackTree,circles=new RedBlackTree;;)if(r=firstCircle,t&&(!r||t[1]<r.y||t[1]===r.y&&t[0]<r.x))(t[0]!==i||t[1]!==s)&&(addBeach(t),i=t[0],s=t[1]),t=n.pop();else if(r)removeBeach(r.arc);else break;if(sortCellHalfedges(),e){var o=+e[0][0],c=+e[0][1],_=+e[1][0],l=+e[1][1];clipEdges(o,c,_,l),clipCells(o,c,_,l)}this.edges=edges,this.cells=cells,beaches=circles=edges=cells=null}Diagram.prototype={constructor:Diagram,polygons:function(){var n=this.edges;return this.cells.map(function(e){var t=e.halfedges.map(function(i){return cellHalfedgeStart(e,n[i])});return t.data=e.site.data,t})},triangles:function(){var n=[],e=this.edges;return this.cells.forEach(function(t,i){if(c=(r=t.halfedges).length)for(var s=t.site,r,o=-1,c,_,l=e[r[c-1]],d=l.left===s?l.right:l.left;++o<c;)_=d,l=e[r[o]],d=l.left===s?l.right:l.left,_&&d&&i<_.index&&i<d.index&&triangleArea(s,_,d)<0&&n.push([s.data,_.data,d.data])}),n},links:function(){return this.edges.filter(function(n){return n.right}).map(function(n){return{source:n.left.data,target:n.right.data}})},find:function(n,e,t){for(var i=this,s,r=i._found||0,o=i.cells.length,c;!(c=i.cells[r]);)if(++r>=o)return null;var _=n-c.site[0],l=e-c.site[1],d=_*_+l*l;do c=i.cells[s=r],r=null,c.halfedges.forEach(function(f){var g=i.edges[f],b=g.left;if(!((b===c.site||!b)&&!(b=g.right))){var C=n-b[0],P=e-b[1],S=C*C+P*P;S<d&&(d=S,r=b.index)}});while(r!==null);return i._found=s,t==null||d<=t*t?c.site:null}};function voronoi(){var n=x,e=y,t=null;function i(s){return new Diagram(s.map(function(r,o){var c=[Math.round(n(r,o,s)/epsilon$1)*epsilon$1,Math.round(e(r,o,s)/epsilon$1)*epsilon$1];return c.index=o,c.data=r,c}),t)}return i.polygons=function(s){return i(s).polygons()},i.links=function(s){return i(s).links()},i.triangles=function(s){return i(s).triangles()},i.x=function(s){return arguments.length?(n=typeof s=="function"?s:constant$1(+s),i):n},i.y=function(s){return arguments.length?(e=typeof s=="function"?s:constant$1(+s),i):e},i.extent=function(s){return arguments.length?(t=s==null?null:[[+s[0][0],+s[0][1]],[+s[1][0],+s[1][1]]],i):t&&[[t[0][0],t[0][1]],[t[1][0],t[1][1]]]},i.size=function(s){return arguments.length?(t=s==null?null:[[0,0],[+s[0],+s[1]]],i):t&&[t[1][0]-t[0][0],t[1][1]-t[0][1]]},i}const d3Voronoi=Object.freeze(Object.defineProperty({__proto__:null,voronoi},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(d3Voronoi);var hasRequiredJs$n;function requireJs$n(){if(hasRequiredJs$n)return jsExports$8;hasRequiredJs$n=1;var n=requireJs$1G(),e=requireJs$1D(),t=require$$2;function i(r){return r=r.slice(),r.push(r[0]),n.polygon([r])}function s(r,o){if(o=o||{},!n.isObject(o))throw new Error("options is invalid");var c=o.bbox||[-180,-85,180,85];if(!r)throw new Error("points is required");if(!Array.isArray(c))throw new Error("bbox is invalid");return e.collectionOf(r,"Point","points"),n.featureCollection(t.voronoi().x(function(_){return _.geometry.coordinates[0]}).y(function(_){return _.geometry.coordinates[1]}).extent([[c[0],c[1]],[c[2],c[3]]]).polygons(r.features).map(i))}return js$m.exports=s,jsExports$8.default=s,jsExports$8}var jsExports$7={},js$l={get exports(){return jsExports$7},set exports(n){jsExports$7=n}},hasRequiredJs$m;function requireJs$m(){if(hasRequiredJs$m)return jsExports$7;hasRequiredJs$m=1;var n=requireJs$1G(),e=requireJs$H(),t=requireJs$C(),i=requireJs$1D();function s(l){return l&&typeof l=="object"&&"default"in l?l:{default:l}}var r=s(e),o=s(t);function c(l,d,f,g){g=g||{};var b=g.steps||64,C=g.units||"kilometers",P=g.angle||0,S=g.pivot||l,L=g.properties||l.properties||{};if(!l)throw new Error("center is required");if(!d)throw new Error("xSemiAxis is required");if(!f)throw new Error("ySemiAxis is required");if(!n.isObject(g))throw new Error("options must be an object");if(!n.isNumber(b))throw new Error("steps must be a number");if(!n.isNumber(P))throw new Error("angle must be a number");var E=i.getCoord(l);if(C==="degrees")var M=n.degreesToRadians(P);else d=r.default(l,d,90,{units:C}),f=r.default(l,f,0,{units:C}),d=i.getCoord(d)[0]-E[0],f=i.getCoord(f)[1]-E[1];for(var D=[],R=0;R<b;R+=1){var k=R*-360/b,N=d*f/Math.sqrt(Math.pow(f,2)+Math.pow(d,2)*Math.pow(_(k),2)),$=d*f/Math.sqrt(Math.pow(d,2)+Math.pow(f,2)/Math.pow(_(k),2));if(k<-90&&k>=-270&&(N=-N),k<-180&&k>=-360&&($=-$),C==="degrees"){var B=N*Math.cos(M)+$*Math.sin(M),F=$*Math.cos(M)-N*Math.sin(M);N=B,$=F}D.push([N+E[0],$+E[1]])}return D.push(D[0]),C==="degrees"?n.polygon([D],L):o.default(n.polygon([D],L),P,{pivot:S})}function _(l){var d=l*Math.PI/180;return Math.tan(d)}return js$l.exports=c,jsExports$7.default=c,jsExports$7}var js$k={},hasRequiredJs$l;function requireJs$l(){if(hasRequiredJs$l)return js$k;hasRequiredJs$l=1,Object.defineProperty(js$k,"__esModule",{value:!0});var n=requireJs$1F(),e=requireJs$1G();function t(i,s){s===void 0&&(s={});var r=0,o=0,c=0;return n.geomEach(i,function(_,l,d){var f=s.weight?d==null?void 0:d[s.weight]:void 0;if(f=f??1,!e.isNumber(f))throw new Error("weight value must be a number for feature index "+l);f=Number(f),f>0&&n.coordEach(_,function(g){r+=g[0]*f,o+=g[1]*f,c+=f})}),e.point([r/c,o/c],s.properties,s)}return js$k.default=t,js$k}var js$j={},hasRequiredJs$k;function requireJs$k(){if(hasRequiredJs$k)return js$j;hasRequiredJs$k=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(js$j,"__esModule",{value:!0});var e=n(requireJs$l()),t=n(requireJs$1y()),i=n(requireJs$1f()),s=requireJs$1G(),r=requireJs$1F();function o(_,l){if(l===void 0&&(l={}),l=l||{},!s.isObject(l))throw new Error("options is invalid");var d=l.counter||10;if(!s.isNumber(d))throw new Error("counter must be a number");var f=l.weight,g=e.default(_,{weight:l.weight}),b=s.featureCollection([]);r.featureEach(_,function(P){var S;b.features.push(i.default(P,{properties:{weight:(S=P.properties)===null||S===void 0?void 0:S[f]}}))});var C={tolerance:l.tolerance,medianCandidates:[]};return c(g.geometry.coordinates,[0,0],b,C,d)}function c(_,l,d,f,g){var b=f.tolerance||.001,C=0,P=0,S=0,L=0;if(r.featureEach(d,function(D){var R,k=(R=D.properties)===null||R===void 0?void 0:R.weight,N=k??1;if(N=Number(N),!s.isNumber(N))throw new Error("weight value must be a number");if(N>0){L+=1;var $=N*t.default(D,_);$===0&&($=1);var B=N/$;C+=D.geometry.coordinates[0]*B,P+=D.geometry.coordinates[1]*B,S+=B}}),L<1)throw new Error("no features to measure");var E=C/S,M=P/S;return L===1||g===0||Math.abs(E-l[0])<b&&Math.abs(M-l[1])<b?s.point([E,M],{medianCandidates:f.medianCandidates}):(f.medianCandidates.push([E,M]),c([E,M],_,d,f,g-1))}return js$j.default=o,js$j}var jsExports$6={},js$i={get exports(){return jsExports$6},set exports(n){jsExports$6=n}},hasRequiredJs$j;function requireJs$j(){if(hasRequiredJs$j)return jsExports$6;hasRequiredJs$j=1;var n=requireJs$1F(),e=requireJs$1D(),t=requireJs$1G(),i=requireJs$l(),s=requireJs$1z(),r=requireJs$m();function o(g){return g&&typeof g=="object"&&"default"in g?g:{default:g}}var c=o(i),_=o(s),l=o(r);function d(g,b){if(b=b||{},!t.isObject(b))throw new Error("options is invalid");var C=b.steps||64,P=b.weight,S=b.properties||{};if(!t.isNumber(C))throw new Error("steps must be a number");if(!t.isObject(S))throw new Error("properties must be a number");var L=n.coordAll(g).length,E=c.default(g,{weight:P}),M=0,D=0,R=0;n.featureEach(g,function(ce){var xe=ce.properties[P]||1,he=f(e.getCoords(ce),e.getCoords(E));M+=Math.pow(he.x,2)*xe,D+=Math.pow(he.y,2)*xe,R+=he.x*he.y*xe});var k=M-D,N=Math.sqrt(Math.pow(k,2)+4*Math.pow(R,2)),$=2*R,B=Math.atan((k+N)/$),F=B*180/Math.PI,z=0,Y=0,J=0;n.featureEach(g,function(ce){var xe=ce.properties[P]||1,he=f(e.getCoords(ce),e.getCoords(E));z+=Math.pow(he.x*Math.cos(B)-he.y*Math.sin(B),2)*xe,Y+=Math.pow(he.x*Math.sin(B)+he.y*Math.cos(B),2)*xe,J+=xe});var q=Math.sqrt(2*z/J),le=Math.sqrt(2*Y/J),j=l.default(E,q,le,{units:"degrees",angle:F,steps:C,properties:S}),ie=_.default(g,t.featureCollection([j])),te={meanCenterCoordinates:e.getCoords(E),semiMajorAxis:q,semiMinorAxis:le,numberOfFeatures:L,angle:F,percentageWithinEllipse:100*n.coordAll(ie).length/L};return j.properties.standardDeviationalEllipse=te,j}function f(g,b){return{x:g[0]-b[0],y:g[1]-b[1]}}return js$i.exports=d,jsExports$6.default=d,jsExports$6}var js$h={},hasRequiredJs$i;function requireJs$i(){if(hasRequiredJs$i)return js$h;hasRequiredJs$i=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(js$h,"__esModule",{value:!0});var e=n(requireJs$1i()),t=requireJs$1G(),i=n(requireJs$I());function s(r,o,c,_){if(_===void 0&&(_={}),!t.isObject(_))throw new Error("options is invalid");if(!r)throw new Error("startPoint is required");if(!o)throw new Error("midPoint is required");if(!c)throw new Error("endPoint is required");var l=r,d=o,f=c,g=t.bearingToAzimuth(_.mercator!==!0?e.default(l,d):i.default(l,d)),b=t.bearingToAzimuth(_.mercator!==!0?e.default(f,d):i.default(f,d)),C=Math.abs(g-b);return _.explementary===!0?360-C:C}return js$h.default=s,js$h}var jsExports$5={},js$g={get exports(){return jsExports$5},set exports(n){jsExports$5=n}},hasRequiredJs$h;function requireJs$h(){if(hasRequiredJs$h)return jsExports$5;hasRequiredJs$h=1;var n=requireJs$1F(),e=requireJs$1G();function t(r,o){var c=[],_=o.iterations||1;if(!r)throw new Error("inputPolys is required");return n.geomEach(r,function(l,d,f){var g,b,C;switch(l.type){case"Polygon":g=[[]];for(var P=0;P<_;P++)C=[[]],b=l,P>0&&(b=e.polygon(g).geometry),i(b,C),g=C.slice(0);c.push(e.polygon(g,f));break;case"MultiPolygon":g=[[[]]];for(var S=0;S<_;S++)C=[[[]]],b=l,S>0&&(b=e.multiPolygon(g).geometry),s(b,C),g=C.slice(0);c.push(e.multiPolygon(g,f));break;default:throw new Error("geometry is invalid, must be Polygon or MultiPolygon")}}),e.featureCollection(c)}function i(r,o){var c=0,_=0;n.coordEach(r,function(l,d,f,g,b){b>c&&(c=b,_=d,o.push([]));var C=d-_,P=r.coordinates[b][C+1],S=l[0],L=l[1],E=P[0],M=P[1];o[b].push([.75*S+.25*E,.75*L+.25*M]),o[b].push([.25*S+.75*E,.25*L+.75*M])},!0),o.forEach(function(l){l.push(l[0])})}function s(r,o){var c=0,_=0,l=0;n.coordEach(r,function(d,f,g,b,C){b>l&&(l=b,_=f,o.push([[]])),C>c&&(c=C,_=f,o[b].push([]));var P=f-_,S=r.coordinates[b][C][P+1],L=d[0],E=d[1],M=S[0],D=S[1];o[b][C].push([.75*L+.25*M,.75*E+.25*D]),o[b][C].push([.25*L+.75*M,.25*E+.75*D])},!0),o.forEach(function(d){d.forEach(function(f){f.push(f[0])})})}return js$g.exports=t,jsExports$5.default=t,jsExports$5}var js$f={},js$e={},hasRequiredJs$g;function requireJs$g(){if(hasRequiredJs$g)return js$e;hasRequiredJs$g=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(js$e,"__esModule",{value:!0});var e=n(requireJs$1f()),t=requireJs$1D(),i=requireJs$1F();function s(o,c,_){_===void 0&&(_=2);var l=t.getCoord(o),d=t.getCoord(c),f=l[0]-d[0],g=l[1]-d[1];return _===1?Math.abs(f)+Math.abs(g):Math.pow(Math.pow(f,_)+Math.pow(g,_),1/_)}js$e.pNormDistance=s;function r(o,c){c=c||{};var _=c.threshold||1e4,l=c.p||2,d=c.binary||!1,f=c.alpha||-1,g=c.standardization||!1,b=[];i.featureEach(o,function(M){b.push(e.default(M))});for(var C=[],P=0;P<b.length;P++)C[P]=[];for(var P=0;P<b.length;P++)for(var S=P;S<b.length;S++){P===S&&(C[P][S]=0);var L=s(b[P],b[S],l);C[P][S]=L,C[S][P]=L}for(var P=0;P<b.length;P++)for(var S=0;S<b.length;S++){var L=C[P][S];L!==0&&(d?L<=_?C[P][S]=1:C[P][S]=0:L<=_?C[P][S]=Math.pow(L,f):C[P][S]=0)}if(g)for(var P=0;P<b.length;P++)for(var E=C[P].reduce(function(D,R){return D+R},0),S=0;S<b.length;S++)C[P][S]=C[P][S]/E;return C}return js$e.default=r,js$e}var hasRequiredJs$f;function requireJs$f(){if(hasRequiredJs$f)return js$f;hasRequiredJs$f=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(js$f,"__esModule",{value:!0});var e=n(requireJs$g()),t=requireJs$1F();function i(o,c){var _=c.inputField,l=c.threshold||1e5,d=c.p||2,f=c.binary||!1,g=c.alpha||-1,b=c.standardization||!0,C=e.default(o,{alpha:g,binary:f,p:d,standardization:b,threshold:l}),P=[];t.featureEach(o,function(ie){var te=ie.properties||{};P.push(te[_])});for(var S=s(P),L=r(P),E=0,M=0,D=0,R=0,k=C.length,N=0;N<k;N++){for(var $=0,B=0;B<k;B++)E+=C[N][B]*(P[N]-S)*(P[B]-S),M+=C[N][B],D+=Math.pow(C[N][B]+C[B][N],2),$+=C[N][B]+C[B][N];R+=Math.pow($,2)}D=.5*D;var F=E/M/L,z=-1/(k-1),Y=k*k*D-k*R+3*(M*M),J=(k-1)*(k+1)*(M*M),q=Y/J-z*z,le=Math.sqrt(q),j=(F-z)/le;return{expectedMoranIndex:z,moranIndex:F,stdNorm:le,zNorm:j}}js$f.default=i;function s(o){for(var c=0,_=0,l=o;_<l.length;_++){var d=l[_];c+=d}return c/o.length}function r(o){for(var c=s(o),_=0,l=0,d=o;l<d.length;l++){var f=d[l];_+=Math.pow(f-c,2)}return _/o.length}return js$f}var js$d={},hasRequiredJs$e;function requireJs$e(){if(hasRequiredJs$e)return js$d;hasRequiredJs$e=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(js$d,"__esModule",{value:!0});var e=requireJs$1F(),t=requireJs$1G(),i=n(requireJs$1w());function s(d,f){return f===void 0&&(f={}),o(d,"mercator",f)}js$d.toMercator=s;function r(d,f){return f===void 0&&(f={}),o(d,"wgs84",f)}js$d.toWgs84=r;function o(d,f,g){g===void 0&&(g={}),g=g||{};var b=g.mutate;if(!d)throw new Error("geojson is required");return Array.isArray(d)&&t.isNumber(d[0])?d=f==="mercator"?c(d):_(d):(b!==!0&&(d=i.default(d)),e.coordEach(d,function(C){var P=f==="mercator"?c(C):_(C);C[0]=P[0],C[1]=P[1]})),d}function c(d){var f=Math.PI/180,g=6378137,b=20037508342789244e-9,C=Math.abs(d[0])<=180?d[0]:d[0]-l(d[0])*360,P=[g*C*f,g*Math.log(Math.tan(Math.PI*.25+.5*d[1]*f))];return P[0]>b&&(P[0]=b),P[0]<-b&&(P[0]=-b),P[1]>b&&(P[1]=b),P[1]<-b&&(P[1]=-b),P}function _(d){var f=180/Math.PI,g=6378137;return[d[0]*f/g,(Math.PI*.5-2*Math.atan(Math.exp(-d[1]/g)))*f]}function l(d){return d<0?-1:d>0?1:0}return js$d}var js$c={},hasRequiredJs$d;function requireJs$d(){if(hasRequiredJs$d)return js$c;hasRequiredJs$d=1;var n=commonjsGlobal&&commonjsGlobal.__spreadArrays||function(){for(var f=0,g=0,b=arguments.length;g<b;g++)f+=arguments[g].length;for(var C=Array(f),P=0,g=0;g<b;g++)for(var S=arguments[g],L=0,E=S.length;L<E;L++,P++)C[P]=S[L];return C};Object.defineProperty(js$c,"__esModule",{value:!0});var e=requireJs$1G();function t(f){return Array.isArray(f)?d(f):f&&f.bbox?d(f.bbox):[_(),l()]}js$c.randomPosition=t;function i(f,g){g===void 0&&(g={}),f==null&&(f=1);for(var b=[],C=0;C<f;C++)b.push(e.point(t(g.bbox)));return e.featureCollection(b)}js$c.randomPoint=i;function s(f,g){g===void 0&&(g={}),f==null&&(f=1),(!e.isNumber(g.num_vertices)||g.num_vertices===void 0)&&(g.num_vertices=10),(!e.isNumber(g.max_radial_length)||g.max_radial_length===void 0)&&(g.max_radial_length=10);for(var b=[],C=function(S){var L=[],E=n(Array(g.num_vertices+1)).map(Math.random);E.forEach(function(M,D,R){R[D]=D>0?M+R[D-1]:M}),E.forEach(function(M){M=M*2*Math.PI/E[E.length-1];var D=Math.random();L.push([D*(g.max_radial_length||10)*Math.sin(M),D*(g.max_radial_length||10)*Math.cos(M)])}),L[L.length-1]=L[0],L=L.map(o(t(g.bbox))),b.push(e.polygon([L]))},P=0;P<f;P++)C();return e.featureCollection(b)}js$c.randomPolygon=s;function r(f,g){if(g===void 0&&(g={}),g=g||{},!e.isObject(g))throw new Error("options is invalid");var b=g.bbox,C=g.num_vertices,P=g.max_length,S=g.max_rotation;f==null&&(f=1),(!e.isNumber(C)||C===void 0||C<2)&&(C=10),(!e.isNumber(P)||P===void 0)&&(P=1e-4),(!e.isNumber(S)||S===void 0)&&(S=Math.PI/8);for(var L=[],E=0;E<f;E++){for(var M=t(b),D=[M],R=0;R<C-1;R++){var k=R===0?Math.random()*2*Math.PI:Math.tan((D[R][1]-D[R-1][1])/(D[R][0]-D[R-1][0])),N=k+(Math.random()-.5)*S*2,$=Math.random()*P;D.push([D[R][0]+$*Math.cos(N),D[R][1]+$*Math.sin(N)])}L.push(e.lineString(D))}return e.featureCollection(L)}js$c.randomLineString=r;function o(f){return function(g){return[g[0]+f[0],g[1]+f[1]]}}function c(){return Math.random()-.5}function _(){return c()*360}function l(){return c()*180}function d(f){return[Math.random()*(f[2]-f[0])+f[0],Math.random()*(f[3]-f[1])+f[1]]}return js$c}var js$b={},hasRequiredJs$c;function requireJs$c(){if(hasRequiredJs$c)return js$b;hasRequiredJs$c=1,Object.defineProperty(js$b,"__esModule",{value:!0});var n=requireJs$1F(),e=requireJs$1G();function t(l,d){if(!l)throw new Error("geojson is required");if(l.type!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(d==null)throw new Error("filter is required");var f=[];return n.featureEach(l,function(g){o(g.properties,d)&&f.push(g)}),e.featureCollection(f)}js$b.getCluster=t;function i(l,d,f){if(!l)throw new Error("geojson is required");if(l.type!=="FeatureCollection")throw new Error("geojson must be a FeatureCollection");if(d==null)throw new Error("property is required");for(var g=r(l,d),b=Object.keys(g),C=0;C<b.length;C++){for(var P=b[C],S=g[P],L=[],E=0;E<S.length;E++)L.push(l.features[S[E]]);f(e.featureCollection(L),P,C)}}js$b.clusterEach=i;function s(l,d,f,g){var b=g;return i(l,d,function(C,P,S){S===0&&g===void 0?b=C:b=f(b,C,P,S)}),b}js$b.clusterReduce=s;function r(l,d){var f={};return n.featureEach(l,function(g,b){var C=g.properties||{};if(Object.prototype.hasOwnProperty.call(C,String(d))){var P=C[d];Object.prototype.hasOwnProperty.call(f,P)?f[P].push(b):f[P]=[b]}}),f}js$b.createBins=r;function o(l,d){if(l===void 0)return!1;var f=typeof d;if(f==="number"||f==="string")return Object.prototype.hasOwnProperty.call(l,d);if(Array.isArray(d)){for(var g=0;g<d.length;g++)if(!o(l,d[g]))return!1;return!0}else return c(l,d)}js$b.applyFilter=o;function c(l,d){for(var f=Object.keys(d),g=0;g<f.length;g++){var b=f[g];if(l[b]!==d[b])return!1}return!0}js$b.propertiesContainsFilter=c;function _(l,d){if(!d)return{};if(!d.length)return{};for(var f={},g=0;g<d.length;g++){var b=d[g];Object.prototype.hasOwnProperty.call(l,b)&&(f[b]=l[b])}return f}return js$b.filterProperties=_,js$b}var jsExports$4={},js$a={get exports(){return jsExports$4},set exports(n){jsExports$4=n}},polygonClipping_umdExports={},polygonClipping_umd={get exports(){return polygonClipping_umdExports},set exports(n){polygonClipping_umdExports=n}},hasRequiredPolygonClipping_umd;function requirePolygonClipping_umd(){return hasRequiredPolygonClipping_umd||(hasRequiredPolygonClipping_umd=1,function(n,e){(function(t,i){n.exports=i()})(commonjsGlobal,function(){function t(ve,W){if(!(ve instanceof W))throw new TypeError("Cannot call a class as a function")}function i(ve,W){for(var U=0;U<W.length;U++){var X=W[U];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(ve,X.key,X)}}function s(ve,W,U){return W&&i(ve.prototype,W),U&&i(ve,U),ve}/**
 * splaytree v3.1.0
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 */var r=function(){function ve(W,U){this.next=null,this.key=W,this.data=U,this.left=null,this.right=null}return ve}();function o(ve,W){return ve>W?1:ve<W?-1:0}function c(ve,W,U){for(var X=new r(null,null),oe=X,_e=X;;){var Pe=U(ve,W.key);if(Pe<0){if(W.left===null)break;if(U(ve,W.left.key)<0){var De=W.left;if(W.left=De.right,De.right=W,W=De,W.left===null)break}_e.left=W,_e=W,W=W.left}else if(Pe>0){if(W.right===null)break;if(U(ve,W.right.key)>0){var De=W.right;if(W.right=De.left,De.left=W,W=De,W.right===null)break}oe.right=W,oe=W,W=W.right}else break}return oe.right=W.left,_e.left=W.right,W.left=X.right,W.right=X.left,W}function _(ve,W,U,X){var oe=new r(ve,W);if(U===null)return oe.left=oe.right=null,oe;U=c(ve,U,X);var _e=X(ve,U.key);return _e<0?(oe.left=U.left,oe.right=U,U.left=null):_e>=0&&(oe.right=U.right,oe.left=U,U.right=null),oe}function l(ve,W,U){var X=null,oe=null;if(W){W=c(ve,W,U);var _e=U(W.key,ve);_e===0?(X=W.left,oe=W.right):_e<0?(oe=W.right,W.right=null,X=W):(X=W.left,W.left=null,oe=W)}return{left:X,right:oe}}function d(ve,W,U){return W===null?ve:(ve===null||(W=c(ve.key,W,U),W.left=ve),W)}function f(ve,W,U,X,oe){if(ve){X(""+W+(U?"└── ":"├── ")+oe(ve)+`
`);var _e=W+(U?"    ":"│   ");ve.left&&f(ve.left,_e,!1,X,oe),ve.right&&f(ve.right,_e,!0,X,oe)}}var g=function(){function ve(W){W===void 0&&(W=o),this._root=null,this._size=0,this._comparator=W}return ve.prototype.insert=function(W,U){return this._size++,this._root=_(W,U,this._root,this._comparator)},ve.prototype.add=function(W,U){var X=new r(W,U);this._root===null&&(X.left=X.right=null,this._size++,this._root=X);var oe=this._comparator,_e=c(W,this._root,oe),Pe=oe(W,_e.key);return Pe===0?this._root=_e:(Pe<0?(X.left=_e.left,X.right=_e,_e.left=null):Pe>0&&(X.right=_e.right,X.left=_e,_e.right=null),this._size++,this._root=X),this._root},ve.prototype.remove=function(W){this._root=this._remove(W,this._root,this._comparator)},ve.prototype._remove=function(W,U,X){var oe;if(U===null)return null;U=c(W,U,X);var _e=X(W,U.key);return _e===0?(U.left===null?oe=U.right:(oe=c(W,U.left,X),oe.right=U.right),this._size--,oe):U},ve.prototype.pop=function(){var W=this._root;if(W){for(;W.left;)W=W.left;return this._root=c(W.key,this._root,this._comparator),this._root=this._remove(W.key,this._root,this._comparator),{key:W.key,data:W.data}}return null},ve.prototype.findStatic=function(W){for(var U=this._root,X=this._comparator;U;){var oe=X(W,U.key);if(oe===0)return U;oe<0?U=U.left:U=U.right}return null},ve.prototype.find=function(W){return this._root&&(this._root=c(W,this._root,this._comparator),this._comparator(W,this._root.key)!==0)?null:this._root},ve.prototype.contains=function(W){for(var U=this._root,X=this._comparator;U;){var oe=X(W,U.key);if(oe===0)return!0;oe<0?U=U.left:U=U.right}return!1},ve.prototype.forEach=function(W,U){for(var X=this._root,oe=[],_e=!1;!_e;)X!==null?(oe.push(X),X=X.left):oe.length!==0?(X=oe.pop(),W.call(U,X),X=X.right):_e=!0;return this},ve.prototype.range=function(W,U,X,oe){for(var _e=[],Pe=this._comparator,De=this._root,Me;_e.length!==0||De;)if(De)_e.push(De),De=De.left;else{if(De=_e.pop(),Me=Pe(De.key,U),Me>0)break;if(Pe(De.key,W)>=0&&X.call(oe,De))return this;De=De.right}return this},ve.prototype.keys=function(){var W=[];return this.forEach(function(U){var X=U.key;return W.push(X)}),W},ve.prototype.values=function(){var W=[];return this.forEach(function(U){var X=U.data;return W.push(X)}),W},ve.prototype.min=function(){return this._root?this.minNode(this._root).key:null},ve.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},ve.prototype.minNode=function(W){if(W===void 0&&(W=this._root),W)for(;W.left;)W=W.left;return W},ve.prototype.maxNode=function(W){if(W===void 0&&(W=this._root),W)for(;W.right;)W=W.right;return W},ve.prototype.at=function(W){for(var U=this._root,X=!1,oe=0,_e=[];!X;)if(U)_e.push(U),U=U.left;else if(_e.length>0){if(U=_e.pop(),oe===W)return U;oe++,U=U.right}else X=!0;return null},ve.prototype.next=function(W){var U=this._root,X=null;if(W.right){for(X=W.right;X.left;)X=X.left;return X}for(var oe=this._comparator;U;){var _e=oe(W.key,U.key);if(_e===0)break;_e<0?(X=U,U=U.left):U=U.right}return X},ve.prototype.prev=function(W){var U=this._root,X=null;if(W.left!==null){for(X=W.left;X.right;)X=X.right;return X}for(var oe=this._comparator;U;){var _e=oe(W.key,U.key);if(_e===0)break;_e<0?U=U.left:(X=U,U=U.right)}return X},ve.prototype.clear=function(){return this._root=null,this._size=0,this},ve.prototype.toList=function(){return P(this._root)},ve.prototype.load=function(W,U,X){U===void 0&&(U=[]),X===void 0&&(X=!1);var oe=W.length,_e=this._comparator;if(X&&E(W,U,0,oe-1,_e),this._root===null)this._root=b(W,U,0,oe),this._size=oe;else{var Pe=L(this.toList(),C(W,U),_e);oe=this._size+oe,this._root=S({head:Pe},0,oe)}return this},ve.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(ve.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(ve.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),ve.prototype.toString=function(W){W===void 0&&(W=function(oe){return String(oe.key)});var U=[];return f(this._root,"",!0,function(X){return U.push(X)},W),U.join("")},ve.prototype.update=function(W,U,X){var oe=this._comparator,_e=l(W,this._root,oe),Pe=_e.left,De=_e.right;oe(W,U)<0?De=_(U,X,De,oe):Pe=_(U,X,Pe,oe),this._root=d(Pe,De,oe)},ve.prototype.split=function(W){return l(W,this._root,this._comparator)},ve}();function b(ve,W,U,X){var oe=X-U;if(oe>0){var _e=U+Math.floor(oe/2),Pe=ve[_e],De=W[_e],Me=new r(Pe,De);return Me.left=b(ve,W,U,_e),Me.right=b(ve,W,_e+1,X),Me}return null}function C(ve,W){for(var U=new r(null,null),X=U,oe=0;oe<ve.length;oe++)X=X.next=new r(ve[oe],W[oe]);return X.next=null,U.next}function P(ve){for(var W=ve,U=[],X=!1,oe=new r(null,null),_e=oe;!X;)W?(U.push(W),W=W.left):U.length>0?(W=_e=_e.next=U.pop(),W=W.right):X=!0;return _e.next=null,oe.next}function S(ve,W,U){var X=U-W;if(X>0){var oe=W+Math.floor(X/2),_e=S(ve,W,oe),Pe=ve.head;return Pe.left=_e,ve.head=ve.head.next,Pe.right=S(ve,oe+1,U),Pe}return null}function L(ve,W,U){for(var X=new r(null,null),oe=X,_e=ve,Pe=W;_e!==null&&Pe!==null;)U(_e.key,Pe.key)<0?(oe.next=_e,_e=_e.next):(oe.next=Pe,Pe=Pe.next),oe=oe.next;return _e!==null?oe.next=_e:Pe!==null&&(oe.next=Pe),X.next}function E(ve,W,U,X,oe){if(!(U>=X)){for(var _e=ve[U+X>>1],Pe=U-1,De=X+1;;){do Pe++;while(oe(ve[Pe],_e)<0);do De--;while(oe(ve[De],_e)>0);if(Pe>=De)break;var Me=ve[Pe];ve[Pe]=ve[De],ve[De]=Me,Me=W[Pe],W[Pe]=W[De],W[De]=Me}E(ve,W,U,De,oe),E(ve,W,De+1,X,oe)}}var M=function(W,U){return W.ll.x<=U.x&&U.x<=W.ur.x&&W.ll.y<=U.y&&U.y<=W.ur.y},D=function(W,U){if(U.ur.x<W.ll.x||W.ur.x<U.ll.x||U.ur.y<W.ll.y||W.ur.y<U.ll.y)return null;var X=W.ll.x<U.ll.x?U.ll.x:W.ll.x,oe=W.ur.x<U.ur.x?W.ur.x:U.ur.x,_e=W.ll.y<U.ll.y?U.ll.y:W.ll.y,Pe=W.ur.y<U.ur.y?W.ur.y:U.ur.y;return{ll:{x:X,y:_e},ur:{x:oe,y:Pe}}},R=Number.EPSILON;R===void 0&&(R=Math.pow(2,-52));var k=R*R,N=function(W,U){if(-R<W&&W<R&&-R<U&&U<R)return 0;var X=W-U;return X*X<k*W*U?0:W<U?-1:1},$=function(){function ve(){t(this,ve),this.reset()}return s(ve,[{key:"reset",value:function(){this.xRounder=new B,this.yRounder=new B}},{key:"round",value:function(U,X){return{x:this.xRounder.round(U),y:this.yRounder.round(X)}}}]),ve}(),B=function(){function ve(){t(this,ve),this.tree=new g,this.round(0)}return s(ve,[{key:"round",value:function(U){var X=this.tree.add(U),oe=this.tree.prev(X);if(oe!==null&&N(X.key,oe.key)===0)return this.tree.remove(U),oe.key;var _e=this.tree.next(X);return _e!==null&&N(X.key,_e.key)===0?(this.tree.remove(U),_e.key):U}}]),ve}(),F=new $,z=function(W,U){return W.x*U.y-W.y*U.x},Y=function(W,U){return W.x*U.x+W.y*U.y},J=function(W,U,X){var oe={x:U.x-W.x,y:U.y-W.y},_e={x:X.x-W.x,y:X.y-W.y},Pe=z(oe,_e);return N(Pe,0)},q=function(W){return Math.sqrt(Y(W,W))},le=function(W,U,X){var oe={x:U.x-W.x,y:U.y-W.y},_e={x:X.x-W.x,y:X.y-W.y};return z(_e,oe)/q(_e)/q(oe)},j=function(W,U,X){var oe={x:U.x-W.x,y:U.y-W.y},_e={x:X.x-W.x,y:X.y-W.y};return Y(_e,oe)/q(_e)/q(oe)},ie=function(W,U,X){return U.y===0?null:{x:W.x+U.x/U.y*(X-W.y),y:X}},te=function(W,U,X){return U.x===0?null:{x:X,y:W.y+U.y/U.x*(X-W.x)}},ce=function(W,U,X,oe){if(U.x===0)return te(X,oe,W.x);if(oe.x===0)return te(W,U,X.x);if(U.y===0)return ie(X,oe,W.y);if(oe.y===0)return ie(W,U,X.y);var _e=z(U,oe);if(_e==0)return null;var Pe={x:X.x-W.x,y:X.y-W.y},De=z(Pe,U)/_e,Me=z(Pe,oe)/_e,Ve=W.x+Me*U.x,Ze=X.x+De*oe.x,Ue=W.y+Me*U.y,xt=X.y+De*oe.y,ht=(Ve+Ze)/2,Pt=(Ue+xt)/2;return{x:ht,y:Pt}},xe=function(){s(ve,null,[{key:"compare",value:function(U,X){var oe=ve.comparePoints(U.point,X.point);return oe!==0?oe:(U.point!==X.point&&U.link(X),U.isLeft!==X.isLeft?U.isLeft?1:-1:Q.compare(U.segment,X.segment))}},{key:"comparePoints",value:function(U,X){return U.x<X.x?-1:U.x>X.x?1:U.y<X.y?-1:U.y>X.y?1:0}}]);function ve(W,U){t(this,ve),W.events===void 0?W.events=[this]:W.events.push(this),this.point=W,this.isLeft=U}return s(ve,[{key:"link",value:function(U){if(U.point===this.point)throw new Error("Tried to link already linked events");for(var X=U.point.events,oe=0,_e=X.length;oe<_e;oe++){var Pe=X[oe];this.point.events.push(Pe),Pe.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var U=this.point.events.length,X=0;X<U;X++){var oe=this.point.events[X];if(oe.segment.consumedBy===void 0)for(var _e=X+1;_e<U;_e++){var Pe=this.point.events[_e];Pe.consumedBy===void 0&&oe.otherSE.point.events===Pe.otherSE.point.events&&oe.segment.consume(Pe.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var U=[],X=0,oe=this.point.events.length;X<oe;X++){var _e=this.point.events[X];_e!==this&&!_e.segment.ringOut&&_e.segment.isInResult()&&U.push(_e)}return U}},{key:"getLeftmostComparator",value:function(U){var X=this,oe=new Map,_e=function(De){var Me=De.otherSE;oe.set(De,{sine:le(X.point,U.point,Me.point),cosine:j(X.point,U.point,Me.point)})};return function(Pe,De){oe.has(Pe)||_e(Pe),oe.has(De)||_e(De);var Me=oe.get(Pe),Ve=Me.sine,Ze=Me.cosine,Ue=oe.get(De),xt=Ue.sine,ht=Ue.cosine;return Ve>=0&&xt>=0?Ze<ht?1:Ze>ht?-1:0:Ve<0&&xt<0?Ze<ht?-1:Ze>ht?1:0:xt<Ve?-1:xt>Ve?1:0}}}]),ve}(),he=0,Q=function(){s(ve,null,[{key:"compare",value:function(U,X){var oe=U.leftSE.point.x,_e=X.leftSE.point.x,Pe=U.rightSE.point.x,De=X.rightSE.point.x;if(De<oe)return 1;if(Pe<_e)return-1;var Me=U.leftSE.point.y,Ve=X.leftSE.point.y,Ze=U.rightSE.point.y,Ue=X.rightSE.point.y;if(oe<_e){if(Ve<Me&&Ve<Ze)return 1;if(Ve>Me&&Ve>Ze)return-1;var xt=U.comparePoint(X.leftSE.point);if(xt<0)return 1;if(xt>0)return-1;var ht=X.comparePoint(U.rightSE.point);return ht!==0?ht:-1}if(oe>_e){if(Me<Ve&&Me<Ue)return-1;if(Me>Ve&&Me>Ue)return 1;var Pt=X.comparePoint(U.leftSE.point);if(Pt!==0)return Pt;var Et=U.comparePoint(X.rightSE.point);return Et<0?1:Et>0?-1:1}if(Me<Ve)return-1;if(Me>Ve)return 1;if(Pe<De){var Tt=X.comparePoint(U.rightSE.point);if(Tt!==0)return Tt}if(Pe>De){var Rt=U.comparePoint(X.rightSE.point);if(Rt<0)return 1;if(Rt>0)return-1}if(Pe!==De){var Bt=Ze-Me,Vt=Pe-oe,zt=Ue-Ve,It=De-_e;if(Bt>Vt&&zt<It)return 1;if(Bt<Vt&&zt>It)return-1}return Pe>De?1:Pe<De||Ze<Ue?-1:Ze>Ue?1:U.id<X.id?-1:U.id>X.id?1:0}}]);function ve(W,U,X,oe){t(this,ve),this.id=++he,this.leftSE=W,W.segment=this,W.otherSE=U,this.rightSE=U,U.segment=this,U.otherSE=W,this.rings=X,this.windings=oe}return s(ve,[{key:"replaceRightSE",value:function(U){this.rightSE=U,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var U=this.leftSE.point.y,X=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:U<X?U:X},ur:{x:this.rightSE.point.x,y:U>X?U:X}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(U){return U.x===this.leftSE.point.x&&U.y===this.leftSE.point.y||U.x===this.rightSE.point.x&&U.y===this.rightSE.point.y}},{key:"comparePoint",value:function(U){if(this.isAnEndpoint(U))return 0;var X=this.leftSE.point,oe=this.rightSE.point,_e=this.vector();if(X.x===oe.x)return U.x===X.x?0:U.x<X.x?1:-1;var Pe=(U.y-X.y)/_e.y,De=X.x+Pe*_e.x;if(U.x===De)return 0;var Me=(U.x-X.x)/_e.x,Ve=X.y+Me*_e.y;return U.y===Ve?0:U.y<Ve?-1:1}},{key:"getIntersection",value:function(U){var X=this.bbox(),oe=U.bbox(),_e=D(X,oe);if(_e===null)return null;var Pe=this.leftSE.point,De=this.rightSE.point,Me=U.leftSE.point,Ve=U.rightSE.point,Ze=M(X,Me)&&this.comparePoint(Me)===0,Ue=M(oe,Pe)&&U.comparePoint(Pe)===0,xt=M(X,Ve)&&this.comparePoint(Ve)===0,ht=M(oe,De)&&U.comparePoint(De)===0;if(Ue&&Ze)return ht&&!xt?De:!ht&&xt?Ve:null;if(Ue)return xt&&Pe.x===Ve.x&&Pe.y===Ve.y?null:Pe;if(Ze)return ht&&De.x===Me.x&&De.y===Me.y?null:Me;if(ht&&xt)return null;if(ht)return De;if(xt)return Ve;var Pt=ce(Pe,this.vector(),Me,U.vector());return Pt===null||!M(_e,Pt)?null:F.round(Pt.x,Pt.y)}},{key:"split",value:function(U){var X=[],oe=U.events!==void 0,_e=new xe(U,!0),Pe=new xe(U,!1),De=this.rightSE;this.replaceRightSE(Pe),X.push(Pe),X.push(_e);var Me=new ve(_e,De,this.rings.slice(),this.windings.slice());return xe.comparePoints(Me.leftSE.point,Me.rightSE.point)>0&&Me.swapEvents(),xe.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),oe&&(_e.checkForConsuming(),Pe.checkForConsuming()),X}},{key:"swapEvents",value:function(){var U=this.rightSE;this.rightSE=this.leftSE,this.leftSE=U,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var X=0,oe=this.windings.length;X<oe;X++)this.windings[X]*=-1}},{key:"consume",value:function(U){for(var X=this,oe=U;X.consumedBy;)X=X.consumedBy;for(;oe.consumedBy;)oe=oe.consumedBy;var _e=ve.compare(X,oe);if(_e!==0){if(_e>0){var Pe=X;X=oe,oe=Pe}if(X.prev===oe){var De=X;X=oe,oe=De}for(var Me=0,Ve=oe.rings.length;Me<Ve;Me++){var Ze=oe.rings[Me],Ue=oe.windings[Me],xt=X.rings.indexOf(Ze);xt===-1?(X.rings.push(Ze),X.windings.push(Ue)):X.windings[xt]+=Ue}oe.rings=null,oe.windings=null,oe.consumedBy=X,oe.leftSE.consumedBy=X.leftSE,oe.rightSE.consumedBy=X.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var U=this.prev.consumedBy||this.prev;this._beforeState=U.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var U=this.beforeState();this._afterState={rings:U.rings.slice(0),windings:U.windings.slice(0),multiPolys:[]};for(var X=this._afterState.rings,oe=this._afterState.windings,_e=this._afterState.multiPolys,Pe=0,De=this.rings.length;Pe<De;Pe++){var Me=this.rings[Pe],Ve=this.windings[Pe],Ze=X.indexOf(Me);Ze===-1?(X.push(Me),oe.push(Ve)):oe[Ze]+=Ve}for(var Ue=[],xt=[],ht=0,Pt=X.length;ht<Pt;ht++)if(oe[ht]!==0){var Et=X[ht],Tt=Et.poly;if(xt.indexOf(Tt)===-1)if(Et.isExterior)Ue.push(Tt);else{xt.indexOf(Tt)===-1&&xt.push(Tt);var Rt=Ue.indexOf(Et.poly);Rt!==-1&&Ue.splice(Rt,1)}}for(var Bt=0,Vt=Ue.length;Bt<Vt;Bt++){var zt=Ue[Bt].multiPoly;_e.indexOf(zt)===-1&&_e.push(zt)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var U=this.beforeState().multiPolys,X=this.afterState().multiPolys;switch(we.type){case"union":{var oe=U.length===0,_e=X.length===0;this._isInResult=oe!==_e;break}case"intersection":{var Pe,De;U.length<X.length?(Pe=U.length,De=X.length):(Pe=X.length,De=U.length),this._isInResult=De===we.numMultiPolys&&Pe<De;break}case"xor":{var Me=Math.abs(U.length-X.length);this._isInResult=Me%2===1;break}case"difference":{var Ve=function(Ue){return Ue.length===1&&Ue[0].isSubject};this._isInResult=Ve(U)!==Ve(X);break}default:throw new Error("Unrecognized operation type found ".concat(we.type))}return this._isInResult}}],[{key:"fromRing",value:function(U,X,oe){var _e,Pe,De,Me=xe.comparePoints(U,X);if(Me<0)_e=U,Pe=X,De=1;else if(Me>0)_e=X,Pe=U,De=-1;else throw new Error("Tried to create degenerate segment at [".concat(U.x,", ").concat(U.y,"]"));var Ve=new xe(_e,!0),Ze=new xe(Pe,!1);return new ve(Ve,Ze,[oe],[De])}}]),ve}(),fe=function(){function ve(W,U,X){if(t(this,ve),!Array.isArray(W)||W.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=U,this.isExterior=X,this.segments=[],typeof W[0][0]!="number"||typeof W[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var oe=F.round(W[0][0],W[0][1]);this.bbox={ll:{x:oe.x,y:oe.y},ur:{x:oe.x,y:oe.y}};for(var _e=oe,Pe=1,De=W.length;Pe<De;Pe++){if(typeof W[Pe][0]!="number"||typeof W[Pe][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var Me=F.round(W[Pe][0],W[Pe][1]);Me.x===_e.x&&Me.y===_e.y||(this.segments.push(Q.fromRing(_e,Me,this)),Me.x<this.bbox.ll.x&&(this.bbox.ll.x=Me.x),Me.y<this.bbox.ll.y&&(this.bbox.ll.y=Me.y),Me.x>this.bbox.ur.x&&(this.bbox.ur.x=Me.x),Me.y>this.bbox.ur.y&&(this.bbox.ur.y=Me.y),_e=Me)}(oe.x!==_e.x||oe.y!==_e.y)&&this.segments.push(Q.fromRing(_e,oe,this))}return s(ve,[{key:"getSweepEvents",value:function(){for(var U=[],X=0,oe=this.segments.length;X<oe;X++){var _e=this.segments[X];U.push(_e.leftSE),U.push(_e.rightSE)}return U}}]),ve}(),Ae=function(){function ve(W,U){if(t(this,ve),!Array.isArray(W))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new fe(W[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var X=1,oe=W.length;X<oe;X++){var _e=new fe(W[X],this,!1);_e.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=_e.bbox.ll.x),_e.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=_e.bbox.ll.y),_e.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=_e.bbox.ur.x),_e.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=_e.bbox.ur.y),this.interiorRings.push(_e)}this.multiPoly=U}return s(ve,[{key:"getSweepEvents",value:function(){for(var U=this.exteriorRing.getSweepEvents(),X=0,oe=this.interiorRings.length;X<oe;X++)for(var _e=this.interiorRings[X].getSweepEvents(),Pe=0,De=_e.length;Pe<De;Pe++)U.push(_e[Pe]);return U}}]),ve}(),me=function(){function ve(W,U){if(t(this,ve),!Array.isArray(W))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof W[0][0][0]=="number"&&(W=[W])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var X=0,oe=W.length;X<oe;X++){var _e=new Ae(W[X],this);_e.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=_e.bbox.ll.x),_e.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=_e.bbox.ll.y),_e.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=_e.bbox.ur.x),_e.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=_e.bbox.ur.y),this.polys.push(_e)}this.isSubject=U}return s(ve,[{key:"getSweepEvents",value:function(){for(var U=[],X=0,oe=this.polys.length;X<oe;X++)for(var _e=this.polys[X].getSweepEvents(),Pe=0,De=_e.length;Pe<De;Pe++)U.push(_e[Pe]);return U}}]),ve}(),Se=function(){s(ve,null,[{key:"factory",value:function(U){for(var X=[],oe=0,_e=U.length;oe<_e;oe++){var Pe=U[oe];if(!(!Pe.isInResult()||Pe.ringOut)){for(var De=null,Me=Pe.leftSE,Ve=Pe.rightSE,Ze=[Me],Ue=Me.point,xt=[];De=Me,Me=Ve,Ze.push(Me),Me.point!==Ue;)for(;;){var ht=Me.getAvailableLinkedEvents();if(ht.length===0){var Pt=Ze[0].point,Et=Ze[Ze.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(Pt.x,",")+" ".concat(Pt.y,"]. Last matching segment found ends at")+" [".concat(Et.x,", ").concat(Et.y,"]."))}if(ht.length===1){Ve=ht[0].otherSE;break}for(var Tt=null,Rt=0,Bt=xt.length;Rt<Bt;Rt++)if(xt[Rt].point===Me.point){Tt=Rt;break}if(Tt!==null){var Vt=xt.splice(Tt)[0],zt=Ze.splice(Vt.index);zt.unshift(zt[0].otherSE),X.push(new ve(zt.reverse()));continue}xt.push({index:Ze.length,point:Me.point});var It=Me.getLeftmostComparator(De);Ve=ht.sort(It)[0].otherSE;break}X.push(new ve(Ze))}}return X}}]);function ve(W){t(this,ve),this.events=W;for(var U=0,X=W.length;U<X;U++)W[U].segment.ringOut=this;this.poly=null}return s(ve,[{key:"getGeom",value:function(){for(var U=this.events[0].point,X=[U],oe=1,_e=this.events.length-1;oe<_e;oe++){var Pe=this.events[oe].point,De=this.events[oe+1].point;J(Pe,U,De)!==0&&(X.push(Pe),U=Pe)}if(X.length===1)return null;var Me=X[0],Ve=X[1];J(Me,U,Ve)===0&&X.shift(),X.push(X[0]);for(var Ze=this.isExteriorRing()?1:-1,Ue=this.isExteriorRing()?0:X.length-1,xt=this.isExteriorRing()?X.length:-1,ht=[],Pt=Ue;Pt!=xt;Pt+=Ze)ht.push([X[Pt].x,X[Pt].y]);return ht}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var U=this.enclosingRing();this._isExteriorRing=U?!U.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var U=this.events[0],X=1,oe=this.events.length;X<oe;X++){var _e=this.events[X];xe.compare(U,_e)>0&&(U=_e)}for(var Pe=U.segment.prevInResult(),De=Pe?Pe.prevInResult():null;;){if(!Pe)return null;if(!De)return Pe.ringOut;if(De.ringOut!==Pe.ringOut)return De.ringOut.enclosingRing()!==Pe.ringOut?Pe.ringOut:Pe.ringOut.enclosingRing();Pe=De.prevInResult(),De=Pe?Pe.prevInResult():null}}}]),ve}(),Ie=function(){function ve(W){t(this,ve),this.exteriorRing=W,W.poly=this,this.interiorRings=[]}return s(ve,[{key:"addInterior",value:function(U){this.interiorRings.push(U),U.poly=this}},{key:"getGeom",value:function(){var U=[this.exteriorRing.getGeom()];if(U[0]===null)return null;for(var X=0,oe=this.interiorRings.length;X<oe;X++){var _e=this.interiorRings[X].getGeom();_e!==null&&U.push(_e)}return U}}]),ve}(),pe=function(){function ve(W){t(this,ve),this.rings=W,this.polys=this._composePolys(W)}return s(ve,[{key:"getGeom",value:function(){for(var U=[],X=0,oe=this.polys.length;X<oe;X++){var _e=this.polys[X].getGeom();_e!==null&&U.push(_e)}return U}},{key:"_composePolys",value:function(U){for(var X=[],oe=0,_e=U.length;oe<_e;oe++){var Pe=U[oe];if(!Pe.poly)if(Pe.isExteriorRing())X.push(new Ie(Pe));else{var De=Pe.enclosingRing();De.poly||X.push(new Ie(De)),De.poly.addInterior(Pe)}}return X}}]),ve}(),Te=function(){function ve(W){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Q.compare;t(this,ve),this.queue=W,this.tree=new g(U),this.segments=[]}return s(ve,[{key:"process",value:function(U){var X=U.segment,oe=[];if(U.consumedBy)return U.isLeft?this.queue.remove(U.otherSE):this.tree.remove(X),oe;var _e=U.isLeft?this.tree.insert(X):this.tree.find(X);if(!_e)throw new Error("Unable to find segment #".concat(X.id," ")+"[".concat(X.leftSE.point.x,", ").concat(X.leftSE.point.y,"] -> ")+"[".concat(X.rightSE.point.x,", ").concat(X.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var Pe=_e,De=_e,Me=void 0,Ve=void 0;Me===void 0;)Pe=this.tree.prev(Pe),Pe===null?Me=null:Pe.key.consumedBy===void 0&&(Me=Pe.key);for(;Ve===void 0;)De=this.tree.next(De),De===null?Ve=null:De.key.consumedBy===void 0&&(Ve=De.key);if(U.isLeft){var Ze=null;if(Me){var Ue=Me.getIntersection(X);if(Ue!==null&&(X.isAnEndpoint(Ue)||(Ze=Ue),!Me.isAnEndpoint(Ue)))for(var xt=this._splitSafely(Me,Ue),ht=0,Pt=xt.length;ht<Pt;ht++)oe.push(xt[ht])}var Et=null;if(Ve){var Tt=Ve.getIntersection(X);if(Tt!==null&&(X.isAnEndpoint(Tt)||(Et=Tt),!Ve.isAnEndpoint(Tt)))for(var Rt=this._splitSafely(Ve,Tt),Bt=0,Vt=Rt.length;Bt<Vt;Bt++)oe.push(Rt[Bt])}if(Ze!==null||Et!==null){var zt=null;if(Ze===null)zt=Et;else if(Et===null)zt=Ze;else{var It=xe.comparePoints(Ze,Et);zt=It<=0?Ze:Et}this.queue.remove(X.rightSE),oe.push(X.rightSE);for(var Ht=X.split(zt),Kt=0,Xe=Ht.length;Kt<Xe;Kt++)oe.push(Ht[Kt])}oe.length>0?(this.tree.remove(X),oe.push(U)):(this.segments.push(X),X.prev=Me)}else{if(Me&&Ve){var Oi=Me.getIntersection(Ve);if(Oi!==null){if(!Me.isAnEndpoint(Oi))for(var Ui=this._splitSafely(Me,Oi),Mt=0,u0=Ui.length;Mt<u0;Mt++)oe.push(Ui[Mt]);if(!Ve.isAnEndpoint(Oi))for(var Ji=this._splitSafely(Ve,Oi),Gi=0,Wi=Ji.length;Gi<Wi;Gi++)oe.push(Ji[Gi])}}this.tree.remove(X)}return oe}},{key:"_splitSafely",value:function(U,X){this.tree.remove(U);var oe=U.rightSE;this.queue.remove(oe);var _e=U.split(X);return _e.push(oe),U.consumedBy===void 0&&this.tree.insert(U),_e}}]),ve}(),ye=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,ge=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,ae=function(){function ve(){t(this,ve)}return s(ve,[{key:"run",value:function(U,X,oe){we.type=U,F.reset();for(var _e=[new me(X,!0)],Pe=0,De=oe.length;Pe<De;Pe++)_e.push(new me(oe[Pe],!1));if(we.numMultiPolys=_e.length,we.type==="difference")for(var Me=_e[0],Ve=1;Ve<_e.length;)D(_e[Ve].bbox,Me.bbox)!==null?Ve++:_e.splice(Ve,1);if(we.type==="intersection"){for(var Ze=0,Ue=_e.length;Ze<Ue;Ze++)for(var xt=_e[Ze],ht=Ze+1,Pt=_e.length;ht<Pt;ht++)if(D(xt.bbox,_e[ht].bbox)===null)return[]}for(var Et=new g(xe.compare),Tt=0,Rt=_e.length;Tt<Rt;Tt++)for(var Bt=_e[Tt].getSweepEvents(),Vt=0,zt=Bt.length;Vt<zt;Vt++)if(Et.insert(Bt[Vt]),Et.size>ye)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var It=new Te(Et),Ht=Et.size,Kt=Et.pop();Kt;){var Xe=Kt.key;if(Et.size===Ht){var Oi=Xe.segment;throw new Error("Unable to pop() ".concat(Xe.isLeft?"left":"right"," SweepEvent ")+"[".concat(Xe.point.x,", ").concat(Xe.point.y,"] from segment #").concat(Oi.id," ")+"[".concat(Oi.leftSE.point.x,", ").concat(Oi.leftSE.point.y,"] -> ")+"[".concat(Oi.rightSE.point.x,", ").concat(Oi.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(Et.size>ye)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(It.segments.length>ge)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var Ui=It.process(Xe),Mt=0,u0=Ui.length;Mt<u0;Mt++){var Ji=Ui[Mt];Ji.consumedBy===void 0&&Et.insert(Ji)}Ht=Et.size,Kt=Et.pop()}F.reset();var Gi=Se.factory(It.segments),Wi=new pe(Gi);return Wi.getGeom()}}]),ve}(),we=new ae,ke=function(W){for(var U=arguments.length,X=new Array(U>1?U-1:0),oe=1;oe<U;oe++)X[oe-1]=arguments[oe];return we.run("union",W,X)},Ne=function(W){for(var U=arguments.length,X=new Array(U>1?U-1:0),oe=1;oe<U;oe++)X[oe-1]=arguments[oe];return we.run("intersection",W,X)},$e=function(W){for(var U=arguments.length,X=new Array(U>1?U-1:0),oe=1;oe<U;oe++)X[oe-1]=arguments[oe];return we.run("xor",W,X)},qe=function(W){for(var U=arguments.length,X=new Array(U>1?U-1:0),oe=1;oe<U;oe++)X[oe-1]=arguments[oe];return we.run("difference",W,X)},Je={union:ke,intersection:Ne,xor:$e,difference:qe};return Je})}(polygonClipping_umd)),polygonClipping_umdExports}var hasRequiredJs$b;function requireJs$b(){if(hasRequiredJs$b)return jsExports$4;hasRequiredJs$b=1;var n=requirePolygonClipping_umd(),e=requireJs$1G(),t=requireJs$1D();function i(o){return o&&typeof o=="object"&&"default"in o?o:{default:o}}var s=i(n);function r(o,c){var _=t.getGeom(o),l=t.getGeom(c),d=o.properties||{},f=s.default.difference(_.coordinates,l.coordinates);return f.length===0?null:f.length===1?e.polygon(f[0],d):e.multiPolygon(f,d)}return js$a.exports=r,jsExports$4.default=r,jsExports$4}var jsExports$3={},js$9={get exports(){return jsExports$3},set exports(n){jsExports$3=n}},jsts_minExports={},jsts_min={get exports(){return jsts_minExports},set exports(n){jsts_minExports=n}},hasRequiredJsts_min;function requireJsts_min(){return hasRequiredJsts_min||(hasRequiredJsts_min=1,function(n,e){(function(t,i){i(e)})(commonjsGlobal,function(t){function i(){}function s(u){this.message=u||""}function r(u){this.message=u||""}function o(u){this.message=u||""}function c(){}function _(u){return u===null?ot:u.color}function l(u){return u===null?null:u.parent}function d(u,m){u!==null&&(u.color=m)}function f(u){return u===null?null:u.left}function g(u){return u===null?null:u.right}function b(){this.root_=null,this.size_=0}function C(){}function P(){this.array_=[],arguments[0]instanceof It&&this.addAll(arguments[0])}function S(){}function L(u){this.message=u||""}function E(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(u){if(this===void 0||this===null)throw new TypeError(this+" is not an object");var m=Object(this),v=Math.max(Math.min(m.length,9007199254740991),0)||0,w=1 in arguments&&parseInt(Number(arguments[1]),10)||0;w=w<0?Math.max(v+w,0):Math.min(w,v);var T=2 in arguments&&arguments[2]!==void 0?parseInt(Number(arguments[2]),10)||0:v;for(T=T<0?Math.max(v+arguments[2],0):Math.min(T,v);w<T;)m[w]=u,++w;return m},writable:!0}),Number.isFinite=Number.isFinite||function(u){return typeof u=="number"&&isFinite(u)},Number.isInteger=Number.isInteger||function(u){return typeof u=="number"&&isFinite(u)&&Math.floor(u)===u},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(u){return u!=u},Math.trunc=Math.trunc||function(u){return u<0?Math.ceil(u):Math.floor(u)};var M=function(){};M.prototype.interfaces_=function(){return[]},M.prototype.getClass=function(){return M},M.prototype.equalsWithTolerance=function(u,m,v){return Math.abs(u-m)<=v};var D=function(u){function m(v){u.call(this,v),this.name="IllegalArgumentException",this.message=v,this.stack=new u().stack}return u&&(m.__proto__=u),m.prototype=Object.create(u&&u.prototype),m.prototype.constructor=m,m}(Error),R=function(){},k={MAX_VALUE:{configurable:!0}};R.isNaN=function(u){return Number.isNaN(u)},R.doubleToLongBits=function(u){return u},R.longBitsToDouble=function(u){return u},R.isInfinite=function(u){return!Number.isFinite(u)},k.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(R,k);var N=function(){},$=function(){},B=function(){},F=function u(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)this.x=0,this.y=0,this.z=u.NULL_ORDINATE;else if(arguments.length===1){var m=arguments[0];this.x=m.x,this.y=m.y,this.z=m.z}else arguments.length===2?(this.x=arguments[0],this.y=arguments[1],this.z=u.NULL_ORDINATE):arguments.length===3&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},z={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};F.prototype.setOrdinate=function(u,m){switch(u){case F.X:this.x=m;break;case F.Y:this.y=m;break;case F.Z:this.z=m;break;default:throw new D("Invalid ordinate index: "+u)}},F.prototype.equals2D=function(){if(arguments.length===1){var u=arguments[0];return this.x===u.x&&this.y===u.y}if(arguments.length===2){var m=arguments[0],v=arguments[1];return!!M.equalsWithTolerance(this.x,m.x,v)&&!!M.equalsWithTolerance(this.y,m.y,v)}},F.prototype.getOrdinate=function(u){switch(u){case F.X:return this.x;case F.Y:return this.y;case F.Z:return this.z}throw new D("Invalid ordinate index: "+u)},F.prototype.equals3D=function(u){return this.x===u.x&&this.y===u.y&&(this.z===u.z||R.isNaN(this.z))&&R.isNaN(u.z)},F.prototype.equals=function(u){return u instanceof F&&this.equals2D(u)},F.prototype.equalInZ=function(u,m){return M.equalsWithTolerance(this.z,u.z,m)},F.prototype.compareTo=function(u){var m=u;return this.x<m.x?-1:this.x>m.x?1:this.y<m.y?-1:this.y>m.y?1:0},F.prototype.clone=function(){},F.prototype.copy=function(){return new F(this)},F.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},F.prototype.distance3D=function(u){var m=this.x-u.x,v=this.y-u.y,w=this.z-u.z;return Math.sqrt(m*m+v*v+w*w)},F.prototype.distance=function(u){var m=this.x-u.x,v=this.y-u.y;return Math.sqrt(m*m+v*v)},F.prototype.hashCode=function(){var u=17;return u=37*u+F.hashCode(this.x),u=37*u+F.hashCode(this.y)},F.prototype.setCoordinate=function(u){this.x=u.x,this.y=u.y,this.z=u.z},F.prototype.interfaces_=function(){return[N,$,i]},F.prototype.getClass=function(){return F},F.hashCode=function(){if(arguments.length===1){var u=arguments[0],m=R.doubleToLongBits(u);return Math.trunc((m^m)>>>32)}},z.DimensionalComparator.get=function(){return Y},z.serialVersionUID.get=function(){return 6683108902428367e3},z.NULL_ORDINATE.get=function(){return R.NaN},z.X.get=function(){return 0},z.Y.get=function(){return 1},z.Z.get=function(){return 2},Object.defineProperties(F,z);var Y=function(u){if(this._dimensionsToTest=2,arguments.length!==0){if(arguments.length===1){var m=arguments[0];if(m!==2&&m!==3)throw new D("only 2 or 3 dimensions may be specified");this._dimensionsToTest=m}}};Y.prototype.compare=function(u,m){var v=u,w=m,T=Y.compare(v.x,w.x);if(T!==0)return T;var H=Y.compare(v.y,w.y);return H!==0?H:this._dimensionsToTest<=2?0:Y.compare(v.z,w.z)},Y.prototype.interfaces_=function(){return[B]},Y.prototype.getClass=function(){return Y},Y.compare=function(u,m){return u<m?-1:u>m?1:R.isNaN(u)?R.isNaN(m)?0:-1:R.isNaN(m)?1:0};var J=function(){};J.prototype.create=function(){},J.prototype.interfaces_=function(){return[]},J.prototype.getClass=function(){return J};var q=function(){},le={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};q.prototype.interfaces_=function(){return[]},q.prototype.getClass=function(){return q},q.toLocationSymbol=function(u){switch(u){case q.EXTERIOR:return"e";case q.BOUNDARY:return"b";case q.INTERIOR:return"i";case q.NONE:return"-"}throw new D("Unknown location value: "+u)},le.INTERIOR.get=function(){return 0},le.BOUNDARY.get=function(){return 1},le.EXTERIOR.get=function(){return 2},le.NONE.get=function(){return-1},Object.defineProperties(q,le);var j=function(u,m){return u.interfaces_&&u.interfaces_().indexOf(m)>-1},ie=function(){},te={LOG_10:{configurable:!0}};ie.prototype.interfaces_=function(){return[]},ie.prototype.getClass=function(){return ie},ie.log10=function(u){var m=Math.log(u);return R.isInfinite(m)||R.isNaN(m)?m:m/ie.LOG_10},ie.min=function(u,m,v,w){var T=u;return m<T&&(T=m),v<T&&(T=v),w<T&&(T=w),T},ie.clamp=function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var u=arguments[0],m=arguments[1],v=arguments[2];return u<m?m:u>v?v:u}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var w=arguments[0],T=arguments[1],H=arguments[2];return w<T?T:w>H?H:w}},ie.wrap=function(u,m){return u<0?m- -u%m:u%m},ie.max=function(){if(arguments.length===3){var u=arguments[0],m=arguments[1],v=arguments[2],w=u;return m>w&&(w=m),v>w&&(w=v),w}if(arguments.length===4){var T=arguments[0],H=arguments[1],G=arguments[2],K=arguments[3],de=T;return H>de&&(de=H),G>de&&(de=G),K>de&&(de=K),de}},ie.average=function(u,m){return(u+m)/2},te.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(ie,te);var ce=function(u){this.str=u};ce.prototype.append=function(u){this.str+=u},ce.prototype.setCharAt=function(u,m){this.str=this.str.substr(0,u)+m+this.str.substr(u+1)},ce.prototype.toString=function(u){return this.str};var xe=function(u){this.value=u};xe.prototype.intValue=function(){return this.value},xe.prototype.compareTo=function(u){return this.value<u?-1:this.value>u?1:0},xe.isNaN=function(u){return Number.isNaN(u)};var he=function(){};he.isWhitespace=function(u){return u<=32&&u>=0||u===127},he.toUpperCase=function(u){return u.toUpperCase()};var Q=function u(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var m=arguments[0];this.init(m)}else if(arguments[0]instanceof u){var v=arguments[0];this.init(v)}else if(typeof arguments[0]=="string"){var w=arguments[0];u.call(this,u.parse(w))}}else if(arguments.length===2){var T=arguments[0],H=arguments[1];this.init(T,H)}},fe={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};Q.prototype.le=function(u){return(this._hi<u._hi||this._hi===u._hi)&&this._lo<=u._lo},Q.prototype.extractSignificantDigits=function(u,m){var v=this.abs(),w=Q.magnitude(v._hi),T=Q.TEN.pow(w);(v=v.divide(T)).gt(Q.TEN)?(v=v.divide(Q.TEN),w+=1):v.lt(Q.ONE)&&(v=v.multiply(Q.TEN),w-=1);for(var H=w+1,G=new ce,K=Q.MAX_PRINT_DIGITS-1,de=0;de<=K;de++){u&&de===H&&G.append(".");var Le=Math.trunc(v._hi);if(Le<0)break;var He=!1,ze=0;Le>9?(He=!0,ze="9"):ze="0"+Le,G.append(ze),v=v.subtract(Q.valueOf(Le)).multiply(Q.TEN),He&&v.selfAdd(Q.TEN);var it=!0,at=Q.magnitude(v._hi);if(at<0&&Math.abs(at)>=K-de&&(it=!1),!it)break}return m[0]=w,G.toString()},Q.prototype.sqr=function(){return this.multiply(this)},Q.prototype.doubleValue=function(){return this._hi+this._lo},Q.prototype.subtract=function(){if(arguments[0]instanceof Q){var u=arguments[0];return this.add(u.negate())}if(typeof arguments[0]=="number"){var m=arguments[0];return this.add(-m)}},Q.prototype.equals=function(){if(arguments.length===1){var u=arguments[0];return this._hi===u._hi&&this._lo===u._lo}},Q.prototype.isZero=function(){return this._hi===0&&this._lo===0},Q.prototype.selfSubtract=function(){if(arguments[0]instanceof Q){var u=arguments[0];return this.isNaN()?this:this.selfAdd(-u._hi,-u._lo)}if(typeof arguments[0]=="number"){var m=arguments[0];return this.isNaN()?this:this.selfAdd(-m,0)}},Q.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},Q.prototype.min=function(u){return this.le(u)?this:u},Q.prototype.selfDivide=function(){if(arguments.length===1){if(arguments[0]instanceof Q){var u=arguments[0];return this.selfDivide(u._hi,u._lo)}if(typeof arguments[0]=="number"){var m=arguments[0];return this.selfDivide(m,0)}}else if(arguments.length===2){var v=arguments[0],w=arguments[1],T=null,H=null,G=null,K=null,de=null,Le=null,He=null,ze=null;return de=this._hi/v,Le=Q.SPLIT*de,T=Le-de,ze=Q.SPLIT*v,T=Le-T,H=de-T,G=ze-v,He=de*v,G=ze-G,K=v-G,ze=T*G-He+T*K+H*G+H*K,Le=(this._hi-He-ze+this._lo-de*w)/v,ze=de+Le,this._hi=ze,this._lo=de-ze+Le,this}},Q.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},Q.prototype.divide=function(){if(arguments[0]instanceof Q){var u=arguments[0],m=null,v=null,w=null,T=null,H=null,G=null,K=null,de=null;return v=(H=this._hi/u._hi)-(m=(G=Q.SPLIT*H)-(m=G-H)),de=m*(w=(de=Q.SPLIT*u._hi)-(w=de-u._hi))-(K=H*u._hi)+m*(T=u._hi-w)+v*w+v*T,G=(this._hi-K-de+this._lo-H*u._lo)/u._hi,new Q(de=H+G,H-de+G)}if(typeof arguments[0]=="number"){var Le=arguments[0];return R.isNaN(Le)?Q.createNaN():Q.copy(this).selfDivide(Le,0)}},Q.prototype.ge=function(u){return(this._hi>u._hi||this._hi===u._hi)&&this._lo>=u._lo},Q.prototype.pow=function(u){if(u===0)return Q.valueOf(1);var m=new Q(this),v=Q.valueOf(1),w=Math.abs(u);if(w>1)for(;w>0;)w%2==1&&v.selfMultiply(m),(w/=2)>0&&(m=m.sqr());else v=m;return u<0?v.reciprocal():v},Q.prototype.ceil=function(){if(this.isNaN())return Q.NaN;var u=Math.ceil(this._hi),m=0;return u===this._hi&&(m=Math.ceil(this._lo)),new Q(u,m)},Q.prototype.compareTo=function(u){var m=u;return this._hi<m._hi?-1:this._hi>m._hi?1:this._lo<m._lo?-1:this._lo>m._lo?1:0},Q.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},Q.prototype.setValue=function(){if(arguments[0]instanceof Q){var u=arguments[0];return this.init(u),this}if(typeof arguments[0]=="number"){var m=arguments[0];return this.init(m),this}},Q.prototype.max=function(u){return this.ge(u)?this:u},Q.prototype.sqrt=function(){if(this.isZero())return Q.valueOf(0);if(this.isNegative())return Q.NaN;var u=1/Math.sqrt(this._hi),m=this._hi*u,v=Q.valueOf(m),w=this.subtract(v.sqr())._hi*(.5*u);return v.add(w)},Q.prototype.selfAdd=function(){if(arguments.length===1){if(arguments[0]instanceof Q){var u=arguments[0];return this.selfAdd(u._hi,u._lo)}if(typeof arguments[0]=="number"){var m=arguments[0],v=null,w=null,T=null,H=null,G=null,K=null;return T=this._hi+m,G=T-this._hi,H=T-G,H=m-G+(this._hi-H),K=H+this._lo,v=T+K,w=K+(T-v),this._hi=v+w,this._lo=w+(v-this._hi),this}}else if(arguments.length===2){var de=arguments[0],Le=arguments[1],He=null,ze=null,it=null,at=null,_t=null,vt=null,Ft=null;at=this._hi+de,ze=this._lo+Le,_t=at-(vt=at-this._hi),it=ze-(Ft=ze-this._lo);var si=(He=at+(vt=(_t=de-vt+(this._hi-_t))+ze))+(vt=(it=Le-Ft+(this._lo-it))+(vt+(at-He))),Di=vt+(He-si);return this._hi=si,this._lo=Di,this}},Q.prototype.selfMultiply=function(){if(arguments.length===1){if(arguments[0]instanceof Q){var u=arguments[0];return this.selfMultiply(u._hi,u._lo)}if(typeof arguments[0]=="number"){var m=arguments[0];return this.selfMultiply(m,0)}}else if(arguments.length===2){var v=arguments[0],w=arguments[1],T=null,H=null,G=null,K=null,de=null,Le=null;T=(de=Q.SPLIT*this._hi)-this._hi,Le=Q.SPLIT*v,T=de-T,H=this._hi-T,G=Le-v;var He=(de=this._hi*v)+(Le=T*(G=Le-G)-de+T*(K=v-G)+H*G+H*K+(this._hi*w+this._lo*v)),ze=Le+(T=de-He);return this._hi=He,this._lo=ze,this}},Q.prototype.selfSqr=function(){return this.selfMultiply(this)},Q.prototype.floor=function(){if(this.isNaN())return Q.NaN;var u=Math.floor(this._hi),m=0;return u===this._hi&&(m=Math.floor(this._lo)),new Q(u,m)},Q.prototype.negate=function(){return this.isNaN()?this:new Q(-this._hi,-this._lo)},Q.prototype.clone=function(){},Q.prototype.multiply=function(){if(arguments[0]instanceof Q){var u=arguments[0];return u.isNaN()?Q.createNaN():Q.copy(this).selfMultiply(u)}if(typeof arguments[0]=="number"){var m=arguments[0];return R.isNaN(m)?Q.createNaN():Q.copy(this).selfMultiply(m,0)}},Q.prototype.isNaN=function(){return R.isNaN(this._hi)},Q.prototype.intValue=function(){return Math.trunc(this._hi)},Q.prototype.toString=function(){var u=Q.magnitude(this._hi);return u>=-3&&u<=20?this.toStandardNotation():this.toSciNotation()},Q.prototype.toStandardNotation=function(){var u=this.getSpecialNumberString();if(u!==null)return u;var m=new Array(1).fill(null),v=this.extractSignificantDigits(!0,m),w=m[0]+1,T=v;if(v.charAt(0)===".")T="0"+v;else if(w<0)T="0."+Q.stringOfChar("0",-w)+v;else if(v.indexOf(".")===-1){var H=w-v.length;T=v+Q.stringOfChar("0",H)+".0"}return this.isNegative()?"-"+T:T},Q.prototype.reciprocal=function(){var u=null,m=null,v=null,w=null,T=null,H=null,G=null,K=null;m=(T=1/this._hi)-(u=(H=Q.SPLIT*T)-(u=H-T)),v=(K=Q.SPLIT*this._hi)-this._hi;var de=T+(H=(1-(G=T*this._hi)-(K=u*(v=K-v)-G+u*(w=this._hi-v)+m*v+m*w)-T*this._lo)/this._hi);return new Q(de,T-de+H)},Q.prototype.toSciNotation=function(){if(this.isZero())return Q.SCI_NOT_ZERO;var u=this.getSpecialNumberString();if(u!==null)return u;var m=new Array(1).fill(null),v=this.extractSignificantDigits(!1,m),w=Q.SCI_NOT_EXPONENT_CHAR+m[0];if(v.charAt(0)==="0")throw new Error("Found leading zero: "+v);var T="";v.length>1&&(T=v.substring(1));var H=v.charAt(0)+"."+T;return this.isNegative()?"-"+H+w:H+w},Q.prototype.abs=function(){return this.isNaN()?Q.NaN:this.isNegative()?this.negate():new Q(this)},Q.prototype.isPositive=function(){return(this._hi>0||this._hi===0)&&this._lo>0},Q.prototype.lt=function(u){return(this._hi<u._hi||this._hi===u._hi)&&this._lo<u._lo},Q.prototype.add=function(){if(arguments[0]instanceof Q){var u=arguments[0];return Q.copy(this).selfAdd(u)}if(typeof arguments[0]=="number"){var m=arguments[0];return Q.copy(this).selfAdd(m)}},Q.prototype.init=function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var u=arguments[0];this._hi=u,this._lo=0}else if(arguments[0]instanceof Q){var m=arguments[0];this._hi=m._hi,this._lo=m._lo}}else if(arguments.length===2){var v=arguments[0],w=arguments[1];this._hi=v,this._lo=w}},Q.prototype.gt=function(u){return(this._hi>u._hi||this._hi===u._hi)&&this._lo>u._lo},Q.prototype.isNegative=function(){return(this._hi<0||this._hi===0)&&this._lo<0},Q.prototype.trunc=function(){return this.isNaN()?Q.NaN:this.isPositive()?this.floor():this.ceil()},Q.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},Q.prototype.interfaces_=function(){return[i,N,$]},Q.prototype.getClass=function(){return Q},Q.sqr=function(u){return Q.valueOf(u).selfMultiply(u)},Q.valueOf=function(){if(typeof arguments[0]=="string"){var u=arguments[0];return Q.parse(u)}if(typeof arguments[0]=="number"){var m=arguments[0];return new Q(m)}},Q.sqrt=function(u){return Q.valueOf(u).sqrt()},Q.parse=function(u){for(var m=0,v=u.length;he.isWhitespace(u.charAt(m));)m++;var w=!1;if(m<v){var T=u.charAt(m);T!=="-"&&T!=="+"||(m++,T==="-"&&(w=!0))}for(var H=new Q,G=0,K=0,de=0;!(m>=v);){var Le=u.charAt(m);if(m++,he.isDigit(Le)){var He=Le-"0";H.selfMultiply(Q.TEN),H.selfAdd(He),G++}else{if(Le!=="."){if(Le==="e"||Le==="E"){var ze=u.substring(m);try{de=xe.parseInt(ze)}catch(Ft){throw Ft instanceof Error?new Error("Invalid exponent "+ze+" in string "+u):Ft}break}throw new Error("Unexpected character '"+Le+"' at position "+m+" in string "+u)}K=G}}var it=H,at=G-K-de;if(at===0)it=H;else if(at>0){var _t=Q.TEN.pow(at);it=H.divide(_t)}else if(at<0){var vt=Q.TEN.pow(-at);it=H.multiply(vt)}return w?it.negate():it},Q.createNaN=function(){return new Q(R.NaN,R.NaN)},Q.copy=function(u){return new Q(u)},Q.magnitude=function(u){var m=Math.abs(u),v=Math.log(m)/Math.log(10),w=Math.trunc(Math.floor(v));return 10*Math.pow(10,w)<=m&&(w+=1),w},Q.stringOfChar=function(u,m){for(var v=new ce,w=0;w<m;w++)v.append(u);return v.toString()},fe.PI.get=function(){return new Q(3.141592653589793,12246467991473532e-32)},fe.TWO_PI.get=function(){return new Q(6.283185307179586,24492935982947064e-32)},fe.PI_2.get=function(){return new Q(1.5707963267948966,6123233995736766e-32)},fe.E.get=function(){return new Q(2.718281828459045,14456468917292502e-32)},fe.NaN.get=function(){return new Q(R.NaN,R.NaN)},fe.EPS.get=function(){return 123259516440783e-46},fe.SPLIT.get=function(){return 134217729},fe.MAX_PRINT_DIGITS.get=function(){return 32},fe.TEN.get=function(){return Q.valueOf(10)},fe.ONE.get=function(){return Q.valueOf(1)},fe.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},fe.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(Q,fe);var Ae=function(){},me={DP_SAFE_EPSILON:{configurable:!0}};Ae.prototype.interfaces_=function(){return[]},Ae.prototype.getClass=function(){return Ae},Ae.orientationIndex=function(u,m,v){var w=Ae.orientationIndexFilter(u,m,v);if(w<=1)return w;var T=Q.valueOf(m.x).selfAdd(-u.x),H=Q.valueOf(m.y).selfAdd(-u.y),G=Q.valueOf(v.x).selfAdd(-m.x),K=Q.valueOf(v.y).selfAdd(-m.y);return T.selfMultiply(K).selfSubtract(H.selfMultiply(G)).signum()},Ae.signOfDet2x2=function(u,m,v,w){return u.multiply(w).selfSubtract(m.multiply(v)).signum()},Ae.intersection=function(u,m,v,w){var T=Q.valueOf(w.y).selfSubtract(v.y).selfMultiply(Q.valueOf(m.x).selfSubtract(u.x)),H=Q.valueOf(w.x).selfSubtract(v.x).selfMultiply(Q.valueOf(m.y).selfSubtract(u.y)),G=T.subtract(H),K=Q.valueOf(w.x).selfSubtract(v.x).selfMultiply(Q.valueOf(u.y).selfSubtract(v.y)),de=Q.valueOf(w.y).selfSubtract(v.y).selfMultiply(Q.valueOf(u.x).selfSubtract(v.x)),Le=K.subtract(de).selfDivide(G).doubleValue(),He=Q.valueOf(u.x).selfAdd(Q.valueOf(m.x).selfSubtract(u.x).selfMultiply(Le)).doubleValue(),ze=Q.valueOf(m.x).selfSubtract(u.x).selfMultiply(Q.valueOf(u.y).selfSubtract(v.y)),it=Q.valueOf(m.y).selfSubtract(u.y).selfMultiply(Q.valueOf(u.x).selfSubtract(v.x)),at=ze.subtract(it).selfDivide(G).doubleValue(),_t=Q.valueOf(v.y).selfAdd(Q.valueOf(w.y).selfSubtract(v.y).selfMultiply(at)).doubleValue();return new F(He,_t)},Ae.orientationIndexFilter=function(u,m,v){var w=null,T=(u.x-v.x)*(m.y-v.y),H=(u.y-v.y)*(m.x-v.x),G=T-H;if(T>0){if(H<=0)return Ae.signum(G);w=T+H}else{if(!(T<0)||H>=0)return Ae.signum(G);w=-T-H}var K=Ae.DP_SAFE_EPSILON*w;return G>=K||-G>=K?Ae.signum(G):2},Ae.signum=function(u){return u>0?1:u<0?-1:0},me.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(Ae,me);var Se=function(){},Ie={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};Ie.X.get=function(){return 0},Ie.Y.get=function(){return 1},Ie.Z.get=function(){return 2},Ie.M.get=function(){return 3},Se.prototype.setOrdinate=function(u,m,v){},Se.prototype.size=function(){},Se.prototype.getOrdinate=function(u,m){},Se.prototype.getCoordinate=function(){},Se.prototype.getCoordinateCopy=function(u){},Se.prototype.getDimension=function(){},Se.prototype.getX=function(u){},Se.prototype.clone=function(){},Se.prototype.expandEnvelope=function(u){},Se.prototype.copy=function(){},Se.prototype.getY=function(u){},Se.prototype.toCoordinateArray=function(){},Se.prototype.interfaces_=function(){return[$]},Se.prototype.getClass=function(){return Se},Object.defineProperties(Se,Ie);var pe=function(){},Te=function(u){function m(){u.call(this,"Projective point not representable on the Cartesian plane.")}return u&&(m.__proto__=u),m.prototype=Object.create(u&&u.prototype),m.prototype.constructor=m,m.prototype.interfaces_=function(){return[]},m.prototype.getClass=function(){return m},m}(pe),ye=function(){};ye.arraycopy=function(u,m,v,w,T){for(var H=0,G=m;G<m+T;G++)v[w+H]=u[G],H++},ye.getProperty=function(u){return{"line.separator":`
`}[u]};var ge=function u(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var m=arguments[0];this.x=m.x,this.y=m.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var v=arguments[0],w=arguments[1];this.x=v,this.y=w,this.w=1}else if(arguments[0]instanceof u&&arguments[1]instanceof u){var T=arguments[0],H=arguments[1];this.x=T.y*H.w-H.y*T.w,this.y=H.x*T.w-T.x*H.w,this.w=T.x*H.y-H.x*T.y}else if(arguments[0]instanceof F&&arguments[1]instanceof F){var G=arguments[0],K=arguments[1];this.x=G.y-K.y,this.y=K.x-G.x,this.w=G.x*K.y-K.x*G.y}}else if(arguments.length===3){var de=arguments[0],Le=arguments[1],He=arguments[2];this.x=de,this.y=Le,this.w=He}else if(arguments.length===4){var ze=arguments[0],it=arguments[1],at=arguments[2],_t=arguments[3],vt=ze.y-it.y,Ft=it.x-ze.x,si=ze.x*it.y-it.x*ze.y,Di=at.y-_t.y,R0=_t.x-at.x,ta=at.x*_t.y-_t.x*at.y;this.x=Ft*ta-R0*si,this.y=Di*si-vt*ta,this.w=vt*R0-Di*Ft}};ge.prototype.getY=function(){var u=this.y/this.w;if(R.isNaN(u)||R.isInfinite(u))throw new Te;return u},ge.prototype.getX=function(){var u=this.x/this.w;if(R.isNaN(u)||R.isInfinite(u))throw new Te;return u},ge.prototype.getCoordinate=function(){var u=new F;return u.x=this.getX(),u.y=this.getY(),u},ge.prototype.interfaces_=function(){return[]},ge.prototype.getClass=function(){return ge},ge.intersection=function(u,m,v,w){var T=u.y-m.y,H=m.x-u.x,G=u.x*m.y-m.x*u.y,K=v.y-w.y,de=w.x-v.x,Le=v.x*w.y-w.x*v.y,He=T*de-K*H,ze=(H*Le-de*G)/He,it=(K*G-T*Le)/He;if(R.isNaN(ze)||R.isInfinite(ze)||R.isNaN(it)||R.isInfinite(it))throw new Te;return new F(ze,it)};var ae=function u(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof F){var m=arguments[0];this.init(m.x,m.x,m.y,m.y)}else if(arguments[0]instanceof u){var v=arguments[0];this.init(v)}}else if(arguments.length===2){var w=arguments[0],T=arguments[1];this.init(w.x,T.x,w.y,T.y)}else if(arguments.length===4){var H=arguments[0],G=arguments[1],K=arguments[2],de=arguments[3];this.init(H,G,K,de)}},we={serialVersionUID:{configurable:!0}};ae.prototype.getArea=function(){return this.getWidth()*this.getHeight()},ae.prototype.equals=function(u){if(!(u instanceof ae))return!1;var m=u;return this.isNull()?m.isNull():this._maxx===m.getMaxX()&&this._maxy===m.getMaxY()&&this._minx===m.getMinX()&&this._miny===m.getMinY()},ae.prototype.intersection=function(u){if(this.isNull()||u.isNull()||!this.intersects(u))return new ae;var m=this._minx>u._minx?this._minx:u._minx,v=this._miny>u._miny?this._miny:u._miny,w=this._maxx<u._maxx?this._maxx:u._maxx,T=this._maxy<u._maxy?this._maxy:u._maxy;return new ae(m,w,v,T)},ae.prototype.isNull=function(){return this._maxx<this._minx},ae.prototype.getMaxX=function(){return this._maxx},ae.prototype.covers=function(){if(arguments.length===1){if(arguments[0]instanceof F){var u=arguments[0];return this.covers(u.x,u.y)}if(arguments[0]instanceof ae){var m=arguments[0];return!this.isNull()&&!m.isNull()&&m.getMinX()>=this._minx&&m.getMaxX()<=this._maxx&&m.getMinY()>=this._miny&&m.getMaxY()<=this._maxy}}else if(arguments.length===2){var v=arguments[0],w=arguments[1];return!this.isNull()&&v>=this._minx&&v<=this._maxx&&w>=this._miny&&w<=this._maxy}},ae.prototype.intersects=function(){if(arguments.length===1){if(arguments[0]instanceof ae){var u=arguments[0];return!this.isNull()&&!u.isNull()&&!(u._minx>this._maxx||u._maxx<this._minx||u._miny>this._maxy||u._maxy<this._miny)}if(arguments[0]instanceof F){var m=arguments[0];return this.intersects(m.x,m.y)}}else if(arguments.length===2){var v=arguments[0],w=arguments[1];return!this.isNull()&&!(v>this._maxx||v<this._minx||w>this._maxy||w<this._miny)}},ae.prototype.getMinY=function(){return this._miny},ae.prototype.getMinX=function(){return this._minx},ae.prototype.expandToInclude=function(){if(arguments.length===1){if(arguments[0]instanceof F){var u=arguments[0];this.expandToInclude(u.x,u.y)}else if(arguments[0]instanceof ae){var m=arguments[0];if(m.isNull())return null;this.isNull()?(this._minx=m.getMinX(),this._maxx=m.getMaxX(),this._miny=m.getMinY(),this._maxy=m.getMaxY()):(m._minx<this._minx&&(this._minx=m._minx),m._maxx>this._maxx&&(this._maxx=m._maxx),m._miny<this._miny&&(this._miny=m._miny),m._maxy>this._maxy&&(this._maxy=m._maxy))}}else if(arguments.length===2){var v=arguments[0],w=arguments[1];this.isNull()?(this._minx=v,this._maxx=v,this._miny=w,this._maxy=w):(v<this._minx&&(this._minx=v),v>this._maxx&&(this._maxx=v),w<this._miny&&(this._miny=w),w>this._maxy&&(this._maxy=w))}},ae.prototype.minExtent=function(){if(this.isNull())return 0;var u=this.getWidth(),m=this.getHeight();return u<m?u:m},ae.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},ae.prototype.compareTo=function(u){var m=u;return this.isNull()?m.isNull()?0:-1:m.isNull()?1:this._minx<m._minx?-1:this._minx>m._minx?1:this._miny<m._miny?-1:this._miny>m._miny?1:this._maxx<m._maxx?-1:this._maxx>m._maxx?1:this._maxy<m._maxy?-1:this._maxy>m._maxy?1:0},ae.prototype.translate=function(u,m){if(this.isNull())return null;this.init(this.getMinX()+u,this.getMaxX()+u,this.getMinY()+m,this.getMaxY()+m)},ae.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},ae.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},ae.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},ae.prototype.maxExtent=function(){if(this.isNull())return 0;var u=this.getWidth(),m=this.getHeight();return u>m?u:m},ae.prototype.expandBy=function(){if(arguments.length===1){var u=arguments[0];this.expandBy(u,u)}else if(arguments.length===2){var m=arguments[0],v=arguments[1];if(this.isNull())return null;this._minx-=m,this._maxx+=m,this._miny-=v,this._maxy+=v,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},ae.prototype.contains=function(){if(arguments.length===1){if(arguments[0]instanceof ae){var u=arguments[0];return this.covers(u)}if(arguments[0]instanceof F){var m=arguments[0];return this.covers(m)}}else if(arguments.length===2){var v=arguments[0],w=arguments[1];return this.covers(v,w)}},ae.prototype.centre=function(){return this.isNull()?null:new F((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},ae.prototype.init=function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof F){var u=arguments[0];this.init(u.x,u.x,u.y,u.y)}else if(arguments[0]instanceof ae){var m=arguments[0];this._minx=m._minx,this._maxx=m._maxx,this._miny=m._miny,this._maxy=m._maxy}}else if(arguments.length===2){var v=arguments[0],w=arguments[1];this.init(v.x,w.x,v.y,w.y)}else if(arguments.length===4){var T=arguments[0],H=arguments[1],G=arguments[2],K=arguments[3];T<H?(this._minx=T,this._maxx=H):(this._minx=H,this._maxx=T),G<K?(this._miny=G,this._maxy=K):(this._miny=K,this._maxy=G)}},ae.prototype.getMaxY=function(){return this._maxy},ae.prototype.distance=function(u){if(this.intersects(u))return 0;var m=0;this._maxx<u._minx?m=u._minx-this._maxx:this._minx>u._maxx&&(m=this._minx-u._maxx);var v=0;return this._maxy<u._miny?v=u._miny-this._maxy:this._miny>u._maxy&&(v=this._miny-u._maxy),m===0?v:v===0?m:Math.sqrt(m*m+v*v)},ae.prototype.hashCode=function(){var u=17;return u=37*u+F.hashCode(this._minx),u=37*u+F.hashCode(this._maxx),u=37*u+F.hashCode(this._miny),u=37*u+F.hashCode(this._maxy)},ae.prototype.interfaces_=function(){return[N,i]},ae.prototype.getClass=function(){return ae},ae.intersects=function(){if(arguments.length===3){var u=arguments[0],m=arguments[1],v=arguments[2];return v.x>=(u.x<m.x?u.x:m.x)&&v.x<=(u.x>m.x?u.x:m.x)&&v.y>=(u.y<m.y?u.y:m.y)&&v.y<=(u.y>m.y?u.y:m.y)}if(arguments.length===4){var w=arguments[0],T=arguments[1],H=arguments[2],G=arguments[3],K=Math.min(H.x,G.x),de=Math.max(H.x,G.x),Le=Math.min(w.x,T.x),He=Math.max(w.x,T.x);return!(Le>de)&&!(He<K)&&(K=Math.min(H.y,G.y),de=Math.max(H.y,G.y),Le=Math.min(w.y,T.y),He=Math.max(w.y,T.y),!(Le>de)&&!(He<K))}},we.serialVersionUID.get=function(){return 5873921885273102e3},Object.defineProperties(ae,we);var ke={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Ne=function(u){this.geometryFactory=u||new tt};Ne.prototype.read=function(u){var m,v,w;u=u.replace(/[\n\r]/g," ");var T=ke.typeStr.exec(u);if(u.search("EMPTY")!==-1&&((T=ke.emptyTypeStr.exec(u))[2]=void 0),T&&(v=T[1].toLowerCase(),w=T[2],qe[v]&&(m=qe[v].apply(this,[w]))),m===void 0)throw new Error("Could not parse WKT "+u);return m},Ne.prototype.write=function(u){return this.extractGeometry(u)},Ne.prototype.extractGeometry=function(u){var m=u.getGeometryType().toLowerCase();if(!$e[m])return null;var v=m.toUpperCase();return u.isEmpty()?v+" EMPTY":v+"("+$e[m].apply(this,[u])+")"};var $e={coordinate:function(u){return u.x+" "+u.y},point:function(u){return $e.coordinate.call(this,u._coordinates._coordinates[0])},multipoint:function(u){for(var m=[],v=0,w=u._geometries.length;v<w;++v)m.push("("+$e.point.apply(this,[u._geometries[v]])+")");return m.join(",")},linestring:function(u){for(var m=[],v=0,w=u._points._coordinates.length;v<w;++v)m.push($e.coordinate.apply(this,[u._points._coordinates[v]]));return m.join(",")},linearring:function(u){for(var m=[],v=0,w=u._points._coordinates.length;v<w;++v)m.push($e.coordinate.apply(this,[u._points._coordinates[v]]));return m.join(",")},multilinestring:function(u){for(var m=[],v=0,w=u._geometries.length;v<w;++v)m.push("("+$e.linestring.apply(this,[u._geometries[v]])+")");return m.join(",")},polygon:function(u){var m=[];m.push("("+$e.linestring.apply(this,[u._shell])+")");for(var v=0,w=u._holes.length;v<w;++v)m.push("("+$e.linestring.apply(this,[u._holes[v]])+")");return m.join(",")},multipolygon:function(u){for(var m=[],v=0,w=u._geometries.length;v<w;++v)m.push("("+$e.polygon.apply(this,[u._geometries[v]])+")");return m.join(",")},geometrycollection:function(u){for(var m=[],v=0,w=u._geometries.length;v<w;++v)m.push(this.extractGeometry(u._geometries[v]));return m.join(",")}},qe={point:function(u){if(u===void 0)return this.geometryFactory.createPoint();var m=u.trim().split(ke.spaces);return this.geometryFactory.createPoint(new F(Number.parseFloat(m[0]),Number.parseFloat(m[1])))},multipoint:function(u){if(u===void 0)return this.geometryFactory.createMultiPoint();for(var m,v=u.trim().split(","),w=[],T=0,H=v.length;T<H;++T)m=v[T].replace(ke.trimParens,"$1"),w.push(qe.point.apply(this,[m]));return this.geometryFactory.createMultiPoint(w)},linestring:function(u){if(u===void 0)return this.geometryFactory.createLineString();for(var m,v=u.trim().split(","),w=[],T=0,H=v.length;T<H;++T)m=v[T].trim().split(ke.spaces),w.push(new F(Number.parseFloat(m[0]),Number.parseFloat(m[1])));return this.geometryFactory.createLineString(w)},linearring:function(u){if(u===void 0)return this.geometryFactory.createLinearRing();for(var m,v=u.trim().split(","),w=[],T=0,H=v.length;T<H;++T)m=v[T].trim().split(ke.spaces),w.push(new F(Number.parseFloat(m[0]),Number.parseFloat(m[1])));return this.geometryFactory.createLinearRing(w)},multilinestring:function(u){if(u===void 0)return this.geometryFactory.createMultiLineString();for(var m,v=u.trim().split(ke.parenComma),w=[],T=0,H=v.length;T<H;++T)m=v[T].replace(ke.trimParens,"$1"),w.push(qe.linestring.apply(this,[m]));return this.geometryFactory.createMultiLineString(w)},polygon:function(u){if(u===void 0)return this.geometryFactory.createPolygon();for(var m,v,w,T,H=u.trim().split(ke.parenComma),G=[],K=0,de=H.length;K<de;++K)m=H[K].replace(ke.trimParens,"$1"),v=qe.linestring.apply(this,[m]),w=this.geometryFactory.createLinearRing(v._points),K===0?T=w:G.push(w);return this.geometryFactory.createPolygon(T,G)},multipolygon:function(u){if(u===void 0)return this.geometryFactory.createMultiPolygon();for(var m,v=u.trim().split(ke.doubleParenComma),w=[],T=0,H=v.length;T<H;++T)m=v[T].replace(ke.trimParens,"$1"),w.push(qe.polygon.apply(this,[m]));return this.geometryFactory.createMultiPolygon(w)},geometrycollection:function(u){if(u===void 0)return this.geometryFactory.createGeometryCollection();for(var m=(u=u.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),v=[],w=0,T=m.length;w<T;++w)v.push(this.read(m[w]));return this.geometryFactory.createGeometryCollection(v)}},Je=function(u){this.parser=new Ne(u)};Je.prototype.write=function(u){return this.parser.write(u)},Je.toLineString=function(u,m){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+u.x+" "+u.y+", "+m.x+" "+m.y+" )"};var ve=function(u){function m(v){u.call(this,v),this.name="RuntimeException",this.message=v,this.stack=new u().stack}return u&&(m.__proto__=u),m.prototype=Object.create(u&&u.prototype),m.prototype.constructor=m,m}(Error),W=function(u){function m(){if(u.call(this),arguments.length===0)u.call(this);else if(arguments.length===1){var v=arguments[0];u.call(this,v)}}return u&&(m.__proto__=u),m.prototype=Object.create(u&&u.prototype),m.prototype.constructor=m,m.prototype.interfaces_=function(){return[]},m.prototype.getClass=function(){return m},m}(ve),U=function(){};U.prototype.interfaces_=function(){return[]},U.prototype.getClass=function(){return U},U.shouldNeverReachHere=function(){if(arguments.length===0)U.shouldNeverReachHere(null);else if(arguments.length===1){var u=arguments[0];throw new W("Should never reach here"+(u!==null?": "+u:""))}},U.isTrue=function(){var u,m;if(arguments.length===1)u=arguments[0],U.isTrue(u,null);else if(arguments.length===2&&(u=arguments[0],m=arguments[1],!u))throw m===null?new W:new W(m)},U.equals=function(){var u,m,v;if(arguments.length===2)u=arguments[0],m=arguments[1],U.equals(u,m,null);else if(arguments.length===3&&(u=arguments[0],m=arguments[1],v=arguments[2],!m.equals(u)))throw new W("Expected "+u+" but encountered "+m+(v!==null?": "+v:""))};var X=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new F,this._intPt[1]=new F,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},oe={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};X.prototype.getIndexAlongSegment=function(u,m){return this.computeIntLineIndex(),this._intLineIndex[u][m]},X.prototype.getTopologySummary=function(){var u=new ce;return this.isEndPoint()&&u.append(" endpoint"),this._isProper&&u.append(" proper"),this.isCollinear()&&u.append(" collinear"),u.toString()},X.prototype.computeIntersection=function(u,m,v,w){this._inputLines[0][0]=u,this._inputLines[0][1]=m,this._inputLines[1][0]=v,this._inputLines[1][1]=w,this._result=this.computeIntersect(u,m,v,w)},X.prototype.getIntersectionNum=function(){return this._result},X.prototype.computeIntLineIndex=function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var u=arguments[0];this.getEdgeDistance(u,0)>this.getEdgeDistance(u,1)?(this._intLineIndex[u][0]=0,this._intLineIndex[u][1]=1):(this._intLineIndex[u][0]=1,this._intLineIndex[u][1]=0)}},X.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},X.prototype.setPrecisionModel=function(u){this._precisionModel=u},X.prototype.isInteriorIntersection=function(){if(arguments.length===0)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(arguments.length===1){for(var u=arguments[0],m=0;m<this._result;m++)if(!this._intPt[m].equals2D(this._inputLines[u][0])&&!this._intPt[m].equals2D(this._inputLines[u][1]))return!0;return!1}},X.prototype.getIntersection=function(u){return this._intPt[u]},X.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},X.prototype.hasIntersection=function(){return this._result!==X.NO_INTERSECTION},X.prototype.getEdgeDistance=function(u,m){return X.computeEdgeDistance(this._intPt[m],this._inputLines[u][0],this._inputLines[u][1])},X.prototype.isCollinear=function(){return this._result===X.COLLINEAR_INTERSECTION},X.prototype.toString=function(){return Je.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Je.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},X.prototype.getEndpoint=function(u,m){return this._inputLines[u][m]},X.prototype.isIntersection=function(u){for(var m=0;m<this._result;m++)if(this._intPt[m].equals2D(u))return!0;return!1},X.prototype.getIntersectionAlongSegment=function(u,m){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[u][m]]},X.prototype.interfaces_=function(){return[]},X.prototype.getClass=function(){return X},X.computeEdgeDistance=function(u,m,v){var w=Math.abs(v.x-m.x),T=Math.abs(v.y-m.y),H=-1;if(u.equals(m))H=0;else if(u.equals(v))H=w>T?w:T;else{var G=Math.abs(u.x-m.x),K=Math.abs(u.y-m.y);(H=w>T?G:K)!==0||u.equals(m)||(H=Math.max(G,K))}return U.isTrue(!(H===0&&!u.equals(m)),"Bad distance calculation"),H},X.nonRobustComputeEdgeDistance=function(u,m,v){var w=u.x-m.x,T=u.y-m.y,H=Math.sqrt(w*w+T*T);return U.isTrue(!(H===0&&!u.equals(m)),"Invalid distance calculation"),H},oe.DONT_INTERSECT.get=function(){return 0},oe.DO_INTERSECT.get=function(){return 1},oe.COLLINEAR.get=function(){return 2},oe.NO_INTERSECTION.get=function(){return 0},oe.POINT_INTERSECTION.get=function(){return 1},oe.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(X,oe);var _e=function(u){function m(){u.apply(this,arguments)}return u&&(m.__proto__=u),m.prototype=Object.create(u&&u.prototype),m.prototype.constructor=m,m.prototype.isInSegmentEnvelopes=function(v){var w=new ae(this._inputLines[0][0],this._inputLines[0][1]),T=new ae(this._inputLines[1][0],this._inputLines[1][1]);return w.contains(v)&&T.contains(v)},m.prototype.computeIntersection=function(){if(arguments.length!==3)return u.prototype.computeIntersection.apply(this,arguments);var v=arguments[0],w=arguments[1],T=arguments[2];if(this._isProper=!1,ae.intersects(w,T,v)&&Me.orientationIndex(w,T,v)===0&&Me.orientationIndex(T,w,v)===0)return this._isProper=!0,(v.equals(w)||v.equals(T))&&(this._isProper=!1),this._result=u.POINT_INTERSECTION,null;this._result=u.NO_INTERSECTION},m.prototype.normalizeToMinimum=function(v,w,T,H,G){G.x=this.smallestInAbsValue(v.x,w.x,T.x,H.x),G.y=this.smallestInAbsValue(v.y,w.y,T.y,H.y),v.x-=G.x,v.y-=G.y,w.x-=G.x,w.y-=G.y,T.x-=G.x,T.y-=G.y,H.x-=G.x,H.y-=G.y},m.prototype.safeHCoordinateIntersection=function(v,w,T,H){var G=null;try{G=ge.intersection(v,w,T,H)}catch(K){if(!(K instanceof Te))throw K;G=m.nearestEndpoint(v,w,T,H)}return G},m.prototype.intersection=function(v,w,T,H){var G=this.intersectionWithNormalization(v,w,T,H);return this.isInSegmentEnvelopes(G)||(G=new F(m.nearestEndpoint(v,w,T,H))),this._precisionModel!==null&&this._precisionModel.makePrecise(G),G},m.prototype.smallestInAbsValue=function(v,w,T,H){var G=v,K=Math.abs(G);return Math.abs(w)<K&&(G=w,K=Math.abs(w)),Math.abs(T)<K&&(G=T,K=Math.abs(T)),Math.abs(H)<K&&(G=H),G},m.prototype.checkDD=function(v,w,T,H,G){var K=Ae.intersection(v,w,T,H),de=this.isInSegmentEnvelopes(K);ye.out.println("DD in env = "+de+"  --------------------- "+K),G.distance(K)>1e-4&&ye.out.println("Distance = "+G.distance(K))},m.prototype.intersectionWithNormalization=function(v,w,T,H){var G=new F(v),K=new F(w),de=new F(T),Le=new F(H),He=new F;this.normalizeToEnvCentre(G,K,de,Le,He);var ze=this.safeHCoordinateIntersection(G,K,de,Le);return ze.x+=He.x,ze.y+=He.y,ze},m.prototype.computeCollinearIntersection=function(v,w,T,H){var G=ae.intersects(v,w,T),K=ae.intersects(v,w,H),de=ae.intersects(T,H,v),Le=ae.intersects(T,H,w);return G&&K?(this._intPt[0]=T,this._intPt[1]=H,u.COLLINEAR_INTERSECTION):de&&Le?(this._intPt[0]=v,this._intPt[1]=w,u.COLLINEAR_INTERSECTION):G&&de?(this._intPt[0]=T,this._intPt[1]=v,!T.equals(v)||K||Le?u.COLLINEAR_INTERSECTION:u.POINT_INTERSECTION):G&&Le?(this._intPt[0]=T,this._intPt[1]=w,!T.equals(w)||K||de?u.COLLINEAR_INTERSECTION:u.POINT_INTERSECTION):K&&de?(this._intPt[0]=H,this._intPt[1]=v,!H.equals(v)||G||Le?u.COLLINEAR_INTERSECTION:u.POINT_INTERSECTION):K&&Le?(this._intPt[0]=H,this._intPt[1]=w,!H.equals(w)||G||de?u.COLLINEAR_INTERSECTION:u.POINT_INTERSECTION):u.NO_INTERSECTION},m.prototype.normalizeToEnvCentre=function(v,w,T,H,G){var K=v.x<w.x?v.x:w.x,de=v.y<w.y?v.y:w.y,Le=v.x>w.x?v.x:w.x,He=v.y>w.y?v.y:w.y,ze=T.x<H.x?T.x:H.x,it=T.y<H.y?T.y:H.y,at=T.x>H.x?T.x:H.x,_t=T.y>H.y?T.y:H.y,vt=((K>ze?K:ze)+(Le<at?Le:at))/2,Ft=((de>it?de:it)+(He<_t?He:_t))/2;G.x=vt,G.y=Ft,v.x-=G.x,v.y-=G.y,w.x-=G.x,w.y-=G.y,T.x-=G.x,T.y-=G.y,H.x-=G.x,H.y-=G.y},m.prototype.computeIntersect=function(v,w,T,H){if(this._isProper=!1,!ae.intersects(v,w,T,H))return u.NO_INTERSECTION;var G=Me.orientationIndex(v,w,T),K=Me.orientationIndex(v,w,H);if(G>0&&K>0||G<0&&K<0)return u.NO_INTERSECTION;var de=Me.orientationIndex(T,H,v),Le=Me.orientationIndex(T,H,w);return de>0&&Le>0||de<0&&Le<0?u.NO_INTERSECTION:G===0&&K===0&&de===0&&Le===0?this.computeCollinearIntersection(v,w,T,H):(G===0||K===0||de===0||Le===0?(this._isProper=!1,v.equals2D(T)||v.equals2D(H)?this._intPt[0]=v:w.equals2D(T)||w.equals2D(H)?this._intPt[0]=w:G===0?this._intPt[0]=new F(T):K===0?this._intPt[0]=new F(H):de===0?this._intPt[0]=new F(v):Le===0&&(this._intPt[0]=new F(w))):(this._isProper=!0,this._intPt[0]=this.intersection(v,w,T,H)),u.POINT_INTERSECTION)},m.prototype.interfaces_=function(){return[]},m.prototype.getClass=function(){return m},m.nearestEndpoint=function(v,w,T,H){var G=v,K=Me.distancePointLine(v,T,H),de=Me.distancePointLine(w,T,H);return de<K&&(K=de,G=w),(de=Me.distancePointLine(T,v,w))<K&&(K=de,G=T),(de=Me.distancePointLine(H,v,w))<K&&(K=de,G=H),G},m}(X),Pe=function(){};Pe.prototype.interfaces_=function(){return[]},Pe.prototype.getClass=function(){return Pe},Pe.orientationIndex=function(u,m,v){var w=m.x-u.x,T=m.y-u.y,H=v.x-m.x,G=v.y-m.y;return Pe.signOfDet2x2(w,T,H,G)},Pe.signOfDet2x2=function(u,m,v,w){var T=null,H=null,G=null;if(T=1,u===0||w===0)return m===0||v===0?0:m>0?v>0?-T:T:v>0?T:-T;if(m===0||v===0)return w>0?u>0?T:-T:u>0?-T:T;if(m>0?w>0?m<=w||(T=-T,H=u,u=v,v=H,H=m,m=w,w=H):m<=-w?(T=-T,v=-v,w=-w):(H=u,u=-v,v=H,H=m,m=-w,w=H):w>0?-m<=w?(T=-T,u=-u,m=-m):(H=-u,u=v,v=H,H=-m,m=w,w=H):m>=w?(u=-u,m=-m,v=-v,w=-w):(T=-T,H=-u,u=-v,v=H,H=-m,m=-w,w=H),u>0){if(!(v>0)||!(u<=v))return T}else{if(v>0||!(u>=v))return-T;T=-T,u=-u,v=-v}for(;;){if(G=Math.floor(v/u),v-=G*u,(w-=G*m)<0)return-T;if(w>m)return T;if(u>v+v){if(m<w+w)return T}else{if(m>w+w)return-T;v=u-v,w=m-w,T=-T}if(w===0)return v===0?0:-T;if(v===0||(G=Math.floor(u/v),u-=G*v,(m-=G*w)<0))return T;if(m>w)return-T;if(v>u+u){if(w<m+m)return-T}else{if(w>m+m)return T;u=v-u,m=w-m,T=-T}if(m===0)return u===0?0:T;if(u===0)return-T}};var De=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var u=arguments[0];this._p=u};De.prototype.countSegment=function(u,m){if(u.x<this._p.x&&m.x<this._p.x)return null;if(this._p.x===m.x&&this._p.y===m.y)return this._isPointOnSegment=!0,null;if(u.y===this._p.y&&m.y===this._p.y){var v=u.x,w=m.x;return v>w&&(v=m.x,w=u.x),this._p.x>=v&&this._p.x<=w&&(this._isPointOnSegment=!0),null}if(u.y>this._p.y&&m.y<=this._p.y||m.y>this._p.y&&u.y<=this._p.y){var T=u.x-this._p.x,H=u.y-this._p.y,G=m.x-this._p.x,K=m.y-this._p.y,de=Pe.signOfDet2x2(T,H,G,K);if(de===0)return this._isPointOnSegment=!0,null;K<H&&(de=-de),de>0&&this._crossingCount++}},De.prototype.isPointInPolygon=function(){return this.getLocation()!==q.EXTERIOR},De.prototype.getLocation=function(){return this._isPointOnSegment?q.BOUNDARY:this._crossingCount%2==1?q.INTERIOR:q.EXTERIOR},De.prototype.isOnSegment=function(){return this._isPointOnSegment},De.prototype.interfaces_=function(){return[]},De.prototype.getClass=function(){return De},De.locatePointInRing=function(){if(arguments[0]instanceof F&&j(arguments[1],Se)){for(var u=arguments[0],m=arguments[1],v=new De(u),w=new F,T=new F,H=1;H<m.size();H++)if(m.getCoordinate(H,w),m.getCoordinate(H-1,T),v.countSegment(w,T),v.isOnSegment())return v.getLocation();return v.getLocation()}if(arguments[0]instanceof F&&arguments[1]instanceof Array){for(var G=arguments[0],K=arguments[1],de=new De(G),Le=1;Le<K.length;Le++){var He=K[Le],ze=K[Le-1];if(de.countSegment(He,ze),de.isOnSegment())return de.getLocation()}return de.getLocation()}};var Me=function(){},Ve={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};Me.prototype.interfaces_=function(){return[]},Me.prototype.getClass=function(){return Me},Me.orientationIndex=function(u,m,v){return Ae.orientationIndex(u,m,v)},Me.signedArea=function(){if(arguments[0]instanceof Array){var u=arguments[0];if(u.length<3)return 0;for(var m=0,v=u[0].x,w=1;w<u.length-1;w++){var T=u[w].x-v,H=u[w+1].y;m+=T*(u[w-1].y-H)}return m/2}if(j(arguments[0],Se)){var G=arguments[0],K=G.size();if(K<3)return 0;var de=new F,Le=new F,He=new F;G.getCoordinate(0,Le),G.getCoordinate(1,He);var ze=Le.x;He.x-=ze;for(var it=0,at=1;at<K-1;at++)de.y=Le.y,Le.x=He.x,Le.y=He.y,G.getCoordinate(at+1,He),He.x-=ze,it+=Le.x*(de.y-He.y);return it/2}},Me.distanceLineLine=function(u,m,v,w){if(u.equals(m))return Me.distancePointLine(u,v,w);if(v.equals(w))return Me.distancePointLine(w,u,m);var T=!1;if(ae.intersects(u,m,v,w)){var H=(m.x-u.x)*(w.y-v.y)-(m.y-u.y)*(w.x-v.x);if(H===0)T=!0;else{var G=(u.y-v.y)*(w.x-v.x)-(u.x-v.x)*(w.y-v.y),K=((u.y-v.y)*(m.x-u.x)-(u.x-v.x)*(m.y-u.y))/H,de=G/H;(de<0||de>1||K<0||K>1)&&(T=!0)}}else T=!0;return T?ie.min(Me.distancePointLine(u,v,w),Me.distancePointLine(m,v,w),Me.distancePointLine(v,u,m),Me.distancePointLine(w,u,m)):0},Me.isPointInRing=function(u,m){return Me.locatePointInRing(u,m)!==q.EXTERIOR},Me.computeLength=function(u){var m=u.size();if(m<=1)return 0;var v=0,w=new F;u.getCoordinate(0,w);for(var T=w.x,H=w.y,G=1;G<m;G++){u.getCoordinate(G,w);var K=w.x,de=w.y,Le=K-T,He=de-H;v+=Math.sqrt(Le*Le+He*He),T=K,H=de}return v},Me.isCCW=function(u){var m=u.length-1;if(m<3)throw new D("Ring has fewer than 4 points, so orientation cannot be determined");for(var v=u[0],w=0,T=1;T<=m;T++){var H=u[T];H.y>v.y&&(v=H,w=T)}var G=w;do(G-=1)<0&&(G=m);while(u[G].equals2D(v)&&G!==w);var K=w;do K=(K+1)%m;while(u[K].equals2D(v)&&K!==w);var de=u[G],Le=u[K];if(de.equals2D(v)||Le.equals2D(v)||de.equals2D(Le))return!1;var He=Me.computeOrientation(de,v,Le),ze=!1;return ze=He===0?de.x>Le.x:He>0,ze},Me.locatePointInRing=function(u,m){return De.locatePointInRing(u,m)},Me.distancePointLinePerpendicular=function(u,m,v){var w=(v.x-m.x)*(v.x-m.x)+(v.y-m.y)*(v.y-m.y),T=((m.y-u.y)*(v.x-m.x)-(m.x-u.x)*(v.y-m.y))/w;return Math.abs(T)*Math.sqrt(w)},Me.computeOrientation=function(u,m,v){return Me.orientationIndex(u,m,v)},Me.distancePointLine=function(){if(arguments.length===2){var u=arguments[0],m=arguments[1];if(m.length===0)throw new D("Line array must contain at least one vertex");for(var v=u.distance(m[0]),w=0;w<m.length-1;w++){var T=Me.distancePointLine(u,m[w],m[w+1]);T<v&&(v=T)}return v}if(arguments.length===3){var H=arguments[0],G=arguments[1],K=arguments[2];if(G.x===K.x&&G.y===K.y)return H.distance(G);var de=(K.x-G.x)*(K.x-G.x)+(K.y-G.y)*(K.y-G.y),Le=((H.x-G.x)*(K.x-G.x)+(H.y-G.y)*(K.y-G.y))/de;if(Le<=0)return H.distance(G);if(Le>=1)return H.distance(K);var He=((G.y-H.y)*(K.x-G.x)-(G.x-H.x)*(K.y-G.y))/de;return Math.abs(He)*Math.sqrt(de)}},Me.isOnLine=function(u,m){for(var v=new _e,w=1;w<m.length;w++){var T=m[w-1],H=m[w];if(v.computeIntersection(u,T,H),v.hasIntersection())return!0}return!1},Ve.CLOCKWISE.get=function(){return-1},Ve.RIGHT.get=function(){return Me.CLOCKWISE},Ve.COUNTERCLOCKWISE.get=function(){return 1},Ve.LEFT.get=function(){return Me.COUNTERCLOCKWISE},Ve.COLLINEAR.get=function(){return 0},Ve.STRAIGHT.get=function(){return Me.COLLINEAR},Object.defineProperties(Me,Ve);var Ze=function(){};Ze.prototype.filter=function(u){},Ze.prototype.interfaces_=function(){return[]},Ze.prototype.getClass=function(){return Ze};var Ue=function(){var u=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=u,this._SRID=u.getSRID()},xt={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};Ue.prototype.isGeometryCollection=function(){return this.getSortIndex()===Ue.SORTINDEX_GEOMETRYCOLLECTION},Ue.prototype.getFactory=function(){return this._factory},Ue.prototype.getGeometryN=function(u){return this},Ue.prototype.getArea=function(){return 0},Ue.prototype.isRectangle=function(){return!1},Ue.prototype.equals=function(){if(arguments[0]instanceof Ue){var u=arguments[0];return u!==null&&this.equalsTopo(u)}if(arguments[0]instanceof Object){var m=arguments[0];if(!(m instanceof Ue))return!1;var v=m;return this.equalsExact(v)}},Ue.prototype.equalsExact=function(u){return this===u||this.equalsExact(u,0)},Ue.prototype.geometryChanged=function(){this.apply(Ue.geometryChangedFilter)},Ue.prototype.geometryChangedAction=function(){this._envelope=null},Ue.prototype.equalsNorm=function(u){return u!==null&&this.norm().equalsExact(u.norm())},Ue.prototype.getLength=function(){return 0},Ue.prototype.getNumGeometries=function(){return 1},Ue.prototype.compareTo=function(){if(arguments.length===1){var u=arguments[0],m=u;return this.getSortIndex()!==m.getSortIndex()?this.getSortIndex()-m.getSortIndex():this.isEmpty()&&m.isEmpty()?0:this.isEmpty()?-1:m.isEmpty()?1:this.compareToSameClass(u)}if(arguments.length===2){var v=arguments[0],w=arguments[1];return this.getSortIndex()!==v.getSortIndex()?this.getSortIndex()-v.getSortIndex():this.isEmpty()&&v.isEmpty()?0:this.isEmpty()?-1:v.isEmpty()?1:this.compareToSameClass(v,w)}},Ue.prototype.getUserData=function(){return this._userData},Ue.prototype.getSRID=function(){return this._SRID},Ue.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},Ue.prototype.checkNotGeometryCollection=function(u){if(u.getSortIndex()===Ue.SORTINDEX_GEOMETRYCOLLECTION)throw new D("This method does not support GeometryCollection arguments")},Ue.prototype.equal=function(u,m,v){return v===0?u.equals(m):u.distance(m)<=v},Ue.prototype.norm=function(){var u=this.copy();return u.normalize(),u},Ue.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},Ue.prototype.getEnvelopeInternal=function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new ae(this._envelope)},Ue.prototype.setSRID=function(u){this._SRID=u},Ue.prototype.setUserData=function(u){this._userData=u},Ue.prototype.compare=function(u,m){for(var v=u.iterator(),w=m.iterator();v.hasNext()&&w.hasNext();){var T=v.next(),H=w.next(),G=T.compareTo(H);if(G!==0)return G}return v.hasNext()?1:w.hasNext()?-1:0},Ue.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},Ue.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===Ue.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===Ue.SORTINDEX_MULTIPOINT||this.getSortIndex()===Ue.SORTINDEX_MULTILINESTRING||this.getSortIndex()===Ue.SORTINDEX_MULTIPOLYGON},Ue.prototype.interfaces_=function(){return[$,N,i]},Ue.prototype.getClass=function(){return Ue},Ue.hasNonEmptyElements=function(u){for(var m=0;m<u.length;m++)if(!u[m].isEmpty())return!0;return!1},Ue.hasNullElements=function(u){for(var m=0;m<u.length;m++)if(u[m]===null)return!0;return!1},xt.serialVersionUID.get=function(){return 8763622679187377e3},xt.SORTINDEX_POINT.get=function(){return 0},xt.SORTINDEX_MULTIPOINT.get=function(){return 1},xt.SORTINDEX_LINESTRING.get=function(){return 2},xt.SORTINDEX_LINEARRING.get=function(){return 3},xt.SORTINDEX_MULTILINESTRING.get=function(){return 4},xt.SORTINDEX_POLYGON.get=function(){return 5},xt.SORTINDEX_MULTIPOLYGON.get=function(){return 6},xt.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},xt.geometryChangedFilter.get=function(){return ht},Object.defineProperties(Ue,xt);var ht=function(){};ht.interfaces_=function(){return[Ze]},ht.filter=function(u){u.geometryChangedAction()};var Pt=function(){};Pt.prototype.filter=function(u){},Pt.prototype.interfaces_=function(){return[]},Pt.prototype.getClass=function(){return Pt};var Et=function(){},Tt={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};Et.prototype.isInBoundary=function(u){},Et.prototype.interfaces_=function(){return[]},Et.prototype.getClass=function(){return Et},Tt.Mod2BoundaryNodeRule.get=function(){return Rt},Tt.EndPointBoundaryNodeRule.get=function(){return Bt},Tt.MultiValentEndPointBoundaryNodeRule.get=function(){return Vt},Tt.MonoValentEndPointBoundaryNodeRule.get=function(){return zt},Tt.MOD2_BOUNDARY_RULE.get=function(){return new Rt},Tt.ENDPOINT_BOUNDARY_RULE.get=function(){return new Bt},Tt.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Vt},Tt.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new zt},Tt.OGC_SFS_BOUNDARY_RULE.get=function(){return Et.MOD2_BOUNDARY_RULE},Object.defineProperties(Et,Tt);var Rt=function(){};Rt.prototype.isInBoundary=function(u){return u%2==1},Rt.prototype.interfaces_=function(){return[Et]},Rt.prototype.getClass=function(){return Rt};var Bt=function(){};Bt.prototype.isInBoundary=function(u){return u>0},Bt.prototype.interfaces_=function(){return[Et]},Bt.prototype.getClass=function(){return Bt};var Vt=function(){};Vt.prototype.isInBoundary=function(u){return u>1},Vt.prototype.interfaces_=function(){return[Et]},Vt.prototype.getClass=function(){return Vt};var zt=function(){};zt.prototype.isInBoundary=function(u){return u===1},zt.prototype.interfaces_=function(){return[Et]},zt.prototype.getClass=function(){return zt};var It=function(){};It.prototype.add=function(){},It.prototype.addAll=function(){},It.prototype.isEmpty=function(){},It.prototype.iterator=function(){},It.prototype.size=function(){},It.prototype.toArray=function(){},It.prototype.remove=function(){},(s.prototype=new Error).name="IndexOutOfBoundsException";var Ht=function(){};Ht.prototype.hasNext=function(){},Ht.prototype.next=function(){},Ht.prototype.remove=function(){};var Kt=function(u){function m(){u.apply(this,arguments)}return u&&(m.__proto__=u),m.prototype=Object.create(u&&u.prototype),m.prototype.constructor=m,m.prototype.get=function(){},m.prototype.set=function(){},m.prototype.isEmpty=function(){},m}(It);(r.prototype=new Error).name="NoSuchElementException";var Xe=function(u){function m(){u.call(this),this.array_=[],arguments[0]instanceof It&&this.addAll(arguments[0])}return u&&(m.__proto__=u),m.prototype=Object.create(u&&u.prototype),m.prototype.constructor=m,m.prototype.ensureCapacity=function(){},m.prototype.interfaces_=function(){return[u,It]},m.prototype.add=function(v){return arguments.length===1?this.array_.push(v):this.array_.splice(arguments[0],arguments[1]),!0},m.prototype.clear=function(){this.array_=[]},m.prototype.addAll=function(v){for(var w=v.iterator();w.hasNext();)this.add(w.next());return!0},m.prototype.set=function(v,w){var T=this.array_[v];return this.array_[v]=w,T},m.prototype.iterator=function(){return new Oi(this)},m.prototype.get=function(v){if(v<0||v>=this.size())throw new s;return this.array_[v]},m.prototype.isEmpty=function(){return this.array_.length===0},m.prototype.size=function(){return this.array_.length},m.prototype.toArray=function(){for(var v=[],w=0,T=this.array_.length;w<T;w++)v.push(this.array_[w]);return v},m.prototype.remove=function(v){for(var w=!1,T=0,H=this.array_.length;T<H;T++)if(this.array_[T]===v){this.array_.splice(T,1),w=!0;break}return w},m}(Kt),Oi=function(u){function m(v){u.call(this),this.arrayList_=v,this.position_=0}return u&&(m.__proto__=u),m.prototype=Object.create(u&&u.prototype),m.prototype.constructor=m,m.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new r;return this.arrayList_.get(this.position_++)},m.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},m.prototype.set=function(v){return this.arrayList_.set(this.position_-1,v)},m.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},m}(Ht),Ui=function(u){function m(){if(u.call(this),arguments.length!==0){if(arguments.length===1){var w=arguments[0];this.ensureCapacity(w.length),this.add(w,!0)}else if(arguments.length===2){var T=arguments[0],H=arguments[1];this.ensureCapacity(T.length),this.add(T,H)}}}u&&(m.__proto__=u),(m.prototype=Object.create(u&&u.prototype)).constructor=m;var v={coordArrayType:{configurable:!0}};return v.coordArrayType.get=function(){return new Array(0).fill(null)},m.prototype.getCoordinate=function(w){return this.get(w)},m.prototype.addAll=function(){if(arguments.length===2){for(var w=arguments[0],T=arguments[1],H=!1,G=w.iterator();G.hasNext();)this.add(G.next(),T),H=!0;return H}return u.prototype.addAll.apply(this,arguments)},m.prototype.clone=function(){for(var w=u.prototype.clone.call(this),T=0;T<this.size();T++)w.add(T,this.get(T).copy());return w},m.prototype.toCoordinateArray=function(){return this.toArray(m.coordArrayType)},m.prototype.add=function(){if(arguments.length===1){var w=arguments[0];u.prototype.add.call(this,w)}else if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var T=arguments[0],H=arguments[1];return this.add(T,H,!0),!0}if(arguments[0]instanceof F&&typeof arguments[1]=="boolean"){var G=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(G))return null;u.prototype.add.call(this,G)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var K=arguments[0],de=arguments[1];return this.add(K,de),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var Le=arguments[0],He=arguments[1];if(arguments[2])for(var ze=0;ze<Le.length;ze++)this.add(Le[ze],He);else for(var it=Le.length-1;it>=0;it--)this.add(Le[it],He);return!0}if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof F){var at=arguments[0],_t=arguments[1];if(!arguments[2]){var vt=this.size();if(vt>0&&(at>0&&this.get(at-1).equals2D(_t)||at<vt&&this.get(at).equals2D(_t)))return null}u.prototype.add.call(this,at,_t)}}else if(arguments.length===4){var Ft=arguments[0],si=arguments[1],Di=arguments[2],R0=arguments[3],ta=1;Di>R0&&(ta=-1);for(var _s=Di;_s!==R0;_s+=ta)this.add(Ft[_s],si);return!0}},m.prototype.closeRing=function(){this.size()>0&&this.add(new F(this.get(0)),!1)},m.prototype.interfaces_=function(){return[]},m.prototype.getClass=function(){return m},Object.defineProperties(m,v),m}(Xe),Mt=function(){},u0={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};u0.ForwardComparator.get=function(){return Ji},u0.BidirectionalComparator.get=function(){return Gi},u0.coordArrayType.get=function(){return new Array(0).fill(null)},Mt.prototype.interfaces_=function(){return[]},Mt.prototype.getClass=function(){return Mt},Mt.isRing=function(u){return!(u.length<4)&&!!u[0].equals2D(u[u.length-1])},Mt.ptNotInList=function(u,m){for(var v=0;v<u.length;v++){var w=u[v];if(Mt.indexOf(w,m)<0)return w}return null},Mt.scroll=function(u,m){var v=Mt.indexOf(m,u);if(v<0)return null;var w=new Array(u.length).fill(null);ye.arraycopy(u,v,w,0,u.length-v),ye.arraycopy(u,0,w,u.length-v,v),ye.arraycopy(w,0,u,0,u.length)},Mt.equals=function(){if(arguments.length===2){var u=arguments[0],m=arguments[1];if(u===m)return!0;if(u===null||m===null||u.length!==m.length)return!1;for(var v=0;v<u.length;v++)if(!u[v].equals(m[v]))return!1;return!0}if(arguments.length===3){var w=arguments[0],T=arguments[1],H=arguments[2];if(w===T)return!0;if(w===null||T===null||w.length!==T.length)return!1;for(var G=0;G<w.length;G++)if(H.compare(w[G],T[G])!==0)return!1;return!0}},Mt.intersection=function(u,m){for(var v=new Ui,w=0;w<u.length;w++)m.intersects(u[w])&&v.add(u[w],!0);return v.toCoordinateArray()},Mt.hasRepeatedPoints=function(u){for(var m=1;m<u.length;m++)if(u[m-1].equals(u[m]))return!0;return!1},Mt.removeRepeatedPoints=function(u){return Mt.hasRepeatedPoints(u)?new Ui(u,!1).toCoordinateArray():u},Mt.reverse=function(u){for(var m=u.length-1,v=Math.trunc(m/2),w=0;w<=v;w++){var T=u[w];u[w]=u[m-w],u[m-w]=T}},Mt.removeNull=function(u){for(var m=0,v=0;v<u.length;v++)u[v]!==null&&m++;var w=new Array(m).fill(null);if(m===0)return w;for(var T=0,H=0;H<u.length;H++)u[H]!==null&&(w[T++]=u[H]);return w},Mt.copyDeep=function(){if(arguments.length===1){for(var u=arguments[0],m=new Array(u.length).fill(null),v=0;v<u.length;v++)m[v]=new F(u[v]);return m}if(arguments.length===5)for(var w=arguments[0],T=arguments[1],H=arguments[2],G=arguments[3],K=arguments[4],de=0;de<K;de++)H[G+de]=new F(w[T+de])},Mt.isEqualReversed=function(u,m){for(var v=0;v<u.length;v++){var w=u[v],T=m[u.length-v-1];if(w.compareTo(T)!==0)return!1}return!0},Mt.envelope=function(u){for(var m=new ae,v=0;v<u.length;v++)m.expandToInclude(u[v]);return m},Mt.toCoordinateArray=function(u){return u.toArray(Mt.coordArrayType)},Mt.atLeastNCoordinatesOrNothing=function(u,m){return m.length>=u?m:[]},Mt.indexOf=function(u,m){for(var v=0;v<m.length;v++)if(u.equals(m[v]))return v;return-1},Mt.increasingDirection=function(u){for(var m=0;m<Math.trunc(u.length/2);m++){var v=u.length-1-m,w=u[m].compareTo(u[v]);if(w!==0)return w}return 1},Mt.compare=function(u,m){for(var v=0;v<u.length&&v<m.length;){var w=u[v].compareTo(m[v]);if(w!==0)return w;v++}return v<m.length?-1:v<u.length?1:0},Mt.minCoordinate=function(u){for(var m=null,v=0;v<u.length;v++)(m===null||m.compareTo(u[v])>0)&&(m=u[v]);return m},Mt.extract=function(u,m,v){m=ie.clamp(m,0,u.length);var w=(v=ie.clamp(v,-1,u.length))-m+1;v<0&&(w=0),m>=u.length&&(w=0),v<m&&(w=0);var T=new Array(w).fill(null);if(w===0)return T;for(var H=0,G=m;G<=v;G++)T[H++]=u[G];return T},Object.defineProperties(Mt,u0);var Ji=function(){};Ji.prototype.compare=function(u,m){return Mt.compare(u,m)},Ji.prototype.interfaces_=function(){return[B]},Ji.prototype.getClass=function(){return Ji};var Gi=function(){};Gi.prototype.compare=function(u,m){var v=u,w=m;if(v.length<w.length)return-1;if(v.length>w.length)return 1;if(v.length===0)return 0;var T=Mt.compare(v,w);return Mt.isEqualReversed(v,w)?0:T},Gi.prototype.OLDcompare=function(u,m){var v=u,w=m;if(v.length<w.length)return-1;if(v.length>w.length)return 1;if(v.length===0)return 0;for(var T=Mt.increasingDirection(v),H=Mt.increasingDirection(w),G=T>0?0:v.length-1,K=H>0?0:v.length-1,de=0;de<v.length;de++){var Le=v[G].compareTo(w[K]);if(Le!==0)return Le;G+=T,K+=H}return 0},Gi.prototype.interfaces_=function(){return[B]},Gi.prototype.getClass=function(){return Gi};var Wi=function(){};Wi.prototype.get=function(){},Wi.prototype.put=function(){},Wi.prototype.size=function(){},Wi.prototype.values=function(){},Wi.prototype.entrySet=function(){};var ct=function(u){function m(){u.apply(this,arguments)}return u&&(m.__proto__=u),m.prototype=Object.create(u&&u.prototype),m.prototype.constructor=m,m}(Wi);(o.prototype=new Error).name="OperationNotSupported",(c.prototype=new It).contains=function(){};var nt=function(u){function m(){u.call(this),this.array_=[],arguments[0]instanceof It&&this.addAll(arguments[0])}return u&&(m.__proto__=u),m.prototype=Object.create(u&&u.prototype),m.prototype.constructor=m,m.prototype.contains=function(v){for(var w=0,T=this.array_.length;w<T;w++)if(this.array_[w]===v)return!0;return!1},m.prototype.add=function(v){return!this.contains(v)&&(this.array_.push(v),!0)},m.prototype.addAll=function(v){for(var w=v.iterator();w.hasNext();)this.add(w.next());return!0},m.prototype.remove=function(v){throw new Error},m.prototype.size=function(){return this.array_.length},m.prototype.isEmpty=function(){return this.array_.length===0},m.prototype.toArray=function(){for(var v=[],w=0,T=this.array_.length;w<T;w++)v.push(this.array_[w]);return v},m.prototype.iterator=function(){return new ft(this)},m}(c),ft=function(u){function m(v){u.call(this),this.hashSet_=v,this.position_=0}return u&&(m.__proto__=u),m.prototype=Object.create(u&&u.prototype),m.prototype.constructor=m,m.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new r;return this.hashSet_.array_[this.position_++]},m.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},m.prototype.remove=function(){throw new o},m}(Ht),ot=0;(b.prototype=new ct).get=function(u){for(var m=this.root_;m!==null;){var v=u.compareTo(m.key);if(v<0)m=m.left;else{if(!(v>0))return m.value;m=m.right}}return null},b.prototype.put=function(u,m){if(this.root_===null)return this.root_={key:u,value:m,left:null,right:null,parent:null,color:ot,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var v,w,T=this.root_;do if(v=T,(w=u.compareTo(T.key))<0)T=T.left;else{if(!(w>0)){var H=T.value;return T.value=m,H}T=T.right}while(T!==null);var G={key:u,left:null,right:null,value:m,parent:v,color:ot,getValue:function(){return this.value},getKey:function(){return this.key}};return w<0?v.left=G:v.right=G,this.fixAfterInsertion(G),this.size_++,null},b.prototype.fixAfterInsertion=function(u){for(u.color=1;u!=null&&u!==this.root_&&u.parent.color===1;)if(l(u)===f(l(l(u)))){var m=g(l(l(u)));_(m)===1?(d(l(u),ot),d(m,ot),d(l(l(u)),1),u=l(l(u))):(u===g(l(u))&&(u=l(u),this.rotateLeft(u)),d(l(u),ot),d(l(l(u)),1),this.rotateRight(l(l(u))))}else{var v=f(l(l(u)));_(v)===1?(d(l(u),ot),d(v,ot),d(l(l(u)),1),u=l(l(u))):(u===f(l(u))&&(u=l(u),this.rotateRight(u)),d(l(u),ot),d(l(l(u)),1),this.rotateLeft(l(l(u))))}this.root_.color=ot},b.prototype.values=function(){var u=new Xe,m=this.getFirstEntry();if(m!==null)for(u.add(m.value);(m=b.successor(m))!==null;)u.add(m.value);return u},b.prototype.entrySet=function(){var u=new nt,m=this.getFirstEntry();if(m!==null)for(u.add(m);(m=b.successor(m))!==null;)u.add(m);return u},b.prototype.rotateLeft=function(u){if(u!=null){var m=u.right;u.right=m.left,m.left!=null&&(m.left.parent=u),m.parent=u.parent,u.parent===null?this.root_=m:u.parent.left===u?u.parent.left=m:u.parent.right=m,m.left=u,u.parent=m}},b.prototype.rotateRight=function(u){if(u!=null){var m=u.left;u.left=m.right,m.right!=null&&(m.right.parent=u),m.parent=u.parent,u.parent===null?this.root_=m:u.parent.right===u?u.parent.right=m:u.parent.left=m,m.right=u,u.parent=m}},b.prototype.getFirstEntry=function(){var u=this.root_;if(u!=null)for(;u.left!=null;)u=u.left;return u},b.successor=function(u){if(u===null)return null;if(u.right!==null){for(var m=u.right;m.left!==null;)m=m.left;return m}for(var v=u.parent,w=u;v!==null&&w===v.right;)w=v,v=v.parent;return v},b.prototype.size=function(){return this.size_};var pt=function(){};pt.prototype.interfaces_=function(){return[]},pt.prototype.getClass=function(){return pt},C.prototype=new c,(P.prototype=new C).contains=function(u){for(var m=0,v=this.array_.length;m<v;m++)if(this.array_[m].compareTo(u)===0)return!0;return!1},P.prototype.add=function(u){if(this.contains(u))return!1;for(var m=0,v=this.array_.length;m<v;m++)if(this.array_[m].compareTo(u)===1)return this.array_.splice(m,0,u),!0;return this.array_.push(u),!0},P.prototype.addAll=function(u){for(var m=u.iterator();m.hasNext();)this.add(m.next());return!0},P.prototype.remove=function(u){throw new o},P.prototype.size=function(){return this.array_.length},P.prototype.isEmpty=function(){return this.array_.length===0},P.prototype.toArray=function(){for(var u=[],m=0,v=this.array_.length;m<v;m++)u.push(this.array_[m]);return u},P.prototype.iterator=function(){return new mt(this)};var mt=function(u){this.treeSet_=u,this.position_=0};mt.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new r;return this.treeSet_.array_[this.position_++]},mt.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},mt.prototype.remove=function(){throw new o};var Ct=function(){};Ct.sort=function(){var u,m,v,w,T=arguments[0];if(arguments.length===1)w=function(G,K){return G.compareTo(K)},T.sort(w);else if(arguments.length===2)v=arguments[1],w=function(G,K){return v.compare(G,K)},T.sort(w);else if(arguments.length===3){(m=T.slice(arguments[1],arguments[2])).sort();var H=T.slice(0,arguments[1]).concat(m,T.slice(arguments[2],T.length));for(T.splice(0,T.length),u=0;u<H.length;u++)T.push(H[u])}else if(arguments.length===4)for(m=T.slice(arguments[1],arguments[2]),v=arguments[3],w=function(G,K){return v.compare(G,K)},m.sort(w),H=T.slice(0,arguments[1]).concat(m,T.slice(arguments[2],T.length)),T.splice(0,T.length),u=0;u<H.length;u++)T.push(H[u])},Ct.asList=function(u){for(var m=new Xe,v=0,w=u.length;v<w;v++)m.add(u[v]);return m};var rt=function(){},Ke={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Ke.P.get=function(){return 0},Ke.L.get=function(){return 1},Ke.A.get=function(){return 2},Ke.FALSE.get=function(){return-1},Ke.TRUE.get=function(){return-2},Ke.DONTCARE.get=function(){return-3},Ke.SYM_FALSE.get=function(){return"F"},Ke.SYM_TRUE.get=function(){return"T"},Ke.SYM_DONTCARE.get=function(){return"*"},Ke.SYM_P.get=function(){return"0"},Ke.SYM_L.get=function(){return"1"},Ke.SYM_A.get=function(){return"2"},rt.prototype.interfaces_=function(){return[]},rt.prototype.getClass=function(){return rt},rt.toDimensionSymbol=function(u){switch(u){case rt.FALSE:return rt.SYM_FALSE;case rt.TRUE:return rt.SYM_TRUE;case rt.DONTCARE:return rt.SYM_DONTCARE;case rt.P:return rt.SYM_P;case rt.L:return rt.SYM_L;case rt.A:return rt.SYM_A}throw new D("Unknown dimension value: "+u)},rt.toDimensionValue=function(u){switch(he.toUpperCase(u)){case rt.SYM_FALSE:return rt.FALSE;case rt.SYM_TRUE:return rt.TRUE;case rt.SYM_DONTCARE:return rt.DONTCARE;case rt.SYM_P:return rt.P;case rt.SYM_L:return rt.L;case rt.SYM_A:return rt.A}throw new D("Unknown dimension symbol: "+u)},Object.defineProperties(rt,Ke);var ne=function(){};ne.prototype.filter=function(u){},ne.prototype.interfaces_=function(){return[]},ne.prototype.getClass=function(){return ne};var yi=function(){};yi.prototype.filter=function(u,m){},yi.prototype.isDone=function(){},yi.prototype.isGeometryChanged=function(){},yi.prototype.interfaces_=function(){return[]},yi.prototype.getClass=function(){return yi};var ri=function(u){function m(w,T){if(u.call(this,T),this._geometries=w||[],u.hasNullElements(this._geometries))throw new D("geometries must not contain null elements")}u&&(m.__proto__=u),(m.prototype=Object.create(u&&u.prototype)).constructor=m;var v={serialVersionUID:{configurable:!0}};return m.prototype.computeEnvelopeInternal=function(){for(var w=new ae,T=0;T<this._geometries.length;T++)w.expandToInclude(this._geometries[T].getEnvelopeInternal());return w},m.prototype.getGeometryN=function(w){return this._geometries[w]},m.prototype.getSortIndex=function(){return u.SORTINDEX_GEOMETRYCOLLECTION},m.prototype.getCoordinates=function(){for(var w=new Array(this.getNumPoints()).fill(null),T=-1,H=0;H<this._geometries.length;H++)for(var G=this._geometries[H].getCoordinates(),K=0;K<G.length;K++)w[++T]=G[K];return w},m.prototype.getArea=function(){for(var w=0,T=0;T<this._geometries.length;T++)w+=this._geometries[T].getArea();return w},m.prototype.equalsExact=function(){if(arguments.length===2){var w=arguments[0],T=arguments[1];if(!this.isEquivalentClass(w))return!1;var H=w;if(this._geometries.length!==H._geometries.length)return!1;for(var G=0;G<this._geometries.length;G++)if(!this._geometries[G].equalsExact(H._geometries[G],T))return!1;return!0}return u.prototype.equalsExact.apply(this,arguments)},m.prototype.normalize=function(){for(var w=0;w<this._geometries.length;w++)this._geometries[w].normalize();Ct.sort(this._geometries)},m.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},m.prototype.getBoundaryDimension=function(){for(var w=rt.FALSE,T=0;T<this._geometries.length;T++)w=Math.max(w,this._geometries[T].getBoundaryDimension());return w},m.prototype.getDimension=function(){for(var w=rt.FALSE,T=0;T<this._geometries.length;T++)w=Math.max(w,this._geometries[T].getDimension());return w},m.prototype.getLength=function(){for(var w=0,T=0;T<this._geometries.length;T++)w+=this._geometries[T].getLength();return w},m.prototype.getNumPoints=function(){for(var w=0,T=0;T<this._geometries.length;T++)w+=this._geometries[T].getNumPoints();return w},m.prototype.getNumGeometries=function(){return this._geometries.length},m.prototype.reverse=function(){for(var w=this._geometries.length,T=new Array(w).fill(null),H=0;H<this._geometries.length;H++)T[H]=this._geometries[H].reverse();return this.getFactory().createGeometryCollection(T)},m.prototype.compareToSameClass=function(){if(arguments.length===1){var w=arguments[0],T=new P(Ct.asList(this._geometries)),H=new P(Ct.asList(w._geometries));return this.compare(T,H)}if(arguments.length===2){for(var G=arguments[0],K=arguments[1],de=G,Le=this.getNumGeometries(),He=de.getNumGeometries(),ze=0;ze<Le&&ze<He;){var it=this.getGeometryN(ze),at=de.getGeometryN(ze),_t=it.compareToSameClass(at,K);if(_t!==0)return _t;ze++}return ze<Le?1:ze<He?-1:0}},m.prototype.apply=function(){if(j(arguments[0],Pt))for(var w=arguments[0],T=0;T<this._geometries.length;T++)this._geometries[T].apply(w);else if(j(arguments[0],yi)){var H=arguments[0];if(this._geometries.length===0)return null;for(var G=0;G<this._geometries.length&&(this._geometries[G].apply(H),!H.isDone());G++);H.isGeometryChanged()&&this.geometryChanged()}else if(j(arguments[0],ne)){var K=arguments[0];K.filter(this);for(var de=0;de<this._geometries.length;de++)this._geometries[de].apply(K)}else if(j(arguments[0],Ze)){var Le=arguments[0];Le.filter(this);for(var He=0;He<this._geometries.length;He++)this._geometries[He].apply(Le)}},m.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),U.shouldNeverReachHere(),null},m.prototype.clone=function(){var w=u.prototype.clone.call(this);w._geometries=new Array(this._geometries.length).fill(null);for(var T=0;T<this._geometries.length;T++)w._geometries[T]=this._geometries[T].clone();return w},m.prototype.getGeometryType=function(){return"GeometryCollection"},m.prototype.copy=function(){for(var w=new Array(this._geometries.length).fill(null),T=0;T<w.length;T++)w[T]=this._geometries[T].copy();return new m(w,this._factory)},m.prototype.isEmpty=function(){for(var w=0;w<this._geometries.length;w++)if(!this._geometries[w].isEmpty())return!1;return!0},m.prototype.interfaces_=function(){return[]},m.prototype.getClass=function(){return m},v.serialVersionUID.get=function(){return-5694727726395021e3},Object.defineProperties(m,v),m}(Ue),h0=function(u){function m(){u.apply(this,arguments)}u&&(m.__proto__=u),(m.prototype=Object.create(u&&u.prototype)).constructor=m;var v={serialVersionUID:{configurable:!0}};return m.prototype.getSortIndex=function(){return Ue.SORTINDEX_MULTILINESTRING},m.prototype.equalsExact=function(){if(arguments.length===2){var w=arguments[0],T=arguments[1];return!!this.isEquivalentClass(w)&&u.prototype.equalsExact.call(this,w,T)}return u.prototype.equalsExact.apply(this,arguments)},m.prototype.getBoundaryDimension=function(){return this.isClosed()?rt.FALSE:0},m.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var w=0;w<this._geometries.length;w++)if(!this._geometries[w].isClosed())return!1;return!0},m.prototype.getDimension=function(){return 1},m.prototype.reverse=function(){for(var w=this._geometries.length,T=new Array(w).fill(null),H=0;H<this._geometries.length;H++)T[w-1-H]=this._geometries[H].reverse();return this.getFactory().createMultiLineString(T)},m.prototype.getBoundary=function(){return new Pi(this).getBoundary()},m.prototype.getGeometryType=function(){return"MultiLineString"},m.prototype.copy=function(){for(var w=new Array(this._geometries.length).fill(null),T=0;T<w.length;T++)w[T]=this._geometries[T].copy();return new m(w,this._factory)},m.prototype.interfaces_=function(){return[pt]},m.prototype.getClass=function(){return m},v.serialVersionUID.get=function(){return 8166665132445434e3},Object.defineProperties(m,v),m}(ri),Pi=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,arguments.length===1){var u=arguments[0],m=Et.MOD2_BOUNDARY_RULE;this._geom=u,this._geomFact=u.getFactory(),this._bnRule=m}else if(arguments.length===2){var v=arguments[0],w=arguments[1];this._geom=v,this._geomFact=v.getFactory(),this._bnRule=w}};Pi.prototype.boundaryMultiLineString=function(u){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var m=this.computeBoundaryCoordinates(u);return m.length===1?this._geomFact.createPoint(m[0]):this._geomFact.createMultiPointFromCoords(m)},Pi.prototype.getBoundary=function(){return this._geom instanceof qt?this.boundaryLineString(this._geom):this._geom instanceof h0?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Pi.prototype.boundaryLineString=function(u){return this._geom.isEmpty()?this.getEmptyMultiPoint():u.isClosed()?this._bnRule.isInBoundary(2)?u.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([u.getStartPoint(),u.getEndPoint()])},Pi.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Pi.prototype.computeBoundaryCoordinates=function(u){var m=new Xe;this._endpointMap=new b;for(var v=0;v<u.getNumGeometries();v++){var w=u.getGeometryN(v);w.getNumPoints()!==0&&(this.addEndpoint(w.getCoordinateN(0)),this.addEndpoint(w.getCoordinateN(w.getNumPoints()-1)))}for(var T=this._endpointMap.entrySet().iterator();T.hasNext();){var H=T.next(),G=H.getValue().count;this._bnRule.isInBoundary(G)&&m.add(H.getKey())}return Mt.toCoordinateArray(m)},Pi.prototype.addEndpoint=function(u){var m=this._endpointMap.get(u);m===null&&(m=new ia,this._endpointMap.put(u,m)),m.count++},Pi.prototype.interfaces_=function(){return[]},Pi.prototype.getClass=function(){return Pi},Pi.getBoundary=function(){if(arguments.length===1){var u=arguments[0];return new Pi(u).getBoundary()}if(arguments.length===2){var m=arguments[0],v=arguments[1];return new Pi(m,v).getBoundary()}};var ia=function(){this.count=null};ia.prototype.interfaces_=function(){return[]},ia.prototype.getClass=function(){return ia};var Ei=function(){},la={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Ei.prototype.interfaces_=function(){return[]},Ei.prototype.getClass=function(){return Ei},Ei.chars=function(u,m){for(var v=new Array(m).fill(null),w=0;w<m;w++)v[w]=u;return String(v)},Ei.getStackTrace=function(){if(arguments.length===1){var u=arguments[0],m=new function(){},v=new function(){};return u.printStackTrace(v),m.toString()}if(arguments.length===2){for(var w=arguments[0],T=arguments[1],H="",G=new function(){}(new function(){}(Ei.getStackTrace(w))),K=0;K<T;K++)try{H+=G.readLine()+Ei.NEWLINE}catch(de){if(!(de instanceof S))throw de;U.shouldNeverReachHere()}return H}},Ei.split=function(u,m){for(var v=m.length,w=new Xe,T=""+u,H=T.indexOf(m);H>=0;){var G=T.substring(0,H);w.add(G),H=(T=T.substring(H+v)).indexOf(m)}T.length>0&&w.add(T);for(var K=new Array(w.size()).fill(null),de=0;de<K.length;de++)K[de]=w.get(de);return K},Ei.toString=function(){if(arguments.length===1){var u=arguments[0];return Ei.SIMPLE_ORDINATE_FORMAT.format(u)}},Ei.spaces=function(u){return Ei.chars(" ",u)},la.NEWLINE.get=function(){return ye.getProperty("line.separator")},la.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}},Object.defineProperties(Ei,la);var Ut=function(){};Ut.prototype.interfaces_=function(){return[]},Ut.prototype.getClass=function(){return Ut},Ut.copyCoord=function(u,m,v,w){for(var T=Math.min(u.getDimension(),v.getDimension()),H=0;H<T;H++)v.setOrdinate(w,H,u.getOrdinate(m,H))},Ut.isRing=function(u){var m=u.size();return m===0||!(m<=3)&&u.getOrdinate(0,Se.X)===u.getOrdinate(m-1,Se.X)&&u.getOrdinate(0,Se.Y)===u.getOrdinate(m-1,Se.Y)},Ut.isEqual=function(u,m){var v=u.size();if(v!==m.size())return!1;for(var w=Math.min(u.getDimension(),m.getDimension()),T=0;T<v;T++)for(var H=0;H<w;H++){var G=u.getOrdinate(T,H),K=m.getOrdinate(T,H);if(u.getOrdinate(T,H)!==m.getOrdinate(T,H)&&(!R.isNaN(G)||!R.isNaN(K)))return!1}return!0},Ut.extend=function(u,m,v){var w=u.create(v,m.getDimension()),T=m.size();if(Ut.copy(m,0,w,0,T),T>0)for(var H=T;H<v;H++)Ut.copy(m,T-1,w,H,1);return w},Ut.reverse=function(u){for(var m=u.size()-1,v=Math.trunc(m/2),w=0;w<=v;w++)Ut.swap(u,w,m-w)},Ut.swap=function(u,m,v){if(m===v)return null;for(var w=0;w<u.getDimension();w++){var T=u.getOrdinate(m,w);u.setOrdinate(m,w,u.getOrdinate(v,w)),u.setOrdinate(v,w,T)}},Ut.copy=function(u,m,v,w,T){for(var H=0;H<T;H++)Ut.copyCoord(u,m+H,v,w+H)},Ut.toString=function(){if(arguments.length===1){var u=arguments[0],m=u.size();if(m===0)return"()";var v=u.getDimension(),w=new ce;w.append("(");for(var T=0;T<m;T++){T>0&&w.append(" ");for(var H=0;H<v;H++)H>0&&w.append(","),w.append(Ei.toString(u.getOrdinate(T,H)))}return w.append(")"),w.toString()}},Ut.ensureValidRing=function(u,m){var v=m.size();return v===0?m:v<=3?Ut.createClosedRing(u,m,4):m.getOrdinate(0,Se.X)===m.getOrdinate(v-1,Se.X)&&m.getOrdinate(0,Se.Y)===m.getOrdinate(v-1,Se.Y)?m:Ut.createClosedRing(u,m,v+1)},Ut.createClosedRing=function(u,m,v){var w=u.create(v,m.getDimension()),T=m.size();Ut.copy(m,0,w,0,T);for(var H=T;H<v;H++)Ut.copy(m,0,w,H,1);return w};var qt=function(u){function m(w,T){u.call(this,T),this._points=null,this.init(w)}u&&(m.__proto__=u),(m.prototype=Object.create(u&&u.prototype)).constructor=m;var v={serialVersionUID:{configurable:!0}};return m.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new ae:this._points.expandEnvelope(new ae)},m.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},m.prototype.getSortIndex=function(){return u.SORTINDEX_LINESTRING},m.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},m.prototype.equalsExact=function(){if(arguments.length===2){var w=arguments[0],T=arguments[1];if(!this.isEquivalentClass(w))return!1;var H=w;if(this._points.size()!==H._points.size())return!1;for(var G=0;G<this._points.size();G++)if(!this.equal(this._points.getCoordinate(G),H._points.getCoordinate(G),T))return!1;return!0}return u.prototype.equalsExact.apply(this,arguments)},m.prototype.normalize=function(){for(var w=0;w<Math.trunc(this._points.size()/2);w++){var T=this._points.size()-1-w;if(!this._points.getCoordinate(w).equals(this._points.getCoordinate(T)))return this._points.getCoordinate(w).compareTo(this._points.getCoordinate(T))>0&&Ut.reverse(this._points),null}},m.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},m.prototype.getBoundaryDimension=function(){return this.isClosed()?rt.FALSE:0},m.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},m.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},m.prototype.getDimension=function(){return 1},m.prototype.getLength=function(){return Me.computeLength(this._points)},m.prototype.getNumPoints=function(){return this._points.size()},m.prototype.reverse=function(){var w=this._points.copy();return Ut.reverse(w),this.getFactory().createLineString(w)},m.prototype.compareToSameClass=function(){if(arguments.length===1){for(var w=arguments[0],T=0,H=0;T<this._points.size()&&H<w._points.size();){var G=this._points.getCoordinate(T).compareTo(w._points.getCoordinate(H));if(G!==0)return G;T++,H++}return T<this._points.size()?1:H<w._points.size()?-1:0}if(arguments.length===2){var K=arguments[0];return arguments[1].compare(this._points,K._points)}},m.prototype.apply=function(){if(j(arguments[0],Pt))for(var w=arguments[0],T=0;T<this._points.size();T++)w.filter(this._points.getCoordinate(T));else if(j(arguments[0],yi)){var H=arguments[0];if(this._points.size()===0)return null;for(var G=0;G<this._points.size()&&(H.filter(this._points,G),!H.isDone());G++);H.isGeometryChanged()&&this.geometryChanged()}else j(arguments[0],ne)?arguments[0].filter(this):j(arguments[0],Ze)&&arguments[0].filter(this)},m.prototype.getBoundary=function(){return new Pi(this).getBoundary()},m.prototype.isEquivalentClass=function(w){return w instanceof m},m.prototype.clone=function(){var w=u.prototype.clone.call(this);return w._points=this._points.clone(),w},m.prototype.getCoordinateN=function(w){return this._points.getCoordinate(w)},m.prototype.getGeometryType=function(){return"LineString"},m.prototype.copy=function(){return new m(this._points.copy(),this._factory)},m.prototype.getCoordinateSequence=function(){return this._points},m.prototype.isEmpty=function(){return this._points.size()===0},m.prototype.init=function(w){if(w===null&&(w=this.getFactory().getCoordinateSequenceFactory().create([])),w.size()===1)throw new D("Invalid number of points in LineString (found "+w.size()+" - must be 0 or >= 2)");this._points=w},m.prototype.isCoordinate=function(w){for(var T=0;T<this._points.size();T++)if(this._points.getCoordinate(T).equals(w))return!0;return!1},m.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},m.prototype.getPointN=function(w){return this.getFactory().createPoint(this._points.getCoordinate(w))},m.prototype.interfaces_=function(){return[pt]},m.prototype.getClass=function(){return m},v.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(m,v),m}(Ue),We=function(){};We.prototype.interfaces_=function(){return[]},We.prototype.getClass=function(){return We};var ei=function(u){function m(w,T){u.call(this,T),this._coordinates=w||null,this.init(this._coordinates)}u&&(m.__proto__=u),(m.prototype=Object.create(u&&u.prototype)).constructor=m;var v={serialVersionUID:{configurable:!0}};return m.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new ae;var w=new ae;return w.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),w},m.prototype.getSortIndex=function(){return u.SORTINDEX_POINT},m.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},m.prototype.equalsExact=function(){if(arguments.length===2){var w=arguments[0],T=arguments[1];return!!this.isEquivalentClass(w)&&(!(!this.isEmpty()||!w.isEmpty())||this.isEmpty()===w.isEmpty()&&this.equal(w.getCoordinate(),this.getCoordinate(),T))}return u.prototype.equalsExact.apply(this,arguments)},m.prototype.normalize=function(){},m.prototype.getCoordinate=function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null},m.prototype.getBoundaryDimension=function(){return rt.FALSE},m.prototype.getDimension=function(){return 0},m.prototype.getNumPoints=function(){return this.isEmpty()?0:1},m.prototype.reverse=function(){return this.copy()},m.prototype.getX=function(){if(this.getCoordinate()===null)throw new Error("getX called on empty Point");return this.getCoordinate().x},m.prototype.compareToSameClass=function(){if(arguments.length===1){var w=arguments[0];return this.getCoordinate().compareTo(w.getCoordinate())}if(arguments.length===2){var T=arguments[0];return arguments[1].compare(this._coordinates,T._coordinates)}},m.prototype.apply=function(){if(j(arguments[0],Pt)){var w=arguments[0];if(this.isEmpty())return null;w.filter(this.getCoordinate())}else if(j(arguments[0],yi)){var T=arguments[0];if(this.isEmpty())return null;T.filter(this._coordinates,0),T.isGeometryChanged()&&this.geometryChanged()}else j(arguments[0],ne)?arguments[0].filter(this):j(arguments[0],Ze)&&arguments[0].filter(this)},m.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},m.prototype.clone=function(){var w=u.prototype.clone.call(this);return w._coordinates=this._coordinates.clone(),w},m.prototype.getGeometryType=function(){return"Point"},m.prototype.copy=function(){return new m(this._coordinates.copy(),this._factory)},m.prototype.getCoordinateSequence=function(){return this._coordinates},m.prototype.getY=function(){if(this.getCoordinate()===null)throw new Error("getY called on empty Point");return this.getCoordinate().y},m.prototype.isEmpty=function(){return this._coordinates.size()===0},m.prototype.init=function(w){w===null&&(w=this.getFactory().getCoordinateSequenceFactory().create([])),U.isTrue(w.size()<=1),this._coordinates=w},m.prototype.isSimple=function(){return!0},m.prototype.interfaces_=function(){return[We]},m.prototype.getClass=function(){return m},v.serialVersionUID.get=function(){return 4902022702746615e3},Object.defineProperties(m,v),m}(Ue),s0=function(){};s0.prototype.interfaces_=function(){return[]},s0.prototype.getClass=function(){return s0};var Yt=function(u){function m(w,T,H){if(u.call(this,H),this._shell=null,this._holes=null,w===null&&(w=this.getFactory().createLinearRing()),T===null&&(T=[]),u.hasNullElements(T))throw new D("holes must not contain null elements");if(w.isEmpty()&&u.hasNonEmptyElements(T))throw new D("shell is empty but holes are not");this._shell=w,this._holes=T}u&&(m.__proto__=u),(m.prototype=Object.create(u&&u.prototype)).constructor=m;var v={serialVersionUID:{configurable:!0}};return m.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},m.prototype.getSortIndex=function(){return u.SORTINDEX_POLYGON},m.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var w=new Array(this.getNumPoints()).fill(null),T=-1,H=this._shell.getCoordinates(),G=0;G<H.length;G++)w[++T]=H[G];for(var K=0;K<this._holes.length;K++)for(var de=this._holes[K].getCoordinates(),Le=0;Le<de.length;Le++)w[++T]=de[Le];return w},m.prototype.getArea=function(){var w=0;w+=Math.abs(Me.signedArea(this._shell.getCoordinateSequence()));for(var T=0;T<this._holes.length;T++)w-=Math.abs(Me.signedArea(this._holes[T].getCoordinateSequence()));return w},m.prototype.isRectangle=function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var w=this._shell.getCoordinateSequence(),T=this.getEnvelopeInternal(),H=0;H<5;H++){var G=w.getX(H);if(G!==T.getMinX()&&G!==T.getMaxX())return!1;var K=w.getY(H);if(K!==T.getMinY()&&K!==T.getMaxY())return!1}for(var de=w.getX(0),Le=w.getY(0),He=1;He<=4;He++){var ze=w.getX(He),it=w.getY(He);if(ze!==de==(it!==Le))return!1;de=ze,Le=it}return!0},m.prototype.equalsExact=function(){if(arguments.length===2){var w=arguments[0],T=arguments[1];if(!this.isEquivalentClass(w))return!1;var H=w,G=this._shell,K=H._shell;if(!G.equalsExact(K,T)||this._holes.length!==H._holes.length)return!1;for(var de=0;de<this._holes.length;de++)if(!this._holes[de].equalsExact(H._holes[de],T))return!1;return!0}return u.prototype.equalsExact.apply(this,arguments)},m.prototype.normalize=function(){if(arguments.length===0){this.normalize(this._shell,!0);for(var w=0;w<this._holes.length;w++)this.normalize(this._holes[w],!1);Ct.sort(this._holes)}else if(arguments.length===2){var T=arguments[0],H=arguments[1];if(T.isEmpty())return null;var G=new Array(T.getCoordinates().length-1).fill(null);ye.arraycopy(T.getCoordinates(),0,G,0,G.length);var K=Mt.minCoordinate(T.getCoordinates());Mt.scroll(G,K),ye.arraycopy(G,0,T.getCoordinates(),0,G.length),T.getCoordinates()[G.length]=G[0],Me.isCCW(T.getCoordinates())===H&&Mt.reverse(T.getCoordinates())}},m.prototype.getCoordinate=function(){return this._shell.getCoordinate()},m.prototype.getNumInteriorRing=function(){return this._holes.length},m.prototype.getBoundaryDimension=function(){return 1},m.prototype.getDimension=function(){return 2},m.prototype.getLength=function(){var w=0;w+=this._shell.getLength();for(var T=0;T<this._holes.length;T++)w+=this._holes[T].getLength();return w},m.prototype.getNumPoints=function(){for(var w=this._shell.getNumPoints(),T=0;T<this._holes.length;T++)w+=this._holes[T].getNumPoints();return w},m.prototype.reverse=function(){var w=this.copy();w._shell=this._shell.copy().reverse(),w._holes=new Array(this._holes.length).fill(null);for(var T=0;T<this._holes.length;T++)w._holes[T]=this._holes[T].copy().reverse();return w},m.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},m.prototype.compareToSameClass=function(){if(arguments.length===1){var w=arguments[0],T=this._shell,H=w._shell;return T.compareToSameClass(H)}if(arguments.length===2){var G=arguments[0],K=arguments[1],de=G,Le=this._shell,He=de._shell,ze=Le.compareToSameClass(He,K);if(ze!==0)return ze;for(var it=this.getNumInteriorRing(),at=de.getNumInteriorRing(),_t=0;_t<it&&_t<at;){var vt=this.getInteriorRingN(_t),Ft=de.getInteriorRingN(_t),si=vt.compareToSameClass(Ft,K);if(si!==0)return si;_t++}return _t<it?1:_t<at?-1:0}},m.prototype.apply=function(w){if(j(w,Pt)){this._shell.apply(w);for(var T=0;T<this._holes.length;T++)this._holes[T].apply(w)}else if(j(w,yi)){if(this._shell.apply(w),!w.isDone())for(var H=0;H<this._holes.length&&(this._holes[H].apply(w),!w.isDone());H++);w.isGeometryChanged()&&this.geometryChanged()}else if(j(w,ne))w.filter(this);else if(j(w,Ze)){w.filter(this),this._shell.apply(w);for(var G=0;G<this._holes.length;G++)this._holes[G].apply(w)}},m.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var w=new Array(this._holes.length+1).fill(null);w[0]=this._shell;for(var T=0;T<this._holes.length;T++)w[T+1]=this._holes[T];return w.length<=1?this.getFactory().createLinearRing(w[0].getCoordinateSequence()):this.getFactory().createMultiLineString(w)},m.prototype.clone=function(){var w=u.prototype.clone.call(this);w._shell=this._shell.clone(),w._holes=new Array(this._holes.length).fill(null);for(var T=0;T<this._holes.length;T++)w._holes[T]=this._holes[T].clone();return w},m.prototype.getGeometryType=function(){return"Polygon"},m.prototype.copy=function(){for(var w=this._shell.copy(),T=new Array(this._holes.length).fill(null),H=0;H<T.length;H++)T[H]=this._holes[H].copy();return new m(w,T,this._factory)},m.prototype.getExteriorRing=function(){return this._shell},m.prototype.isEmpty=function(){return this._shell.isEmpty()},m.prototype.getInteriorRingN=function(w){return this._holes[w]},m.prototype.interfaces_=function(){return[s0]},m.prototype.getClass=function(){return m},v.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(m,v),m}(Ue),w0=function(u){function m(){u.apply(this,arguments)}u&&(m.__proto__=u),(m.prototype=Object.create(u&&u.prototype)).constructor=m;var v={serialVersionUID:{configurable:!0}};return m.prototype.getSortIndex=function(){return Ue.SORTINDEX_MULTIPOINT},m.prototype.isValid=function(){return!0},m.prototype.equalsExact=function(){if(arguments.length===2){var w=arguments[0],T=arguments[1];return!!this.isEquivalentClass(w)&&u.prototype.equalsExact.call(this,w,T)}return u.prototype.equalsExact.apply(this,arguments)},m.prototype.getCoordinate=function(){if(arguments.length===1){var w=arguments[0];return this._geometries[w].getCoordinate()}return u.prototype.getCoordinate.apply(this,arguments)},m.prototype.getBoundaryDimension=function(){return rt.FALSE},m.prototype.getDimension=function(){return 0},m.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},m.prototype.getGeometryType=function(){return"MultiPoint"},m.prototype.copy=function(){for(var w=new Array(this._geometries.length).fill(null),T=0;T<w.length;T++)w[T]=this._geometries[T].copy();return new m(w,this._factory)},m.prototype.interfaces_=function(){return[We]},m.prototype.getClass=function(){return m},v.serialVersionUID.get=function(){return-8048474874175356e3},Object.defineProperties(m,v),m}(ri),Yi=function(u){function m(w,T){w instanceof F&&T instanceof tt&&(w=T.getCoordinateSequenceFactory().create(w)),u.call(this,w,T),this.validateConstruction()}u&&(m.__proto__=u),(m.prototype=Object.create(u&&u.prototype)).constructor=m;var v={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return m.prototype.getSortIndex=function(){return Ue.SORTINDEX_LINEARRING},m.prototype.getBoundaryDimension=function(){return rt.FALSE},m.prototype.isClosed=function(){return!!this.isEmpty()||u.prototype.isClosed.call(this)},m.prototype.reverse=function(){var w=this._points.copy();return Ut.reverse(w),this.getFactory().createLinearRing(w)},m.prototype.validateConstruction=function(){if(!this.isEmpty()&&!u.prototype.isClosed.call(this))throw new D("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<m.MINIMUM_VALID_SIZE)throw new D("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},m.prototype.getGeometryType=function(){return"LinearRing"},m.prototype.copy=function(){return new m(this._points.copy(),this._factory)},m.prototype.interfaces_=function(){return[]},m.prototype.getClass=function(){return m},v.MINIMUM_VALID_SIZE.get=function(){return 4},v.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(m,v),m}(qt),se=function(u){function m(){u.apply(this,arguments)}u&&(m.__proto__=u),(m.prototype=Object.create(u&&u.prototype)).constructor=m;var v={serialVersionUID:{configurable:!0}};return m.prototype.getSortIndex=function(){return Ue.SORTINDEX_MULTIPOLYGON},m.prototype.equalsExact=function(){if(arguments.length===2){var w=arguments[0],T=arguments[1];return!!this.isEquivalentClass(w)&&u.prototype.equalsExact.call(this,w,T)}return u.prototype.equalsExact.apply(this,arguments)},m.prototype.getBoundaryDimension=function(){return 1},m.prototype.getDimension=function(){return 2},m.prototype.reverse=function(){for(var w=this._geometries.length,T=new Array(w).fill(null),H=0;H<this._geometries.length;H++)T[H]=this._geometries[H].reverse();return this.getFactory().createMultiPolygon(T)},m.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var w=new Xe,T=0;T<this._geometries.length;T++)for(var H=this._geometries[T].getBoundary(),G=0;G<H.getNumGeometries();G++)w.add(H.getGeometryN(G));var K=new Array(w.size()).fill(null);return this.getFactory().createMultiLineString(w.toArray(K))},m.prototype.getGeometryType=function(){return"MultiPolygon"},m.prototype.copy=function(){for(var w=new Array(this._geometries.length).fill(null),T=0;T<w.length;T++)w[T]=this._geometries[T].copy();return new m(w,this._factory)},m.prototype.interfaces_=function(){return[s0]},m.prototype.getClass=function(){return m},v.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(m,v),m}(ri),ue=function(u){this._factory=u||null,this._isUserDataCopied=!1},je={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};ue.prototype.setCopyUserData=function(u){this._isUserDataCopied=u},ue.prototype.edit=function(u,m){if(u===null)return null;var v=this.editInternal(u,m);return this._isUserDataCopied&&v.setUserData(u.getUserData()),v},ue.prototype.editInternal=function(u,m){return this._factory===null&&(this._factory=u.getFactory()),u instanceof ri?this.editGeometryCollection(u,m):u instanceof Yt?this.editPolygon(u,m):u instanceof ei?m.edit(u,this._factory):u instanceof qt?m.edit(u,this._factory):(U.shouldNeverReachHere("Unsupported Geometry class: "+u.getClass().getName()),null)},ue.prototype.editGeometryCollection=function(u,m){for(var v=m.edit(u,this._factory),w=new Xe,T=0;T<v.getNumGeometries();T++){var H=this.edit(v.getGeometryN(T),m);H===null||H.isEmpty()||w.add(H)}return v.getClass()===w0?this._factory.createMultiPoint(w.toArray([])):v.getClass()===h0?this._factory.createMultiLineString(w.toArray([])):v.getClass()===se?this._factory.createMultiPolygon(w.toArray([])):this._factory.createGeometryCollection(w.toArray([]))},ue.prototype.editPolygon=function(u,m){var v=m.edit(u,this._factory);if(v===null&&(v=this._factory.createPolygon(null)),v.isEmpty())return v;var w=this.edit(v.getExteriorRing(),m);if(w===null||w.isEmpty())return this._factory.createPolygon();for(var T=new Xe,H=0;H<v.getNumInteriorRing();H++){var G=this.edit(v.getInteriorRingN(H),m);G===null||G.isEmpty()||T.add(G)}return this._factory.createPolygon(w,T.toArray([]))},ue.prototype.interfaces_=function(){return[]},ue.prototype.getClass=function(){return ue},ue.GeometryEditorOperation=function(){},je.NoOpGeometryOperation.get=function(){return Qe},je.CoordinateOperation.get=function(){return et},je.CoordinateSequenceOperation.get=function(){return Ye},Object.defineProperties(ue,je);var Qe=function(){};Qe.prototype.edit=function(u,m){return u},Qe.prototype.interfaces_=function(){return[ue.GeometryEditorOperation]},Qe.prototype.getClass=function(){return Qe};var et=function(){};et.prototype.edit=function(u,m){var v=this.editCoordinates(u.getCoordinates(),u);return v===null?u:u instanceof Yi?m.createLinearRing(v):u instanceof qt?m.createLineString(v):u instanceof ei?v.length>0?m.createPoint(v[0]):m.createPoint():u},et.prototype.interfaces_=function(){return[ue.GeometryEditorOperation]},et.prototype.getClass=function(){return et};var Ye=function(){};Ye.prototype.edit=function(u,m){return u instanceof Yi?m.createLinearRing(this.edit(u.getCoordinateSequence(),u)):u instanceof qt?m.createLineString(this.edit(u.getCoordinateSequence(),u)):u instanceof ei?m.createPoint(this.edit(u.getCoordinateSequence(),u)):u},Ye.prototype.interfaces_=function(){return[ue.GeometryEditorOperation]},Ye.prototype.getClass=function(){return Ye};var be=function(){if(this._dimension=3,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var u=arguments[0];this._coordinates=new Array(u).fill(null);for(var m=0;m<u;m++)this._coordinates[m]=new F}else if(j(arguments[0],Se)){var v=arguments[0];if(v===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=v.getDimension(),this._coordinates=new Array(v.size()).fill(null);for(var w=0;w<this._coordinates.length;w++)this._coordinates[w]=v.getCoordinateCopy(w)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var T=arguments[0],H=arguments[1];this._coordinates=T,this._dimension=H,T===null&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var G=arguments[0],K=arguments[1];this._coordinates=new Array(G).fill(null),this._dimension=K;for(var de=0;de<G;de++)this._coordinates[de]=new F}}},st={serialVersionUID:{configurable:!0}};be.prototype.setOrdinate=function(u,m,v){switch(m){case Se.X:this._coordinates[u].x=v;break;case Se.Y:this._coordinates[u].y=v;break;case Se.Z:this._coordinates[u].z=v;break;default:throw new D("invalid ordinateIndex")}},be.prototype.size=function(){return this._coordinates.length},be.prototype.getOrdinate=function(u,m){switch(m){case Se.X:return this._coordinates[u].x;case Se.Y:return this._coordinates[u].y;case Se.Z:return this._coordinates[u].z}return R.NaN},be.prototype.getCoordinate=function(){if(arguments.length===1){var u=arguments[0];return this._coordinates[u]}if(arguments.length===2){var m=arguments[0],v=arguments[1];v.x=this._coordinates[m].x,v.y=this._coordinates[m].y,v.z=this._coordinates[m].z}},be.prototype.getCoordinateCopy=function(u){return new F(this._coordinates[u])},be.prototype.getDimension=function(){return this._dimension},be.prototype.getX=function(u){return this._coordinates[u].x},be.prototype.clone=function(){for(var u=new Array(this.size()).fill(null),m=0;m<this._coordinates.length;m++)u[m]=this._coordinates[m].clone();return new be(u,this._dimension)},be.prototype.expandEnvelope=function(u){for(var m=0;m<this._coordinates.length;m++)u.expandToInclude(this._coordinates[m]);return u},be.prototype.copy=function(){for(var u=new Array(this.size()).fill(null),m=0;m<this._coordinates.length;m++)u[m]=this._coordinates[m].copy();return new be(u,this._dimension)},be.prototype.toString=function(){if(this._coordinates.length>0){var u=new ce(17*this._coordinates.length);u.append("("),u.append(this._coordinates[0]);for(var m=1;m<this._coordinates.length;m++)u.append(", "),u.append(this._coordinates[m]);return u.append(")"),u.toString()}return"()"},be.prototype.getY=function(u){return this._coordinates[u].y},be.prototype.toCoordinateArray=function(){return this._coordinates},be.prototype.interfaces_=function(){return[Se,i]},be.prototype.getClass=function(){return be},st.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(be,st);var Ge=function(){},re={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};Ge.prototype.readResolve=function(){return Ge.instance()},Ge.prototype.create=function(){if(arguments.length===1){if(arguments[0]instanceof Array){var u=arguments[0];return new be(u)}if(j(arguments[0],Se)){var m=arguments[0];return new be(m)}}else if(arguments.length===2){var v=arguments[0],w=arguments[1];return w>3&&(w=3),w<2?new be(v):new be(v,w)}},Ge.prototype.interfaces_=function(){return[J,i]},Ge.prototype.getClass=function(){return Ge},Ge.instance=function(){return Ge.instanceObject},re.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},re.instanceObject.get=function(){return new Ge},Object.defineProperties(Ge,re);var Ee=function(u){function m(){u.call(this),this.map_=new Map}return u&&(m.__proto__=u),m.prototype=Object.create(u&&u.prototype),m.prototype.constructor=m,m.prototype.get=function(v){return this.map_.get(v)||null},m.prototype.put=function(v,w){return this.map_.set(v,w),w},m.prototype.values=function(){for(var v=new Xe,w=this.map_.values(),T=w.next();!T.done;)v.add(T.value),T=w.next();return v},m.prototype.entrySet=function(){var v=new nt;return this.map_.entries().forEach(function(w){return v.add(w)}),v},m.prototype.size=function(){return this.map_.size()},m}(Wi),Ce=function u(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=u.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof Re){var m=arguments[0];this._modelType=m,m===u.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var v=arguments[0];this._modelType=u.FIXED,this.setScale(v)}else if(arguments[0]instanceof u){var w=arguments[0];this._modelType=w._modelType,this._scale=w._scale}}},Oe={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};Ce.prototype.equals=function(u){if(!(u instanceof Ce))return!1;var m=u;return this._modelType===m._modelType&&this._scale===m._scale},Ce.prototype.compareTo=function(u){var m=u,v=this.getMaximumSignificantDigits(),w=m.getMaximumSignificantDigits();return new xe(v).compareTo(new xe(w))},Ce.prototype.getScale=function(){return this._scale},Ce.prototype.isFloating=function(){return this._modelType===Ce.FLOATING||this._modelType===Ce.FLOATING_SINGLE},Ce.prototype.getType=function(){return this._modelType},Ce.prototype.toString=function(){var u="UNKNOWN";return this._modelType===Ce.FLOATING?u="Floating":this._modelType===Ce.FLOATING_SINGLE?u="Floating-Single":this._modelType===Ce.FIXED&&(u="Fixed (Scale="+this.getScale()+")"),u},Ce.prototype.makePrecise=function(){if(typeof arguments[0]=="number"){var u=arguments[0];return R.isNaN(u)||this._modelType===Ce.FLOATING_SINGLE?u:this._modelType===Ce.FIXED?Math.round(u*this._scale)/this._scale:u}if(arguments[0]instanceof F){var m=arguments[0];if(this._modelType===Ce.FLOATING)return null;m.x=this.makePrecise(m.x),m.y=this.makePrecise(m.y)}},Ce.prototype.getMaximumSignificantDigits=function(){var u=16;return this._modelType===Ce.FLOATING?u=16:this._modelType===Ce.FLOATING_SINGLE?u=6:this._modelType===Ce.FIXED&&(u=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),u},Ce.prototype.setScale=function(u){this._scale=Math.abs(u)},Ce.prototype.interfaces_=function(){return[i,N]},Ce.prototype.getClass=function(){return Ce},Ce.mostPrecise=function(u,m){return u.compareTo(m)>=0?u:m},Oe.serialVersionUID.get=function(){return 7777263578777804e3},Oe.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(Ce,Oe);var Re=function u(m){this._name=m||null,u.nameToTypeMap.put(m,this)},D0={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};Re.prototype.readResolve=function(){return Re.nameToTypeMap.get(this._name)},Re.prototype.toString=function(){return this._name},Re.prototype.interfaces_=function(){return[i]},Re.prototype.getClass=function(){return Re},D0.serialVersionUID.get=function(){return-552860263173159e4},D0.nameToTypeMap.get=function(){return new Ee},Object.defineProperties(Re,D0),Ce.Type=Re,Ce.FIXED=new Re("FIXED"),Ce.FLOATING=new Re("FLOATING"),Ce.FLOATING_SINGLE=new Re("FLOATING SINGLE");var tt=function u(){this._precisionModel=new Ce,this._SRID=0,this._coordinateSequenceFactory=u.getDefaultCoordinateSequenceFactory(),arguments.length===0||(arguments.length===1?j(arguments[0],J)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof Ce&&(this._precisionModel=arguments[0]):arguments.length===2?(this._precisionModel=arguments[0],this._SRID=arguments[1]):arguments.length===3&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},ua={serialVersionUID:{configurable:!0}};tt.prototype.toGeometry=function(u){return u.isNull()?this.createPoint(null):u.getMinX()===u.getMaxX()&&u.getMinY()===u.getMaxY()?this.createPoint(new F(u.getMinX(),u.getMinY())):u.getMinX()===u.getMaxX()||u.getMinY()===u.getMaxY()?this.createLineString([new F(u.getMinX(),u.getMinY()),new F(u.getMaxX(),u.getMaxY())]):this.createPolygon(this.createLinearRing([new F(u.getMinX(),u.getMinY()),new F(u.getMinX(),u.getMaxY()),new F(u.getMaxX(),u.getMaxY()),new F(u.getMaxX(),u.getMinY()),new F(u.getMinX(),u.getMinY())]),null)},tt.prototype.createLineString=function(u){return u?u instanceof Array?new qt(this.getCoordinateSequenceFactory().create(u),this):j(u,Se)?new qt(u,this):void 0:new qt(this.getCoordinateSequenceFactory().create([]),this)},tt.prototype.createMultiLineString=function(){if(arguments.length===0)return new h0(null,this);if(arguments.length===1){var u=arguments[0];return new h0(u,this)}},tt.prototype.buildGeometry=function(u){for(var m=null,v=!1,w=!1,T=u.iterator();T.hasNext();){var H=T.next(),G=H.getClass();m===null&&(m=G),G!==m&&(v=!0),H.isGeometryCollectionOrDerived()&&(w=!0)}if(m===null)return this.createGeometryCollection();if(v||w)return this.createGeometryCollection(tt.toGeometryArray(u));var K=u.iterator().next();if(u.size()>1){if(K instanceof Yt)return this.createMultiPolygon(tt.toPolygonArray(u));if(K instanceof qt)return this.createMultiLineString(tt.toLineStringArray(u));if(K instanceof ei)return this.createMultiPoint(tt.toPointArray(u));U.shouldNeverReachHere("Unhandled class: "+K.getClass().getName())}return K},tt.prototype.createMultiPointFromCoords=function(u){return this.createMultiPoint(u!==null?this.getCoordinateSequenceFactory().create(u):null)},tt.prototype.createPoint=function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof F){var u=arguments[0];return this.createPoint(u!==null?this.getCoordinateSequenceFactory().create([u]):null)}if(j(arguments[0],Se)){var m=arguments[0];return new ei(m,this)}}},tt.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},tt.prototype.createPolygon=function(){if(arguments.length===0)return new Yt(null,null,this);if(arguments.length===1){if(j(arguments[0],Se)){var u=arguments[0];return this.createPolygon(this.createLinearRing(u))}if(arguments[0]instanceof Array){var m=arguments[0];return this.createPolygon(this.createLinearRing(m))}if(arguments[0]instanceof Yi){var v=arguments[0];return this.createPolygon(v,null)}}else if(arguments.length===2){var w=arguments[0],T=arguments[1];return new Yt(w,T,this)}},tt.prototype.getSRID=function(){return this._SRID},tt.prototype.createGeometryCollection=function(){if(arguments.length===0)return new ri(null,this);if(arguments.length===1){var u=arguments[0];return new ri(u,this)}},tt.prototype.createGeometry=function(u){return new ue(this).edit(u,{edit:function(){if(arguments.length===2){var m=arguments[0];return this._coordinateSequenceFactory.create(m)}}})},tt.prototype.getPrecisionModel=function(){return this._precisionModel},tt.prototype.createLinearRing=function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var u=arguments[0];return this.createLinearRing(u!==null?this.getCoordinateSequenceFactory().create(u):null)}if(j(arguments[0],Se)){var m=arguments[0];return new Yi(m,this)}}},tt.prototype.createMultiPolygon=function(){if(arguments.length===0)return new se(null,this);if(arguments.length===1){var u=arguments[0];return new se(u,this)}},tt.prototype.createMultiPoint=function(){if(arguments.length===0)return new w0(null,this);if(arguments.length===1){if(arguments[0]instanceof Array){var u=arguments[0];return new w0(u,this)}if(arguments[0]instanceof Array){var m=arguments[0];return this.createMultiPoint(m!==null?this.getCoordinateSequenceFactory().create(m):null)}if(j(arguments[0],Se)){var v=arguments[0];if(v===null)return this.createMultiPoint(new Array(0).fill(null));for(var w=new Array(v.size()).fill(null),T=0;T<v.size();T++){var H=this.getCoordinateSequenceFactory().create(1,v.getDimension());Ut.copy(v,T,H,0,1),w[T]=this.createPoint(H)}return this.createMultiPoint(w)}}},tt.prototype.interfaces_=function(){return[i]},tt.prototype.getClass=function(){return tt},tt.toMultiPolygonArray=function(u){var m=new Array(u.size()).fill(null);return u.toArray(m)},tt.toGeometryArray=function(u){if(u===null)return null;var m=new Array(u.size()).fill(null);return u.toArray(m)},tt.getDefaultCoordinateSequenceFactory=function(){return Ge.instance()},tt.toMultiLineStringArray=function(u){var m=new Array(u.size()).fill(null);return u.toArray(m)},tt.toLineStringArray=function(u){var m=new Array(u.size()).fill(null);return u.toArray(m)},tt.toMultiPointArray=function(u){var m=new Array(u.size()).fill(null);return u.toArray(m)},tt.toLinearRingArray=function(u){var m=new Array(u.size()).fill(null);return u.toArray(m)},tt.toPointArray=function(u){var m=new Array(u.size()).fill(null);return u.toArray(m)},tt.toPolygonArray=function(u){var m=new Array(u.size()).fill(null);return u.toArray(m)},tt.createPointFromInternalCoord=function(u,m){return m.getPrecisionModel().makePrecise(u),m.getFactory().createPoint(u)},ua.serialVersionUID.get=function(){return-6820524753094096e3},Object.defineProperties(tt,ua);var wt=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],gt=function(u){this.geometryFactory=u||new tt};gt.prototype.read=function(u){var m,v=(m=typeof u=="string"?JSON.parse(u):u).type;if(!lt[v])throw new Error("Unknown GeoJSON type: "+m.type);return wt.indexOf(v)!==-1?lt[v].apply(this,[m.coordinates]):v==="GeometryCollection"?lt[v].apply(this,[m.geometries]):lt[v].apply(this,[m])},gt.prototype.write=function(u){var m=u.getGeometryType();if(!ut[m])throw new Error("Geometry is not supported");return ut[m].apply(this,[u])};var lt={Feature:function(u){var m={};for(var v in u)m[v]=u[v];if(u.geometry){var w=u.geometry.type;if(!lt[w])throw new Error("Unknown GeoJSON type: "+u.type);m.geometry=this.read(u.geometry)}return u.bbox&&(m.bbox=lt.bbox.apply(this,[u.bbox])),m},FeatureCollection:function(u){var m={};if(u.features){m.features=[];for(var v=0;v<u.features.length;++v)m.features.push(this.read(u.features[v]))}return u.bbox&&(m.bbox=this.parse.bbox.apply(this,[u.bbox])),m},coordinates:function(u){for(var m=[],v=0;v<u.length;++v){var w=u[v];m.push(new F(w[0],w[1]))}return m},bbox:function(u){return this.geometryFactory.createLinearRing([new F(u[0],u[1]),new F(u[2],u[1]),new F(u[2],u[3]),new F(u[0],u[3]),new F(u[0],u[1])])},Point:function(u){var m=new F(u[0],u[1]);return this.geometryFactory.createPoint(m)},MultiPoint:function(u){for(var m=[],v=0;v<u.length;++v)m.push(lt.Point.apply(this,[u[v]]));return this.geometryFactory.createMultiPoint(m)},LineString:function(u){var m=lt.coordinates.apply(this,[u]);return this.geometryFactory.createLineString(m)},MultiLineString:function(u){for(var m=[],v=0;v<u.length;++v)m.push(lt.LineString.apply(this,[u[v]]));return this.geometryFactory.createMultiLineString(m)},Polygon:function(u){for(var m=lt.coordinates.apply(this,[u[0]]),v=this.geometryFactory.createLinearRing(m),w=[],T=1;T<u.length;++T){var H=u[T],G=lt.coordinates.apply(this,[H]),K=this.geometryFactory.createLinearRing(G);w.push(K)}return this.geometryFactory.createPolygon(v,w)},MultiPolygon:function(u){for(var m=[],v=0;v<u.length;++v){var w=u[v];m.push(lt.Polygon.apply(this,[w]))}return this.geometryFactory.createMultiPolygon(m)},GeometryCollection:function(u){for(var m=[],v=0;v<u.length;++v){var w=u[v];m.push(this.read(w))}return this.geometryFactory.createGeometryCollection(m)}},ut={coordinate:function(u){return[u.x,u.y]},Point:function(u){return{type:"Point",coordinates:ut.coordinate.apply(this,[u.getCoordinate()])}},MultiPoint:function(u){for(var m=[],v=0;v<u._geometries.length;++v){var w=u._geometries[v],T=ut.Point.apply(this,[w]);m.push(T.coordinates)}return{type:"MultiPoint",coordinates:m}},LineString:function(u){for(var m=[],v=u.getCoordinates(),w=0;w<v.length;++w){var T=v[w];m.push(ut.coordinate.apply(this,[T]))}return{type:"LineString",coordinates:m}},MultiLineString:function(u){for(var m=[],v=0;v<u._geometries.length;++v){var w=u._geometries[v],T=ut.LineString.apply(this,[w]);m.push(T.coordinates)}return{type:"MultiLineString",coordinates:m}},Polygon:function(u){var m=[],v=ut.LineString.apply(this,[u._shell]);m.push(v.coordinates);for(var w=0;w<u._holes.length;++w){var T=u._holes[w],H=ut.LineString.apply(this,[T]);m.push(H.coordinates)}return{type:"Polygon",coordinates:m}},MultiPolygon:function(u){for(var m=[],v=0;v<u._geometries.length;++v){var w=u._geometries[v],T=ut.Polygon.apply(this,[w]);m.push(T.coordinates)}return{type:"MultiPolygon",coordinates:m}},GeometryCollection:function(u){for(var m=[],v=0;v<u._geometries.length;++v){var w=u._geometries[v],T=w.getGeometryType();m.push(ut[T].apply(this,[w]))}return{type:"GeometryCollection",geometries:m}}},bt=function(u){this.geometryFactory=u||new tt,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new gt(this.geometryFactory)};bt.prototype.read=function(u){var m=this.parser.read(u);return this.precisionModel.getType()===Ce.FIXED&&this.reducePrecision(m),m},bt.prototype.reducePrecision=function(u){var m,v;if(u.coordinate)this.precisionModel.makePrecise(u.coordinate);else if(u.points)for(m=0,v=u.points.length;m<v;m++)this.precisionModel.makePrecise(u.points[m]);else if(u.geometries)for(m=0,v=u.geometries.length;m<v;m++)this.reducePrecision(u.geometries[m])};var St=function(){this.parser=new gt(this.geometryFactory)};St.prototype.write=function(u){return this.parser.write(u)};var Be=function(){},yt={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Be.prototype.interfaces_=function(){return[]},Be.prototype.getClass=function(){return Be},Be.opposite=function(u){return u===Be.LEFT?Be.RIGHT:u===Be.RIGHT?Be.LEFT:u},yt.ON.get=function(){return 0},yt.LEFT.get=function(){return 1},yt.RIGHT.get=function(){return 2},Object.defineProperties(Be,yt),(L.prototype=new Error).name="EmptyStackException",(E.prototype=new Kt).add=function(u){return this.array_.push(u),!0},E.prototype.get=function(u){if(u<0||u>=this.size())throw new Error;return this.array_[u]},E.prototype.push=function(u){return this.array_.push(u),u},E.prototype.pop=function(u){if(this.array_.length===0)throw new L;return this.array_.pop()},E.prototype.peek=function(){if(this.array_.length===0)throw new L;return this.array_[this.array_.length-1]},E.prototype.empty=function(){return this.array_.length===0},E.prototype.isEmpty=function(){return this.empty()},E.prototype.search=function(u){return this.array_.indexOf(u)},E.prototype.size=function(){return this.array_.length},E.prototype.toArray=function(){for(var u=[],m=0,v=this.array_.length;m<v;m++)u.push(this.array_[m]);return u};var Fe=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Fe.prototype.getCoordinate=function(){return this._minCoord},Fe.prototype.getRightmostSide=function(u,m){var v=this.getRightmostSideOfSegment(u,m);return v<0&&(v=this.getRightmostSideOfSegment(u,m-1)),v<0&&(this._minCoord=null,this.checkForRightmostCoordinate(u)),v},Fe.prototype.findRightmostEdgeAtVertex=function(){var u=this._minDe.getEdge().getCoordinates();U.isTrue(this._minIndex>0&&this._minIndex<u.length,"rightmost point expected to be interior vertex of edge");var m=u[this._minIndex-1],v=u[this._minIndex+1],w=Me.computeOrientation(this._minCoord,v,m),T=!1;(m.y<this._minCoord.y&&v.y<this._minCoord.y&&w===Me.COUNTERCLOCKWISE||m.y>this._minCoord.y&&v.y>this._minCoord.y&&w===Me.CLOCKWISE)&&(T=!0),T&&(this._minIndex=this._minIndex-1)},Fe.prototype.getRightmostSideOfSegment=function(u,m){var v=u.getEdge().getCoordinates();if(m<0||m+1>=v.length||v[m].y===v[m+1].y)return-1;var w=Be.LEFT;return v[m].y<v[m+1].y&&(w=Be.RIGHT),w},Fe.prototype.getEdge=function(){return this._orientedDe},Fe.prototype.checkForRightmostCoordinate=function(u){for(var m=u.getEdge().getCoordinates(),v=0;v<m.length-1;v++)(this._minCoord===null||m[v].x>this._minCoord.x)&&(this._minDe=u,this._minIndex=v,this._minCoord=m[v])},Fe.prototype.findRightmostEdgeAtNode=function(){var u=this._minDe.getNode().getEdges();this._minDe=u.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Fe.prototype.findEdge=function(u){for(var m=u.iterator();m.hasNext();){var v=m.next();v.isForward()&&this.checkForRightmostCoordinate(v)}U.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Be.LEFT&&(this._orientedDe=this._minDe.getSym())},Fe.prototype.interfaces_=function(){return[]},Fe.prototype.getClass=function(){return Fe};var d0=function(u){function m(v,w){u.call(this,m.msgWithCoord(v,w)),this.pt=w?new F(w):null,this.name="TopologyException"}return u&&(m.__proto__=u),m.prototype=Object.create(u&&u.prototype),m.prototype.constructor=m,m.prototype.getCoordinate=function(){return this.pt},m.prototype.interfaces_=function(){return[]},m.prototype.getClass=function(){return m},m.msgWithCoord=function(v,w){return w?v:v+" [ "+w+" ]"},m}(ve),Sa=function(){this.array_=[]};Sa.prototype.addLast=function(u){this.array_.push(u)},Sa.prototype.removeFirst=function(){return this.array_.shift()},Sa.prototype.isEmpty=function(){return this.array_.length===0};var xi=function(){this._finder=null,this._dirEdgeList=new Xe,this._nodes=new Xe,this._rightMostCoord=null,this._env=null,this._finder=new Fe};xi.prototype.clearVisitedEdges=function(){for(var u=this._dirEdgeList.iterator();u.hasNext();)u.next().setVisited(!1)},xi.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},xi.prototype.computeNodeDepth=function(u){for(var m=null,v=u.getEdges().iterator();v.hasNext();){var w=v.next();if(w.isVisited()||w.getSym().isVisited()){m=w;break}}if(m===null)throw new d0("unable to find edge to compute depths at "+u.getCoordinate());u.getEdges().computeDepths(m);for(var T=u.getEdges().iterator();T.hasNext();){var H=T.next();H.setVisited(!0),this.copySymDepths(H)}},xi.prototype.computeDepth=function(u){this.clearVisitedEdges();var m=this._finder.getEdge();m.setEdgeDepths(Be.RIGHT,u),this.copySymDepths(m),this.computeDepths(m)},xi.prototype.create=function(u){this.addReachable(u),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},xi.prototype.findResultEdges=function(){for(var u=this._dirEdgeList.iterator();u.hasNext();){var m=u.next();m.getDepth(Be.RIGHT)>=1&&m.getDepth(Be.LEFT)<=0&&!m.isInteriorAreaEdge()&&m.setInResult(!0)}},xi.prototype.computeDepths=function(u){var m=new nt,v=new Sa,w=u.getNode();for(v.addLast(w),m.add(w),u.setVisited(!0);!v.isEmpty();){var T=v.removeFirst();m.add(T),this.computeNodeDepth(T);for(var H=T.getEdges().iterator();H.hasNext();){var G=H.next().getSym();if(!G.isVisited()){var K=G.getNode();m.contains(K)||(v.addLast(K),m.add(K))}}}},xi.prototype.compareTo=function(u){var m=u;return this._rightMostCoord.x<m._rightMostCoord.x?-1:this._rightMostCoord.x>m._rightMostCoord.x?1:0},xi.prototype.getEnvelope=function(){if(this._env===null){for(var u=new ae,m=this._dirEdgeList.iterator();m.hasNext();)for(var v=m.next().getEdge().getCoordinates(),w=0;w<v.length-1;w++)u.expandToInclude(v[w]);this._env=u}return this._env},xi.prototype.addReachable=function(u){var m=new E;for(m.add(u);!m.empty();){var v=m.pop();this.add(v,m)}},xi.prototype.copySymDepths=function(u){var m=u.getSym();m.setDepth(Be.LEFT,u.getDepth(Be.RIGHT)),m.setDepth(Be.RIGHT,u.getDepth(Be.LEFT))},xi.prototype.add=function(u,m){u.setVisited(!0),this._nodes.add(u);for(var v=u.getEdges().iterator();v.hasNext();){var w=v.next();this._dirEdgeList.add(w);var T=w.getSym().getNode();T.isVisited()||m.push(T)}},xi.prototype.getNodes=function(){return this._nodes},xi.prototype.getDirectedEdges=function(){return this._dirEdgeList},xi.prototype.interfaces_=function(){return[N]},xi.prototype.getClass=function(){return xi};var Gt=function u(){if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var m=arguments[0];this.init(m.length)}else if(Number.isInteger(arguments[0])){var v=arguments[0];this.init(1),this.location[Be.ON]=v}else if(arguments[0]instanceof u){var w=arguments[0];if(this.init(w.location.length),w!==null)for(var T=0;T<this.location.length;T++)this.location[T]=w.location[T]}}else if(arguments.length===3){var H=arguments[0],G=arguments[1],K=arguments[2];this.init(3),this.location[Be.ON]=H,this.location[Be.LEFT]=G,this.location[Be.RIGHT]=K}};Gt.prototype.setAllLocations=function(u){for(var m=0;m<this.location.length;m++)this.location[m]=u},Gt.prototype.isNull=function(){for(var u=0;u<this.location.length;u++)if(this.location[u]!==q.NONE)return!1;return!0},Gt.prototype.setAllLocationsIfNull=function(u){for(var m=0;m<this.location.length;m++)this.location[m]===q.NONE&&(this.location[m]=u)},Gt.prototype.isLine=function(){return this.location.length===1},Gt.prototype.merge=function(u){if(u.location.length>this.location.length){var m=new Array(3).fill(null);m[Be.ON]=this.location[Be.ON],m[Be.LEFT]=q.NONE,m[Be.RIGHT]=q.NONE,this.location=m}for(var v=0;v<this.location.length;v++)this.location[v]===q.NONE&&v<u.location.length&&(this.location[v]=u.location[v])},Gt.prototype.getLocations=function(){return this.location},Gt.prototype.flip=function(){if(this.location.length<=1)return null;var u=this.location[Be.LEFT];this.location[Be.LEFT]=this.location[Be.RIGHT],this.location[Be.RIGHT]=u},Gt.prototype.toString=function(){var u=new ce;return this.location.length>1&&u.append(q.toLocationSymbol(this.location[Be.LEFT])),u.append(q.toLocationSymbol(this.location[Be.ON])),this.location.length>1&&u.append(q.toLocationSymbol(this.location[Be.RIGHT])),u.toString()},Gt.prototype.setLocations=function(u,m,v){this.location[Be.ON]=u,this.location[Be.LEFT]=m,this.location[Be.RIGHT]=v},Gt.prototype.get=function(u){return u<this.location.length?this.location[u]:q.NONE},Gt.prototype.isArea=function(){return this.location.length>1},Gt.prototype.isAnyNull=function(){for(var u=0;u<this.location.length;u++)if(this.location[u]===q.NONE)return!0;return!1},Gt.prototype.setLocation=function(){if(arguments.length===1){var u=arguments[0];this.setLocation(Be.ON,u)}else if(arguments.length===2){var m=arguments[0],v=arguments[1];this.location[m]=v}},Gt.prototype.init=function(u){this.location=new Array(u).fill(null),this.setAllLocations(q.NONE)},Gt.prototype.isEqualOnSide=function(u,m){return this.location[m]===u.location[m]},Gt.prototype.allPositionsEqual=function(u){for(var m=0;m<this.location.length;m++)if(this.location[m]!==u)return!1;return!0},Gt.prototype.interfaces_=function(){return[]},Gt.prototype.getClass=function(){return Gt};var kt=function u(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var m=arguments[0];this.elt[0]=new Gt(m),this.elt[1]=new Gt(m)}else if(arguments[0]instanceof u){var v=arguments[0];this.elt[0]=new Gt(v.elt[0]),this.elt[1]=new Gt(v.elt[1])}}else if(arguments.length===2){var w=arguments[0],T=arguments[1];this.elt[0]=new Gt(q.NONE),this.elt[1]=new Gt(q.NONE),this.elt[w].setLocation(T)}else if(arguments.length===3){var H=arguments[0],G=arguments[1],K=arguments[2];this.elt[0]=new Gt(H,G,K),this.elt[1]=new Gt(H,G,K)}else if(arguments.length===4){var de=arguments[0],Le=arguments[1],He=arguments[2],ze=arguments[3];this.elt[0]=new Gt(q.NONE,q.NONE,q.NONE),this.elt[1]=new Gt(q.NONE,q.NONE,q.NONE),this.elt[de].setLocations(Le,He,ze)}};kt.prototype.getGeometryCount=function(){var u=0;return this.elt[0].isNull()||u++,this.elt[1].isNull()||u++,u},kt.prototype.setAllLocations=function(u,m){this.elt[u].setAllLocations(m)},kt.prototype.isNull=function(u){return this.elt[u].isNull()},kt.prototype.setAllLocationsIfNull=function(){if(arguments.length===1){var u=arguments[0];this.setAllLocationsIfNull(0,u),this.setAllLocationsIfNull(1,u)}else if(arguments.length===2){var m=arguments[0],v=arguments[1];this.elt[m].setAllLocationsIfNull(v)}},kt.prototype.isLine=function(u){return this.elt[u].isLine()},kt.prototype.merge=function(u){for(var m=0;m<2;m++)this.elt[m]===null&&u.elt[m]!==null?this.elt[m]=new Gt(u.elt[m]):this.elt[m].merge(u.elt[m])},kt.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},kt.prototype.getLocation=function(){if(arguments.length===1){var u=arguments[0];return this.elt[u].get(Be.ON)}if(arguments.length===2){var m=arguments[0],v=arguments[1];return this.elt[m].get(v)}},kt.prototype.toString=function(){var u=new ce;return this.elt[0]!==null&&(u.append("A:"),u.append(this.elt[0].toString())),this.elt[1]!==null&&(u.append(" B:"),u.append(this.elt[1].toString())),u.toString()},kt.prototype.isArea=function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var u=arguments[0];return this.elt[u].isArea()}},kt.prototype.isAnyNull=function(u){return this.elt[u].isAnyNull()},kt.prototype.setLocation=function(){if(arguments.length===2){var u=arguments[0],m=arguments[1];this.elt[u].setLocation(Be.ON,m)}else if(arguments.length===3){var v=arguments[0],w=arguments[1],T=arguments[2];this.elt[v].setLocation(w,T)}},kt.prototype.isEqualOnSide=function(u,m){return this.elt[0].isEqualOnSide(u.elt[0],m)&&this.elt[1].isEqualOnSide(u.elt[1],m)},kt.prototype.allPositionsEqual=function(u,m){return this.elt[u].allPositionsEqual(m)},kt.prototype.toLine=function(u){this.elt[u].isArea()&&(this.elt[u]=new Gt(this.elt[u].location[0]))},kt.prototype.interfaces_=function(){return[]},kt.prototype.getClass=function(){return kt},kt.toLineLabel=function(u){for(var m=new kt(q.NONE),v=0;v<2;v++)m.setLocation(v,u.getLocation(v));return m};var Xt=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new Xe,this._pts=new Xe,this._label=new kt(q.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Xe,this._geometryFactory=null;var u=arguments[0],m=arguments[1];this._geometryFactory=m,this.computePoints(u),this.computeRing()};Xt.prototype.computeRing=function(){if(this._ring!==null)return null;for(var u=new Array(this._pts.size()).fill(null),m=0;m<this._pts.size();m++)u[m]=this._pts.get(m);this._ring=this._geometryFactory.createLinearRing(u),this._isHole=Me.isCCW(this._ring.getCoordinates())},Xt.prototype.isIsolated=function(){return this._label.getGeometryCount()===1},Xt.prototype.computePoints=function(u){this._startDe=u;var m=u,v=!0;do{if(m===null)throw new d0("Found null DirectedEdge");if(m.getEdgeRing()===this)throw new d0("Directed Edge visited twice during ring-building at "+m.getCoordinate());this._edges.add(m);var w=m.getLabel();U.isTrue(w.isArea()),this.mergeLabel(w),this.addPoints(m.getEdge(),m.isForward(),v),v=!1,this.setEdgeRing(m,this),m=this.getNext(m)}while(m!==this._startDe)},Xt.prototype.getLinearRing=function(){return this._ring},Xt.prototype.getCoordinate=function(u){return this._pts.get(u)},Xt.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var u=this._startDe;do{var m=u.getNode().getEdges().getOutgoingDegree(this);m>this._maxNodeDegree&&(this._maxNodeDegree=m),u=this.getNext(u)}while(u!==this._startDe);this._maxNodeDegree*=2},Xt.prototype.addPoints=function(u,m,v){var w=u.getCoordinates();if(m){var T=1;v&&(T=0);for(var H=T;H<w.length;H++)this._pts.add(w[H])}else{var G=w.length-2;v&&(G=w.length-1);for(var K=G;K>=0;K--)this._pts.add(w[K])}},Xt.prototype.isHole=function(){return this._isHole},Xt.prototype.setInResult=function(){var u=this._startDe;do u.getEdge().setInResult(!0),u=u.getNext();while(u!==this._startDe)},Xt.prototype.containsPoint=function(u){var m=this.getLinearRing();if(!m.getEnvelopeInternal().contains(u)||!Me.isPointInRing(u,m.getCoordinates()))return!1;for(var v=this._holes.iterator();v.hasNext();)if(v.next().containsPoint(u))return!1;return!0},Xt.prototype.addHole=function(u){this._holes.add(u)},Xt.prototype.isShell=function(){return this._shell===null},Xt.prototype.getLabel=function(){return this._label},Xt.prototype.getEdges=function(){return this._edges},Xt.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Xt.prototype.getShell=function(){return this._shell},Xt.prototype.mergeLabel=function(){if(arguments.length===1){var u=arguments[0];this.mergeLabel(u,0),this.mergeLabel(u,1)}else if(arguments.length===2){var m=arguments[0],v=arguments[1],w=m.getLocation(v,Be.RIGHT);if(w===q.NONE)return null;if(this._label.getLocation(v)===q.NONE)return this._label.setLocation(v,w),null}},Xt.prototype.setShell=function(u){this._shell=u,u!==null&&u.addHole(this)},Xt.prototype.toPolygon=function(u){for(var m=new Array(this._holes.size()).fill(null),v=0;v<this._holes.size();v++)m[v]=this._holes.get(v).getLinearRing();return u.createPolygon(this.getLinearRing(),m)},Xt.prototype.interfaces_=function(){return[]},Xt.prototype.getClass=function(){return Xt};var Ka=function(u){function m(){var v=arguments[0],w=arguments[1];u.call(this,v,w)}return u&&(m.__proto__=u),m.prototype=Object.create(u&&u.prototype),m.prototype.constructor=m,m.prototype.setEdgeRing=function(v,w){v.setMinEdgeRing(w)},m.prototype.getNext=function(v){return v.getNextMin()},m.prototype.interfaces_=function(){return[]},m.prototype.getClass=function(){return m},m}(Xt),es=function(u){function m(){var v=arguments[0],w=arguments[1];u.call(this,v,w)}return u&&(m.__proto__=u),m.prototype=Object.create(u&&u.prototype),m.prototype.constructor=m,m.prototype.buildMinimalRings=function(){var v=new Xe,w=this._startDe;do{if(w.getMinEdgeRing()===null){var T=new Ka(w,this._geometryFactory);v.add(T)}w=w.getNext()}while(w!==this._startDe);return v},m.prototype.setEdgeRing=function(v,w){v.setEdgeRing(w)},m.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var v=this._startDe;do v.getNode().getEdges().linkMinimalDirectedEdges(this),v=v.getNext();while(v!==this._startDe)},m.prototype.getNext=function(v){return v.getNext()},m.prototype.interfaces_=function(){return[]},m.prototype.getClass=function(){return m},m}(Xt),Ni=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var u=arguments[0];this._label=u}}};Ni.prototype.setVisited=function(u){this._isVisited=u},Ni.prototype.setInResult=function(u){this._isInResult=u},Ni.prototype.isCovered=function(){return this._isCovered},Ni.prototype.isCoveredSet=function(){return this._isCoveredSet},Ni.prototype.setLabel=function(u){this._label=u},Ni.prototype.getLabel=function(){return this._label},Ni.prototype.setCovered=function(u){this._isCovered=u,this._isCoveredSet=!0},Ni.prototype.updateIM=function(u){U.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(u)},Ni.prototype.isInResult=function(){return this._isInResult},Ni.prototype.isVisited=function(){return this._isVisited},Ni.prototype.interfaces_=function(){return[]},Ni.prototype.getClass=function(){return Ni};var Ma=function(u){function m(){u.call(this),this._coord=null,this._edges=null;var v=arguments[0],w=arguments[1];this._coord=v,this._edges=w,this._label=new kt(0,q.NONE)}return u&&(m.__proto__=u),m.prototype=Object.create(u&&u.prototype),m.prototype.constructor=m,m.prototype.isIncidentEdgeInResult=function(){for(var v=this.getEdges().getEdges().iterator();v.hasNext();)if(v.next().getEdge().isInResult())return!0;return!1},m.prototype.isIsolated=function(){return this._label.getGeometryCount()===1},m.prototype.getCoordinate=function(){return this._coord},m.prototype.print=function(v){v.println("node "+this._coord+" lbl: "+this._label)},m.prototype.computeIM=function(v){},m.prototype.computeMergedLocation=function(v,w){var T=q.NONE;if(T=this._label.getLocation(w),!v.isNull(w)){var H=v.getLocation(w);T!==q.BOUNDARY&&(T=H)}return T},m.prototype.setLabel=function(){if(arguments.length!==2)return u.prototype.setLabel.apply(this,arguments);var v=arguments[0],w=arguments[1];this._label===null?this._label=new kt(v,w):this._label.setLocation(v,w)},m.prototype.getEdges=function(){return this._edges},m.prototype.mergeLabel=function(){if(arguments[0]instanceof m){var v=arguments[0];this.mergeLabel(v._label)}else if(arguments[0]instanceof kt)for(var w=arguments[0],T=0;T<2;T++){var H=this.computeMergedLocation(w,T);this._label.getLocation(T)===q.NONE&&this._label.setLocation(T,H)}},m.prototype.add=function(v){this._edges.insert(v),v.setNode(this)},m.prototype.setLabelBoundary=function(v){if(this._label===null)return null;var w=q.NONE;this._label!==null&&(w=this._label.getLocation(v));var T=null;switch(w){case q.BOUNDARY:T=q.INTERIOR;break;case q.INTERIOR:default:T=q.BOUNDARY}this._label.setLocation(v,T)},m.prototype.interfaces_=function(){return[]},m.prototype.getClass=function(){return m},m}(Ni),t0=function(){this.nodeMap=new b,this.nodeFact=null;var u=arguments[0];this.nodeFact=u};t0.prototype.find=function(u){return this.nodeMap.get(u)},t0.prototype.addNode=function(){if(arguments[0]instanceof F){var u=arguments[0],m=this.nodeMap.get(u);return m===null&&(m=this.nodeFact.createNode(u),this.nodeMap.put(u,m)),m}if(arguments[0]instanceof Ma){var v=arguments[0],w=this.nodeMap.get(v.getCoordinate());return w===null?(this.nodeMap.put(v.getCoordinate(),v),v):(w.mergeLabel(v),w)}},t0.prototype.print=function(u){for(var m=this.iterator();m.hasNext();)m.next().print(u)},t0.prototype.iterator=function(){return this.nodeMap.values().iterator()},t0.prototype.values=function(){return this.nodeMap.values()},t0.prototype.getBoundaryNodes=function(u){for(var m=new Xe,v=this.iterator();v.hasNext();){var w=v.next();w.getLabel().getLocation(u)===q.BOUNDARY&&m.add(w)}return m},t0.prototype.add=function(u){var m=u.getCoordinate();this.addNode(m).add(u)},t0.prototype.interfaces_=function(){return[]},t0.prototype.getClass=function(){return t0};var $t=function(){},ha={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};$t.prototype.interfaces_=function(){return[]},$t.prototype.getClass=function(){return $t},$t.isNorthern=function(u){return u===$t.NE||u===$t.NW},$t.isOpposite=function(u,m){return u===m?!1:(u-m+4)%4===2},$t.commonHalfPlane=function(u,m){if(u===m)return u;if((u-m+4)%4===2)return-1;var v=u<m?u:m;return v===0&&(u>m?u:m)===3?3:v},$t.isInHalfPlane=function(u,m){return m===$t.SE?u===$t.SE||u===$t.SW:u===m||u===m+1},$t.quadrant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var u=arguments[0],m=arguments[1];if(u===0&&m===0)throw new D("Cannot compute the quadrant for point ( "+u+", "+m+" )");return u>=0?m>=0?$t.NE:$t.SE:m>=0?$t.NW:$t.SW}if(arguments[0]instanceof F&&arguments[1]instanceof F){var v=arguments[0],w=arguments[1];if(w.x===v.x&&w.y===v.y)throw new D("Cannot compute the quadrant for two identical points "+v);return w.x>=v.x?w.y>=v.y?$t.NE:$t.SE:w.y>=v.y?$t.NW:$t.SW}},ha.NE.get=function(){return 0},ha.NW.get=function(){return 1},ha.SW.get=function(){return 2},ha.SE.get=function(){return 3},Object.defineProperties($t,ha);var oi=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var u=arguments[0];this._edge=u}else if(arguments.length===3){var m=arguments[0],v=arguments[1],w=arguments[2];this._edge=m,this.init(v,w),this._label=null}else if(arguments.length===4){var T=arguments[0],H=arguments[1],G=arguments[2],K=arguments[3];this._edge=T,this.init(H,G),this._label=K}};oi.prototype.compareDirection=function(u){return this._dx===u._dx&&this._dy===u._dy?0:this._quadrant>u._quadrant?1:this._quadrant<u._quadrant?-1:Me.computeOrientation(u._p0,u._p1,this._p1)},oi.prototype.getDy=function(){return this._dy},oi.prototype.getCoordinate=function(){return this._p0},oi.prototype.setNode=function(u){this._node=u},oi.prototype.print=function(u){var m=Math.atan2(this._dy,this._dx),v=this.getClass().getName(),w=v.lastIndexOf("."),T=v.substring(w+1);u.print("  "+T+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+m+"   "+this._label)},oi.prototype.compareTo=function(u){var m=u;return this.compareDirection(m)},oi.prototype.getDirectedCoordinate=function(){return this._p1},oi.prototype.getDx=function(){return this._dx},oi.prototype.getLabel=function(){return this._label},oi.prototype.getEdge=function(){return this._edge},oi.prototype.getQuadrant=function(){return this._quadrant},oi.prototype.getNode=function(){return this._node},oi.prototype.toString=function(){var u=Math.atan2(this._dy,this._dx),m=this.getClass().getName(),v=m.lastIndexOf(".");return"  "+m.substring(v+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+u+"   "+this._label},oi.prototype.computeLabel=function(u){},oi.prototype.init=function(u,m){this._p0=u,this._p1=m,this._dx=m.x-u.x,this._dy=m.y-u.y,this._quadrant=$t.quadrant(this._dx,this._dy),U.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")},oi.prototype.interfaces_=function(){return[N]},oi.prototype.getClass=function(){return oi};var ka=function(u){function m(){var v=arguments[0],w=arguments[1];if(u.call(this,v),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=w,w)this.init(v.getCoordinate(0),v.getCoordinate(1));else{var T=v.getNumPoints()-1;this.init(v.getCoordinate(T),v.getCoordinate(T-1))}this.computeDirectedLabel()}return u&&(m.__proto__=u),m.prototype=Object.create(u&&u.prototype),m.prototype.constructor=m,m.prototype.getNextMin=function(){return this._nextMin},m.prototype.getDepth=function(v){return this._depth[v]},m.prototype.setVisited=function(v){this._isVisited=v},m.prototype.computeDirectedLabel=function(){this._label=new kt(this._edge.getLabel()),this._isForward||this._label.flip()},m.prototype.getNext=function(){return this._next},m.prototype.setDepth=function(v,w){if(this._depth[v]!==-999&&this._depth[v]!==w)throw new d0("assigned depths do not match",this.getCoordinate());this._depth[v]=w},m.prototype.isInteriorAreaEdge=function(){for(var v=!0,w=0;w<2;w++)this._label.isArea(w)&&this._label.getLocation(w,Be.LEFT)===q.INTERIOR&&this._label.getLocation(w,Be.RIGHT)===q.INTERIOR||(v=!1);return v},m.prototype.setNextMin=function(v){this._nextMin=v},m.prototype.print=function(v){u.prototype.print.call(this,v),v.print(" "+this._depth[Be.LEFT]+"/"+this._depth[Be.RIGHT]),v.print(" ("+this.getDepthDelta()+")"),this._isInResult&&v.print(" inResult")},m.prototype.setMinEdgeRing=function(v){this._minEdgeRing=v},m.prototype.isLineEdge=function(){var v=this._label.isLine(0)||this._label.isLine(1),w=!this._label.isArea(0)||this._label.allPositionsEqual(0,q.EXTERIOR),T=!this._label.isArea(1)||this._label.allPositionsEqual(1,q.EXTERIOR);return v&&w&&T},m.prototype.setEdgeRing=function(v){this._edgeRing=v},m.prototype.getMinEdgeRing=function(){return this._minEdgeRing},m.prototype.getDepthDelta=function(){var v=this._edge.getDepthDelta();return this._isForward||(v=-v),v},m.prototype.setInResult=function(v){this._isInResult=v},m.prototype.getSym=function(){return this._sym},m.prototype.isForward=function(){return this._isForward},m.prototype.getEdge=function(){return this._edge},m.prototype.printEdge=function(v){this.print(v),v.print(" "),this._isForward?this._edge.print(v):this._edge.printReverse(v)},m.prototype.setSym=function(v){this._sym=v},m.prototype.setVisitedEdge=function(v){this.setVisited(v),this._sym.setVisited(v)},m.prototype.setEdgeDepths=function(v,w){var T=this.getEdge().getDepthDelta();this._isForward||(T=-T);var H=1;v===Be.LEFT&&(H=-1);var G=Be.opposite(v),K=w+T*H;this.setDepth(v,w),this.setDepth(G,K)},m.prototype.getEdgeRing=function(){return this._edgeRing},m.prototype.isInResult=function(){return this._isInResult},m.prototype.setNext=function(v){this._next=v},m.prototype.isVisited=function(){return this._isVisited},m.prototype.interfaces_=function(){return[]},m.prototype.getClass=function(){return m},m.depthFactor=function(v,w){return v===q.EXTERIOR&&w===q.INTERIOR?1:v===q.INTERIOR&&w===q.EXTERIOR?-1:0},m}(oi),aa=function(){};aa.prototype.createNode=function(u){return new Ma(u,null)},aa.prototype.interfaces_=function(){return[]},aa.prototype.getClass=function(){return aa};var Jt=function(){if(this._edges=new Xe,this._nodes=null,this._edgeEndList=new Xe,arguments.length===0)this._nodes=new t0(new aa);else if(arguments.length===1){var u=arguments[0];this._nodes=new t0(u)}};Jt.prototype.printEdges=function(u){u.println("Edges:");for(var m=0;m<this._edges.size();m++){u.println("edge "+m+":");var v=this._edges.get(m);v.print(u),v.eiList.print(u)}},Jt.prototype.find=function(u){return this._nodes.find(u)},Jt.prototype.addNode=function(){if(arguments[0]instanceof Ma){var u=arguments[0];return this._nodes.addNode(u)}if(arguments[0]instanceof F){var m=arguments[0];return this._nodes.addNode(m)}},Jt.prototype.getNodeIterator=function(){return this._nodes.iterator()},Jt.prototype.linkResultDirectedEdges=function(){for(var u=this._nodes.iterator();u.hasNext();)u.next().getEdges().linkResultDirectedEdges()},Jt.prototype.debugPrintln=function(u){ye.out.println(u)},Jt.prototype.isBoundaryNode=function(u,m){var v=this._nodes.find(m);if(v===null)return!1;var w=v.getLabel();return w!==null&&w.getLocation(u)===q.BOUNDARY},Jt.prototype.linkAllDirectedEdges=function(){for(var u=this._nodes.iterator();u.hasNext();)u.next().getEdges().linkAllDirectedEdges()},Jt.prototype.matchInSameDirection=function(u,m,v,w){return!!u.equals(v)&&Me.computeOrientation(u,m,w)===Me.COLLINEAR&&$t.quadrant(u,m)===$t.quadrant(v,w)},Jt.prototype.getEdgeEnds=function(){return this._edgeEndList},Jt.prototype.debugPrint=function(u){ye.out.print(u)},Jt.prototype.getEdgeIterator=function(){return this._edges.iterator()},Jt.prototype.findEdgeInSameDirection=function(u,m){for(var v=0;v<this._edges.size();v++){var w=this._edges.get(v),T=w.getCoordinates();if(this.matchInSameDirection(u,m,T[0],T[1])||this.matchInSameDirection(u,m,T[T.length-1],T[T.length-2]))return w}return null},Jt.prototype.insertEdge=function(u){this._edges.add(u)},Jt.prototype.findEdgeEnd=function(u){for(var m=this.getEdgeEnds().iterator();m.hasNext();){var v=m.next();if(v.getEdge()===u)return v}return null},Jt.prototype.addEdges=function(u){for(var m=u.iterator();m.hasNext();){var v=m.next();this._edges.add(v);var w=new ka(v,!0),T=new ka(v,!1);w.setSym(T),T.setSym(w),this.add(w),this.add(T)}},Jt.prototype.add=function(u){this._nodes.add(u),this._edgeEndList.add(u)},Jt.prototype.getNodes=function(){return this._nodes.values()},Jt.prototype.findEdge=function(u,m){for(var v=0;v<this._edges.size();v++){var w=this._edges.get(v),T=w.getCoordinates();if(u.equals(T[0])&&m.equals(T[1]))return w}return null},Jt.prototype.interfaces_=function(){return[]},Jt.prototype.getClass=function(){return Jt},Jt.linkResultDirectedEdges=function(u){for(var m=u.iterator();m.hasNext();)m.next().getEdges().linkResultDirectedEdges()};var Si=function(){this._geometryFactory=null,this._shellList=new Xe;var u=arguments[0];this._geometryFactory=u};Si.prototype.sortShellsAndHoles=function(u,m,v){for(var w=u.iterator();w.hasNext();){var T=w.next();T.isHole()?v.add(T):m.add(T)}},Si.prototype.computePolygons=function(u){for(var m=new Xe,v=u.iterator();v.hasNext();){var w=v.next().toPolygon(this._geometryFactory);m.add(w)}return m},Si.prototype.placeFreeHoles=function(u,m){for(var v=m.iterator();v.hasNext();){var w=v.next();if(w.getShell()===null){var T=this.findEdgeRingContaining(w,u);if(T===null)throw new d0("unable to assign hole to a shell",w.getCoordinate(0));w.setShell(T)}}},Si.prototype.buildMinimalEdgeRings=function(u,m,v){for(var w=new Xe,T=u.iterator();T.hasNext();){var H=T.next();if(H.getMaxNodeDegree()>2){H.linkDirectedEdgesForMinimalEdgeRings();var G=H.buildMinimalRings(),K=this.findShell(G);K!==null?(this.placePolygonHoles(K,G),m.add(K)):v.addAll(G)}else w.add(H)}return w},Si.prototype.containsPoint=function(u){for(var m=this._shellList.iterator();m.hasNext();)if(m.next().containsPoint(u))return!0;return!1},Si.prototype.buildMaximalEdgeRings=function(u){for(var m=new Xe,v=u.iterator();v.hasNext();){var w=v.next();if(w.isInResult()&&w.getLabel().isArea()&&w.getEdgeRing()===null){var T=new es(w,this._geometryFactory);m.add(T),T.setInResult()}}return m},Si.prototype.placePolygonHoles=function(u,m){for(var v=m.iterator();v.hasNext();){var w=v.next();w.isHole()&&w.setShell(u)}},Si.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Si.prototype.findEdgeRingContaining=function(u,m){for(var v=u.getLinearRing(),w=v.getEnvelopeInternal(),T=v.getCoordinateN(0),H=null,G=null,K=m.iterator();K.hasNext();){var de=K.next(),Le=de.getLinearRing(),He=Le.getEnvelopeInternal();H!==null&&(G=H.getLinearRing().getEnvelopeInternal());var ze=!1;He.contains(w)&&Me.isPointInRing(T,Le.getCoordinates())&&(ze=!0),ze&&(H===null||G.contains(He))&&(H=de)}return H},Si.prototype.findShell=function(u){for(var m=0,v=null,w=u.iterator();w.hasNext();){var T=w.next();T.isHole()||(v=T,m++)}return U.isTrue(m<=1,"found two shells in MinimalEdgeRing list"),v},Si.prototype.add=function(){if(arguments.length===1){var u=arguments[0];this.add(u.getEdgeEnds(),u.getNodes())}else if(arguments.length===2){var m=arguments[0],v=arguments[1];Jt.linkResultDirectedEdges(v);var w=this.buildMaximalEdgeRings(m),T=new Xe,H=this.buildMinimalEdgeRings(w,this._shellList,T);this.sortShellsAndHoles(H,this._shellList,T),this.placeFreeHoles(this._shellList,T)}},Si.prototype.interfaces_=function(){return[]},Si.prototype.getClass=function(){return Si};var F0=function(){};F0.prototype.getBounds=function(){},F0.prototype.interfaces_=function(){return[]},F0.prototype.getClass=function(){return F0};var zi=function(){this._bounds=null,this._item=null;var u=arguments[0],m=arguments[1];this._bounds=u,this._item=m};zi.prototype.getItem=function(){return this._item},zi.prototype.getBounds=function(){return this._bounds},zi.prototype.interfaces_=function(){return[F0,i]},zi.prototype.getClass=function(){return zi};var f0=function(){this._size=null,this._items=null,this._size=0,this._items=new Xe,this._items.add(null)};f0.prototype.poll=function(){if(this.isEmpty())return null;var u=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),u},f0.prototype.size=function(){return this._size},f0.prototype.reorder=function(u){for(var m=null,v=this._items.get(u);2*u<=this._size&&((m=2*u)!==this._size&&this._items.get(m+1).compareTo(this._items.get(m))<0&&m++,this._items.get(m).compareTo(v)<0);u=m)this._items.set(u,this._items.get(m));this._items.set(u,v)},f0.prototype.clear=function(){this._size=0,this._items.clear()},f0.prototype.isEmpty=function(){return this._size===0},f0.prototype.add=function(u){this._items.add(null),this._size+=1;var m=this._size;for(this._items.set(0,u);u.compareTo(this._items.get(Math.trunc(m/2)))<0;m/=2)this._items.set(m,this._items.get(Math.trunc(m/2)));this._items.set(m,u)},f0.prototype.interfaces_=function(){return[]},f0.prototype.getClass=function(){return f0};var P0=function(){};P0.prototype.visitItem=function(u){},P0.prototype.interfaces_=function(){return[]},P0.prototype.getClass=function(){return P0};var H0=function(){};H0.prototype.insert=function(u,m){},H0.prototype.remove=function(u,m){},H0.prototype.query=function(){},H0.prototype.interfaces_=function(){return[]},H0.prototype.getClass=function(){return H0};var ti=function(){if(this._childBoundables=new Xe,this._bounds=null,this._level=null,arguments.length!==0){if(arguments.length===1){var u=arguments[0];this._level=u}}},qa={serialVersionUID:{configurable:!0}};ti.prototype.getLevel=function(){return this._level},ti.prototype.size=function(){return this._childBoundables.size()},ti.prototype.getChildBoundables=function(){return this._childBoundables},ti.prototype.addChildBoundable=function(u){U.isTrue(this._bounds===null),this._childBoundables.add(u)},ti.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},ti.prototype.getBounds=function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds},ti.prototype.interfaces_=function(){return[F0,i]},ti.prototype.getClass=function(){return ti},qa.serialVersionUID.get=function(){return 6493722185909574e3},Object.defineProperties(ti,qa);var Xi=function(){};Xi.reverseOrder=function(){return{compare:function(u,m){return m.compareTo(u)}}},Xi.min=function(u){return Xi.sort(u),u.get(0)},Xi.sort=function(u,m){var v=u.toArray();m?Ct.sort(v,m):Ct.sort(v);for(var w=u.iterator(),T=0,H=v.length;T<H;T++)w.next(),w.set(v[T])},Xi.singletonList=function(u){var m=new Xe;return m.add(u),m};var Qt=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var u=arguments[0],m=arguments[1],v=arguments[2];this._boundable1=u,this._boundable2=m,this._itemDistance=v,this._distance=this.distance()};Qt.prototype.expandToQueue=function(u,m){var v=Qt.isComposite(this._boundable1),w=Qt.isComposite(this._boundable2);if(v&&w)return Qt.area(this._boundable1)>Qt.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,u,m),null):(this.expand(this._boundable2,this._boundable1,u,m),null);if(v)return this.expand(this._boundable1,this._boundable2,u,m),null;if(w)return this.expand(this._boundable2,this._boundable1,u,m),null;throw new D("neither boundable is composite")},Qt.prototype.isLeaves=function(){return!(Qt.isComposite(this._boundable1)||Qt.isComposite(this._boundable2))},Qt.prototype.compareTo=function(u){var m=u;return this._distance<m._distance?-1:this._distance>m._distance?1:0},Qt.prototype.expand=function(u,m,v,w){for(var T=u.getChildBoundables().iterator();T.hasNext();){var H=T.next(),G=new Qt(H,m,this._itemDistance);G.getDistance()<w&&v.add(G)}},Qt.prototype.getBoundable=function(u){return u===0?this._boundable1:this._boundable2},Qt.prototype.getDistance=function(){return this._distance},Qt.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},Qt.prototype.interfaces_=function(){return[N]},Qt.prototype.getClass=function(){return Qt},Qt.area=function(u){return u.getBounds().getArea()},Qt.isComposite=function(u){return u instanceof ti};var ni=function u(){if(this._root=null,this._built=!1,this._itemBoundables=new Xe,this._nodeCapacity=null,arguments.length===0){var m=u.DEFAULT_NODE_CAPACITY;this._nodeCapacity=m}else if(arguments.length===1){var v=arguments[0];U.isTrue(v>1,"Node capacity must be greater than 1"),this._nodeCapacity=v}},Ta={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};ni.prototype.getNodeCapacity=function(){return this._nodeCapacity},ni.prototype.lastNode=function(u){return u.get(u.size()-1)},ni.prototype.size=function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var u=0,m=arguments[0].getChildBoundables().iterator();m.hasNext();){var v=m.next();v instanceof ti?u+=this.size(v):v instanceof zi&&(u+=1)}return u}},ni.prototype.removeItem=function(u,m){for(var v=null,w=u.getChildBoundables().iterator();w.hasNext();){var T=w.next();T instanceof zi&&T.getItem()===m&&(v=T)}return v!==null&&(u.getChildBoundables().remove(v),!0)},ni.prototype.itemsTree=function(){if(arguments.length===0){this.build();var u=this.itemsTree(this._root);return u===null?new Xe:u}if(arguments.length===1){for(var m=arguments[0],v=new Xe,w=m.getChildBoundables().iterator();w.hasNext();){var T=w.next();if(T instanceof ti){var H=this.itemsTree(T);H!==null&&v.add(H)}else T instanceof zi?v.add(T.getItem()):U.shouldNeverReachHere()}return v.size()<=0?null:v}},ni.prototype.insert=function(u,m){U.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new zi(u,m))},ni.prototype.boundablesAtLevel=function(){if(arguments.length===1){var u=arguments[0],m=new Xe;return this.boundablesAtLevel(u,this._root,m),m}if(arguments.length===3){var v=arguments[0],w=arguments[1],T=arguments[2];if(U.isTrue(v>-2),w.getLevel()===v)return T.add(w),null;for(var H=w.getChildBoundables().iterator();H.hasNext();){var G=H.next();G instanceof ti?this.boundablesAtLevel(v,G,T):(U.isTrue(G instanceof zi),v===-1&&T.add(G))}return null}},ni.prototype.query=function(){if(arguments.length===1){var u=arguments[0];this.build();var m=new Xe;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),u)&&this.query(u,this._root,m),m}if(arguments.length===2){var v=arguments[0],w=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),v)&&this.query(v,this._root,w)}else if(arguments.length===3){if(j(arguments[2],P0)&&arguments[0]instanceof Object&&arguments[1]instanceof ti)for(var T=arguments[0],H=arguments[1],G=arguments[2],K=H.getChildBoundables(),de=0;de<K.size();de++){var Le=K.get(de);this.getIntersectsOp().intersects(Le.getBounds(),T)&&(Le instanceof ti?this.query(T,Le,G):Le instanceof zi?G.visitItem(Le.getItem()):U.shouldNeverReachHere())}else if(j(arguments[2],Kt)&&arguments[0]instanceof Object&&arguments[1]instanceof ti)for(var He=arguments[0],ze=arguments[1],it=arguments[2],at=ze.getChildBoundables(),_t=0;_t<at.size();_t++){var vt=at.get(_t);this.getIntersectsOp().intersects(vt.getBounds(),He)&&(vt instanceof ti?this.query(He,vt,it):vt instanceof zi?it.add(vt.getItem()):U.shouldNeverReachHere())}}},ni.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},ni.prototype.getRoot=function(){return this.build(),this._root},ni.prototype.remove=function(){if(arguments.length===2){var u=arguments[0],m=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),u)&&this.remove(u,this._root,m)}if(arguments.length===3){var v=arguments[0],w=arguments[1],T=arguments[2],H=this.removeItem(w,T);if(H)return!0;for(var G=null,K=w.getChildBoundables().iterator();K.hasNext();){var de=K.next();if(this.getIntersectsOp().intersects(de.getBounds(),v)&&de instanceof ti&&(H=this.remove(v,de,T))){G=de;break}}return G!==null&&G.getChildBoundables().isEmpty()&&w.getChildBoundables().remove(G),H}},ni.prototype.createHigherLevels=function(u,m){U.isTrue(!u.isEmpty());var v=this.createParentBoundables(u,m+1);return v.size()===1?v.get(0):this.createHigherLevels(v,m+1)},ni.prototype.depth=function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var u=0,m=arguments[0].getChildBoundables().iterator();m.hasNext();){var v=m.next();if(v instanceof ti){var w=this.depth(v);w>u&&(u=w)}}return u+1}},ni.prototype.createParentBoundables=function(u,m){U.isTrue(!u.isEmpty());var v=new Xe;v.add(this.createNode(m));var w=new Xe(u);Xi.sort(w,this.getComparator());for(var T=w.iterator();T.hasNext();){var H=T.next();this.lastNode(v).getChildBoundables().size()===this.getNodeCapacity()&&v.add(this.createNode(m)),this.lastNode(v).addChildBoundable(H)}return v},ni.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},ni.prototype.interfaces_=function(){return[i]},ni.prototype.getClass=function(){return ni},ni.compareDoubles=function(u,m){return u>m?1:u<m?-1:0},Ta.IntersectsOp.get=function(){return ts},Ta.serialVersionUID.get=function(){return-3886435814360241e3},Ta.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(ni,Ta);var ts=function(){},sa=function(){};sa.prototype.distance=function(u,m){},sa.prototype.interfaces_=function(){return[]},sa.prototype.getClass=function(){return sa};var ja=function(u){function m(w){w=w||m.DEFAULT_NODE_CAPACITY,u.call(this,w)}u&&(m.__proto__=u),(m.prototype=Object.create(u&&u.prototype)).constructor=m;var v={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return m.prototype.createParentBoundablesFromVerticalSlices=function(w,T){U.isTrue(w.length>0);for(var H=new Xe,G=0;G<w.length;G++)H.addAll(this.createParentBoundablesFromVerticalSlice(w[G],T));return H},m.prototype.createNode=function(w){return new Va(w)},m.prototype.size=function(){return arguments.length===0?u.prototype.size.call(this):u.prototype.size.apply(this,arguments)},m.prototype.insert=function(){if(arguments.length!==2)return u.prototype.insert.apply(this,arguments);var w=arguments[0],T=arguments[1];if(w.isNull())return null;u.prototype.insert.call(this,w,T)},m.prototype.getIntersectsOp=function(){return m.intersectsOp},m.prototype.verticalSlices=function(w,T){for(var H=Math.trunc(Math.ceil(w.size()/T)),G=new Array(T).fill(null),K=w.iterator(),de=0;de<T;de++){G[de]=new Xe;for(var Le=0;K.hasNext()&&Le<H;){var He=K.next();G[de].add(He),Le++}}return G},m.prototype.query=function(){if(arguments.length===1){var w=arguments[0];return u.prototype.query.call(this,w)}if(arguments.length===2){var T=arguments[0],H=arguments[1];u.prototype.query.call(this,T,H)}else if(arguments.length===3){if(j(arguments[2],P0)&&arguments[0]instanceof Object&&arguments[1]instanceof ti){var G=arguments[0],K=arguments[1],de=arguments[2];u.prototype.query.call(this,G,K,de)}else if(j(arguments[2],Kt)&&arguments[0]instanceof Object&&arguments[1]instanceof ti){var Le=arguments[0],He=arguments[1],ze=arguments[2];u.prototype.query.call(this,Le,He,ze)}}},m.prototype.getComparator=function(){return m.yComparator},m.prototype.createParentBoundablesFromVerticalSlice=function(w,T){return u.prototype.createParentBoundables.call(this,w,T)},m.prototype.remove=function(){if(arguments.length===2){var w=arguments[0],T=arguments[1];return u.prototype.remove.call(this,w,T)}return u.prototype.remove.apply(this,arguments)},m.prototype.depth=function(){return arguments.length===0?u.prototype.depth.call(this):u.prototype.depth.apply(this,arguments)},m.prototype.createParentBoundables=function(w,T){U.isTrue(!w.isEmpty());var H=Math.trunc(Math.ceil(w.size()/this.getNodeCapacity())),G=new Xe(w);Xi.sort(G,m.xComparator);var K=this.verticalSlices(G,Math.trunc(Math.ceil(Math.sqrt(H))));return this.createParentBoundablesFromVerticalSlices(K,T)},m.prototype.nearestNeighbour=function(){if(arguments.length===1){if(j(arguments[0],sa)){var w=arguments[0],T=new Qt(this.getRoot(),this.getRoot(),w);return this.nearestNeighbour(T)}if(arguments[0]instanceof Qt){var H=arguments[0];return this.nearestNeighbour(H,R.POSITIVE_INFINITY)}}else if(arguments.length===2){if(arguments[0]instanceof m&&j(arguments[1],sa)){var G=arguments[0],K=arguments[1],de=new Qt(this.getRoot(),G.getRoot(),K);return this.nearestNeighbour(de)}if(arguments[0]instanceof Qt&&typeof arguments[1]=="number"){var Le=arguments[0],He=arguments[1],ze=null,it=new f0;for(it.add(Le);!it.isEmpty()&&He>0;){var at=it.poll(),_t=at.getDistance();if(_t>=He)break;at.isLeaves()?(He=_t,ze=at):at.expandToQueue(it,He)}return[ze.getBoundable(0).getItem(),ze.getBoundable(1).getItem()]}}else if(arguments.length===3){var vt=arguments[0],Ft=arguments[1],si=arguments[2],Di=new zi(vt,Ft),R0=new Qt(this.getRoot(),Di,si);return this.nearestNeighbour(R0)[0]}},m.prototype.interfaces_=function(){return[H0,i]},m.prototype.getClass=function(){return m},m.centreX=function(w){return m.avg(w.getMinX(),w.getMaxX())},m.avg=function(w,T){return(w+T)/2},m.centreY=function(w){return m.avg(w.getMinY(),w.getMaxY())},v.STRtreeNode.get=function(){return Va},v.serialVersionUID.get=function(){return 0x39920f7d5f261e0},v.xComparator.get=function(){return{interfaces_:function(){return[B]},compare:function(w,T){return u.compareDoubles(m.centreX(w.getBounds()),m.centreX(T.getBounds()))}}},v.yComparator.get=function(){return{interfaces_:function(){return[B]},compare:function(w,T){return u.compareDoubles(m.centreY(w.getBounds()),m.centreY(T.getBounds()))}}},v.intersectsOp.get=function(){return{interfaces_:function(){return[u.IntersectsOp]},intersects:function(w,T){return w.intersects(T)}}},v.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(m,v),m}(ni),Va=function(u){function m(){var v=arguments[0];u.call(this,v)}return u&&(m.__proto__=u),m.prototype=Object.create(u&&u.prototype),m.prototype.constructor=m,m.prototype.computeBounds=function(){for(var v=null,w=this.getChildBoundables().iterator();w.hasNext();){var T=w.next();v===null?v=new ae(T.getBounds()):v.expandToInclude(T.getBounds())}return v},m.prototype.interfaces_=function(){return[]},m.prototype.getClass=function(){return m},m}(ti),vi=function(){};vi.prototype.interfaces_=function(){return[]},vi.prototype.getClass=function(){return vi},vi.relativeSign=function(u,m){return u<m?-1:u>m?1:0},vi.compare=function(u,m,v){if(m.equals2D(v))return 0;var w=vi.relativeSign(m.x,v.x),T=vi.relativeSign(m.y,v.y);switch(u){case 0:return vi.compareValue(w,T);case 1:return vi.compareValue(T,w);case 2:return vi.compareValue(T,-w);case 3:return vi.compareValue(-w,T);case 4:return vi.compareValue(-w,-T);case 5:return vi.compareValue(-T,-w);case 6:return vi.compareValue(-T,w);case 7:return vi.compareValue(w,-T)}return U.shouldNeverReachHere("invalid octant value"),0},vi.compareValue=function(u,m){return u<0?-1:u>0?1:m<0?-1:m>0?1:0};var E0=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var u=arguments[0],m=arguments[1],v=arguments[2],w=arguments[3];this._segString=u,this.coord=new F(m),this.segmentIndex=v,this._segmentOctant=w,this._isInterior=!m.equals2D(u.getCoordinate(v))};E0.prototype.getCoordinate=function(){return this.coord},E0.prototype.print=function(u){u.print(this.coord),u.print(" seg # = "+this.segmentIndex)},E0.prototype.compareTo=function(u){var m=u;return this.segmentIndex<m.segmentIndex?-1:this.segmentIndex>m.segmentIndex?1:this.coord.equals2D(m.coord)?0:vi.compare(this._segmentOctant,this.coord,m.coord)},E0.prototype.isEndPoint=function(u){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===u},E0.prototype.isInterior=function(){return this._isInterior},E0.prototype.interfaces_=function(){return[N]},E0.prototype.getClass=function(){return E0};var ui=function(){this._nodeMap=new b,this._edge=null;var u=arguments[0];this._edge=u};ui.prototype.getSplitCoordinates=function(){var u=new Ui;this.addEndpoints();for(var m=this.iterator(),v=m.next();m.hasNext();){var w=m.next();this.addEdgeCoordinates(v,w,u),v=w}return u.toCoordinateArray()},ui.prototype.addCollapsedNodes=function(){var u=new Xe;this.findCollapsesFromInsertedNodes(u),this.findCollapsesFromExistingVertices(u);for(var m=u.iterator();m.hasNext();){var v=m.next().intValue();this.add(this._edge.getCoordinate(v),v)}},ui.prototype.print=function(u){u.println("Intersections:");for(var m=this.iterator();m.hasNext();)m.next().print(u)},ui.prototype.findCollapsesFromExistingVertices=function(u){for(var m=0;m<this._edge.size()-2;m++){var v=this._edge.getCoordinate(m),w=this._edge.getCoordinate(m+2);v.equals2D(w)&&u.add(new xe(m+1))}},ui.prototype.addEdgeCoordinates=function(u,m,v){var w=this._edge.getCoordinate(m.segmentIndex),T=m.isInterior()||!m.coord.equals2D(w);v.add(new F(u.coord),!1);for(var H=u.segmentIndex+1;H<=m.segmentIndex;H++)v.add(this._edge.getCoordinate(H));T&&v.add(new F(m.coord))},ui.prototype.iterator=function(){return this._nodeMap.values().iterator()},ui.prototype.addSplitEdges=function(u){this.addEndpoints(),this.addCollapsedNodes();for(var m=this.iterator(),v=m.next();m.hasNext();){var w=m.next(),T=this.createSplitEdge(v,w);u.add(T),v=w}},ui.prototype.findCollapseIndex=function(u,m,v){if(!u.coord.equals2D(m.coord))return!1;var w=m.segmentIndex-u.segmentIndex;return m.isInterior()||w--,w===1&&(v[0]=u.segmentIndex+1,!0)},ui.prototype.findCollapsesFromInsertedNodes=function(u){for(var m=new Array(1).fill(null),v=this.iterator(),w=v.next();v.hasNext();){var T=v.next();this.findCollapseIndex(w,T,m)&&u.add(new xe(m[0])),w=T}},ui.prototype.getEdge=function(){return this._edge},ui.prototype.addEndpoints=function(){var u=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(u),u)},ui.prototype.createSplitEdge=function(u,m){var v=m.segmentIndex-u.segmentIndex+2,w=this._edge.getCoordinate(m.segmentIndex),T=m.isInterior()||!m.coord.equals2D(w);T||v--;var H=new Array(v).fill(null),G=0;H[G++]=new F(u.coord);for(var K=u.segmentIndex+1;K<=m.segmentIndex;K++)H[G++]=this._edge.getCoordinate(K);return T&&(H[G]=new F(m.coord)),new Zt(H,this._edge.getData())},ui.prototype.add=function(u,m){var v=new E0(this._edge,u,m,this._edge.getSegmentOctant(m)),w=this._nodeMap.get(v);return w!==null?(U.isTrue(w.coord.equals2D(u),"Found equal nodes with different coordinates"),w):(this._nodeMap.put(v,v),v)},ui.prototype.checkSplitEdgesCorrectness=function(u){var m=this._edge.getCoordinates(),v=u.get(0).getCoordinate(0);if(!v.equals2D(m[0]))throw new ve("bad split edge start point at "+v);var w=u.get(u.size()-1).getCoordinates(),T=w[w.length-1];if(!T.equals2D(m[m.length-1]))throw new ve("bad split edge end point at "+T)},ui.prototype.interfaces_=function(){return[]},ui.prototype.getClass=function(){return ui};var B0=function(){};B0.prototype.interfaces_=function(){return[]},B0.prototype.getClass=function(){return B0},B0.octant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var u=arguments[0],m=arguments[1];if(u===0&&m===0)throw new D("Cannot compute the octant for point ( "+u+", "+m+" )");var v=Math.abs(u),w=Math.abs(m);return u>=0?m>=0?v>=w?0:1:v>=w?7:6:m>=0?v>=w?3:2:v>=w?4:5}if(arguments[0]instanceof F&&arguments[1]instanceof F){var T=arguments[0],H=arguments[1],G=H.x-T.x,K=H.y-T.y;if(G===0&&K===0)throw new D("Cannot compute the octant for two identical points "+T);return B0.octant(G,K)}};var n0=function(){};n0.prototype.getCoordinates=function(){},n0.prototype.size=function(){},n0.prototype.getCoordinate=function(u){},n0.prototype.isClosed=function(){},n0.prototype.setData=function(u){},n0.prototype.getData=function(){},n0.prototype.interfaces_=function(){return[]},n0.prototype.getClass=function(){return n0};var da=function(){};da.prototype.addIntersection=function(u,m){},da.prototype.interfaces_=function(){return[n0]},da.prototype.getClass=function(){return da};var Zt=function(){this._nodeList=new ui(this),this._pts=null,this._data=null;var u=arguments[0],m=arguments[1];this._pts=u,this._data=m};Zt.prototype.getCoordinates=function(){return this._pts},Zt.prototype.size=function(){return this._pts.length},Zt.prototype.getCoordinate=function(u){return this._pts[u]},Zt.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Zt.prototype.getSegmentOctant=function(u){return u===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(u),this.getCoordinate(u+1))},Zt.prototype.setData=function(u){this._data=u},Zt.prototype.safeOctant=function(u,m){return u.equals2D(m)?0:B0.octant(u,m)},Zt.prototype.getData=function(){return this._data},Zt.prototype.addIntersection=function(){if(arguments.length===2){var u=arguments[0],m=arguments[1];this.addIntersectionNode(u,m)}else if(arguments.length===4){var v=arguments[0],w=arguments[1],T=arguments[3],H=new F(v.getIntersection(T));this.addIntersection(H,w)}},Zt.prototype.toString=function(){return Je.toLineString(new be(this._pts))},Zt.prototype.getNodeList=function(){return this._nodeList},Zt.prototype.addIntersectionNode=function(u,m){var v=m,w=v+1;if(w<this._pts.length){var T=this._pts[w];u.equals2D(T)&&(v=w)}return this._nodeList.add(u,v)},Zt.prototype.addIntersections=function(u,m,v){for(var w=0;w<u.getIntersectionNum();w++)this.addIntersection(u,m,v,w)},Zt.prototype.interfaces_=function(){return[da]},Zt.prototype.getClass=function(){return Zt},Zt.getNodedSubstrings=function(){if(arguments.length===1){var u=arguments[0],m=new Xe;return Zt.getNodedSubstrings(u,m),m}if(arguments.length===2)for(var v=arguments[0],w=arguments[1],T=v.iterator();T.hasNext();)T.next().getNodeList().addSplitEdges(w)};var dt=function(){if(this.p0=null,this.p1=null,arguments.length===0)this.p0=new F,this.p1=new F;else if(arguments.length===1){var u=arguments[0];this.p0=new F(u.p0),this.p1=new F(u.p1)}else if(arguments.length===2)this.p0=arguments[0],this.p1=arguments[1];else if(arguments.length===4){var m=arguments[0],v=arguments[1],w=arguments[2],T=arguments[3];this.p0=new F(m,v),this.p1=new F(w,T)}},Ua={serialVersionUID:{configurable:!0}};dt.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},dt.prototype.orientationIndex=function(){if(arguments[0]instanceof dt){var u=arguments[0],m=Me.orientationIndex(this.p0,this.p1,u.p0),v=Me.orientationIndex(this.p0,this.p1,u.p1);return m>=0&&v>=0||m<=0&&v<=0?Math.max(m,v):0}if(arguments[0]instanceof F){var w=arguments[0];return Me.orientationIndex(this.p0,this.p1,w)}},dt.prototype.toGeometry=function(u){return u.createLineString([this.p0,this.p1])},dt.prototype.isVertical=function(){return this.p0.x===this.p1.x},dt.prototype.equals=function(u){if(!(u instanceof dt))return!1;var m=u;return this.p0.equals(m.p0)&&this.p1.equals(m.p1)},dt.prototype.intersection=function(u){var m=new _e;return m.computeIntersection(this.p0,this.p1,u.p0,u.p1),m.hasIntersection()?m.getIntersection(0):null},dt.prototype.project=function(){if(arguments[0]instanceof F){var u=arguments[0];if(u.equals(this.p0)||u.equals(this.p1))return new F(u);var m=this.projectionFactor(u),v=new F;return v.x=this.p0.x+m*(this.p1.x-this.p0.x),v.y=this.p0.y+m*(this.p1.y-this.p0.y),v}if(arguments[0]instanceof dt){var w=arguments[0],T=this.projectionFactor(w.p0),H=this.projectionFactor(w.p1);if(T>=1&&H>=1||T<=0&&H<=0)return null;var G=this.project(w.p0);T<0&&(G=this.p0),T>1&&(G=this.p1);var K=this.project(w.p1);return H<0&&(K=this.p0),H>1&&(K=this.p1),new dt(G,K)}},dt.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},dt.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},dt.prototype.getCoordinate=function(u){return u===0?this.p0:this.p1},dt.prototype.distancePerpendicular=function(u){return Me.distancePointLinePerpendicular(u,this.p0,this.p1)},dt.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},dt.prototype.midPoint=function(){return dt.midPoint(this.p0,this.p1)},dt.prototype.projectionFactor=function(u){if(u.equals(this.p0))return 0;if(u.equals(this.p1))return 1;var m=this.p1.x-this.p0.x,v=this.p1.y-this.p0.y,w=m*m+v*v;return w<=0?R.NaN:((u.x-this.p0.x)*m+(u.y-this.p0.y)*v)/w},dt.prototype.closestPoints=function(u){var m=this.intersection(u);if(m!==null)return[m,m];var v=new Array(2).fill(null),w=R.MAX_VALUE,T=null,H=this.closestPoint(u.p0);w=H.distance(u.p0),v[0]=H,v[1]=u.p0;var G=this.closestPoint(u.p1);(T=G.distance(u.p1))<w&&(w=T,v[0]=G,v[1]=u.p1);var K=u.closestPoint(this.p0);(T=K.distance(this.p0))<w&&(w=T,v[0]=this.p0,v[1]=K);var de=u.closestPoint(this.p1);return(T=de.distance(this.p1))<w&&(w=T,v[0]=this.p1,v[1]=de),v},dt.prototype.closestPoint=function(u){var m=this.projectionFactor(u);return m>0&&m<1?this.project(u):this.p0.distance(u)<this.p1.distance(u)?this.p0:this.p1},dt.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},dt.prototype.getLength=function(){return this.p0.distance(this.p1)},dt.prototype.compareTo=function(u){var m=u,v=this.p0.compareTo(m.p0);return v!==0?v:this.p1.compareTo(m.p1)},dt.prototype.reverse=function(){var u=this.p0;this.p0=this.p1,this.p1=u},dt.prototype.equalsTopo=function(u){return this.p0.equals(u.p0)&&(this.p1.equals(u.p1)||this.p0.equals(u.p1))&&this.p1.equals(u.p0)},dt.prototype.lineIntersection=function(u){try{return ge.intersection(this.p0,this.p1,u.p0,u.p1)}catch(m){if(!(m instanceof Te))throw m}return null},dt.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},dt.prototype.pointAlongOffset=function(u,m){var v=this.p0.x+u*(this.p1.x-this.p0.x),w=this.p0.y+u*(this.p1.y-this.p0.y),T=this.p1.x-this.p0.x,H=this.p1.y-this.p0.y,G=Math.sqrt(T*T+H*H),K=0,de=0;if(m!==0){if(G<=0)throw new Error("Cannot compute offset from zero-length line segment");K=m*T/G,de=m*H/G}return new F(v-de,w+K)},dt.prototype.setCoordinates=function(){if(arguments.length===1){var u=arguments[0];this.setCoordinates(u.p0,u.p1)}else if(arguments.length===2){var m=arguments[0],v=arguments[1];this.p0.x=m.x,this.p0.y=m.y,this.p1.x=v.x,this.p1.y=v.y}},dt.prototype.segmentFraction=function(u){var m=this.projectionFactor(u);return m<0?m=0:(m>1||R.isNaN(m))&&(m=1),m},dt.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},dt.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},dt.prototype.distance=function(){if(arguments[0]instanceof dt){var u=arguments[0];return Me.distanceLineLine(this.p0,this.p1,u.p0,u.p1)}if(arguments[0]instanceof F){var m=arguments[0];return Me.distancePointLine(m,this.p0,this.p1)}},dt.prototype.pointAlong=function(u){var m=new F;return m.x=this.p0.x+u*(this.p1.x-this.p0.x),m.y=this.p0.y+u*(this.p1.y-this.p0.y),m},dt.prototype.hashCode=function(){var u=R.doubleToLongBits(this.p0.x);u^=31*R.doubleToLongBits(this.p0.y);var m=Math.trunc(u)^Math.trunc(u>>32),v=R.doubleToLongBits(this.p1.x);return v^=31*R.doubleToLongBits(this.p1.y),m^(Math.trunc(v)^Math.trunc(v>>32))},dt.prototype.interfaces_=function(){return[N,i]},dt.prototype.getClass=function(){return dt},dt.midPoint=function(u,m){return new F((u.x+m.x)/2,(u.y+m.y)/2)},Ua.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(dt,Ua);var fa=function(){this.tempEnv1=new ae,this.tempEnv2=new ae,this._overlapSeg1=new dt,this._overlapSeg2=new dt};fa.prototype.overlap=function(){if(arguments.length!==2){if(arguments.length===4){var u=arguments[0],m=arguments[1],v=arguments[2],w=arguments[3];u.getLineSegment(m,this._overlapSeg1),v.getLineSegment(w,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}},fa.prototype.interfaces_=function(){return[]},fa.prototype.getClass=function(){return fa};var Mi=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var u=arguments[0],m=arguments[1],v=arguments[2],w=arguments[3];this._pts=u,this._start=m,this._end=v,this._context=w};Mi.prototype.getLineSegment=function(u,m){m.p0=this._pts[u],m.p1=this._pts[u+1]},Mi.prototype.computeSelect=function(u,m,v,w){var T=this._pts[m],H=this._pts[v];if(w.tempEnv1.init(T,H),v-m==1)return w.select(this,m),null;if(!u.intersects(w.tempEnv1))return null;var G=Math.trunc((m+v)/2);m<G&&this.computeSelect(u,m,G,w),G<v&&this.computeSelect(u,G,v,w)},Mi.prototype.getCoordinates=function(){for(var u=new Array(this._end-this._start+1).fill(null),m=0,v=this._start;v<=this._end;v++)u[m++]=this._pts[v];return u},Mi.prototype.computeOverlaps=function(u,m){this.computeOverlapsInternal(this._start,this._end,u,u._start,u._end,m)},Mi.prototype.setId=function(u){this._id=u},Mi.prototype.select=function(u,m){this.computeSelect(u,this._start,this._end,m)},Mi.prototype.getEnvelope=function(){if(this._env===null){var u=this._pts[this._start],m=this._pts[this._end];this._env=new ae(u,m)}return this._env},Mi.prototype.getEndIndex=function(){return this._end},Mi.prototype.getStartIndex=function(){return this._start},Mi.prototype.getContext=function(){return this._context},Mi.prototype.getId=function(){return this._id},Mi.prototype.computeOverlapsInternal=function(u,m,v,w,T,H){var G=this._pts[u],K=this._pts[m],de=v._pts[w],Le=v._pts[T];if(m-u==1&&T-w==1)return H.overlap(this,u,v,w),null;if(H.tempEnv1.init(G,K),H.tempEnv2.init(de,Le),!H.tempEnv1.intersects(H.tempEnv2))return null;var He=Math.trunc((u+m)/2),ze=Math.trunc((w+T)/2);u<He&&(w<ze&&this.computeOverlapsInternal(u,He,v,w,ze,H),ze<T&&this.computeOverlapsInternal(u,He,v,ze,T,H)),He<m&&(w<ze&&this.computeOverlapsInternal(He,m,v,w,ze,H),ze<T&&this.computeOverlapsInternal(He,m,v,ze,T,H))},Mi.prototype.interfaces_=function(){return[]},Mi.prototype.getClass=function(){return Mi};var i0=function(){};i0.prototype.interfaces_=function(){return[]},i0.prototype.getClass=function(){return i0},i0.getChainStartIndices=function(u){var m=0,v=new Xe;v.add(new xe(m));do{var w=i0.findChainEnd(u,m);v.add(new xe(w)),m=w}while(m<u.length-1);return i0.toIntArray(v)},i0.findChainEnd=function(u,m){for(var v=m;v<u.length-1&&u[v].equals2D(u[v+1]);)v++;if(v>=u.length-1)return u.length-1;for(var w=$t.quadrant(u[v],u[v+1]),T=m+1;T<u.length&&!(!u[T-1].equals2D(u[T])&&$t.quadrant(u[T-1],u[T])!==w);)T++;return T-1},i0.getChains=function(){if(arguments.length===1){var u=arguments[0];return i0.getChains(u,null)}if(arguments.length===2){for(var m=arguments[0],v=arguments[1],w=new Xe,T=i0.getChainStartIndices(m),H=0;H<T.length-1;H++){var G=new Mi(m,T[H],T[H+1],v);w.add(G)}return w}},i0.toIntArray=function(u){for(var m=new Array(u.size()).fill(null),v=0;v<m.length;v++)m[v]=u.get(v).intValue();return m};var O0=function(){};O0.prototype.computeNodes=function(u){},O0.prototype.getNodedSubstrings=function(){},O0.prototype.interfaces_=function(){return[]},O0.prototype.getClass=function(){return O0};var pa=function(){if(this._segInt=null,arguments.length!==0){if(arguments.length===1){var u=arguments[0];this.setSegmentIntersector(u)}}};pa.prototype.setSegmentIntersector=function(u){this._segInt=u},pa.prototype.interfaces_=function(){return[O0]},pa.prototype.getClass=function(){return pa};var $a=function(u){function m(w){w?u.call(this,w):u.call(this),this._monoChains=new Xe,this._index=new ja,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}u&&(m.__proto__=u),(m.prototype=Object.create(u&&u.prototype)).constructor=m;var v={SegmentOverlapAction:{configurable:!0}};return m.prototype.getMonotoneChains=function(){return this._monoChains},m.prototype.getNodedSubstrings=function(){return Zt.getNodedSubstrings(this._nodedSegStrings)},m.prototype.getIndex=function(){return this._index},m.prototype.add=function(w){for(var T=i0.getChains(w.getCoordinates(),w).iterator();T.hasNext();){var H=T.next();H.setId(this._idCounter++),this._index.insert(H.getEnvelope(),H),this._monoChains.add(H)}},m.prototype.computeNodes=function(w){this._nodedSegStrings=w;for(var T=w.iterator();T.hasNext();)this.add(T.next());this.intersectChains()},m.prototype.intersectChains=function(){for(var w=new Ja(this._segInt),T=this._monoChains.iterator();T.hasNext();)for(var H=T.next(),G=this._index.query(H.getEnvelope()).iterator();G.hasNext();){var K=G.next();if(K.getId()>H.getId()&&(H.computeOverlaps(K,w),this._nOverlaps++),this._segInt.isDone())return null}},m.prototype.interfaces_=function(){return[]},m.prototype.getClass=function(){return m},v.SegmentOverlapAction.get=function(){return Ja},Object.defineProperties(m,v),m}(pa),Ja=function(u){function m(){u.call(this),this._si=null;var v=arguments[0];this._si=v}return u&&(m.__proto__=u),m.prototype=Object.create(u&&u.prototype),m.prototype.constructor=m,m.prototype.overlap=function(){if(arguments.length!==4)return u.prototype.overlap.apply(this,arguments);var v=arguments[0],w=arguments[1],T=arguments[2],H=arguments[3],G=v.getContext(),K=T.getContext();this._si.processIntersections(G,w,K,H)},m.prototype.interfaces_=function(){return[]},m.prototype.getClass=function(){return m},m}(fa),Ot=function u(){if(this._quadrantSegments=u.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=u.CAP_ROUND,this._joinStyle=u.JOIN_ROUND,this._mitreLimit=u.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=u.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var m=arguments[0];this.setQuadrantSegments(m)}else if(arguments.length===2){var v=arguments[0],w=arguments[1];this.setQuadrantSegments(v),this.setEndCapStyle(w)}else if(arguments.length===4){var T=arguments[0],H=arguments[1],G=arguments[2],K=arguments[3];this.setQuadrantSegments(T),this.setEndCapStyle(H),this.setJoinStyle(G),this.setMitreLimit(K)}}},m0={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Ot.prototype.getEndCapStyle=function(){return this._endCapStyle},Ot.prototype.isSingleSided=function(){return this._isSingleSided},Ot.prototype.setQuadrantSegments=function(u){this._quadrantSegments=u,this._quadrantSegments===0&&(this._joinStyle=Ot.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Ot.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),u<=0&&(this._quadrantSegments=1),this._joinStyle!==Ot.JOIN_ROUND&&(this._quadrantSegments=Ot.DEFAULT_QUADRANT_SEGMENTS)},Ot.prototype.getJoinStyle=function(){return this._joinStyle},Ot.prototype.setJoinStyle=function(u){this._joinStyle=u},Ot.prototype.setSimplifyFactor=function(u){this._simplifyFactor=u<0?0:u},Ot.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Ot.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Ot.prototype.setEndCapStyle=function(u){this._endCapStyle=u},Ot.prototype.getMitreLimit=function(){return this._mitreLimit},Ot.prototype.setMitreLimit=function(u){this._mitreLimit=u},Ot.prototype.setSingleSided=function(u){this._isSingleSided=u},Ot.prototype.interfaces_=function(){return[]},Ot.prototype.getClass=function(){return Ot},Ot.bufferDistanceError=function(u){var m=Math.PI/2/u;return 1-Math.cos(m/2)},m0.CAP_ROUND.get=function(){return 1},m0.CAP_FLAT.get=function(){return 2},m0.CAP_SQUARE.get=function(){return 3},m0.JOIN_ROUND.get=function(){return 1},m0.JOIN_MITRE.get=function(){return 2},m0.JOIN_BEVEL.get=function(){return 3},m0.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},m0.DEFAULT_MITRE_LIMIT.get=function(){return 5},m0.DEFAULT_SIMPLIFY_FACTOR.get=function(){return .01},Object.defineProperties(Ot,m0);var Wt=function(u){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Me.COUNTERCLOCKWISE,this._inputLine=u||null},ma={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Wt.prototype.isDeletable=function(u,m,v,w){var T=this._inputLine[u],H=this._inputLine[m],G=this._inputLine[v];return!!this.isConcave(T,H,G)&&!!this.isShallow(T,H,G,w)&&this.isShallowSampled(T,H,u,v,w)},Wt.prototype.deleteShallowConcavities=function(){for(var u=1,m=this.findNextNonDeletedIndex(u),v=this.findNextNonDeletedIndex(m),w=!1;v<this._inputLine.length;){var T=!1;this.isDeletable(u,m,v,this._distanceTol)&&(this._isDeleted[m]=Wt.DELETE,T=!0,w=!0),u=T?v:m,m=this.findNextNonDeletedIndex(u),v=this.findNextNonDeletedIndex(m)}return w},Wt.prototype.isShallowConcavity=function(u,m,v,w){return Me.computeOrientation(u,m,v)!==this._angleOrientation?!1:Me.distancePointLine(m,u,v)<w},Wt.prototype.isShallowSampled=function(u,m,v,w,T){var H=Math.trunc((w-v)/Wt.NUM_PTS_TO_CHECK);H<=0&&(H=1);for(var G=v;G<w;G+=H)if(!this.isShallow(u,m,this._inputLine[G],T))return!1;return!0},Wt.prototype.isConcave=function(u,m,v){var w=Me.computeOrientation(u,m,v)===this._angleOrientation;return w},Wt.prototype.simplify=function(u){this._distanceTol=Math.abs(u),u<0&&(this._angleOrientation=Me.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var m=!1;do m=this.deleteShallowConcavities();while(m);return this.collapseLine()},Wt.prototype.findNextNonDeletedIndex=function(u){for(var m=u+1;m<this._inputLine.length&&this._isDeleted[m]===Wt.DELETE;)m++;return m},Wt.prototype.isShallow=function(u,m,v,w){return Me.distancePointLine(m,u,v)<w},Wt.prototype.collapseLine=function(){for(var u=new Ui,m=0;m<this._inputLine.length;m++)this._isDeleted[m]!==Wt.DELETE&&u.add(this._inputLine[m]);return u.toCoordinateArray()},Wt.prototype.interfaces_=function(){return[]},Wt.prototype.getClass=function(){return Wt},Wt.simplify=function(u,m){return new Wt(u).simplify(m)},ma.INIT.get=function(){return 0},ma.DELETE.get=function(){return 1},ma.KEEP.get=function(){return 1},ma.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Wt,ma);var ki=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Xe},Wa={COORDINATE_ARRAY_TYPE:{configurable:!0}};ki.prototype.getCoordinates=function(){return this._ptList.toArray(ki.COORDINATE_ARRAY_TYPE)},ki.prototype.setPrecisionModel=function(u){this._precisionModel=u},ki.prototype.addPt=function(u){var m=new F(u);if(this._precisionModel.makePrecise(m),this.isRedundant(m))return null;this._ptList.add(m)},ki.prototype.revere=function(){},ki.prototype.addPts=function(u,m){if(m)for(var v=0;v<u.length;v++)this.addPt(u[v]);else for(var w=u.length-1;w>=0;w--)this.addPt(u[w])},ki.prototype.isRedundant=function(u){if(this._ptList.size()<1)return!1;var m=this._ptList.get(this._ptList.size()-1);return u.distance(m)<this._minimimVertexDistance},ki.prototype.toString=function(){return new tt().createLineString(this.getCoordinates()).toString()},ki.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var u=new F(this._ptList.get(0)),m=this._ptList.get(this._ptList.size()-1);if(u.equals(m))return null;this._ptList.add(u)},ki.prototype.setMinimumVertexDistance=function(u){this._minimimVertexDistance=u},ki.prototype.interfaces_=function(){return[]},ki.prototype.getClass=function(){return ki},Wa.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(ki,Wa);var Dt=function(){},G0={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Dt.prototype.interfaces_=function(){return[]},Dt.prototype.getClass=function(){return Dt},Dt.toDegrees=function(u){return 180*u/Math.PI},Dt.normalize=function(u){for(;u>Math.PI;)u-=Dt.PI_TIMES_2;for(;u<=-Math.PI;)u+=Dt.PI_TIMES_2;return u},Dt.angle=function(){if(arguments.length===1){var u=arguments[0];return Math.atan2(u.y,u.x)}if(arguments.length===2){var m=arguments[0],v=arguments[1],w=v.x-m.x,T=v.y-m.y;return Math.atan2(T,w)}},Dt.isAcute=function(u,m,v){var w=u.x-m.x,T=u.y-m.y;return w*(v.x-m.x)+T*(v.y-m.y)>0},Dt.isObtuse=function(u,m,v){var w=u.x-m.x,T=u.y-m.y;return w*(v.x-m.x)+T*(v.y-m.y)<0},Dt.interiorAngle=function(u,m,v){var w=Dt.angle(m,u),T=Dt.angle(m,v);return Math.abs(T-w)},Dt.normalizePositive=function(u){if(u<0){for(;u<0;)u+=Dt.PI_TIMES_2;u>=Dt.PI_TIMES_2&&(u=0)}else{for(;u>=Dt.PI_TIMES_2;)u-=Dt.PI_TIMES_2;u<0&&(u=0)}return u},Dt.angleBetween=function(u,m,v){var w=Dt.angle(m,u),T=Dt.angle(m,v);return Dt.diff(w,T)},Dt.diff=function(u,m){var v=null;return(v=u<m?m-u:u-m)>Math.PI&&(v=2*Math.PI-v),v},Dt.toRadians=function(u){return u*Math.PI/180},Dt.getTurn=function(u,m){var v=Math.sin(m-u);return v>0?Dt.COUNTERCLOCKWISE:v<0?Dt.CLOCKWISE:Dt.NONE},Dt.angleBetweenOriented=function(u,m,v){var w=Dt.angle(m,u),T=Dt.angle(m,v)-w;return T<=-Math.PI?T+Dt.PI_TIMES_2:T>Math.PI?T-Dt.PI_TIMES_2:T},G0.PI_TIMES_2.get=function(){return 2*Math.PI},G0.PI_OVER_2.get=function(){return Math.PI/2},G0.PI_OVER_4.get=function(){return Math.PI/4},G0.COUNTERCLOCKWISE.get=function(){return Me.COUNTERCLOCKWISE},G0.CLOCKWISE.get=function(){return Me.CLOCKWISE},G0.NONE.get=function(){return Me.COLLINEAR},Object.defineProperties(Dt,G0);var jt=function u(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new dt,this._seg1=new dt,this._offset0=new dt,this._offset1=new dt,this._side=0,this._hasNarrowConcaveAngle=!1;var m=arguments[0],v=arguments[1],w=arguments[2];this._precisionModel=m,this._bufParams=v,this._li=new _e,this._filletAngleQuantum=Math.PI/2/v.getQuadrantSegments(),v.getQuadrantSegments()>=8&&v.getJoinStyle()===Ot.JOIN_ROUND&&(this._closingSegLengthFactor=u.MAX_CLOSING_SEG_LEN_FACTOR),this.init(w)},ga={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};jt.prototype.addNextSegment=function(u,m){if(this._s0=this._s1,this._s1=this._s2,this._s2=u,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var v=Me.computeOrientation(this._s0,this._s1,this._s2),w=v===Me.CLOCKWISE&&this._side===Be.LEFT||v===Me.COUNTERCLOCKWISE&&this._side===Be.RIGHT;v===0?this.addCollinear(m):w?this.addOutsideTurn(v,m):this.addInsideTurn(v,m)},jt.prototype.addLineEndCap=function(u,m){var v=new dt(u,m),w=new dt;this.computeOffsetSegment(v,Be.LEFT,this._distance,w);var T=new dt;this.computeOffsetSegment(v,Be.RIGHT,this._distance,T);var H=m.x-u.x,G=m.y-u.y,K=Math.atan2(G,H);switch(this._bufParams.getEndCapStyle()){case Ot.CAP_ROUND:this._segList.addPt(w.p1),this.addFilletArc(m,K+Math.PI/2,K-Math.PI/2,Me.CLOCKWISE,this._distance),this._segList.addPt(T.p1);break;case Ot.CAP_FLAT:this._segList.addPt(w.p1),this._segList.addPt(T.p1);break;case Ot.CAP_SQUARE:var de=new F;de.x=Math.abs(this._distance)*Math.cos(K),de.y=Math.abs(this._distance)*Math.sin(K);var Le=new F(w.p1.x+de.x,w.p1.y+de.y),He=new F(T.p1.x+de.x,T.p1.y+de.y);this._segList.addPt(Le),this._segList.addPt(He)}},jt.prototype.getCoordinates=function(){return this._segList.getCoordinates()},jt.prototype.addMitreJoin=function(u,m,v,w){var T=!0,H=null;try{H=ge.intersection(m.p0,m.p1,v.p0,v.p1),(w<=0?1:H.distance(u)/Math.abs(w))>this._bufParams.getMitreLimit()&&(T=!1)}catch(G){if(!(G instanceof Te))throw G;H=new F(0,0),T=!1}T?this._segList.addPt(H):this.addLimitedMitreJoin(m,v,w,this._bufParams.getMitreLimit())},jt.prototype.addFilletCorner=function(u,m,v,w,T){var H=m.x-u.x,G=m.y-u.y,K=Math.atan2(G,H),de=v.x-u.x,Le=v.y-u.y,He=Math.atan2(Le,de);w===Me.CLOCKWISE?K<=He&&(K+=2*Math.PI):K>=He&&(K-=2*Math.PI),this._segList.addPt(m),this.addFilletArc(u,K,He,w,T),this._segList.addPt(v)},jt.prototype.addOutsideTurn=function(u,m){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*jt.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Ot.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Ot.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(m&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,u,this._distance),this._segList.addPt(this._offset1.p0))},jt.prototype.createSquare=function(u){this._segList.addPt(new F(u.x+this._distance,u.y+this._distance)),this._segList.addPt(new F(u.x+this._distance,u.y-this._distance)),this._segList.addPt(new F(u.x-this._distance,u.y-this._distance)),this._segList.addPt(new F(u.x-this._distance,u.y+this._distance)),this._segList.closeRing()},jt.prototype.addSegments=function(u,m){this._segList.addPts(u,m)},jt.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},jt.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},jt.prototype.initSideSegments=function(u,m,v){this._s1=u,this._s2=m,this._side=v,this._seg1.setCoordinates(u,m),this.computeOffsetSegment(this._seg1,v,this._distance,this._offset1)},jt.prototype.addLimitedMitreJoin=function(u,m,v,w){var T=this._seg0.p1,H=Dt.angle(T,this._seg0.p0),G=Dt.angleBetweenOriented(this._seg0.p0,T,this._seg1.p1)/2,K=Dt.normalize(H+G),de=Dt.normalize(K+Math.PI),Le=w*v,He=v-Le*Math.abs(Math.sin(G)),ze=T.x+Le*Math.cos(de),it=T.y+Le*Math.sin(de),at=new F(ze,it),_t=new dt(T,at),vt=_t.pointAlongOffset(1,He),Ft=_t.pointAlongOffset(1,-He);this._side===Be.LEFT?(this._segList.addPt(vt),this._segList.addPt(Ft)):(this._segList.addPt(Ft),this._segList.addPt(vt))},jt.prototype.computeOffsetSegment=function(u,m,v,w){var T=m===Be.LEFT?1:-1,H=u.p1.x-u.p0.x,G=u.p1.y-u.p0.y,K=Math.sqrt(H*H+G*G),de=T*v*H/K,Le=T*v*G/K;w.p0.x=u.p0.x-Le,w.p0.y=u.p0.y+de,w.p1.x=u.p1.x-Le,w.p1.y=u.p1.y+de},jt.prototype.addFilletArc=function(u,m,v,w,T){var H=w===Me.CLOCKWISE?-1:1,G=Math.abs(m-v),K=Math.trunc(G/this._filletAngleQuantum+.5);if(K<1)return null;for(var de=G/K,Le=0,He=new F;Le<G;){var ze=m+H*Le;He.x=u.x+T*Math.cos(ze),He.y=u.y+T*Math.sin(ze),this._segList.addPt(He),Le+=de}},jt.prototype.addInsideTurn=function(u,m){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*jt.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var v=new F((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(v);var w=new F((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(w)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},jt.prototype.createCircle=function(u){var m=new F(u.x+this._distance,u.y);this._segList.addPt(m),this.addFilletArc(u,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},jt.prototype.addBevelJoin=function(u,m){this._segList.addPt(u.p1),this._segList.addPt(m.p0)},jt.prototype.init=function(u){this._distance=u,this._maxCurveSegmentError=u*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new ki,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(u*jt.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},jt.prototype.addCollinear=function(u){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Ot.JOIN_BEVEL||this._bufParams.getJoinStyle()===Ot.JOIN_MITRE?(u&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,Me.CLOCKWISE,this._distance))},jt.prototype.closeRing=function(){this._segList.closeRing()},jt.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},jt.prototype.interfaces_=function(){return[]},jt.prototype.getClass=function(){return jt},ga.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return .001},ga.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return .001},ga.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},ga.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(jt,ga);var Ci=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var u=arguments[0],m=arguments[1];this._precisionModel=u,this._bufParams=m};Ci.prototype.getOffsetCurve=function(u,m){if(this._distance=m,m===0)return null;var v=m<0,w=Math.abs(m),T=this.getSegGen(w);u.length<=1?this.computePointCurve(u[0],T):this.computeOffsetCurve(u,v,T);var H=T.getCoordinates();return v&&Mt.reverse(H),H},Ci.prototype.computeSingleSidedBufferCurve=function(u,m,v){var w=this.simplifyTolerance(this._distance);if(m){v.addSegments(u,!0);var T=Wt.simplify(u,-w),H=T.length-1;v.initSideSegments(T[H],T[H-1],Be.LEFT),v.addFirstSegment();for(var G=H-2;G>=0;G--)v.addNextSegment(T[G],!0)}else{v.addSegments(u,!1);var K=Wt.simplify(u,w),de=K.length-1;v.initSideSegments(K[0],K[1],Be.LEFT),v.addFirstSegment();for(var Le=2;Le<=de;Le++)v.addNextSegment(K[Le],!0)}v.addLastSegment(),v.closeRing()},Ci.prototype.computeRingBufferCurve=function(u,m,v){var w=this.simplifyTolerance(this._distance);m===Be.RIGHT&&(w=-w);var T=Wt.simplify(u,w),H=T.length-1;v.initSideSegments(T[H-1],T[0],m);for(var G=1;G<=H;G++){var K=G!==1;v.addNextSegment(T[G],K)}v.closeRing()},Ci.prototype.computeLineBufferCurve=function(u,m){var v=this.simplifyTolerance(this._distance),w=Wt.simplify(u,v),T=w.length-1;m.initSideSegments(w[0],w[1],Be.LEFT);for(var H=2;H<=T;H++)m.addNextSegment(w[H],!0);m.addLastSegment(),m.addLineEndCap(w[T-1],w[T]);var G=Wt.simplify(u,-v),K=G.length-1;m.initSideSegments(G[K],G[K-1],Be.LEFT);for(var de=K-2;de>=0;de--)m.addNextSegment(G[de],!0);m.addLastSegment(),m.addLineEndCap(G[1],G[0]),m.closeRing()},Ci.prototype.computePointCurve=function(u,m){switch(this._bufParams.getEndCapStyle()){case Ot.CAP_ROUND:m.createCircle(u);break;case Ot.CAP_SQUARE:m.createSquare(u)}},Ci.prototype.getLineCurve=function(u,m){if(this._distance=m,m<0&&!this._bufParams.isSingleSided()||m===0)return null;var v=Math.abs(m),w=this.getSegGen(v);if(u.length<=1)this.computePointCurve(u[0],w);else if(this._bufParams.isSingleSided()){var T=m<0;this.computeSingleSidedBufferCurve(u,T,w)}else this.computeLineBufferCurve(u,w);return w.getCoordinates()},Ci.prototype.getBufferParameters=function(){return this._bufParams},Ci.prototype.simplifyTolerance=function(u){return u*this._bufParams.getSimplifyFactor()},Ci.prototype.getRingCurve=function(u,m,v){if(this._distance=v,u.length<=2)return this.getLineCurve(u,v);if(v===0)return Ci.copyCoordinates(u);var w=this.getSegGen(v);return this.computeRingBufferCurve(u,m,w),w.getCoordinates()},Ci.prototype.computeOffsetCurve=function(u,m,v){var w=this.simplifyTolerance(this._distance);if(m){var T=Wt.simplify(u,-w),H=T.length-1;v.initSideSegments(T[H],T[H-1],Be.LEFT),v.addFirstSegment();for(var G=H-2;G>=0;G--)v.addNextSegment(T[G],!0)}else{var K=Wt.simplify(u,w),de=K.length-1;v.initSideSegments(K[0],K[1],Be.LEFT),v.addFirstSegment();for(var Le=2;Le<=de;Le++)v.addNextSegment(K[Le],!0)}v.addLastSegment()},Ci.prototype.getSegGen=function(u){return new jt(this._precisionModel,this._bufParams,u)},Ci.prototype.interfaces_=function(){return[]},Ci.prototype.getClass=function(){return Ci},Ci.copyCoordinates=function(u){for(var m=new Array(u.length).fill(null),v=0;v<m.length;v++)m[v]=new F(u[v]);return m};var q0=function(){this._subgraphs=null,this._seg=new dt,this._cga=new Me;var u=arguments[0];this._subgraphs=u},Ya={DepthSegment:{configurable:!0}};q0.prototype.findStabbedSegments=function(){if(arguments.length===1){for(var u=arguments[0],m=new Xe,v=this._subgraphs.iterator();v.hasNext();){var w=v.next(),T=w.getEnvelope();u.y<T.getMinY()||u.y>T.getMaxY()||this.findStabbedSegments(u,w.getDirectedEdges(),m)}return m}if(arguments.length===3){if(j(arguments[2],Kt)&&arguments[0]instanceof F&&arguments[1]instanceof ka){for(var H=arguments[0],G=arguments[1],K=arguments[2],de=G.getEdge().getCoordinates(),Le=0;Le<de.length-1;Le++)if(this._seg.p0=de[Le],this._seg.p1=de[Le+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<H.x)&&!(this._seg.isHorizontal()||H.y<this._seg.p0.y||H.y>this._seg.p1.y||Me.computeOrientation(this._seg.p0,this._seg.p1,H)===Me.RIGHT)){var He=G.getDepth(Be.LEFT);this._seg.p0.equals(de[Le])||(He=G.getDepth(Be.RIGHT));var ze=new N0(this._seg,He);K.add(ze)}}else if(j(arguments[2],Kt)&&arguments[0]instanceof F&&j(arguments[1],Kt))for(var it=arguments[0],at=arguments[1],_t=arguments[2],vt=at.iterator();vt.hasNext();){var Ft=vt.next();Ft.isForward()&&this.findStabbedSegments(it,Ft,_t)}}},q0.prototype.getDepth=function(u){var m=this.findStabbedSegments(u);return m.size()===0?0:Xi.min(m)._leftDepth},q0.prototype.interfaces_=function(){return[]},q0.prototype.getClass=function(){return q0},Ya.DepthSegment.get=function(){return N0},Object.defineProperties(q0,Ya);var N0=function(){this._upwardSeg=null,this._leftDepth=null;var u=arguments[0],m=arguments[1];this._upwardSeg=new dt(u),this._leftDepth=m};N0.prototype.compareTo=function(u){var m=u;if(this._upwardSeg.minX()>=m._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=m._upwardSeg.minX())return-1;var v=this._upwardSeg.orientationIndex(m._upwardSeg);return v!==0||(v=-1*m._upwardSeg.orientationIndex(this._upwardSeg))!=0?v:this._upwardSeg.compareTo(m._upwardSeg)},N0.prototype.compareX=function(u,m){var v=u.p0.compareTo(m.p0);return v!==0?v:u.p1.compareTo(m.p1)},N0.prototype.toString=function(){return this._upwardSeg.toString()},N0.prototype.interfaces_=function(){return[N]},N0.prototype.getClass=function(){return N0};var Nt=function(u,m,v){this.p0=u||null,this.p1=m||null,this.p2=v||null};Nt.prototype.area=function(){return Nt.area(this.p0,this.p1,this.p2)},Nt.prototype.signedArea=function(){return Nt.signedArea(this.p0,this.p1,this.p2)},Nt.prototype.interpolateZ=function(u){if(u===null)throw new D("Supplied point is null.");return Nt.interpolateZ(u,this.p0,this.p1,this.p2)},Nt.prototype.longestSideLength=function(){return Nt.longestSideLength(this.p0,this.p1,this.p2)},Nt.prototype.isAcute=function(){return Nt.isAcute(this.p0,this.p1,this.p2)},Nt.prototype.circumcentre=function(){return Nt.circumcentre(this.p0,this.p1,this.p2)},Nt.prototype.area3D=function(){return Nt.area3D(this.p0,this.p1,this.p2)},Nt.prototype.centroid=function(){return Nt.centroid(this.p0,this.p1,this.p2)},Nt.prototype.inCentre=function(){return Nt.inCentre(this.p0,this.p1,this.p2)},Nt.prototype.interfaces_=function(){return[]},Nt.prototype.getClass=function(){return Nt},Nt.area=function(u,m,v){return Math.abs(((v.x-u.x)*(m.y-u.y)-(m.x-u.x)*(v.y-u.y))/2)},Nt.signedArea=function(u,m,v){return((v.x-u.x)*(m.y-u.y)-(m.x-u.x)*(v.y-u.y))/2},Nt.det=function(u,m,v,w){return u*w-m*v},Nt.interpolateZ=function(u,m,v,w){var T=m.x,H=m.y,G=v.x-T,K=w.x-T,de=v.y-H,Le=w.y-H,He=G*Le-K*de,ze=u.x-T,it=u.y-H,at=(Le*ze-K*it)/He,_t=(-de*ze+G*it)/He;return m.z+at*(v.z-m.z)+_t*(w.z-m.z)},Nt.longestSideLength=function(u,m,v){var w=u.distance(m),T=m.distance(v),H=v.distance(u),G=w;return T>G&&(G=T),H>G&&(G=H),G},Nt.isAcute=function(u,m,v){return!!Dt.isAcute(u,m,v)&&!!Dt.isAcute(m,v,u)&&!!Dt.isAcute(v,u,m)},Nt.circumcentre=function(u,m,v){var w=v.x,T=v.y,H=u.x-w,G=u.y-T,K=m.x-w,de=m.y-T,Le=2*Nt.det(H,G,K,de),He=Nt.det(G,H*H+G*G,de,K*K+de*de),ze=Nt.det(H,H*H+G*G,K,K*K+de*de);return new F(w-He/Le,T+ze/Le)},Nt.perpendicularBisector=function(u,m){var v=m.x-u.x,w=m.y-u.y,T=new ge(u.x+v/2,u.y+w/2,1),H=new ge(u.x-w+v/2,u.y+v+w/2,1);return new ge(T,H)},Nt.angleBisector=function(u,m,v){var w=m.distance(u),T=w/(w+m.distance(v)),H=v.x-u.x,G=v.y-u.y;return new F(u.x+T*H,u.y+T*G)},Nt.area3D=function(u,m,v){var w=m.x-u.x,T=m.y-u.y,H=m.z-u.z,G=v.x-u.x,K=v.y-u.y,de=v.z-u.z,Le=T*de-H*K,He=H*G-w*de,ze=w*K-T*G,it=Le*Le+He*He+ze*ze,at=Math.sqrt(it)/2;return at},Nt.centroid=function(u,m,v){var w=(u.x+m.x+v.x)/3,T=(u.y+m.y+v.y)/3;return new F(w,T)},Nt.inCentre=function(u,m,v){var w=m.distance(v),T=u.distance(v),H=u.distance(m),G=w+T+H,K=(w*u.x+T*m.x+H*v.x)/G,de=(w*u.y+T*m.y+H*v.y)/G;return new F(K,de)};var qi=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Xe;var u=arguments[0],m=arguments[1],v=arguments[2];this._inputGeom=u,this._distance=m,this._curveBuilder=v};qi.prototype.addPoint=function(u){if(this._distance<=0)return null;var m=u.getCoordinates(),v=this._curveBuilder.getLineCurve(m,this._distance);this.addCurve(v,q.EXTERIOR,q.INTERIOR)},qi.prototype.addPolygon=function(u){var m=this._distance,v=Be.LEFT;this._distance<0&&(m=-this._distance,v=Be.RIGHT);var w=u.getExteriorRing(),T=Mt.removeRepeatedPoints(w.getCoordinates());if(this._distance<0&&this.isErodedCompletely(w,this._distance)||this._distance<=0&&T.length<3)return null;this.addPolygonRing(T,m,v,q.EXTERIOR,q.INTERIOR);for(var H=0;H<u.getNumInteriorRing();H++){var G=u.getInteriorRingN(H),K=Mt.removeRepeatedPoints(G.getCoordinates());this._distance>0&&this.isErodedCompletely(G,-this._distance)||this.addPolygonRing(K,m,Be.opposite(v),q.INTERIOR,q.EXTERIOR)}},qi.prototype.isTriangleErodedCompletely=function(u,m){var v=new Nt(u[0],u[1],u[2]),w=v.inCentre();return Me.distancePointLine(w,v.p0,v.p1)<Math.abs(m)},qi.prototype.addLineString=function(u){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var m=Mt.removeRepeatedPoints(u.getCoordinates()),v=this._curveBuilder.getLineCurve(m,this._distance);this.addCurve(v,q.EXTERIOR,q.INTERIOR)},qi.prototype.addCurve=function(u,m,v){if(u===null||u.length<2)return null;var w=new Zt(u,new kt(0,q.BOUNDARY,m,v));this._curveList.add(w)},qi.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},qi.prototype.addPolygonRing=function(u,m,v,w,T){if(m===0&&u.length<Yi.MINIMUM_VALID_SIZE)return null;var H=w,G=T;u.length>=Yi.MINIMUM_VALID_SIZE&&Me.isCCW(u)&&(H=T,G=w,v=Be.opposite(v));var K=this._curveBuilder.getRingCurve(u,v,m);this.addCurve(K,H,G)},qi.prototype.add=function(u){if(u.isEmpty())return null;u instanceof Yt?this.addPolygon(u):u instanceof qt?this.addLineString(u):u instanceof ei?this.addPoint(u):u instanceof w0?this.addCollection(u):u instanceof h0?this.addCollection(u):u instanceof se?this.addCollection(u):u instanceof ri&&this.addCollection(u)},qi.prototype.isErodedCompletely=function(u,m){var v=u.getCoordinates();if(v.length<4)return m<0;if(v.length===4)return this.isTriangleErodedCompletely(v,m);var w=u.getEnvelopeInternal(),T=Math.min(w.getHeight(),w.getWidth());return m<0&&2*Math.abs(m)>T},qi.prototype.addCollection=function(u){for(var m=0;m<u.getNumGeometries();m++){var v=u.getGeometryN(m);this.add(v)}},qi.prototype.interfaces_=function(){return[]},qi.prototype.getClass=function(){return qi};var na=function(){};na.prototype.locate=function(u){},na.prototype.interfaces_=function(){return[]},na.prototype.getClass=function(){return na};var r0=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var u=arguments[0];this._parent=u,this._atStart=!0,this._index=0,this._max=u.getNumGeometries()};r0.prototype.next=function(){if(this._atStart)return this._atStart=!1,r0.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new r;var u=this._parent.getGeometryN(this._index++);return u instanceof ri?(this._subcollectionIterator=new r0(u),this._subcollectionIterator.next()):u},r0.prototype.remove=function(){throw new Error(this.getClass().getName())},r0.prototype.hasNext=function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},r0.prototype.interfaces_=function(){return[Ht]},r0.prototype.getClass=function(){return r0},r0.isAtomic=function(u){return!(u instanceof ri)};var $i=function(){this._geom=null;var u=arguments[0];this._geom=u};$i.prototype.locate=function(u){return $i.locate(u,this._geom)},$i.prototype.interfaces_=function(){return[na]},$i.prototype.getClass=function(){return $i},$i.isPointInRing=function(u,m){return!!m.getEnvelopeInternal().intersects(u)&&Me.isPointInRing(u,m.getCoordinates())},$i.containsPointInPolygon=function(u,m){if(m.isEmpty())return!1;var v=m.getExteriorRing();if(!$i.isPointInRing(u,v))return!1;for(var w=0;w<m.getNumInteriorRing();w++){var T=m.getInteriorRingN(w);if($i.isPointInRing(u,T))return!1}return!0},$i.containsPoint=function(u,m){if(m instanceof Yt)return $i.containsPointInPolygon(u,m);if(m instanceof ri)for(var v=new r0(m);v.hasNext();){var w=v.next();if(w!==m&&$i.containsPoint(u,w))return!0}return!1},$i.locate=function(u,m){return m.isEmpty()?q.EXTERIOR:$i.containsPoint(u,m)?q.INTERIOR:q.EXTERIOR};var ci=function(){this._edgeMap=new b,this._edgeList=null,this._ptInAreaLocation=[q.NONE,q.NONE]};ci.prototype.getNextCW=function(u){this.getEdges();var m=this._edgeList.indexOf(u),v=m-1;return m===0&&(v=this._edgeList.size()-1),this._edgeList.get(v)},ci.prototype.propagateSideLabels=function(u){for(var m=q.NONE,v=this.iterator();v.hasNext();){var w=v.next().getLabel();w.isArea(u)&&w.getLocation(u,Be.LEFT)!==q.NONE&&(m=w.getLocation(u,Be.LEFT))}if(m===q.NONE)return null;for(var T=m,H=this.iterator();H.hasNext();){var G=H.next(),K=G.getLabel();if(K.getLocation(u,Be.ON)===q.NONE&&K.setLocation(u,Be.ON,T),K.isArea(u)){var de=K.getLocation(u,Be.LEFT),Le=K.getLocation(u,Be.RIGHT);if(Le!==q.NONE){if(Le!==T)throw new d0("side location conflict",G.getCoordinate());de===q.NONE&&U.shouldNeverReachHere("found single null side (at "+G.getCoordinate()+")"),T=de}else U.isTrue(K.getLocation(u,Be.LEFT)===q.NONE,"found single null side"),K.setLocation(u,Be.RIGHT,T),K.setLocation(u,Be.LEFT,T)}}},ci.prototype.getCoordinate=function(){var u=this.iterator();return u.hasNext()?u.next().getCoordinate():null},ci.prototype.print=function(u){ye.out.println("EdgeEndStar:   "+this.getCoordinate());for(var m=this.iterator();m.hasNext();)m.next().print(u)},ci.prototype.isAreaLabelsConsistent=function(u){return this.computeEdgeEndLabels(u.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},ci.prototype.checkAreaLabelsConsistent=function(u){var m=this.getEdges();if(m.size()<=0)return!0;var v=m.size()-1,w=m.get(v).getLabel().getLocation(u,Be.LEFT);U.isTrue(w!==q.NONE,"Found unlabelled area edge");for(var T=w,H=this.iterator();H.hasNext();){var G=H.next().getLabel();U.isTrue(G.isArea(u),"Found non-area edge");var K=G.getLocation(u,Be.LEFT),de=G.getLocation(u,Be.RIGHT);if(K===de||de!==T)return!1;T=K}return!0},ci.prototype.findIndex=function(u){this.iterator();for(var m=0;m<this._edgeList.size();m++)if(this._edgeList.get(m)===u)return m;return-1},ci.prototype.iterator=function(){return this.getEdges().iterator()},ci.prototype.getEdges=function(){return this._edgeList===null&&(this._edgeList=new Xe(this._edgeMap.values())),this._edgeList},ci.prototype.getLocation=function(u,m,v){return this._ptInAreaLocation[u]===q.NONE&&(this._ptInAreaLocation[u]=$i.locate(m,v[u].getGeometry())),this._ptInAreaLocation[u]},ci.prototype.toString=function(){var u=new ce;u.append("EdgeEndStar:   "+this.getCoordinate()),u.append(`
`);for(var m=this.iterator();m.hasNext();){var v=m.next();u.append(v),u.append(`
`)}return u.toString()},ci.prototype.computeEdgeEndLabels=function(u){for(var m=this.iterator();m.hasNext();)m.next().computeLabel(u)},ci.prototype.computeLabelling=function(u){this.computeEdgeEndLabels(u[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var m=[!1,!1],v=this.iterator();v.hasNext();)for(var w=v.next().getLabel(),T=0;T<2;T++)w.isLine(T)&&w.getLocation(T)===q.BOUNDARY&&(m[T]=!0);for(var H=this.iterator();H.hasNext();)for(var G=H.next(),K=G.getLabel(),de=0;de<2;de++)if(K.isAnyNull(de)){var Le=q.NONE;if(m[de])Le=q.EXTERIOR;else{var He=G.getCoordinate();Le=this.getLocation(de,He,u)}K.setAllLocationsIfNull(de,Le)}},ci.prototype.getDegree=function(){return this._edgeMap.size()},ci.prototype.insertEdgeEnd=function(u,m){this._edgeMap.put(u,m),this._edgeList=null},ci.prototype.interfaces_=function(){return[]},ci.prototype.getClass=function(){return ci};var is=function(u){function m(){u.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return u&&(m.__proto__=u),m.prototype=Object.create(u&&u.prototype),m.prototype.constructor=m,m.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var v=null,w=null,T=this._SCANNING_FOR_INCOMING,H=0;H<this._resultAreaEdgeList.size();H++){var G=this._resultAreaEdgeList.get(H),K=G.getSym();if(G.getLabel().isArea())switch(v===null&&G.isInResult()&&(v=G),T){case this._SCANNING_FOR_INCOMING:if(!K.isInResult())continue;w=K,T=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!G.isInResult())continue;w.setNext(G),T=this._SCANNING_FOR_INCOMING}}if(T===this._LINKING_TO_OUTGOING){if(v===null)throw new d0("no outgoing dirEdge found",this.getCoordinate());U.isTrue(v.isInResult(),"unable to link last incoming dirEdge"),w.setNext(v)}},m.prototype.insert=function(v){var w=v;this.insertEdgeEnd(w,w)},m.prototype.getRightmostEdge=function(){var v=this.getEdges(),w=v.size();if(w<1)return null;var T=v.get(0);if(w===1)return T;var H=v.get(w-1),G=T.getQuadrant(),K=H.getQuadrant();return $t.isNorthern(G)&&$t.isNorthern(K)?T:$t.isNorthern(G)||$t.isNorthern(K)?T.getDy()!==0?T:H.getDy()!==0?H:(U.shouldNeverReachHere("found two horizontal edges incident on node"),null):H},m.prototype.print=function(v){ye.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var w=this.iterator();w.hasNext();){var T=w.next();v.print("out "),T.print(v),v.println(),v.print("in "),T.getSym().print(v),v.println()}},m.prototype.getResultAreaEdges=function(){if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Xe;for(var v=this.iterator();v.hasNext();){var w=v.next();(w.isInResult()||w.getSym().isInResult())&&this._resultAreaEdgeList.add(w)}return this._resultAreaEdgeList},m.prototype.updateLabelling=function(v){for(var w=this.iterator();w.hasNext();){var T=w.next().getLabel();T.setAllLocationsIfNull(0,v.getLocation(0)),T.setAllLocationsIfNull(1,v.getLocation(1))}},m.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var v=null,w=null,T=this._edgeList.size()-1;T>=0;T--){var H=this._edgeList.get(T),G=H.getSym();w===null&&(w=G),v!==null&&G.setNext(v),v=H}w.setNext(v)},m.prototype.computeDepths=function(){if(arguments.length===1){var v=arguments[0],w=this.findIndex(v),T=v.getDepth(Be.LEFT),H=v.getDepth(Be.RIGHT),G=this.computeDepths(w+1,this._edgeList.size(),T);if(this.computeDepths(0,w,G)!==H)throw new d0("depth mismatch at "+v.getCoordinate())}else if(arguments.length===3){for(var K=arguments[0],de=arguments[1],Le=arguments[2],He=K;He<de;He++){var ze=this._edgeList.get(He);ze.setEdgeDepths(Be.RIGHT,Le),Le=ze.getDepth(Be.LEFT)}return Le}},m.prototype.mergeSymLabels=function(){for(var v=this.iterator();v.hasNext();){var w=v.next();w.getLabel().merge(w.getSym().getLabel())}},m.prototype.linkMinimalDirectedEdges=function(v){for(var w=null,T=null,H=this._SCANNING_FOR_INCOMING,G=this._resultAreaEdgeList.size()-1;G>=0;G--){var K=this._resultAreaEdgeList.get(G),de=K.getSym();switch(w===null&&K.getEdgeRing()===v&&(w=K),H){case this._SCANNING_FOR_INCOMING:if(de.getEdgeRing()!==v)continue;T=de,H=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(K.getEdgeRing()!==v)continue;T.setNextMin(K),H=this._SCANNING_FOR_INCOMING}}H===this._LINKING_TO_OUTGOING&&(U.isTrue(w!==null,"found null for first outgoing dirEdge"),U.isTrue(w.getEdgeRing()===v,"unable to link last incoming dirEdge"),T.setNextMin(w))},m.prototype.getOutgoingDegree=function(){if(arguments.length===0){for(var v=0,w=this.iterator();w.hasNext();)w.next().isInResult()&&v++;return v}if(arguments.length===1){for(var T=arguments[0],H=0,G=this.iterator();G.hasNext();)G.next().getEdgeRing()===T&&H++;return H}},m.prototype.getLabel=function(){return this._label},m.prototype.findCoveredLineEdges=function(){for(var v=q.NONE,w=this.iterator();w.hasNext();){var T=w.next(),H=T.getSym();if(!T.isLineEdge()){if(T.isInResult()){v=q.INTERIOR;break}if(H.isInResult()){v=q.EXTERIOR;break}}}if(v===q.NONE)return null;for(var G=v,K=this.iterator();K.hasNext();){var de=K.next(),Le=de.getSym();de.isLineEdge()?de.getEdge().setCovered(G===q.INTERIOR):(de.isInResult()&&(G=q.EXTERIOR),Le.isInResult()&&(G=q.INTERIOR))}},m.prototype.computeLabelling=function(v){u.prototype.computeLabelling.call(this,v),this._label=new kt(q.NONE);for(var w=this.iterator();w.hasNext();)for(var T=w.next().getEdge().getLabel(),H=0;H<2;H++){var G=T.getLocation(H);G!==q.INTERIOR&&G!==q.BOUNDARY||this._label.setLocation(H,q.INTERIOR)}},m.prototype.interfaces_=function(){return[]},m.prototype.getClass=function(){return m},m}(ci),Xa=function(u){function m(){u.apply(this,arguments)}return u&&(m.__proto__=u),m.prototype=Object.create(u&&u.prototype),m.prototype.constructor=m,m.prototype.createNode=function(v){return new Ma(v,new is)},m.prototype.interfaces_=function(){return[]},m.prototype.getClass=function(){return m},m}(aa),S0=function u(){this._pts=null,this._orientation=null;var m=arguments[0];this._pts=m,this._orientation=u.orientation(m)};S0.prototype.compareTo=function(u){var m=u;return S0.compareOriented(this._pts,this._orientation,m._pts,m._orientation)},S0.prototype.interfaces_=function(){return[N]},S0.prototype.getClass=function(){return S0},S0.orientation=function(u){return Mt.increasingDirection(u)===1},S0.compareOriented=function(u,m,v,w){for(var T=m?1:-1,H=w?1:-1,G=m?u.length:-1,K=w?v.length:-1,de=m?0:u.length-1,Le=w?0:v.length-1;;){var He=u[de].compareTo(v[Le]);if(He!==0)return He;var ze=(de+=T)===G,it=(Le+=H)===K;if(ze&&!it)return-1;if(!ze&&it)return 1;if(ze&&it)return 0}};var Zi=function(){this._edges=new Xe,this._ocaMap=new b};Zi.prototype.print=function(u){u.print("MULTILINESTRING ( ");for(var m=0;m<this._edges.size();m++){var v=this._edges.get(m);m>0&&u.print(","),u.print("(");for(var w=v.getCoordinates(),T=0;T<w.length;T++)T>0&&u.print(","),u.print(w[T].x+" "+w[T].y);u.println(")")}u.print(")  ")},Zi.prototype.addAll=function(u){for(var m=u.iterator();m.hasNext();)this.add(m.next())},Zi.prototype.findEdgeIndex=function(u){for(var m=0;m<this._edges.size();m++)if(this._edges.get(m).equals(u))return m;return-1},Zi.prototype.iterator=function(){return this._edges.iterator()},Zi.prototype.getEdges=function(){return this._edges},Zi.prototype.get=function(u){return this._edges.get(u)},Zi.prototype.findEqualEdge=function(u){var m=new S0(u.getCoordinates());return this._ocaMap.get(m)},Zi.prototype.add=function(u){this._edges.add(u);var m=new S0(u.getCoordinates());this._ocaMap.put(m,u)},Zi.prototype.interfaces_=function(){return[]},Zi.prototype.getClass=function(){return Zi};var k0=function(){};k0.prototype.processIntersections=function(u,m,v,w){},k0.prototype.isDone=function(){},k0.prototype.interfaces_=function(){return[]},k0.prototype.getClass=function(){return k0};var Fi=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var u=arguments[0];this._li=u};Fi.prototype.isTrivialIntersection=function(u,m,v,w){if(u===v&&this._li.getIntersectionNum()===1){if(Fi.isAdjacentSegments(m,w))return!0;if(u.isClosed()){var T=u.size()-1;if(m===0&&w===T||w===0&&m===T)return!0}}return!1},Fi.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Fi.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Fi.prototype.getLineIntersector=function(){return this._li},Fi.prototype.hasProperIntersection=function(){return this._hasProper},Fi.prototype.processIntersections=function(u,m,v,w){if(u===v&&m===w)return null;this.numTests++;var T=u.getCoordinates()[m],H=u.getCoordinates()[m+1],G=v.getCoordinates()[w],K=v.getCoordinates()[w+1];this._li.computeIntersection(T,H,G,K),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(u,m,v,w)||(this._hasIntersection=!0,u.addIntersections(this._li,m,0),v.addIntersections(this._li,w,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Fi.prototype.hasIntersection=function(){return this._hasIntersection},Fi.prototype.isDone=function(){return!1},Fi.prototype.hasInteriorIntersection=function(){return this._hasInterior},Fi.prototype.interfaces_=function(){return[k0]},Fi.prototype.getClass=function(){return Fi},Fi.isAdjacentSegments=function(u,m){return Math.abs(u-m)===1};var Lt=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var u=arguments[0],m=arguments[1],v=arguments[2];this.coord=new F(u),this.segmentIndex=m,this.dist=v};Lt.prototype.getSegmentIndex=function(){return this.segmentIndex},Lt.prototype.getCoordinate=function(){return this.coord},Lt.prototype.print=function(u){u.print(this.coord),u.print(" seg # = "+this.segmentIndex),u.println(" dist = "+this.dist)},Lt.prototype.compareTo=function(u){var m=u;return this.compare(m.segmentIndex,m.dist)},Lt.prototype.isEndPoint=function(u){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===u},Lt.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Lt.prototype.getDistance=function(){return this.dist},Lt.prototype.compare=function(u,m){return this.segmentIndex<u?-1:this.segmentIndex>u?1:this.dist<m?-1:this.dist>m?1:0},Lt.prototype.interfaces_=function(){return[N]},Lt.prototype.getClass=function(){return Lt};var Qi=function(){this._nodeMap=new b,this.edge=null;var u=arguments[0];this.edge=u};Qi.prototype.print=function(u){u.println("Intersections:");for(var m=this.iterator();m.hasNext();)m.next().print(u)},Qi.prototype.iterator=function(){return this._nodeMap.values().iterator()},Qi.prototype.addSplitEdges=function(u){this.addEndpoints();for(var m=this.iterator(),v=m.next();m.hasNext();){var w=m.next(),T=this.createSplitEdge(v,w);u.add(T),v=w}},Qi.prototype.addEndpoints=function(){var u=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[u],u,0)},Qi.prototype.createSplitEdge=function(u,m){var v=m.segmentIndex-u.segmentIndex+2,w=this.edge.pts[m.segmentIndex],T=m.dist>0||!m.coord.equals2D(w);T||v--;var H=new Array(v).fill(null),G=0;H[G++]=new F(u.coord);for(var K=u.segmentIndex+1;K<=m.segmentIndex;K++)H[G++]=this.edge.pts[K];return T&&(H[G]=m.coord),new Za(H,new kt(this.edge._label))},Qi.prototype.add=function(u,m,v){var w=new Lt(u,m,v),T=this._nodeMap.get(w);return T!==null?T:(this._nodeMap.put(w,w),w)},Qi.prototype.isIntersection=function(u){for(var m=this.iterator();m.hasNext();)if(m.next().coord.equals(u))return!0;return!1},Qi.prototype.interfaces_=function(){return[]},Qi.prototype.getClass=function(){return Qi};var o0=function(){};o0.prototype.getChainStartIndices=function(u){var m=0,v=new Xe;v.add(new xe(m));do{var w=this.findChainEnd(u,m);v.add(new xe(w)),m=w}while(m<u.length-1);return o0.toIntArray(v)},o0.prototype.findChainEnd=function(u,m){for(var v=$t.quadrant(u[m],u[m+1]),w=m+1;w<u.length&&$t.quadrant(u[w-1],u[w])===v;)w++;return w-1},o0.prototype.interfaces_=function(){return[]},o0.prototype.getClass=function(){return o0},o0.toIntArray=function(u){for(var m=new Array(u.size()).fill(null),v=0;v<m.length;v++)m[v]=u.get(v).intValue();return m};var c0=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new ae,this.env2=new ae;var u=arguments[0];this.e=u,this.pts=u.getCoordinates();var m=new o0;this.startIndex=m.getChainStartIndices(this.pts)};c0.prototype.getCoordinates=function(){return this.pts},c0.prototype.getMaxX=function(u){var m=this.pts[this.startIndex[u]].x,v=this.pts[this.startIndex[u+1]].x;return m>v?m:v},c0.prototype.getMinX=function(u){var m=this.pts[this.startIndex[u]].x,v=this.pts[this.startIndex[u+1]].x;return m<v?m:v},c0.prototype.computeIntersectsForChain=function(){if(arguments.length===4){var u=arguments[0],m=arguments[1],v=arguments[2],w=arguments[3];this.computeIntersectsForChain(this.startIndex[u],this.startIndex[u+1],m,m.startIndex[v],m.startIndex[v+1],w)}else if(arguments.length===6){var T=arguments[0],H=arguments[1],G=arguments[2],K=arguments[3],de=arguments[4],Le=arguments[5],He=this.pts[T],ze=this.pts[H],it=G.pts[K],at=G.pts[de];if(H-T==1&&de-K==1)return Le.addIntersections(this.e,T,G.e,K),null;if(this.env1.init(He,ze),this.env2.init(it,at),!this.env1.intersects(this.env2))return null;var _t=Math.trunc((T+H)/2),vt=Math.trunc((K+de)/2);T<_t&&(K<vt&&this.computeIntersectsForChain(T,_t,G,K,vt,Le),vt<de&&this.computeIntersectsForChain(T,_t,G,vt,de,Le)),_t<H&&(K<vt&&this.computeIntersectsForChain(_t,H,G,K,vt,Le),vt<de&&this.computeIntersectsForChain(_t,H,G,vt,de,Le))}},c0.prototype.getStartIndexes=function(){return this.startIndex},c0.prototype.computeIntersects=function(u,m){for(var v=0;v<this.startIndex.length-1;v++)for(var w=0;w<u.startIndex.length-1;w++)this.computeIntersectsForChain(v,u,w,m)},c0.prototype.interfaces_=function(){return[]},c0.prototype.getClass=function(){return c0};var hi=function u(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var m=0;m<2;m++)for(var v=0;v<3;v++)this._depth[m][v]=u.NULL_VALUE},ls={NULL_VALUE:{configurable:!0}};hi.prototype.getDepth=function(u,m){return this._depth[u][m]},hi.prototype.setDepth=function(u,m,v){this._depth[u][m]=v},hi.prototype.isNull=function(){if(arguments.length===0){for(var u=0;u<2;u++)for(var m=0;m<3;m++)if(this._depth[u][m]!==hi.NULL_VALUE)return!1;return!0}if(arguments.length===1){var v=arguments[0];return this._depth[v][1]===hi.NULL_VALUE}if(arguments.length===2){var w=arguments[0],T=arguments[1];return this._depth[w][T]===hi.NULL_VALUE}},hi.prototype.normalize=function(){for(var u=0;u<2;u++)if(!this.isNull(u)){var m=this._depth[u][1];this._depth[u][2]<m&&(m=this._depth[u][2]),m<0&&(m=0);for(var v=1;v<3;v++){var w=0;this._depth[u][v]>m&&(w=1),this._depth[u][v]=w}}},hi.prototype.getDelta=function(u){return this._depth[u][Be.RIGHT]-this._depth[u][Be.LEFT]},hi.prototype.getLocation=function(u,m){return this._depth[u][m]<=0?q.EXTERIOR:q.INTERIOR},hi.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},hi.prototype.add=function(){if(arguments.length===1)for(var u=arguments[0],m=0;m<2;m++)for(var v=1;v<3;v++){var w=u.getLocation(m,v);w!==q.EXTERIOR&&w!==q.INTERIOR||(this.isNull(m,v)?this._depth[m][v]=hi.depthAtLocation(w):this._depth[m][v]+=hi.depthAtLocation(w))}else if(arguments.length===3){var T=arguments[0],H=arguments[1];arguments[2]===q.INTERIOR&&this._depth[T][H]++}},hi.prototype.interfaces_=function(){return[]},hi.prototype.getClass=function(){return hi},hi.depthAtLocation=function(u){return u===q.EXTERIOR?0:u===q.INTERIOR?1:hi.NULL_VALUE},ls.NULL_VALUE.get=function(){return-1},Object.defineProperties(hi,ls);var Za=function(u){function m(){if(u.call(this),this.pts=null,this._env=null,this.eiList=new Qi(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new hi,this._depthDelta=0,arguments.length===1){var v=arguments[0];m.call(this,v,null)}else if(arguments.length===2){var w=arguments[0],T=arguments[1];this.pts=w,this._label=T}}return u&&(m.__proto__=u),m.prototype=Object.create(u&&u.prototype),m.prototype.constructor=m,m.prototype.getDepth=function(){return this._depth},m.prototype.getCollapsedEdge=function(){var v=new Array(2).fill(null);return v[0]=this.pts[0],v[1]=this.pts[1],new m(v,kt.toLineLabel(this._label))},m.prototype.isIsolated=function(){return this._isIsolated},m.prototype.getCoordinates=function(){return this.pts},m.prototype.setIsolated=function(v){this._isIsolated=v},m.prototype.setName=function(v){this._name=v},m.prototype.equals=function(v){if(!(v instanceof m))return!1;var w=v;if(this.pts.length!==w.pts.length)return!1;for(var T=!0,H=!0,G=this.pts.length,K=0;K<this.pts.length;K++)if(this.pts[K].equals2D(w.pts[K])||(T=!1),this.pts[K].equals2D(w.pts[--G])||(H=!1),!T&&!H)return!1;return!0},m.prototype.getCoordinate=function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var v=arguments[0];return this.pts[v]}},m.prototype.print=function(v){v.print("edge "+this._name+": "),v.print("LINESTRING (");for(var w=0;w<this.pts.length;w++)w>0&&v.print(","),v.print(this.pts[w].x+" "+this.pts[w].y);v.print(")  "+this._label+" "+this._depthDelta)},m.prototype.computeIM=function(v){m.updateIM(this._label,v)},m.prototype.isCollapsed=function(){return!!this._label.isArea()&&this.pts.length===3&&!!this.pts[0].equals(this.pts[2])},m.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},m.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},m.prototype.getDepthDelta=function(){return this._depthDelta},m.prototype.getNumPoints=function(){return this.pts.length},m.prototype.printReverse=function(v){v.print("edge "+this._name+": ");for(var w=this.pts.length-1;w>=0;w--)v.print(this.pts[w]+" ");v.println("")},m.prototype.getMonotoneChainEdge=function(){return this._mce===null&&(this._mce=new c0(this)),this._mce},m.prototype.getEnvelope=function(){if(this._env===null){this._env=new ae;for(var v=0;v<this.pts.length;v++)this._env.expandToInclude(this.pts[v])}return this._env},m.prototype.addIntersection=function(v,w,T,H){var G=new F(v.getIntersection(H)),K=w,de=v.getEdgeDistance(T,H),Le=K+1;if(Le<this.pts.length){var He=this.pts[Le];G.equals2D(He)&&(K=Le,de=0)}this.eiList.add(G,K,de)},m.prototype.toString=function(){var v=new ce;v.append("edge "+this._name+": "),v.append("LINESTRING (");for(var w=0;w<this.pts.length;w++)w>0&&v.append(","),v.append(this.pts[w].x+" "+this.pts[w].y);return v.append(")  "+this._label+" "+this._depthDelta),v.toString()},m.prototype.isPointwiseEqual=function(v){if(this.pts.length!==v.pts.length)return!1;for(var w=0;w<this.pts.length;w++)if(!this.pts[w].equals2D(v.pts[w]))return!1;return!0},m.prototype.setDepthDelta=function(v){this._depthDelta=v},m.prototype.getEdgeIntersectionList=function(){return this.eiList},m.prototype.addIntersections=function(v,w,T){for(var H=0;H<v.getIntersectionNum();H++)this.addIntersection(v,w,T,H)},m.prototype.interfaces_=function(){return[]},m.prototype.getClass=function(){return m},m.updateIM=function(){if(arguments.length!==2)return u.prototype.updateIM.apply(this,arguments);var v=arguments[0],w=arguments[1];w.setAtLeastIfValid(v.getLocation(0,Be.ON),v.getLocation(1,Be.ON),1),v.isArea()&&(w.setAtLeastIfValid(v.getLocation(0,Be.LEFT),v.getLocation(1,Be.LEFT),2),w.setAtLeastIfValid(v.getLocation(0,Be.RIGHT),v.getLocation(1,Be.RIGHT),2))},m}(Ni),Ti=function(u){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Zi,this._bufParams=u||null};Ti.prototype.setWorkingPrecisionModel=function(u){this._workingPrecisionModel=u},Ti.prototype.insertUniqueEdge=function(u){var m=this._edgeList.findEqualEdge(u);if(m!==null){var v=m.getLabel(),w=u.getLabel();m.isPointwiseEqual(u)||(w=new kt(u.getLabel())).flip(),v.merge(w);var T=Ti.depthDelta(w),H=m.getDepthDelta()+T;m.setDepthDelta(H)}else this._edgeList.add(u),u.setDepthDelta(Ti.depthDelta(u.getLabel()))},Ti.prototype.buildSubgraphs=function(u,m){for(var v=new Xe,w=u.iterator();w.hasNext();){var T=w.next(),H=T.getRightmostCoordinate(),G=new q0(v).getDepth(H);T.computeDepth(G),T.findResultEdges(),v.add(T),m.add(T.getDirectedEdges(),T.getNodes())}},Ti.prototype.createSubgraphs=function(u){for(var m=new Xe,v=u.getNodes().iterator();v.hasNext();){var w=v.next();if(!w.isVisited()){var T=new xi;T.create(w),m.add(T)}}return Xi.sort(m,Xi.reverseOrder()),m},Ti.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},Ti.prototype.getNoder=function(u){if(this._workingNoder!==null)return this._workingNoder;var m=new $a,v=new _e;return v.setPrecisionModel(u),m.setSegmentIntersector(new Fi(v)),m},Ti.prototype.buffer=function(u,m){var v=this._workingPrecisionModel;v===null&&(v=u.getPrecisionModel()),this._geomFact=u.getFactory();var w=new Ci(v,this._bufParams),T=new qi(u,m,w).getCurves();if(T.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(T,v),this._graph=new Jt(new Xa),this._graph.addEdges(this._edgeList.getEdges());var H=this.createSubgraphs(this._graph),G=new Si(this._geomFact);this.buildSubgraphs(H,G);var K=G.getPolygons();return K.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(K)},Ti.prototype.computeNodedEdges=function(u,m){var v=this.getNoder(m);v.computeNodes(u);for(var w=v.getNodedSubstrings().iterator();w.hasNext();){var T=w.next(),H=T.getCoordinates();if(H.length!==2||!H[0].equals2D(H[1])){var G=T.getData(),K=new Za(T.getCoordinates(),new kt(G));this.insertUniqueEdge(K)}}},Ti.prototype.setNoder=function(u){this._workingNoder=u},Ti.prototype.interfaces_=function(){return[]},Ti.prototype.getClass=function(){return Ti},Ti.depthDelta=function(u){var m=u.getLocation(0,Be.LEFT),v=u.getLocation(0,Be.RIGHT);return m===q.INTERIOR&&v===q.EXTERIOR?1:m===q.EXTERIOR&&v===q.INTERIOR?-1:0},Ti.convertSegStrings=function(u){for(var m=new tt,v=new Xe;u.hasNext();){var w=u.next(),T=m.createLineString(w.getCoordinates());v.add(T)}return m.buildGeometry(v)};var j0=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var u=arguments[0],m=arguments[1];this._noder=u,this._scaleFactor=m,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(arguments.length===4){var v=arguments[0],w=arguments[1],T=arguments[2],H=arguments[3];this._noder=v,this._scaleFactor=w,this._offsetX=T,this._offsetY=H,this._isScaled=!this.isIntegerPrecision()}};j0.prototype.rescale=function(){if(j(arguments[0],It))for(var u=arguments[0].iterator();u.hasNext();){var m=u.next();this.rescale(m.getCoordinates())}else if(arguments[0]instanceof Array){for(var v=arguments[0],w=0;w<v.length;w++)v[w].x=v[w].x/this._scaleFactor+this._offsetX,v[w].y=v[w].y/this._scaleFactor+this._offsetY;v.length===2&&v[0].equals2D(v[1])&&ye.out.println(v)}},j0.prototype.scale=function(){if(j(arguments[0],It)){for(var u=arguments[0],m=new Xe,v=u.iterator();v.hasNext();){var w=v.next();m.add(new Zt(this.scale(w.getCoordinates()),w.getData()))}return m}if(arguments[0]instanceof Array){for(var T=arguments[0],H=new Array(T.length).fill(null),G=0;G<T.length;G++)H[G]=new F(Math.round((T[G].x-this._offsetX)*this._scaleFactor),Math.round((T[G].y-this._offsetY)*this._scaleFactor),T[G].z);return Mt.removeRepeatedPoints(H)}},j0.prototype.isIntegerPrecision=function(){return this._scaleFactor===1},j0.prototype.getNodedSubstrings=function(){var u=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(u),u},j0.prototype.computeNodes=function(u){var m=u;this._isScaled&&(m=this.scale(u)),this._noder.computeNodes(m)},j0.prototype.interfaces_=function(){return[O0]},j0.prototype.getClass=function(){return j0};var g0=function(){this._li=new _e,this._segStrings=null;var u=arguments[0];this._segStrings=u},us={fact:{configurable:!0}};g0.prototype.checkEndPtVertexIntersections=function(){if(arguments.length===0)for(var u=this._segStrings.iterator();u.hasNext();){var m=u.next().getCoordinates();this.checkEndPtVertexIntersections(m[0],this._segStrings),this.checkEndPtVertexIntersections(m[m.length-1],this._segStrings)}else if(arguments.length===2){for(var v=arguments[0],w=arguments[1].iterator();w.hasNext();)for(var T=w.next().getCoordinates(),H=1;H<T.length-1;H++)if(T[H].equals(v))throw new ve("found endpt/interior pt intersection at index "+H+" :pt "+v)}},g0.prototype.checkInteriorIntersections=function(){if(arguments.length===0)for(var u=this._segStrings.iterator();u.hasNext();)for(var m=u.next(),v=this._segStrings.iterator();v.hasNext();){var w=v.next();this.checkInteriorIntersections(m,w)}else if(arguments.length===2)for(var T=arguments[0],H=arguments[1],G=T.getCoordinates(),K=H.getCoordinates(),de=0;de<G.length-1;de++)for(var Le=0;Le<K.length-1;Le++)this.checkInteriorIntersections(T,de,H,Le);else if(arguments.length===4){var He=arguments[0],ze=arguments[1],it=arguments[2],at=arguments[3];if(He===it&&ze===at)return null;var _t=He.getCoordinates()[ze],vt=He.getCoordinates()[ze+1],Ft=it.getCoordinates()[at],si=it.getCoordinates()[at+1];if(this._li.computeIntersection(_t,vt,Ft,si),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,_t,vt)||this.hasInteriorIntersection(this._li,Ft,si)))throw new ve("found non-noded intersection at "+_t+"-"+vt+" and "+Ft+"-"+si)}},g0.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},g0.prototype.checkCollapses=function(){if(arguments.length===0)for(var u=this._segStrings.iterator();u.hasNext();){var m=u.next();this.checkCollapses(m)}else if(arguments.length===1)for(var v=arguments[0].getCoordinates(),w=0;w<v.length-2;w++)this.checkCollapse(v[w],v[w+1],v[w+2])},g0.prototype.hasInteriorIntersection=function(u,m,v){for(var w=0;w<u.getIntersectionNum();w++){var T=u.getIntersection(w);if(!T.equals(m)&&!T.equals(v))return!0}return!1},g0.prototype.checkCollapse=function(u,m,v){if(u.equals(v))throw new ve("found non-noded collapse at "+g0.fact.createLineString([u,m,v]))},g0.prototype.interfaces_=function(){return[]},g0.prototype.getClass=function(){return g0},us.fact.get=function(){return new tt},Object.defineProperties(g0,us);var Hi=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var u=arguments[0],m=arguments[1],v=arguments[2];if(this._originalPt=u,this._pt=u,this._scaleFactor=m,this._li=v,m<=0)throw new D("Scale factor must be non-zero");m!==1&&(this._pt=new F(this.scale(u.x),this.scale(u.y)),this._p0Scaled=new F,this._p1Scaled=new F),this.initCorners(this._pt)},hs={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};Hi.prototype.intersectsScaled=function(u,m){var v=Math.min(u.x,m.x),w=Math.max(u.x,m.x),T=Math.min(u.y,m.y),H=Math.max(u.y,m.y),G=this._maxx<v||this._minx>w||this._maxy<T||this._miny>H;if(G)return!1;var K=this.intersectsToleranceSquare(u,m);return U.isTrue(!(G&&K),"Found bad envelope test"),K},Hi.prototype.initCorners=function(u){this._minx=u.x-.5,this._maxx=u.x+.5,this._miny=u.y-.5,this._maxy=u.y+.5,this._corner[0]=new F(this._maxx,this._maxy),this._corner[1]=new F(this._minx,this._maxy),this._corner[2]=new F(this._minx,this._miny),this._corner[3]=new F(this._maxx,this._miny)},Hi.prototype.intersects=function(u,m){return this._scaleFactor===1?this.intersectsScaled(u,m):(this.copyScaled(u,this._p0Scaled),this.copyScaled(m,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},Hi.prototype.scale=function(u){return Math.round(u*this._scaleFactor)},Hi.prototype.getCoordinate=function(){return this._originalPt},Hi.prototype.copyScaled=function(u,m){m.x=this.scale(u.x),m.y=this.scale(u.y)},Hi.prototype.getSafeEnvelope=function(){if(this._safeEnv===null){var u=Hi.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new ae(this._originalPt.x-u,this._originalPt.x+u,this._originalPt.y-u,this._originalPt.y+u)}return this._safeEnv},Hi.prototype.intersectsPixelClosure=function(u,m){return this._li.computeIntersection(u,m,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(u,m,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(u,m,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(u,m,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))},Hi.prototype.intersectsToleranceSquare=function(u,m){var v=!1,w=!1;return this._li.computeIntersection(u,m,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(u,m,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(v=!0),this._li.computeIntersection(u,m,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(w=!0),this._li.computeIntersection(u,m,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!v||!w)||!!u.equals(this._pt)||!!m.equals(this._pt))))},Hi.prototype.addSnappedNode=function(u,m){var v=u.getCoordinate(m),w=u.getCoordinate(m+1);return!!this.intersects(v,w)&&(u.addIntersection(this.getCoordinate(),m),!0)},Hi.prototype.interfaces_=function(){return[]},Hi.prototype.getClass=function(){return Hi},hs.SAFE_ENV_EXPANSION_FACTOR.get=function(){return .75},Object.defineProperties(Hi,hs);var Fa=function(){this.tempEnv1=new ae,this.selectedSegment=new dt};Fa.prototype.select=function(){if(arguments.length!==1){if(arguments.length===2){var u=arguments[0],m=arguments[1];u.getLineSegment(m,this.selectedSegment),this.select(this.selectedSegment)}}},Fa.prototype.interfaces_=function(){return[]},Fa.prototype.getClass=function(){return Fa};var La=function(){this._index=null;var u=arguments[0];this._index=u},ds={HotPixelSnapAction:{configurable:!0}};La.prototype.snap=function(){if(arguments.length===1){var u=arguments[0];return this.snap(u,null,-1)}if(arguments.length===3){var m=arguments[0],v=arguments[1],w=arguments[2],T=m.getSafeEnvelope(),H=new fs(m,v,w);return this._index.query(T,{interfaces_:function(){return[P0]},visitItem:function(G){G.select(T,H)}}),H.isNodeAdded()}},La.prototype.interfaces_=function(){return[]},La.prototype.getClass=function(){return La},ds.HotPixelSnapAction.get=function(){return fs},Object.defineProperties(La,ds);var fs=function(u){function m(){u.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var v=arguments[0],w=arguments[1],T=arguments[2];this._hotPixel=v,this._parentEdge=w,this._hotPixelVertexIndex=T}return u&&(m.__proto__=u),m.prototype=Object.create(u&&u.prototype),m.prototype.constructor=m,m.prototype.isNodeAdded=function(){return this._isNodeAdded},m.prototype.select=function(){if(arguments.length!==2)return u.prototype.select.apply(this,arguments);var v=arguments[0],w=arguments[1],T=v.getContext();if(this._parentEdge!==null&&T===this._parentEdge&&w===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(T,w)},m.prototype.interfaces_=function(){return[]},m.prototype.getClass=function(){return m},m}(Fa),ba=function(){this._li=null,this._interiorIntersections=null;var u=arguments[0];this._li=u,this._interiorIntersections=new Xe};ba.prototype.processIntersections=function(u,m,v,w){if(u===v&&m===w)return null;var T=u.getCoordinates()[m],H=u.getCoordinates()[m+1],G=v.getCoordinates()[w],K=v.getCoordinates()[w+1];if(this._li.computeIntersection(T,H,G,K),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var de=0;de<this._li.getIntersectionNum();de++)this._interiorIntersections.add(this._li.getIntersection(de));u.addIntersections(this._li,m,0),v.addIntersections(this._li,w,1)}},ba.prototype.isDone=function(){return!1},ba.prototype.getInteriorIntersections=function(){return this._interiorIntersections},ba.prototype.interfaces_=function(){return[k0]},ba.prototype.getClass=function(){return ba};var M0=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var u=arguments[0];this._pm=u,this._li=new _e,this._li.setPrecisionModel(u),this._scaleFactor=u.getScale()};M0.prototype.checkCorrectness=function(u){var m=Zt.getNodedSubstrings(u),v=new g0(m);try{v.checkValid()}catch(w){if(!(w instanceof pe))throw w;w.printStackTrace()}},M0.prototype.getNodedSubstrings=function(){return Zt.getNodedSubstrings(this._nodedSegStrings)},M0.prototype.snapRound=function(u,m){var v=this.findInteriorIntersections(u,m);this.computeIntersectionSnaps(v),this.computeVertexSnaps(u)},M0.prototype.findInteriorIntersections=function(u,m){var v=new ba(m);return this._noder.setSegmentIntersector(v),this._noder.computeNodes(u),v.getInteriorIntersections()},M0.prototype.computeVertexSnaps=function(){if(j(arguments[0],It))for(var u=arguments[0].iterator();u.hasNext();){var m=u.next();this.computeVertexSnaps(m)}else if(arguments[0]instanceof Zt)for(var v=arguments[0],w=v.getCoordinates(),T=0;T<w.length;T++){var H=new Hi(w[T],this._scaleFactor,this._li);this._pointSnapper.snap(H,v,T)&&v.addIntersection(w[T],T)}},M0.prototype.computeNodes=function(u){this._nodedSegStrings=u,this._noder=new $a,this._pointSnapper=new La(this._noder.getIndex()),this.snapRound(u,this._li)},M0.prototype.computeIntersectionSnaps=function(u){for(var m=u.iterator();m.hasNext();){var v=m.next(),w=new Hi(v,this._scaleFactor,this._li);this._pointSnapper.snap(w)}},M0.prototype.interfaces_=function(){return[O0]},M0.prototype.getClass=function(){return M0};var di=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Ot,this._resultGeometry=null,this._saveException=null,arguments.length===1){var u=arguments[0];this._argGeom=u}else if(arguments.length===2){var m=arguments[0],v=arguments[1];this._argGeom=m,this._bufParams=v}},Aa={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};di.prototype.bufferFixedPrecision=function(u){var m=new j0(new M0(new Ce(1)),u.getScale()),v=new Ti(this._bufParams);v.setWorkingPrecisionModel(u),v.setNoder(m),this._resultGeometry=v.buffer(this._argGeom,this._distance)},di.prototype.bufferReducedPrecision=function(){var u=this;if(arguments.length===0){for(var m=di.MAX_PRECISION_DIGITS;m>=0;m--){try{u.bufferReducedPrecision(m)}catch(H){if(!(H instanceof d0))throw H;u._saveException=H}if(u._resultGeometry!==null)return null}throw this._saveException}if(arguments.length===1){var v=arguments[0],w=di.precisionScaleFactor(this._argGeom,this._distance,v),T=new Ce(w);this.bufferFixedPrecision(T)}},di.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var u=this._argGeom.getFactory().getPrecisionModel();u.getType()===Ce.FIXED?this.bufferFixedPrecision(u):this.bufferReducedPrecision()},di.prototype.setQuadrantSegments=function(u){this._bufParams.setQuadrantSegments(u)},di.prototype.bufferOriginalPrecision=function(){try{var u=new Ti(this._bufParams);this._resultGeometry=u.buffer(this._argGeom,this._distance)}catch(m){if(!(m instanceof ve))throw m;this._saveException=m}},di.prototype.getResultGeometry=function(u){return this._distance=u,this.computeGeometry(),this._resultGeometry},di.prototype.setEndCapStyle=function(u){this._bufParams.setEndCapStyle(u)},di.prototype.interfaces_=function(){return[]},di.prototype.getClass=function(){return di},di.bufferOp=function(){if(arguments.length===2){var u=arguments[0],m=arguments[1];return new di(u).getResultGeometry(m)}if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Ue&&typeof arguments[1]=="number"){var v=arguments[0],w=arguments[1],T=arguments[2],H=new di(v);return H.setQuadrantSegments(T),H.getResultGeometry(w)}if(arguments[2]instanceof Ot&&arguments[0]instanceof Ue&&typeof arguments[1]=="number"){var G=arguments[0],K=arguments[1],de=arguments[2];return new di(G,de).getResultGeometry(K)}}else if(arguments.length===4){var Le=arguments[0],He=arguments[1],ze=arguments[2],it=arguments[3],at=new di(Le);return at.setQuadrantSegments(ze),at.setEndCapStyle(it),at.getResultGeometry(He)}},di.precisionScaleFactor=function(u,m,v){var w=u.getEnvelopeInternal(),T=ie.max(Math.abs(w.getMaxX()),Math.abs(w.getMaxY()),Math.abs(w.getMinX()),Math.abs(w.getMinY()))+2*(m>0?m:0),H=v-Math.trunc(Math.log(T)/Math.log(10)+1);return Math.pow(10,H)},Aa.CAP_ROUND.get=function(){return Ot.CAP_ROUND},Aa.CAP_BUTT.get=function(){return Ot.CAP_FLAT},Aa.CAP_FLAT.get=function(){return Ot.CAP_FLAT},Aa.CAP_SQUARE.get=function(){return Ot.CAP_SQUARE},Aa.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(di,Aa);var Li=function(){this._pt=[new F,new F],this._distance=R.NaN,this._isNull=!0};Li.prototype.getCoordinates=function(){return this._pt},Li.prototype.getCoordinate=function(u){return this._pt[u]},Li.prototype.setMinimum=function(){if(arguments.length===1){var u=arguments[0];this.setMinimum(u._pt[0],u._pt[1])}else if(arguments.length===2){var m=arguments[0],v=arguments[1];if(this._isNull)return this.initialize(m,v),null;var w=m.distance(v);w<this._distance&&this.initialize(m,v,w)}},Li.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var u=arguments[0],m=arguments[1];this._pt[0].setCoordinate(u),this._pt[1].setCoordinate(m),this._distance=u.distance(m),this._isNull=!1}else if(arguments.length===3){var v=arguments[0],w=arguments[1],T=arguments[2];this._pt[0].setCoordinate(v),this._pt[1].setCoordinate(w),this._distance=T,this._isNull=!1}},Li.prototype.getDistance=function(){return this._distance},Li.prototype.setMaximum=function(){if(arguments.length===1){var u=arguments[0];this.setMaximum(u._pt[0],u._pt[1])}else if(arguments.length===2){var m=arguments[0],v=arguments[1];if(this._isNull)return this.initialize(m,v),null;var w=m.distance(v);w>this._distance&&this.initialize(m,v,w)}},Li.prototype.interfaces_=function(){return[]},Li.prototype.getClass=function(){return Li};var T0=function(){};T0.prototype.interfaces_=function(){return[]},T0.prototype.getClass=function(){return T0},T0.computeDistance=function(){if(arguments[2]instanceof Li&&arguments[0]instanceof qt&&arguments[1]instanceof F)for(var u=arguments[0],m=arguments[1],v=arguments[2],w=u.getCoordinates(),T=new dt,H=0;H<w.length-1;H++){T.setCoordinates(w[H],w[H+1]);var G=T.closestPoint(m);v.setMinimum(G,m)}else if(arguments[2]instanceof Li&&arguments[0]instanceof Yt&&arguments[1]instanceof F){var K=arguments[0],de=arguments[1],Le=arguments[2];T0.computeDistance(K.getExteriorRing(),de,Le);for(var He=0;He<K.getNumInteriorRing();He++)T0.computeDistance(K.getInteriorRingN(He),de,Le)}else if(arguments[2]instanceof Li&&arguments[0]instanceof Ue&&arguments[1]instanceof F){var ze=arguments[0],it=arguments[1],at=arguments[2];if(ze instanceof qt)T0.computeDistance(ze,it,at);else if(ze instanceof Yt)T0.computeDistance(ze,it,at);else if(ze instanceof ri)for(var _t=ze,vt=0;vt<_t.getNumGeometries();vt++){var Ft=_t.getGeometryN(vt);T0.computeDistance(Ft,it,at)}else at.setMinimum(ze.getCoordinate(),it)}else if(arguments[2]instanceof Li&&arguments[0]instanceof dt&&arguments[1]instanceof F){var si=arguments[0],Di=arguments[1],R0=arguments[2],ta=si.closestPoint(Di);R0.setMinimum(ta,Di)}};var ra=function(u){this._maxPtDist=new Li,this._inputGeom=u||null},as={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};ra.prototype.computeMaxMidpointDistance=function(u){var m=new V0(this._inputGeom);u.apply(m),this._maxPtDist.setMaximum(m.getMaxPointDistance())},ra.prototype.computeMaxVertexDistance=function(u){var m=new ya(this._inputGeom);u.apply(m),this._maxPtDist.setMaximum(m.getMaxPointDistance())},ra.prototype.findDistance=function(u){return this.computeMaxVertexDistance(u),this.computeMaxMidpointDistance(u),this._maxPtDist.getDistance()},ra.prototype.getDistancePoints=function(){return this._maxPtDist},ra.prototype.interfaces_=function(){return[]},ra.prototype.getClass=function(){return ra},as.MaxPointDistanceFilter.get=function(){return ya},as.MaxMidpointDistanceFilter.get=function(){return V0},Object.defineProperties(ra,as);var ya=function(u){this._maxPtDist=new Li,this._minPtDist=new Li,this._geom=u||null};ya.prototype.filter=function(u){this._minPtDist.initialize(),T0.computeDistance(this._geom,u,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},ya.prototype.getMaxPointDistance=function(){return this._maxPtDist},ya.prototype.interfaces_=function(){return[Pt]},ya.prototype.getClass=function(){return ya};var V0=function(u){this._maxPtDist=new Li,this._minPtDist=new Li,this._geom=u||null};V0.prototype.filter=function(u,m){if(m===0)return null;var v=u.getCoordinate(m-1),w=u.getCoordinate(m),T=new F((v.x+w.x)/2,(v.y+w.y)/2);this._minPtDist.initialize(),T0.computeDistance(this._geom,T,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},V0.prototype.isDone=function(){return!1},V0.prototype.isGeometryChanged=function(){return!1},V0.prototype.getMaxPointDistance=function(){return this._maxPtDist},V0.prototype.interfaces_=function(){return[yi]},V0.prototype.getClass=function(){return V0};var $0=function(u){this._comps=u||null};$0.prototype.filter=function(u){u instanceof Yt&&this._comps.add(u)},$0.prototype.interfaces_=function(){return[ne]},$0.prototype.getClass=function(){return $0},$0.getPolygons=function(){if(arguments.length===1){var u=arguments[0];return $0.getPolygons(u,new Xe)}if(arguments.length===2){var m=arguments[0],v=arguments[1];return m instanceof Yt?v.add(m):m instanceof ri&&m.apply(new $0(v)),v}};var fi=function(){if(this._lines=null,this._isForcedToLineString=!1,arguments.length===1){var u=arguments[0];this._lines=u}else if(arguments.length===2){var m=arguments[0],v=arguments[1];this._lines=m,this._isForcedToLineString=v}};fi.prototype.filter=function(u){if(this._isForcedToLineString&&u instanceof Yi){var m=u.getFactory().createLineString(u.getCoordinateSequence());return this._lines.add(m),null}u instanceof qt&&this._lines.add(u)},fi.prototype.setForceToLineString=function(u){this._isForcedToLineString=u},fi.prototype.interfaces_=function(){return[Ze]},fi.prototype.getClass=function(){return fi},fi.getGeometry=function(){if(arguments.length===1){var u=arguments[0];return u.getFactory().buildGeometry(fi.getLines(u))}if(arguments.length===2){var m=arguments[0],v=arguments[1];return m.getFactory().buildGeometry(fi.getLines(m,v))}},fi.getLines=function(){if(arguments.length===1){var u=arguments[0];return fi.getLines(u,!1)}if(arguments.length===2){if(j(arguments[0],It)&&j(arguments[1],It)){for(var m=arguments[0],v=arguments[1],w=m.iterator();w.hasNext();){var T=w.next();fi.getLines(T,v)}return v}if(arguments[0]instanceof Ue&&typeof arguments[1]=="boolean"){var H=arguments[0],G=arguments[1],K=new Xe;return H.apply(new fi(K,G)),K}if(arguments[0]instanceof Ue&&j(arguments[1],It)){var de=arguments[0],Le=arguments[1];return de instanceof qt?Le.add(de):de.apply(new fi(Le)),Le}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&j(arguments[0],It)&&j(arguments[1],It)){for(var He=arguments[0],ze=arguments[1],it=arguments[2],at=He.iterator();at.hasNext();){var _t=at.next();fi.getLines(_t,ze,it)}return ze}if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Ue&&j(arguments[1],It)){var vt=arguments[0],Ft=arguments[1],si=arguments[2];return vt.apply(new fi(Ft,si)),Ft}}};var _0=function(){if(this._boundaryRule=Et.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,arguments.length!==0){if(arguments.length===1){var u=arguments[0];if(u===null)throw new D("Rule must be non-null");this._boundaryRule=u}}};_0.prototype.locateInternal=function(){if(arguments[0]instanceof F&&arguments[1]instanceof Yt){var u=arguments[0],m=arguments[1];if(m.isEmpty())return q.EXTERIOR;var v=m.getExteriorRing(),w=this.locateInPolygonRing(u,v);if(w===q.EXTERIOR)return q.EXTERIOR;if(w===q.BOUNDARY)return q.BOUNDARY;for(var T=0;T<m.getNumInteriorRing();T++){var H=m.getInteriorRingN(T),G=this.locateInPolygonRing(u,H);if(G===q.INTERIOR)return q.EXTERIOR;if(G===q.BOUNDARY)return q.BOUNDARY}return q.INTERIOR}if(arguments[0]instanceof F&&arguments[1]instanceof qt){var K=arguments[0],de=arguments[1];if(!de.getEnvelopeInternal().intersects(K))return q.EXTERIOR;var Le=de.getCoordinates();return de.isClosed()||!K.equals(Le[0])&&!K.equals(Le[Le.length-1])?Me.isOnLine(K,Le)?q.INTERIOR:q.EXTERIOR:q.BOUNDARY}if(arguments[0]instanceof F&&arguments[1]instanceof ei){var He=arguments[0];return arguments[1].getCoordinate().equals2D(He)?q.INTERIOR:q.EXTERIOR}},_0.prototype.locateInPolygonRing=function(u,m){return m.getEnvelopeInternal().intersects(u)?Me.locatePointInRing(u,m.getCoordinates()):q.EXTERIOR},_0.prototype.intersects=function(u,m){return this.locate(u,m)!==q.EXTERIOR},_0.prototype.updateLocationInfo=function(u){u===q.INTERIOR&&(this._isIn=!0),u===q.BOUNDARY&&this._numBoundaries++},_0.prototype.computeLocation=function(u,m){if(m instanceof ei&&this.updateLocationInfo(this.locateInternal(u,m)),m instanceof qt)this.updateLocationInfo(this.locateInternal(u,m));else if(m instanceof Yt)this.updateLocationInfo(this.locateInternal(u,m));else if(m instanceof h0)for(var v=m,w=0;w<v.getNumGeometries();w++){var T=v.getGeometryN(w);this.updateLocationInfo(this.locateInternal(u,T))}else if(m instanceof se)for(var H=m,G=0;G<H.getNumGeometries();G++){var K=H.getGeometryN(G);this.updateLocationInfo(this.locateInternal(u,K))}else if(m instanceof ri)for(var de=new r0(m);de.hasNext();){var Le=de.next();Le!==m&&this.computeLocation(u,Le)}},_0.prototype.locate=function(u,m){return m.isEmpty()?q.EXTERIOR:m instanceof qt?this.locateInternal(u,m):m instanceof Yt?this.locateInternal(u,m):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(u,m),this._boundaryRule.isInBoundary(this._numBoundaries)?q.BOUNDARY:this._numBoundaries>0||this._isIn?q.INTERIOR:q.EXTERIOR)},_0.prototype.interfaces_=function(){return[]},_0.prototype.getClass=function(){return _0};var Ai=function u(){if(this._component=null,this._segIndex=null,this._pt=null,arguments.length===2){var m=arguments[0],v=arguments[1];u.call(this,m,u.INSIDE_AREA,v)}else if(arguments.length===3){var w=arguments[0],T=arguments[1],H=arguments[2];this._component=w,this._segIndex=T,this._pt=H}},ps={INSIDE_AREA:{configurable:!0}};Ai.prototype.isInsideArea=function(){return this._segIndex===Ai.INSIDE_AREA},Ai.prototype.getCoordinate=function(){return this._pt},Ai.prototype.getGeometryComponent=function(){return this._component},Ai.prototype.getSegmentIndex=function(){return this._segIndex},Ai.prototype.interfaces_=function(){return[]},Ai.prototype.getClass=function(){return Ai},ps.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Ai,ps);var U0=function(u){this._pts=u||null};U0.prototype.filter=function(u){u instanceof ei&&this._pts.add(u)},U0.prototype.interfaces_=function(){return[ne]},U0.prototype.getClass=function(){return U0},U0.getPoints=function(){if(arguments.length===1){var u=arguments[0];return u instanceof ei?Xi.singletonList(u):U0.getPoints(u,new Xe)}if(arguments.length===2){var m=arguments[0],v=arguments[1];return m instanceof ei?v.add(m):m instanceof ri&&m.apply(new U0(v)),v}};var va=function(){this._locations=null;var u=arguments[0];this._locations=u};va.prototype.filter=function(u){(u instanceof ei||u instanceof qt||u instanceof Yt)&&this._locations.add(new Ai(u,0,u.getCoordinate()))},va.prototype.interfaces_=function(){return[ne]},va.prototype.getClass=function(){return va},va.getLocations=function(u){var m=new Xe;return u.apply(new va(m)),m};var mi=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new _0,this._minDistanceLocation=null,this._minDistance=R.MAX_VALUE,arguments.length===2){var u=arguments[0],m=arguments[1];this._geom=[u,m],this._terminateDistance=0}else if(arguments.length===3){var v=arguments[0],w=arguments[1],T=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=v,this._geom[1]=w,this._terminateDistance=T}};mi.prototype.computeContainmentDistance=function(){if(arguments.length===0){var u=new Array(2).fill(null);if(this.computeContainmentDistance(0,u),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,u)}else if(arguments.length===2){var m=arguments[0],v=arguments[1],w=1-m,T=$0.getPolygons(this._geom[m]);if(T.size()>0){var H=va.getLocations(this._geom[w]);if(this.computeContainmentDistance(H,T,v),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[w]=v[0],this._minDistanceLocation[m]=v[1],null}}else if(arguments.length===3){if(arguments[2]instanceof Array&&j(arguments[0],Kt)&&j(arguments[1],Kt)){for(var G=arguments[0],K=arguments[1],de=arguments[2],Le=0;Le<G.size();Le++)for(var He=G.get(Le),ze=0;ze<K.size();ze++)if(this.computeContainmentDistance(He,K.get(ze),de),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Ai&&arguments[1]instanceof Yt){var it=arguments[0],at=arguments[1],_t=arguments[2],vt=it.getCoordinate();if(q.EXTERIOR!==this._ptLocator.locate(vt,at))return this._minDistance=0,_t[0]=it,_t[1]=new Ai(at,vt),null}}},mi.prototype.computeMinDistanceLinesPoints=function(u,m,v){for(var w=0;w<u.size();w++)for(var T=u.get(w),H=0;H<m.size();H++){var G=m.get(H);if(this.computeMinDistance(T,G,v),this._minDistance<=this._terminateDistance)return null}},mi.prototype.computeFacetDistance=function(){var u=new Array(2).fill(null),m=fi.getLines(this._geom[0]),v=fi.getLines(this._geom[1]),w=U0.getPoints(this._geom[0]),T=U0.getPoints(this._geom[1]);return this.computeMinDistanceLines(m,v,u),this.updateMinDistance(u,!1),this._minDistance<=this._terminateDistance?null:(u[0]=null,u[1]=null,this.computeMinDistanceLinesPoints(m,T,u),this.updateMinDistance(u,!1),this._minDistance<=this._terminateDistance?null:(u[0]=null,u[1]=null,this.computeMinDistanceLinesPoints(v,w,u),this.updateMinDistance(u,!0),this._minDistance<=this._terminateDistance?null:(u[0]=null,u[1]=null,this.computeMinDistancePoints(w,T,u),void this.updateMinDistance(u,!1))))},mi.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},mi.prototype.updateMinDistance=function(u,m){if(u[0]===null)return null;m?(this._minDistanceLocation[0]=u[1],this._minDistanceLocation[1]=u[0]):(this._minDistanceLocation[0]=u[0],this._minDistanceLocation[1]=u[1])},mi.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},mi.prototype.computeMinDistance=function(){if(arguments.length===0){if(this._minDistanceLocation!==null||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(arguments.length===3){if(arguments[2]instanceof Array&&arguments[0]instanceof qt&&arguments[1]instanceof ei){var u=arguments[0],m=arguments[1],v=arguments[2];if(u.getEnvelopeInternal().distance(m.getEnvelopeInternal())>this._minDistance)return null;for(var w=u.getCoordinates(),T=m.getCoordinate(),H=0;H<w.length-1;H++){var G=Me.distancePointLine(T,w[H],w[H+1]);if(G<this._minDistance){this._minDistance=G;var K=new dt(w[H],w[H+1]).closestPoint(T);v[0]=new Ai(u,H,K),v[1]=new Ai(m,0,T)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof qt&&arguments[1]instanceof qt){var de=arguments[0],Le=arguments[1],He=arguments[2];if(de.getEnvelopeInternal().distance(Le.getEnvelopeInternal())>this._minDistance)return null;for(var ze=de.getCoordinates(),it=Le.getCoordinates(),at=0;at<ze.length-1;at++)for(var _t=0;_t<it.length-1;_t++){var vt=Me.distanceLineLine(ze[at],ze[at+1],it[_t],it[_t+1]);if(vt<this._minDistance){this._minDistance=vt;var Ft=new dt(ze[at],ze[at+1]),si=new dt(it[_t],it[_t+1]),Di=Ft.closestPoints(si);He[0]=new Ai(de,at,Di[0]),He[1]=new Ai(Le,_t,Di[1])}if(this._minDistance<=this._terminateDistance)return null}}}},mi.prototype.computeMinDistancePoints=function(u,m,v){for(var w=0;w<u.size();w++)for(var T=u.get(w),H=0;H<m.size();H++){var G=m.get(H),K=T.getCoordinate().distance(G.getCoordinate());if(K<this._minDistance&&(this._minDistance=K,v[0]=new Ai(T,0,T.getCoordinate()),v[1]=new Ai(G,0,G.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},mi.prototype.distance=function(){if(this._geom[0]===null||this._geom[1]===null)throw new D("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},mi.prototype.computeMinDistanceLines=function(u,m,v){for(var w=0;w<u.size();w++)for(var T=u.get(w),H=0;H<m.size();H++){var G=m.get(H);if(this.computeMinDistance(T,G,v),this._minDistance<=this._terminateDistance)return null}},mi.prototype.interfaces_=function(){return[]},mi.prototype.getClass=function(){return mi},mi.distance=function(u,m){return new mi(u,m).distance()},mi.isWithinDistance=function(u,m,v){return new mi(u,m,v).distance()<=v},mi.nearestPoints=function(u,m){return new mi(u,m).nearestPoints()};var wi=function(){this._pt=[new F,new F],this._distance=R.NaN,this._isNull=!0};wi.prototype.getCoordinates=function(){return this._pt},wi.prototype.getCoordinate=function(u){return this._pt[u]},wi.prototype.setMinimum=function(){if(arguments.length===1){var u=arguments[0];this.setMinimum(u._pt[0],u._pt[1])}else if(arguments.length===2){var m=arguments[0],v=arguments[1];if(this._isNull)return this.initialize(m,v),null;var w=m.distance(v);w<this._distance&&this.initialize(m,v,w)}},wi.prototype.initialize=function(){if(arguments.length===0)this._isNull=!0;else if(arguments.length===2){var u=arguments[0],m=arguments[1];this._pt[0].setCoordinate(u),this._pt[1].setCoordinate(m),this._distance=u.distance(m),this._isNull=!1}else if(arguments.length===3){var v=arguments[0],w=arguments[1],T=arguments[2];this._pt[0].setCoordinate(v),this._pt[1].setCoordinate(w),this._distance=T,this._isNull=!1}},wi.prototype.toString=function(){return Je.toLineString(this._pt[0],this._pt[1])},wi.prototype.getDistance=function(){return this._distance},wi.prototype.setMaximum=function(){if(arguments.length===1){var u=arguments[0];this.setMaximum(u._pt[0],u._pt[1])}else if(arguments.length===2){var m=arguments[0],v=arguments[1];if(this._isNull)return this.initialize(m,v),null;var w=m.distance(v);w>this._distance&&this.initialize(m,v,w)}},wi.prototype.interfaces_=function(){return[]},wi.prototype.getClass=function(){return wi};var b0=function(){};b0.prototype.interfaces_=function(){return[]},b0.prototype.getClass=function(){return b0},b0.computeDistance=function(){if(arguments[2]instanceof wi&&arguments[0]instanceof qt&&arguments[1]instanceof F)for(var u=arguments[0],m=arguments[1],v=arguments[2],w=new dt,T=u.getCoordinates(),H=0;H<T.length-1;H++){w.setCoordinates(T[H],T[H+1]);var G=w.closestPoint(m);v.setMinimum(G,m)}else if(arguments[2]instanceof wi&&arguments[0]instanceof Yt&&arguments[1]instanceof F){var K=arguments[0],de=arguments[1],Le=arguments[2];b0.computeDistance(K.getExteriorRing(),de,Le);for(var He=0;He<K.getNumInteriorRing();He++)b0.computeDistance(K.getInteriorRingN(He),de,Le)}else if(arguments[2]instanceof wi&&arguments[0]instanceof Ue&&arguments[1]instanceof F){var ze=arguments[0],it=arguments[1],at=arguments[2];if(ze instanceof qt)b0.computeDistance(ze,it,at);else if(ze instanceof Yt)b0.computeDistance(ze,it,at);else if(ze instanceof ri)for(var _t=ze,vt=0;vt<_t.getNumGeometries();vt++){var Ft=_t.getGeometryN(vt);b0.computeDistance(Ft,it,at)}else at.setMinimum(ze.getCoordinate(),it)}else if(arguments[2]instanceof wi&&arguments[0]instanceof dt&&arguments[1]instanceof F){var si=arguments[0],Di=arguments[1],R0=arguments[2],ta=si.closestPoint(Di);R0.setMinimum(ta,Di)}};var a0=function(){this._g0=null,this._g1=null,this._ptDist=new wi,this._densifyFrac=0;var u=arguments[0],m=arguments[1];this._g0=u,this._g1=m},ss={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};a0.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},a0.prototype.setDensifyFraction=function(u){if(u>1||u<=0)throw new D("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=u},a0.prototype.compute=function(u,m){this.computeOrientedDistance(u,m,this._ptDist),this.computeOrientedDistance(m,u,this._ptDist)},a0.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},a0.prototype.computeOrientedDistance=function(u,m,v){var w=new Ca(m);if(u.apply(w),v.setMaximum(w.getMaxPointDistance()),this._densifyFrac>0){var T=new J0(m,this._densifyFrac);u.apply(T),v.setMaximum(T.getMaxPointDistance())}},a0.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},a0.prototype.interfaces_=function(){return[]},a0.prototype.getClass=function(){return a0},a0.distance=function(){if(arguments.length===2){var u=arguments[0],m=arguments[1];return new a0(u,m).distance()}if(arguments.length===3){var v=arguments[0],w=arguments[1],T=arguments[2],H=new a0(v,w);return H.setDensifyFraction(T),H.distance()}},ss.MaxPointDistanceFilter.get=function(){return Ca},ss.MaxDensifiedByFractionDistanceFilter.get=function(){return J0},Object.defineProperties(a0,ss);var Ca=function(){this._maxPtDist=new wi,this._minPtDist=new wi,this._euclideanDist=new b0,this._geom=null;var u=arguments[0];this._geom=u};Ca.prototype.filter=function(u){this._minPtDist.initialize(),b0.computeDistance(this._geom,u,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Ca.prototype.getMaxPointDistance=function(){return this._maxPtDist},Ca.prototype.interfaces_=function(){return[Pt]},Ca.prototype.getClass=function(){return Ca};var J0=function(){this._maxPtDist=new wi,this._minPtDist=new wi,this._geom=null,this._numSubSegs=0;var u=arguments[0],m=arguments[1];this._geom=u,this._numSubSegs=Math.trunc(Math.round(1/m))};J0.prototype.filter=function(u,m){if(m===0)return null;for(var v=u.getCoordinate(m-1),w=u.getCoordinate(m),T=(w.x-v.x)/this._numSubSegs,H=(w.y-v.y)/this._numSubSegs,G=0;G<this._numSubSegs;G++){var K=v.x+G*T,de=v.y+G*H,Le=new F(K,de);this._minPtDist.initialize(),b0.computeDistance(this._geom,Le,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},J0.prototype.isDone=function(){return!1},J0.prototype.isGeometryChanged=function(){return!1},J0.prototype.getMaxPointDistance=function(){return this._maxPtDist},J0.prototype.interfaces_=function(){return[yi]},J0.prototype.getClass=function(){return J0};var ji=function(u,m,v){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=u||null,this._bufDistance=m||null,this._result=v||null},ns={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};ji.prototype.checkMaximumDistance=function(u,m,v){var w=new a0(m,u);if(w.setDensifyFraction(.25),this._maxDistanceFound=w.orientedDistance(),this._maxDistanceFound>v){this._isValid=!1;var T=w.getCoordinates();this._errorLocation=T[1],this._errorIndicator=u.getFactory().createLineString(T),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Je.toLineString(T[0],T[1])+")"}},ji.prototype.isValid=function(){var u=Math.abs(this._bufDistance),m=ji.MAX_DISTANCE_DIFF_FRAC*u;return this._minValidDistance=u-m,this._maxValidDistance=u+m,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),ji.VERBOSE&&ye.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},ji.prototype.checkNegativeValid=function(){if(!(this._input instanceof Yt||this._input instanceof se||this._input instanceof ri))return null;var u=this.getPolygonLines(this._input);if(this.checkMinimumDistance(u,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(u,this._result,this._maxValidDistance)},ji.prototype.getErrorIndicator=function(){return this._errorIndicator},ji.prototype.checkMinimumDistance=function(u,m,v){var w=new mi(u,m,v);if(this._minDistanceFound=w.distance(),this._minDistanceFound<v){this._isValid=!1;var T=w.nearestPoints();this._errorLocation=w.nearestPoints()[1],this._errorIndicator=u.getFactory().createLineString(T),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Je.toLineString(T[0],T[1])+" )"}},ji.prototype.checkPositiveValid=function(){var u=this._result.getBoundary();if(this.checkMinimumDistance(this._input,u,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,u,this._maxValidDistance)},ji.prototype.getErrorLocation=function(){return this._errorLocation},ji.prototype.getPolygonLines=function(u){for(var m=new Xe,v=new fi(m),w=$0.getPolygons(u).iterator();w.hasNext();)w.next().apply(v);return u.getFactory().buildGeometry(m)},ji.prototype.getErrorMessage=function(){return this._errMsg},ji.prototype.interfaces_=function(){return[]},ji.prototype.getClass=function(){return ji},ns.VERBOSE.get=function(){return!1},ns.MAX_DISTANCE_DIFF_FRAC.get=function(){return .012},Object.defineProperties(ji,ns);var gi=function(u,m,v){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=u||null,this._distance=m||null,this._result=v||null},rs={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};gi.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},gi.prototype.checkEnvelope=function(){if(this._distance<0)return null;var u=this._distance*gi.MAX_ENV_DIFF_FRAC;u===0&&(u=.001);var m=new ae(this._input.getEnvelopeInternal());m.expandBy(this._distance);var v=new ae(this._result.getEnvelopeInternal());v.expandBy(u),v.contains(m)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(v)),this.report("Envelope")},gi.prototype.checkDistance=function(){var u=new ji(this._input,this._distance,this._result);u.isValid()||(this._isValid=!1,this._errorMsg=u.getErrorMessage(),this._errorLocation=u.getErrorLocation(),this._errorIndicator=u.getErrorIndicator()),this.report("Distance")},gi.prototype.checkArea=function(){var u=this._input.getArea(),m=this._result.getArea();this._distance>0&&u>m&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&u<m&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},gi.prototype.checkPolygonal=function(){this._result instanceof Yt||this._result instanceof se||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},gi.prototype.getErrorIndicator=function(){return this._errorIndicator},gi.prototype.getErrorLocation=function(){return this._errorLocation},gi.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},gi.prototype.report=function(u){if(!gi.VERBOSE)return null;ye.out.println("Check "+u+": "+(this._isValid?"passed":"FAILED"))},gi.prototype.getErrorMessage=function(){return this._errorMsg},gi.prototype.interfaces_=function(){return[]},gi.prototype.getClass=function(){return gi},gi.isValidMsg=function(u,m,v){var w=new gi(u,m,v);return w.isValid()?null:w.getErrorMessage()},gi.isValid=function(u,m,v){return!!new gi(u,m,v).isValid()},rs.VERBOSE.get=function(){return!1},rs.MAX_ENV_DIFF_FRAC.get=function(){return .012},Object.defineProperties(gi,rs);var v0=function(){this._pts=null,this._data=null;var u=arguments[0],m=arguments[1];this._pts=u,this._data=m};v0.prototype.getCoordinates=function(){return this._pts},v0.prototype.size=function(){return this._pts.length},v0.prototype.getCoordinate=function(u){return this._pts[u]},v0.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},v0.prototype.getSegmentOctant=function(u){return u===this._pts.length-1?-1:B0.octant(this.getCoordinate(u),this.getCoordinate(u+1))},v0.prototype.setData=function(u){this._data=u},v0.prototype.getData=function(){return this._data},v0.prototype.toString=function(){return Je.toLineString(new be(this._pts))},v0.prototype.interfaces_=function(){return[n0]},v0.prototype.getClass=function(){return v0};var _i=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new Xe,this._intersectionCount=0,this._keepIntersections=!0;var u=arguments[0];this._li=u,this._interiorIntersection=null};_i.prototype.getInteriorIntersection=function(){return this._interiorIntersection},_i.prototype.setCheckEndSegmentsOnly=function(u){this._isCheckEndSegmentsOnly=u},_i.prototype.getIntersectionSegments=function(){return this._intSegments},_i.prototype.count=function(){return this._intersectionCount},_i.prototype.getIntersections=function(){return this._intersections},_i.prototype.setFindAllIntersections=function(u){this._findAllIntersections=u},_i.prototype.setKeepIntersections=function(u){this._keepIntersections=u},_i.prototype.processIntersections=function(u,m,v,w){if(!this._findAllIntersections&&this.hasIntersection()||u===v&&m===w||this._isCheckEndSegmentsOnly&&!(this.isEndSegment(u,m)||this.isEndSegment(v,w)))return null;var T=u.getCoordinates()[m],H=u.getCoordinates()[m+1],G=v.getCoordinates()[w],K=v.getCoordinates()[w+1];this._li.computeIntersection(T,H,G,K),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=T,this._intSegments[1]=H,this._intSegments[2]=G,this._intSegments[3]=K,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},_i.prototype.isEndSegment=function(u,m){return m===0||m>=u.size()-2},_i.prototype.hasIntersection=function(){return this._interiorIntersection!==null},_i.prototype.isDone=function(){return!this._findAllIntersections&&this._interiorIntersection!==null},_i.prototype.interfaces_=function(){return[k0]},_i.prototype.getClass=function(){return _i},_i.createAllIntersectionsFinder=function(u){var m=new _i(u);return m.setFindAllIntersections(!0),m},_i.createAnyIntersectionFinder=function(u){return new _i(u)},_i.createIntersectionCounter=function(u){var m=new _i(u);return m.setFindAllIntersections(!0),m.setKeepIntersections(!1),m};var l0=function(){this._li=new _e,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var u=arguments[0];this._segStrings=u};l0.prototype.execute=function(){if(this._segInt!==null)return null;this.checkInteriorIntersections()},l0.prototype.getIntersections=function(){return this._segInt.getIntersections()},l0.prototype.isValid=function(){return this.execute(),this._isValid},l0.prototype.setFindAllIntersections=function(u){this._findAllIntersections=u},l0.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new _i(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var u=new $a;if(u.setSegmentIntersector(this._segInt),u.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},l0.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new d0(this.getErrorMessage(),this._segInt.getInteriorIntersection())},l0.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var u=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Je.toLineString(u[0],u[1])+" and "+Je.toLineString(u[2],u[3])},l0.prototype.interfaces_=function(){return[]},l0.prototype.getClass=function(){return l0},l0.computeIntersections=function(u){var m=new l0(u);return m.setFindAllIntersections(!0),m.isValid(),m.getIntersections()};var xa=function u(){this._nv=null;var m=arguments[0];this._nv=new l0(u.toSegmentStrings(m))};xa.prototype.checkValid=function(){this._nv.checkValid()},xa.prototype.interfaces_=function(){return[]},xa.prototype.getClass=function(){return xa},xa.toSegmentStrings=function(u){for(var m=new Xe,v=u.iterator();v.hasNext();){var w=v.next();m.add(new v0(w.getCoordinates(),w))}return m},xa.checkValid=function(u){new xa(u).checkValid()};var wa=function(u){this._mapOp=u};wa.prototype.map=function(u){for(var m=new Xe,v=0;v<u.getNumGeometries();v++){var w=this._mapOp.map(u.getGeometryN(v));w.isEmpty()||m.add(w)}return u.getFactory().createGeometryCollection(tt.toGeometryArray(m))},wa.prototype.interfaces_=function(){return[]},wa.prototype.getClass=function(){return wa},wa.map=function(u,m){return new wa(m).map(u)};var C0=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new Xe,this._resultLineList=new Xe;var u=arguments[0],m=arguments[1],v=arguments[2];this._op=u,this._geometryFactory=m,this._ptLocator=v};C0.prototype.collectLines=function(u){for(var m=this._op.getGraph().getEdgeEnds().iterator();m.hasNext();){var v=m.next();this.collectLineEdge(v,u,this._lineEdgesList),this.collectBoundaryTouchEdge(v,u,this._lineEdgesList)}},C0.prototype.labelIsolatedLine=function(u,m){var v=this._ptLocator.locate(u.getCoordinate(),this._op.getArgGeometry(m));u.getLabel().setLocation(m,v)},C0.prototype.build=function(u){return this.findCoveredLineEdges(),this.collectLines(u),this.buildLines(u),this._resultLineList},C0.prototype.collectLineEdge=function(u,m,v){var w=u.getLabel(),T=u.getEdge();u.isLineEdge()&&(u.isVisited()||!At.isResultOfOp(w,m)||T.isCovered()||(v.add(T),u.setVisitedEdge(!0)))},C0.prototype.findCoveredLineEdges=function(){for(var u=this._op.getGraph().getNodes().iterator();u.hasNext();)u.next().getEdges().findCoveredLineEdges();for(var m=this._op.getGraph().getEdgeEnds().iterator();m.hasNext();){var v=m.next(),w=v.getEdge();if(v.isLineEdge()&&!w.isCoveredSet()){var T=this._op.isCoveredByA(v.getCoordinate());w.setCovered(T)}}},C0.prototype.labelIsolatedLines=function(u){for(var m=u.iterator();m.hasNext();){var v=m.next(),w=v.getLabel();v.isIsolated()&&(w.isNull(0)?this.labelIsolatedLine(v,0):this.labelIsolatedLine(v,1))}},C0.prototype.buildLines=function(u){for(var m=this._lineEdgesList.iterator();m.hasNext();){var v=m.next(),w=this._geometryFactory.createLineString(v.getCoordinates());this._resultLineList.add(w),v.setInResult(!0)}},C0.prototype.collectBoundaryTouchEdge=function(u,m,v){var w=u.getLabel();return u.isLineEdge()||u.isVisited()||u.isInteriorAreaEdge()||u.getEdge().isInResult()?null:(U.isTrue(!(u.isInResult()||u.getSym().isInResult())||!u.getEdge().isInResult()),void(At.isResultOfOp(w,m)&&m===At.INTERSECTION&&(v.add(u.getEdge()),u.setVisitedEdge(!0))))},C0.prototype.interfaces_=function(){return[]},C0.prototype.getClass=function(){return C0};var Pa=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new Xe;var u=arguments[0],m=arguments[1];this._op=u,this._geometryFactory=m};Pa.prototype.filterCoveredNodeToPoint=function(u){var m=u.getCoordinate();if(!this._op.isCoveredByLA(m)){var v=this._geometryFactory.createPoint(m);this._resultPointList.add(v)}},Pa.prototype.extractNonCoveredResultNodes=function(u){for(var m=this._op.getGraph().getNodes().iterator();m.hasNext();){var v=m.next();if(!v.isInResult()&&!v.isIncidentEdgeInResult()&&(v.getEdges().getDegree()===0||u===At.INTERSECTION)){var w=v.getLabel();At.isResultOfOp(w,u)&&this.filterCoveredNodeToPoint(v)}}},Pa.prototype.build=function(u){return this.extractNonCoveredResultNodes(u),this._resultPointList},Pa.prototype.interfaces_=function(){return[]},Pa.prototype.getClass=function(){return Pa};var Bi=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Bi.prototype.transformPoint=function(u,m){return this._factory.createPoint(this.transformCoordinates(u.getCoordinateSequence(),u))},Bi.prototype.transformPolygon=function(u,m){var v=!0,w=this.transformLinearRing(u.getExteriorRing(),u);w!==null&&w instanceof Yi&&!w.isEmpty()||(v=!1);for(var T=new Xe,H=0;H<u.getNumInteriorRing();H++){var G=this.transformLinearRing(u.getInteriorRingN(H),u);G===null||G.isEmpty()||(G instanceof Yi||(v=!1),T.add(G))}if(v)return this._factory.createPolygon(w,T.toArray([]));var K=new Xe;return w!==null&&K.add(w),K.addAll(T),this._factory.buildGeometry(K)},Bi.prototype.createCoordinateSequence=function(u){return this._factory.getCoordinateSequenceFactory().create(u)},Bi.prototype.getInputGeometry=function(){return this._inputGeom},Bi.prototype.transformMultiLineString=function(u,m){for(var v=new Xe,w=0;w<u.getNumGeometries();w++){var T=this.transformLineString(u.getGeometryN(w),u);T!==null&&(T.isEmpty()||v.add(T))}return this._factory.buildGeometry(v)},Bi.prototype.transformCoordinates=function(u,m){return this.copy(u)},Bi.prototype.transformLineString=function(u,m){return this._factory.createLineString(this.transformCoordinates(u.getCoordinateSequence(),u))},Bi.prototype.transformMultiPoint=function(u,m){for(var v=new Xe,w=0;w<u.getNumGeometries();w++){var T=this.transformPoint(u.getGeometryN(w),u);T!==null&&(T.isEmpty()||v.add(T))}return this._factory.buildGeometry(v)},Bi.prototype.transformMultiPolygon=function(u,m){for(var v=new Xe,w=0;w<u.getNumGeometries();w++){var T=this.transformPolygon(u.getGeometryN(w),u);T!==null&&(T.isEmpty()||v.add(T))}return this._factory.buildGeometry(v)},Bi.prototype.copy=function(u){return u.copy()},Bi.prototype.transformGeometryCollection=function(u,m){for(var v=new Xe,w=0;w<u.getNumGeometries();w++){var T=this.transform(u.getGeometryN(w));T!==null&&(this._pruneEmptyGeometry&&T.isEmpty()||v.add(T))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(tt.toGeometryArray(v)):this._factory.buildGeometry(v)},Bi.prototype.transform=function(u){if(this._inputGeom=u,this._factory=u.getFactory(),u instanceof ei)return this.transformPoint(u,null);if(u instanceof w0)return this.transformMultiPoint(u,null);if(u instanceof Yi)return this.transformLinearRing(u,null);if(u instanceof qt)return this.transformLineString(u,null);if(u instanceof h0)return this.transformMultiLineString(u,null);if(u instanceof Yt)return this.transformPolygon(u,null);if(u instanceof se)return this.transformMultiPolygon(u,null);if(u instanceof ri)return this.transformGeometryCollection(u,null);throw new D("Unknown Geometry subtype: "+u.getClass().getName())},Bi.prototype.transformLinearRing=function(u,m){var v=this.transformCoordinates(u.getCoordinateSequence(),u);if(v===null)return this._factory.createLinearRing(null);var w=v.size();return w>0&&w<4&&!this._preserveType?this._factory.createLineString(v):this._factory.createLinearRing(v)},Bi.prototype.interfaces_=function(){return[]},Bi.prototype.getClass=function(){return Bi};var L0=function u(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new dt,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof qt&&typeof arguments[1]=="number"){var m=arguments[0],v=arguments[1];u.call(this,m.getCoordinates(),v)}else if(arguments[0]instanceof Array&&typeof arguments[1]=="number"){var w=arguments[0],T=arguments[1];this._srcPts=w,this._isClosed=u.isClosed(w),this._snapTolerance=T}};L0.prototype.snapVertices=function(u,m){for(var v=this._isClosed?u.size()-1:u.size(),w=0;w<v;w++){var T=u.get(w),H=this.findSnapForVertex(T,m);H!==null&&(u.set(w,new F(H)),w===0&&this._isClosed&&u.set(u.size()-1,new F(H)))}},L0.prototype.findSnapForVertex=function(u,m){for(var v=0;v<m.length;v++){if(u.equals2D(m[v]))return null;if(u.distance(m[v])<this._snapTolerance)return m[v]}return null},L0.prototype.snapTo=function(u){var m=new Ui(this._srcPts);return this.snapVertices(m,u),this.snapSegments(m,u),m.toCoordinateArray()},L0.prototype.snapSegments=function(u,m){if(m.length===0)return null;var v=m.length;m[0].equals2D(m[m.length-1])&&(v=m.length-1);for(var w=0;w<v;w++){var T=m[w],H=this.findSegmentIndexToSnap(T,u);H>=0&&u.add(H+1,new F(T),!1)}},L0.prototype.findSegmentIndexToSnap=function(u,m){for(var v=R.MAX_VALUE,w=-1,T=0;T<m.size()-1;T++){if(this._seg.p0=m.get(T),this._seg.p1=m.get(T+1),this._seg.p0.equals2D(u)||this._seg.p1.equals2D(u)){if(this._allowSnappingToSourceVertices)continue;return-1}var H=this._seg.distance(u);H<this._snapTolerance&&H<v&&(v=H,w=T)}return w},L0.prototype.setAllowSnappingToSourceVertices=function(u){this._allowSnappingToSourceVertices=u},L0.prototype.interfaces_=function(){return[]},L0.prototype.getClass=function(){return L0},L0.isClosed=function(u){return!(u.length<=1)&&u[0].equals2D(u[u.length-1])};var ii=function(u){this._srcGeom=u||null},ms={SNAP_PRECISION_FACTOR:{configurable:!0}};ii.prototype.snapTo=function(u,m){var v=this.extractTargetCoordinates(u);return new gs(m,v).transform(this._srcGeom)},ii.prototype.snapToSelf=function(u,m){var v=this.extractTargetCoordinates(this._srcGeom),w=new gs(u,v,!0).transform(this._srcGeom),T=w;return m&&j(T,s0)&&(T=w.buffer(0)),T},ii.prototype.computeSnapTolerance=function(u){return this.computeMinimumSegmentLength(u)/10},ii.prototype.extractTargetCoordinates=function(u){for(var m=new P,v=u.getCoordinates(),w=0;w<v.length;w++)m.add(v[w]);return m.toArray(new Array(0).fill(null))},ii.prototype.computeMinimumSegmentLength=function(u){for(var m=R.MAX_VALUE,v=0;v<u.length-1;v++){var w=u[v].distance(u[v+1]);w<m&&(m=w)}return m},ii.prototype.interfaces_=function(){return[]},ii.prototype.getClass=function(){return ii},ii.snap=function(u,m,v){var w=new Array(2).fill(null),T=new ii(u);w[0]=T.snapTo(m,v);var H=new ii(m);return w[1]=H.snapTo(w[0],v),w},ii.computeOverlaySnapTolerance=function(){if(arguments.length===1){var u=arguments[0],m=ii.computeSizeBasedSnapTolerance(u),v=u.getPrecisionModel();if(v.getType()===Ce.FIXED){var w=1/v.getScale()*2/1.415;w>m&&(m=w)}return m}if(arguments.length===2){var T=arguments[0],H=arguments[1];return Math.min(ii.computeOverlaySnapTolerance(T),ii.computeOverlaySnapTolerance(H))}},ii.computeSizeBasedSnapTolerance=function(u){var m=u.getEnvelopeInternal();return Math.min(m.getHeight(),m.getWidth())*ii.SNAP_PRECISION_FACTOR},ii.snapToSelf=function(u,m,v){return new ii(u).snapToSelf(m,v)},ms.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(ii,ms);var gs=function(u){function m(v,w,T){u.call(this),this._snapTolerance=v||null,this._snapPts=w||null,this._isSelfSnap=T!==void 0&&T}return u&&(m.__proto__=u),m.prototype=Object.create(u&&u.prototype),m.prototype.constructor=m,m.prototype.snapLine=function(v,w){var T=new L0(v,this._snapTolerance);return T.setAllowSnappingToSourceVertices(this._isSelfSnap),T.snapTo(w)},m.prototype.transformCoordinates=function(v,w){var T=v.toCoordinateArray(),H=this.snapLine(T,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(H)},m.prototype.interfaces_=function(){return[]},m.prototype.getClass=function(){return m},m}(Bi),Ii=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};Ii.prototype.getCommon=function(){return R.longBitsToDouble(this._commonBits)},Ii.prototype.add=function(u){var m=R.doubleToLongBits(u);if(this._isFirst)return this._commonBits=m,this._commonSignExp=Ii.signExpBits(this._commonBits),this._isFirst=!1,null;if(Ii.signExpBits(m)!==this._commonSignExp)return this._commonBits=0,null;this._commonMantissaBitsCount=Ii.numCommonMostSigMantissaBits(this._commonBits,m),this._commonBits=Ii.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))},Ii.prototype.toString=function(){if(arguments.length===1){var u=arguments[0],m=R.longBitsToDouble(u),v="0000000000000000000000000000000000000000000000000000000000000000"+R.toBinaryString(u),w=v.substring(v.length-64);return w.substring(0,1)+"  "+w.substring(1,12)+"(exp) "+w.substring(12)+" [ "+m+" ]"}},Ii.prototype.interfaces_=function(){return[]},Ii.prototype.getClass=function(){return Ii},Ii.getBit=function(u,m){return u&1<<m?1:0},Ii.signExpBits=function(u){return u>>52},Ii.zeroLowerBits=function(u,m){return u&~((1<<m)-1)},Ii.numCommonMostSigMantissaBits=function(u,m){for(var v=0,w=52;w>=0;w--){if(Ii.getBit(u,w)!==Ii.getBit(m,w))return v;v++}return 52};var Q0=function(){this._commonCoord=null,this._ccFilter=new Ea},xs={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};Q0.prototype.addCommonBits=function(u){var m=new K0(this._commonCoord);u.apply(m),u.geometryChanged()},Q0.prototype.removeCommonBits=function(u){if(this._commonCoord.x===0&&this._commonCoord.y===0)return u;var m=new F(this._commonCoord);m.x=-m.x,m.y=-m.y;var v=new K0(m);return u.apply(v),u.geometryChanged(),u},Q0.prototype.getCommonCoordinate=function(){return this._commonCoord},Q0.prototype.add=function(u){u.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},Q0.prototype.interfaces_=function(){return[]},Q0.prototype.getClass=function(){return Q0},xs.CommonCoordinateFilter.get=function(){return Ea},xs.Translater.get=function(){return K0},Object.defineProperties(Q0,xs);var Ea=function(){this._commonBitsX=new Ii,this._commonBitsY=new Ii};Ea.prototype.filter=function(u){this._commonBitsX.add(u.x),this._commonBitsY.add(u.y)},Ea.prototype.getCommonCoordinate=function(){return new F(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},Ea.prototype.interfaces_=function(){return[Pt]},Ea.prototype.getClass=function(){return Ea};var K0=function(){this.trans=null;var u=arguments[0];this.trans=u};K0.prototype.filter=function(u,m){var v=u.getOrdinate(m,0)+this.trans.x,w=u.getOrdinate(m,1)+this.trans.y;u.setOrdinate(m,0,v),u.setOrdinate(m,1,w)},K0.prototype.isDone=function(){return!1},K0.prototype.isGeometryChanged=function(){return!0},K0.prototype.interfaces_=function(){return[yi]},K0.prototype.getClass=function(){return K0};var li=function(u,m){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=u,this._geom[1]=m,this.computeSnapTolerance()};li.prototype.selfSnap=function(u){return new ii(u).snapTo(u,this._snapTolerance)},li.prototype.removeCommonBits=function(u){this._cbr=new Q0,this._cbr.add(u[0]),this._cbr.add(u[1]);var m=new Array(2).fill(null);return m[0]=this._cbr.removeCommonBits(u[0].copy()),m[1]=this._cbr.removeCommonBits(u[1].copy()),m},li.prototype.prepareResult=function(u){return this._cbr.addCommonBits(u),u},li.prototype.getResultGeometry=function(u){var m=this.snap(this._geom),v=At.overlayOp(m[0],m[1],u);return this.prepareResult(v)},li.prototype.checkValid=function(u){u.isValid()||ye.out.println("Snapped geometry is invalid")},li.prototype.computeSnapTolerance=function(){this._snapTolerance=ii.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},li.prototype.snap=function(u){var m=this.removeCommonBits(u);return ii.snap(m[0],m[1],this._snapTolerance)},li.prototype.interfaces_=function(){return[]},li.prototype.getClass=function(){return li},li.overlayOp=function(u,m,v){return new li(u,m).getResultGeometry(v)},li.union=function(u,m){return li.overlayOp(u,m,At.UNION)},li.intersection=function(u,m){return li.overlayOp(u,m,At.INTERSECTION)},li.symDifference=function(u,m){return li.overlayOp(u,m,At.SYMDIFFERENCE)},li.difference=function(u,m){return li.overlayOp(u,m,At.DIFFERENCE)};var Ri=function(u,m){this._geom=new Array(2).fill(null),this._geom[0]=u,this._geom[1]=m};Ri.prototype.getResultGeometry=function(u){var m=null,v=!1,w=null;try{m=At.overlayOp(this._geom[0],this._geom[1],u),v=!0}catch(T){if(!(T instanceof ve))throw T;w=T}if(!v)try{m=li.overlayOp(this._geom[0],this._geom[1],u)}catch(T){throw T instanceof ve?w:T}return m},Ri.prototype.interfaces_=function(){return[]},Ri.prototype.getClass=function(){return Ri},Ri.overlayOp=function(u,m,v){return new Ri(u,m).getResultGeometry(v)},Ri.union=function(u,m){return Ri.overlayOp(u,m,At.UNION)},Ri.intersection=function(u,m){return Ri.overlayOp(u,m,At.INTERSECTION)},Ri.symDifference=function(u,m){return Ri.overlayOp(u,m,At.SYMDIFFERENCE)},Ri.difference=function(u,m){return Ri.overlayOp(u,m,At.DIFFERENCE)};var Ha=function(){this.mce=null,this.chainIndex=null;var u=arguments[0],m=arguments[1];this.mce=u,this.chainIndex=m};Ha.prototype.computeIntersections=function(u,m){this.mce.computeIntersectsForChain(this.chainIndex,u.mce,u.chainIndex,m)},Ha.prototype.interfaces_=function(){return[]},Ha.prototype.getClass=function(){return Ha};var Vi=function u(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,arguments.length===2){var m=arguments[0],v=arguments[1];this._eventType=u.DELETE,this._xValue=m,this._insertEvent=v}else if(arguments.length===3){var w=arguments[0],T=arguments[1],H=arguments[2];this._eventType=u.INSERT,this._label=w,this._xValue=T,this._obj=H}},os={INSERT:{configurable:!0},DELETE:{configurable:!0}};Vi.prototype.isDelete=function(){return this._eventType===Vi.DELETE},Vi.prototype.setDeleteEventIndex=function(u){this._deleteEventIndex=u},Vi.prototype.getObject=function(){return this._obj},Vi.prototype.compareTo=function(u){var m=u;return this._xValue<m._xValue?-1:this._xValue>m._xValue?1:this._eventType<m._eventType?-1:this._eventType>m._eventType?1:0},Vi.prototype.getInsertEvent=function(){return this._insertEvent},Vi.prototype.isInsert=function(){return this._eventType===Vi.INSERT},Vi.prototype.isSameLabel=function(u){return this._label!==null&&this._label===u._label},Vi.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},Vi.prototype.interfaces_=function(){return[N]},Vi.prototype.getClass=function(){return Vi},os.INSERT.get=function(){return 1},os.DELETE.get=function(){return 2},Object.defineProperties(Vi,os);var Qa=function(){};Qa.prototype.interfaces_=function(){return[]},Qa.prototype.getClass=function(){return Qa};var bi=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var u=arguments[0],m=arguments[1],v=arguments[2];this._li=u,this._includeProper=m,this._recordIsolated=v};bi.prototype.isTrivialIntersection=function(u,m,v,w){if(u===v&&this._li.getIntersectionNum()===1){if(bi.isAdjacentSegments(m,w))return!0;if(u.isClosed()){var T=u.getNumPoints()-1;if(m===0&&w===T||w===0&&m===T)return!0}}return!1},bi.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},bi.prototype.setIsDoneIfProperInt=function(u){this._isDoneWhenProperInt=u},bi.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},bi.prototype.isBoundaryPointInternal=function(u,m){for(var v=m.iterator();v.hasNext();){var w=v.next().getCoordinate();if(u.isIntersection(w))return!0}return!1},bi.prototype.hasProperIntersection=function(){return this._hasProper},bi.prototype.hasIntersection=function(){return this._hasIntersection},bi.prototype.isDone=function(){return this._isDone},bi.prototype.isBoundaryPoint=function(u,m){return m!==null&&(!!this.isBoundaryPointInternal(u,m[0])||!!this.isBoundaryPointInternal(u,m[1]))},bi.prototype.setBoundaryNodes=function(u,m){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=u,this._bdyNodes[1]=m},bi.prototype.addIntersections=function(u,m,v,w){if(u===v&&m===w)return null;this.numTests++;var T=u.getCoordinates()[m],H=u.getCoordinates()[m+1],G=v.getCoordinates()[w],K=v.getCoordinates()[w+1];this._li.computeIntersection(T,H,G,K),this._li.hasIntersection()&&(this._recordIsolated&&(u.setIsolated(!1),v.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(u,m,v,w)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(u.addIntersections(this._li,m,0),v.addIntersections(this._li,w,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},bi.prototype.interfaces_=function(){return[]},bi.prototype.getClass=function(){return bi},bi.isAdjacentSegments=function(u,m){return Math.abs(u-m)===1};var Cs=function(u){function m(){u.call(this),this.events=new Xe,this.nOverlaps=null}return u&&(m.__proto__=u),m.prototype=Object.create(u&&u.prototype),m.prototype.constructor=m,m.prototype.prepareEvents=function(){Xi.sort(this.events);for(var v=0;v<this.events.size();v++){var w=this.events.get(v);w.isDelete()&&w.getInsertEvent().setDeleteEventIndex(v)}},m.prototype.computeIntersections=function(){if(arguments.length===1){var v=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var w=0;w<this.events.size();w++){var T=this.events.get(w);if(T.isInsert()&&this.processOverlaps(w,T.getDeleteEventIndex(),T,v),v.isDone())break}}else if(arguments.length===3){if(arguments[2]instanceof bi&&j(arguments[0],Kt)&&j(arguments[1],Kt)){var H=arguments[0],G=arguments[1],K=arguments[2];this.addEdges(H,H),this.addEdges(G,G),this.computeIntersections(K)}else if(typeof arguments[2]=="boolean"&&j(arguments[0],Kt)&&arguments[1]instanceof bi){var de=arguments[0],Le=arguments[1];arguments[2]?this.addEdges(de,null):this.addEdges(de),this.computeIntersections(Le)}}},m.prototype.addEdge=function(v,w){for(var T=v.getMonotoneChainEdge(),H=T.getStartIndexes(),G=0;G<H.length-1;G++){var K=new Ha(T,G),de=new Vi(w,T.getMinX(G),K);this.events.add(de),this.events.add(new Vi(T.getMaxX(G),de))}},m.prototype.processOverlaps=function(v,w,T,H){for(var G=T.getObject(),K=v;K<w;K++){var de=this.events.get(K);if(de.isInsert()){var Le=de.getObject();T.isSameLabel(de)||(G.computeIntersections(Le,H),this.nOverlaps++)}}},m.prototype.addEdges=function(){if(arguments.length===1)for(var v=arguments[0].iterator();v.hasNext();){var w=v.next();this.addEdge(w,w)}else if(arguments.length===2)for(var T=arguments[0],H=arguments[1],G=T.iterator();G.hasNext();){var K=G.next();this.addEdge(K,H)}},m.prototype.interfaces_=function(){return[]},m.prototype.getClass=function(){return m},m}(Qa),A0=function(){this._min=R.POSITIVE_INFINITY,this._max=R.NEGATIVE_INFINITY},bs={NodeComparator:{configurable:!0}};A0.prototype.getMin=function(){return this._min},A0.prototype.intersects=function(u,m){return!(this._min>m||this._max<u)},A0.prototype.getMax=function(){return this._max},A0.prototype.toString=function(){return Je.toLineString(new F(this._min,0),new F(this._max,0))},A0.prototype.interfaces_=function(){return[]},A0.prototype.getClass=function(){return A0},bs.NodeComparator.get=function(){return Ba},Object.defineProperties(A0,bs);var Ba=function(){};Ba.prototype.compare=function(u,m){var v=u,w=m,T=(v._min+v._max)/2,H=(w._min+w._max)/2;return T<H?-1:T>H?1:0},Ba.prototype.interfaces_=function(){return[B]},Ba.prototype.getClass=function(){return Ba};var ws=function(u){function m(){u.call(this),this._item=null;var v=arguments[0],w=arguments[1],T=arguments[2];this._min=v,this._max=w,this._item=T}return u&&(m.__proto__=u),m.prototype=Object.create(u&&u.prototype),m.prototype.constructor=m,m.prototype.query=function(v,w,T){if(!this.intersects(v,w))return null;T.visitItem(this._item)},m.prototype.interfaces_=function(){return[]},m.prototype.getClass=function(){return m},m}(A0),Ps=function(u){function m(){u.call(this),this._node1=null,this._node2=null;var v=arguments[0],w=arguments[1];this._node1=v,this._node2=w,this.buildExtent(this._node1,this._node2)}return u&&(m.__proto__=u),m.prototype=Object.create(u&&u.prototype),m.prototype.constructor=m,m.prototype.buildExtent=function(v,w){this._min=Math.min(v._min,w._min),this._max=Math.max(v._max,w._max)},m.prototype.query=function(v,w,T){if(!this.intersects(v,w))return null;this._node1!==null&&this._node1.query(v,w,T),this._node2!==null&&this._node2.query(v,w,T)},m.prototype.interfaces_=function(){return[]},m.prototype.getClass=function(){return m},m}(A0),I0=function(){this._leaves=new Xe,this._root=null,this._level=0};I0.prototype.buildTree=function(){Xi.sort(this._leaves,new A0.NodeComparator);for(var u=this._leaves,m=null,v=new Xe;;){if(this.buildLevel(u,v),v.size()===1)return v.get(0);m=u,u=v,v=m}},I0.prototype.insert=function(u,m,v){if(this._root!==null)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new ws(u,m,v))},I0.prototype.query=function(u,m,v){this.init(),this._root.query(u,m,v)},I0.prototype.buildRoot=function(){if(this._root!==null)return null;this._root=this.buildTree()},I0.prototype.printNode=function(u){ye.out.println(Je.toLineString(new F(u._min,this._level),new F(u._max,this._level)))},I0.prototype.init=function(){if(this._root!==null)return null;this.buildRoot()},I0.prototype.buildLevel=function(u,m){this._level++,m.clear();for(var v=0;v<u.size();v+=2){var w=u.get(v);if((v+1<u.size()?u.get(v):null)===null)m.add(w);else{var T=new Ps(u.get(v),u.get(v+1));m.add(T)}}},I0.prototype.interfaces_=function(){return[]},I0.prototype.getClass=function(){return I0};var Ia=function(){this._items=new Xe};Ia.prototype.visitItem=function(u){this._items.add(u)},Ia.prototype.getItems=function(){return this._items},Ia.prototype.interfaces_=function(){return[P0]},Ia.prototype.getClass=function(){return Ia};var Ra=function(){this._index=null;var u=arguments[0];if(!j(u,s0))throw new D("Argument must be Polygonal");this._index=new oa(u)},cs={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};Ra.prototype.locate=function(u){var m=new De(u),v=new Da(m);return this._index.query(u.y,u.y,v),m.getLocation()},Ra.prototype.interfaces_=function(){return[na]},Ra.prototype.getClass=function(){return Ra},cs.SegmentVisitor.get=function(){return Da},cs.IntervalIndexedGeometry.get=function(){return oa},Object.defineProperties(Ra,cs);var Da=function(){this._counter=null;var u=arguments[0];this._counter=u};Da.prototype.visitItem=function(u){var m=u;this._counter.countSegment(m.getCoordinate(0),m.getCoordinate(1))},Da.prototype.interfaces_=function(){return[P0]},Da.prototype.getClass=function(){return Da};var oa=function(){this._index=new I0;var u=arguments[0];this.init(u)};oa.prototype.init=function(u){for(var m=fi.getLines(u).iterator();m.hasNext();){var v=m.next().getCoordinates();this.addLine(v)}},oa.prototype.addLine=function(u){for(var m=1;m<u.length;m++){var v=new dt(u[m-1],u[m]),w=Math.min(v.p0.y,v.p1.y),T=Math.max(v.p0.y,v.p1.y);this._index.insert(w,T,v)}},oa.prototype.query=function(){if(arguments.length===2){var u=arguments[0],m=arguments[1],v=new Ia;return this._index.query(u,m,v),v.getItems()}if(arguments.length===3){var w=arguments[0],T=arguments[1],H=arguments[2];this._index.query(w,T,H)}},oa.prototype.interfaces_=function(){return[]},oa.prototype.getClass=function(){return oa};var Ga=function(u){function m(){if(u.call(this),this._parentGeom=null,this._lineEdgeMap=new Ee,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new _0,arguments.length===2){var v=arguments[0],w=arguments[1],T=Et.OGC_SFS_BOUNDARY_RULE;this._argIndex=v,this._parentGeom=w,this._boundaryNodeRule=T,w!==null&&this.add(w)}else if(arguments.length===3){var H=arguments[0],G=arguments[1],K=arguments[2];this._argIndex=H,this._parentGeom=G,this._boundaryNodeRule=K,G!==null&&this.add(G)}}return u&&(m.__proto__=u),m.prototype=Object.create(u&&u.prototype),m.prototype.constructor=m,m.prototype.insertBoundaryPoint=function(v,w){var T=this._nodes.addNode(w).getLabel(),H=1;q.NONE,T.getLocation(v,Be.ON)===q.BOUNDARY&&H++;var G=m.determineBoundary(this._boundaryNodeRule,H);T.setLocation(v,G)},m.prototype.computeSelfNodes=function(){if(arguments.length===2){var v=arguments[0],w=arguments[1];return this.computeSelfNodes(v,w,!1)}if(arguments.length===3){var T=arguments[0],H=arguments[1],G=arguments[2],K=new bi(T,!0,!1);K.setIsDoneIfProperInt(G);var de=this.createEdgeSetIntersector(),Le=this._parentGeom instanceof Yi||this._parentGeom instanceof Yt||this._parentGeom instanceof se,He=H||!Le;return de.computeIntersections(this._edges,K,He),this.addSelfIntersectionNodes(this._argIndex),K}},m.prototype.computeSplitEdges=function(v){for(var w=this._edges.iterator();w.hasNext();)w.next().eiList.addSplitEdges(v)},m.prototype.computeEdgeIntersections=function(v,w,T){var H=new bi(w,T,!0);return H.setBoundaryNodes(this.getBoundaryNodes(),v.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,v._edges,H),H},m.prototype.getGeometry=function(){return this._parentGeom},m.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},m.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},m.prototype.addPoint=function(){if(arguments[0]instanceof ei){var v=arguments[0].getCoordinate();this.insertPoint(this._argIndex,v,q.INTERIOR)}else if(arguments[0]instanceof F){var w=arguments[0];this.insertPoint(this._argIndex,w,q.INTERIOR)}},m.prototype.addPolygon=function(v){this.addPolygonRing(v.getExteriorRing(),q.EXTERIOR,q.INTERIOR);for(var w=0;w<v.getNumInteriorRing();w++){var T=v.getInteriorRingN(w);this.addPolygonRing(T,q.INTERIOR,q.EXTERIOR)}},m.prototype.addEdge=function(v){this.insertEdge(v);var w=v.getCoordinates();this.insertPoint(this._argIndex,w[0],q.BOUNDARY),this.insertPoint(this._argIndex,w[w.length-1],q.BOUNDARY)},m.prototype.addLineString=function(v){var w=Mt.removeRepeatedPoints(v.getCoordinates());if(w.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=w[0],null;var T=new Za(w,new kt(this._argIndex,q.INTERIOR));this._lineEdgeMap.put(v,T),this.insertEdge(T),U.isTrue(w.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,w[0]),this.insertBoundaryPoint(this._argIndex,w[w.length-1])},m.prototype.getInvalidPoint=function(){return this._invalidPoint},m.prototype.getBoundaryPoints=function(){for(var v=this.getBoundaryNodes(),w=new Array(v.size()).fill(null),T=0,H=v.iterator();H.hasNext();){var G=H.next();w[T++]=G.getCoordinate().copy()}return w},m.prototype.getBoundaryNodes=function(){return this._boundaryNodes===null&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},m.prototype.addSelfIntersectionNode=function(v,w,T){if(this.isBoundaryNode(v,w))return null;T===q.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(v,w):this.insertPoint(v,w,T)},m.prototype.addPolygonRing=function(v,w,T){if(v.isEmpty())return null;var H=Mt.removeRepeatedPoints(v.getCoordinates());if(H.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=H[0],null;var G=w,K=T;Me.isCCW(H)&&(G=T,K=w);var de=new Za(H,new kt(this._argIndex,q.BOUNDARY,G,K));this._lineEdgeMap.put(v,de),this.insertEdge(de),this.insertPoint(this._argIndex,H[0],q.BOUNDARY)},m.prototype.insertPoint=function(v,w,T){var H=this._nodes.addNode(w),G=H.getLabel();G===null?H._label=new kt(v,T):G.setLocation(v,T)},m.prototype.createEdgeSetIntersector=function(){return new Cs},m.prototype.addSelfIntersectionNodes=function(v){for(var w=this._edges.iterator();w.hasNext();)for(var T=w.next(),H=T.getLabel().getLocation(v),G=T.eiList.iterator();G.hasNext();){var K=G.next();this.addSelfIntersectionNode(v,K.coord,H)}},m.prototype.add=function(){if(arguments.length!==1)return u.prototype.add.apply(this,arguments);var v=arguments[0];if(v.isEmpty())return null;if(v instanceof se&&(this._useBoundaryDeterminationRule=!1),v instanceof Yt)this.addPolygon(v);else if(v instanceof qt)this.addLineString(v);else if(v instanceof ei)this.addPoint(v);else if(v instanceof w0)this.addCollection(v);else if(v instanceof h0)this.addCollection(v);else if(v instanceof se)this.addCollection(v);else{if(!(v instanceof ri))throw new Error(v.getClass().getName());this.addCollection(v)}},m.prototype.addCollection=function(v){for(var w=0;w<v.getNumGeometries();w++){var T=v.getGeometryN(w);this.add(T)}},m.prototype.locate=function(v){return j(this._parentGeom,s0)&&this._parentGeom.getNumGeometries()>50?(this._areaPtLocator===null&&(this._areaPtLocator=new Ra(this._parentGeom)),this._areaPtLocator.locate(v)):this._ptLocator.locate(v,this._parentGeom)},m.prototype.findEdge=function(){if(arguments.length===1){var v=arguments[0];return this._lineEdgeMap.get(v)}return u.prototype.findEdge.apply(this,arguments)},m.prototype.interfaces_=function(){return[]},m.prototype.getClass=function(){return m},m.determineBoundary=function(v,w){return v.isInBoundary(w)?q.BOUNDARY:q.INTERIOR},m}(Jt),Oa=function(){if(this._li=new _e,this._resultPrecisionModel=null,this._arg=null,arguments.length===1){var u=arguments[0];this.setComputationPrecision(u.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Ga(0,u)}else if(arguments.length===2){var m=arguments[0],v=arguments[1],w=Et.OGC_SFS_BOUNDARY_RULE;m.getPrecisionModel().compareTo(v.getPrecisionModel())>=0?this.setComputationPrecision(m.getPrecisionModel()):this.setComputationPrecision(v.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Ga(0,m,w),this._arg[1]=new Ga(1,v,w)}else if(arguments.length===3){var T=arguments[0],H=arguments[1],G=arguments[2];T.getPrecisionModel().compareTo(H.getPrecisionModel())>=0?this.setComputationPrecision(T.getPrecisionModel()):this.setComputationPrecision(H.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Ga(0,T,G),this._arg[1]=new Ga(1,H,G)}};Oa.prototype.getArgGeometry=function(u){return this._arg[u].getGeometry()},Oa.prototype.setComputationPrecision=function(u){this._resultPrecisionModel=u,this._li.setPrecisionModel(this._resultPrecisionModel)},Oa.prototype.interfaces_=function(){return[]},Oa.prototype.getClass=function(){return Oa};var ca=function(){};ca.prototype.interfaces_=function(){return[]},ca.prototype.getClass=function(){return ca},ca.map=function(){if(arguments[0]instanceof Ue&&j(arguments[1],ca.MapOp)){for(var u=arguments[0],m=arguments[1],v=new Xe,w=0;w<u.getNumGeometries();w++){var T=m.map(u.getGeometryN(w));T!==null&&v.add(T)}return u.getFactory().buildGeometry(v)}if(j(arguments[0],It)&&j(arguments[1],ca.MapOp)){for(var H=arguments[0],G=arguments[1],K=new Xe,de=H.iterator();de.hasNext();){var Le=de.next(),He=G.map(Le);He!==null&&K.add(He)}return K}},ca.MapOp=function(){};var At=function(u){function m(){var v=arguments[0],w=arguments[1];u.call(this,v,w),this._ptLocator=new _0,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Zi,this._resultPolyList=new Xe,this._resultLineList=new Xe,this._resultPointList=new Xe,this._graph=new Jt(new Xa),this._geomFact=v.getFactory()}return u&&(m.__proto__=u),m.prototype=Object.create(u&&u.prototype),m.prototype.constructor=m,m.prototype.insertUniqueEdge=function(v){var w=this._edgeList.findEqualEdge(v);if(w!==null){var T=w.getLabel(),H=v.getLabel();w.isPointwiseEqual(v)||(H=new kt(v.getLabel())).flip();var G=w.getDepth();G.isNull()&&G.add(T),G.add(H),T.merge(H)}else this._edgeList.add(v)},m.prototype.getGraph=function(){return this._graph},m.prototype.cancelDuplicateResultEdges=function(){for(var v=this._graph.getEdgeEnds().iterator();v.hasNext();){var w=v.next(),T=w.getSym();w.isInResult()&&T.isInResult()&&(w.setInResult(!1),T.setInResult(!1))}},m.prototype.isCoveredByLA=function(v){return!!this.isCovered(v,this._resultLineList)||!!this.isCovered(v,this._resultPolyList)},m.prototype.computeGeometry=function(v,w,T,H){var G=new Xe;return G.addAll(v),G.addAll(w),G.addAll(T),G.isEmpty()?m.createEmptyResult(H,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(G)},m.prototype.mergeSymLabels=function(){for(var v=this._graph.getNodes().iterator();v.hasNext();)v.next().getEdges().mergeSymLabels()},m.prototype.isCovered=function(v,w){for(var T=w.iterator();T.hasNext();){var H=T.next();if(this._ptLocator.locate(v,H)!==q.EXTERIOR)return!0}return!1},m.prototype.replaceCollapsedEdges=function(){for(var v=new Xe,w=this._edgeList.iterator();w.hasNext();){var T=w.next();T.isCollapsed()&&(w.remove(),v.add(T.getCollapsedEdge()))}this._edgeList.addAll(v)},m.prototype.updateNodeLabelling=function(){for(var v=this._graph.getNodes().iterator();v.hasNext();){var w=v.next(),T=w.getEdges().getLabel();w.getLabel().merge(T)}},m.prototype.getResultGeometry=function(v){return this.computeOverlay(v),this._resultGeom},m.prototype.insertUniqueEdges=function(v){for(var w=v.iterator();w.hasNext();){var T=w.next();this.insertUniqueEdge(T)}},m.prototype.computeOverlay=function(v){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var w=new Xe;this._arg[0].computeSplitEdges(w),this._arg[1].computeSplitEdges(w),this.insertUniqueEdges(w),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),xa.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(v),this.cancelDuplicateResultEdges();var T=new Si(this._geomFact);T.add(this._graph),this._resultPolyList=T.getPolygons();var H=new C0(this,this._geomFact,this._ptLocator);this._resultLineList=H.build(v);var G=new Pa(this,this._geomFact,this._ptLocator);this._resultPointList=G.build(v),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,v)},m.prototype.labelIncompleteNode=function(v,w){var T=this._ptLocator.locate(v.getCoordinate(),this._arg[w].getGeometry());v.getLabel().setLocation(w,T)},m.prototype.copyPoints=function(v){for(var w=this._arg[v].getNodeIterator();w.hasNext();){var T=w.next();this._graph.addNode(T.getCoordinate()).setLabel(v,T.getLabel().getLocation(v))}},m.prototype.findResultAreaEdges=function(v){for(var w=this._graph.getEdgeEnds().iterator();w.hasNext();){var T=w.next(),H=T.getLabel();H.isArea()&&!T.isInteriorAreaEdge()&&m.isResultOfOp(H.getLocation(0,Be.RIGHT),H.getLocation(1,Be.RIGHT),v)&&T.setInResult(!0)}},m.prototype.computeLabelsFromDepths=function(){for(var v=this._edgeList.iterator();v.hasNext();){var w=v.next(),T=w.getLabel(),H=w.getDepth();if(!H.isNull()){H.normalize();for(var G=0;G<2;G++)T.isNull(G)||!T.isArea()||H.isNull(G)||(H.getDelta(G)===0?T.toLine(G):(U.isTrue(!H.isNull(G,Be.LEFT),"depth of LEFT side has not been initialized"),T.setLocation(G,Be.LEFT,H.getLocation(G,Be.LEFT)),U.isTrue(!H.isNull(G,Be.RIGHT),"depth of RIGHT side has not been initialized"),T.setLocation(G,Be.RIGHT,H.getLocation(G,Be.RIGHT))))}}},m.prototype.computeLabelling=function(){for(var v=this._graph.getNodes().iterator();v.hasNext();)v.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},m.prototype.labelIncompleteNodes=function(){for(var v=this._graph.getNodes().iterator();v.hasNext();){var w=v.next(),T=w.getLabel();w.isIsolated()&&(T.isNull(0)?this.labelIncompleteNode(w,0):this.labelIncompleteNode(w,1)),w.getEdges().updateLabelling(T)}},m.prototype.isCoveredByA=function(v){return!!this.isCovered(v,this._resultPolyList)},m.prototype.interfaces_=function(){return[]},m.prototype.getClass=function(){return m},m}(Oa);At.overlayOp=function(u,m,v){return new At(u,m).getResultGeometry(v)},At.intersection=function(u,m){if(u.isEmpty()||m.isEmpty())return At.createEmptyResult(At.INTERSECTION,u,m,u.getFactory());if(u.isGeometryCollection()){var v=m;return wa.map(u,{interfaces_:function(){return[ca.MapOp]},map:function(w){return w.intersection(v)}})}return u.checkNotGeometryCollection(u),u.checkNotGeometryCollection(m),Ri.overlayOp(u,m,At.INTERSECTION)},At.symDifference=function(u,m){if(u.isEmpty()||m.isEmpty()){if(u.isEmpty()&&m.isEmpty())return At.createEmptyResult(At.SYMDIFFERENCE,u,m,u.getFactory());if(u.isEmpty())return m.copy();if(m.isEmpty())return u.copy()}return u.checkNotGeometryCollection(u),u.checkNotGeometryCollection(m),Ri.overlayOp(u,m,At.SYMDIFFERENCE)},At.resultDimension=function(u,m,v){var w=m.getDimension(),T=v.getDimension(),H=-1;switch(u){case At.INTERSECTION:H=Math.min(w,T);break;case At.UNION:H=Math.max(w,T);break;case At.DIFFERENCE:H=w;break;case At.SYMDIFFERENCE:H=Math.max(w,T)}return H},At.createEmptyResult=function(u,m,v,w){var T=null;switch(At.resultDimension(u,m,v)){case-1:T=w.createGeometryCollection(new Array(0).fill(null));break;case 0:T=w.createPoint();break;case 1:T=w.createLineString();break;case 2:T=w.createPolygon()}return T},At.difference=function(u,m){return u.isEmpty()?At.createEmptyResult(At.DIFFERENCE,u,m,u.getFactory()):m.isEmpty()?u.copy():(u.checkNotGeometryCollection(u),u.checkNotGeometryCollection(m),Ri.overlayOp(u,m,At.DIFFERENCE))},At.isResultOfOp=function(){if(arguments.length===2){var u=arguments[0],m=arguments[1],v=u.getLocation(0),w=u.getLocation(1);return At.isResultOfOp(v,w,m)}if(arguments.length===3){var T=arguments[0],H=arguments[1],G=arguments[2];switch(T===q.BOUNDARY&&(T=q.INTERIOR),H===q.BOUNDARY&&(H=q.INTERIOR),G){case At.INTERSECTION:return T===q.INTERIOR&&H===q.INTERIOR;case At.UNION:return T===q.INTERIOR||H===q.INTERIOR;case At.DIFFERENCE:return T===q.INTERIOR&&H!==q.INTERIOR;case At.SYMDIFFERENCE:return T===q.INTERIOR&&H!==q.INTERIOR||T!==q.INTERIOR&&H===q.INTERIOR}return!1}},At.INTERSECTION=1,At.UNION=2,At.DIFFERENCE=3,At.SYMDIFFERENCE=4;var ea=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new _0,this._seg=new dt;var u=arguments[0],m=arguments[1];this._g=u,this._boundaryDistanceTolerance=m,this._linework=this.extractLinework(u)};ea.prototype.isWithinToleranceOfBoundary=function(u){for(var m=0;m<this._linework.getNumGeometries();m++)for(var v=this._linework.getGeometryN(m).getCoordinateSequence(),w=0;w<v.size()-1;w++)if(v.getCoordinate(w,this._seg.p0),v.getCoordinate(w+1,this._seg.p1),this._seg.distance(u)<=this._boundaryDistanceTolerance)return!0;return!1},ea.prototype.getLocation=function(u){return this.isWithinToleranceOfBoundary(u)?q.BOUNDARY:this._ptLocator.locate(u,this._g)},ea.prototype.extractLinework=function(u){var m=new Na;u.apply(m);var v=m.getLinework(),w=tt.toLineStringArray(v);return u.getFactory().createMultiLineString(w)},ea.prototype.interfaces_=function(){return[]},ea.prototype.getClass=function(){return ea};var Na=function(){this._linework=null,this._linework=new Xe};Na.prototype.getLinework=function(){return this._linework},Na.prototype.filter=function(u){if(u instanceof Yt){var m=u;this._linework.add(m.getExteriorRing());for(var v=0;v<m.getNumInteriorRing();v++)this._linework.add(m.getInteriorRingN(v))}},Na.prototype.interfaces_=function(){return[ne]},Na.prototype.getClass=function(){return Na};var _a=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var u=arguments[0];this._g=u};_a.prototype.extractPoints=function(u,m,v){for(var w=u.getCoordinates(),T=0;T<w.length-1;T++)this.computeOffsetPoints(w[T],w[T+1],m,v)},_a.prototype.setSidesToGenerate=function(u,m){this._doLeft=u,this._doRight=m},_a.prototype.getPoints=function(u){for(var m=new Xe,v=fi.getLines(this._g).iterator();v.hasNext();){var w=v.next();this.extractPoints(w,u,m)}return m},_a.prototype.computeOffsetPoints=function(u,m,v,w){var T=m.x-u.x,H=m.y-u.y,G=Math.sqrt(T*T+H*H),K=v*T/G,de=v*H/G,Le=(m.x+u.x)/2,He=(m.y+u.y)/2;if(this._doLeft){var ze=new F(Le-de,He+K);w.add(ze)}if(this._doRight){var it=new F(Le+de,He-K);w.add(it)}},_a.prototype.interfaces_=function(){return[]},_a.prototype.getClass=function(){return _a};var Ki=function u(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=u.TOLERANCE,this._testCoords=new Xe;var m=arguments[0],v=arguments[1],w=arguments[2];this._boundaryDistanceTolerance=u.computeBoundaryDistanceTolerance(m,v),this._geom=[m,v,w],this._locFinder=[new ea(this._geom[0],this._boundaryDistanceTolerance),new ea(this._geom[1],this._boundaryDistanceTolerance),new ea(this._geom[2],this._boundaryDistanceTolerance)]},ys={TOLERANCE:{configurable:!0}};Ki.prototype.reportResult=function(u,m,v){ye.out.println("Overlay result invalid - A:"+q.toLocationSymbol(m[0])+" B:"+q.toLocationSymbol(m[1])+" expected:"+(v?"i":"e")+" actual:"+q.toLocationSymbol(m[2]))},Ki.prototype.isValid=function(u){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var m=this.checkValid(u);return m},Ki.prototype.checkValid=function(){if(arguments.length===1){for(var u=arguments[0],m=0;m<this._testCoords.size();m++){var v=this._testCoords.get(m);if(!this.checkValid(u,v))return this._invalidLocation=v,!1}return!0}if(arguments.length===2){var w=arguments[0],T=arguments[1];return this._location[0]=this._locFinder[0].getLocation(T),this._location[1]=this._locFinder[1].getLocation(T),this._location[2]=this._locFinder[2].getLocation(T),!!Ki.hasLocation(this._location,q.BOUNDARY)||this.isValidResult(w,this._location)}},Ki.prototype.addTestPts=function(u){var m=new _a(u);this._testCoords.addAll(m.getPoints(5*this._boundaryDistanceTolerance))},Ki.prototype.isValidResult=function(u,m){var v=At.isResultOfOp(m[0],m[1],u),w=!(v^m[2]===q.INTERIOR);return w||this.reportResult(u,m,v),w},Ki.prototype.getInvalidLocation=function(){return this._invalidLocation},Ki.prototype.interfaces_=function(){return[]},Ki.prototype.getClass=function(){return Ki},Ki.hasLocation=function(u,m){for(var v=0;v<3;v++)if(u[v]===m)return!0;return!1},Ki.computeBoundaryDistanceTolerance=function(u,m){return Math.min(ii.computeSizeBasedSnapTolerance(u),ii.computeSizeBasedSnapTolerance(m))},Ki.isValid=function(u,m,v,w){return new Ki(u,m,w).isValid(v)},ys.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Ki,ys);var e0=function u(m){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=u.extractFactory(m),this._inputGeoms=m};e0.prototype.extractElements=function(u,m){if(u===null)return null;for(var v=0;v<u.getNumGeometries();v++){var w=u.getGeometryN(v);this._skipEmpty&&w.isEmpty()||m.add(w)}},e0.prototype.combine=function(){for(var u=new Xe,m=this._inputGeoms.iterator();m.hasNext();){var v=m.next();this.extractElements(v,u)}return u.size()===0?this._geomFactory!==null?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(u)},e0.prototype.interfaces_=function(){return[]},e0.prototype.getClass=function(){return e0},e0.combine=function(){if(arguments.length===1){var u=arguments[0];return new e0(u).combine()}if(arguments.length===2){var m=arguments[0],v=arguments[1];return new e0(e0.createList(m,v)).combine()}if(arguments.length===3){var w=arguments[0],T=arguments[1],H=arguments[2];return new e0(e0.createList(w,T,H)).combine()}},e0.extractFactory=function(u){return u.isEmpty()?null:u.iterator().next().getFactory()},e0.createList=function(){if(arguments.length===2){var u=arguments[0],m=arguments[1],v=new Xe;return v.add(u),v.add(m),v}if(arguments.length===3){var w=arguments[0],T=arguments[1],H=arguments[2],G=new Xe;return G.add(w),G.add(T),G.add(H),G}};var ai=function(){this._inputPolys=null,this._geomFactory=null;var u=arguments[0];this._inputPolys=u,this._inputPolys===null&&(this._inputPolys=new Xe)},vs={STRTREE_NODE_CAPACITY:{configurable:!0}};ai.prototype.reduceToGeometries=function(u){for(var m=new Xe,v=u.iterator();v.hasNext();){var w=v.next(),T=null;j(w,Kt)?T=this.unionTree(w):w instanceof Ue&&(T=w),m.add(T)}return m},ai.prototype.extractByEnvelope=function(u,m,v){for(var w=new Xe,T=0;T<m.getNumGeometries();T++){var H=m.getGeometryN(T);H.getEnvelopeInternal().intersects(u)?w.add(H):v.add(H)}return this._geomFactory.buildGeometry(w)},ai.prototype.unionOptimized=function(u,m){var v=u.getEnvelopeInternal(),w=m.getEnvelopeInternal();if(!v.intersects(w))return e0.combine(u,m);if(u.getNumGeometries()<=1&&m.getNumGeometries()<=1)return this.unionActual(u,m);var T=v.intersection(w);return this.unionUsingEnvelopeIntersection(u,m,T)},ai.prototype.union=function(){if(this._inputPolys===null)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var u=new ja(ai.STRTREE_NODE_CAPACITY),m=this._inputPolys.iterator();m.hasNext();){var v=m.next();u.insert(v.getEnvelopeInternal(),v)}this._inputPolys=null;var w=u.itemsTree();return this.unionTree(w)},ai.prototype.binaryUnion=function(){if(arguments.length===1){var u=arguments[0];return this.binaryUnion(u,0,u.size())}if(arguments.length===3){var m=arguments[0],v=arguments[1],w=arguments[2];if(w-v<=1){var T=ai.getGeometry(m,v);return this.unionSafe(T,null)}if(w-v==2)return this.unionSafe(ai.getGeometry(m,v),ai.getGeometry(m,v+1));var H=Math.trunc((w+v)/2),G=this.binaryUnion(m,v,H),K=this.binaryUnion(m,H,w);return this.unionSafe(G,K)}},ai.prototype.repeatedUnion=function(u){for(var m=null,v=u.iterator();v.hasNext();){var w=v.next();m=m===null?w.copy():m.union(w)}return m},ai.prototype.unionSafe=function(u,m){return u===null&&m===null?null:u===null?m.copy():m===null?u.copy():this.unionOptimized(u,m)},ai.prototype.unionActual=function(u,m){return ai.restrictToPolygons(u.union(m))},ai.prototype.unionTree=function(u){var m=this.reduceToGeometries(u);return this.binaryUnion(m)},ai.prototype.unionUsingEnvelopeIntersection=function(u,m,v){var w=new Xe,T=this.extractByEnvelope(v,u,w),H=this.extractByEnvelope(v,m,w),G=this.unionActual(T,H);return w.add(G),e0.combine(w)},ai.prototype.bufferUnion=function(){if(arguments.length===1){var u=arguments[0];return u.get(0).getFactory().buildGeometry(u).buffer(0)}if(arguments.length===2){var m=arguments[0],v=arguments[1];return m.getFactory().createGeometryCollection([m,v]).buffer(0)}},ai.prototype.interfaces_=function(){return[]},ai.prototype.getClass=function(){return ai},ai.restrictToPolygons=function(u){if(j(u,s0))return u;var m=$0.getPolygons(u);return m.size()===1?m.get(0):u.getFactory().createMultiPolygon(tt.toPolygonArray(m))},ai.getGeometry=function(u,m){return m>=u.size()?null:u.get(m)},ai.union=function(u){return new ai(u).union()},vs.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(ai,vs);var za=function(){};za.prototype.interfaces_=function(){return[]},za.prototype.getClass=function(){return za},za.union=function(u,m){if(u.isEmpty()||m.isEmpty()){if(u.isEmpty()&&m.isEmpty())return At.createEmptyResult(At.UNION,u,m,u.getFactory());if(u.isEmpty())return m.copy();if(m.isEmpty())return u.copy()}return u.checkNotGeometryCollection(u),u.checkNotGeometryCollection(m),Ri.overlayOp(u,m,At.UNION)},t.GeoJSONReader=bt,t.GeoJSONWriter=St,t.OverlayOp=At,t.UnionOp=za,t.BufferOp=di,Object.defineProperty(t,"__esModule",{value:!0})})}(jsts_min,jsts_minExports)),jsts_minExports}function adder(){return new Adder}function Adder(){this.reset()}Adder.prototype={constructor:Adder,reset:function(){this.s=this.t=0},add:function(n){add(temp,n,this.t),add(this,temp.s,this.s),this.s?this.t+=temp.t:this.s=temp.t},valueOf:function(){return this.s}};var temp=new Adder;function add(n,e,t){var i=n.s=e+t,s=i-e,r=i-s;n.t=e-r+(t-s)}var epsilon=1e-6,epsilon2=1e-12,pi=Math.PI,halfPi=pi/2,quarterPi=pi/4,tau=pi*2,degrees=180/pi,radians=pi/180,abs=Math.abs,atan=Math.atan,atan2=Math.atan2,cos=Math.cos,ceil=Math.ceil,exp=Math.exp,log=Math.log,pow=Math.pow,sin=Math.sin,sign=Math.sign||function(n){return n>0?1:n<0?-1:0},sqrt=Math.sqrt,tan=Math.tan;function acos(n){return n>1?0:n<-1?pi:Math.acos(n)}function asin(n){return n>1?halfPi:n<-1?-halfPi:Math.asin(n)}function haversin(n){return(n=sin(n/2))*n}function noop$1(){}function streamGeometry(n,e){n&&streamGeometryType.hasOwnProperty(n.type)&&streamGeometryType[n.type](n,e)}var streamObjectType={Feature:function(n,e){streamGeometry(n.geometry,e)},FeatureCollection:function(n,e){for(var t=n.features,i=-1,s=t.length;++i<s;)streamGeometry(t[i].geometry,e)}},streamGeometryType={Sphere:function(n,e){e.sphere()},Point:function(n,e){n=n.coordinates,e.point(n[0],n[1],n[2])},MultiPoint:function(n,e){for(var t=n.coordinates,i=-1,s=t.length;++i<s;)n=t[i],e.point(n[0],n[1],n[2])},LineString:function(n,e){streamLine(n.coordinates,e,0)},MultiLineString:function(n,e){for(var t=n.coordinates,i=-1,s=t.length;++i<s;)streamLine(t[i],e,0)},Polygon:function(n,e){streamPolygon(n.coordinates,e)},MultiPolygon:function(n,e){for(var t=n.coordinates,i=-1,s=t.length;++i<s;)streamPolygon(t[i],e)},GeometryCollection:function(n,e){for(var t=n.geometries,i=-1,s=t.length;++i<s;)streamGeometry(t[i],e)}};function streamLine(n,e,t){var i=-1,s=n.length-t,r;for(e.lineStart();++i<s;)r=n[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function streamPolygon(n,e){var t=-1,i=n.length;for(e.polygonStart();++t<i;)streamLine(n[t],e,1);e.polygonEnd()}function geoStream(n,e){n&&streamObjectType.hasOwnProperty(n.type)?streamObjectType[n.type](n,e):streamGeometry(n,e)}var areaRingSum$1=adder(),areaSum$1=adder(),lambda00$2,phi00$2,lambda0$2,cosPhi0$1,sinPhi0$1,areaStream$1={point:noop$1,lineStart:noop$1,lineEnd:noop$1,polygonStart:function(){areaRingSum$1.reset(),areaStream$1.lineStart=areaRingStart$1,areaStream$1.lineEnd=areaRingEnd$1},polygonEnd:function(){var n=+areaRingSum$1;areaSum$1.add(n<0?tau+n:n),this.lineStart=this.lineEnd=this.point=noop$1},sphere:function(){areaSum$1.add(tau)}};function areaRingStart$1(){areaStream$1.point=areaPointFirst$1}function areaRingEnd$1(){areaPoint$1(lambda00$2,phi00$2)}function areaPointFirst$1(n,e){areaStream$1.point=areaPoint$1,lambda00$2=n,phi00$2=e,n*=radians,e*=radians,lambda0$2=n,cosPhi0$1=cos(e=e/2+quarterPi),sinPhi0$1=sin(e)}function areaPoint$1(n,e){n*=radians,e*=radians,e=e/2+quarterPi;var t=n-lambda0$2,i=t>=0?1:-1,s=i*t,r=cos(e),o=sin(e),c=sinPhi0$1*o,_=cosPhi0$1*r+c*cos(s),l=c*i*sin(s);areaRingSum$1.add(atan2(l,_)),lambda0$2=n,cosPhi0$1=r,sinPhi0$1=o}function area(n){return areaSum$1.reset(),geoStream(n,areaStream$1),areaSum$1*2}function spherical(n){return[atan2(n[1],n[0]),asin(n[2])]}function cartesian(n){var e=n[0],t=n[1],i=cos(t);return[i*cos(e),i*sin(e),sin(t)]}function cartesianDot(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function cartesianCross(n,e){return[n[1]*e[2]-n[2]*e[1],n[2]*e[0]-n[0]*e[2],n[0]*e[1]-n[1]*e[0]]}function cartesianAddInPlace(n,e){n[0]+=e[0],n[1]+=e[1],n[2]+=e[2]}function cartesianScale(n,e){return[n[0]*e,n[1]*e,n[2]*e]}function cartesianNormalizeInPlace(n){var e=sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=e,n[1]/=e,n[2]/=e}var lambda0$1,phi0,lambda1,phi1,lambda2,lambda00$1,phi00$1,p0,deltaSum=adder(),ranges,range$1,boundsStream$1={point:boundsPoint$1,lineStart:boundsLineStart,lineEnd:boundsLineEnd,polygonStart:function(){boundsStream$1.point=boundsRingPoint,boundsStream$1.lineStart=boundsRingStart,boundsStream$1.lineEnd=boundsRingEnd,deltaSum.reset(),areaStream$1.polygonStart()},polygonEnd:function(){areaStream$1.polygonEnd(),boundsStream$1.point=boundsPoint$1,boundsStream$1.lineStart=boundsLineStart,boundsStream$1.lineEnd=boundsLineEnd,areaRingSum$1<0?(lambda0$1=-(lambda1=180),phi0=-(phi1=90)):deltaSum>epsilon?phi1=90:deltaSum<-epsilon&&(phi0=-90),range$1[0]=lambda0$1,range$1[1]=lambda1}};function boundsPoint$1(n,e){ranges.push(range$1=[lambda0$1=n,lambda1=n]),e<phi0&&(phi0=e),e>phi1&&(phi1=e)}function linePoint(n,e){var t=cartesian([n*radians,e*radians]);if(p0){var i=cartesianCross(p0,t),s=[i[1],-i[0],0],r=cartesianCross(s,i);cartesianNormalizeInPlace(r),r=spherical(r);var o=n-lambda2,c=o>0?1:-1,_=r[0]*degrees*c,l,d=abs(o)>180;d^(c*lambda2<_&&_<c*n)?(l=r[1]*degrees,l>phi1&&(phi1=l)):(_=(_+360)%360-180,d^(c*lambda2<_&&_<c*n)?(l=-r[1]*degrees,l<phi0&&(phi0=l)):(e<phi0&&(phi0=e),e>phi1&&(phi1=e))),d?n<lambda2?angle(lambda0$1,n)>angle(lambda0$1,lambda1)&&(lambda1=n):angle(n,lambda1)>angle(lambda0$1,lambda1)&&(lambda0$1=n):lambda1>=lambda0$1?(n<lambda0$1&&(lambda0$1=n),n>lambda1&&(lambda1=n)):n>lambda2?angle(lambda0$1,n)>angle(lambda0$1,lambda1)&&(lambda1=n):angle(n,lambda1)>angle(lambda0$1,lambda1)&&(lambda0$1=n)}else ranges.push(range$1=[lambda0$1=n,lambda1=n]);e<phi0&&(phi0=e),e>phi1&&(phi1=e),p0=t,lambda2=n}function boundsLineStart(){boundsStream$1.point=linePoint}function boundsLineEnd(){range$1[0]=lambda0$1,range$1[1]=lambda1,boundsStream$1.point=boundsPoint$1,p0=null}function boundsRingPoint(n,e){if(p0){var t=n-lambda2;deltaSum.add(abs(t)>180?t+(t>0?360:-360):t)}else lambda00$1=n,phi00$1=e;areaStream$1.point(n,e),linePoint(n,e)}function boundsRingStart(){areaStream$1.lineStart()}function boundsRingEnd(){boundsRingPoint(lambda00$1,phi00$1),areaStream$1.lineEnd(),abs(deltaSum)>epsilon&&(lambda0$1=-(lambda1=180)),range$1[0]=lambda0$1,range$1[1]=lambda1,p0=null}function angle(n,e){return(e-=n)<0?e+360:e}function rangeCompare(n,e){return n[0]-e[0]}function rangeContains(n,e){return n[0]<=n[1]?n[0]<=e&&e<=n[1]:e<n[0]||n[1]<e}function bounds(n){var e,t,i,s,r,o,c;if(phi1=lambda1=-(lambda0$1=phi0=1/0),ranges=[],geoStream(n,boundsStream$1),t=ranges.length){for(ranges.sort(rangeCompare),e=1,i=ranges[0],r=[i];e<t;++e)s=ranges[e],rangeContains(i,s[0])||rangeContains(i,s[1])?(angle(i[0],s[1])>angle(i[0],i[1])&&(i[1]=s[1]),angle(s[0],i[1])>angle(i[0],i[1])&&(i[0]=s[0])):r.push(i=s);for(o=-1/0,t=r.length-1,e=0,i=r[t];e<=t;i=s,++e)s=r[e],(c=angle(i[1],s[0]))>o&&(o=c,lambda0$1=s[0],lambda1=i[1])}return ranges=range$1=null,lambda0$1===1/0||phi0===1/0?[[NaN,NaN],[NaN,NaN]]:[[lambda0$1,phi0],[lambda1,phi1]]}var W0,W1,X0$1,Y0$1,Z0$1,X1$1,Y1$1,Z1$1,X2$1,Y2$1,Z2$1,lambda00,phi00,x0$4,y0$4,z0,centroidStream$1={sphere:noop$1,point:centroidPoint$1,lineStart:centroidLineStart$1,lineEnd:centroidLineEnd$1,polygonStart:function(){centroidStream$1.lineStart=centroidRingStart$1,centroidStream$1.lineEnd=centroidRingEnd$1},polygonEnd:function(){centroidStream$1.lineStart=centroidLineStart$1,centroidStream$1.lineEnd=centroidLineEnd$1}};function centroidPoint$1(n,e){n*=radians,e*=radians;var t=cos(e);centroidPointCartesian(t*cos(n),t*sin(n),sin(e))}function centroidPointCartesian(n,e,t){++W0,X0$1+=(n-X0$1)/W0,Y0$1+=(e-Y0$1)/W0,Z0$1+=(t-Z0$1)/W0}function centroidLineStart$1(){centroidStream$1.point=centroidLinePointFirst}function centroidLinePointFirst(n,e){n*=radians,e*=radians;var t=cos(e);x0$4=t*cos(n),y0$4=t*sin(n),z0=sin(e),centroidStream$1.point=centroidLinePoint,centroidPointCartesian(x0$4,y0$4,z0)}function centroidLinePoint(n,e){n*=radians,e*=radians;var t=cos(e),i=t*cos(n),s=t*sin(n),r=sin(e),o=atan2(sqrt((o=y0$4*r-z0*s)*o+(o=z0*i-x0$4*r)*o+(o=x0$4*s-y0$4*i)*o),x0$4*i+y0$4*s+z0*r);W1+=o,X1$1+=o*(x0$4+(x0$4=i)),Y1$1+=o*(y0$4+(y0$4=s)),Z1$1+=o*(z0+(z0=r)),centroidPointCartesian(x0$4,y0$4,z0)}function centroidLineEnd$1(){centroidStream$1.point=centroidPoint$1}function centroidRingStart$1(){centroidStream$1.point=centroidRingPointFirst}function centroidRingEnd$1(){centroidRingPoint(lambda00,phi00),centroidStream$1.point=centroidPoint$1}function centroidRingPointFirst(n,e){lambda00=n,phi00=e,n*=radians,e*=radians,centroidStream$1.point=centroidRingPoint;var t=cos(e);x0$4=t*cos(n),y0$4=t*sin(n),z0=sin(e),centroidPointCartesian(x0$4,y0$4,z0)}function centroidRingPoint(n,e){n*=radians,e*=radians;var t=cos(e),i=t*cos(n),s=t*sin(n),r=sin(e),o=y0$4*r-z0*s,c=z0*i-x0$4*r,_=x0$4*s-y0$4*i,l=sqrt(o*o+c*c+_*_),d=asin(l),f=l&&-d/l;X2$1+=f*o,Y2$1+=f*c,Z2$1+=f*_,W1+=d,X1$1+=d*(x0$4+(x0$4=i)),Y1$1+=d*(y0$4+(y0$4=s)),Z1$1+=d*(z0+(z0=r)),centroidPointCartesian(x0$4,y0$4,z0)}function centroid(n){W0=W1=X0$1=Y0$1=Z0$1=X1$1=Y1$1=Z1$1=X2$1=Y2$1=Z2$1=0,geoStream(n,centroidStream$1);var e=X2$1,t=Y2$1,i=Z2$1,s=e*e+t*t+i*i;return s<epsilon2&&(e=X1$1,t=Y1$1,i=Z1$1,W1<epsilon&&(e=X0$1,t=Y0$1,i=Z0$1),s=e*e+t*t+i*i,s<epsilon2)?[NaN,NaN]:[atan2(t,e)*degrees,asin(i/sqrt(s))*degrees]}function constant(n){return function(){return n}}function compose(n,e){function t(i,s){return i=n(i,s),e(i[0],i[1])}return n.invert&&e.invert&&(t.invert=function(i,s){return i=e.invert(i,s),i&&n.invert(i[0],i[1])}),t}function rotationIdentity(n,e){return[n>pi?n-tau:n<-pi?n+tau:n,e]}rotationIdentity.invert=rotationIdentity;function rotateRadians(n,e,t){return(n%=tau)?e||t?compose(rotationLambda(n),rotationPhiGamma(e,t)):rotationLambda(n):e||t?rotationPhiGamma(e,t):rotationIdentity}function forwardRotationLambda(n){return function(e,t){return e+=n,[e>pi?e-tau:e<-pi?e+tau:e,t]}}function rotationLambda(n){var e=forwardRotationLambda(n);return e.invert=forwardRotationLambda(-n),e}function rotationPhiGamma(n,e){var t=cos(n),i=sin(n),s=cos(e),r=sin(e);function o(c,_){var l=cos(_),d=cos(c)*l,f=sin(c)*l,g=sin(_),b=g*t+d*i;return[atan2(f*s-b*r,d*t-g*i),asin(b*s+f*r)]}return o.invert=function(c,_){var l=cos(_),d=cos(c)*l,f=sin(c)*l,g=sin(_),b=g*s-f*r;return[atan2(f*s+g*r,d*t+b*i),asin(b*t-d*i)]},o}function rotation(n){n=rotateRadians(n[0]*radians,n[1]*radians,n.length>2?n[2]*radians:0);function e(t){return t=n(t[0]*radians,t[1]*radians),t[0]*=degrees,t[1]*=degrees,t}return e.invert=function(t){return t=n.invert(t[0]*radians,t[1]*radians),t[0]*=degrees,t[1]*=degrees,t},e}function circleStream(n,e,t,i,s,r){if(t){var o=cos(e),c=sin(e),_=i*t;s==null?(s=e+i*tau,r=e-_/2):(s=circleRadius(o,s),r=circleRadius(o,r),(i>0?s<r:s>r)&&(s+=i*tau));for(var l,d=s;i>0?d>r:d<r;d-=_)l=spherical([o,-c*cos(d),-c*sin(d)]),n.point(l[0],l[1])}}function circleRadius(n,e){e=cartesian(e),e[0]-=n,cartesianNormalizeInPlace(e);var t=acos(-e[1]);return((-e[2]<0?-t:t)+tau-epsilon)%tau}function circle$1(){var n=constant([0,0]),e=constant(90),t=constant(6),i,s,r={point:o};function o(_,l){i.push(_=s(_,l)),_[0]*=degrees,_[1]*=degrees}function c(){var _=n.apply(this,arguments),l=e.apply(this,arguments)*radians,d=t.apply(this,arguments)*radians;return i=[],s=rotateRadians(-_[0]*radians,-_[1]*radians,0).invert,circleStream(r,l,d,1),_={type:"Polygon",coordinates:[i]},i=s=null,_}return c.center=function(_){return arguments.length?(n=typeof _=="function"?_:constant([+_[0],+_[1]]),c):n},c.radius=function(_){return arguments.length?(e=typeof _=="function"?_:constant(+_),c):e},c.precision=function(_){return arguments.length?(t=typeof _=="function"?_:constant(+_),c):t},c}function clipBuffer(){var n=[],e;return{point:function(t,i){e.push([t,i])},lineStart:function(){n.push(e=[])},lineEnd:noop$1,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var t=n;return n=[],e=null,t}}}function clipLine(n,e,t,i,s,r){var o=n[0],c=n[1],_=e[0],l=e[1],d=0,f=1,g=_-o,b=l-c,C;if(C=t-o,!(!g&&C>0)){if(C/=g,g<0){if(C<d)return;C<f&&(f=C)}else if(g>0){if(C>f)return;C>d&&(d=C)}if(C=s-o,!(!g&&C<0)){if(C/=g,g<0){if(C>f)return;C>d&&(d=C)}else if(g>0){if(C<d)return;C<f&&(f=C)}if(C=i-c,!(!b&&C>0)){if(C/=b,b<0){if(C<d)return;C<f&&(f=C)}else if(b>0){if(C>f)return;C>d&&(d=C)}if(C=r-c,!(!b&&C<0)){if(C/=b,b<0){if(C>f)return;C>d&&(d=C)}else if(b>0){if(C<d)return;C<f&&(f=C)}return d>0&&(n[0]=o+d*g,n[1]=c+d*b),f<1&&(e[0]=o+f*g,e[1]=c+f*b),!0}}}}}function pointEqual(n,e){return abs(n[0]-e[0])<epsilon&&abs(n[1]-e[1])<epsilon}function Intersection(n,e,t,i){this.x=n,this.z=e,this.o=t,this.e=i,this.v=!1,this.n=this.p=null}function clipPolygon(n,e,t,i,s){var r=[],o=[],c,_;if(n.forEach(function(C){if(!((P=C.length-1)<=0)){var P,S=C[0],L=C[P],E;if(pointEqual(S,L)){for(s.lineStart(),c=0;c<P;++c)s.point((S=C[c])[0],S[1]);s.lineEnd();return}r.push(E=new Intersection(S,C,null,!0)),o.push(E.o=new Intersection(S,null,E,!1)),r.push(E=new Intersection(L,C,null,!1)),o.push(E.o=new Intersection(L,null,E,!0))}}),!!r.length){for(o.sort(e),link(r),link(o),c=0,_=o.length;c<_;++c)o[c].e=t=!t;for(var l=r[0],d,f;;){for(var g=l,b=!0;g.v;)if((g=g.n)===l)return;d=g.z,s.lineStart();do{if(g.v=g.o.v=!0,g.e){if(b)for(c=0,_=d.length;c<_;++c)s.point((f=d[c])[0],f[1]);else i(g.x,g.n.x,1,s);g=g.n}else{if(b)for(d=g.p.z,c=d.length-1;c>=0;--c)s.point((f=d[c])[0],f[1]);else i(g.x,g.p.x,-1,s);g=g.p}g=g.o,d=g.z,b=!b}while(!g.v);s.lineEnd()}}}function link(n){if(e=n.length){for(var e,t=0,i=n[0],s;++t<e;)i.n=s=n[t],s.p=i,i=s;i.n=s=n[0],s.p=i}}function ascending(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function bisector(n){return n.length===1&&(n=ascendingComparator(n)),{left:function(e,t,i,s){for(i==null&&(i=0),s==null&&(s=e.length);i<s;){var r=i+s>>>1;n(e[r],t)<0?i=r+1:s=r}return i},right:function(e,t,i,s){for(i==null&&(i=0),s==null&&(s=e.length);i<s;){var r=i+s>>>1;n(e[r],t)>0?s=r:i=r+1}return i}}}function ascendingComparator(n){return function(e,t){return ascending(n(e),t)}}bisector(ascending);function range(n,e,t){n=+n,e=+e,t=(s=arguments.length)<2?(e=n,n=0,1):s<3?1:+t;for(var i=-1,s=Math.max(0,Math.ceil((e-n)/t))|0,r=new Array(s);++i<s;)r[i]=n+i*t;return r}function merge(n){for(var e=n.length,t,i=-1,s=0,r,o;++i<e;)s+=n[i].length;for(r=new Array(s);--e>=0;)for(o=n[e],t=o.length;--t>=0;)r[--s]=o[t];return r}var clipMax=1e9,clipMin=-clipMax;function clipExtent(n,e,t,i){function s(l,d){return n<=l&&l<=t&&e<=d&&d<=i}function r(l,d,f,g){var b=0,C=0;if(l==null||(b=o(l,f))!==(C=o(d,f))||_(l,d)<0^f>0)do g.point(b===0||b===3?n:t,b>1?i:e);while((b=(b+f+4)%4)!==C);else g.point(d[0],d[1])}function o(l,d){return abs(l[0]-n)<epsilon?d>0?0:3:abs(l[0]-t)<epsilon?d>0?2:1:abs(l[1]-e)<epsilon?d>0?1:0:d>0?3:2}function c(l,d){return _(l.x,d.x)}function _(l,d){var f=o(l,1),g=o(d,1);return f!==g?f-g:f===0?d[1]-l[1]:f===1?l[0]-d[0]:f===2?l[1]-d[1]:d[0]-l[0]}return function(l){var d=l,f=clipBuffer(),g,b,C,P,S,L,E,M,D,R,k,N={point:$,lineStart:Y,lineEnd:J,polygonStart:F,polygonEnd:z};function $(le,j){s(le,j)&&d.point(le,j)}function B(){for(var le=0,j=0,ie=b.length;j<ie;++j)for(var te=b[j],ce=1,xe=te.length,he=te[0],Q,fe,Ae=he[0],me=he[1];ce<xe;++ce)Q=Ae,fe=me,he=te[ce],Ae=he[0],me=he[1],fe<=i?me>i&&(Ae-Q)*(i-fe)>(me-fe)*(n-Q)&&++le:me<=i&&(Ae-Q)*(i-fe)<(me-fe)*(n-Q)&&--le;return le}function F(){d=f,g=[],b=[],k=!0}function z(){var le=B(),j=k&&le,ie=(g=merge(g)).length;(j||ie)&&(l.polygonStart(),j&&(l.lineStart(),r(null,null,1,l),l.lineEnd()),ie&&clipPolygon(g,c,le,r,l),l.polygonEnd()),d=l,g=b=C=null}function Y(){N.point=q,b&&b.push(C=[]),R=!0,D=!1,E=M=NaN}function J(){g&&(q(P,S),L&&D&&f.rejoin(),g.push(f.result())),N.point=$,D&&d.lineEnd()}function q(le,j){var ie=s(le,j);if(b&&C.push([le,j]),R)P=le,S=j,L=ie,R=!1,ie&&(d.lineStart(),d.point(le,j));else if(ie&&D)d.point(le,j);else{var te=[E=Math.max(clipMin,Math.min(clipMax,E)),M=Math.max(clipMin,Math.min(clipMax,M))],ce=[le=Math.max(clipMin,Math.min(clipMax,le)),j=Math.max(clipMin,Math.min(clipMax,j))];clipLine(te,ce,n,e,t,i)?(D||(d.lineStart(),d.point(te[0],te[1])),d.point(ce[0],ce[1]),ie||d.lineEnd(),k=!1):ie&&(d.lineStart(),d.point(le,j),k=!1)}E=le,M=j,D=ie}return N}}function extent(){var n=0,e=0,t=960,i=500,s,r,o;return o={stream:function(c){return s&&r===c?s:s=clipExtent(n,e,t,i)(r=c)},extent:function(c){return arguments.length?(n=+c[0][0],e=+c[0][1],t=+c[1][0],i=+c[1][1],s=r=null,o):[[n,e],[t,i]]}}}var sum=adder();function polygonContains(n,e){var t=e[0],i=e[1],s=[sin(t),-cos(t),0],r=0,o=0;sum.reset();for(var c=0,_=n.length;c<_;++c)if(d=(l=n[c]).length)for(var l,d,f=l[d-1],g=f[0],b=f[1]/2+quarterPi,C=sin(b),P=cos(b),S=0;S<d;++S,g=E,C=D,P=R,f=L){var L=l[S],E=L[0],M=L[1]/2+quarterPi,D=sin(M),R=cos(M),k=E-g,N=k>=0?1:-1,$=N*k,B=$>pi,F=C*D;if(sum.add(atan2(F*N*sin($),P*R+F*cos($))),r+=B?k+N*tau:k,B^g>=t^E>=t){var z=cartesianCross(cartesian(f),cartesian(L));cartesianNormalizeInPlace(z);var Y=cartesianCross(s,z);cartesianNormalizeInPlace(Y);var J=(B^k>=0?-1:1)*asin(Y[2]);(i>J||i===J&&(z[0]||z[1]))&&(o+=B^k>=0?1:-1)}}return(r<-epsilon||r<epsilon&&sum<-epsilon)^o&1}var lengthSum$1=adder(),lambda0,sinPhi0,cosPhi0,lengthStream$1={sphere:noop$1,point:noop$1,lineStart:lengthLineStart,lineEnd:noop$1,polygonStart:noop$1,polygonEnd:noop$1};function lengthLineStart(){lengthStream$1.point=lengthPointFirst$1,lengthStream$1.lineEnd=lengthLineEnd}function lengthLineEnd(){lengthStream$1.point=lengthStream$1.lineEnd=noop$1}function lengthPointFirst$1(n,e){n*=radians,e*=radians,lambda0=n,sinPhi0=sin(e),cosPhi0=cos(e),lengthStream$1.point=lengthPoint$1}function lengthPoint$1(n,e){n*=radians,e*=radians;var t=sin(e),i=cos(e),s=abs(n-lambda0),r=cos(s),o=sin(s),c=i*o,_=cosPhi0*t-sinPhi0*i*r,l=sinPhi0*t+cosPhi0*i*r;lengthSum$1.add(atan2(sqrt(c*c+_*_),l)),lambda0=n,sinPhi0=t,cosPhi0=i}function length(n){return lengthSum$1.reset(),geoStream(n,lengthStream$1),+lengthSum$1}var coordinates=[null,null],object={type:"LineString",coordinates};function distance(n,e){return coordinates[0]=n,coordinates[1]=e,length(object)}var containsObjectType={Feature:function(n,e){return containsGeometry(n.geometry,e)},FeatureCollection:function(n,e){for(var t=n.features,i=-1,s=t.length;++i<s;)if(containsGeometry(t[i].geometry,e))return!0;return!1}},containsGeometryType={Sphere:function(){return!0},Point:function(n,e){return containsPoint(n.coordinates,e)},MultiPoint:function(n,e){for(var t=n.coordinates,i=-1,s=t.length;++i<s;)if(containsPoint(t[i],e))return!0;return!1},LineString:function(n,e){return containsLine(n.coordinates,e)},MultiLineString:function(n,e){for(var t=n.coordinates,i=-1,s=t.length;++i<s;)if(containsLine(t[i],e))return!0;return!1},Polygon:function(n,e){return containsPolygon(n.coordinates,e)},MultiPolygon:function(n,e){for(var t=n.coordinates,i=-1,s=t.length;++i<s;)if(containsPolygon(t[i],e))return!0;return!1},GeometryCollection:function(n,e){for(var t=n.geometries,i=-1,s=t.length;++i<s;)if(containsGeometry(t[i],e))return!0;return!1}};function containsGeometry(n,e){return n&&containsGeometryType.hasOwnProperty(n.type)?containsGeometryType[n.type](n,e):!1}function containsPoint(n,e){return distance(n,e)===0}function containsLine(n,e){var t=distance(n[0],n[1]),i=distance(n[0],e),s=distance(e,n[1]);return i+s<=t+epsilon}function containsPolygon(n,e){return!!polygonContains(n.map(ringRadians),pointRadians(e))}function ringRadians(n){return n=n.map(pointRadians),n.pop(),n}function pointRadians(n){return[n[0]*radians,n[1]*radians]}function contains(n,e){return(n&&containsObjectType.hasOwnProperty(n.type)?containsObjectType[n.type]:containsGeometry)(n,e)}function graticuleX(n,e,t){var i=range(n,e-epsilon,t).concat(e);return function(s){return i.map(function(r){return[s,r]})}}function graticuleY(n,e,t){var i=range(n,e-epsilon,t).concat(e);return function(s){return i.map(function(r){return[r,s]})}}function graticule(){var n,e,t,i,s,r,o,c,_=10,l=_,d=90,f=360,g,b,C,P,S=2.5;function L(){return{type:"MultiLineString",coordinates:E()}}function E(){return range(ceil(i/d)*d,t,d).map(C).concat(range(ceil(c/f)*f,o,f).map(P)).concat(range(ceil(e/_)*_,n,_).filter(function(M){return abs(M%d)>epsilon}).map(g)).concat(range(ceil(r/l)*l,s,l).filter(function(M){return abs(M%f)>epsilon}).map(b))}return L.lines=function(){return E().map(function(M){return{type:"LineString",coordinates:M}})},L.outline=function(){return{type:"Polygon",coordinates:[C(i).concat(P(o).slice(1),C(t).reverse().slice(1),P(c).reverse().slice(1))]}},L.extent=function(M){return arguments.length?L.extentMajor(M).extentMinor(M):L.extentMinor()},L.extentMajor=function(M){return arguments.length?(i=+M[0][0],t=+M[1][0],c=+M[0][1],o=+M[1][1],i>t&&(M=i,i=t,t=M),c>o&&(M=c,c=o,o=M),L.precision(S)):[[i,c],[t,o]]},L.extentMinor=function(M){return arguments.length?(e=+M[0][0],n=+M[1][0],r=+M[0][1],s=+M[1][1],e>n&&(M=e,e=n,n=M),r>s&&(M=r,r=s,s=M),L.precision(S)):[[e,r],[n,s]]},L.step=function(M){return arguments.length?L.stepMajor(M).stepMinor(M):L.stepMinor()},L.stepMajor=function(M){return arguments.length?(d=+M[0],f=+M[1],L):[d,f]},L.stepMinor=function(M){return arguments.length?(_=+M[0],l=+M[1],L):[_,l]},L.precision=function(M){return arguments.length?(S=+M,g=graticuleX(r,s,90),b=graticuleY(e,n,S),C=graticuleX(c,o,90),P=graticuleY(i,t,S),L):S},L.extentMajor([[-180,-90+epsilon],[180,90-epsilon]]).extentMinor([[-180,-80-epsilon],[180,80+epsilon]])}function graticule10(){return graticule()()}function interpolate(n,e){var t=n[0]*radians,i=n[1]*radians,s=e[0]*radians,r=e[1]*radians,o=cos(i),c=sin(i),_=cos(r),l=sin(r),d=o*cos(t),f=o*sin(t),g=_*cos(s),b=_*sin(s),C=2*asin(sqrt(haversin(r-i)+o*_*haversin(s-t))),P=sin(C),S=C?function(L){var E=sin(L*=C)/P,M=sin(C-L)/P,D=M*d+E*g,R=M*f+E*b,k=M*c+E*l;return[atan2(R,D)*degrees,atan2(k,sqrt(D*D+R*R))*degrees]}:function(){return[t*degrees,i*degrees]};return S.distance=C,S}function identity$1(n){return n}var areaSum=adder(),areaRingSum=adder(),x00$2,y00$2,x0$3,y0$3,areaStream={point:noop$1,lineStart:noop$1,lineEnd:noop$1,polygonStart:function(){areaStream.lineStart=areaRingStart,areaStream.lineEnd=areaRingEnd},polygonEnd:function(){areaStream.lineStart=areaStream.lineEnd=areaStream.point=noop$1,areaSum.add(abs(areaRingSum)),areaRingSum.reset()},result:function(){var n=areaSum/2;return areaSum.reset(),n}};function areaRingStart(){areaStream.point=areaPointFirst}function areaPointFirst(n,e){areaStream.point=areaPoint,x00$2=x0$3=n,y00$2=y0$3=e}function areaPoint(n,e){areaRingSum.add(y0$3*n-x0$3*e),x0$3=n,y0$3=e}function areaRingEnd(){areaPoint(x00$2,y00$2)}var x0$2=1/0,y0$2=x0$2,x1=-x0$2,y1=x1,boundsStream={point:boundsPoint,lineStart:noop$1,lineEnd:noop$1,polygonStart:noop$1,polygonEnd:noop$1,result:function(){var n=[[x0$2,y0$2],[x1,y1]];return x1=y1=-(y0$2=x0$2=1/0),n}};function boundsPoint(n,e){n<x0$2&&(x0$2=n),n>x1&&(x1=n),e<y0$2&&(y0$2=e),e>y1&&(y1=e)}var X0=0,Y0=0,Z0=0,X1=0,Y1=0,Z1=0,X2=0,Y2=0,Z2=0,x00$1,y00$1,x0$1,y0$1,centroidStream={point:centroidPoint,lineStart:centroidLineStart,lineEnd:centroidLineEnd,polygonStart:function(){centroidStream.lineStart=centroidRingStart,centroidStream.lineEnd=centroidRingEnd},polygonEnd:function(){centroidStream.point=centroidPoint,centroidStream.lineStart=centroidLineStart,centroidStream.lineEnd=centroidLineEnd},result:function(){var n=Z2?[X2/Z2,Y2/Z2]:Z1?[X1/Z1,Y1/Z1]:Z0?[X0/Z0,Y0/Z0]:[NaN,NaN];return X0=Y0=Z0=X1=Y1=Z1=X2=Y2=Z2=0,n}};function centroidPoint(n,e){X0+=n,Y0+=e,++Z0}function centroidLineStart(){centroidStream.point=centroidPointFirstLine}function centroidPointFirstLine(n,e){centroidStream.point=centroidPointLine,centroidPoint(x0$1=n,y0$1=e)}function centroidPointLine(n,e){var t=n-x0$1,i=e-y0$1,s=sqrt(t*t+i*i);X1+=s*(x0$1+n)/2,Y1+=s*(y0$1+e)/2,Z1+=s,centroidPoint(x0$1=n,y0$1=e)}function centroidLineEnd(){centroidStream.point=centroidPoint}function centroidRingStart(){centroidStream.point=centroidPointFirstRing}function centroidRingEnd(){centroidPointRing(x00$1,y00$1)}function centroidPointFirstRing(n,e){centroidStream.point=centroidPointRing,centroidPoint(x00$1=x0$1=n,y00$1=y0$1=e)}function centroidPointRing(n,e){var t=n-x0$1,i=e-y0$1,s=sqrt(t*t+i*i);X1+=s*(x0$1+n)/2,Y1+=s*(y0$1+e)/2,Z1+=s,s=y0$1*n-x0$1*e,X2+=s*(x0$1+n),Y2+=s*(y0$1+e),Z2+=s*3,centroidPoint(x0$1=n,y0$1=e)}function PathContext(n){this._context=n}PathContext.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(n,e){switch(this._point){case 0:{this._context.moveTo(n,e),this._point=1;break}case 1:{this._context.lineTo(n,e);break}default:{this._context.moveTo(n+this._radius,e),this._context.arc(n,e,this._radius,0,tau);break}}},result:noop$1};var lengthSum=adder(),lengthRing,x00,y00,x0,y0,lengthStream={point:noop$1,lineStart:function(){lengthStream.point=lengthPointFirst},lineEnd:function(){lengthRing&&lengthPoint(x00,y00),lengthStream.point=noop$1},polygonStart:function(){lengthRing=!0},polygonEnd:function(){lengthRing=null},result:function(){var n=+lengthSum;return lengthSum.reset(),n}};function lengthPointFirst(n,e){lengthStream.point=lengthPoint,x00=x0=n,y00=y0=e}function lengthPoint(n,e){x0-=n,y0-=e,lengthSum.add(sqrt(x0*x0+y0*y0)),x0=n,y0=e}function PathString(){this._string=[]}PathString.prototype={_radius:4.5,_circle:circle(4.5),pointRadius:function(n){return(n=+n)!==this._radius&&(this._radius=n,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(n,e){switch(this._point){case 0:{this._string.push("M",n,",",e),this._point=1;break}case 1:{this._string.push("L",n,",",e);break}default:{this._circle==null&&(this._circle=circle(this._radius)),this._string.push("M",n,",",e,this._circle);break}}},result:function(){if(this._string.length){var n=this._string.join("");return this._string=[],n}else return null}};function circle(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}function index(n,e){var t=4.5,i,s;function r(o){return o&&(typeof t=="function"&&s.pointRadius(+t.apply(this,arguments)),geoStream(o,i(s))),s.result()}return r.area=function(o){return geoStream(o,i(areaStream)),areaStream.result()},r.measure=function(o){return geoStream(o,i(lengthStream)),lengthStream.result()},r.bounds=function(o){return geoStream(o,i(boundsStream)),boundsStream.result()},r.centroid=function(o){return geoStream(o,i(centroidStream)),centroidStream.result()},r.projection=function(o){return arguments.length?(i=o==null?(n=null,identity$1):(n=o).stream,r):n},r.context=function(o){return arguments.length?(s=o==null?(e=null,new PathString):new PathContext(e=o),typeof t!="function"&&s.pointRadius(t),r):e},r.pointRadius=function(o){return arguments.length?(t=typeof o=="function"?o:(s.pointRadius(+o),+o),r):t},r.projection(n).context(e)}function clip(n,e,t,i){return function(s,r){var o=e(r),c=s.invert(i[0],i[1]),_=clipBuffer(),l=e(_),d=!1,f,g,b,C={point:P,lineStart:L,lineEnd:E,polygonStart:function(){C.point=M,C.lineStart=D,C.lineEnd=R,g=[],f=[]},polygonEnd:function(){C.point=P,C.lineStart=L,C.lineEnd=E,g=merge(g);var k=polygonContains(f,c);g.length?(d||(r.polygonStart(),d=!0),clipPolygon(g,compareIntersection,k,t,r)):k&&(d||(r.polygonStart(),d=!0),r.lineStart(),t(null,null,1,r),r.lineEnd()),d&&(r.polygonEnd(),d=!1),g=f=null},sphere:function(){r.polygonStart(),r.lineStart(),t(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function P(k,N){var $=s(k,N);n(k=$[0],N=$[1])&&r.point(k,N)}function S(k,N){var $=s(k,N);o.point($[0],$[1])}function L(){C.point=S,o.lineStart()}function E(){C.point=P,o.lineEnd()}function M(k,N){b.push([k,N]);var $=s(k,N);l.point($[0],$[1])}function D(){l.lineStart(),b=[]}function R(){M(b[0][0],b[0][1]),l.lineEnd();var k=l.clean(),N=_.result(),$,B=N.length,F,z,Y;if(b.pop(),f.push(b),b=null,!!B){if(k&1){if(z=N[0],(F=z.length-1)>0){for(d||(r.polygonStart(),d=!0),r.lineStart(),$=0;$<F;++$)r.point((Y=z[$])[0],Y[1]);r.lineEnd()}return}B>1&&k&2&&N.push(N.pop().concat(N.shift())),g.push(N.filter(validSegment))}}return C}}function validSegment(n){return n.length>1}function compareIntersection(n,e){return((n=n.x)[0]<0?n[1]-halfPi-epsilon:halfPi-n[1])-((e=e.x)[0]<0?e[1]-halfPi-epsilon:halfPi-e[1])}const clipAntimeridian=clip(function(){return!0},clipAntimeridianLine,clipAntimeridianInterpolate,[-pi,-halfPi]);function clipAntimeridianLine(n){var e=NaN,t=NaN,i=NaN,s;return{lineStart:function(){n.lineStart(),s=1},point:function(r,o){var c=r>0?pi:-pi,_=abs(r-e);abs(_-pi)<epsilon?(n.point(e,t=(t+o)/2>0?halfPi:-halfPi),n.point(i,t),n.lineEnd(),n.lineStart(),n.point(c,t),n.point(r,t),s=0):i!==c&&_>=pi&&(abs(e-i)<epsilon&&(e-=i*epsilon),abs(r-c)<epsilon&&(r-=c*epsilon),t=clipAntimeridianIntersect(e,t,r,o),n.point(i,t),n.lineEnd(),n.lineStart(),n.point(c,t),s=0),n.point(e=r,t=o),i=c},lineEnd:function(){n.lineEnd(),e=t=NaN},clean:function(){return 2-s}}}function clipAntimeridianIntersect(n,e,t,i){var s,r,o=sin(n-t);return abs(o)>epsilon?atan((sin(e)*(r=cos(i))*sin(t)-sin(i)*(s=cos(e))*sin(n))/(s*r*o)):(e+i)/2}function clipAntimeridianInterpolate(n,e,t,i){var s;if(n==null)s=t*halfPi,i.point(-pi,s),i.point(0,s),i.point(pi,s),i.point(pi,0),i.point(pi,-s),i.point(0,-s),i.point(-pi,-s),i.point(-pi,0),i.point(-pi,s);else if(abs(n[0]-e[0])>epsilon){var r=n[0]<e[0]?pi:-pi;s=t*r/2,i.point(-r,s),i.point(0,s),i.point(r,s)}else i.point(e[0],e[1])}function clipCircle(n,e){var t=cos(n),i=t>0,s=abs(t)>epsilon;function r(d,f,g,b){circleStream(b,n,e,g,d,f)}function o(d,f){return cos(d)*cos(f)>t}function c(d){var f,g,b,C,P;return{lineStart:function(){C=b=!1,P=1},point:function(S,L){var E=[S,L],M,D=o(S,L),R=i?D?0:l(S,L):D?l(S+(S<0?pi:-pi),L):0;if(!f&&(C=b=D)&&d.lineStart(),D!==b&&(M=_(f,E),(!M||pointEqual(f,M)||pointEqual(E,M))&&(E[0]+=epsilon,E[1]+=epsilon,D=o(E[0],E[1]))),D!==b)P=0,D?(d.lineStart(),M=_(E,f),d.point(M[0],M[1])):(M=_(f,E),d.point(M[0],M[1]),d.lineEnd()),f=M;else if(s&&f&&i^D){var k;!(R&g)&&(k=_(E,f,!0))&&(P=0,i?(d.lineStart(),d.point(k[0][0],k[0][1]),d.point(k[1][0],k[1][1]),d.lineEnd()):(d.point(k[1][0],k[1][1]),d.lineEnd(),d.lineStart(),d.point(k[0][0],k[0][1])))}D&&(!f||!pointEqual(f,E))&&d.point(E[0],E[1]),f=E,b=D,g=R},lineEnd:function(){b&&d.lineEnd(),f=null},clean:function(){return P|(C&&b)<<1}}}function _(d,f,g){var b=cartesian(d),C=cartesian(f),P=[1,0,0],S=cartesianCross(b,C),L=cartesianDot(S,S),E=S[0],M=L-E*E;if(!M)return!g&&d;var D=t*L/M,R=-t*E/M,k=cartesianCross(P,S),N=cartesianScale(P,D),$=cartesianScale(S,R);cartesianAddInPlace(N,$);var B=k,F=cartesianDot(N,B),z=cartesianDot(B,B),Y=F*F-z*(cartesianDot(N,N)-1);if(!(Y<0)){var J=sqrt(Y),q=cartesianScale(B,(-F-J)/z);if(cartesianAddInPlace(q,N),q=spherical(q),!g)return q;var le=d[0],j=f[0],ie=d[1],te=f[1],ce;j<le&&(ce=le,le=j,j=ce);var xe=j-le,he=abs(xe-pi)<epsilon,Q=he||xe<epsilon;if(!he&&te<ie&&(ce=ie,ie=te,te=ce),Q?he?ie+te>0^q[1]<(abs(q[0]-le)<epsilon?ie:te):ie<=q[1]&&q[1]<=te:xe>pi^(le<=q[0]&&q[0]<=j)){var fe=cartesianScale(B,(-F+J)/z);return cartesianAddInPlace(fe,N),[q,spherical(fe)]}}}function l(d,f){var g=i?n:pi-n,b=0;return d<-g?b|=1:d>g&&(b|=2),f<-g?b|=4:f>g&&(b|=8),b}return clip(o,c,r,i?[0,-n]:[-pi,n-pi])}function transform(n){return{stream:transformer(n)}}function transformer(n){return function(e){var t=new TransformStream;for(var i in n)t[i]=n[i];return t.stream=e,t}}function TransformStream(){}TransformStream.prototype={constructor:TransformStream,point:function(n,e){this.stream.point(n,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function fitExtent(n,e,t){var i=e[1][0]-e[0][0],s=e[1][1]-e[0][1],r=n.clipExtent&&n.clipExtent();n.scale(150).translate([0,0]),r!=null&&n.clipExtent(null),geoStream(t,n.stream(boundsStream));var o=boundsStream.result(),c=Math.min(i/(o[1][0]-o[0][0]),s/(o[1][1]-o[0][1])),_=+e[0][0]+(i-c*(o[1][0]+o[0][0]))/2,l=+e[0][1]+(s-c*(o[1][1]+o[0][1]))/2;return r!=null&&n.clipExtent(r),n.scale(c*150).translate([_,l])}function fitSize(n,e,t){return fitExtent(n,[[0,0],e],t)}var maxDepth=16,cosMinDistance=cos(30*radians);function resample(n,e){return+e?resample$1(n,e):resampleNone(n)}function resampleNone(n){return transformer({point:function(e,t){e=n(e,t),this.stream.point(e[0],e[1])}})}function resample$1(n,e){function t(i,s,r,o,c,_,l,d,f,g,b,C,P,S){var L=l-i,E=d-s,M=L*L+E*E;if(M>4*e&&P--){var D=o+g,R=c+b,k=_+C,N=sqrt(D*D+R*R+k*k),$=asin(k/=N),B=abs(abs(k)-1)<epsilon||abs(r-f)<epsilon?(r+f)/2:atan2(R,D),F=n(B,$),z=F[0],Y=F[1],J=z-i,q=Y-s,le=E*J-L*q;(le*le/M>e||abs((L*J+E*q)/M-.5)>.3||o*g+c*b+_*C<cosMinDistance)&&(t(i,s,r,o,c,_,z,Y,B,D/=N,R/=N,k,P,S),S.point(z,Y),t(z,Y,B,D,R,k,l,d,f,g,b,C,P,S))}}return function(i){var s,r,o,c,_,l,d,f,g,b,C,P,S={point:L,lineStart:E,lineEnd:D,polygonStart:function(){i.polygonStart(),S.lineStart=R},polygonEnd:function(){i.polygonEnd(),S.lineStart=E}};function L($,B){$=n($,B),i.point($[0],$[1])}function E(){f=NaN,S.point=M,i.lineStart()}function M($,B){var F=cartesian([$,B]),z=n($,B);t(f,g,d,b,C,P,f=z[0],g=z[1],d=$,b=F[0],C=F[1],P=F[2],maxDepth,i),i.point(f,g)}function D(){S.point=L,i.lineEnd()}function R(){E(),S.point=k,S.lineEnd=N}function k($,B){M(s=$,B),r=f,o=g,c=b,_=C,l=P,S.point=M}function N(){t(f,g,d,b,C,P,r,o,s,c,_,l,maxDepth,i),S.lineEnd=D,D()}return S}}var transformRadians=transformer({point:function(n,e){this.stream.point(n*radians,e*radians)}});function projection(n){return projectionMutator(function(){return n})()}function projectionMutator(n){var e,t=150,i=480,s=250,r,o,c=0,_=0,l=0,d=0,f=0,g,b,C=null,P=clipAntimeridian,S=null,L,E,M,D=identity$1,R=.5,k=resample(z,R),N,$;function B(q){return q=b(q[0]*radians,q[1]*radians),[q[0]*t+r,o-q[1]*t]}function F(q){return q=b.invert((q[0]-r)/t,(o-q[1])/t),q&&[q[0]*degrees,q[1]*degrees]}function z(q,le){return q=e(q,le),[q[0]*t+r,o-q[1]*t]}B.stream=function(q){return N&&$===q?N:N=transformRadians(P(g,k(D($=q))))},B.clipAngle=function(q){return arguments.length?(P=+q?clipCircle(C=q*radians,6*radians):(C=null,clipAntimeridian),J()):C*degrees},B.clipExtent=function(q){return arguments.length?(D=q==null?(S=L=E=M=null,identity$1):clipExtent(S=+q[0][0],L=+q[0][1],E=+q[1][0],M=+q[1][1]),J()):S==null?null:[[S,L],[E,M]]},B.scale=function(q){return arguments.length?(t=+q,Y()):t},B.translate=function(q){return arguments.length?(i=+q[0],s=+q[1],Y()):[i,s]},B.center=function(q){return arguments.length?(c=q[0]%360*radians,_=q[1]%360*radians,Y()):[c*degrees,_*degrees]},B.rotate=function(q){return arguments.length?(l=q[0]%360*radians,d=q[1]%360*radians,f=q.length>2?q[2]%360*radians:0,Y()):[l*degrees,d*degrees,f*degrees]},B.precision=function(q){return arguments.length?(k=resample(z,R=q*q),J()):sqrt(R)},B.fitExtent=function(q,le){return fitExtent(B,q,le)},B.fitSize=function(q,le){return fitSize(B,q,le)};function Y(){b=compose(g=rotateRadians(l,d,f),e);var q=e(c,_);return r=i-q[0]*t,o=s+q[1]*t,J()}function J(){return N=$=null,B}return function(){return e=n.apply(this,arguments),B.invert=e.invert&&F,Y()}}function conicProjection(n){var e=0,t=pi/3,i=projectionMutator(n),s=i(e,t);return s.parallels=function(r){return arguments.length?i(e=r[0]*radians,t=r[1]*radians):[e*degrees,t*degrees]},s}function cylindricalEqualAreaRaw(n){var e=cos(n);function t(i,s){return[i*e,sin(s)/e]}return t.invert=function(i,s){return[i/e,asin(s*e)]},t}function conicEqualAreaRaw(n,e){var t=sin(n),i=(t+sin(e))/2;if(abs(i)<epsilon)return cylindricalEqualAreaRaw(n);var s=1+t*(2*i-t),r=sqrt(s)/i;function o(c,_){var l=sqrt(s-2*i*sin(_))/i;return[l*sin(c*=i),r-l*cos(c)]}return o.invert=function(c,_){var l=r-_;return[atan2(c,abs(l))/i*sign(l),asin((s-(c*c+l*l)*i*i)/(2*i))]},o}function conicEqualArea(){return conicProjection(conicEqualAreaRaw).scale(155.424).center([0,33.6442])}function albers(){return conicEqualArea().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function multiplex(n){var e=n.length;return{point:function(t,i){for(var s=-1;++s<e;)n[s].point(t,i)},sphere:function(){for(var t=-1;++t<e;)n[t].sphere()},lineStart:function(){for(var t=-1;++t<e;)n[t].lineStart()},lineEnd:function(){for(var t=-1;++t<e;)n[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<e;)n[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<e;)n[t].polygonEnd()}}}function albersUsa(){var n,e,t=albers(),i,s=conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),r,o=conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c,_,l={point:function(g,b){_=[g,b]}};function d(g){var b=g[0],C=g[1];return _=null,i.point(b,C),_||(r.point(b,C),_)||(c.point(b,C),_)}d.invert=function(g){var b=t.scale(),C=t.translate(),P=(g[0]-C[0])/b,S=(g[1]-C[1])/b;return(S>=.12&&S<.234&&P>=-.425&&P<-.214?s:S>=.166&&S<.234&&P>=-.214&&P<-.115?o:t).invert(g)},d.stream=function(g){return n&&e===g?n:n=multiplex([t.stream(e=g),s.stream(g),o.stream(g)])},d.precision=function(g){return arguments.length?(t.precision(g),s.precision(g),o.precision(g),f()):t.precision()},d.scale=function(g){return arguments.length?(t.scale(g),s.scale(g*.35),o.scale(g),d.translate(t.translate())):t.scale()},d.translate=function(g){if(!arguments.length)return t.translate();var b=t.scale(),C=+g[0],P=+g[1];return i=t.translate(g).clipExtent([[C-.455*b,P-.238*b],[C+.455*b,P+.238*b]]).stream(l),r=s.translate([C-.307*b,P+.201*b]).clipExtent([[C-.425*b+epsilon,P+.12*b+epsilon],[C-.214*b-epsilon,P+.234*b-epsilon]]).stream(l),c=o.translate([C-.205*b,P+.212*b]).clipExtent([[C-.214*b+epsilon,P+.166*b+epsilon],[C-.115*b-epsilon,P+.234*b-epsilon]]).stream(l),f()},d.fitExtent=function(g,b){return fitExtent(d,g,b)},d.fitSize=function(g,b){return fitSize(d,g,b)};function f(){return n=e=null,d}return d.scale(1070)}function azimuthalRaw(n){return function(e,t){var i=cos(e),s=cos(t),r=n(i*s);return[r*s*sin(e),r*sin(t)]}}function azimuthalInvert(n){return function(e,t){var i=sqrt(e*e+t*t),s=n(i),r=sin(s),o=cos(s);return[atan2(e*r,i*o),asin(i&&t*r/i)]}}var azimuthalEqualAreaRaw=azimuthalRaw(function(n){return sqrt(2/(1+n))});azimuthalEqualAreaRaw.invert=azimuthalInvert(function(n){return 2*asin(n/2)});function azimuthalEqualArea(){return projection(azimuthalEqualAreaRaw).scale(124.75).clipAngle(180-.001)}var azimuthalEquidistantRaw=azimuthalRaw(function(n){return(n=acos(n))&&n/sin(n)});azimuthalEquidistantRaw.invert=azimuthalInvert(function(n){return n});function azimuthalEquidistant(){return projection(azimuthalEquidistantRaw).scale(79.4188).clipAngle(180-.001)}function mercatorRaw(n,e){return[n,log(tan((halfPi+e)/2))]}mercatorRaw.invert=function(n,e){return[n,2*atan(exp(e))-halfPi]};function mercator(){return mercatorProjection(mercatorRaw).scale(961/tau)}function mercatorProjection(n){var e=projection(n),t=e.center,i=e.scale,s=e.translate,r=e.clipExtent,o=null,c,_,l;e.scale=function(f){return arguments.length?(i(f),d()):i()},e.translate=function(f){return arguments.length?(s(f),d()):s()},e.center=function(f){return arguments.length?(t(f),d()):t()},e.clipExtent=function(f){return arguments.length?(f==null?o=c=_=l=null:(o=+f[0][0],c=+f[0][1],_=+f[1][0],l=+f[1][1]),d()):o==null?null:[[o,c],[_,l]]};function d(){var f=pi*i(),g=e(rotation(e.rotate()).invert([0,0]));return r(o==null?[[g[0]-f,g[1]-f],[g[0]+f,g[1]+f]]:n===mercatorRaw?[[Math.max(g[0]-f,o),c],[Math.min(g[0]+f,_),l]]:[[o,Math.max(g[1]-f,c)],[_,Math.min(g[1]+f,l)]])}return d()}function tany(n){return tan((halfPi+n)/2)}function conicConformalRaw(n,e){var t=cos(n),i=n===e?sin(n):log(t/cos(e))/log(tany(e)/tany(n)),s=t*pow(tany(n),i)/i;if(!i)return mercatorRaw;function r(o,c){s>0?c<-halfPi+epsilon&&(c=-halfPi+epsilon):c>halfPi-epsilon&&(c=halfPi-epsilon);var _=s/pow(tany(c),i);return[_*sin(i*o),s-_*cos(i*o)]}return r.invert=function(o,c){var _=s-c,l=sign(i)*sqrt(o*o+_*_);return[atan2(o,abs(_))/i*sign(_),2*atan(pow(s/l,1/i))-halfPi]},r}function conicConformal(){return conicProjection(conicConformalRaw).scale(109.5).parallels([30,30])}function equirectangularRaw(n,e){return[n,e]}equirectangularRaw.invert=equirectangularRaw;function equirectangular(){return projection(equirectangularRaw).scale(152.63)}function conicEquidistantRaw(n,e){var t=cos(n),i=n===e?sin(n):(t-cos(e))/(e-n),s=t/i+n;if(abs(i)<epsilon)return equirectangularRaw;function r(o,c){var _=s-c,l=i*o;return[_*sin(l),s-_*cos(l)]}return r.invert=function(o,c){var _=s-c;return[atan2(o,abs(_))/i*sign(_),s-sign(i)*sqrt(o*o+_*_)]},r}function conicEquidistant(){return conicProjection(conicEquidistantRaw).scale(131.154).center([0,13.9389])}function gnomonicRaw(n,e){var t=cos(e),i=cos(n)*t;return[t*sin(n)/i,sin(e)/i]}gnomonicRaw.invert=azimuthalInvert(atan);function gnomonic(){return projection(gnomonicRaw).scale(144.049).clipAngle(60)}function scaleTranslate(n,e,t,i){return n===1&&e===1&&t===0&&i===0?identity$1:transformer({point:function(s,r){this.stream.point(s*n+t,r*e+i)}})}function identity(){var n=1,e=0,t=0,i=1,s=1,r=identity$1,o=null,c,_,l,d=identity$1,f,g,b;function C(){return f=g=null,b}return b={stream:function(P){return f&&g===P?f:f=r(d(g=P))},clipExtent:function(P){return arguments.length?(d=P==null?(o=c=_=l=null,identity$1):clipExtent(o=+P[0][0],c=+P[0][1],_=+P[1][0],l=+P[1][1]),C()):o==null?null:[[o,c],[_,l]]},scale:function(P){return arguments.length?(r=scaleTranslate((n=+P)*i,n*s,e,t),C()):n},translate:function(P){return arguments.length?(r=scaleTranslate(n*i,n*s,e=+P[0],t=+P[1]),C()):[e,t]},reflectX:function(P){return arguments.length?(r=scaleTranslate(n*(i=P?-1:1),n*s,e,t),C()):i<0},reflectY:function(P){return arguments.length?(r=scaleTranslate(n*i,n*(s=P?-1:1),e,t),C()):s<0},fitExtent:function(P,S){return fitExtent(b,P,S)},fitSize:function(P,S){return fitSize(b,P,S)}}}function naturalEarth1Raw(n,e){var t=e*e,i=t*t;return[n*(.8707-.131979*t+i*(-.013791+i*(.003971*t-.001529*i))),e*(1.007226+t*(.015085+i*(-.044475+.028874*t-.005916*i)))]}naturalEarth1Raw.invert=function(n,e){var t=e,i=25,s;do{var r=t*t,o=r*r;t-=s=(t*(1.007226+r*(.015085+o*(-.044475+.028874*r-.005916*o)))-e)/(1.007226+r*(.015085*3+o*(-.044475*7+.028874*9*r-.005916*11*o)))}while(abs(s)>epsilon&&--i>0);return[n/(.8707+(r=t*t)*(-.131979+r*(-.013791+r*r*r*(.003971-.001529*r)))),t]};function naturalEarth1(){return projection(naturalEarth1Raw).scale(175.295)}function orthographicRaw(n,e){return[cos(e)*sin(n),sin(e)]}orthographicRaw.invert=azimuthalInvert(asin);function orthographic(){return projection(orthographicRaw).scale(249.5).clipAngle(90+epsilon)}function stereographicRaw(n,e){var t=cos(e),i=1+cos(n)*t;return[t*sin(n)/i,sin(e)/i]}stereographicRaw.invert=azimuthalInvert(function(n){return 2*atan(n)});function stereographic(){return projection(stereographicRaw).scale(250).clipAngle(142)}function transverseMercatorRaw(n,e){return[log(tan((halfPi+e)/2)),-n]}transverseMercatorRaw.invert=function(n,e){return[-e,2*atan(exp(n))-halfPi]};function transverseMercator(){var n=mercatorProjection(transverseMercatorRaw),e=n.center,t=n.rotate;return n.center=function(i){return arguments.length?e([-i[1],i[0]]):(i=e(),[i[1],-i[0]])},n.rotate=function(i){return arguments.length?t([i[0],i[1],i.length>2?i[2]+90:90]):(i=t(),[i[0],i[1],i[2]-90])},t([0,0,90]).scale(159.155)}const d3Geo=Object.freeze(Object.defineProperty({__proto__:null,geoAlbers:albers,geoAlbersUsa:albersUsa,geoArea:area,geoAzimuthalEqualArea:azimuthalEqualArea,geoAzimuthalEqualAreaRaw:azimuthalEqualAreaRaw,geoAzimuthalEquidistant:azimuthalEquidistant,geoAzimuthalEquidistantRaw:azimuthalEquidistantRaw,geoBounds:bounds,geoCentroid:centroid,geoCircle:circle$1,geoClipExtent:extent,geoConicConformal:conicConformal,geoConicConformalRaw:conicConformalRaw,geoConicEqualArea:conicEqualArea,geoConicEqualAreaRaw:conicEqualAreaRaw,geoConicEquidistant:conicEquidistant,geoConicEquidistantRaw:conicEquidistantRaw,geoContains:contains,geoDistance:distance,geoEquirectangular:equirectangular,geoEquirectangularRaw:equirectangularRaw,geoGnomonic:gnomonic,geoGnomonicRaw:gnomonicRaw,geoGraticule:graticule,geoGraticule10:graticule10,geoIdentity:identity,geoInterpolate:interpolate,geoLength:length,geoMercator:mercator,geoMercatorRaw:mercatorRaw,geoNaturalEarth1:naturalEarth1,geoNaturalEarth1Raw:naturalEarth1Raw,geoOrthographic:orthographic,geoOrthographicRaw:orthographicRaw,geoPath:index,geoProjection:projection,geoProjectionMutator:projectionMutator,geoRotation:rotation,geoStereographic:stereographic,geoStereographicRaw:stereographicRaw,geoStream,geoTransform:transform,geoTransverseMercator:transverseMercator,geoTransverseMercatorRaw:transverseMercatorRaw},Symbol.toStringTag,{value:"Module"})),require$$3=getAugmentedNamespace(d3Geo);var hasRequiredJs$a;function requireJs$a(){if(hasRequiredJs$a)return jsExports$3;hasRequiredJs$a=1;var n=requireJs$1g(),e=requireJsts_min(),t=requireJs$1F(),i=require$$3,s=requireJs$1G();function r(b){return b&&typeof b=="object"&&"default"in b?b:{default:b}}var o=r(n);function c(b,C,P){P=P||{};var S=P.units||"kilometers",L=P.steps||8;if(!b)throw new Error("geojson is required");if(typeof P!="object")throw new Error("options must be an object");if(typeof L!="number")throw new Error("steps must be an number");if(C===void 0)throw new Error("radius is required");if(L<=0)throw new Error("steps must be greater than 0");var E=[];switch(b.type){case"GeometryCollection":return t.geomEach(b,function(M){var D=_(M,C,S,L);D&&E.push(D)}),s.featureCollection(E);case"FeatureCollection":return t.featureEach(b,function(M){var D=_(M,C,S,L);D&&t.featureEach(D,function(R){R&&E.push(R)})}),s.featureCollection(E)}return _(b,C,S,L)}function _(b,C,P,S){var L=b.properties||{},E=b.type==="Feature"?b.geometry:b;if(E.type==="GeometryCollection"){var M=[];return t.geomEach(b,function(Y){var J=_(Y,C,P,S);J&&M.push(J)}),s.featureCollection(M)}var D=g(E),R={type:E.type,coordinates:d(E.coordinates,D)},k=new e.GeoJSONReader,N=k.read(R),$=s.radiansToLength(s.lengthToRadians(C,P),"meters"),B=e.BufferOp.bufferOp(N,$,S),F=new e.GeoJSONWriter;if(B=F.write(B),!l(B.coordinates)){var z={type:B.type,coordinates:f(B.coordinates,D)};return s.feature(z,L)}}function l(b){return Array.isArray(b[0])?l(b[0]):isNaN(b[0])}function d(b,C){return typeof b[0]!="object"?C(b):b.map(function(P){return d(P,C)})}function f(b,C){return typeof b[0]!="object"?C.invert(b):b.map(function(P){return f(P,C)})}function g(b){var C=o.default(b).geometry.coordinates,P=[-C[0],-C[1]];return i.geoAzimuthalEquidistant().rotate(P).scale(s.earthRadius)}return js$9.exports=c,jsExports$3.default=c,jsExports$3}var js$8={},hasRequiredJs$9;function requireJs$9(){if(hasRequiredJs$9)return js$8;hasRequiredJs$9=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(js$8,"__esModule",{value:!0});var e=n(requirePolygonClipping_umd()),t=requireJs$1D(),i=requireJs$1G();function s(r,o,c){c===void 0&&(c={});var _=t.getGeom(r),l=t.getGeom(o),d=e.default.union(_.coordinates,l.coordinates);return d.length===0?null:d.length===1?i.polygon(d[0],c.properties):i.multiPolygon(d,c.properties)}return js$8.default=s,js$8}var js$7={},hasRequiredJs$8;function requireJs$8(){if(hasRequiredJs$8)return js$7;hasRequiredJs$8=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(js$7,"__esModule",{value:!0});var e=requireJs$1G(),t=requireJs$1D(),i=n(requirePolygonClipping_umd());function s(r,o,c){c===void 0&&(c={});var _=t.getGeom(r),l=t.getGeom(o),d=i.default.intersection(_.coordinates,l.coordinates);return d.length===0?null:d.length===1?e.polygon(d[0],c.properties):e.multiPolygon(d,c.properties)}return js$7.default=s,js$7}var jsExports$2={},js$6={get exports(){return jsExports$2},set exports(n){jsExports$2=n}},hasRequiredJs$7;function requireJs$7(){if(hasRequiredJs$7)return jsExports$2;hasRequiredJs$7=1;var n=requireJs$1G(),e=requireJs$1D(),t=requireJs$1F(),i=requireJs$T(),s=requirePolygonClipping_umd();function r(l){return l&&typeof l=="object"&&"default"in l?l:{default:l}}var o=r(i),c=r(s);function _(l,d){if(d=d||{},!n.isObject(d))throw new Error("options is invalid");var f=d.propertyName;e.collectionOf(l,"Polygon","dissolve");var g=[];if(d.propertyName){var b={};t.featureEach(l,function(L){Object.prototype.hasOwnProperty.call(b,L.properties[f])||(b[L.properties[f]]=[]),b[L.properties[f]].push(L)});for(var C=Object.keys(b),P=0;P<C.length;P++){var S=n.multiPolygon(c.default.union.apply(null,b[C[P]].map(function(L){return L.geometry.coordinates})));S.properties[f]=C[P],g.push(S)}}else return o.default(n.multiPolygon(c.default.union.apply(null,l.features.map(function(L){return L.geometry.coordinates}))));return o.default(n.featureCollection(g))}return js$6.exports=_,jsExports$2.default=_,jsExports$2}var js$5={},hasRequiredJs$6;function requireJs$6(){if(hasRequiredJs$6)return js$5;hasRequiredJs$6=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(js$5,"__esModule",{value:!0});var e=n(requireJs$1y()),t=n(requireJs$8()),i=requireJs$1G();function s(c,_,l){l===void 0&&(l={});var d=JSON.stringify(l.properties||{}),f=c[0],g=c[1],b=c[2],C=c[3],P=(g+C)/2,S=(f+b)/2,L=_*2/e.default([f,P],[b,P],l),E=L*(b-f),M=_*2/e.default([S,g],[S,C],l),D=M*(C-g),R=E/2,k=R*2,N=Math.sqrt(3)/2*D,$=b-f,B=C-g,F=3/4*k,z=N,Y=($-k)/(k-R/2),J=Math.floor(Y),q=(J*F-R/2-$)/2-R/2+F/2,le=Math.floor((B-N)/N),j=(B-le*N)/2,ie=le*N-B>N/2;ie&&(j-=N/4);for(var te=[],ce=[],xe=0;xe<6;xe++){var he=2*Math.PI/6*xe;te.push(Math.cos(he)),ce.push(Math.sin(he))}for(var Q=[],fe=0;fe<=J;fe++)for(var Ae=0;Ae<=le;Ae++){var me=fe%2===1;if(!(Ae===0&&me)&&!(Ae===0&&ie)){var Se=fe*F+f-q,Ie=Ae*z+g+j;if(me&&(Ie-=N/2),l.triangles===!0)o([Se,Ie],E/2,D/2,JSON.parse(d),te,ce).forEach(function(Te){l.mask?t.default(l.mask,Te)&&Q.push(Te):Q.push(Te)});else{var pe=r([Se,Ie],E/2,D/2,JSON.parse(d),te,ce);l.mask?t.default(l.mask,pe)&&Q.push(pe):Q.push(pe)}}}return i.featureCollection(Q)}function r(c,_,l,d,f,g){for(var b=[],C=0;C<6;C++){var P=c[0]+_*f[C],S=c[1]+l*g[C];b.push([P,S])}return b.push(b[0].slice()),i.polygon([b],d)}function o(c,_,l,d,f,g){for(var b=[],C=0;C<6;C++){var P=[];P.push(c),P.push([c[0]+_*f[C],c[1]+l*g[C]]),P.push([c[0]+_*f[(C+1)%6],c[1]+l*g[(C+1)%6]]),P.push(c),b.push(i.polygon([P],d))}return b}return js$5.default=s,js$5}var jsExports$1={},js$4={get exports(){return jsExports$1},set exports(n){jsExports$1=n}},hasRequiredJs$5;function requireJs$5(){if(hasRequiredJs$5)return jsExports$1;hasRequiredJs$5=1;var n=requireJs$1G(),e=requirePolygonClipping_umd();function t(_){return _&&typeof _=="object"&&"default"in _?_:{default:_}}var i=t(e);function s(_,l){var d=c(l),f=null;return _.type==="FeatureCollection"?f=r(_):f=o(i.default.union(_.geometry.coordinates)),f.geometry.coordinates.forEach(function(g){d.geometry.coordinates.push(g[0])}),d}function r(_){var l=_.features.length===2?i.default.union(_.features[0].geometry.coordinates,_.features[1].geometry.coordinates):i.default.union.apply(i.default,_.features.map(function(d){return d.geometry.coordinates}));return o(l)}function o(_){return n.multiPolygon(_)}function c(_){var l=[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]],d=_&&_.geometry.coordinates||l;return n.polygon(d)}return js$4.exports=s,jsExports$1.default=s,jsExports$1}var js$3={},js$2={},hasRequiredJs$4;function requireJs$4(){if(hasRequiredJs$4)return js$2;hasRequiredJs$4=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(js$2,"__esModule",{value:!0});var e=n(requireJs$s()),t=n(requireJs$1y()),i=requireJs$1G();function s(r,o,c,_){_===void 0&&(_={});for(var l=[],d=r[0],f=r[1],g=r[2],b=r[3],C=o/t.default([d,f],[g,f],_),P=C*(g-d),S=c/t.default([d,f],[d,b],_),L=S*(b-f),E=g-d,M=b-f,D=Math.floor(E/P),R=Math.floor(M/L),k=(E-D*P)/2,N=(M-R*L)/2,$=d+k,B=0;B<D;B++){for(var F=f+N,z=0;z<R;z++){var Y=i.polygon([[[$,F],[$,F+L],[$+P,F+L],[$+P,F],[$,F]]],_.properties);_.mask?e.default(_.mask,Y)&&l.push(Y):l.push(Y),F+=L}$+=P}return i.featureCollection(l)}return js$2.default=s,js$2}var hasRequiredJs$3;function requireJs$3(){if(hasRequiredJs$3)return js$3;hasRequiredJs$3=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(js$3,"__esModule",{value:!0});var e=n(requireJs$4());function t(i,s,r){return r===void 0&&(r={}),e.default(i,s,s,r)}return js$3.default=t,js$3}var js$1={},hasRequiredJs$2;function requireJs$2(){if(hasRequiredJs$2)return js$1;hasRequiredJs$2=1;var n=commonjsGlobal&&commonjsGlobal.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(js$1,"__esModule",{value:!0});var e=n(requireJs$1y()),t=n(requireJs$8()),i=requireJs$1G();function s(r,o,c){c===void 0&&(c={});for(var _=[],l=o/e.default([r[0],r[1]],[r[2],r[1]],c),d=l*(r[2]-r[0]),f=o/e.default([r[0],r[1]],[r[0],r[3]],c),g=f*(r[3]-r[1]),b=0,C=r[0];C<=r[2];){for(var P=0,S=r[1];S<=r[3];){var L=null,E=null;b%2===0&&P%2===0?(L=i.polygon([[[C,S],[C,S+g],[C+d,S],[C,S]]],c.properties),E=i.polygon([[[C,S+g],[C+d,S+g],[C+d,S],[C,S+g]]],c.properties)):b%2===0&&P%2===1?(L=i.polygon([[[C,S],[C+d,S+g],[C+d,S],[C,S]]],c.properties),E=i.polygon([[[C,S],[C,S+g],[C+d,S+g],[C,S]]],c.properties)):P%2===0&&b%2===1?(L=i.polygon([[[C,S],[C,S+g],[C+d,S+g],[C,S]]],c.properties),E=i.polygon([[[C,S],[C+d,S+g],[C+d,S],[C,S]]],c.properties)):P%2===1&&b%2===1&&(L=i.polygon([[[C,S],[C,S+g],[C+d,S],[C,S]]],c.properties),E=i.polygon([[[C,S+g],[C+d,S+g],[C+d,S],[C,S+g]]],c.properties)),c.mask?(t.default(c.mask,L)&&_.push(L),t.default(c.mask,E)&&_.push(E)):(_.push(L),_.push(E)),S+=g,P++}b++,C+=d}return i.featureCollection(_)}return js$1.default=s,js$1}var jsExports={},js={get exports(){return jsExports},set exports(n){jsExports=n}},hasRequiredJs$1;function requireJs$1(){if(hasRequiredJs$1)return jsExports;hasRequiredJs$1=1;var n=requireJs$1E(),e=requireJs$6(),t=requireJs$V(),i=requireJs$1y(),s=requireJs$1f(),r=requireJs$3(),o=requireJs$2(),c=requireJs$1w(),_=requireJs$1G(),l=requireJs$1F(),d=requireJs$1D();function f(R){return R&&typeof R=="object"&&"default"in R?R:{default:R}}var g=f(n),b=f(e),C=f(t),P=f(i),S=f(s),L=f(r),E=f(o),M=f(c);function D(R,k,N){if(N=N||{},typeof N!="object")throw new Error("options is invalid");var $=N.gridType,B=N.property,F=N.weight;if(!R)throw new Error("points is required");if(d.collectionOf(R,"Point","input must contain Points"),!k)throw new Error("cellSize is required");if(F!==void 0&&typeof F!="number")throw new Error("weight must be a number");B=B||"elevation",$=$||"square",F=F||1;var z=g.default(R),Y;switch($){case"point":case"points":Y=C.default(z,k,N);break;case"square":case"squares":Y=L.default(z,k,N);break;case"hex":case"hexes":Y=b.default(z,k,N);break;case"triangle":case"triangles":Y=E.default(z,k,N);break;default:throw new Error("invalid gridType")}var J=[];return l.featureEach(Y,function(q){var le=0,j=0;l.featureEach(R,function(te){var ce=$==="point"?q:S.default(q),xe=P.default(ce,te,N),he;if(B!==void 0&&(he=te.properties[B]),he===void 0&&(he=te.geometry.coordinates[2]),he===void 0)throw new Error("zValue is missing");xe===0&&(le=he);var Q=1/Math.pow(xe,F);j+=Q,le+=Q*he});var ie=M.default(q);ie.properties[B]=le/j,J.push(ie)}),_.featureCollection(J)}return js.exports=D,jsExports.default=D,jsExports}var hasRequiredJs;function requireJs(){return hasRequiredJs||(hasRequiredJs=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=requireJs$1C(),t=requireJs$1B(),i=requireJs$1z(),s=requireJs$1v(),r=requireJs$1u(),o=requireJs$1t(),c=requireJs$1r(),_=requireJs$1q(),l=requireJs$1p(),d=requireJs$1o(),f=requireJs$1m(),g=requireJs$1l(),b=requireJs$1j(),C=requireJs$1h(),P=requireJs$1g(),S=requireJs$1e(),L=requireJs$1f(),E=requireJs$1d(),M=requireJs$1y(),D=requireJs$1c(),R=requireJs$1E(),k=requireJs$1b(),N=requireJs$1n(),$=requireJs$1A(),B=requireJs$1a(),F=requireJs$17(),z=requireJs$14(),Y=requireJs$13(),J=requireJs$1x(),q=requireJs$1i(),le=requireJs$1k(),j=requireJs$12(),ie=requireJs$11(),te=requireJs$10(),ce=requireJs$$(),xe=requireJs$_(),he=requireJs$Z(),Q=requireJs$Y(),fe=requireJs$V(),Ae=requireJs$U(),me=requireJs$T(),Se=requireJs$18(),Ie=requireJs$S(),pe=requireJs$R(),Te=requireJs$Q(),ye=requireJs$19(),ge=requireJs$P(),ae=requireJs$O(),we=requireJs$N(),ke=requireJs$M(),Ne=requireJs$L(),$e=requireJs$K(),qe=requireJs$J(),Je=requireJs$I(),ve=requireJs$16(),W=requireJs$H(),U=requireJs$G(),X=requireJs$E(),oe=requireJs$D(),_e=requireJs$C(),Pe=requireJs$B(),De=requireJs$A(),Me=requireJs$z(),Ve=requireJs$y(),Ze=requireJs$x(),Ue=requireJs$w(),xt=requireJs$v(),ht=requireJs$F(),Pt=requireJs$u(),Et=requireJs$X(),Tt=requireJs$t(),Rt=requireJs$W(),Bt=requireJs$s(),Vt=requireJs$1w(),zt=requireJs$1s(),It=requireJs$r(),Ht=requireJs$q(),Kt=requireJs$15(),Xe=requireJs$p(),Oi=requireJs$o(),Ui=requireJs$n(),Mt=requireJs$m(),u0=requireJs$l(),Ji=requireJs$k(),Gi=requireJs$j(),Wi=requireJs$i(),ct=requireJs$h(),nt=requireJs$f(),ft=requireJs$g(),ot=requireJs$e(),pt=requireJs$d(),mt=requireJs$c(),Ct=requireJs$1G(),rt=requireJs$1D(),Ke=requireJs$1F(),ne=requireJs$b(),yi=requireJs$a(),ri=requireJs$9(),h0=requireJs$8(),Pi=requireJs$7(),ia=requireJs$6(),Ei=requireJs$5(),la=requireJs$3(),Ut=requireJs$2(),qt=requireJs$1();function We(Lt){return Lt&&typeof Lt=="object"&&"default"in Lt?Lt:{default:Lt}}function ei(Lt){if(Lt&&Lt.__esModule)return Lt;var Qi=Object.create(null);return Lt&&Object.keys(Lt).forEach(function(o0){if(o0!=="default"){var c0=Object.getOwnPropertyDescriptor(Lt,o0);Object.defineProperty(Qi,o0,c0.get?c0:{enumerable:!0,get:function(){return Lt[o0]}})}}),Qi.default=Lt,Object.freeze(Qi)}var s0=We(e),Yt=We(t),w0=We(i),Yi=We(s),se=We(r),ue=We(o),je=We(c),Qe=We(_),et=We(l),Ye=We(d),be=We(f),st=We(g),Ge=We(b),re=We(C),Ee=We(P),Ce=We(S),Oe=We(L),Re=We(E),D0=We(M),tt=We(D),ua=We(R),wt=We(k),gt=We(N),lt=We($),ut=We(B),bt=We(F),St=We(z),Be=We(Y),yt=We(J),Fe=We(q),d0=We(le),Sa=We(j),xi=We(ie),Gt=We(te),kt=We(ce),Xt=We(xe),Ka=We(he),es=We(Q),Ni=We(fe),Ma=We(Ae),t0=We(me),$t=We(Se),ha=We(Ie),oi=We(pe),ka=We(Te),aa=We(ye),Jt=We(ge),Si=We(ae),F0=We(we),zi=We(ke),f0=We(Ne),P0=We($e),H0=We(qe),ti=We(Je),qa=We(ve),Xi=We(W),Qt=We(U),ni=We(X),Ta=We(oe),ts=We(_e),sa=We(Pe),ja=We(De),Va=We(Me),vi=We(Ve),E0=We(Ze),ui=We(Ue),B0=We(xt),n0=We(ht),da=We(Pt),Zt=We(Et),dt=We(Tt),Ua=We(Rt),fa=We(Bt),Mi=We(Vt),i0=We(zt),O0=We(It),pa=We(Ht),$a=We(Kt),Ja=We(Xe),Ot=We(Oi),m0=We(Ui),Wt=We(Mt),ma=We(u0),ki=We(Ji),Wa=We(Gi),Dt=We(Wi),G0=We(ct),jt=We(nt),ga=We(ft),Ci=ei(ot),q0=ei(pt),Ya=ei(mt),N0=ei(Ct),Nt=ei(rt),qi=ei(Ke),na=We(ne),r0=We(yi),$i=We(ri),ci=We(h0),is=We(Pi),Xa=We(ia),S0=We(Ei),Zi=We(la),k0=We(Ut),Fi=We(qt);Object.keys(ot).forEach(function(Lt){Lt!=="default"&&Object.defineProperty(n,Lt,{enumerable:!0,get:function(){return ot[Lt]}})}),Object.keys(pt).forEach(function(Lt){Lt!=="default"&&Object.defineProperty(n,Lt,{enumerable:!0,get:function(){return pt[Lt]}})}),Object.keys(mt).forEach(function(Lt){Lt!=="default"&&Object.defineProperty(n,Lt,{enumerable:!0,get:function(){return mt[Lt]}})}),Object.keys(Ct).forEach(function(Lt){Lt!=="default"&&Object.defineProperty(n,Lt,{enumerable:!0,get:function(){return Ct[Lt]}})}),Object.keys(rt).forEach(function(Lt){Lt!=="default"&&Object.defineProperty(n,Lt,{enumerable:!0,get:function(){return rt[Lt]}})}),Object.keys(Ke).forEach(function(Lt){Lt!=="default"&&Object.defineProperty(n,Lt,{enumerable:!0,get:function(){return Ke[Lt]}})}),Object.defineProperty(n,"isolines",{enumerable:!0,get:function(){return s0.default}}),Object.defineProperty(n,"convex",{enumerable:!0,get:function(){return Yt.default}}),Object.defineProperty(n,"pointsWithinPolygon",{enumerable:!0,get:function(){return w0.default}}),Object.defineProperty(n,"within",{enumerable:!0,get:function(){return w0.default}}),Object.defineProperty(n,"concave",{enumerable:!0,get:function(){return Yi.default}}),Object.defineProperty(n,"collect",{enumerable:!0,get:function(){return se.default}}),Object.defineProperty(n,"flip",{enumerable:!0,get:function(){return ue.default}}),Object.defineProperty(n,"simplify",{enumerable:!0,get:function(){return je.default}}),Object.defineProperty(n,"bezier",{enumerable:!0,get:function(){return Qe.default}}),Object.defineProperty(n,"bezierSpline",{enumerable:!0,get:function(){return Qe.default}}),Object.defineProperty(n,"tag",{enumerable:!0,get:function(){return et.default}}),Object.defineProperty(n,"sample",{enumerable:!0,get:function(){return Ye.default}}),Object.defineProperty(n,"envelope",{enumerable:!0,get:function(){return be.default}}),Object.defineProperty(n,"square",{enumerable:!0,get:function(){return st.default}}),Object.defineProperty(n,"circle",{enumerable:!0,get:function(){return Ge.default}}),Object.defineProperty(n,"midpoint",{enumerable:!0,get:function(){return re.default}}),Object.defineProperty(n,"center",{enumerable:!0,get:function(){return Ee.default}}),Object.defineProperty(n,"centerOfMass",{enumerable:!0,get:function(){return Ce.default}}),Object.defineProperty(n,"centroid",{enumerable:!0,get:function(){return Oe.default}}),Object.defineProperty(n,"combine",{enumerable:!0,get:function(){return Re.default}}),Object.defineProperty(n,"distance",{enumerable:!0,get:function(){return D0.default}}),Object.defineProperty(n,"explode",{enumerable:!0,get:function(){return tt.default}}),Object.defineProperty(n,"bbox",{enumerable:!0,get:function(){return ua.default}}),Object.defineProperty(n,"tesselate",{enumerable:!0,get:function(){return wt.default}}),Object.defineProperty(n,"bboxPolygon",{enumerable:!0,get:function(){return gt.default}}),Object.defineProperty(n,"booleanPointInPolygon",{enumerable:!0,get:function(){return lt.default}}),Object.defineProperty(n,"inside",{enumerable:!0,get:function(){return lt.default}}),Object.defineProperty(n,"nearest",{enumerable:!0,get:function(){return ut.default}}),Object.defineProperty(n,"nearestPoint",{enumerable:!0,get:function(){return ut.default}}),Object.defineProperty(n,"nearestPointOnLine",{enumerable:!0,get:function(){return bt.default}}),Object.defineProperty(n,"pointOnLine",{enumerable:!0,get:function(){return bt.default}}),Object.defineProperty(n,"nearestPointToLine",{enumerable:!0,get:function(){return St.default}}),Object.defineProperty(n,"planepoint",{enumerable:!0,get:function(){return Be.default}}),Object.defineProperty(n,"tin",{enumerable:!0,get:function(){return yt.default}}),Object.defineProperty(n,"bearing",{enumerable:!0,get:function(){return Fe.default}}),Object.defineProperty(n,"destination",{enumerable:!0,get:function(){return d0.default}}),Object.defineProperty(n,"kinks",{enumerable:!0,get:function(){return Sa.default}}),Object.defineProperty(n,"pointOnFeature",{enumerable:!0,get:function(){return xi.default}}),Object.defineProperty(n,"pointOnSurface",{enumerable:!0,get:function(){return xi.default}}),Object.defineProperty(n,"area",{enumerable:!0,get:function(){return Gt.default}}),Object.defineProperty(n,"along",{enumerable:!0,get:function(){return kt.default}}),Object.defineProperty(n,"length",{enumerable:!0,get:function(){return Xt.default}}),Object.defineProperty(n,"lineDistance",{enumerable:!0,get:function(){return Xt.default}}),Object.defineProperty(n,"lineSlice",{enumerable:!0,get:function(){return Ka.default}}),Object.defineProperty(n,"lineSliceAlong",{enumerable:!0,get:function(){return es.default}}),Object.defineProperty(n,"pointGrid",{enumerable:!0,get:function(){return Ni.default}}),Object.defineProperty(n,"truncate",{enumerable:!0,get:function(){return Ma.default}}),Object.defineProperty(n,"flatten",{enumerable:!0,get:function(){return t0.default}}),Object.defineProperty(n,"lineIntersect",{enumerable:!0,get:function(){return $t.default}}),Object.defineProperty(n,"lineChunk",{enumerable:!0,get:function(){return ha.default}}),Object.defineProperty(n,"unkinkPolygon",{enumerable:!0,get:function(){return oi.default}}),Object.defineProperty(n,"greatCircle",{enumerable:!0,get:function(){return ka.default}}),Object.defineProperty(n,"lineSegment",{enumerable:!0,get:function(){return aa.default}}),Object.defineProperty(n,"lineSplit",{enumerable:!0,get:function(){return Jt.default}}),Object.defineProperty(n,"lineArc",{enumerable:!0,get:function(){return Si.default}}),Object.defineProperty(n,"polygonToLine",{enumerable:!0,get:function(){return F0.default}}),Object.defineProperty(n,"polygonToLineString",{enumerable:!0,get:function(){return F0.default}}),Object.defineProperty(n,"lineStringToPolygon",{enumerable:!0,get:function(){return zi.default}}),Object.defineProperty(n,"lineToPolygon",{enumerable:!0,get:function(){return zi.default}}),Object.defineProperty(n,"bboxClip",{enumerable:!0,get:function(){return f0.default}}),Object.defineProperty(n,"lineOverlap",{enumerable:!0,get:function(){return P0.default}}),Object.defineProperty(n,"sector",{enumerable:!0,get:function(){return H0.default}}),Object.defineProperty(n,"rhumbBearing",{enumerable:!0,get:function(){return ti.default}}),Object.defineProperty(n,"rhumbDistance",{enumerable:!0,get:function(){return qa.default}}),Object.defineProperty(n,"rhumbDestination",{enumerable:!0,get:function(){return Xi.default}}),Object.defineProperty(n,"polygonTangents",{enumerable:!0,get:function(){return Qt.default}}),Object.defineProperty(n,"rewind",{enumerable:!0,get:function(){return ni.default}}),Object.defineProperty(n,"isobands",{enumerable:!0,get:function(){return Ta.default}}),Object.defineProperty(n,"transformRotate",{enumerable:!0,get:function(){return ts.default}}),Object.defineProperty(n,"transformScale",{enumerable:!0,get:function(){return sa.default}}),Object.defineProperty(n,"transformTranslate",{enumerable:!0,get:function(){return ja.default}}),Object.defineProperty(n,"lineOffset",{enumerable:!0,get:function(){return Va.default}}),Object.defineProperty(n,"polygonize",{enumerable:!0,get:function(){return vi.default}}),Object.defineProperty(n,"booleanDisjoint",{enumerable:!0,get:function(){return E0.default}}),Object.defineProperty(n,"booleanContains",{enumerable:!0,get:function(){return ui.default}}),Object.defineProperty(n,"booleanCrosses",{enumerable:!0,get:function(){return B0.default}}),Object.defineProperty(n,"booleanClockwise",{enumerable:!0,get:function(){return n0.default}}),Object.defineProperty(n,"booleanOverlap",{enumerable:!0,get:function(){return da.default}}),Object.defineProperty(n,"booleanPointOnLine",{enumerable:!0,get:function(){return Zt.default}}),Object.defineProperty(n,"booleanEqual",{enumerable:!0,get:function(){return dt.default}}),Object.defineProperty(n,"booleanWithin",{enumerable:!0,get:function(){return Ua.default}}),Object.defineProperty(n,"booleanIntersects",{enumerable:!0,get:function(){return fa.default}}),Object.defineProperty(n,"clone",{enumerable:!0,get:function(){return Mi.default}}),Object.defineProperty(n,"cleanCoords",{enumerable:!0,get:function(){return i0.default}}),Object.defineProperty(n,"clustersDbscan",{enumerable:!0,get:function(){return O0.default}}),Object.defineProperty(n,"clustersKmeans",{enumerable:!0,get:function(){return pa.default}}),Object.defineProperty(n,"pointToLineDistance",{enumerable:!0,get:function(){return $a.default}}),Object.defineProperty(n,"booleanParallel",{enumerable:!0,get:function(){return Ja.default}}),Object.defineProperty(n,"shortestPath",{enumerable:!0,get:function(){return Ot.default}}),Object.defineProperty(n,"voronoi",{enumerable:!0,get:function(){return m0.default}}),Object.defineProperty(n,"ellipse",{enumerable:!0,get:function(){return Wt.default}}),Object.defineProperty(n,"centerMean",{enumerable:!0,get:function(){return ma.default}}),Object.defineProperty(n,"centerMedian",{enumerable:!0,get:function(){return ki.default}}),Object.defineProperty(n,"standardDeviationalEllipse",{enumerable:!0,get:function(){return Wa.default}}),Object.defineProperty(n,"angle",{enumerable:!0,get:function(){return Dt.default}}),Object.defineProperty(n,"polygonSmooth",{enumerable:!0,get:function(){return G0.default}}),Object.defineProperty(n,"moranIndex",{enumerable:!0,get:function(){return jt.default}}),Object.defineProperty(n,"distanceWeight",{enumerable:!0,get:function(){return ga.default}}),n.projection=Ci,n.random=q0,n.clusters=Ya,Object.defineProperty(n,"bearingToAngle",{enumerable:!0,get:function(){return Ct.bearingToAzimuth}}),Object.defineProperty(n,"convertDistance",{enumerable:!0,get:function(){return Ct.convertLength}}),Object.defineProperty(n,"degrees2radians",{enumerable:!0,get:function(){return Ct.degreesToRadians}}),Object.defineProperty(n,"distanceToDegrees",{enumerable:!0,get:function(){return Ct.lengthToDegrees}}),Object.defineProperty(n,"distanceToRadians",{enumerable:!0,get:function(){return Ct.lengthToRadians}}),n.helpers=N0,Object.defineProperty(n,"radians2degrees",{enumerable:!0,get:function(){return Ct.radiansToDegrees}}),Object.defineProperty(n,"radiansToDistance",{enumerable:!0,get:function(){return Ct.radiansToLength}}),n.invariant=Nt,n.meta=qi,Object.defineProperty(n,"difference",{enumerable:!0,get:function(){return na.default}}),Object.defineProperty(n,"buffer",{enumerable:!0,get:function(){return r0.default}}),Object.defineProperty(n,"union",{enumerable:!0,get:function(){return $i.default}}),Object.defineProperty(n,"intersect",{enumerable:!0,get:function(){return ci.default}}),Object.defineProperty(n,"dissolve",{enumerable:!0,get:function(){return is.default}}),Object.defineProperty(n,"hexGrid",{enumerable:!0,get:function(){return Xa.default}}),Object.defineProperty(n,"mask",{enumerable:!0,get:function(){return S0.default}}),Object.defineProperty(n,"squareGrid",{enumerable:!0,get:function(){return Zi.default}}),Object.defineProperty(n,"triangleGrid",{enumerable:!0,get:function(){return k0.default}}),Object.defineProperty(n,"interpolate",{enumerable:!0,get:function(){return Fi.default}})}(js$1G)),js$1G}(function(module,exports){(function(n,e){e(exports,window.Cesium||_global_Cesium,window.turf||requireJs())})(commonjsGlobal,function(exports,Cesium,turf){const _0x3a2b68=_0x20dc;(function(n,e){const t={_0x468ec3:2950,_0x5439d4:2143,_0x47acfd:4219,_0x5d30b0:2834,_0x14fc8f:381},i=_0x20dc,s=n();for(;[];)try{if(-parseInt(i(3232))/1*(-parseInt(i(4296))/2)+parseInt(i(3503))/3*(parseInt(i(2816))/4)+parseInt(i(t._0x468ec3))/5*(parseInt(i(877))/6)+parseInt(i(t._0x5439d4))/7*(parseInt(i(4212))/8)+parseInt(i(t._0x47acfd))/9*(-parseInt(i(689))/10)+parseInt(i(t._0x5d30b0))/11*(-parseInt(i(t._0x14fc8f))/12)+-parseInt(i(2311))/13===e)break;s.push(s.shift())}catch{s.push(s.shift())}})(_0x1c66,676069);function _interopNamespace(n){const e={_0x149505:4038,_0x4d2a63:2953},t=_0x20dc;if(n&&n[t(e._0x149505)])return n;var i=Object.create(null);return n&&Object[t(e._0x4d2a63)](n).forEach(function(s){const r=t;if(s!=="default"){var o=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(i,s,o[r(615)]?o:{enumerable:!![],get:function(){return n[s]}})}}),i.default=n,i}var Cesium__namespace=_interopNamespace(Cesium);!(Cesium__namespace!=null&&Cesium__namespace.Viewer)&&console.error(_0x3a2b68(2369),Cesium__namespace);const version$1=Number(Cesium__namespace.VERSION.substr(Cesium__namespace[_0x3a2b68(3371)].indexOf(".")+1));version$1<108&&console[_0x3a2b68(4094)]("请将 mars3d-cesium 库升级至 v1.108 及以上版本",version$1);const getUrlComponent_old=Cesium__namespace.Resource.prototype.getUrlComponent;Cesium__namespace[_0x3a2b68(4357)].prototype.getUrlComponent=function(n,e){const t={_0x2e8b1d:4357,_0x294da6:1954},i=_0x3a2b68;let s=getUrlComponent_old.bind(this)(n,e);return Cesium__namespace[i(t._0x2e8b1d)][i(t._0x294da6)]&&(s=Cesium__namespace[i(t._0x2e8b1d)][i(t._0x294da6)](s)),this._last_url=s,s};const getValueInReferenceFrame_old=Cesium__namespace.ConstantPositionProperty[_0x3a2b68(4390)].getValueInReferenceFrame;Cesium__namespace.ConstantPositionProperty[_0x3a2b68(4390)].getValueInReferenceFrame=function(n,e,t){return!Cesium__namespace.defined(n)&&(n=Cesium__namespace.JulianDate.now()),getValueInReferenceFrame_old.bind(this)(n,e,t)},Cesium__namespace.VelocityOrientationProperty[_0x3a2b68(4390)][_0x3a2b68(3479)]=function(n,e){const t={_0x37266e:2639,_0x3d4f07:2957,_0x5d83be:931},i=_0x3a2b68;!this._positionScratch&&(this._positionScratch=new Cesium__namespace.Cartesian3,this._velocityScratch=new Cesium__namespace[i(2978)],this._rotationScratch=new Cesium__namespace.Matrix3);let s=this._velocityVectorProperty._getValue(n,this[i(t._0x37266e)],this._positionScratch);if(Cesium__namespace[i(407)](s)?this._last_velocity=s[i(t._0x3d4f07)]():s=this._last_velocity,!!Cesium__namespace.defined(s))return Cesium__namespace.Transforms.rotationMatrixFromPositionVelocity(this._positionScratch,s,this._ellipsoid,this._rotationScratch),Cesium__namespace[i(t._0x5d83be)].fromRotationMatrix(this._rotationScratch,e)};const beginFrame_old=Cesium__namespace[_0x3a2b68(748)].prototype.beginFrame;Cesium__namespace.Globe.prototype.beginFrame=function(n){const e={_0x47b6a5:3870,_0x347cb7:3870,_0xab5049:991,_0x3ef7db:3870},t=_0x3a2b68;var i,s,r,o,c,_,l,d;const f=(i=this._surface._tileProvider)===null||i===void 0||(s=i[t(4063)])===null||s===void 0?void 0:s.flat;f&&f[t(991)]&&(f[t(e._0x47b6a5)]&&f.texture.destroy(),f[t(e._0x47b6a5)]=createCroppingRangeTexture(n.context,f.areas,f.heights),f.hasUpdate=![]);const g=(r=this._surface._tileProvider)===null||r===void 0||(o=r.marsOptions)===null||o===void 0?void 0:o.uplift;g&&g.hasUpdate&&(g.texture&&g[t(e._0x347cb7)].destroy(),g.texture=createCroppingRangeTexture(n.context,g.areas),g.hasUpdate=![]);const b=(c=this._surface._tileProvider)===null||c===void 0||(_=c.marsOptions)===null||_===void 0?void 0:_.clip;b&&b.hasUpdate&&(b.texture&&b.texture[t(2619)](),b.texture=createCroppingRangeTexture(n.context,b.areas),b.hasUpdate=![]);const C=(l=this._surface._tileProvider)===null||l===void 0||(d=l.marsOptions)===null||d===void 0?void 0:d.flood;return C&&C[t(e._0xab5049)]&&(C.texture&&C[t(e._0x3ef7db)][t(2619)](),C.texture=createCroppingRangeTexture(n.context,C.areas),C.hasUpdate=![]),beginFrame_old[t(698)](this)(n)};function createCroppingRangeTexture(n,e,t){const i={_0xfaec97:2691,_0x17d456:1248,_0x3b0e91:3592,_0x47bc0d:384,_0x1a9191:3592},s={_0x3cf5e8:3664},r=_0x3a2b68,o=e==null?void 0:e.length;if(!o||o===0)return;let c=0;e[r(3782)](l=>{c<l.length&&(c=l.length)});const _=[];return e.forEach((l,d)=>{const f=r,g=l.length;if(l.forEach(b=>{const C=_0x20dc;_.push(b[C(768)]),_.push(b[C(s._0x3cf5e8)]),_.push(g),Cesium__namespace.defined(t)?_[C(1754)](t[d]):_.push(0)}),g<c)for(let b=0;b<c-g;b++)_[f(1754)](0),_.push(0),_.push(0),_.push(0)}),new Cesium__namespace.Texture({context:n,pixelFormat:Cesium__namespace[r(i._0xfaec97)].RGBA,pixelDatatype:Cesium__namespace.PixelDatatype[r(i._0x17d456)],sampler:new Cesium__namespace.Sampler({wrapS:Cesium__namespace[r(i._0x3b0e91)][r(i._0x47bc0d)],wrapT:Cesium__namespace[r(i._0x1a9191)][r(i._0x47bc0d)],minificationFilter:Cesium__namespace.TextureMinificationFilter[r(4333)],magnificationFilter:Cesium__namespace.TextureMagnificationFilter.NEAREST}),flipY:![],source:{width:c,height:o,arrayBufferView:new Float32Array(_)}})}Object[_0x3a2b68(2598)](Cesium__namespace.GlobeSurfaceTileProvider.prototype,{marsOptions:{get:function(){return this[_0x3a2b68({_0x1fe818:501}._0x1fe818)]}}}),Cesium__namespace.GlobeSurfaceTileProvider.prototype[_0x3a2b68(2719)]=function(n){const e={_0x41d085:2021},t={_0x1e1c5a:2126,_0x919c4e:2069},i={_0x3a48ba:3391,_0x2fa6a3:3870},s={_0x6e2ef8:1373,_0x3bafff:3391},r=_0x3a2b68;this._marsOptions={flat:{clear:function(){const o=_0x20dc;this.enabled=![],this[o(s._0x6e2ef8)]=[],this[o(s._0x3bafff)]=void 0,this.areas=void 0,this.texture=void 0,this.hasUpdate=![]}},uplift:{clear:function(){const o=_0x20dc;this.enabled=![],this.showUp=!![],this[o(4241)]=0,this[o(i._0x3a48ba)]=void 0,this.areas=void 0,this[o(i._0x2fa6a3)]=void 0,this.hasUpdate=![]}},clip:{clear:function(){this.enabled=![],this.rectangles=void 0,this.areas=void 0,this.texture=void 0,this.hasUpdate=![],this.onlySelf=![]}},flood:{clear:function(){const o=_0x20dc;this.enabled=![],this.rectangles=void 0,this.areas=void 0,this.texture=void 0,this[o(991)]=![],this.onlySelf=![]}},resetValue:function(){const o=_0x20dc;this.flat.clear(),this.uplift[o(t._0x1e1c5a)](),this[o(t._0x919c4e)][o(t._0x1e1c5a)](),this.flood.clear()}},this[r(501)][r(e._0x41d085)]()},Cesium__namespace[_0x3a2b68(1074)].prototype._initByMars3D=function(n,e){const t={_0x268c1a:2994,_0x4c0380:488},i=_0x3a2b68;this.invertColor=e[i(2994)]??n[i(t._0x268c1a)],this.filterColor=e[i(t._0x4c0380)]??n.filterColor,this.filterColor&&typeof this.filterColor===i(2148)&&this.filterColor[i(2649)]===String&&(this[i(488)]=Cesium__namespace.Color.fromCssColorString(this.filterColor))},Cesium__namespace[_0x3a2b68(3515)].prototype.addImageryProvider=function(n,e){const t={_0x3d9322:3674},i=_0x3a2b68,s=new Cesium__namespace.ImageryLayer(n,n.options);return this[i(t._0x3d9322)](s,e),s};const createShadowReceiveFragmentShader_old=Cesium__namespace.ShadowMapShader.createShadowReceiveFragmentShader;Cesium__namespace.ShadowMapShader[_0x3a2b68(936)]=function(n,e,t,i,s){const r=_0x3a2b68,o=createShadowReceiveFragmentShader_old.bind(this)(n,e,t,i,s);if(!isSun(e._lightCamera.position)){const c=o[r(3392)][o.sources[r(400)]-1];o[r(3392)][o.sources.length-1]=c.replace(r(366),"out_FragColor.rgb = out_FragColor.rgb;")}return o};function isSun(n){const e={_0x5e03cb:2376},t=_0x3a2b68;return Math.abs(n.x)>7471e3?!![]:Math[t(e._0x5e03cb)](n.y)>7471e3?!![]:Math.abs(n.z)>7471e3?!![]:![]}Object.defineProperties(Cesium__namespace[_0x3a2b68(3060)].prototype,{circle:{set:function(n){this.ellipse=n},get:function(){return this.ellipse}}}),Cesium__namespace[_0x3a2b68(2097)].prototype.update=function(n){const e={_0x297ba6:2604,_0x5e6441:3265},t=_0x3a2b68,i=Cesium__namespace[t(3658)](),s=n??!![];this._fpsFrameCount++;const r=i-this._lastFpsSampleTime;if(r>1e3){if(s){const c=this._fpsFrameCount*1e3/r|0;this._fpsText.nodeValue=c+" FPS"}this[t(e._0x297ba6)]=i,this._fpsFrameCount=0}this._msFrameCount++;const o=i-this._lastMsSampleTime;if(o>200){if(s){const c=(o/this[t(3074)])[t(e._0x5e6441)](2);this._msText[t(2895)]=c+" MS"}this._lastMsSampleTime=i,this[t(3074)]=0}};const load_old=Cesium__namespace[_0x3a2b68(3342)].prototype.load;Cesium__namespace.I3SLayer.prototype.load=function(){const n={_0x4960fa:2388},e=_0x3a2b68;var t,i;return((t=this._data)===null||t===void 0||(i=t.spatialReference)===null||i===void 0?void 0:i[e(n._0x4960fa)])===4490&&(this._data.spatialReference.wkid=4326),load_old.bind(this)()},Object[_0x3a2b68(2598)](Cesium__namespace[_0x3a2b68(481)].prototype,{globalAlpha:{set:function(n){this._globalAlpha=n},get:function(){return this._globalAlpha??1}}});const getValue_old$6=Cesium__namespace[_0x3a2b68(481)][_0x3a2b68(4390)][_0x3a2b68(3479)];Cesium__namespace.CheckerboardMaterialProperty.prototype.getValue=function(n,e){const t={_0x504c53:749,_0x508e41:838},i=_0x3a2b68;return e=getValue_old$6.bind(this)(n,e),this[i(749)]!==1&&(e.lightColor&&(e.lightColor[i(838)]*=this[i(t._0x504c53)]),e.darkColor&&(e.darkColor.alpha*=this.globalAlpha),e.evenColor&&(e.evenColor[i(838)]*=this[i(t._0x504c53)]),e[i(2977)]&&(e[i(2977)][i(t._0x508e41)]*=this.globalAlpha)),e};let _hasInfo=!![],_hasError=!![];function hasInfo(n){_hasInfo=n}function hasWarn(n){_hasInfo=n}function hasError(n){_hasError=n}function logInfo(...n){_hasInfo&&console.log(...n)}function logWarn(...n){console[_0x3a2b68({_0x11b20b:796}._0x11b20b)](...n)}function logError$1(...n){_hasError&&console.error(...n)}var Log={__proto__:null,hasInfo,hasWarn,hasError,logInfo,logWarn,logError:logError$1};const GraphicType={},GraphicClass={};function hasType(n){return GraphicClass[n]?!![]:![]}function eachGraphicType(n){const e={_0x571344:4350};Object.keys(GraphicClass).forEach((t,i)=>{n&&n[_0x20dc(e._0x571344)](this,t,i)})}function isPointType(n){return n?GraphicClass[n]&&GraphicClass[n].isPoint?!![]:![]:![]}function isCombineType(n){const e=_0x3a2b68;return n?GraphicClass[n]&&GraphicClass[n][e(3390)]?!![]:![]:![]}function register$4(n,e,t){const i={_0x431963:2552,_0x4c76ef:3191},s=_0x3a2b68;GraphicClass[n]&&logError$1("register Graphic: "+n+"类型已存在",e),GraphicType[n]=n,GraphicClass[n]=e,e.type=n,e.prototype[s(i._0x431963)]=n,t&&(e[s(i._0x4c76ef)]=!![],e[s(4390)].isPoint=!![])}function getClass$4(n){return GraphicClass[n]?GraphicClass[n]:(logWarn("getClass:未找到该类型对应的处理类",n),null)}function create$4(n,e){const t=getClass$4(n);return t?new t(e):void 0}function fromDraw(n,e){const t={_0x4a60f8:1603,_0x1e167e:3194},i=_0x3a2b68;if(!e[i(t._0x4a60f8)]){logError$1("fromDraw:需要传入指定绘制的type类型！");return}const s=getClass$4(e.type);if(!s||!s.prototype[i(t._0x1e167e)]){logInfo("对象不支持标绘",s);return}const r=new s(e);return r.startDraw(n),r}var GraphicUtil={__proto__:null,hasType,eachGraphicType,isPointType,isCombineType,register:register$4,getClass:getClass$4,create:create$4,fromDraw},edgeIntersectsEdge=function(e,t,i,s){var r=(s[0]-i[0])*(e[1]-i[1])-(s[1]-i[1])*(e[0]-i[0]),o=(t[0]-e[0])*(e[1]-i[1])-(t[1]-e[1])*(e[0]-i[0]),c=(s[1]-i[1])*(t[0]-e[0])-(s[0]-i[0])*(t[1]-e[1]);if(c!==0){var _=r/c,l=o/c;if(_>=0&&_<=1&&l>=0&&l<=1)return!![]}return![]},coordinatesContainPoint=function(e,t){for(var i=![],s=-1,r=e.length,o=r-1;++s<r;o=s)(e[s][1]<=t[1]&&t[1]<e[o][1]||e[o][1]<=t[1]&&t[1]<e[s][1])&&t[0]<(e[o][0]-e[s][0])*(t[1]-e[s][1])/(e[o][1]-e[s][1])+e[s][0]&&(i=!i);return i},pointsEqual=function(e,t){const i={_0x2fc917:400},s=_0x3a2b68;for(var r=0;r<e[s(i._0x2fc917)];r++)if(e[r]!==t[r])return![];return!![]},arrayIntersectsArray=function(e,t){for(var i=0;i<e.length-1;i++)for(var s=0;s<t.length-1;s++)if(edgeIntersectsEdge(e[i],e[i+1],t[s],t[s+1]))return!![];return![]},closeRing=function(e){return!pointsEqual(e[0],e[e.length-1])&&e.push(e[0]),e},ringIsClockwise=function(e){var t=0,i=0,s=e.length,r=e[i],o;for(i;i<s-1;i++)o=e[i+1],t+=(o[0]-r[0])*(o[1]+r[1]),r=o;return t>=0},shallowClone=function(e){var t={};for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},coordinatesContainCoordinates=function(e,t){var i=arrayIntersectsArray(e,t),s=coordinatesContainPoint(e,t[0]);return!i&&s?!![]:![]},convertRingsToGeoJSON=function(e){const t={_0x424e1d:2082,_0x17d86c:1178,_0x392124:1754,_0x3d1d95:400,_0xbe1fb7:400},i=_0x3a2b68;for(var s=[],r=[],o,c,_,l=0;l<e.length;l++){var d=closeRing(e[l][i(t._0x424e1d)](0));if(!(d[i(400)]<4))if(ringIsClockwise(d)){var f=[d.slice()[i(t._0x17d86c)]()];s.push(f)}else r[i(t._0x392124)](d[i(t._0x424e1d)]().reverse())}for(var g=[];r[i(t._0x3d1d95)];){_=r[i(2980)]();var b=![];for(o=s.length-1;o>=0;o--)if(c=s[o][0],coordinatesContainCoordinates(c,_)){s[o].push(_),b=!![];break}!b&&g.push(_)}for(;g[i(t._0xbe1fb7)];){_=g[i(2980)]();var C=![];for(o=s.length-1;o>=0;o--)if(c=s[o][0],arrayIntersectsArray(c,_)){s[o].push(_),C=!![];break}!C&&s.push([_.reverse()])}return s.length===1?{type:"Polygon",coordinates:s[0]}:{type:i(3707),coordinates:s}},getId=function(e,t){const i={_0x4b6679:3631,_0x2a5235:2226},s=_0x3a2b68;for(var r=t?[t,s(3827),"FID"]:[s(3827),s(i._0x4b6679)],o=0;o<r.length;o++){var c=r[o];if(c in e&&(typeof e[c]===s(2148)||typeof e[c]===s(i._0x2a5235)))return e[c]}throw Error("No valid id attribute found")},arcgisToGeoJSON$1=function n(e,t){const i={_0x3c128f:2332,_0x13d9c4:1774,_0x547caf:2226,_0x21f144:4353,_0x386f26:1571,_0x44f195:1571,_0x976013:2388},s=_0x3a2b68;var r={};if(e.features){r.type="FeatureCollection",r.features=[];for(var o=0;o<e[s(i._0x3c128f)].length;o++)r[s(i._0x3c128f)].push(n(e.features[o],t))}if(typeof e.x=="number"&&typeof e.y=="number"&&(r.type="Point",r.coordinates=[e.x,e.y],typeof e.z=="number"&&r.coordinates.push(e.z)),e[s(4274)]&&(r.type="MultiPoint",r.coordinates=e.points.slice(0)),e[s(i._0x13d9c4)]&&(e[s(i._0x13d9c4)].length===1?(r.type="LineString",r.coordinates=e.paths[0].slice(0)):(r.type="MultiLineString",r[s(918)]=e.paths.slice(0))),e.rings&&(r=convertRingsToGeoJSON(e[s(656)].slice(0))),typeof e.xmin===s(2226)&&typeof e[s(941)]=="number"&&typeof e.xmax=="number"&&typeof e.ymax===s(i._0x547caf)&&(r.type=s(2909),r.coordinates=[[[e[s(i._0x21f144)],e[s(2269)]],[e[s(528)],e.ymax],[e.xmin,e.ymin],[e.xmax,e.ymin],[e.xmax,e[s(2269)]]]]),(e.geometry||e.attributes)&&(r.type="Feature",r.geometry=e.geometry?n(e.geometry):null,r.properties=e[s(i._0x386f26)]?shallowClone(e[s(i._0x386f26)]):null,e.attributes))try{r.id=getId(e[s(i._0x44f195)],t)}catch{}return JSON.stringify(r.geometry)===JSON.stringify({})&&(r.geometry=null),e[s(683)]&&e.spatialReference.wkid&&e.spatialReference[s(i._0x976013)]!==4326&&console.warn("Object converted in non-standard crs - "+JSON.stringify(e[s(683)])),r},orientRings=function(e){const t={_0x325caa:400,_0x384d13:1178},i=_0x3a2b68;var s=[],r=e.slice(0),o=closeRing(r.shift().slice(0));if(o.length>=4){!ringIsClockwise(o)&&o.reverse(),s.push(o);for(var c=0;c<r[i(t._0x325caa)];c++){var _=closeRing(r[c].slice(0));_.length>=4&&(ringIsClockwise(_)&&_[i(t._0x384d13)](),s.push(_))}}return s},flattenMultiPolygonRings=function(e){for(var t=[],i=0;i<e.length;i++)for(var s=orientRings(e[i]),r=s.length-1;r>=0;r--){var o=s[r].slice(0);t.push(o)}return t},geojsonToArcGIS$1=function n(e,t){const i={_0x4e7803:3827,_0x48cd75:1603,_0xbd88f4:3228,_0x1ad4b0:2082,_0x44c4d9:918,_0x2f46d5:370,_0x4a54ec:1571,_0x3517a2:3211,_0x461761:2781,_0x4d7260:1754,_0x37ea11:1718},s=_0x3a2b68;t=t||s(i._0x4e7803);var r={wkid:4326},o={},c;switch(e[s(i._0x48cd75)]){case"Point":o.x=e.coordinates[0],o.y=e.coordinates[1],e.coordinates[2]!=null&&(o.z=e[s(918)][2]),o.spatialReference=r;break;case"MultiPoint":o.points=e.coordinates.slice(0),e.coordinates[0][2]!=null&&(o[s(3228)]=!![]),o.spatialReference=r;break;case"LineString":o.paths=[e.coordinates.slice(0)],e.coordinates[0][2]!=null&&(o[s(i._0xbd88f4)]=!![]),o[s(683)]=r;break;case"MultiLineString":o.paths=e.coordinates[s(i._0x1ad4b0)](0),e.coordinates[0][0][2]!=null&&(o.hasZ=!![]),o.spatialReference=r;break;case"Polygon":o[s(656)]=orientRings(e[s(918)].slice(0)),e[s(i._0x44c4d9)][0][0][2]!=null&&(o.hasZ=!![]),o.spatialReference=r;break;case"MultiPolygon":o[s(656)]=flattenMultiPolygonRings(e.coordinates.slice(0)),e.coordinates[0][0][0][2]!=null&&(o.hasZ=!![]),o.spatialReference=r;break;case s(i._0x2f46d5):e.geometry&&(o.geometry=n(e.geometry,t)),o[s(i._0x4a54ec)]=e[s(i._0x3517a2)]?shallowClone(e.properties):{},e.id&&(o[s(1571)][t]=e.id);break;case s(i._0x461761):for(o=[],c=0;c<e.features[s(400)];c++)o[s(i._0x4d7260)](n(e[s(2332)][c],t));break;case"GeometryCollection":for(o=[],c=0;c<e.geometries.length;c++)o.push(n(e[s(i._0x37ea11)][c],t));break}return o};function globals(n){const e={_0x1898fa:929,_0x26ae69:2277,_0x59e589:3997},t=_0x3a2b68;n(t(e._0x1898fa),"+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),n("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),n(t(e._0x26ae69),t(e._0x59e589)),n.WGS84=n[t(e._0x1898fa)],n[t(667)]=n["EPSG:3857"],n[t(4352)]=n["EPSG:3857"],n["EPSG:900913"]=n["EPSG:3857"],n["EPSG:102113"]=n["EPSG:3857"]}var PJD_3PARAM=1,PJD_7PARAM=2,PJD_GRIDSHIFT=3,PJD_WGS84=4,PJD_NODATUM=5,SRS_WGS84_SEMIMAJOR=6378137,SRS_WGS84_SEMIMINOR=6356752314e-3,SRS_WGS84_ESQUARED=.0066943799901413165,SEC_TO_RAD=484813681109536e-20,HALF_PI=Math.PI/2,SIXTH=.16666666666666666,RA4=.04722222222222222,RA6=.022156084656084655,EPSLN=1e-10,D2R$1=.017453292519943295,R2D=57.29577951308232,FORTPI=Math.PI/4,TWO_PI=Math.PI*2,SPI=3.14159265359,exports$3={};exports$3.greenwich=0,exports$3.lisbon=-9.131906111111,exports$3[_0x3a2b68(556)]=2.337229166667,exports$3.bogota=-74.080916666667,exports$3.madrid=-3.687938888889,exports$3.rome=12.452333333333,exports$3[_0x3a2b68(1182)]=7.439583333333,exports$3[_0x3a2b68(1184)]=106.807719444444,exports$3.ferro=-17.666666666667,exports$3.brussels=4.367975,exports$3.stockholm=18.058277777778,exports$3.athens=23.7163375,exports$3.oslo=10.722916666667;var units={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},ignoredChar=/[\s_\-\/\(\)]/g;function match(n,e){const t={_0x2a5227:4262},i=_0x3a2b68;if(n[e])return n[e];for(var s=Object[i(2953)](n),r=e.toLowerCase().replace(ignoredChar,""),o=-1,c,_;++o<s.length;)if(c=s[o],_=c.toLowerCase()[i(t._0x2a5227)](ignoredChar,""),_===r)return n[c]}function projStr(n){const e={_0x341bd1:821,_0x4ea32a:2063,_0x56dff0:1523},t={_0x36ff0d:2063,_0x5dae78:3662,_0x29c583:2745},i={_0x315abc:4149},s={_0x17739b:3617},r={_0x20a346:3991},o=_0x3a2b68;var c={},_=n[o(e._0x341bd1)]("+").map(function(b){return b.trim()})[o(3298)](function(b){return b}).reduce(function(b,C){const P=o;var S=C[P(821)]("=");return S[P(1754)](!![]),b[S[0].toLowerCase()]=S[1],b},{}),l,d,f,g={proj:"projName",datum:o(e._0x4ea32a),rf:function(b){c.rf=parseFloat(b)},lat_0:function(b){c.lat0=b*D2R$1},lat_1:function(b){c.lat1=b*D2R$1},lat_2:function(b){c.lat2=b*D2R$1},lat_ts:function(b){c.lat_ts=b*D2R$1},lon_0:function(b){c.long0=b*D2R$1},lon_1:function(b){const C=o;c[C(r._0x20a346)]=b*D2R$1},lon_2:function(b){c.long2=b*D2R$1},alpha:function(b){const C=o;c[C(838)]=parseFloat(b)*D2R$1},gamma:function(b){const C=o;c[C(s._0x17739b)]=parseFloat(b)},lonc:function(b){c.longc=b*D2R$1},x_0:function(b){c.x0=parseFloat(b)},y_0:function(b){c.y0=parseFloat(b)},k_0:function(b){c.k0=parseFloat(b)},k:function(b){c.k0=parseFloat(b)},a:function(b){c.a=parseFloat(b)},b:function(b){c.b=parseFloat(b)},r_a:function(){const b=o;c[b(3241)]=!![]},zone:function(b){const C=o;c[C(1608)]=parseInt(b,10)},south:function(){c.utmSouth=!![]},towgs84:function(b){c.datum_params=b.split(",").map(function(C){return parseFloat(C)})},to_meter:function(b){c.to_meter=parseFloat(b)},units:function(b){const C=o;c[C(3204)]=b;var P=match(units,b);P&&(c[C(i._0x315abc)]=P.to_meter)},from_greenwich:function(b){c.from_greenwich=b*D2R$1},pm:function(b){var C=match(exports$3,b);c.from_greenwich=(C||parseFloat(b))*D2R$1},nadgrids:function(b){const C=o;b==="@null"?c[C(t._0x36ff0d)]=C(t._0x5dae78):c[C(t._0x29c583)]=b},axis:function(b){var C="ewnsud";b.length===3&&C.indexOf(b.substr(0,1))!==-1&&C.indexOf(b.substr(1,1))!==-1&&C.indexOf(b.substr(2,1))!==-1&&(c.axis=b)},approx:function(){c.approx=!![]}};for(l in _)d=_[l],l in g?(f=g[l],typeof f=="function"?f(d):c[f]=d):c[l]=d;return typeof c.datumCode=="string"&&c[o(2063)]!==o(1859)&&(c.datumCode=c[o(2063)][o(e._0x56dff0)]()),c}var NEUTRAL=1,KEYWORD=2,NUMBER=3,QUOTED=4,AFTERQUOTE=5,ENDED=-1,whitespace=/\s/,latin=/[A-Za-z]/,keyword=/[A-Za-z84_]/,endThings=/[,\]]/,digets=/[\d\.E\-\+]/;function Parser(n){const e={_0x1a0442:2205},t=_0x3a2b68;if(typeof n!="string")throw new Error("not a string");this.text=n.trim(),this[t(1800)]=0,this.place=0,this[t(e._0x1a0442)]=null,this.stack=[],this[t(3050)]=null,this.state=NEUTRAL}Parser[_0x3a2b68(4390)].readCharicter=function(){const n={_0x43b5c4:3765,_0x3c595d:400},e=_0x3a2b68;var t=this.text[this[e(n._0x43b5c4)]++];if(this.state!==QUOTED)for(;whitespace.test(t);){if(this.place>=this.text[e(n._0x3c595d)])return;t=this.text[this.place++]}switch(this.state){case NEUTRAL:return this.neutral(t);case KEYWORD:return this.keyword(t);case QUOTED:return this.quoted(t);case AFTERQUOTE:return this.afterquote(t);case NUMBER:return this.number(t);case ENDED:return}},Parser.prototype[_0x3a2b68(1851)]=function(n){const e=_0x3a2b68;if(n==='"'){this[e(1341)]+='"',this[e(498)]=QUOTED;return}if(endThings.test(n)){this[e(1341)]=this.word.trim(),this.afterItem(n);return}throw new Error(`havn't handled "`+n+e(2281)+this.place)},Parser.prototype[_0x3a2b68(2327)]=function(n){const e={_0x57dd6c:3050,_0x15417d:498,_0x579c7f:4030},t=_0x3a2b68;if(n===","){this.word!==null&&this[t(e._0x57dd6c)].push(this.word),this.word=null,this[t(e._0x15417d)]=NEUTRAL;return}if(n==="]"){this.level--,this.word!==null&&(this[t(3050)].push(this[t(1341)]),this.word=null),this.state=NEUTRAL,this.currentObject=this[t(e._0x579c7f)].pop(),!this.currentObject&&(this.state=ENDED);return}},Parser[_0x3a2b68(4390)].number=function(n){const e={_0x50784c:3765},t=_0x3a2b68;if(digets[t(2361)](n)){this.word+=n;return}if(endThings.test(n)){this.word=parseFloat(this.word),this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in number yet, index '+this[t(e._0x50784c)])},Parser.prototype.quoted=function(n){if(n==='"'){this.state=AFTERQUOTE;return}this.word+=n},Parser[_0x3a2b68(4390)].keyword=function(n){const e={_0x4a396a:2205,_0x5d15b6:1754,_0x10a5c2:2327,_0xbbf656:4226},t=_0x3a2b68;if(keyword.test(n)){this.word+=n;return}if(n==="["){var i=[];i.push(this.word),this.level++,this[t(e._0x4a396a)]===null?this.root=i:this[t(3050)].push(i),this.stack[t(e._0x5d15b6)](this.currentObject),this.currentObject=i,this.state=NEUTRAL;return}if(endThings.test(n)){this[t(e._0x10a5c2)](n);return}throw new Error(t(e._0xbbf656)+n+'" in keyword yet, index '+this.place)},Parser.prototype[_0x3a2b68(2829)]=function(n){const e={_0x57a097:2361,_0x443fad:4226,_0x41de94:2669,_0x22b58d:3765},t=_0x3a2b68;if(latin.test(n)){this.word=n,this.state=KEYWORD;return}if(n==='"'){this.word="",this.state=QUOTED;return}if(digets.test(n)){this.word=n,this[t(498)]=NUMBER;return}if(endThings[t(e._0x57a097)](n)){this.afterItem(n);return}throw new Error(t(e._0x443fad)+n+t(e._0x41de94)+this[t(e._0x22b58d)])},Parser.prototype.output=function(){const n={_0x290849:3640,_0xc1c327:498},e=_0x3a2b68;for(;this.place<this[e(n._0x290849)].length;)this.readCharicter();if(this.state===ENDED)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this[e(n._0xc1c327)])};function parseString(n){const e=_0x3a2b68;var t=new Parser(n);return t[e(1510)]()}function mapit(n,e,t){const i=_0x3a2b68;Array[i(391)](e)&&(t.unshift(e),e=null);var s=e?{}:n,r=t[i(2773)](function(o,c){return sExpr(c,o),o},s);e&&(n[e]=r)}function sExpr(n,e){const t={_0x31f2b0:391,_0x4c9972:3538,_0x2c75bd:400,_0x48b076:3209,_0x4b81fc:2340,_0x279db5:4096,_0x3db1e1:2010,_0x161b24:3726},i=_0x3a2b68;if(!Array[i(t._0x31f2b0)](n)){e[n]=!![];return}var s=n.shift();if(s==="PARAMETER"&&(s=n.shift()),n.length===1){if(Array.isArray(n[0])){e[s]={},sExpr(n[0],e[s]);return}e[s]=n[0];return}if(!n.length){e[s]=!![];return}if(s==="TOWGS84"){e[s]=n;return}if(s==="AXIS"){!(s in e)&&(e[s]=[]),e[s].push(n);return}!Array.isArray(s)&&(e[s]={});var r;switch(s){case i(1599):case"PRIMEM":case"VERT_DATUM":e[s]={name:n[0].toLowerCase(),convert:n[1]},n.length===3&&sExpr(n[2],e[s]);return;case i(t._0x4c9972):case"ELLIPSOID":e[s]={name:n[0],a:n[1],rf:n[2]},n[i(t._0x2c75bd)]===4&&sExpr(n[3],e[s]);return;case i(3347):case"PROJCRS":case"GEOGCS":case i(t._0x48b076):case"PROJCS":case i(t._0x4b81fc):case i(t._0x279db5):case"GEODETICCRS":case"GEODETICDATUM":case i(807):case"ENGINEERINGDATUM":case i(2457):case i(2043):case i(t._0x3db1e1):case i(368):case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case i(3762):case i(t._0x161b24):n[0]=["name",n[0]],mapit(e,s,n);return;default:for(r=-1;++r<n.length;)if(!Array.isArray(n[r]))return sExpr(n,e[s]);return mapit(e,s,n)}}var D2R=.017453292519943295;function rename(n,e){const t=_0x3a2b68;var i=e[0],s=e[1];!(i in n)&&s in n&&(n[i]=n[s],e[t(400)]===3&&(n[i]=e[2](n[i])))}function d2r(n){return n*D2R}function cleanWKT(n){const e={_0x3b513c:4058,_0x215334:1103,_0x1903b2:2799,_0x479d95:4139,_0x2b5ee2:3204,_0x1bf2ca:1523,_0x2d4176:2707,_0x17a1c1:1603,_0x53faf5:1599,_0x5ceecd:4149,_0x27ee8a:2063,_0x15bb56:4262,_0x59cd59:2082,_0x595b4b:1276,_0x2486fa:2063,_0x43e025:2051,_0x546faf:1981,_0x1f0821:3650,_0x321f98:1823,_0x2a3586:3521,_0x1a22d6:1723,_0x27b33e:2297,_0x580594:3554,_0x5843c1:4221,_0x1a7f7f:3905,_0x31d750:3842,_0x570e0e:1627,_0x3f9957:3629,_0x3472de:1337,_0x3562bf:429,_0x246848:911,_0x2831b8:1566,_0x106d9a:1105,_0x478227:2302,_0x3269ea:1105,_0x55f491:1161,_0x43c708:3629},t=_0x3a2b68;if(n.type===t(e._0x3b513c)?n.projName=t(e._0x215334):n.type==="LOCAL_CS"?(n.projName="identity",n[t(e._0x1903b2)]=!![]):typeof n.PROJECTION=="object"?n.projName=Object.keys(n.PROJECTION)[0]:n.projName=n.PROJECTION,n.AXIS){for(var i="",s=0,r=n.AXIS.length;s<r;++s){var o=[n[t(4139)][s][0].toLowerCase(),n[t(e._0x479d95)][s][1].toLowerCase()];o[0].indexOf("north")!==-1||(o[0]==="y"||o[0]==="lat")&&o[1]===t(802)?i+="n":o[0].indexOf("south")!==-1||(o[0]==="y"||o[0]===t(671))&&o[1]==="south"?i+="s":o[0][t(2051)]("east")!==-1||(o[0]==="x"||o[0]==="lon")&&o[1]==="east"?i+="e":(o[0].indexOf("west")!==-1||(o[0]==="x"||o[0]===t(1106))&&o[1]==="west")&&(i+="w")}i.length===2&&(i+="u"),i.length===3&&(n.axis=i)}n.UNIT&&(n[t(e._0x2b5ee2)]=n[t(1599)].name[t(e._0x1bf2ca)](),n.units==="metre"&&(n.units="meter"),n.UNIT[t(e._0x2d4176)]&&(n[t(e._0x17a1c1)]===t(e._0x3b513c)?n.DATUM&&n.DATUM.SPHEROID&&(n.to_meter=n[t(e._0x53faf5)].convert*n.DATUM.SPHEROID.a):n[t(e._0x5ceecd)]=n[t(1599)].convert));var c=n.GEOGCS;n.type==="GEOGCS"&&(c=n),c&&(c[t(3726)]?n.datumCode=c[t(3726)].name[t(e._0x1bf2ca)]():n.datumCode=c.name.toLowerCase(),n[t(e._0x27ee8a)].slice(0,2)==="d_"&&(n.datumCode=n.datumCode.slice(2)),(n[t(2063)]===t(2521)||n[t(2063)]==="new_zealand_1949")&&(n.datumCode="nzgd49"),(n.datumCode==="wgs_1984"||n.datumCode==="world_geodetic_system_1984")&&(n.PROJECTION==="Mercator_Auxiliary_Sphere"&&(n.sphere=!![]),n[t(e._0x27ee8a)]="wgs84"),n[t(2063)][t(2082)](-6)==="_ferro"&&(n.datumCode=n[t(2063)].slice(0,-6)),n.datumCode.slice(-8)==="_jakarta"&&(n.datumCode=n[t(e._0x27ee8a)].slice(0,-8)),~n.datumCode.indexOf("belge")&&(n[t(2063)]="rnb72"),c.DATUM&&c[t(3726)].SPHEROID&&(n.ellps=c.DATUM.SPHEROID[t(3307)][t(e._0x15bb56)]("_19","").replace(/[Cc]larke\_18/,"clrk"),n.ellps.toLowerCase()[t(e._0x59cd59)](0,13)===t(e._0x595b4b)&&(n.ellps="intl"),n.a=c.DATUM[t(3538)].a,n.rf=parseFloat(c.DATUM.SPHEROID.rf,10)),c.DATUM&&c.DATUM[t(4312)]&&(n[t(2968)]=c.DATUM.TOWGS84),~n.datumCode.indexOf("osgb_1936")&&(n[t(e._0x2486fa)]="osgb36"),~n.datumCode.indexOf("osni_1952")&&(n.datumCode="osni52"),(~n.datumCode[t(e._0x43e025)]("tm65")||~n.datumCode.indexOf(t(3612)))&&(n[t(2063)]="ire65"),n.datumCode==="ch1903+"&&(n.datumCode=t(1487)),~n.datumCode.indexOf(t(4179))&&(n.datumCode="isr93")),n.b&&!isFinite(n.b)&&(n.b=n.a);function _(f){var g=n.to_meter||1;return f*g}var l=function(f){return rename(n,f)},d=[["standard_parallel_1","Standard_Parallel_1"],[t(e._0x546faf),"Latitude of 1st standard parallel"],[t(e._0x1f0821),t(e._0x321f98)],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],[t(1634),t(e._0x2a3586)],["false-easting","Easting at false origin"],[t(1723),"False_Northing"],[t(e._0x1a22d6),"False northing"],[t(1723),t(3777)],[t(e._0x27b33e),t(e._0x580594)],["central_meridian",t(2368)],["central_meridian","Longitude of false origin"],["latitude_of_origin",t(e._0x5843c1)],[t(911),"Central_Parallel"],["latitude_of_origin",t(e._0x1a7f7f)],["latitude_of_origin",t(2494)],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center",t(e._0x31d750)],[t(3656),t(e._0x570e0e)],[t(e._0x3f9957),"latitude_of_center",d2r],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc",t(e._0x3472de),d2r],["x0","false_easting",_],["y0","false_northing",_],[t(e._0x3562bf),"central_meridian",d2r],[t(3629),t(e._0x246848),d2r],["lat0","standard_parallel_1",d2r],["lat1",t(1981),d2r],["lat2",t(3650),d2r],["azimuth",t(e._0x2831b8)],["alpha",t(786),d2r],["srsCode","name"]];d.forEach(l),!n.long0&&n.longc&&(n[t(e._0x106d9a)]===t(1725)||n[t(1105)]==="Lambert_Azimuthal_Equal_Area")&&(n.long0=n.longc),!n.lat_ts&&n[t(e._0x478227)]&&(n[t(e._0x3269ea)]===t(e._0x55f491)||n.projName==="Polar Stereographic (variant B)")&&(n[t(e._0x43c708)]=d2r(n.lat1>0?90:-90),n.lat_ts=n.lat1)}function wkt(n){const e={_0x5e61c7:1253},t=_0x3a2b68;var i=parseString(n),s=i.shift(),r=i.shift();i.unshift(["name",r]),i[t(e._0x5e61c7)]([t(1603),s]);var o={};return sExpr(i,o),cleanWKT(o),o}function defs(n){const e={_0x5ba613:400,_0x1faa59:391,_0x2443e5:3244,_0x134218:3280,_0x5ef284:3280},t=_0x3a2b68;var i=this;if(arguments[t(e._0x5ba613)]===2){var s=arguments[1];typeof s=="string"?s.charAt(0)==="+"?defs[n]=projStr(arguments[1]):defs[n]=wkt(arguments[1]):defs[n]=s}else if(arguments.length===1){if(Array[t(e._0x1faa59)](n))return n[t(e._0x2443e5)](function(r){Array.isArray(r)?defs.apply(i,r):defs(r)});if(typeof n=="string"){if(n in defs)return defs[n]}else"EPSG"in n?defs["EPSG:"+n.EPSG]=n:t(e._0x134218)in n?defs["ESRI:"+n[t(e._0x5ef284)]]=n:"IAU2000"in n?defs["IAU2000:"+n.IAU2000]=n:console.log(n);return}}globals(defs);function testObj(n){return typeof n=="string"}function testDef(n){return n in defs}var codeWords=["PROJECTEDCRS",_0x3a2b68(4235),_0x3a2b68(4058),"GEOCCS",_0x3a2b68(2469),"LOCAL_CS",_0x3a2b68(4096),"GEODETICCRS",_0x3a2b68(631),"ENGCRS","ENGINEERINGCRS"];function testWKT(n){const e={_0x4de7c7:2051};return codeWords.some(function(t){return n[_0x20dc(e._0x4de7c7)](t)>-1})}var codes=["3857","900913","3785",_0x3a2b68(1198)];function checkMercator(n){const e={_0x404f4c:2051},t=_0x3a2b68;var i=match(n,"authority");if(i){var s=match(i,"epsg");return s&&codes[t(e._0x404f4c)](s)>-1}}function checkProjStr(n){var e=match(n,"extension");if(e)return match(e,"proj4")}function testProj(n){return n[0]==="+"}function parse(n){if(testObj(n)){if(testDef(n))return defs[n];if(testWKT(n)){var e=wkt(n);if(checkMercator(e))return defs["EPSG:3857"];var t=checkProjStr(e);return t?projStr(t):e}if(testProj(n))return projStr(n)}else return n}function extend(n,e){n=n||{};var t,i;if(!e)return n;for(i in e)t=e[i],t!==void 0&&(n[i]=t);return n}function msfnz(n,e,t){const i=_0x3a2b68;var s=n*e;return t/Math[i(2789)](1-s*s)}function sign(n){return n<0?-1:1}function adjust_lon(n){return Math[_0x3a2b68(2376)](n)<=SPI?n:n-sign(n)*TWO_PI}function tsfnz(n,e,t){var i=n*t,s=.5*n;return i=Math.pow((1-i)/(1+i),s),Math.tan(.5*(HALF_PI-e))/i}function phi2z(n,e){const t={_0x167020:2376},i=_0x3a2b68;for(var s=.5*n,r,o,c=HALF_PI-2*Math.atan(e),_=0;_<=15;_++)if(r=n*Math[i(3492)](c),o=HALF_PI-2*Math.atan(e*Math.pow((1-r)/(1+r),s))-c,c+=o,Math[i(t._0x167020)](o)<=1e-10)return c;return-9999}function init$v(){const n={_0x16ac7b:3671,_0x2a8640:3778},e=_0x3a2b68;var t=this.b/this.a;this.es=1-t*t,!("x0"in this)&&(this.x0=0),!("y0"in this)&&(this.y0=0),this.e=Math.sqrt(this.es),this[e(n._0x16ac7b)]?this[e(n._0x2a8640)]?this.k0=Math.cos(this.lat_ts):this.k0=msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):!this.k0&&(this.k?this.k0=this.k:this.k0=1)}function forward$u(n){const e=_0x3a2b68;var t=n.x,i=n.y;if(i*R2D>90&&i*R2D<-90&&t*R2D>180&&t*R2D<-180)return null;var s,r;if(Math[e(2376)](Math.abs(i)-HALF_PI)<=EPSLN)return null;if(this.sphere)s=this.x0+this.a*this.k0*adjust_lon(t-this[e(429)]),r=this.y0+this.a*this.k0*Math.log(Math.tan(FORTPI+.5*i));else{var o=Math[e(3492)](i),c=tsfnz(this.e,i,o);s=this.x0+this.a*this.k0*adjust_lon(t-this.long0),r=this.y0-this.a*this.k0*Math.log(c)}return n.x=s,n.y=r,n}function inverse$u(n){const e=_0x3a2b68;var t=n.x-this.x0,i=n.y-this.y0,s,r;if(this.sphere)r=HALF_PI-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var o=Math.exp(-i/(this.a*this.k0));if(r=phi2z(this.e,o),r===-9999)return null}return s=adjust_lon(this[e(429)]+t/(this.a*this.k0)),n.x=s,n.y=r,n}var names$w=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"],merc={init:init$v,forward:forward$u,inverse:inverse$u,names:names$w};function init$u(){}function identity(n){return n}var names$v=[_0x3a2b68(1103),_0x3a2b68(2996)],longlat={init:init$u,forward:identity,inverse:identity,names:names$v},projs=[merc,longlat],names$u={},projStore=[];function add$1(n,e){var t=projStore.length;return n.names?(projStore[t]=n,n.names.forEach(function(i){names$u[i.toLowerCase()]=t}),this):(console.log(e),!![])}function get$1(n){if(!n)return![];var e=n.toLowerCase();if(typeof names$u[e]<"u"&&projStore[names$u[e]])return projStore[names$u[e]]}function start(){projs[_0x3a2b68(3782)](add$1)}var projections={start,add:add$1,get:get$1},exports$2={};exports$2[_0x3a2b68(4003)]={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},exports$2.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},exports$2.GRS80={a:6378137,rf:298.257222101,ellipseName:_0x3a2b68(3962)},exports$2.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},exports$2[_0x3a2b68(1664)]={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},exports$2.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},exports$2.NWL9D={a:6378145,rf:298.25,ellipseName:_0x3a2b68(641)},exports$2.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},exports$2.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},exports$2.aust_SA={a:6378160,rf:298.25,ellipseName:_0x3a2b68(895)},exports$2.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},exports$2.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:_0x3a2b68(1913)},exports$2[_0x3a2b68(1488)]={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},exports$2.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:_0x3a2b68(4133)},exports$2.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},exports$2[_0x3a2b68(692)]={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:_0x3a2b68(3311)},exports$2.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:_0x3a2b68(634)},exports$2.CPM={a:63757387e-1,rf:334.29,ellipseName:_0x3a2b68(3434)},exports$2.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},exports$2.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},exports$2.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},exports$2.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},exports$2.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},exports$2.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},exports$2.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},exports$2.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},exports$2.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},exports$2.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},exports$2[_0x3a2b68(788)]={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},exports$2.hough={a:6378270,rf:297,ellipseName:_0x3a2b68(2666)},exports$2.intl={a:6378388,rf:297,ellipseName:_0x3a2b68(2700)},exports$2.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},exports$2[_0x3a2b68(1429)]={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},exports$2[_0x3a2b68(3446)]={a:6397300,rf:191,ellipseName:"Maupertius 1738"},exports$2.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:_0x3a2b68(1639)},exports$2.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},exports$2[_0x3a2b68(495)]={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},exports$2.SEasia={a:6378155,b:63567733205e-4,ellipseName:_0x3a2b68(1917)},exports$2.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},exports$2[_0x3a2b68(2712)]={a:6378165,rf:298.3,ellipseName:"WGS 60"},exports$2[_0x3a2b68(2653)]={a:6378145,rf:298.25,ellipseName:"WGS 66"},exports$2.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var WGS84=exports$2[_0x3a2b68(1859)]={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};exports$2.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function eccentricity(n,e,t,i){var s=n*n,r=e*e,o=(s-r)/s,c=0;i?(n*=1-o*(SIXTH+o*(RA4+o*RA6)),s=n*n,o=0):c=Math.sqrt(o);var _=(s-r)/r;return{es:o,e:c,ep2:_}}function sphere(n,e,t,i,s){if(!n){var r=match(exports$2,i);!r&&(r=WGS84),n=r.a,e=r.b,t=r.rf}return t&&!e&&(e=(1-1/t)*n),(t===0||Math.abs(n-e)<EPSLN)&&(s=!![],e=n),{a:n,b:e,rf:t,sphere:s}}var exports$1={};exports$1.wgs84={towgs84:_0x3a2b68(793),ellipse:_0x3a2b68(1859),datumName:"WGS84"},exports$1.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},exports$1[_0x3a2b68(4271)]={towgs84:_0x3a2b68(1846),ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},exports$1.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},exports$1.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},exports$1.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:_0x3a2b68(3268),datumName:"Potsdam Rauenberg 1950 DHDN"},exports$1.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:_0x3a2b68(1387)},exports$1[_0x3a2b68(2634)]={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:_0x3a2b68(2818)},exports$1.osni52={towgs84:_0x3a2b68(2313),ellipse:"airy",datumName:"Irish National"},exports$1.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:_0x3a2b68(1252),datumName:_0x3a2b68(3233)},exports$1[_0x3a2b68(1167)]={towgs84:_0x3a2b68(1434),ellipse:"intl",datumName:"Rassadiran"},exports$1.nzgd49={towgs84:_0x3a2b68(2482),ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},exports$1[_0x3a2b68(2538)]={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},exports$1.s_jtsk={towgs84:_0x3a2b68(1260),ellipse:"bessel",datumName:"S-JTSK (Ferro)"},exports$1.beduaram={towgs84:_0x3a2b68(2078),ellipse:_0x3a2b68(2936),datumName:_0x3a2b68(3003)},exports$1[_0x3a2b68(2120)]={towgs84:"-403,684,41",ellipse:_0x3a2b68(3268),datumName:"Gunung Segara Jakarta"},exports$1.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function datum(n,e,t,i,s,r,o){const c={_0x32dc41:2968,_0x164c02:2968,_0x3983b4:2968,_0x4be369:2968,_0x317cfd:1013,_0x2a4bf1:2053},_=_0x3a2b68;var l={};return n===void 0||n==="none"?l.datum_type=PJD_NODATUM:l.datum_type=PJD_WGS84,e&&(l.datum_params=e.map(parseFloat),(l[_(c._0x32dc41)][0]!==0||l[_(2968)][1]!==0||l[_(c._0x164c02)][2]!==0)&&(l.datum_type=PJD_3PARAM),l.datum_params.length>3&&(l.datum_params[3]!==0||l.datum_params[4]!==0||l.datum_params[5]!==0||l[_(c._0x3983b4)][6]!==0)&&(l.datum_type=PJD_7PARAM,l.datum_params[3]*=SEC_TO_RAD,l[_(c._0x4be369)][4]*=SEC_TO_RAD,l.datum_params[5]*=SEC_TO_RAD,l[_(2968)][6]=l.datum_params[6]/1e6+1)),o&&(l.datum_type=PJD_GRIDSHIFT,l[_(c._0x317cfd)]=o),l.a=t,l.b=i,l.es=s,l[_(c._0x2a4bf1)]=r,l}var loadedNadgrids={};function nadgrid(n,e){var t=new DataView(e),i=detectLittleEndian(t),s=readHeader(t,i);s.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var r=readSubgrids(t,s,i),o={header:s,subgrids:r};return loadedNadgrids[n]=o,o}function getNadgrids(n){if(n===void 0)return null;var e=n.split(",");return e.map(parseNadgridString)}function parseNadgridString(n){if(n.length===0)return null;var e=n[0]==="@";return e&&(n=n.slice(1)),n==="null"?{name:"null",mandatory:!e,grid:null,isNull:!![]}:{name:n,mandatory:!e,grid:loadedNadgrids[n]||null,isNull:![]}}function secondsToRadians(n){return n/3600*Math.PI/180}function detectLittleEndian(n){const e={_0x288faf:796},t=_0x3a2b68;var i=n[t(2516)](8,![]);return i===11?![]:(i=n[t(2516)](8,!![]),i!==11&&console[t(e._0x288faf)]("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!![])}function readHeader(n,e){const t={_0x451128:1254},i=_0x3a2b68;return{nFields:n[i(2516)](8,e),nSubgridFields:n[i(2516)](24,e),nSubgrids:n[i(2516)](40,e),shiftType:decodeString(n,56,56+8)[i(1869)](),fromSemiMajorAxis:n[i(1254)](120,e),fromSemiMinorAxis:n.getFloat64(136,e),toSemiMajorAxis:n[i(t._0x451128)](152,e),toSemiMinorAxis:n.getFloat64(168,e)}}function decodeString(n,e,t){return String.fromCharCode.apply(null,new Uint8Array(n.buffer.slice(e,t)))}function readSubgrids(n,e,t){const i={_0x1c3624:2886},s=_0x3a2b68;for(var r=176,o=[],c=0;c<e.nSubgrids;c++){var _=readGridHeader(n,r,t),l=readGridNodes(n,r,_,t),d=Math[s(i._0x1c3624)](1+(_.upperLongitude-_.lowerLongitude)/_.longitudeInterval),f=Math.round(1+(_.upperLatitude-_.lowerLatitude)/_.latitudeInterval);o.push({ll:[secondsToRadians(_.lowerLongitude),secondsToRadians(_.lowerLatitude)],del:[secondsToRadians(_.longitudeInterval),secondsToRadians(_.latitudeInterval)],lim:[d,f],count:_.gridNodeCount,cvs:mapNodes(l)})}return o}function mapNodes(n){const e={_0x23b771:2418};return n.map(function(t){const i=_0x20dc;return[secondsToRadians(t[i(4158)]),secondsToRadians(t[i(e._0x23b771)])]})}function readGridHeader(n,e,t){const i={_0x2e2c66:1254},s=_0x3a2b68;return{name:decodeString(n,e+8,e+16).trim(),parent:decodeString(n,e+24,e+24+8).trim(),lowerLatitude:n.getFloat64(e+72,t),upperLatitude:n[s(i._0x2e2c66)](e+88,t),lowerLongitude:n.getFloat64(e+104,t),upperLongitude:n.getFloat64(e+120,t),latitudeInterval:n.getFloat64(e+136,t),longitudeInterval:n[s(i._0x2e2c66)](e+152,t),gridNodeCount:n.getInt32(e+168,t)}}function readGridNodes(n,e,t,i){const s={_0x572867:3903},r=_0x3a2b68;for(var o=e+176,c=16,_=[],l=0;l<t.gridNodeCount;l++){var d={latitudeShift:n[r(3903)](o+l*c,i),longitudeShift:n.getFloat32(o+l*c+4,i),latitudeAccuracy:n[r(s._0x572867)](o+l*c+8,i),longitudeAccuracy:n.getFloat32(o+l*c+12,i)};_.push(d)}return _}function Projection(n,e){const t={_0x298216:1105,_0x286fca:2968,_0x35f64f:1362,_0x38a4bc:1473,_0x25ed0e:469,_0x5b1947:2302,_0x5cbef4:2968,_0x24b19f:2890},i=_0x3a2b68;if(!(this instanceof Projection))return new Projection(n);e=e||function(f){if(f)throw f};var s=parse(n);if(typeof s!="object"){e(n);return}var r=Projection.projections[i(615)](s[i(t._0x298216)]);if(!r){e(n);return}if(s[i(2063)]&&s.datumCode!=="none"){var o=match(exports$1,s[i(2063)]);o&&(s[i(t._0x286fca)]=s.datum_params||(o.towgs84?o.towgs84.split(","):null),s[i(469)]=o[i(t._0x35f64f)],s.datumName=o[i(920)]?o.datumName:s.datumCode)}s.k0=s.k0||1,s.axis=s.axis||i(t._0x38a4bc),s.ellps=s[i(t._0x25ed0e)]||i(1481),s[i(t._0x5b1947)]=s[i(2302)]||s.lat0;var c=sphere(s.a,s.b,s.rf,s.ellps,s.sphere),_=eccentricity(c.a,c.b,c.rf,s.R_A),l=getNadgrids(s.nadgrids),d=s[i(2378)]||datum(s.datumCode,s[i(t._0x5cbef4)],c.a,c.b,_.es,_.ep2,l);extend(this,s),extend(this,r),this.a=c.a,this.b=c.b,this.rf=c.rf,this.sphere=c.sphere,this.es=_.es,this.e=_.e,this.ep2=_.ep2,this.datum=d,this[i(t._0x24b19f)](),e(null,this)}Projection.projections=projections,Projection.projections.start();function compareDatums(n,e){const t={_0x1acc59:3821,_0x20be28:2376,_0x2ad3af:3821,_0x2f1951:2968,_0x479f1e:2968,_0x587f3b:2968},i=_0x3a2b68;return n.datum_type!==e[i(t._0x1acc59)]?![]:n.a!==e.a||Math[i(t._0x20be28)](n.es-e.es)>5e-11?![]:n[i(t._0x2ad3af)]===PJD_3PARAM?n.datum_params[0]===e.datum_params[0]&&n[i(t._0x2f1951)][1]===e.datum_params[1]&&n[i(t._0x479f1e)][2]===e.datum_params[2]:n.datum_type===PJD_7PARAM?n.datum_params[0]===e.datum_params[0]&&n[i(t._0x587f3b)][1]===e.datum_params[1]&&n[i(t._0x479f1e)][2]===e.datum_params[2]&&n.datum_params[3]===e.datum_params[3]&&n.datum_params[4]===e.datum_params[4]&&n[i(2968)][5]===e.datum_params[5]&&n.datum_params[6]===e.datum_params[6]:!![]}function geodeticToGeocentric(n,e,t){const i={_0x1b07a5:2519},s=_0x3a2b68;var r=n.x,o=n.y,c=n.z?n.z:0,_,l,d,f;if(o<-HALF_PI&&o>-1.001*HALF_PI)o=-HALF_PI;else if(o>HALF_PI&&o<1.001*HALF_PI)o=HALF_PI;else{if(o<-HALF_PI)return{x:-1/0,y:-1/0,z:n.z};if(o>HALF_PI)return{x:1/0,y:1/0,z:n.z}}return r>Math.PI&&(r-=2*Math.PI),l=Math.sin(o),f=Math.cos(o),d=l*l,_=t/Math.sqrt(1-e*d),{x:(_+c)*f*Math[s(i._0x1b07a5)](r),y:(_+c)*f*Math.sin(r),z:(_*(1-e)+c)*l}}function geocentricToGeodetic(n,e,t,i){const s=_0x3a2b68;var r=1e-12,o=r*r,c=30,_,l,d,f,g,b,C,P,S,L,E,M,D,R=n.x,k=n.y,N=n.z?n.z:0,$,B,F;if(_=Math.sqrt(R*R+k*k),l=Math.sqrt(R*R+k*k+N*N),_/t<r){if($=0,l/t<r)return B=HALF_PI,F=-i,{x:n.x,y:n.y,z:n.z}}else $=Math.atan2(k,R);d=N/l,f=_/l,g=1/Math.sqrt(1-e*(2-e)*f*f),P=f*(1-e)*g,S=d*g,D=0;do D++,C=t/Math.sqrt(1-e*S*S),F=_*P+N*S-C*(1-e*S*S),b=e*C/(C+F),g=1/Math.sqrt(1-b*(2-b)*f*f),L=f*(1-b)*g,E=d*g,M=E*P-L*S,P=L,S=E;while(M*M>o&&D<c);return B=Math.atan(E/Math[s(2376)](L)),{x:$,y:B,z:F}}function geocentricToWgs84(n,e,t){if(e===PJD_3PARAM)return{x:n.x+t[0],y:n.y+t[1],z:n.z+t[2]};if(e===PJD_7PARAM){var i=t[0],s=t[1],r=t[2],o=t[3],c=t[4],_=t[5],l=t[6];return{x:l*(n.x-_*n.y+c*n.z)+i,y:l*(_*n.x+n.y-o*n.z)+s,z:l*(-c*n.x+o*n.y+n.z)+r}}}function geocentricFromWgs84(n,e,t){if(e===PJD_3PARAM)return{x:n.x-t[0],y:n.y-t[1],z:n.z-t[2]};if(e===PJD_7PARAM){var i=t[0],s=t[1],r=t[2],o=t[3],c=t[4],_=t[5],l=t[6],d=(n.x-i)/l,f=(n.y-s)/l,g=(n.z-r)/l;return{x:d+_*f-c*g,y:-_*d+f+o*g,z:c*d-o*f+g}}}function checkParams(n){return n===PJD_3PARAM||n===PJD_7PARAM}function datum_transform(n,e,t){const i={_0x55a1e0:3821,_0x36263e:3821},s=_0x3a2b68;if(compareDatums(n,e)||n.datum_type===PJD_NODATUM||e.datum_type===PJD_NODATUM)return t;var r=n.a,o=n.es;if(n.datum_type===PJD_GRIDSHIFT){var c=applyGridShift(n,![],t);if(c!==0)return;r=SRS_WGS84_SEMIMAJOR,o=SRS_WGS84_ESQUARED}var _=e.a,l=e.b,d=e.es;if(e[s(3821)]===PJD_GRIDSHIFT&&(_=SRS_WGS84_SEMIMAJOR,l=SRS_WGS84_SEMIMINOR,d=SRS_WGS84_ESQUARED),o===d&&r===_&&!checkParams(n[s(i._0x55a1e0)])&&!checkParams(e[s(i._0x36263e)]))return t;if(t=geodeticToGeocentric(t,o,r),checkParams(n.datum_type)&&(t=geocentricToWgs84(t,n.datum_type,n.datum_params)),checkParams(e.datum_type)&&(t=geocentricFromWgs84(t,e[s(3821)],e.datum_params)),t=geocentricToGeodetic(t,d,_,l),e.datum_type===PJD_GRIDSHIFT){var f=applyGridShift(e,!![],t);if(f!==0)return}return t}function applyGridShift(n,e,t){const i={_0x21b715:1236,_0x357673:1798},s=_0x3a2b68;if(n[s(1013)]===null||n[s(1013)].length===0)return console[s(1798)]("Grid shift grids not found"),-1;for(var r={x:-t.x,y:t.y},o={x:Number.NaN,y:Number.NaN},c=[],_=0;_<n.grids.length;_++){var l=n[s(1013)][_];if(c.push(l.name),l.isNull){o=r;break}if(l[s(i._0x21b715)]===null){if(l.mandatory)return console.log("Unable to find mandatory grid '"+l.name+"'"),-1;continue}var d=l.grid.subgrids[0],f=(Math[s(2376)](d.del[1])+Math.abs(d.del[0]))/1e4,g=d.ll[0]-f,b=d.ll[1]-f,C=d.ll[0]+(d.lim[0]-1)*d.del[0]+f,P=d.ll[1]+(d.lim[1]-1)*d.del[1]+f;if(!(b>r.y||g>r.x||P<r.y||C<r.x)&&(o=applySubgridShift(r,e,d),!isNaN(o.x)))break}return isNaN(o.x)?(console[s(i._0x357673)]("Failed to find a grid shift table for location '"+-r.x*R2D+" "+r.y*R2D+" tried: '"+c+"'"),-1):(t.x=-o.x,t.y=o.y,0)}function applySubgridShift(n,e,t){var r={x:Number[_0x3a2b68({_0x1a18ae:2200}._0x1a18ae)],y:Number.NaN};if(isNaN(n.x))return r;var o={x:n.x,y:n.y};o.x-=t.ll[0],o.y-=t.ll[1],o.x=adjust_lon(o.x-Math.PI)+Math.PI;var c=nadInterpolate(o,t);if(e){if(isNaN(c.x))return r;c.x=o.x-c.x,c.y=o.y-c.y;var _=9,l=1e-12,d,f;do{if(f=nadInterpolate(c,t),isNaN(f.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}d={x:o.x-(f.x+c.x),y:o.y-(f.y+c.y)},c.x+=d.x,c.y+=d.y}while(_--&&Math.abs(d.x)>l&&Math.abs(d.y)>l);if(_<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=adjust_lon(c.x+t.ll[0]),r.y=c.y+t.ll[1]}else!isNaN(c.x)&&(r.x=n.x+c.x,r.y=n.y+c.y);return r}function nadInterpolate(n,e){const t={_0x3e55f2:2444,_0x12ca67:2654,_0x609e47:4192},i=_0x3a2b68;var s={x:n.x/e.del[0],y:n.y/e[i(t._0x3e55f2)][1]},r={x:Math[i(t._0x12ca67)](s.x),y:Math[i(t._0x12ca67)](s.y)},o={x:s.x-1*r.x,y:s.y-1*r.y},c={x:Number[i(2200)],y:Number.NaN},_;if(r.x<0||r.x>=e[i(t._0x609e47)][0]||r.y<0||r.y>=e.lim[1])return c;_=r.y*e.lim[0]+r.x;var l={x:e[i(1804)][_][0],y:e.cvs[_][1]};_++;var d={x:e.cvs[_][0],y:e.cvs[_][1]};_+=e[i(t._0x609e47)][0];var f={x:e[i(1804)][_][0],y:e.cvs[_][1]};_--;var g={x:e.cvs[_][0],y:e.cvs[_][1]},b=o.x*o.y,C=o.x*(1-o.y),P=(1-o.x)*(1-o.y),S=(1-o.x)*o.y;return c.x=P*l.x+C*d.x+S*g.x+b*f.x,c.y=P*l.y+C*d.y+S*g.y+b*f.y,c}function adjust_axis(n,e,t){const i={_0x5db4ac:4362,_0x51f8ac:4362},s=_0x3a2b68;var r=t.x,o=t.y,c=t.z||0,_,l,d,f={};for(d=0;d<3;d++)if(!(e&&d===2&&t.z===void 0))switch(d===0?(_=r,"ew".indexOf(n[s(i._0x5db4ac)][d])!==-1?l="x":l="y"):d===1?(_=o,"ns".indexOf(n[s(4362)][d])!==-1?l="y":l="x"):(_=c,l="z"),n[s(i._0x51f8ac)][d]){case"e":f[l]=_;break;case"w":f[l]=-_;break;case"n":f[l]=_;break;case"s":f[l]=-_;break;case"u":t[l]!==void 0&&(f.z=_);break;case"d":t[l]!==void 0&&(f.z=-_);break;default:return null}return f}function common(n){var e={x:n[0],y:n[1]};return n.length>2&&(e.z=n[2]),n.length>3&&(e.m=n[3]),e}function checkSanity(n){checkCoord(n.x),checkCoord(n.y)}function checkCoord(n){const e={_0x227b6d:2226},t=_0x3a2b68;if(typeof Number.isFinite=="function"){if(Number.isFinite(n))return;throw new TypeError("coordinates must be finite numbers")}if(typeof n!==t(e._0x227b6d)||n!==n||!isFinite(n))throw new TypeError(t(1279))}function checkNotWGS(n,e){const t={_0x2b6fbc:2378,_0x3efa24:3821},i=_0x3a2b68;return(n[i(t._0x2b6fbc)][i(t._0x3efa24)]===PJD_3PARAM||n.datum.datum_type===PJD_7PARAM||n.datum.datum_type===PJD_GRIDSHIFT)&&e.datumCode!=="WGS84"||(e[i(2378)].datum_type===PJD_3PARAM||e.datum.datum_type===PJD_7PARAM||e.datum.datum_type===PJD_GRIDSHIFT)&&n.datumCode!=="WGS84"}function transform(n,e,t,i){const s={_0x59b25c:2378,_0x43ec33:1473,_0x5d6305:1105,_0x33b435:1103,_0x51b08c:4149,_0x5db8b8:1473},r=_0x3a2b68;var o;Array.isArray(t)?t=common(t):t={x:t.x,y:t.y,z:t.z,m:t.m};var c=t.z!==void 0;if(checkSanity(t),n[r(s._0x59b25c)]&&e.datum&&checkNotWGS(n,e)&&(o=new Projection("WGS84"),t=transform(n,o,t,i),n=o),i&&n.axis!==r(s._0x43ec33)&&(t=adjust_axis(n,![],t)),n[r(s._0x5d6305)]===r(s._0x33b435))t={x:t.x*D2R$1,y:t.y*D2R$1,z:t.z||0};else if(n.to_meter&&(t={x:t.x*n.to_meter,y:t.y*n.to_meter,z:t.z||0}),t=n.inverse(t),!t)return;if(n.from_greenwich&&(t.x+=n.from_greenwich),t=datum_transform(n.datum,e.datum,t),!!t)return e[r(591)]&&(t={x:t.x-e[r(591)],y:t.y,z:t.z||0}),e.projName==="longlat"?t={x:t.x*R2D,y:t.y*R2D,z:t.z||0}:(t=e.forward(t),e[r(4149)]&&(t={x:t.x/e[r(s._0x51b08c)],y:t.y/e.to_meter,z:t.z||0})),i&&e[r(4362)]!==r(s._0x5db8b8)?adjust_axis(e,!![],t):(!c&&delete t.z,t)}var wgs84=Projection("WGS84");function transformer(n,e,t,i){const s={_0x3aeca5:3307,_0x281521:3307},r={_0x480d32:3164,_0x4a9bfc:3307},o=_0x3a2b68;var c,_,l;return Array.isArray(t)?(c=transform(n,e,t,i)||{x:NaN,y:NaN},t[o(400)]>2?typeof n[o(3307)]<"u"&&n.name==="geocent"||typeof e[o(s._0x3aeca5)]<"u"&&e[o(s._0x281521)]===o(3164)?typeof c.z=="number"?[c.x,c.y,c.z][o(4083)](t.splice(3)):[c.x,c.y,t[2]].concat(t.splice(3)):[c.x,c.y].concat(t.splice(2)):[c.x,c.y]):(_=transform(n,e,t,i),l=Object.keys(t),l.length===2||l[o(3782)](function(d){const f=o;if(typeof n.name<"u"&&n.name===f(r._0x480d32)||typeof e.name<"u"&&e[f(r._0x4a9bfc)]==="geocent"){if(d==="x"||d==="y"||d==="z")return}else if(d==="x"||d==="y")return;_[d]=t[d]}),_)}function checkProj(n){return n instanceof Projection?n:n.oProj?n.oProj:Projection(n)}function proj4(n,e,t){n=checkProj(n);var i=![],s;return typeof e>"u"?(e=n,n=wgs84,i=!![]):(typeof e.x<"u"||Array.isArray(e))&&(t=e,e=n,n=wgs84,i=!![]),e=checkProj(e),t?transformer(n,e,t):(s={forward:function(r,o){return transformer(n,e,r,o)},inverse:function(r,o){return transformer(e,n,r,o)}},i&&(s.oProj=e),s)}var NUM_100K_SETS=6,SET_ORIGIN_COLUMN_LETTERS="AJSAJS",SET_ORIGIN_ROW_LETTERS="AFAFAF",A=65,I=73,O=79,V=86,Z=90,mgrs={forward:forward$t,inverse:inverse$t,toPoint};function forward$t(n,e){return e=e||5,encode$1(LLtoUTM({lat:n[1],lon:n[0]}),e)}function inverse$t(n){const e={_0x4c3c4d:363},t=_0x3a2b68;var i=UTMtoLL(decode(n[t(e._0x4c3c4d)]()));return i.lat&&i.lon?[i.lon,i[t(671)],i.lon,i[t(671)]]:[i.left,i.bottom,i.right,i.top]}function toPoint(n){const e={_0x5374ea:595},t=_0x3a2b68;var i=UTMtoLL(decode(n.toUpperCase()));return i.lat&&i.lon?[i.lon,i.lat]:[(i.left+i[t(e._0x5374ea)])/2,(i.top+i.bottom)/2]}function degToRad(n){return n*(Math.PI/180)}function radToDeg(n){return 180*(n/Math.PI)}function LLtoUTM(n){const e={_0x4e9ed3:1106,_0x32ef6a:3492,_0x557eb8:2519,_0x534d78:4272},t=_0x3a2b68;var i=n.lat,s=n[t(e._0x4e9ed3)],r=6378137,o=.00669438,c=.9996,_,l,d,f,g,b,C,P=degToRad(i),S=degToRad(s),L,E;E=Math.floor((s+180)/6)+1,s===180&&(E=60),i>=56&&i<64&&s>=3&&s<12&&(E=32),i>=72&&i<84&&(s>=0&&s<9?E=31:s>=9&&s<21?E=33:s>=21&&s<33?E=35:s>=33&&s<42&&(E=37)),_=(E-1)*6-180+3,L=degToRad(_),l=o/(1-o),d=r/Math.sqrt(1-o*Math.sin(P)*Math[t(e._0x32ef6a)](P)),f=Math.tan(P)*Math.tan(P),g=l*Math.cos(P)*Math[t(e._0x557eb8)](P),b=Math.cos(P)*(S-L),C=r*((1-o/4-3*o*o/64-5*o*o*o/256)*P-(3*o/8+3*o*o/32+45*o*o*o/1024)*Math[t(3492)](2*P)+(15*o*o/256+45*o*o*o/1024)*Math.sin(4*P)-35*o*o*o/3072*Math.sin(6*P));var M=c*d*(b+(1-f+g)*b*b*b/6+(5-18*f+f*f+72*g-58*l)*b*b*b*b*b/120)+5e5,D=c*(C+d*Math[t(e._0x534d78)](P)*(b*b/2+(5-f+9*g+4*g*g)*b*b*b*b/24+(61-58*f+f*f+600*g-330*l)*b*b*b*b*b*b/720));return i<0&&(D+=1e7),{northing:Math[t(2886)](D),easting:Math[t(2886)](M),zoneNumber:E,zoneLetter:getLetterDesignator(i)}}function UTMtoLL(n){const e={_0x13f015:2561,_0x51d127:392,_0x9e5882:1836,_0x4d6edb:2561,_0x25b7fb:1600},t=_0x3a2b68;var i=n[t(e._0x13f015)],s=n.easting,r=n.zoneLetter,o=n[t(1600)];if(o<0||o>60)return null;var c=.9996,_=6378137,l=.00669438,d,f=(1-Math.sqrt(1-l))/(1+Math.sqrt(1-l)),g,b,C,P,S,L,E,M,D,R=s-5e5,k=i;r<"N"&&(k-=1e7),E=(o-1)*6-180+3,d=l/(1-l),L=k/c,M=L/(_*(1-l/4-3*l*l/64-5*l*l*l/256)),D=M+(3*f/2-27*f*f*f/32)*Math.sin(2*M)+(21*f*f/16-55*f*f*f*f/32)*Math.sin(4*M)+151*f*f*f/96*Math.sin(6*M),g=_/Math.sqrt(1-l*Math.sin(D)*Math.sin(D)),b=Math.tan(D)*Math.tan(D),C=d*Math.cos(D)*Math.cos(D),P=_*(1-l)/Math[t(e._0x51d127)](1-l*Math[t(3492)](D)*Math.sin(D),1.5),S=R/(g*c);var N=D-g*Math.tan(D)/P*(S*S/2-(5+3*b+10*C-4*C*C-9*d)*S*S*S*S/24+(61+90*b+298*C+45*b*b-252*d-3*C*C)*S*S*S*S*S*S/720);N=radToDeg(N);var $=(S-(1+2*b+C)*S*S*S/6+(5-2*C+28*b-3*C*C+8*d+24*b*b)*S*S*S*S*S/120)/Math.cos(D);$=E+radToDeg($);var B;if(n[t(e._0x9e5882)]){var F=UTMtoLL({northing:n[t(e._0x4d6edb)]+n[t(e._0x9e5882)],easting:n.easting+n[t(1836)],zoneLetter:n.zoneLetter,zoneNumber:n[t(e._0x25b7fb)]});B={top:F.lat,right:F.lon,bottom:N,left:$}}else B={lat:N,lon:$};return B}function getLetterDesignator(n){var e="Z";return 84>=n&&n>=72?e="X":72>n&&n>=64?e="W":64>n&&n>=56?e="V":56>n&&n>=48?e="U":48>n&&n>=40?e="T":40>n&&n>=32?e="S":32>n&&n>=24?e="R":24>n&&n>=16?e="Q":16>n&&n>=8?e="P":8>n&&n>=0?e="N":0>n&&n>=-8?e="M":-8>n&&n>=-16?e="L":-16>n&&n>=-24?e="K":-24>n&&n>=-32?e="J":-32>n&&n>=-40?e="H":-40>n&&n>=-48?e="G":-48>n&&n>=-56?e="F":-56>n&&n>=-64?e="E":-64>n&&n>=-72?e="D":-72>n&&n>=-80&&(e="C"),e}function encode$1(n,e){const t={_0x4b3daa:2344,_0x3d6124:2210,_0x4eb553:2561},i=_0x3a2b68;var s=i(t._0x4b3daa)+n[i(t._0x3d6124)],r="00000"+n[i(t._0x4eb553)];return n.zoneNumber+n.zoneLetter+get100kID(n.easting,n.northing,n.zoneNumber)+s.substr(s.length-5,e)+r.substr(r.length-5,e)}function get100kID(n,e,t){var i=get100kSetForZone(t),s=Math.floor(n/1e5),r=Math.floor(e/1e5)%20;return getLetter100kID(s,r,i)}function get100kSetForZone(n){var e=n%NUM_100K_SETS;return e===0&&(e=NUM_100K_SETS),e}function getLetter100kID(n,e,t){const i=_0x3a2b68;var s=t-1,r=SET_ORIGIN_COLUMN_LETTERS[i(1982)](s),o=SET_ORIGIN_ROW_LETTERS.charCodeAt(s),c=r+n-1,_=o+e,l=![];c>Z&&(c=c-Z+A-1,l=!![]),(c===I||r<I&&c>I||(c>I||r<I)&&l)&&c++,(c===O||r<O&&c>O||(c>O||r<O)&&l)&&(c++,c===I&&c++),c>Z&&(c=c-Z+A-1),_>V?(_=_-V+A-1,l=!![]):l=![],(_===I||o<I&&_>I||(_>I||o<I)&&l)&&_++,(_===O||o<O&&_>O||(_>O||o<O)&&l)&&(_++,_===I&&_++),_>V&&(_=_-V+A-1);var d=String.fromCharCode(c)+String.fromCharCode(_);return d}function decode(n){const e={_0x298078:400,_0x35c23c:1904},t=_0x3a2b68;if(n&&n[t(e._0x298078)]===0)throw t(3240);for(var i=n.length,s=null,r="",o,c=0;!/[A-Z]/[t(2361)](o=n.charAt(c));){if(c>=2)throw"MGRSPoint bad conversion from: "+n;r+=o,c++}var _=parseInt(r,10);if(c===0||c+3>i)throw"MGRSPoint bad conversion from: "+n;var l=n.charAt(c++);if(l<="A"||l==="B"||l==="Y"||l>="Z"||l==="I"||l==="O")throw"MGRSPoint zone letter "+l+t(1714)+n;s=n.substring(c,c+=2);for(var d=get100kSetForZone(_),f=getEastingFromChar(s.charAt(0),d),g=getNorthingFromChar(s.charAt(1),d);g<getMinNorthing(l);)g+=2e6;var b=i-c;if(b%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+n;var C=b/2,P=0,S=0,L,E,M,D,R;return C>0&&(L=1e5/Math.pow(10,C),E=n.substring(c,c+C),P=parseFloat(E)*L,M=n[t(e._0x35c23c)](c+C),S=parseFloat(M)*L),D=P+f,R=S+g,{easting:D,northing:R,zoneLetter:l,zoneNumber:_,accuracy:L}}function getEastingFromChar(n,e){const t={_0x2bbbab:3195},i=_0x3a2b68;for(var s=SET_ORIGIN_COLUMN_LETTERS[i(1982)](e-1),r=1e5,o=![];s!==n.charCodeAt(0);){if(s++,s===I&&s++,s===O&&s++,s>Z){if(o)throw i(t._0x2bbbab)+n;s=A,o=!![]}r+=1e5}return r}function getNorthingFromChar(n,e){if(n>"V")throw"MGRSPoint given invalid Northing "+n;for(var t=SET_ORIGIN_ROW_LETTERS.charCodeAt(e-1),i=0,s=![];t!==n.charCodeAt(0);){if(t++,t===I&&t++,t===O&&t++,t>V){if(s)throw"Bad character: "+n;t=A,s=!![]}i+=1e5}return i}function getMinNorthing(n){const e=_0x3a2b68;var t;switch(n){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw e(2592)+n}function Point(n,e,t){const i=_0x3a2b68;if(!(this instanceof Point))return new Point(n,e,t);if(Array.isArray(n))this.x=n[0],this.y=n[1],this.z=n[2]||0;else if(typeof n=="object")this.x=n.x,this.y=n.y,this.z=n.z||0;else if(typeof n===i(2148)&&typeof e>"u"){var s=n[i(821)](",");this.x=parseFloat(s[0],10),this.y=parseFloat(s[1],10),this.z=parseFloat(s[2],10)||0}else this.x=n,this.y=e,this.z=t||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Point.fromMGRS=function(n){return new Point(toPoint(n))},Point[_0x3a2b68(4390)].toMGRS=function(n){return forward$t([this.x,this.y],n)};var C00=1,C02=.25,C04=.046875,C06=.01953125,C08=.01068115234375,C22=.75,C44=.46875,C46=.013020833333333334,C48=.007120768229166667,C66=.3645833333333333,C68=.005696614583333333,C88=.3076171875;function pj_enfn(n){var e=[];e[0]=C00-n*(C02+n*(C04+n*(C06+n*C08))),e[1]=n*(C22-n*(C04+n*(C06+n*C08)));var t=n*n;return e[2]=t*(C44-n*(C46+n*C48)),t*=n,e[3]=t*(C66-n*C68),e[4]=t*n*C88,e}function pj_mlfn(n,e,t,i){return t*=e,e*=e,i[0]*n-t*(i[1]+e*(i[2]+e*(i[3]+e*i[4])))}var MAX_ITER$3=20;function pj_inv_mlfn(n,e,t){const i={_0x41e3a9:3492},s=_0x3a2b68;for(var r=1/(1-e),o=n,c=MAX_ITER$3;c;--c){var _=Math[s(i._0x41e3a9)](o),l=1-e*_*_;if(l=(pj_mlfn(o,_,Math.cos(o),t)-n)*(l*Math.sqrt(l))*r,o-=l,Math.abs(l)<EPSLN)return o}return o}function init$t(){const n={_0x542c3a:429,_0x1def66:3629},e=_0x3a2b68;this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this[e(n._0x542c3a)]=this.long0!==void 0?this.long0:0,this[e(n._0x1def66)]=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=pj_enfn(this.es),this.ml0=pj_mlfn(this[e(3629)],Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function forward$s(n){const e=_0x3a2b68;var t=n.x,i=n.y,s=adjust_lon(t-this.long0),r,o,c,_=Math[e(3492)](i),l=Math.cos(i);if(this.es){var f=l*s,g=Math.pow(f,2),b=this.ep2*Math[e(392)](l,2),C=Math.pow(b,2),P=Math.abs(l)>EPSLN?Math.tan(i):0,S=Math[e(392)](P,2),L=Math.pow(S,2);r=1-this.es*Math.pow(_,2),f=f/Math.sqrt(r);var E=pj_mlfn(i,_,l,this.en);o=this.a*(this.k0*f*(1+g/6*(1-S+b+g/20*(5-18*S+L+14*b-58*S*b+g/42*(61+179*L-L*S-479*S)))))+this.x0,c=this.a*(this.k0*(E-this[e(3171)]+_*s*f/2*(1+g/12*(5-S+9*b+4*C+g/30*(61+L-58*S+270*b-330*S*b+g/56*(1385+543*L-L*S-3111*S))))))+this.y0}else{var d=l*Math.sin(s);if(Math[e(2376)](Math.abs(d)-1)<EPSLN)return 93;if(o=.5*this.a*this.k0*Math.log((1+d)/(1-d))+this.x0,c=l*Math.cos(s)/Math[e(2789)](1-Math.pow(d,2)),d=Math.abs(c),d>=1){if(d-1>EPSLN)return 93;c=0}else c=Math.acos(c);i<0&&(c=-c),c=this.a*this.k0*(c-this.lat0)+this.y0}return n.x=o,n.y=c,n}function inverse$s(n){const e={_0x2f9242:2789,_0x47aa89:392,_0x22d692:2376,_0x31d03c:3492,_0x2a2da9:392,_0x292913:392,_0x1a91cf:429},t=_0x3a2b68;var i,s,r,o,c=(n.x-this.x0)*(1/this.a),_=(n.y-this.y0)*(1/this.a);if(this.es)if(i=this.ml0+_/this.k0,s=pj_inv_mlfn(i,this.es,this.en),Math[t(e._0x22d692)](s)<HALF_PI){var b=Math[t(e._0x31d03c)](s),C=Math.cos(s),P=Math[t(e._0x22d692)](C)>EPSLN?Math.tan(s):0,S=this.ep2*Math[t(e._0x47aa89)](C,2),L=Math[t(392)](S,2),E=Math[t(e._0x2a2da9)](P,2),M=Math.pow(E,2);i=1-this.es*Math.pow(b,2);var D=c*Math.sqrt(i)/this.k0,R=Math[t(e._0x292913)](D,2);i=i*P,r=s-i*R/(1-this.es)*.5*(1-R/12*(5+3*E-9*S*E+S-4*L-R/30*(61+90*E-252*S*E+45*M+46*S-R/56*(1385+3633*E+4095*M+1574*M*E)))),o=adjust_lon(this[t(e._0x1a91cf)]+D*(1-R/6*(1+2*E+S-R/20*(5+28*E+24*M+8*S*E+6*S-R/42*(61+662*E+1320*M+720*M*E))))/C)}else r=HALF_PI*sign(_),o=0;else{var l=Math.exp(c/this.k0),d=.5*(l-1/l),f=this.lat0+_/this.k0,g=Math[t(2519)](f);i=Math[t(e._0x2f9242)]((1-Math.pow(g,2))/(1+Math[t(e._0x47aa89)](d,2))),r=Math[t(2843)](i),_<0&&(r=-r),d===0&&g===0?o=0:o=adjust_lon(Math.atan2(d,g)+this.long0)}return n.x=o,n.y=r,n}var names$t=["Fast_Transverse_Mercator","Fast Transverse Mercator"],tmerc={init:init$t,forward:forward$s,inverse:inverse$s,names:names$t};function sinh(n){var e=Math.exp(n);return e=(e-1/e)/2,e}function hypot(n,e){const t=_0x3a2b68;n=Math[t(2376)](n),e=Math[t(2376)](e);var i=Math.max(n,e),s=Math.min(n,e)/(i||1);return i*Math.sqrt(1+Math.pow(s,2))}function log1py(n){var e=1+n,t=e-1;return t===0?n:n*Math.log(e)/t}function asinhy(n){var i=Math[_0x3a2b68({_0x3656ec:2376}._0x3656ec)](n);return i=log1py(i*(1+i/(hypot(1,i)+1))),n<0?-i:i}function gatg(n,e){for(var i=2*Math[_0x3a2b68(2519)](2*e),s=n.length-1,r=n[s],o=0,c;--s>=0;)c=-o+i*r+n[s],o=r,r=c;return e+c*Math.sin(2*e)}function clens(n,e){const t=_0x3a2b68;for(var i=2*Math.cos(e),s=n.length-1,r=n[s],o=0,c;--s>=0;)c=-o+i*r+n[s],o=r,r=c;return Math[t(3492)](e)*c}function cosh(n){var i=Math[_0x3a2b68({_0x109dc3:2665}._0x109dc3)](n);return i=(i+1/i)/2,i}function clens_cmplx(n,e,t){const i=_0x3a2b68;for(var s=Math.sin(e),r=Math.cos(e),o=sinh(t),c=cosh(t),_=2*r*c,l=-2*s*o,d=n[i(400)]-1,f=n[d],g=0,b=0,C=0,P,S;--d>=0;)P=b,S=g,b=f,g=C,f=-P+_*b-l*g+n[d],C=-S+l*b+_*g;return _=s*c,l=r*o,[_*f-l*C,_*C+l*f]}function init$s(){const n={_0x1fec67:1311,_0x4973f4:547,_0x5325f8:2921,_0x4ba1b4:392},e=_0x3a2b68;if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error(e(n._0x1fec67));this.approx&&(tmerc.init.apply(this),this.forward=tmerc.forward,this.inverse=tmerc.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this[e(n._0x4973f4)]=[],this.gtu=[];var t=this.es/(1+Math[e(2789)](1-this.es)),i=t/(2-t),s=i;this.cgb[0]=i*(2+i*(-2/3+i*(-2+i*(116/45+i*(26/45+i*(-2854/675)))))),this.cbg[0]=i*(-2+i*(2/3+i*(4/3+i*(-82/45+i*(32/45+i*(4642/4725)))))),s=s*i,this.cgb[1]=s*(7/3+i*(-8/5+i*(-227/45+i*(2704/315+i*(2323/945))))),this.cbg[1]=s*(5/3+i*(-16/15+i*(-13/9+i*(904/315+i*(-1522/945))))),s=s*i,this.cgb[2]=s*(56/15+i*(-136/35+i*(-1262/105+i*(73814/2835)))),this.cbg[2]=s*(-26/15+i*(34/21+i*(8/5+i*(-12686/2835)))),s=s*i,this[e(n._0x5325f8)][3]=s*(4279/630+i*(-332/35+i*(-399572/14175))),this.cbg[3]=s*(1237/630+i*(-12/5+i*(-24832/14175))),s=s*i,this.cgb[4]=s*(4174/315+i*(-144838/6237)),this.cbg[4]=s*(-734/315+i*(109598/31185)),s=s*i,this.cgb[5]=s*(601676/22275),this.cbg[5]=s*(444337/155925),s=Math[e(n._0x4ba1b4)](i,2),this.Qn=this.k0/(1+i)*(1+s*(1/4+s*(1/64+s/256))),this.utg[0]=i*(-.5+i*(2/3+i*(-37/96+i*(1/360+i*(81/512+i*(-96199/604800)))))),this.gtu[0]=i*(.5+i*(-2/3+i*(5/16+i*(41/180+i*(-127/288+i*(7891/37800)))))),this.utg[1]=s*(-1/48+i*(-1/15+i*(437/1440+i*(-46/105+i*(1118711/3870720))))),this.gtu[1]=s*(13/48+i*(-3/5+i*(557/1440+i*(281/630+i*(-1983433/1935360))))),s=s*i,this.utg[2]=s*(-17/480+i*(37/840+i*(209/4480+i*(-5569/90720)))),this.gtu[2]=s*(61/240+i*(-103/140+i*(15061/26880+i*(167603/181440)))),s=s*i,this.utg[3]=s*(-4397/161280+i*(11/504+i*(830251/7257600))),this.gtu[3]=s*(49561/161280+i*(-179/168+i*(6601661/7257600))),s=s*i,this[e(547)][4]=s*(-4583/161280+i*(108847/3991680)),this.gtu[4]=s*(34729/80640+i*(-3418889/1995840)),s=s*i,this[e(547)][5]=s*(-20648693/638668800),this.gtu[5]=s*(212378941/319334400);var r=gatg(this.cbg,this[e(3629)]);this.Zb=-this.Qn*(r+clens(this[e(2711)],2*r))}function forward$r(n){const e={_0x5de8be:3492,_0xb4c7b5:2711,_0x4b8f03:2376},t=_0x3a2b68;var i=adjust_lon(n.x-this.long0),s=n.y;s=gatg(this.cbg,s);var r=Math[t(e._0x5de8be)](s),o=Math.cos(s),c=Math[t(3492)](i),_=Math[t(2519)](i);s=Math.atan2(r,_*o),i=Math[t(1349)](c*o,hypot(r,o*_)),i=asinhy(Math.tan(i));var l=clens_cmplx(this[t(e._0xb4c7b5)],2*s,2*i);s=s+l[0],i=i+l[1];var d,f;return Math[t(e._0x4b8f03)](i)<=2.623395162778?(d=this.a*(this.Qn*i)+this.x0,f=this.a*(this.Qn*s+this.Zb)+this.y0):(d=1/0,f=1/0),n.x=d,n.y=f,n}function inverse$r(n){const e={_0x27b6d5:3375,_0x5f1a08:3492},t=_0x3a2b68;var i=(n.x-this.x0)*(1/this.a),s=(n.y-this.y0)*(1/this.a);s=(s-this.Zb)/this.Qn,i=i/this.Qn;var r,o;if(Math.abs(i)<=2.623395162778){var c=clens_cmplx(this.utg,2*s,2*i);s=s+c[0],i=i+c[1],i=Math[t(e._0x27b6d5)](sinh(i));var _=Math[t(e._0x5f1a08)](s),l=Math[t(2519)](s),d=Math.sin(i),f=Math.cos(i);s=Math.atan2(_*f,hypot(d,f*l)),i=Math.atan2(d,f*l),r=adjust_lon(i+this.long0),o=gatg(this.cgb,s)}else r=1/0,o=1/0;return n.x=r,n.y=o,n}var names$s=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"],etmerc={init:init$s,forward:forward$r,inverse:inverse$r,names:names$s};function adjust_zone(n,e){if(n===void 0){if(n=Math.floor((adjust_lon(e)+Math.PI)*30/Math.PI)+1,n<0)return 0;if(n>60)return 60}return n}var dependsOn="etmerc";function init$r(){const n={_0x49b49c:1563},e=_0x3a2b68;var t=adjust_zone(this.zone,this[e(429)]);if(t===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*D2R$1,this.x0=5e5,this.y0=this[e(n._0x49b49c)]?1e7:0,this.k0=.9996,etmerc.init[e(722)](this),this.forward=etmerc.forward,this.inverse=etmerc.inverse}var names$r=["Universal Transverse Mercator System",_0x3a2b68(3383)],utm={init:init$r,names:names$r,dependsOn};function srat(n,e){return Math[_0x3a2b68(392)]((1-n)/(1+n),e)}var MAX_ITER$2=20;function init$q(){const n={_0x15a57b:3629},e=_0x3a2b68;var t=Math.sin(this[e(3629)]),i=Math.cos(this.lat0);i*=i,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*i*i/(1-this.es)),this[e(1278)]=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+FORTPI)/(Math.pow(Math.tan(.5*this[e(n._0x15a57b)]+FORTPI),this.C)*srat(this.e*t,this.ratexp))}function forward$q(n){const e={_0x25ab2b:3375,_0x592b05:4272},t=_0x3a2b68;var i=n.x,s=n.y;return n.y=2*Math[t(e._0x25ab2b)](this.K*Math.pow(Math[t(e._0x592b05)](.5*s+FORTPI),this.C)*srat(this.e*Math.sin(s),this.ratexp))-HALF_PI,n.x=this.C*i,n}function inverse$q(n){for(var e=1e-14,t=n.x/this.C,i=n.y,s=Math.pow(Math.tan(.5*i+FORTPI)/this.K,1/this.C),r=MAX_ITER$2;r>0&&(i=2*Math.atan(s*srat(this.e*Math.sin(n.y),-.5*this.e))-HALF_PI,!(Math.abs(i-n.y)<e));--r)n.y=i;return r?(n.x=t,n.y=i,n):null}var names$q=["gauss"],gauss={init:init$q,forward:forward$q,inverse:inverse$q,names:names$q};function init$p(){const n=_0x3a2b68;gauss[n(2890)].apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,!this.title&&(this.title=n(1424)))}function forward$p(n){var e,t,i,s;return n.x=adjust_lon(n.x-this.long0),gauss.forward.apply(this,[n]),e=Math.sin(n.y),t=Math.cos(n.y),i=Math.cos(n.x),s=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*t*i),n.x=s*t*Math.sin(n.x),n.y=s*(this.cosc0*e-this.sinc0*t*i),n.x=this.a*n.x+this.x0,n.y=this.a*n.y+this.y0,n}function inverse$p(n){const e={_0x50ced8:1208,_0x35bf0c:1278,_0x17b419:722},t=_0x3a2b68;var i,s,r,o,c;if(n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,n.x/=this.k0,n.y/=this.k0,c=Math.sqrt(n.x*n.x+n.y*n.y)){var _=2*Math.atan2(c,this.R2);i=Math.sin(_),s=Math[t(2519)](_),o=Math[t(2843)](s*this[t(e._0x50ced8)]+n.y*i*this.cosc0/c),r=Math.atan2(n.x*i,c*this.cosc0*s-n.y*this[t(e._0x50ced8)]*i)}else o=this[t(e._0x35bf0c)],r=0;return n.x=r,n.y=o,gauss.inverse[t(e._0x17b419)](this,[n]),n.x=adjust_lon(n.x+this[t(429)]),n}var names$p=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea",_0x3a2b68(1424),"Double_Stereographic"],sterea={init:init$p,forward:forward$p,inverse:inverse$p,names:names$p};function ssfn_(n,e,t){return e*=t,Math.tan(.5*(HALF_PI+n))*Math.pow((1-e)/(1+e),.5*t)}function init$o(){const n={_0x2fa559:2376,_0x19e96d:3629,_0x362d0b:2789,_0x30bd05:2519,_0x5525a5:3671,_0x296b64:2294},e=_0x3a2b68;this.coslat0=Math.cos(this.lat0),this.sinlat0=Math[e(3492)](this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math[e(n._0x2fa559)](this.coslat0)<=EPSLN&&(this.k0=.5*(1+sign(this[e(n._0x19e96d)])*Math[e(3492)](this[e(3671)]))):(Math.abs(this.coslat0)<=EPSLN&&(this.lat0>0?this.con=1:this.con=-1),this[e(823)]=Math[e(n._0x362d0b)](Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=EPSLN&&(this.k0=.5*this.cons*msfnz(this.e,Math.sin(this.lat_ts),Math[e(n._0x30bd05)](this[e(n._0x5525a5)]))/tsfnz(this.e,this[e(2614)]*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=msfnz(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this[e(n._0x296b64)],this.e))-HALF_PI,this.cosX0=Math.cos(this.X0),this[e(2819)]=Math.sin(this.X0))}function forward$o(n){const e={_0x397468:2294,_0x3d5b74:3375,_0x135064:2366,_0x3ca4ae:429,_0x5539fb:2614,_0xcf920a:2519,_0x430826:2819},t=_0x3a2b68;var i=n.x,s=n.y,r=Math[t(3492)](s),o=Math.cos(s),c,_,l,d,f,g,b=adjust_lon(i-this.long0);return Math.abs(Math.abs(i-this[t(429)])-Math.PI)<=EPSLN&&Math.abs(s+this.lat0)<=EPSLN?(n.x=NaN,n.y=NaN,n):this.sphere?(c=2*this.k0/(1+this.sinlat0*r+this.coslat0*o*Math.cos(b)),n.x=this.a*c*o*Math.sin(b)+this.x0,n.y=this.a*c*(this.coslat0*r-this[t(e._0x397468)]*o*Math.cos(b))+this.y0,n):(_=2*Math[t(e._0x3d5b74)](this.ssfn_(s,r,this.e))-HALF_PI,d=Math.cos(_),l=Math.sin(_),Math.abs(this[t(e._0x135064)])<=EPSLN?(f=tsfnz(this.e,s*this.con,this.con*r),g=2*this.a*this.k0*f/this.cons,n.x=this.x0+g*Math.sin(i-this[t(e._0x3ca4ae)]),n.y=this.y0-this[t(e._0x5539fb)]*g*Math.cos(i-this.long0),n):(Math.abs(this.sinlat0)<EPSLN?(c=2*this.a*this.k0/(1+d*Math[t(e._0xcf920a)](b)),n.y=c*l):(c=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this[t(e._0x430826)]*l+this[t(878)]*d*Math.cos(b))),n.y=c*(this.cosX0*l-this.sinX0*d*Math.cos(b))+this.y0),n.x=c*d*Math.sin(b)+this.x0,n))}function inverse$o(n){const e={_0x1a6d5a:2789,_0x448519:2294,_0x154396:3492,_0x152165:2366,_0x411b54:429,_0x37c586:2614,_0x5337d7:2519},t=_0x3a2b68;n.x-=this.x0,n.y-=this.y0;var i,s,r,o,c,_=Math[t(e._0x1a6d5a)](n.x*n.x+n.y*n.y);if(this.sphere){var l=2*Math.atan(_/(2*this.a*this.k0));return i=this.long0,s=this.lat0,_<=EPSLN?(n.x=i,n.y=s,n):(s=Math.asin(Math.cos(l)*this[t(e._0x448519)]+n.y*Math[t(e._0x154396)](l)*this[t(e._0x152165)]/_),Math.abs(this.coslat0)<EPSLN?this.lat0>0?i=adjust_lon(this[t(429)]+Math.atan2(n.x,-1*n.y)):i=adjust_lon(this[t(429)]+Math[t(1349)](n.x,n.y)):i=adjust_lon(this[t(e._0x411b54)]+Math.atan2(n.x*Math.sin(l),_*this.coslat0*Math.cos(l)-n.y*this.sinlat0*Math.sin(l))),n.x=i,n.y=s,n)}else if(Math.abs(this.coslat0)<=EPSLN){if(_<=EPSLN)return s=this.lat0,i=this.long0,n.x=i,n.y=s,n;n.x*=this.con,n.y*=this[t(e._0x37c586)],r=_*this.cons/(2*this.a*this.k0),s=this.con*phi2z(this.e,r),i=this.con*adjust_lon(this.con*this.long0+Math.atan2(n.x,-1*n.y))}else o=2*Math[t(3375)](_*this.cosX0/(2*this.a*this.k0*this.ms1)),i=this[t(429)],_<=EPSLN?c=this.X0:(c=Math.asin(Math.cos(o)*this.sinX0+n.y*Math.sin(o)*this.cosX0/_),i=adjust_lon(this.long0+Math.atan2(n.x*Math[t(e._0x154396)](o),_*this.cosX0*Math[t(e._0x5337d7)](o)-n.y*this.sinX0*Math.sin(o)))),s=-1*phi2z(this.e,Math.tan(.5*(HALF_PI+c)));return n.x=i,n.y=s,n}var names$o=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],stere={init:init$o,forward:forward$o,inverse:inverse$o,names:names$o,ssfn_};function init$n(){const n={_0x5855fc:429,_0x2cbe20:2789,_0x148e27:1798},e=_0x3a2b68;var t=this.lat0;this.lambda0=this[e(n._0x5855fc)];var i=Math[e(3492)](t),s=this.a,r=this.rf,o=1/r,c=2*o-Math[e(392)](o,2),_=this.e=Math.sqrt(c);this.R=this.k0*s*Math.sqrt(1-c)/(1-c*Math.pow(i,2)),this.alpha=Math[e(n._0x2cbe20)](1+c/(1-c)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(i/this.alpha);var l=Math.log(Math[e(4272)](Math.PI/4+this.b0/2)),d=Math[e(n._0x148e27)](Math.tan(Math.PI/4+t/2)),f=Math.log((1+_*i)/(1-_*i));this.K=l-this.alpha*d+this.alpha*_/2*f}function forward$n(n){const e={_0x529b1b:1798,_0xb67144:838,_0xc0534a:838,_0x4b7611:2519,_0x897430:2519,_0xe57f20:3492},t=_0x3a2b68;var i=Math[t(e._0x529b1b)](Math.tan(Math.PI/4-n.y/2)),s=this.e/2*Math[t(1798)]((1+this.e*Math.sin(n.y))/(1-this.e*Math.sin(n.y))),r=-this[t(e._0xb67144)]*(i+s)+this.K,o=2*(Math.atan(Math.exp(r))-Math.PI/4),c=this[t(e._0xc0534a)]*(n.x-this.lambda0),_=Math.atan(Math[t(3492)](c)/(Math.sin(this.b0)*Math.tan(o)+Math[t(e._0x4b7611)](this.b0)*Math.cos(c))),l=Math[t(2843)](Math.cos(this.b0)*Math.sin(o)-Math.sin(this.b0)*Math[t(e._0x897430)](o)*Math.cos(c));return n.y=this.R/2*Math.log((1+Math[t(e._0xe57f20)](l))/(1-Math.sin(l)))+this.y0,n.x=this.R*_+this.x0,n}function inverse$n(n){const e={_0x39d061:2665,_0x3330e3:838,_0x6aed56:838,_0x53c20d:3492},t=_0x3a2b68;for(var i=n.x-this.x0,s=n.y-this.y0,r=i/this.R,o=2*(Math.atan(Math[t(e._0x39d061)](s/this.R))-Math.PI/4),c=Math.asin(Math[t(2519)](this.b0)*Math[t(3492)](o)+Math.sin(this.b0)*Math.cos(o)*Math.cos(r)),_=Math.atan(Math.sin(r)/(Math[t(2519)](this.b0)*Math.cos(r)-Math[t(3492)](this.b0)*Math.tan(o))),l=this.lambda0+_/this[t(e._0x3330e3)],d=0,f=c,g=-1e3,b=0;Math[t(2376)](f-g)>1e-7;){if(++b>20)return;d=1/this[t(e._0x6aed56)]*(Math.log(Math.tan(Math.PI/4+c/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math[t(e._0x53c20d)](f))/2)),g=f,f=2*Math.atan(Math.exp(d))-Math.PI/2}return n.x=l,n.y=f,n}var names$n=[_0x3a2b68(1101)],somerc={init:init$n,forward:forward$n,inverse:inverse$n,names:names$n},TOL=1e-7;function isTypeA(n){const e={_0x88a69d:3478},t=_0x3a2b68;var i=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],s=typeof n.PROJECTION=="object"?Object.keys(n[t(e._0x88a69d)])[0]:n.PROJECTION;return"no_uoff"in n||"no_off"in n||i.indexOf(s)!==-1}function init$m(){const n={_0x5ba09a:3991,_0x5ae83a:2376,_0x55975a:2376,_0x3912c2:3629,_0x145a1e:3492,_0x8c062b:2843,_0x121787:4272,_0x36a355:3375,_0x2f16c6:2519,_0x6c78f7:3938},e=_0x3a2b68;var t,i,s,r,o,c,_,l,d,f,g=0,b,C=0,P=0,S=0,L=0,E=0,M=0;this.no_off=isTypeA(this),this.no_rot="no_rot"in this;var D=![];"alpha"in this&&(D=!![]);var R=![];if("rectified_grid_angle"in this&&(R=!![]),D&&(M=this.alpha),R&&(g=this.rectified_grid_angle*D2R$1),D||R)C=this.longc;else if(P=this[e(n._0x5ba09a)],L=this.lat1,S=this.long2,E=this.lat2,Math.abs(L-E)<=TOL||(t=Math[e(n._0x5ae83a)](L))<=TOL||Math.abs(t-HALF_PI)<=TOL||Math.abs(Math[e(2376)](this.lat0)-HALF_PI)<=TOL||Math[e(n._0x55975a)](Math.abs(E)-HALF_PI)<=TOL)throw new Error;var k=1-this.es;i=Math[e(2789)](k),Math[e(2376)](this[e(n._0x3912c2)])>EPSLN?(l=Math[e(n._0x145a1e)](this.lat0),s=Math.cos(this.lat0),t=1-this.es*l*l,this.B=s*s,this.B=Math.sqrt(1+this.es*this.B*this.B/k),this.A=this.B*this.k0*i/t,r=this.B*i/(s*Math.sqrt(t)),o=r*r-1,o<=0?o=0:(o=Math.sqrt(o),this.lat0<0&&(o=-o)),this.E=o+=r,this.E*=Math[e(392)](tsfnz(this.e,this.lat0,l),this.B)):(this.B=1/i,this.A=this.k0,this.E=r=o=1),D||R?(D?(b=Math.asin(Math.sin(M)/r),!R&&(g=M)):(b=g,M=Math.asin(r*Math[e(3492)](b))),this.lam0=C-Math[e(n._0x8c062b)](.5*(o-1/o)*Math.tan(b))/this.B):(c=Math.pow(tsfnz(this.e,L,Math.sin(L)),this.B),_=Math.pow(tsfnz(this.e,E,Math.sin(E)),this.B),o=this.E/c,d=(_-c)/(_+c),f=this.E*this.E,f=(f-_*c)/(f+_*c),t=P-S,t<-Math.pi?S-=TWO_PI:t>Math.pi&&(S+=TWO_PI),this[e(4043)]=adjust_lon(.5*(P+S)-Math.atan(f*Math[e(n._0x121787)](.5*this.B*(P-S))/d)/this.B),b=Math[e(n._0x36a355)](2*Math.sin(this.B*adjust_lon(P-this.lam0))/(o-1/o)),g=M=Math.asin(r*Math.sin(b))),this.singam=Math[e(n._0x145a1e)](b),this.cosgam=Math.cos(b),this.sinrot=Math.sin(g),this.cosrot=Math[e(n._0x2f16c6)](g),this.rB=1/this.B,this.ArB=this.A*this.rB,this[e(n._0x6c78f7)]=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math[e(n._0x36a355)](Math.sqrt(r*r-1)/Math.cos(M))),this.lat0<0&&(this.u_0=-this.u_0)),o=.5*b,this.v_pole_n=this.ArB*Math.log(Math.tan(FORTPI-o)),this.v_pole_s=this.ArB*Math.log(Math.tan(FORTPI+o))}function forward$m(n){const e={_0x46c584:3593},t=_0x3a2b68;var i={},s,r,o,c,_,l,d,f;if(n.x=n.x-this[t(4043)],Math.abs(Math.abs(n.y)-HALF_PI)>EPSLN){if(_=this.E/Math.pow(tsfnz(this.e,n.y,Math.sin(n.y)),this.B),l=1/_,s=.5*(_-l),r=.5*(_+l),c=Math[t(3492)](this.B*n.x),o=(s*this.singam-c*this[t(e._0x46c584)])/r,Math.abs(Math.abs(o)-1)<EPSLN)throw new Error;f=.5*this.ArB*Math.log((1-o)/(1+o)),l=Math.cos(this.B*n.x),Math.abs(l)<TOL?d=this.A*n.x:d=this[t(379)]*Math.atan2(s*this[t(3593)]+c*this.singam,l)}else f=n.y>0?this.v_pole_n:this.v_pole_s,d=this[t(379)]*n.y;return this.no_rot?(i.x=d,i.y=f):(d-=this.u_0,i.x=f*this.cosrot+d*this.sinrot,i.y=d*this.cosrot-f*this.sinrot),i.x=this.a*i.x+this.x0,i.y=this.a*i.y+this.y0,i}function inverse$m(n){const e={_0x1cff02:2133,_0x993699:970,_0x2ae430:3593,_0x2aa822:4113},t=_0x3a2b68;var i,s,r,o,c,_,l,d={};if(n.x=(n.x-this.x0)*(1/this.a),n.y=(n.y-this.y0)*(1/this.a),this.no_rot?(s=n.y,i=n.x):(s=n.x*this.cosrot-n.y*this.sinrot,i=n.y*this[t(e._0x1cff02)]+n.x*this.sinrot+this[t(e._0x993699)]),r=Math.exp(-this.BrA*s),o=.5*(r-1/r),c=.5*(r+1/r),_=Math.sin(this.BrA*i),l=(_*this[t(e._0x2ae430)]+o*this.singam)/c,Math.abs(Math[t(2376)](l)-1)<EPSLN)d.x=0,d.y=l<0?-HALF_PI:HALF_PI;else{if(d.y=this.E/Math.sqrt((1+l)/(1-l)),d.y=phi2z(this.e,Math.pow(d.y,1/this.B)),d.y===1/0)throw new Error;d.x=-this.rB*Math.atan2(o*this.cosgam-_*this[t(e._0x2aa822)],Math.cos(this.BrA*i))}return d.x+=this[t(4043)],d}var names$m=[_0x3a2b68(4055),"Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin",_0x3a2b68(2865),"Oblique_Mercator","omerc"],omerc={init:init$m,forward:forward$m,inverse:inverse$m,names:names$m};function init$l(){const n={_0x28b507:3492,_0x5cb66f:2159},e=_0x3a2b68;if(!this.lat2&&(this[e(2159)]=this.lat1),!this.k0&&(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<EPSLN)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var i=Math[e(n._0x28b507)](this.lat1),s=Math.cos(this.lat1),r=msfnz(this.e,i,s),o=tsfnz(this.e,this.lat1,i),c=Math.sin(this.lat2),_=Math.cos(this[e(n._0x5cb66f)]),l=msfnz(this.e,c,_),d=tsfnz(this.e,this.lat2,c),f=tsfnz(this.e,this.lat0,Math[e(n._0x28b507)](this.lat0));Math[e(2376)](this.lat1-this[e(2159)])>EPSLN?this.ns=Math.log(r/l)/Math.log(o/d):this.ns=i,isNaN(this.ns)&&(this.ns=i),this.f0=r/(this.ns*Math.pow(o,this.ns)),this.rh=this.a*this.f0*Math.pow(f,this.ns),!this[e(988)]&&(this.title=e(2675))}}function forward$l(n){const e={_0x578783:2376,_0x5317a5:429,_0x4edccb:2519},t=_0x3a2b68;var i=n.x,s=n.y;Math[t(e._0x578783)](2*Math.abs(s)-Math.PI)<=EPSLN&&(s=sign(s)*(HALF_PI-2*EPSLN));var r=Math.abs(Math.abs(s)-HALF_PI),o,c;if(r>EPSLN)o=tsfnz(this.e,s,Math.sin(s)),c=this.a*this.f0*Math.pow(o,this.ns);else{if(r=s*this.ns,r<=0)return null;c=0}var _=this.ns*adjust_lon(i-this[t(e._0x5317a5)]);return n.x=this.k0*(c*Math.sin(_))+this.x0,n.y=this.k0*(this.rh-c*Math[t(e._0x4edccb)](_))+this.y0,n}function inverse$l(n){const e=_0x3a2b68;var t,i,s,r,o,c=(n.x-this.x0)/this.k0,_=this.rh-(n.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(c*c+_*_),i=1):(t=-Math.sqrt(c*c+_*_),i=-1);var l=0;if(t!==0&&(l=Math.atan2(i*c,i*_)),t!==0||this.ns>0){if(i=1/this.ns,s=Math[e(392)](t/(this.a*this.f0),i),r=phi2z(this.e,s),r===-9999)return null}else r=-HALF_PI;return o=adjust_lon(l/this.ns+this[e(429)]),n.x=o,n.y=r,n}var names$l=[_0x3a2b68(1078),"Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP",_0x3a2b68(1205),_0x3a2b68(492),"Lambert Conic Conformal (1SP)",_0x3a2b68(2487)],lcc={init:init$l,forward:forward$l,inverse:inverse$l,names:names$l};function init$k(){const n={_0x217ccd:3629,_0x20cd41:2789,_0x3a6292:3132,_0x32cbda:1461,_0x16c055:4272,_0x24ada8:1784},e=_0x3a2b68;this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),!this.lat0&&(this[e(n._0x217ccd)]=.863937979737193),!this.long0&&(this.long0=.7417649320975901-.308341501185665),!this.k0&&(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math[e(n._0x20cd41)](this.e2),this[e(3132)]=Math.sqrt(1+this.e2*Math[e(392)](Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this[e(1784)])/this.alfa),this.g=Math[e(392)]((1+this.e*Math[e(3492)](this[e(1784)]))/(1-this.e*Math[e(3492)](this.fi0)),this[e(n._0x3a6292)]*this.e/2),this.k=Math.tan(this.u0/2+this[e(n._0x32cbda)])/Math.pow(Math[e(n._0x16c055)](this[e(n._0x24ada8)]/2+this[e(1461)]),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function forward$k(n){const e={_0x10432d:3492,_0x1d066b:3132,_0xf21138:3132,_0x98017f:1215},t=_0x3a2b68;var i,s,r,o,c,_,l,d=n.x,f=n.y,g=adjust_lon(d-this.long0);return i=Math.pow((1+this.e*Math[t(e._0x10432d)](f))/(1-this.e*Math[t(3492)](f)),this[t(3132)]*this.e/2),s=2*(Math.atan(this.k*Math.pow(Math.tan(f/2+this.s45),this[t(e._0x1d066b)])/i)-this.s45),r=-g*this[t(e._0xf21138)],o=Math.asin(Math.cos(this.ad)*Math.sin(s)+Math.sin(this.ad)*Math.cos(s)*Math.cos(r)),c=Math[t(2843)](Math.cos(s)*Math.sin(r)/Math[t(2519)](o)),_=this.n*c,l=this[t(e._0x98017f)]*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math[t(392)](Math[t(4272)](o/2+this.s45),this.n),n.y=l*Math.cos(_)/1,n.x=l*Math.sin(_)/1,!this.czech&&(n.y*=-1,n.x*=-1),n}function inverse$k(n){const e={_0x5b22c1:2519,_0x4045b4:3492,_0x42097d:2843,_0x18cdbd:2519},t=_0x3a2b68;var i,s,r,o,c,_,l,d,f=n.x;n.x=n.y,n.y=f,!this.czech&&(n.y*=-1,n.x*=-1),_=Math[t(2789)](n.x*n.x+n.y*n.y),c=Math[t(1349)](n.y,n.x),o=c/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/_,1/this.n)*Math[t(4272)](this.s0/2+this.s45))-this.s45),i=Math.asin(Math[t(e._0x5b22c1)](this.ad)*Math[t(e._0x4045b4)](r)-Math.sin(this.ad)*Math.cos(r)*Math[t(2519)](o)),s=Math[t(e._0x42097d)](Math[t(e._0x18cdbd)](r)*Math.sin(o)/Math.cos(i)),n.x=this.long0-s/this.alfa,l=i,d=0;var g=0;do n.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(i/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.e/2))-this[t(1461)]),Math.abs(l-n.y)<1e-10&&(d=1),l=n.y,g+=1;while(d===0&&g<15);return g>=15?null:n}var names$k=["Krovak","krovak"],krovak={init:init$k,forward:forward$k,inverse:inverse$k,names:names$k};function mlfn(n,e,t,i,s){return n*s-e*Math.sin(2*s)+t*Math.sin(4*s)-i*Math.sin(6*s)}function e0fn(n){return 1-.25*n*(1+n/16*(3+1.25*n))}function e1fn(n){return .375*n*(1+.25*n*(1+.46875*n))}function e2fn(n){return .05859375*n*n*(1+.75*n)}function e3fn(n){return n*n*n*(35/3072)}function gN(n,e,t){var i=e*t;return n/Math.sqrt(1-i*i)}function adjust_lat(n){return Math[_0x3a2b68({_0x2477b9:2376}._0x2477b9)](n)<HALF_PI?n:n-sign(n)*Math.PI}function imlfn(n,e,t,i,s){const r={_0x3c38d:3492},o=_0x3a2b68;var c,_;c=n/e;for(var l=0;l<15;l++)if(_=(n-(e*c-t*Math[o(r._0x3c38d)](2*c)+i*Math.sin(4*c)-s*Math.sin(6*c)))/(e-2*t*Math[o(2519)](2*c)+4*i*Math.cos(4*c)-6*s*Math.cos(6*c)),c+=_,Math.abs(_)<=1e-10)return c;return NaN}function init$j(){!this.sphere&&(this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.ml0=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0))}function forward$j(n){const e={_0x293a58:3492,_0x3c0203:4272},t=_0x3a2b68;var i,s,r=n.x,o=n.y;if(r=adjust_lon(r-this.long0),this.sphere)i=this.a*Math.asin(Math.cos(o)*Math[t(e._0x293a58)](r)),s=this.a*(Math[t(1349)](Math.tan(o),Math.cos(r))-this.lat0);else{var c=Math[t(e._0x293a58)](o),_=Math.cos(o),l=gN(this.a,this.e,c),d=Math.tan(o)*Math[t(e._0x3c0203)](o),f=r*Math.cos(o),g=f*f,b=this.es*_*_/(1-this.es),C=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,o);i=l*f*(1-g*d*(1/6-(8-d+8*b)*g/120)),s=C-this.ml0+l*c/_*g*(.5+(5-d+6*b)*g/24)}return n.x=i+this.x0,n.y=s+this.y0,n}function inverse$j(n){const e=_0x3a2b68;n.x-=this.x0,n.y-=this.y0;var t=n.x/this.a,i=n.y/this.a,s,r;if(this.sphere){var o=i+this.lat0;s=Math[e(2843)](Math[e(3492)](o)*Math.cos(t)),r=Math[e(1349)](Math.tan(t),Math.cos(o))}else{var c=this.ml0/this.a+i,_=imlfn(c,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math[e(2376)](_)-HALF_PI)<=EPSLN)return n.x=this[e(429)],n.y=HALF_PI,i<0&&(n.y*=-1),n;var l=gN(this.a,this.e,Math.sin(_)),d=l*l*l/this.a/this.a*(1-this.es),f=Math.pow(Math.tan(_),2),g=t*this.a/l,b=g*g;s=_-l*Math.tan(_)/d*g*g*(.5-(1+3*f)*g*g/24),r=g*(1-b*(f/3+(1+3*f)*f*b/15))/Math.cos(_)}return n.x=adjust_lon(r+this.long0),n.y=adjust_lat(s),n}var names$j=[_0x3a2b68(3105),"Cassini_Soldner",_0x3a2b68(804)],cass={init:init$j,forward:forward$j,inverse:inverse$j,names:names$j};function qsfnz(n,e){var t;return n>1e-7?(t=n*e,(1-n*n)*(e/(1-t*t)-.5/n*Math.log((1-t)/(1+t)))):2*e}var S_POLE=1,N_POLE=2,EQUIT=3,OBLIQ=4;function init$i(){const n={_0x13d7ed:2376,_0x86f572:3629,_0x2edba1:3797,_0x46f340:1640,_0x2bfb94:1540,_0x4635b6:4316,_0x52eade:1226},e=_0x3a2b68;var t=Math[e(n._0x13d7ed)](this.lat0);if(Math.abs(t-HALF_PI)<EPSLN?this[e(1640)]=this[e(n._0x86f572)]<0?this.S_POLE:this[e(n._0x2edba1)]:Math.abs(t)<EPSLN?this[e(n._0x46f340)]=this[e(2130)]:this.mode=this.OBLIQ,this.es>0){var i;switch(this.qp=qsfnz(this.e,1),this.mmf=.5/(1-this.es),this[e(n._0x2bfb94)]=authset(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this[e(2130)]:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this[e(1052)]=.5*this.qp;break;case this[e(n._0x4635b6)]:this.rq=Math[e(2789)](.5*this.qp),i=Math.sin(this.lat0),this[e(3574)]=qsfnz(this.e,i)/this.qp,this[e(2672)]=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this[e(n._0x86f572)])/(Math.sqrt(1-this.es*i*i)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this[e(n._0x52eade)]*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math[e(2519)](this.lat0))}function forward$i(n){const e={_0x8d4307:3492,_0x5958cf:1640,_0x3d909f:2130,_0x18a3cd:613,_0x2170c0:2130,_0x53e052:1635},t=_0x3a2b68;var i,s,r,o,c,_,l,d,f,g,b=n.x,C=n.y;if(b=adjust_lon(b-this.long0),this.sphere){if(c=Math[t(e._0x8d4307)](C),g=Math.cos(C),r=Math.cos(b),this[t(e._0x5958cf)]===this.OBLIQ||this.mode===this[t(e._0x3d909f)]){if(s=this.mode===this.EQUIT?1+g*r:1+this.sinph0*c+this.cosph0*g*r,s<=EPSLN)return null;s=Math.sqrt(2/s),i=s*g*Math.sin(b),s*=this.mode===this.EQUIT?c:this[t(e._0x18a3cd)]*c-this.sinph0*g*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this[t(1640)]===this.N_POLE&&(r=-r),Math[t(2376)](C+this.lat0)<EPSLN)return null;s=FORTPI-C*.5,s=2*(this[t(1640)]===this.S_POLE?Math.cos(s):Math[t(3492)](s)),i=s*Math[t(3492)](b),s*=r}}else{switch(l=0,d=0,f=0,r=Math.cos(b),o=Math.sin(b),c=Math.sin(C),_=qsfnz(this.e,c),(this.mode===this.OBLIQ||this.mode===this[t(e._0x2170c0)])&&(l=_/this.qp,d=Math.sqrt(1-l*l)),this.mode){case this.OBLIQ:f=1+this.sinb1*l+this[t(2672)]*d*r;break;case this.EQUIT:f=1+d*r;break;case this[t(3797)]:f=HALF_PI+C,_=this.qp-_;break;case this[t(e._0x53e052)]:f=C-HALF_PI,_=this.qp+_;break}if(Math[t(2376)](f)<EPSLN)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:f=Math.sqrt(2/f),this.mode===this.OBLIQ?s=this.ymf*f*(this[t(2672)]*l-this[t(3574)]*d*r):s=(f=Math.sqrt(2/(1+d*r)))*l*this[t(1052)],i=this.xmf*f*d*o;break;case this[t(3797)]:case this.S_POLE:_>=0?(i=(f=Math.sqrt(_))*o,s=r*(this.mode===this[t(1635)]?f:-f)):i=s=0;break}}return n.x=this.a*i+this.x0,n.y=this.a*s+this.y0,n}function inverse$i(n){const e={_0x1d9100:2130,_0x2662a9:3492,_0x3c66a8:2519,_0xcabe43:1640,_0x49babb:1349,_0x4a2c6a:1540},t=_0x3a2b68;n.x-=this.x0,n.y-=this.y0;var i=n.x/this.a,s=n.y/this.a,r,o,c,_,l,d,f;if(this[t(3778)]){var g=0,b,C=0;if(b=Math[t(2789)](i*i+s*s),o=b*.5,o>1)return null;switch(o=2*Math.asin(o),(this.mode===this.OBLIQ||this.mode===this[t(e._0x1d9100)])&&(C=Math.sin(o),g=Math.cos(o)),this.mode){case this[t(e._0x1d9100)]:o=Math.abs(b)<=EPSLN?0:Math.asin(s*C/b),i*=C,s=g*b;break;case this.OBLIQ:o=Math[t(2376)](b)<=EPSLN?this.lat0:Math[t(2843)](g*this[t(460)]+s*C*this.cosph0/b),i*=C*this.cosph0,s=(g-Math[t(e._0x2662a9)](o)*this.sinph0)*b;break;case this.N_POLE:s=-s,o=HALF_PI-o;break;case this.S_POLE:o-=HALF_PI;break}r=s===0&&(this[t(1640)]===this.EQUIT||this.mode===this.OBLIQ)?0:Math[t(1349)](i,s)}else{if(f=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(i/=this.dd,s*=this.dd,d=Math.sqrt(i*i+s*s),d<EPSLN)return n.x=this.long0,n.y=this.lat0,n;_=2*Math.asin(.5*d/this.rq),c=Math[t(e._0x3c66a8)](_),i*=_=Math.sin(_),this.mode===this.OBLIQ?(f=c*this.sinb1+s*_*this.cosb1/d,l=this.qp*f,s=d*this.cosb1*c-s*this[t(3574)]*_):(f=s*_/d,l=this.qp*f,s=d*c)}else if(this[t(1640)]===this.N_POLE||this[t(e._0xcabe43)]===this.S_POLE){if(this.mode===this.N_POLE&&(s=-s),l=i*i+s*s,!l)return n.x=this.long0,n.y=this.lat0,n;f=1-l/this.qp,this.mode===this.S_POLE&&(f=-f)}r=Math[t(e._0x49babb)](i,s),o=authlat(Math.asin(f),this[t(e._0x4a2c6a)])}return n.x=adjust_lon(this.long0+r),n.y=o,n}var P00=.3333333333333333,P01=.17222222222222222,P02=.10257936507936508,P10=.06388888888888888,P11=.0664021164021164,P20=.016415012942191543;function authset(n){var e,t=[];return t[0]=n*P00,e=n*n,t[0]+=e*P01,t[1]=e*P10,e*=n,t[0]+=e*P02,t[1]+=e*P11,t[2]=e*P20,t}function authlat(n,e){const t=_0x3a2b68;var i=n+n;return n+e[0]*Math[t(3492)](i)+e[1]*Math.sin(i+i)+e[2]*Math.sin(i+i+i)}var names$i=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area",_0x3a2b68(3081)],laea={init:init$i,forward:forward$i,inverse:inverse$i,names:names$i,S_POLE,N_POLE,EQUIT,OBLIQ};function asinz(n){return Math[_0x3a2b68({_0xb06f77:2376}._0xb06f77)](n)>1&&(n=n>1?1:-1),Math.asin(n)}function init$h(){const n={_0x375d4e:2376,_0x4e4a54:2302,_0xebcb5e:660,_0x5bf3c0:1928,_0x435711:660,_0x252a15:3828,_0x44aa92:3629,_0x44d2ce:3494},e=_0x3a2b68;Math[e(n._0x375d4e)](this.lat1+this.lat2)<EPSLN||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math[e(2789)](this.es),this.sin_po=Math.sin(this[e(n._0x4e4a54)]),this[e(n._0xebcb5e)]=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this[e(455)]=msfnz(this.e3,this[e(n._0x5bf3c0)],this[e(n._0x435711)]),this[e(3276)]=qsfnz(this.e3,this.sin_po),this.sin_po=Math.sin(this[e(2159)]),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=msfnz(this.e3,this.sin_po,this[e(660)]),this[e(n._0x252a15)]=qsfnz(this.e3,this.sin_po),this.sin_po=Math[e(3492)](this[e(n._0x44aa92)]),this.cos_po=Math[e(2519)](this.lat0),this.t3=this[e(n._0x5bf3c0)],this.qs0=qsfnz(this.e3,this[e(n._0x5bf3c0)]),Math[e(2376)](this[e(n._0x4e4a54)]-this.lat2)>EPSLN?this.ns0=(this.ms1*this.ms1-this.ms2*this[e(3444)])/(this.qs2-this.qs1):this.ns0=this[e(2614)],this.c=this.ms1*this.ms1+this.ns0*this[e(3276)],this.rh=this.a*Math.sqrt(this.c-this[e(3494)]*this[e(1242)])/this[e(n._0x44d2ce)])}function forward$h(n){const e=_0x3a2b68;var t=n.x,i=n.y;this.sin_phi=Math.sin(i),this.cos_phi=Math.cos(i);var s=qsfnz(this.e3,this.sin_phi),r=this.a*Math.sqrt(this.c-this.ns0*s)/this.ns0,o=this[e(3494)]*adjust_lon(t-this.long0),c=r*Math.sin(o)+this.x0,_=this.rh-r*Math.cos(o)+this.y0;return n.x=c,n.y=_,n}function inverse$h(n){const e={_0xd60131:3778},t=_0x3a2b68;var i,s,r,o,c,_;return n.x-=this.x0,n.y=this.rh-n.y+this.y0,this[t(3494)]>=0?(i=Math.sqrt(n.x*n.x+n.y*n.y),r=1):(i=-Math[t(2789)](n.x*n.x+n.y*n.y),r=-1),o=0,i!==0&&(o=Math.atan2(r*n.x,r*n.y)),r=i*this.ns0/this.a,this[t(e._0xd60131)]?_=Math.asin((this.c-r*r)/(2*this[t(3494)])):(s=(this.c-r*r)/this[t(3494)],_=this.phi1z(this.e3,s)),c=adjust_lon(o/this.ns0+this.long0),n.x=c,n.y=_,n}function phi1z(n,e){const t={_0x464245:2376},i=_0x3a2b68;var s,r,o,c,_,l=asinz(.5*e);if(n<EPSLN)return l;for(var d=n*n,f=1;f<=25;f++)if(s=Math.sin(l),r=Math.cos(l),o=n*s,c=1-o*o,_=.5*c*c/r*(e/(1-d)-s/c+.5/n*Math.log((1-o)/(1+o))),l=l+_,Math[i(t._0x464245)](_)<=1e-7)return l;return null}var names$h=[_0x3a2b68(1725),"Albers","aea"],aea={init:init$h,forward:forward$h,inverse:inverse$h,names:names$h,phi1z};function init$g(){const n={_0x53644f:4349,_0x58097a:3629},e=_0x3a2b68;this.sin_p14=Math[e(3492)](this.lat0),this[e(n._0x53644f)]=Math.cos(this[e(n._0x58097a)]),this.infinity_dist=1e3*this.a,this.rc=1}function forward$g(n){const e={_0xae8e60:429,_0x397089:4349},t=_0x3a2b68;var i,s,r,o,c,_,l,d,f=n.x,g=n.y;return r=adjust_lon(f-this[t(e._0xae8e60)]),i=Math.sin(g),s=Math.cos(g),o=Math.cos(r),_=this.sin_p14*i+this.cos_p14*s*o,c=1,_>0||Math.abs(_)<=EPSLN?(l=this.x0+this.a*c*s*Math.sin(r)/_,d=this.y0+this.a*c*(this.cos_p14*i-this[t(3974)]*s*o)/_):(l=this.x0+this[t(2429)]*s*Math.sin(r),d=this.y0+this.infinity_dist*(this[t(e._0x397089)]*i-this.sin_p14*s*o)),n.x=l,n.y=d,n}function inverse$g(n){const e={_0x3b88f8:3974},t=_0x3a2b68;var i,s,r,o,c,_;return n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,n.x/=this.k0,n.y/=this.k0,(i=Math[t(2789)](n.x*n.x+n.y*n.y))?(o=Math.atan2(i,this.rc),s=Math.sin(o),r=Math.cos(o),_=asinz(r*this[t(e._0x3b88f8)]+n.y*s*this[t(4349)]/i),c=Math.atan2(n.x*s,i*this.cos_p14*r-n.y*this.sin_p14*s),c=adjust_lon(this.long0+c)):(_=this.phic0,c=0),n.x=c,n.y=_,n}var names$g=["gnom"],gnom={init:init$g,forward:forward$g,inverse:inverse$g,names:names$g};function iqsfnz(n,e){const t=_0x3a2b68;var i=1-(1-n*n)/(2*n)*Math.log((1-n)/(1+n));if(Math.abs(Math.abs(e)-i)<1e-6)return e<0?-1*HALF_PI:HALF_PI;for(var s=Math.asin(.5*e),r,o,c,_,l=0;l<30;l++)if(o=Math.sin(s),c=Math.cos(s),_=n*o,r=Math.pow(1-_*_,2)/(2*c)*(e/(1-n*n)-o/(1-_*_)+.5/n*Math.log((1-_)/(1+_))),s+=r,Math[t(2376)](r)<=1e-10)return s;return NaN}function init$f(){const n=_0x3a2b68;!this.sphere&&(this.k0=msfnz(this.e,Math.sin(this.lat_ts),Math[n(2519)](this.lat_ts)))}function forward$f(n){const e={_0x4c3080:429,_0x3880c9:3778,_0x443587:3492},t=_0x3a2b68;var i=n.x,s=n.y,r,o,c=adjust_lon(i-this[t(e._0x4c3080)]);if(this[t(e._0x3880c9)])r=this.x0+this.a*c*Math.cos(this.lat_ts),o=this.y0+this.a*Math[t(e._0x443587)](s)/Math.cos(this[t(3671)]);else{var _=qsfnz(this.e,Math[t(3492)](s));r=this.x0+this.a*this.k0*c,o=this.y0+this.a*_*.5/this.k0}return n.x=r,n.y=o,n}function inverse$f(n){n.x-=this.x0,n.y-=this.y0;var e,t;return this.sphere?(e=adjust_lon(this.long0+n.x/this.a/Math.cos(this.lat_ts)),t=Math.asin(n.y/this.a*Math.cos(this.lat_ts))):(t=iqsfnz(this.e,2*n.y*this.k0/this.a),e=adjust_lon(this.long0+n.x/(this.a*this.k0))),n.x=e,n.y=t,n}var names$f=["cea"],cea={init:init$f,forward:forward$f,inverse:inverse$f,names:names$f};function init$e(){const n={_0x764df9:3629,_0x80f830:3671},e=_0x3a2b68;this.x0=this.x0||0,this.y0=this.y0||0,this[e(n._0x764df9)]=this[e(3629)]||0,this.long0=this.long0||0,this.lat_ts=this[e(n._0x80f830)]||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math[e(2519)](this.lat_ts)}function forward$e(n){const e=_0x3a2b68;var t=n.x,i=n.y,s=adjust_lon(t-this.long0),r=adjust_lat(i-this[e(3629)]);return n.x=this.x0+this.a*s*this.rc,n.y=this.y0+this.a*r,n}function inverse$e(n){var e=n.x,t=n.y;return n.x=adjust_lon(this.long0+(e-this.x0)/(this.a*this.rc)),n.y=adjust_lat(this.lat0+(t-this.y0)/this.a),n}var names$e=[_0x3a2b68(504),"Equidistant_Cylindrical",_0x3a2b68(1114)],eqc={init:init$e,forward:forward$e,inverse:inverse$e,names:names$e},MAX_ITER$1=20;function init$d(){const n={_0x452ab0:392},e=_0x3a2b68;this.temp=this.b/this.a,this.es=1-Math[e(n._0x452ab0)](this.temp,2),this.e=Math.sqrt(this.es),this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this[e(3171)]=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0)}function forward$d(n){const e={_0x4d40fc:4272},t=_0x3a2b68;var i=n.x,s=n.y,r,o,c,_=adjust_lon(i-this.long0);if(c=_*Math.sin(s),this.sphere)Math.abs(s)<=EPSLN?(r=this.a*_,o=-1*this.a*this[t(3629)]):(r=this.a*Math.sin(c)/Math[t(e._0x4d40fc)](s),o=this.a*(adjust_lat(s-this.lat0)+(1-Math.cos(c))/Math.tan(s)));else if(Math.abs(s)<=EPSLN)r=this.a*_,o=-1*this[t(3171)];else{var l=gN(this.a,this.e,Math.sin(s))/Math.tan(s);r=l*Math.sin(c),o=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,s)-this.ml0+l*(1-Math.cos(c))}return n.x=r+this.x0,n.y=o+this.y0,n}function inverse$d(n){const e={_0x36451c:4272,_0x476c94:2519,_0xcc07d:2376},t=_0x3a2b68;var i,s,r,o,c,_,l,d,f;if(r=n.x-this.x0,o=n.y-this.y0,this.sphere)if(Math.abs(o+this.a*this.lat0)<=EPSLN)i=adjust_lon(r/this.a+this.long0),s=0;else{_=this.lat0+o/this.a,l=r*r/this.a/this.a+_*_,d=_;var g;for(c=MAX_ITER$1;c;--c)if(g=Math.tan(d),f=-1*(_*(d*g+1)-d-.5*(d*d+l)*g)/((d-_)/g-1),d+=f,Math.abs(f)<=EPSLN){s=d;break}i=adjust_lon(this.long0+Math.asin(r*Math[t(e._0x36451c)](d)/this.a)/Math.sin(s))}else if(Math.abs(o+this.ml0)<=EPSLN)s=0,i=adjust_lon(this.long0+r/this.a);else{_=(this.ml0+o)/this.a,l=r*r/this.a/this.a+_*_,d=_;var b,C,P,S,L;for(c=MAX_ITER$1;c;--c)if(L=this.e*Math[t(3492)](d),b=Math.sqrt(1-L*L)*Math.tan(d),C=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,d),P=this.e0-2*this.e1*Math[t(e._0x476c94)](2*d)+4*this.e2*Math.cos(4*d)-6*this.e3*Math.cos(6*d),S=C/this.a,f=(_*(b*S+1)-S-.5*b*(S*S+l))/(this.es*Math[t(3492)](2*d)*(S*S+l-2*_*S)/(4*b)+(_-S)*(b*P-2/Math.sin(2*d))-P),d-=f,Math[t(e._0xcc07d)](f)<=EPSLN){s=d;break}b=Math.sqrt(1-this.es*Math[t(392)](Math.sin(s),2))*Math.tan(s),i=adjust_lon(this.long0+Math.asin(r*b/this.a)/Math.sin(s))}return n.x=i,n.y=s,n}var names$d=["Polyconic",_0x3a2b68(2717)],poly={init:init$d,forward:forward$d,inverse:inverse$d,names:names$d};function init$c(){const n=_0x3a2b68;this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this[n(1684)]=[],this[n(516)]=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this[n(516)][3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this[n(2530)]=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this[n(2530)][2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function forward$c(n){const e={_0x374af1:429},t=_0x3a2b68;var i,s=n.x,r=n.y,o=r-this.lat0,c=s-this[t(e._0x374af1)],_=o/SEC_TO_RAD*1e-5,l=c,d=1,f=0;for(i=1;i<=10;i++)d=d*_,f=f+this.A[i]*d;var g=f,b=l,C=1,P=0,S,L,E=0,M=0;for(i=1;i<=6;i++)S=C*g-P*b,L=P*g+C*b,C=S,P=L,E=E+this.B_re[i]*C-this.B_im[i]*P,M=M+this.B_im[i]*C+this.B_re[i]*P;return n.x=M*this.a+this.x0,n.y=E*this.a+this.y0,n}function inverse$c(n){const e=_0x3a2b68;var t,i=n.x,s=n.y,r=i-this.x0,o=s-this.y0,c=o/this.a,_=r/this.a,l=1,d=0,f,g,b=0,C=0;for(t=1;t<=6;t++)f=l*c-d*_,g=d*c+l*_,l=f,d=g,b=b+this[e(2530)][t]*l-this.C_im[t]*d,C=C+this[e(3066)][t]*l+this.C_re[t]*d;for(var P=0;P<this.iterations;P++){var S=b,L=C,E,M,D=c,R=_;for(t=2;t<=6;t++)E=S*b-L*C,M=L*b+S*C,S=E,L=M,D=D+(t-1)*(this.B_re[t]*S-this.B_im[t]*L),R=R+(t-1)*(this.B_im[t]*S+this.B_re[t]*L);S=1,L=0;var k=this.B_re[1],N=this.B_im[1];for(t=2;t<=6;t++)E=S*b-L*C,M=L*b+S*C,S=E,L=M,k=k+t*(this.B_re[t]*S-this.B_im[t]*L),N=N+t*(this.B_im[t]*S+this.B_re[t]*L);var $=k*k+N*N;b=(D*k+R*N)/$,C=(R*k-D*N)/$}var B=b,F=C,z=1,Y=0;for(t=1;t<=9;t++)z=z*B,Y=Y+this.D[t]*z;var J=this[e(3629)]+Y*SEC_TO_RAD*1e5,q=this.long0+F;return n.x=q,n.y=J,n}var names$c=["New_Zealand_Map_Grid","nzmg"],nzmg={init:init$c,forward:forward$c,inverse:inverse$c,names:names$c};function init$b(){}function forward$b(n){var e=n.x,t=n.y,i=adjust_lon(e-this.long0),s=this.x0+this.a*i,r=this.y0+this.a*Math.log(Math.tan(Math.PI/4+t/2.5))*1.25;return n.x=s,n.y=r,n}function inverse$b(n){const e={_0x674038:429,_0x32a7c2:3375},t=_0x3a2b68;n.x-=this.x0,n.y-=this.y0;var i=adjust_lon(this[t(e._0x674038)]+n.x/this.a),s=2.5*(Math[t(e._0x32a7c2)](Math.exp(.8*n.y/this.a))-Math.PI/4);return n.x=i,n.y=s,n}var names$b=["Miller_Cylindrical","mill"],mill={init:init$b,forward:forward$b,inverse:inverse$b,names:names$b},MAX_ITER=20;function init$a(){const n={_0x3491a7:1160,_0x8ab4d:1614},e=_0x3a2b68;this.sphere?(this.n=1,this.m=0,this.es=0,this[e(n._0x3491a7)]=Math.sqrt((this.m+1)/this.n),this[e(n._0x8ab4d)]=this.C_y/(this.m+1)):this.en=pj_enfn(this.es)}function forward$a(n){const e={_0x46ede6:3778,_0x40a8f7:3492,_0x5abdfb:2519},t=_0x3a2b68;var i,s,r=n.x,o=n.y;if(r=adjust_lon(r-this.long0),this[t(e._0x46ede6)]){if(!this.m)o=this.n!==1?Math.asin(this.n*Math[t(e._0x40a8f7)](o)):o;else for(var c=this.n*Math.sin(o),_=MAX_ITER;_;--_){var l=(this.m*o+Math.sin(o)-c)/(this.m+Math[t(e._0x5abdfb)](o));if(o-=l,Math.abs(l)<EPSLN)break}i=this.a*this.C_x*r*(this.m+Math[t(2519)](o)),s=this.a*this[t(1160)]*o}else{var d=Math.sin(o),f=Math.cos(o);s=this.a*pj_mlfn(o,d,f,this.en),i=this.a*r*f/Math[t(2789)](1-this.es*d*d)}return n.x=i,n.y=s,n}function inverse$a(n){const e={_0x59d77e:429,_0x3dadf6:2789,_0x48fa43:2519},t=_0x3a2b68;var i,s,r,o;return n.x-=this.x0,r=n.x/this.a,n.y-=this.y0,i=n.y/this.a,this.sphere?(i/=this.C_y,r=r/(this.C_x*(this.m+Math.cos(i))),this.m?i=asinz((this.m*i+Math.sin(i))/this.n):this.n!==1&&(i=asinz(Math.sin(i)/this.n)),r=adjust_lon(r+this[t(429)]),i=adjust_lat(i)):(i=pj_inv_mlfn(n.y/this.a,this.es,this.en),o=Math.abs(i),o<HALF_PI?(o=Math.sin(i),s=this[t(e._0x59d77e)]+n.x*Math[t(e._0x3dadf6)](1-this.es*o*o)/(this.a*Math[t(e._0x48fa43)](i)),r=adjust_lon(s)):o-EPSLN<HALF_PI&&(r=this[t(429)])),n.x=r,n.y=i,n}var names$a=["Sinusoidal","sinu"],sinu={init:init$a,forward:forward$a,inverse:inverse$a,names:names$a};function init$9(){}function forward$9(n){const e={_0x48fd31:429,_0x4efec7:3492},t=_0x3a2b68;for(var i=n.x,s=n.y,r=adjust_lon(i-this[t(e._0x48fd31)]),o=s,c=Math.PI*Math[t(3492)](s);[];){var _=-(o+Math[t(e._0x4efec7)](o)-c)/(1+Math.cos(o));if(o+=_,Math.abs(_)<EPSLN)break}o/=2,Math.PI/2-Math.abs(s)<EPSLN&&(r=0);var l=.900316316158*this.a*r*Math.cos(o)+this.x0,d=1.4142135623731*this.a*Math[t(3492)](o)+this.y0;return n.x=l,n.y=d,n}function inverse$9(n){const e={_0x450579:2376,_0x5c584a:2843,_0x4bb9c2:429,_0x2a1ee4:3492},t=_0x3a2b68;var i,s;n.x-=this.x0,n.y-=this.y0,s=n.y/(1.4142135623731*this.a),Math[t(e._0x450579)](s)>.999999999999&&(s=.999999999999),i=Math[t(e._0x5c584a)](s);var r=adjust_lon(this[t(e._0x4bb9c2)]+n.x/(.900316316158*this.a*Math.cos(i)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),s=(2*i+Math[t(e._0x2a1ee4)](2*i))/Math.PI,Math[t(2376)](s)>1&&(s=1);var o=Math[t(e._0x5c584a)](s);return n.x=r,n.y=o,n}var names$9=["Mollweide",_0x3a2b68(1258)],moll={init:init$9,forward:forward$9,inverse:inverse$9,names:names$9};function init$8(){const n={_0x21d582:2159,_0x1d16a4:2789,_0x5e4bf0:1842,_0x10cb9c:1960,_0x571be1:2302,_0x2072b7:2159,_0x1b979c:2159,_0x3fb072:3444,_0x1138af:4118},e=_0x3a2b68;Math.abs(this[e(2302)]+this[e(n._0x21d582)])<EPSLN||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math[e(392)](this.temp,2),this.e=Math[e(n._0x1d16a4)](this.es),this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this[e(n._0x5e4bf0)]=Math.sin(this.lat1),this[e(n._0x10cb9c)]=Math.cos(this.lat1),this.ms1=msfnz(this.e,this[e(n._0x5e4bf0)],this[e(1960)]),this.ml1=mlfn(this.e0,this.e1,this.e2,this.e3,this[e(n._0x571be1)]),Math.abs(this.lat1-this[e(n._0x2072b7)])<EPSLN?this.ns=this.sinphi:(this.sinphi=Math.sin(this[e(n._0x1b979c)]),this.cosphi=Math[e(2519)](this.lat2),this[e(n._0x3fb072)]=msfnz(this.e,this.sinphi,this.cosphi),this.ml2=mlfn(this.e0,this.e1,this.e2,this.e3,this[e(2159)]),this.ns=(this.ms1-this[e(n._0x3fb072)])/(this.ml2-this.ml1)),this.g=this[e(n._0x1138af)]+this.ms1/this.ns,this.ml0=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this[e(3171)]))}function forward$8(n){const e={_0x265182:3778,_0x2ac51b:2519},t=_0x3a2b68;var i=n.x,s=n.y,r;if(this[t(e._0x265182)])r=this.a*(this.g-s);else{var o=mlfn(this.e0,this.e1,this.e2,this.e3,s);r=this.a*(this.g-o)}var c=this.ns*adjust_lon(i-this.long0),_=this.x0+r*Math.sin(c),l=this.y0+this.rh-r*Math[t(e._0x2ac51b)](c);return n.x=_,n.y=l,n}function inverse$8(n){const e=_0x3a2b68;n.x-=this.x0,n.y=this.rh-n.y+this.y0;var t,i,s,r;this.ns>=0?(i=Math.sqrt(n.x*n.x+n.y*n.y),t=1):(i=-Math.sqrt(n.x*n.x+n.y*n.y),t=-1);var o=0;if(i!==0&&(o=Math[e(1349)](t*n.x,t*n.y)),this.sphere)return r=adjust_lon(this.long0+o/this.ns),s=adjust_lat(this.g-i/this.a),n.x=r,n.y=s,n;var c=this.g-i/this.a;return s=imlfn(c,this.e0,this.e1,this.e2,this.e3),r=adjust_lon(this.long0+o/this.ns),n.x=r,n.y=s,n}var names$8=[_0x3a2b68(1232),"eqdc"],eqdc={init:init$8,forward:forward$8,inverse:inverse$8,names:names$8};function init$7(){this.R=this.a}function forward$7(n){const e={_0x4856c6:2376,_0x53ce7d:4272},t=_0x3a2b68;var i=n.x,s=n.y,r=adjust_lon(i-this.long0),o,c;Math.abs(s)<=EPSLN&&(o=this.x0+this.R*r,c=this.y0);var _=asinz(2*Math[t(e._0x4856c6)](s/Math.PI));(Math.abs(r)<=EPSLN||Math.abs(Math[t(e._0x4856c6)](s)-HALF_PI)<=EPSLN)&&(o=this.x0,s>=0?c=this.y0+Math.PI*this.R*Math[t(4272)](.5*_):c=this.y0+Math.PI*this.R*-Math[t(e._0x53ce7d)](.5*_));var l=.5*Math.abs(Math.PI/r-r/Math.PI),d=l*l,f=Math.sin(_),g=Math[t(2519)](_),b=g/(f+g-1),C=b*b,P=b*(2/f-1),S=P*P,L=Math.PI*this.R*(l*(b-S)+Math.sqrt(d*(b-S)*(b-S)-(S+d)*(C-S)))/(S+d);r<0&&(L=-L),o=this.x0+L;var E=d+b;return L=Math.PI*this.R*(P*E-l*Math.sqrt((S+d)*(d+1)-E*E))/(S+d),s>=0?c=this.y0+L:c=this.y0-L,n.x=o,n.y=c,n}function inverse$7(n){const e={_0x532b0b:2376,_0x6ca224:429},t=_0x3a2b68;var i,s,r,o,c,_,l,d,f,g,b,C,P;return n.x-=this.x0,n.y-=this.y0,b=Math.PI*this.R,r=n.x/b,o=n.y/b,c=r*r+o*o,_=-Math[t(e._0x532b0b)](o)*(1+c),l=_-2*o*o+r*r,d=-2*_+1+2*o*o+c*c,P=o*o/d+(2*l*l*l/d/d/d-9*_*l/d/d)/27,f=(_-l*l/3/d)/d,g=2*Math.sqrt(-f/3),b=3*P/f/g,Math.abs(b)>1&&(b>=0?b=1:b=-1),C=Math.acos(b)/3,n.y>=0?s=(-g*Math.cos(C+Math.PI/3)-l/3/d)*Math.PI:s=-(-g*Math.cos(C+Math.PI/3)-l/3/d)*Math.PI,Math.abs(r)<EPSLN?i=this[t(e._0x6ca224)]:i=adjust_lon(this.long0+Math.PI*(c-1+Math[t(2789)](1+2*(r*r-o*o)+c*c))/2/r),n.x=i,n.y=s,n}var names$7=["Van_der_Grinten_I",_0x3a2b68(2140),"vandg"],vandg={init:init$7,forward:forward$7,inverse:inverse$7,names:names$7};function init$6(){const n={_0x41c0c7:1118,_0x3959ff:3629},e=_0x3a2b68;this[e(n._0x41c0c7)]=Math.sin(this[e(n._0x3959ff)]),this[e(2319)]=Math.cos(this.lat0)}function forward$6(n){const e={_0x3f90c7:3492,_0x2481f1:1118,_0x948104:666,_0x5c9784:2376,_0x12f3cf:2519,_0x29dc06:3492},t=_0x3a2b68;var i=n.x,s=n.y,r=Math[t(e._0x3f90c7)](n.y),o=Math.cos(n.y),c=adjust_lon(i-this.long0),_,l,d,f,g,b,C,P,S,L,E,M,D,R,k,N,$,B,F,z,Y,J,q;return this[t(3778)]?Math.abs(this.sin_p12-1)<=EPSLN?(n.x=this.x0+this.a*(HALF_PI-s)*Math.sin(c),n.y=this.y0-this.a*(HALF_PI-s)*Math.cos(c),n):Math.abs(this[t(e._0x2481f1)]+1)<=EPSLN?(n.x=this.x0+this.a*(HALF_PI+s)*Math.sin(c),n.y=this.y0+this.a*(HALF_PI+s)*Math[t(2519)](c),n):(B=this.sin_p12*r+this.cos_p12*o*Math.cos(c),N=Math[t(e._0x948104)](B),$=N?N/Math.sin(N):1,n.x=this.x0+this.a*$*o*Math.sin(c),n.y=this.y0+this.a*$*(this.cos_p12*r-this.sin_p12*o*Math[t(2519)](c)),n):(_=e0fn(this.es),l=e1fn(this.es),d=e2fn(this.es),f=e3fn(this.es),Math[t(e._0x5c9784)](this.sin_p12-1)<=EPSLN?(g=this.a*mlfn(_,l,d,f,HALF_PI),b=this.a*mlfn(_,l,d,f,s),n.x=this.x0+(g-b)*Math[t(e._0x3f90c7)](c),n.y=this.y0-(g-b)*Math[t(e._0x12f3cf)](c),n):Math.abs(this.sin_p12+1)<=EPSLN?(g=this.a*mlfn(_,l,d,f,HALF_PI),b=this.a*mlfn(_,l,d,f,s),n.x=this.x0+(g+b)*Math.sin(c),n.y=this.y0+(g+b)*Math.cos(c),n):(C=r/o,P=gN(this.a,this.e,this.sin_p12),S=gN(this.a,this.e,r),L=Math.atan((1-this.es)*C+this.es*P*this.sin_p12/(S*o)),E=Math.atan2(Math[t(e._0x29dc06)](c),this.cos_p12*Math.tan(L)-this.sin_p12*Math.cos(c)),E===0?F=Math.asin(this.cos_p12*Math[t(3492)](L)-this[t(1118)]*Math.cos(L)):Math.abs(Math.abs(E)-Math.PI)<=EPSLN?F=-Math.asin(this[t(2319)]*Math.sin(L)-this.sin_p12*Math.cos(L)):F=Math.asin(Math.sin(c)*Math.cos(L)/Math.sin(E)),M=this.e*this.sin_p12/Math.sqrt(1-this.es),D=this.e*this.cos_p12*Math.cos(E)/Math.sqrt(1-this.es),R=M*D,k=D*D,z=F*F,Y=z*F,J=Y*F,q=J*F,N=P*F*(1-z*k*(1-k)/6+Y/8*R*(1-2*k)+J/120*(k*(4-7*k)-3*M*M*(1-7*k))-q/48*R),n.x=this.x0+N*Math.sin(E),n.y=this.y0+N*Math.cos(E),n))}function inverse$6(n){const e={_0x79192a:2376,_0x2e6b1b:3629,_0x50ee8c:2319,_0x38c817:1118,_0x374808:3492,_0x16522b:1118,_0x2efb2e:4272},t=_0x3a2b68;n.x-=this.x0,n.y-=this.y0;var i,s,r,o,c,_,l,d,f,g,b,C,P,S,L,E,M,D,R,k,N,$,B,F;return this[t(3778)]?(i=Math[t(2789)](n.x*n.x+n.y*n.y),i>2*HALF_PI*this.a?void 0:(s=i/this.a,r=Math.sin(s),o=Math[t(2519)](s),c=this.long0,Math.abs(i)<=EPSLN?_=this.lat0:(_=asinz(o*this[t(1118)]+n.y*r*this[t(2319)]/i),l=Math.abs(this.lat0)-HALF_PI,Math[t(e._0x79192a)](l)<=EPSLN?this[t(e._0x2e6b1b)]>=0?c=adjust_lon(this.long0+Math.atan2(n.x,-n.y)):c=adjust_lon(this.long0-Math[t(1349)](-n.x,n.y)):c=adjust_lon(this[t(429)]+Math.atan2(n.x*r,i*this[t(e._0x50ee8c)]*o-n.y*this.sin_p12*r))),n.x=c,n.y=_,n)):(d=e0fn(this.es),f=e1fn(this.es),g=e2fn(this.es),b=e3fn(this.es),Math[t(2376)](this.sin_p12-1)<=EPSLN?(C=this.a*mlfn(d,f,g,b,HALF_PI),i=Math.sqrt(n.x*n.x+n.y*n.y),P=C-i,_=imlfn(P/this.a,d,f,g,b),c=adjust_lon(this[t(429)]+Math.atan2(n.x,-1*n.y)),n.x=c,n.y=_,n):Math[t(2376)](this[t(e._0x38c817)]+1)<=EPSLN?(C=this.a*mlfn(d,f,g,b,HALF_PI),i=Math.sqrt(n.x*n.x+n.y*n.y),P=i-C,_=imlfn(P/this.a,d,f,g,b),c=adjust_lon(this.long0+Math.atan2(n.x,n.y)),n.x=c,n.y=_,n):(i=Math.sqrt(n.x*n.x+n.y*n.y),E=Math.atan2(n.x,n.y),S=gN(this.a,this.e,this.sin_p12),M=Math.cos(E),D=this.e*this.cos_p12*M,R=-D*D/(1-this.es),k=3*this.es*(1-R)*this.sin_p12*this.cos_p12*M/(1-this.es),N=i/S,$=N-R*(1+R)*Math.pow(N,3)/6-k*(1+3*R)*Math.pow(N,4)/24,B=1-R*$*$/2-N*$*$*$/6,L=Math[t(2843)](this.sin_p12*Math.cos($)+this[t(2319)]*Math.sin($)*M),c=adjust_lon(this[t(429)]+Math.asin(Math[t(e._0x374808)](E)*Math.sin($)/Math.cos(L))),F=Math.sin(L),_=Math.atan2((F-this.es*B*this[t(e._0x16522b)])*Math[t(e._0x2efb2e)](L),F*(1-this.es)),n.x=c,n.y=_,n))}var names$6=["Azimuthal_Equidistant","aeqd"],aeqd={init:init$6,forward:forward$6,inverse:inverse$6,names:names$6};function init$5(){const n=_0x3a2b68;this.sin_p14=Math[n(3492)](this.lat0),this.cos_p14=Math.cos(this.lat0)}function forward$5(n){const e={_0x116404:3492},t=_0x3a2b68;var i,s,r,o,c,_,l,d,f=n.x,g=n.y;return r=adjust_lon(f-this.long0),i=Math[t(3492)](g),s=Math.cos(g),o=Math.cos(r),_=this.sin_p14*i+this.cos_p14*s*o,c=1,(_>0||Math.abs(_)<=EPSLN)&&(l=this.a*c*s*Math[t(e._0x116404)](r),d=this.y0+this.a*c*(this.cos_p14*i-this.sin_p14*s*o)),n.x=l,n.y=d,n}function inverse$5(n){const e={_0x3a4c2d:429,_0x1f7e95:2376,_0x19c43f:3629},t=_0x3a2b68;var i,s,r,o,c,_,l;return n.x-=this.x0,n.y-=this.y0,i=Math[t(2789)](n.x*n.x+n.y*n.y),s=asinz(i/this.a),r=Math.sin(s),o=Math.cos(s),_=this[t(e._0x3a4c2d)],Math[t(e._0x1f7e95)](i)<=EPSLN?(l=this[t(3629)],n.x=_,n.y=l,n):(l=asinz(o*this.sin_p14+n.y*r*this.cos_p14/i),c=Math[t(e._0x1f7e95)](this[t(e._0x19c43f)])-HALF_PI,Math[t(2376)](c)<=EPSLN?(this.lat0>=0?_=adjust_lon(this.long0+Math.atan2(n.x,-n.y)):_=adjust_lon(this[t(429)]-Math.atan2(-n.x,n.y)),n.x=_,n.y=l,n):(_=adjust_lon(this.long0+Math[t(1349)](n.x*r,i*this.cos_p14*o-n.y*this.sin_p14*r)),n.x=_,n.y=l,n))}var names$5=[_0x3a2b68(1418)],ortho={init:init$5,forward:forward$5,inverse:inverse$5,names:names$5},FACE_ENUM={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},AREA_ENUM={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function init$4(){const n={_0x13db75:3629,_0x40cfea:3671,_0x3503ca:429,_0x598238:1511},e=_0x3a2b68;this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this[e(n._0x13db75)]||0,this.long0=this.long0||0,this[e(n._0x40cfea)]=this.lat_ts||0,this.title=this.title||e(664),this.lat0>=HALF_PI-FORTPI/2?this.face=FACE_ENUM[e(2245)]:this.lat0<=-(HALF_PI-FORTPI/2)?this.face=FACE_ENUM.BOTTOM:Math.abs(this[e(429)])<=FORTPI?this.face=FACE_ENUM.FRONT:Math.abs(this.long0)<=HALF_PI+FORTPI?this.face=this[e(n._0x3503ca)]>0?FACE_ENUM[e(n._0x598238)]:FACE_ENUM.LEFT:this.face=FACE_ENUM.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this[e(2090)]*this.one_minus_f)}function forward$4(n){const e={_0xe26d9c:3375,_0x4b4dbd:1607,_0x23d4c2:1199,_0x1a8073:1581,_0x11dcdc:1199,_0x15cb6f:1408,_0x1101f8:3492,_0x118550:2789,_0x22e624:2519},t=_0x3a2b68;var i={x:0,y:0},s,r,o,c,_,l,d={value:0};if(n.x-=this.long0,this.es!==0?s=Math[t(e._0xe26d9c)](this[t(e._0x4b4dbd)]*Math.tan(n.y)):s=n.y,r=n.x,this.face===FACE_ENUM.TOP)c=HALF_PI-s,r>=FORTPI&&r<=HALF_PI+FORTPI?(d.value=AREA_ENUM.AREA_0,o=r-HALF_PI):r>HALF_PI+FORTPI||r<=-(HALF_PI+FORTPI)?(d[t(2251)]=AREA_ENUM[t(1437)],o=r>0?r-SPI:r+SPI):r>-(HALF_PI+FORTPI)&&r<=-FORTPI?(d.value=AREA_ENUM[t(3440)],o=r+HALF_PI):(d[t(2251)]=AREA_ENUM.AREA_3,o=r);else if(this.face===FACE_ENUM.BOTTOM)c=HALF_PI+s,r>=FORTPI&&r<=HALF_PI+FORTPI?(d.value=AREA_ENUM.AREA_0,o=-r+HALF_PI):r<FORTPI&&r>=-FORTPI?(d.value=AREA_ENUM.AREA_1,o=-r):r<-FORTPI&&r>=-(HALF_PI+FORTPI)?(d[t(2251)]=AREA_ENUM[t(3440)],o=-r-HALF_PI):(d[t(2251)]=AREA_ENUM.AREA_3,o=r>0?-r+SPI:-r-SPI);else{var f,g,b,C,P,S,L;this.face===FACE_ENUM.RIGHT?r=qsc_shift_lon_origin(r,+HALF_PI):this[t(e._0x23d4c2)]===FACE_ENUM.BACK?r=qsc_shift_lon_origin(r,+SPI):this.face===FACE_ENUM.LEFT&&(r=qsc_shift_lon_origin(r,-HALF_PI)),C=Math.sin(s),P=Math[t(2519)](s),S=Math.sin(r),L=Math[t(2519)](r),f=P*L,g=P*S,b=C,this.face===FACE_ENUM.FRONT?(c=Math.acos(f),o=qsc_fwd_equat_face_theta(c,b,g,d)):this.face===FACE_ENUM.RIGHT?(c=Math.acos(g),o=qsc_fwd_equat_face_theta(c,b,-f,d)):this.face===FACE_ENUM[t(e._0x1a8073)]?(c=Math.acos(-f),o=qsc_fwd_equat_face_theta(c,b,-g,d)):this[t(e._0x11dcdc)]===FACE_ENUM[t(e._0x15cb6f)]?(c=Math.acos(-g),o=qsc_fwd_equat_face_theta(c,b,f,d)):(c=o=0,d.value=AREA_ENUM[t(3679)])}return l=Math.atan(12/SPI*(o+Math.acos(Math[t(e._0x1101f8)](o)*Math.cos(FORTPI))-HALF_PI)),_=Math[t(e._0x118550)]((1-Math.cos(c))/(Math.cos(l)*Math.cos(l))/(1-Math.cos(Math[t(3375)](1/Math[t(2519)](o))))),d.value===AREA_ENUM[t(1437)]?l+=HALF_PI:d.value===AREA_ENUM.AREA_2?l+=SPI:d.value===AREA_ENUM.AREA_3&&(l+=1.5*SPI),i.x=_*Math[t(e._0x22e624)](l),i.y=_*Math[t(e._0x1101f8)](l),i.x=i.x*this.a+this.x0,i.y=i.y*this.a+this.y0,n.x=i.x,n.y=i.y,n}function inverse$4(n){const e={_0x20e16b:1349,_0x1a15a5:1437,_0x400ca2:2251,_0x3757de:3375,_0x3a073d:3679,_0x2e03cc:1199,_0x24a84d:2251,_0x12211d:1437,_0x380919:4315,_0xa6538e:1349,_0x3e9751:584,_0x27ea05:584,_0x1f5d8c:2090,_0x30a5f0:3576},t=_0x3a2b68;var i={lam:0,phi:0},s,r,o,c,_,l,d,f,g,b={value:0};if(n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,r=Math.atan(Math.sqrt(n.x*n.x+n.y*n.y)),s=Math[t(e._0x20e16b)](n.y,n.x),n.x>=0&&n.x>=Math[t(2376)](n.y)?b.value=AREA_ENUM.AREA_0:n.y>=0&&n.y>=Math.abs(n.x)?(b.value=AREA_ENUM[t(e._0x1a15a5)],s-=HALF_PI):n.x<0&&-n.x>=Math.abs(n.y)?(b[t(e._0x400ca2)]=AREA_ENUM.AREA_2,s=s<0?s+SPI:s-SPI):(b[t(e._0x400ca2)]=AREA_ENUM[t(4315)],s+=HALF_PI),g=SPI/12*Math[t(4272)](s),_=Math.sin(g)/(Math.cos(g)-1/Math.sqrt(2)),l=Math[t(e._0x3757de)](_),o=Math.cos(s),c=Math.tan(r),d=1-o*o*c*c*(1-Math.cos(Math.atan(1/Math.cos(l)))),d<-1?d=-1:d>1&&(d=1),this.face===FACE_ENUM[t(2245)])f=Math.acos(d),i.phi=HALF_PI-f,b.value===AREA_ENUM[t(e._0x3a073d)]?i.lam=l+HALF_PI:b[t(2251)]===AREA_ENUM.AREA_1?i.lam=l<0?l+SPI:l-SPI:b.value===AREA_ENUM.AREA_2?i.lam=l-HALF_PI:i.lam=l;else if(this[t(e._0x2e03cc)]===FACE_ENUM[t(3795)])f=Math.acos(d),i.phi=f-HALF_PI,b.value===AREA_ENUM[t(e._0x3a073d)]?i.lam=-l+HALF_PI:b[t(e._0x24a84d)]===AREA_ENUM[t(e._0x12211d)]?i.lam=-l:b.value===AREA_ENUM[t(3440)]?i.lam=-l-HALF_PI:i.lam=l<0?-l-SPI:-l+SPI;else{var C,P,S;C=d,g=C*C,g>=1?S=0:S=Math.sqrt(1-g)*Math.sin(l),g+=S*S,g>=1?P=0:P=Math.sqrt(1-g),b.value===AREA_ENUM.AREA_1?(g=P,P=-S,S=g):b.value===AREA_ENUM.AREA_2?(P=-P,S=-S):b[t(2251)]===AREA_ENUM[t(e._0x380919)]&&(g=P,P=S,S=-g),this[t(1199)]===FACE_ENUM.RIGHT?(g=C,C=-P,P=g):this.face===FACE_ENUM[t(1581)]?(C=-C,P=-P):this[t(e._0x2e03cc)]===FACE_ENUM.LEFT&&(g=C,C=P,P=-g),i.phi=Math.acos(-S)-HALF_PI,i.lam=Math[t(e._0xa6538e)](P,C),this.face===FACE_ENUM.RIGHT?i[t(584)]=qsc_shift_lon_origin(i.lam,-HALF_PI):this.face===FACE_ENUM.BACK?i[t(e._0x3e9751)]=qsc_shift_lon_origin(i.lam,-SPI):this.face===FACE_ENUM.LEFT&&(i[t(584)]=qsc_shift_lon_origin(i[t(e._0x27ea05)],+HALF_PI))}if(this.es!==0){var L,E,M;L=i.phi<0?1:0,E=Math.tan(i.phi),M=this.b/Math[t(2789)](E*E+this[t(1607)]),i.phi=Math.atan(Math.sqrt(this.a*this.a-M*M)/(this[t(e._0x1f5d8c)]*M)),L&&(i.phi=-i.phi)}return i[t(e._0x3e9751)]+=this.long0,n.x=i.lam,n.y=i[t(e._0x30a5f0)],n}function qsc_fwd_equat_face_theta(n,e,t,i){const s={_0x157a23:3679},r=_0x3a2b68;var o;return n<EPSLN?(i.value=AREA_ENUM[r(3679)],o=0):(o=Math.atan2(e,t),Math.abs(o)<=FORTPI?i.value=AREA_ENUM[r(s._0x157a23)]:o>FORTPI&&o<=HALF_PI+FORTPI?(i.value=AREA_ENUM.AREA_1,o-=HALF_PI):o>HALF_PI+FORTPI||o<=-(HALF_PI+FORTPI)?(i.value=AREA_ENUM.AREA_2,o=o>=0?o-SPI:o+SPI):(i.value=AREA_ENUM.AREA_3,o+=HALF_PI)),o}function qsc_shift_lon_origin(n,e){var t=n+e;return t<-SPI?t+=TWO_PI:t>+SPI&&(t-=TWO_PI),t}var names$4=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"],qsc={init:init$4,forward:forward$4,inverse:inverse$4,names:names$4},COEFS_X=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],COEFS_Y=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],FXC=.8487,FYC=1.3523,C1=R2D/5,RC1=1/C1,NODES=18,poly3_val=function(n,e){return n[0]+e*(n[1]+e*(n[2]+e*n[3]))},poly3_der=function(n,e){return n[1]+e*(2*n[2]+e*3*n[3])};function newton_rapshon(n,e,t,i){for(var s=e;i;--i){var r=n(s);if(s-=r,Math.abs(r)<t)break}return s}function init$3(){const n={_0xc548b1:429},e=_0x3a2b68;this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this[e(n._0xc548b1)]||0,this.es=0,this.title=this[e(988)]||"Robinson"}function forward$3(n){const e=_0x3a2b68;var t=adjust_lon(n.x-this[e(429)]),i=Math.abs(n.y),s=Math.floor(i*C1);s<0?s=0:s>=NODES&&(s=NODES-1),i=R2D*(i-RC1*s);var r={x:poly3_val(COEFS_X[s],i)*t,y:poly3_val(COEFS_Y[s],i)};return n.y<0&&(r.y=-r.y),r.x=r.x*this.a*FXC+this.x0,r.y=r.y*this.a*FYC+this.y0,r}function inverse$3(n){const e={_0x521375:2376},t=_0x3a2b68;var i={x:(n.x-this.x0)/(this.a*FXC),y:Math[t(e._0x521375)](n.y-this.y0)/(this.a*FYC)};if(i.y>=1)i.x/=COEFS_X[NODES][0],i.y=n.y<0?-HALF_PI:HALF_PI;else{var s=Math.floor(i.y*NODES);for(s<0?s=0:s>=NODES&&(s=NODES-1);;)if(COEFS_Y[s][0]>i.y)--s;else if(COEFS_Y[s+1][0]<=i.y)++s;else break;var r=COEFS_Y[s],o=5*(i.y-r[0])/(COEFS_Y[s+1][0]-r[0]);o=newton_rapshon(function(c){return(poly3_val(r,c)-i.y)/poly3_der(r,c)},o,EPSLN,100),i.x/=poly3_val(COEFS_X[s],o),i.y=(5*s+o)*D2R$1,n.y<0&&(i.y=-i.y)}return i.x=adjust_lon(i.x+this.long0),i}var names$3=[_0x3a2b68(1394),"robin"],robin={init:init$3,forward:forward$3,inverse:inverse$3,names:names$3};function init$2(){this.name="geocent"}function forward$2(n){var e=geodeticToGeocentric(n,this.es,this.a);return e}function inverse$2(n){var e=geocentricToGeodetic(n,this.es,this.a,this.b);return e}var names$2=["Geocentric",_0x3a2b68(3982),_0x3a2b68(3164),"Geocent"],geocent={init:init$2,forward:forward$2,inverse:inverse$2,names:names$2},mode={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},params={h:{def:1e5,num:!![]},azi:{def:0,num:!![],degrees:!![]},tilt:{def:0,num:!![],degrees:!![]},long0:{def:0,num:!![]},lat0:{def:0,num:!![]}};function init$1(){const n={_0x5f4cf0:698,_0x47d691:2376,_0x5c0afc:2130,_0x54b36b:1640,_0x5ab60e:3629,_0x312fbe:711,_0x2b6748:4344},e={_0x1e4143:3578,_0x4c54c0:1235,_0x208069:2177,_0x31fe8b:1235},t=_0x3a2b68;if(Object.keys(params).forEach(function(r){const o=_0x20dc;if(typeof this[r]===o(1050))this[r]=params[r][o(e._0x1e4143)];else{if(params[r][o(e._0x4c54c0)]&&isNaN(this[r]))throw new Error(o(e._0x208069)+r+" = "+this[r]);params[r][o(e._0x31fe8b)]&&(this[r]=parseFloat(this[r]))}params[r][o(2155)]&&(this[r]=this[r]*D2R$1)}[t(n._0x5f4cf0)](this)),Math.abs(Math[t(n._0x47d691)](this.lat0)-HALF_PI)<EPSLN?this.mode=this.lat0<0?mode.S_POLE:mode.N_POLE:Math.abs(this.lat0)<EPSLN?this[t(1640)]=mode[t(n._0x5c0afc)]:(this[t(n._0x54b36b)]=mode.OBLIQ,this.sinph0=Math.sin(this[t(n._0x5ab60e)]),this[t(613)]=Math.cos(this.lat0)),this[t(711)]=this.h/this.a,this.pn1<=0||this[t(n._0x312fbe)]>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this[t(n._0x312fbe)],this[t(n._0x2b6748)]=(this.p+1)*this.h1,this.es=0;var i=this.tilt,s=this.azi;this.cg=Math.cos(s),this.sg=Math[t(3492)](s),this.cw=Math.cos(i),this.sw=Math.sin(i)}function forward$1(n){const e={_0x5ad857:429,_0x5c3b04:1640,_0x179168:613},t=_0x3a2b68;n.x-=this[t(e._0x5ad857)];var i=Math.sin(n.y),s=Math.cos(n.y),r=Math.cos(n.x),o,c;switch(this.mode){case mode[t(4316)]:c=this[t(460)]*i+this.cosph0*s*r;break;case mode.EQUIT:c=s*r;break;case mode.S_POLE:c=-i;break;case mode.N_POLE:c=i;break}switch(c=this[t(711)]/(this.p-c),o=c*s*Math.sin(n.x),this[t(e._0x5c3b04)]){case mode.OBLIQ:c*=this[t(e._0x179168)]*i-this[t(460)]*s*r;break;case mode.EQUIT:c*=i;break;case mode[t(3797)]:c*=-(s*r);break;case mode.S_POLE:c*=s*r;break}var _,l;return _=c*this.cg+o*this.sg,l=1/(_*this.sw*this.h1+this.cw),o=(o*this.cg-c*this.sg)*this.cw*l,c=_*l,n.x=o*this.a,n.y=c*this.a,n}function inverse$1(n){const e={_0x55e8de:2130,_0xe63601:2843},t=_0x3a2b68;n.x/=this.a,n.y/=this.a;var i={x:n.x,y:n.y},s,r,o;o=1/(this[t(711)]-n.y*this.sw),s=this.pn1*n.x*o,r=this.pn1*n.y*this.cw*o,n.x=s*this.cg+r*this.sg,n.y=r*this.cg-s*this.sg;var c=hypot(n.x,n.y);if(Math[t(2376)](c)<EPSLN)i.x=0,i.y=n.y;else{var _,l;switch(l=1-c*c*this.pfact,l=(this.p-Math[t(2789)](l))/(this.pn1/c+c/this[t(711)]),_=Math.sqrt(1-l*l),this.mode){case mode.OBLIQ:i.y=Math.asin(_*this.sinph0+n.y*l*this.cosph0/c),n.y=(_-this.sinph0*Math.sin(i.y))*c,n.x*=l*this.cosph0;break;case mode[t(e._0x55e8de)]:i.y=Math.asin(n.y*l/c),n.y=_*c,n.x*=l;break;case mode.N_POLE:i.y=Math[t(e._0xe63601)](_),n.y=-n.y;break;case mode.S_POLE:i.y=-Math[t(e._0xe63601)](_);break}i.x=Math.atan2(n.x,n.y)}return n.x=i.x+this.long0,n.y=i.y,n}var names$1=[_0x3a2b68(3023),"tpers"],tpers={init:init$1,forward:forward$1,inverse:inverse$1,names:names$1};function init(){const n={_0x5d772e:3135},e=_0x3a2b68;if(this.flip_axis=this[e(1322)]==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this[e(1922)]=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var t=1-this.es,i=1/t;this[e(1794)]=Math.sqrt(t),this[e(3387)]=t,this.radius_p_inv2=i,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this[e(n._0x5d772e)]=1,this.shape="sphere";!this.title&&(this.title=e(1997))}function forward(n){const e={_0x368425:4272,_0x2b8801:1794,_0x27398c:3565,_0x204278:3375,_0x4847d6:1922,_0x2591bc:593,_0x503cc2:3375},t=_0x3a2b68;var i=n.x,s=n.y,r,o,c,_;if(i=i-this.long0,this.shape==="ellipse"){s=Math.atan(this.radius_p2*Math[t(e._0x368425)](s));var l=this[t(e._0x2b8801)]/hypot(this.radius_p*Math.cos(s),Math.sin(s));if(o=l*Math[t(2519)](i)*Math.cos(s),c=l*Math.sin(i)*Math[t(2519)](s),_=l*Math.sin(s),(this.radius_g-o)*o-c*c-_*_*this.radius_p_inv2<0)return n.x=Number[t(2200)],n.y=Number.NaN,n;r=this[t(1922)]-o,this.flip_axis?(n.x=this[t(e._0x27398c)]*Math[t(e._0x204278)](c/hypot(_,r)),n.y=this.radius_g_1*Math.atan(_/r)):(n.x=this.radius_g_1*Math.atan(c/r),n.y=this[t(3565)]*Math[t(e._0x204278)](_/hypot(c,r)))}else this.shape==="sphere"&&(r=Math.cos(s),o=Math.cos(i)*r,c=Math.sin(i)*r,_=Math.sin(s),r=this[t(e._0x4847d6)]-o,this[t(e._0x2591bc)]?(n.x=this[t(3565)]*Math[t(e._0x503cc2)](c/hypot(_,r)),n.y=this.radius_g_1*Math[t(3375)](_/r)):(n.x=this.radius_g_1*Math.atan(c/r),n.y=this.radius_g_1*Math[t(e._0x503cc2)](_/hypot(c,r))));return n.x=n.x*this.a,n.y=n.y*this.a,n}function inverse(n){const e={_0x300e84:4272,_0x533d9a:4272,_0x5c1e6e:3565,_0x293a7e:2200,_0x3e3990:2200,_0x2ae136:1349,_0x3bfde9:3778,_0x1a4296:1922,_0x182a1f:3375,_0x47e096:429},t=_0x3a2b68;var i=-1,s=0,r=0,o,c,_,l;if(n.x=n.x/this.a,n.y=n.y/this.a,this.shape===t(1362)){this.flip_axis?(r=Math.tan(n.y/this.radius_g_1),s=Math[t(e._0x300e84)](n.x/this.radius_g_1)*hypot(1,r)):(s=Math[t(e._0x533d9a)](n.x/this[t(e._0x5c1e6e)]),r=Math.tan(n.y/this.radius_g_1)*hypot(1,s));var d=r/this.radius_p;if(o=s*s+d*d+i*i,c=2*this.radius_g*i,_=c*c-4*o*this.C,_<0)return n.x=Number[t(e._0x293a7e)],n.y=Number[t(e._0x3e3990)],n;l=(-c-Math.sqrt(_))/(2*o),i=this.radius_g+l*i,s*=l,r*=l,n.x=Math[t(e._0x2ae136)](s,i),n.y=Math[t(3375)](r*Math.cos(n.x)/i),n.y=Math[t(3375)](this.radius_p_inv2*Math.tan(n.y))}else if(this.shape===t(e._0x3bfde9)){if(this[t(593)]?(r=Math.tan(n.y/this[t(3565)]),s=Math[t(e._0x533d9a)](n.x/this[t(3565)])*Math[t(2789)](1+r*r)):(s=Math.tan(n.x/this.radius_g_1),r=Math.tan(n.y/this.radius_g_1)*Math.sqrt(1+s*s)),o=s*s+r*r+i*i,c=2*this.radius_g*i,_=c*c-4*o*this.C,_<0)return n.x=Number.NaN,n.y=Number[t(2200)],n;l=(-c-Math.sqrt(_))/(2*o),i=this[t(e._0x1a4296)]+l*i,s*=l,r*=l,n.x=Math.atan2(s,i),n.y=Math[t(e._0x182a1f)](r*Math.cos(n.x)/i)}return n.x=n.x+this[t(e._0x47e096)],n}var names=[_0x3a2b68(1997),"Geostationary_Satellite",_0x3a2b68(3133)],geos={init,forward,inverse,names};function includedProjections(n){const e={_0x223bcb:4060,_0xc861ef:3674,_0x493a35:3113,_0x4e3d85:3113,_0x519c44:3113,_0x43ebc5:3113},t=_0x3a2b68;n.Proj[t(3113)].add(tmerc),n.Proj.projections.add(etmerc),n[t(e._0x223bcb)][t(3113)][t(e._0xc861ef)](utm),n.Proj.projections.add(sterea),n.Proj.projections[t(3674)](stere),n[t(4060)].projections.add(somerc),n[t(e._0x223bcb)][t(e._0x493a35)].add(omerc),n.Proj.projections.add(lcc),n.Proj.projections.add(krovak),n.Proj.projections.add(cass),n.Proj.projections.add(laea),n[t(4060)].projections.add(aea),n[t(e._0x223bcb)][t(e._0x4e3d85)].add(gnom),n[t(e._0x223bcb)][t(e._0x493a35)].add(cea),n.Proj[t(e._0x519c44)][t(3674)](eqc),n.Proj.projections.add(poly),n.Proj[t(3113)].add(nzmg),n.Proj[t(3113)][t(3674)](mill),n.Proj.projections.add(sinu),n.Proj.projections.add(moll),n[t(e._0x223bcb)].projections[t(3674)](eqdc),n.Proj.projections.add(vandg),n.Proj[t(e._0x519c44)].add(aeqd),n.Proj[t(e._0x43ebc5)].add(ortho),n.Proj.projections.add(qsc),n.Proj.projections.add(robin),n.Proj.projections.add(geocent),n.Proj.projections.add(tpers),n[t(4060)].projections[t(3674)](geos)}proj4.defaultDatum=_0x3a2b68(1859),proj4[_0x3a2b68(4060)]=Projection,proj4.WGS84=new proj4.Proj(_0x3a2b68(1859)),proj4.Point=Point,proj4[_0x3a2b68(3101)]=common,proj4.defs=defs,proj4[_0x3a2b68(2503)]=nadgrid,proj4[_0x3a2b68(3732)]=transform,proj4.mgrs=mgrs,proj4.version="__VERSION__",includedProjections(proj4);const CRS={EPSG3857:_0x3a2b68(2277),EPSG4326:"EPSG:4326",EPSG4490:"EPSG:4490",CGCS2000_GK_Zone_3:_0x3a2b68(1762),CGCS2000_GK_Zone_6:"CGCS2000_GK_Zone_6",CGCS2000_GK_CM_3:"CGCS2000_GK_CM_3",CGCS2000_GK_CM_6:"CGCS2000_GK_CM_6"},PI$1=3.141592653589793;class LngLatPoint{constructor(e,t,i){const s={_0x54c941:803,_0x49367a:4007},r=_0x3a2b68;this[r(s._0x54c941)]=Number(e||0),this._lat=Number(t||0),this[r(s._0x49367a)]=Number(i||0)}get lng(){return this._lng}set[_0x3a2b68(4079)](e){const t={_0x4a477b:803},i=_0x3a2b68;this[i(t._0x4a477b)]=+e,this._position=null}get[_0x3a2b68(671)](){return this[_0x3a2b68(2055)]}set lat(e){this._lat=+e,this._position=null}get alt(){return this[_0x3a2b68({_0x46789b:4007}._0x46789b)]||0}set alt(e){const t=_0x3a2b68;this._alt=+e,this._position&&this._position instanceof Cesium__namespace[t(2978)]&&(this._position=null)}clone(){const e={_0x49a5bb:1879},t=_0x3a2b68,i=new LngLatPoint;return i.lng=this.lng||0,i.lat=this[t(671)]||0,i[t(e._0x49a5bb)]=this.alt||0,i}format(){const e=_0x3a2b68;return this.lng=formatNum$2(this.lng,LngLatPoint.FormatLength),this.lat=formatNum$2(this[e(671)],LngLatPoint.FormatLength),this.alt=formatNum$2(this.alt,LngLatPoint.FormatAltLength),this}toArray(e){const t={_0x12467d:4079},i=_0x3a2b68;return this[i(1775)](),e?[this[i(t._0x12467d)],this[i(671)]]:[this.lng,this.lat,this.alt]}[_0x3a2b68(956)](){return this.format(),this.lng+","+this.lat+","+this.alt}toCartesian(e=![]){const t=_0x3a2b68;return!e&&this._position?this._position:Cesium__namespace.Cartesian3.fromDegrees(this.lng,this[t(671)],this.alt)}toCartographic(){const e=_0x3a2b68;return Cesium__namespace.Cartographic.fromDegrees(this[e(4079)],this.lat,this.alt)}[_0x3a2b68(1520)](){const e={_0x476d60:2501,_0x21bd49:4079},t=_0x3a2b68;let i=Math[t(e._0x476d60)](this[t(e._0x21bd49)],180);i=Math[t(3198)](i,-180);let s=Math.min(this.lat,85.05112877980659);s=Math[t(3198)](s,-85.05112877980659);const r=i*2003750834e-2/180;let o=Math.log(Math.tan((90+s)*PI$1/360))/(PI$1/180);return o=o*2003750834e-2/180,[r,o,this.alt]}equals(e){const t={_0x41cff9:4007},i=_0x3a2b68;return this===e||e instanceof LngLatPoint&&this._alt===e[i(t._0x41cff9)]&&this._lat===e._lat&&this._lng===e._lng}valid(){const e={_0x151624:803},t=_0x3a2b68;return isNaN(this._lat)||isNaN(this[t(e._0x151624)])?![]:this._lat<-90||this._lat>90||this._lng<-180||this._lng>180?![]:this._lat===0&&this._lng===0&&this[t(4007)]===0?![]:!![]}static parse(e,t){const i={_0x57b849:372,_0x5a657c:1125,_0x3eeabd:2957,_0x302a24:4079},s=_0x3a2b68;if(!e)return new LngLatPoint;if(e instanceof LngLatPoint)return e;let r;if(typeof e=="string")r=LngLatPoint[s(i._0x57b849)](e);else if(Array.isArray(e))r=LngLatPoint[s(i._0x5a657c)](e);else if(e instanceof LngLatPoint)r=e[s(i._0x3eeabd)]();else if(Cesium__namespace.defined(e.lat)&&Cesium__namespace.defined(e.lng)){r=new LngLatPoint(e[s(i._0x302a24)],e.lat,e.alt);for(const o in e)r[o]=e[o]}else e instanceof Cesium__namespace.Cartesian3||e._value||e.getValue?(r=LngLatPoint.fromCartesian(e,t),r._position=e):Cesium__namespace.defined(e.x)&&Cesium__namespace[s(407)](e.y)&&Cesium__namespace.defined(e.z)?(e=new Cesium__namespace.Cartesian3(e.x,e.y,e.z),r=LngLatPoint.fromCartesian(e,t),r[s(1187)]=e):(r=new LngLatPoint,logError$1("坐标解析失败，请确认参数是否无误",e));return r}static[_0x3a2b68(1125)](e){const t={_0x1084b9:671},i=_0x3a2b68,s=new LngLatPoint;return Array.isArray(e)&&(s.lng=e[0]||0,s[i(t._0x1084b9)]=e[1]||0,s.alt=e[2]||0),s}static fromString(e){const t={_0x337ffc:2148},i=_0x3a2b68;let s=new LngLatPoint;if(e&&typeof e===i(t._0x337ffc)){const r=e.split(",");s=this[i(1125)](r)}return s}static fromCartesian(e,t){const i={_0x30c636:467,_0x42ebce:4241},s=_0x3a2b68,r=new LngLatPoint;let o;if(e&&(e instanceof Cesium__namespace[s(2978)]?o=e:e._value&&e._value instanceof Cesium__namespace.Cartesian3?o=e[s(1885)]:typeof e.getValue=="function"&&(o=e.getValue(t||Cesium__namespace.JulianDate[s(i._0x30c636)]()))),o){const c=Cesium__namespace.Cartographic.fromCartesian(o);c&&(r.lat=Cesium__namespace.Math.toDegrees(c[s(3664)]),r.lng=Cesium__namespace.Math.toDegrees(c.longitude),r.alt=c[s(i._0x42ebce)],r.format())}return r._position=e,r}static fromCartographic(e){const t={_0xf7a59b:671},i=_0x3a2b68,s=new LngLatPoint;return s[i(t._0xf7a59b)]=Cesium__namespace.Math.toDegrees(e[i(3664)]),s.lng=Cesium__namespace.Math.toDegrees(e.longitude),s.alt=e.height,s}static fromMercator(e){const t=_0x3a2b68,i=Number(e[0]),s=Number(e[1]),r=i/2003750834e-2*180;let o=s/2003750834e-2*180;return o=180/PI$1*(2*Math[t(3375)](Math.exp(o*PI$1/180))-PI$1/2),new LngLatPoint(r,o,e[2]||0)}static[_0x3a2b68(1378)](e,t){const i={_0x289922:738},s=_0x3a2b68;return!e||e instanceof Cesium__namespace.Cartesian3?e:LngLatPoint[s(i._0x289922)](e,t)[s(1378)](!![])}static toCartographic(e,t){return!e||e instanceof Cesium__namespace.Cartographic?e:LngLatPoint.parse(e,t).toCartographic()}static[_0x3a2b68(4205)](e,t){const i=_0x3a2b68,s=LngLatPoint[i(738)](e);return!s||!s.valid()?[]:s.toArray(t)}}LngLatPoint.FormatLength=6,LngLatPoint[_0x3a2b68(1506)]=1;function formatNum$2(n,e=0){const t=Math.pow(10,e);return Math.round(n*t)/t}class LngLatArray{static toCartesians(e,t){const i={_0x57256f:391},s={_0x565b64:2978,_0x100d6d:1754},r=_0x3a2b68;if(!e||!Array[r(i._0x57256f)](e))return e;const o=[];return e.forEach(function(c){const _=r;if(c instanceof Cesium__namespace[_(s._0x565b64)]){t?o[_(s._0x100d6d)](c.clone()):o.push(c);return}const l=LngLatPoint.parse(c);!l||!l.valid()||o.push(l.toCartesian(!![]))}),o}static toCartographics(e,t){if(!e||!Array.isArray(e))return e;const i=[];return e.forEach(function(s){const r=_0x20dc;if(s instanceof Cesium__namespace.Cartographic){t?i.push(s[r(2957)]()):i[r(1754)](s);return}const o=LngLatPoint.parse(s);!o||!o.valid()||i.push(o.toCartographic())}),i}static toPoints(e,t){const i={_0x8d7715:391},s={_0xd35fa0:1754},r=_0x3a2b68;if(!e||!Array[r(i._0x8d7715)](e))return e;const o=[];return e.forEach(function(c){const _=r;if(c instanceof LngLatPoint&&!t){o[_(s._0xd35fa0)](c);return}const l=LngLatPoint.parse(c);!l||!l.valid()||o[_(s._0xd35fa0)](l)}),o}static toArray(e,t){if(!e||!Array.isArray(e))return e;const i=[];return e.forEach(function(s){const r=_0x20dc;if(Array.isArray(s)){i.push(s);return}const o=LngLatPoint.parse(s);!o||!o[r(2532)]()||i.push(o.toArray(t))}),i}}function degree2dms(n){const e={_0x3599cb:2376,_0x4ae127:2886,_0xf768b9:4293},t=_0x3a2b68;let i=1;n<0&&(i=-1),n=Math[t(e._0x3599cb)](n);let s=Math.floor(n);const r=Math.floor((n-s)*60),o=Math[t(e._0x4ae127)]((n-s)*3600%60);return s*=i,{degree:s,minute:r,second:o,str:s+"° "+r+t(e._0xf768b9)+o+'"'}}function dms2degree(n,e,t){let i=Math.abs(n)+e/60+t/3600;return n<0&&(i*=-1),i}function getCGCS2000EPSGByLng(n,e,t=!![]){let i;if(e){const s=parseInt(n/6)+1;if(s<13||s>23)return;t?i=s+4478:i=s+4489}else{const s=parseInt((n-1.5)/3)+1;if(s<25||s>45)return;t?i=s+4488:i=s+4509}return"EPSG:"+i}function getCGCS2000EPSGByX(n){const e=parseInt(n.toString().slice(0,2));return e>=13&&e<=23?"EPSG:"+(e+4478):e>=25&&e<=45?"EPSG:"+(e+4488):void 0}function _0x20dc(n,e){const t=_0x1c66();return _0x20dc=function(i,s){return i=i-344,t[i]},_0x20dc(n,e)}function proj4Trans(n,e,t="EPSG:4326"){const i={_0x2b3a70:1762,_0x5e2a1f:1239},s=_0x3a2b68;if(!e||!t||e===t)return n;try{if((e===CRS[s(i._0x2b3a70)]||e===CRS.CGCS2000_GK_Zone_6)&&(e=getCGCS2000EPSGByX(n[0])),t===CRS.CGCS2000_GK_Zone_3?t=getCGCS2000EPSGByLng(n[0],![],!![]):t===CRS[s(i._0x5e2a1f)]?t=getCGCS2000EPSGByLng(n[0],!![],!![]):t===CRS.CGCS2000_GK_CM_3?t=getCGCS2000EPSGByLng(n[0],![],![]):t===CRS[s(829)]&&(t=getCGCS2000EPSGByLng(n[0],!![],![])),!e||!t||e===t)return n;const r=proj4(e,t,n);if(Cesium__namespace.defined(r)&&r.length>1&&!isNaN(r[0])&&r[0]!==1/0)return r}catch{}return n}function proj4TransArr(n,e,t="EPSG:4326"){const i={_0x432be8:400,_0x5763b9:1754},s=_0x3a2b68;if(!e||e===t)return n;const r=[];for(let o=0,c=n[s(i._0x432be8)];o<c;o++){const _=n[o];if(Array.isArray(_[0])){const l=proj4TransArr(_,e,t);l&&l.length>0&&r[s(i._0x5763b9)](l)}else{const l=proj4Trans(_,e,t);l&&r.push(l)}}return r}function cartesian2lonlat(n,e){return LngLatPoint.toArray(n,e)}function cartesians2lonlats(n,e){return LngLatArray[_0x3a2b68({_0x92452b:4205}._0x92452b)](n,e)}function cartesian2mercator(n){return n?LngLatPoint.fromCartesian(n).toMercator():null}function cartesians2mercators(n){const e=[];for(let t=0,i=n.length;t<i;t++){const s=cartesian2mercator(n[t]);s&&e.push(s)}return e}function lonlat2cartesian(n,e=0){const t={_0x287712:2978},i=_0x3a2b68;return!n||n.length<2?null:Cesium__namespace[i(t._0x287712)].fromDegrees(n[0],n[1],n[2]||e)}function lonlats2cartesians(n,e){const t={_0x2df281:400},i=_0x3a2b68,s=[];for(let r=0,o=n.length;r<o;r++){const c=n[r];if(Array[i(391)](c[0])){const _=lonlats2cartesians(c,e);_&&_[i(t._0x2df281)]>0&&s.push(_)}else{const _=lonlat2cartesian(c,e);_&&s.push(_)}}return s}function lonlat2mercator(n){return LngLatPoint.fromArray(n).toMercator()}function lonlats2mercators(n){const e=[];for(let t=0,i=n.length;t<i;t++){const s=lonlat2mercator(n[t]);e.push(s)}return e}function mercator2cartesian(n,e){const t={_0x51e627:1879},i=_0x3a2b68;if(isNaN(n[0])||isNaN(n[1]))return null;const s=LngLatPoint[i(466)](n);return Cesium__namespace.defined(e)&&(s[i(t._0x51e627)]=e),s.toCartesian()}function mercators2cartesians(n,e){const t=_0x3a2b68,i=[];for(let s=0,r=n[t(400)];s<r;s++){const o=mercator2cartesian(n[s],e);o&&i[t(1754)](o)}return i}function mercator2lonlat(n){const e={_0xf8d045:4205},t=_0x3a2b68;return LngLatPoint.fromMercator(n)[t(e._0xf8d045)]()}function mercators2lonlats(n){const e={_0x191f79:1754},t=_0x3a2b68,i=[];for(let s=0,r=n.length;s<r;s++){const o=mercator2lonlat(n[s]);i[t(e._0x191f79)](o)}return i}const x_PI=3.141592653589793*3e3/180,PI=3.141592653589793,a=6378245,ee=.00669342162296594;function transformlat(n,e){const t={_0x4905c6:3492,_0x588499:3492,_0x597a94:3492},i=_0x3a2b68;let s=-100+2*n+3*e+.2*e*e+.1*n*e+.2*Math.sqrt(Math.abs(n));return s+=(20*Math.sin(6*n*PI)+20*Math.sin(2*n*PI))*2/3,s+=(20*Math[i(t._0x4905c6)](e*PI)+40*Math.sin(e/3*PI))*2/3,s+=(160*Math[i(t._0x588499)](e/12*PI)+320*Math[i(t._0x597a94)](e*PI/30))*2/3,s}function transformlng(n,e){const t={_0x1dad8e:3492},i=_0x3a2b68;let s=300+n+2*e+.1*n*n+.1*n*e+.1*Math.sqrt(Math.abs(n));return s+=(20*Math.sin(6*n*PI)+20*Math[i(3492)](2*n*PI))*2/3,s+=(20*Math.sin(n*PI)+40*Math[i(t._0x1dad8e)](n/3*PI))*2/3,s+=(150*Math[i(3492)](n/12*PI)+300*Math.sin(n/30*PI))*2/3,s}function out_of_china(n,e){return n<72.004||n>137.8347||e<.8293||e>55.8271||![]}function bd2gcj(n){const e={_0x1a6bfc:2519},t=_0x3a2b68,i=Number(n[0]),s=Number(n[1]),r=3.141592653589793*3e3/180,o=i-.0065,c=s-.006,_=Math.sqrt(o*o+c*c)-2e-5*Math.sin(c*r),l=Math.atan2(c,o)-3e-6*Math.cos(o*r);let d=_*Math[t(e._0x1a6bfc)](l),f=_*Math.sin(l);return d=Number(d.toFixed(6)),f=Number(f[t(3265)](6)),[d,f]}function gcj2bd(n){const e={_0x5acbca:3265},t=_0x3a2b68,i=Number(n[0]),s=Number(n[1]),r=Math[t(2789)](i*i+s*s)+2e-5*Math.sin(s*x_PI),o=Math.atan2(s,i)+3e-6*Math[t(2519)](i*x_PI);let c=r*Math[t(2519)](o)+.0065,_=r*Math.sin(o)+.006;return c=Number(c[t(e._0x5acbca)](6)),_=Number(_.toFixed(6)),[c,_]}function wgs2gcj(n){const e={_0x14d362:3265},t=_0x3a2b68,i=Number(n[0]),s=Number(n[1]);if(out_of_china(i,s))return[i,s];{let r=transformlat(i-105,s-35),o=transformlng(i-105,s-35);const c=s/180*PI;let _=Math.sin(c);_=1-ee*_*_;const l=Math.sqrt(_);r=r*180/(a*(1-ee)/(_*l)*PI),o=o*180/(a/l*Math[t(2519)](c)*PI);let d=s+r,f=i+o;return f=Number(f[t(e._0x14d362)](6)),d=Number(d.toFixed(6)),[f,d]}}function gcj2wgs(n){const e={_0x5b9897:2519},t=_0x3a2b68,i=Number(n[0]),s=Number(n[1]);if(out_of_china(i,s))return[i,s];{let r=transformlat(i-105,s-35),o=transformlng(i-105,s-35);const c=s/180*PI;let _=Math.sin(c);_=1-ee*_*_;const l=Math[t(2789)](_);r=r*180/(a*(1-ee)/(_*l)*PI),o=o*180/(a/l*Math[t(e._0x5b9897)](c)*PI);const d=s+r,f=i+o;let g=i*2-f,b=s*2-d;return g=Number(g.toFixed(6)),b=Number(b.toFixed(6)),[g,b]}}function bd2wgs(n){return gcj2wgs(bd2gcj(n))}function wgs2bd(n){return gcj2bd(wgs2gcj(n))}var PointTrans={__proto__:null,degree2dms,dms2degree,getCGCS2000EPSGByLng,getCGCS2000EPSGByX,proj4Trans,proj4TransArr,cartesian2lonlat,cartesians2lonlats,cartesian2mercator,cartesians2mercators,lonlat2cartesian,lonlats2cartesians,lonlat2mercator,lonlats2mercators,mercator2cartesian,mercators2cartesians,mercator2lonlat,mercators2lonlats,bd2gcj,gcj2bd,wgs2gcj,gcj2wgs,bd2wgs,wgs2bd};const Lang={_放大:["放大","放大","Zoom In"],_缩小:["缩小","縮小","Zoom Out"],_查看此处坐标:["查看此处坐标","查看此處坐標","Location info"],_位置信息:["位置信息",_0x3a2b68(3667),"The location information"],_经度:["经度","經度",_0x3a2b68(2757)],_纬度:["纬度","緯度",_0x3a2b68(697)],_海拔:["高程","高程","Alt"],_横坐标:["横坐标","橫坐標","X"],_纵坐标:["纵坐标","縱坐標","Y"],_查看当前视角:["查看当前视角",_0x3a2b68(3946),_0x3a2b68(3712)],_当前视角信息:["当前视角信息","當前視角信息","Current Camera Information"],_视角切换:[_0x3a2b68(3922),_0x3a2b68(646),_0x3a2b68(1133)],_禁止进入地下:["禁止进入地下",_0x3a2b68(619),"Do not go underground"],_允许进入地下:["允许进入地下","允許進入地下","Access to the ground"],_绕此处环绕飞行:["绕此处环绕飞行",_0x3a2b68(2856),"Fly around here"],_关闭环绕飞行:["关闭环绕飞行","關閉環繞飛行","Close off circling"],_移动到此处:["移动到此处","移動到此處",_0x3a2b68(603)],_第一视角站到此处:["第一视角站到此处","第一視角站到此處","First view is here"],_开启键盘漫游:["开启键盘漫游","開啓鍵盤漫遊","Enable keyboard roaming"],_关闭键盘漫游:["关闭键盘漫游","關閉鍵盤漫遊",_0x3a2b68(4183)],_跟踪锁定:["跟踪锁定",_0x3a2b68(420),"TrackedEntity"],_取消锁定:["取消锁定","取消鎖定","Unlocked"],_三维模型:["三维模型","三維模型","3DTiles"],_显示三角网:["显示三角网","顯示三角網",_0x3a2b68(1703)],_关闭三角网:["关闭三角网","關閉三角網",_0x3a2b68(480)],_显示包围盒:[_0x3a2b68(3637),_0x3a2b68(1887),"Display BoundingVolume"],_关闭包围盒:[_0x3a2b68(3729),"關閉包圍盒","Close BoundingVolume"],_地形服务:["地形服务",_0x3a2b68(757),"Terrain"],_开启地形:[_0x3a2b68(1306),"顯示地形",_0x3a2b68(1428)],_关闭地形:["关闭地形","關閉地形","Close terrain"],_图上标记:["图上标记","圖上標記","Drawing"],_标记点:["标记点","標記點","Mark points"],_标记线:[_0x3a2b68(3423),"標記線","Tag line"],_标记面:["标记面","標記面","Mark surface"],_标记圆:[_0x3a2b68(2114),"標記圓","Mark round"],_标记矩形:[_0x3a2b68(1350),"標記矩形",_0x3a2b68(1407)],_允许编辑:["允许编辑","允許編輯",_0x3a2b68(2919)],_禁止编辑:[_0x3a2b68(617),"禁止編輯",_0x3a2b68(2738)],_导出GeoJSON:["导出GeoJSON",_0x3a2b68(3630),"Export GeoJSON"],_清除所有标记:[_0x3a2b68(1233),"清除所有標記","Clear"],_特效效果:[_0x3a2b68(3979),"特效效果","Effects"],_开启下雨:[_0x3a2b68(2298),_0x3a2b68(908),"Enable rain"],_关闭下雨:["关闭下雨",_0x3a2b68(2370),"Close rain"],_开启下雪:[_0x3a2b68(927),"開啓下雪","Enable snow"],_关闭下雪:[_0x3a2b68(1003),"關閉下雪",_0x3a2b68(577)],_开启雾天气:["开启雾天气","開啓霧天氣","Enable fog"],_关闭雾天气:["关闭雾天气",_0x3a2b68(2373),"Close fog"],_开启泛光:["开启泛光","開啓泛光",_0x3a2b68(2838)],_关闭泛光:["关闭泛光","關閉泛光","Close bloom"],_开启亮度:["开启亮度",_0x3a2b68(3963),"Enable brightness"],_关闭亮度:[_0x3a2b68(4197),"關閉亮度","Close brightness"],_开启夜视:[_0x3a2b68(4213),"開啓夜視","Enable night vision"],_关闭夜视:["关闭夜视","關閉夜視","Close night vision"],_开启黑白:["开启黑白","開啓黑白","Enable black and white"],_关闭黑白:["关闭黑白",_0x3a2b68(1765),"Close black and white"],_开启拾取高亮:["开启拾取高亮","開啓拾取高亮",_0x3a2b68(3648)],_关闭拾取高亮:["关闭拾取高亮","關閉拾取高亮","Close Pick highlighted"],_场景设置:["场景设置","場景設置","Scene"],_开启深度监测:[_0x3a2b68(3303),"開啓深度監測","Enable depth test against terrain"],_关闭深度监测:[_0x3a2b68(3680),"關閉深度監測",_0x3a2b68(1994)],_显示星空背景:["显示星空背景",_0x3a2b68(2355),"Enable skyBox"],_关闭星空背景:[_0x3a2b68(3981),"關閉星空背景",_0x3a2b68(1117)],_开启日照阴影:[_0x3a2b68(3653),_0x3a2b68(2129),_0x3a2b68(957)],_关闭日照阴影:["关闭日照阴影","關閉日照陰影","Close shadow"],_开启大气渲染:["开启大气渲染","開啓大氣渲染",_0x3a2b68(1398)],_关闭大气渲染:[_0x3a2b68(880),_0x3a2b68(1919),"Close sky atmosphere"],_场景出图:["场景出图","場景出圖","Export image"],_图上量算:["图上量算","圖上量算",_0x3a2b68(4106)],_删除测量:["删除测量","刪除測量","Delete"],_角度:["角度","角度",_0x3a2b68(2685)],_距离:["距离","距離","Distance"],_面积:["面积","面積","Area"],_总长:["总长","總長","Total distance"],_起点:["起点","起點",_0x3a2b68(2563)],_高度差:["高度差","高度差","Height difference"],_空间距离:["空间距离",_0x3a2b68(2652),"Space distance"],_水平距离:["水平距离","水平距離",_0x3a2b68(720)],_正在计算体积:[_0x3a2b68(4162),"正在計算體積","Calculating volume"],_填方体积:["填方体积",_0x3a2b68(3293),"The volume of fill"],_挖方体积:[_0x3a2b68(3125),"挖方體積","Excavation volume"],_横切面积:["横切面积","橫切面積","Crosscutting area"],_面上:["面上","面上","Up"],_面下:["面下","面下",_0x3a2b68(3597)],_米:["米","米","m"],_公里:["公里","公裏","km"],_万米:["万米","万米","myriametre"],_海里:["海里","海裏","mile"],_丈:["丈","丈",_0x3a2b68(2066)],_平方米:["平方米",_0x3a2b68(4295),"m²"],_平方公里:[_0x3a2b68(1625),"平方公裏","km²"],_亩:["亩","畝","mu"],_公顷:["公顷","公頃","ha"],_立方米:["方","方","m³"],_万立方米:["万方","万方","wm³"],_单击开始绘制:["单击开始绘制","單擊開始繪制","Click to start drawing"],_单击完成绘制:["单击完成绘制","單擊完成繪制","Click to finish drawing"],_双击完成绘制:["双击完成绘制",_0x3a2b68(502),"Double click to finish drawing"],_单击增加点:["单击增加点","單擊增加點","left click add point"],_右击删除点:["右击删除点",_0x3a2b68(2291),_0x3a2b68(4195)],_单击后激活编辑:["单击后激活编辑",_0x3a2b68(4267),"Click to activate editing"],_右击菜单删除:["右击菜单删除","右擊菜單刪除","Right click menu to delete"],_更多功能请右击:[_0x3a2b68(1222),_0x3a2b68(3177),_0x3a2b68(2111)],_停止编辑:[_0x3a2b68(1514),_0x3a2b68(2197),"Stop editing"],_删除该点:["删除该点",_0x3a2b68(1416),"Delete that point"],_按轴平移:["按轴平移",_0x3a2b68(1875),"Translation by axis"],_停止按轴平移:[_0x3a2b68(2396),_0x3a2b68(3281),"Stop translation along axis"],_按轴旋转:["按轴旋转",_0x3a2b68(3570),_0x3a2b68(1412)],_停止按轴旋转:["停止按轴旋转","停止按軸旋轉","Stop rotation on axis"],_调整比例:["调整比例","調整比例","Edit Scale"],_停止调整比例:["停止调整比例","停止調整比例","Stop edit scale"],_释放后完成修改:[_0x3a2b68(4117),"釋放後完成修改","Complete the modification after release"],_该对象不允许编辑:["该对象不允许编辑",_0x3a2b68(2502),"This object does not allow editing"],_拖动该点后:["拖动该点后","拖動該點後","Drag that point"],_拖动对象后:["拖动对象后",_0x3a2b68(4144),_0x3a2b68(3934)],_修改位置:["修改位置","修改位置","Modify the position"],_整体平移:[_0x3a2b68(3704),"整體平移","The overall translation"],_增加点:["增加点",_0x3a2b68(2218),_0x3a2b68(1629)],_修改高度:[_0x3a2b68(620),_0x3a2b68(620),"Modify the height"],_修改半径:["修改半径","修改半徑",_0x3a2b68(3136)],_修改长度:["修改长度(X方向)","修改長度(X方向)","Modify the length(X direction )"],_修改宽度:[_0x3a2b68(1227),"修改寬度(Y方向)","Change the width(Y direction)"],_修改方向:["修改方向","修改方向","Change direction"],_修改缩放比例:["修改缩放比例",_0x3a2b68(4074),"Modify the Scale"],_无法删除不能少于最小点数:["无法删除，点数量不能少于",_0x3a2b68(713),"Cannot delete, the number of dots cannot be less than"],_删除:["删除","刪除",_0x3a2b68(1225)],_加载模型中:[_0x3a2b68(461),"加载模型中…","Load Model…"]};function xhrAdapter(n){const e={_0x1034cf:2591,_0x3c8be7:375,_0x21c469:367,_0x1269f9:1844},t={_0x4b1726:1786,_0x54a4d6:1150,_0x370057:1386},i={_0x508698:961};return n={method:"get",timeout:0,maxContentLength:-1,maxBodyLength:-1,params:n.queryParameters||{},...n},new Promise(function(r,o){const c={_0x471095:475},_={_0x22da60:1687},l=_0x20dc;let d=n.data;const f=n.headers||{},g=n.responseType;isFormData(d)&&delete f["Content-Type"];let b=new XMLHttpRequest;b[l(e._0x1034cf)](n.method.toUpperCase(),buildURL(n.url,n[l(2499)],n.paramsSerializer),!![]),b.timeout=n.timeout;function C(){const P=l;if(!b)return;const S=P(i._0x508698)in b?parseHeaders(b.getAllResponseHeaders()):null,L=!g||g==="text"||g===P(1776)?b[P(561)]:b.response,E={data:transformResponse(b,L),status:b[P(1786)],statusText:b.statusText,headers:S,options:n,request:b};settle(function(D){r(D)},function(D){o(D)},E),b=null}"onloadend"in b?b.onloadend=C:b.onreadystatechange=function(){const S=l;!b||b.readyState!==4||b[S(t._0x4b1726)]===0&&!(b[S(t._0x54a4d6)]&&b.responseURL.indexOf(S(t._0x370057))===0)||setTimeout(C)},b[l(1668)]=function(){const S=l;b&&(o(createError(S(2322),n,"ECONNABORTED",b)),b=null)},b[l(423)]=function(){o(createError("Network Error",n,null,b)),b=null},b.ontimeout=function(){let L=l(_._0x22da60)+n.timeout+"ms exceeded";n.timeoutErrorMessage&&(L=n.timeoutErrorMessage),o(createError(L,n,"ECONNABORTED",b)),b=null},"setRequestHeader"in b&&forEach(f,function(S,L){const E=l;typeof d>"u"&&L.toLowerCase()===E(4253)?delete f[L]:b[E(c._0x471095)](L,S)}),!isUndefined(n.withCredentials)&&(b.withCredentials=!!n.withCredentials),g&&g!=="json"&&(b.responseType=n[l(e._0x3c8be7)]),typeof n.onDownloadProgress=="function"&&b[l(1844)]("progress",n[l(e._0x21c469)]),typeof n[l(3580)]===l(1782)&&b.upload&&b.upload[l(e._0x1269f9)]("progress",n.onUploadProgress),!d&&(d=null),b.send(d)})}function isString$1(n){return typeof n=="string"}function isDate(n){return toString.call(n)==="[object Date]"}function isObject$1(n){return n!==null&&typeof n===_0x3a2b68({_0x5ecdb5:2770}._0x5ecdb5)}function isFormData(n){return typeof FormData!==_0x3a2b68({_0x4d277c:1050}._0x4d277c)&&n instanceof FormData}function isUndefined(n){return typeof n===_0x3a2b68(1050)}function isURLSearchParams(n){return typeof URLSearchParams!==_0x3a2b68(1050)&&n instanceof URLSearchParams}function forEach(n,e){const t={_0x162e8e:4350},i=_0x3a2b68;if(!(n===null||typeof n>"u"))if(typeof n!="object"&&(n=[n]),Array.isArray(n))for(let s=0,r=n.length;s<r;s++)e.call(null,n[s],s,n);else for(const s in n)Object.prototype.hasOwnProperty[i(t._0x162e8e)](n,s)&&e.call(null,n[s],s,n)}function encode(n){const e={_0xd88770:4262},t=_0x3a2b68;return encodeURIComponent(n)[t(4262)](/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")[t(e._0xd88770)](/%5B/gi,"[").replace(/%5D/gi,"]")}function trim$1(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function buildURL(n,e,t){const i={_0x2c4be2:1050};if(!e)return n;let s;if(t)s=t(e);else if(isURLSearchParams(e))s=e.toString();else{const r=[];forEach(e,function(c,_){const l={_0x5cdecf:1477},d=_0x20dc;c===null||typeof c===d(i._0x2c4be2)||(Array[d(391)](c)?_=_+"[]":c=[c],forEach(c,function(g){const b=d;isDate(g)?g=g[b(1918)]():isObject$1(g)&&(g=JSON[b(l._0x5cdecf)](g)),r.push(encode(_)+"="+encode(g))}))}),s=r.join("&")}if(s){const r=n.indexOf("#");r!==-1&&(n=n.slice(0,r)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n}const ignoreDuplicateOf=["age","authorization",_0x3a2b68(456),"content-type","etag",_0x3a2b68(4167),"from","host","if-modified-since",_0x3a2b68(4337),"last-modified","location","max-forwards",_0x3a2b68(3435),"referer","retry-after","user-agent"];function parseHeaders(n){const e={_0x536586:821},t={_0x5dba3b:925},i=_0x3a2b68,s={};let r,o,c;return n&&forEach(n[i(e._0x536586)](`
`),function(l){const d=i;if(c=l.indexOf(":"),r=trim$1(l[d(t._0x5dba3b)](0,c)).toLowerCase(),o=trim$1(l.substr(c+1)),r){if(s[r]&&ignoreDuplicateOf.indexOf(r)>=0)return;r==="set-cookie"?s[r]=(s[r]?s[r]:[]).concat([o]):s[r]=s[r]?s[r]+", "+o:o}}),s}function settle(n,e,t){const i=_0x3a2b68;!t[i(1786)]||validateStatus(t.status)?n(t):e(createError("Request failed with status code "+t.status,t.options,null,t[i(1039)],t))}function validateStatus(n){return n>=200&&n<300}function createError(n,e,t,i,s){const r=new Error(n);return enhanceError(r,e,t,i,s)}function enhanceError(n,e,t,i,s){const r={_0x14168e:2226},o=_0x3a2b68;return n.options=e,t&&(n.code=t),n[o(1039)]=i,n.response=s,n.isAxiosError=!![],n.toJSON=function(){const _=o;return{message:this.message,name:this.name,description:this.description,number:this[_(r._0x14168e)],fileName:this.fileName,lineNumber:this[_(4153)],columnNumber:this.columnNumber,stack:this.stack,options:this.options,code:this.code,status:this.response&&this[_(3645)].status?this.response.status:null}},n}function transformResponse(n,e){if(isString$1(e)&&e.length)try{return JSON.parse(e)}catch{}return e}const version="3.6.0",update="2023-08-04 12:17:42",image={url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAAAUCAYAAAAJD/ojAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2NUVFNjVDRUFBMDgxMUU5QUM4NDg4MzU3RThBMzcwQiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2NUVFNjVDRkFBMDgxMUU5QUM4NDg4MzU3RThBMzcwQiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjY1RUU2NUNDQUEwODExRTlBQzg0ODgzNTdFOEEzNzBCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjY1RUU2NUNEQUEwODExRTlBQzg0ODgzNTdFOEEzNzBCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+GxQkfQAADBVJREFUeNrsWHtwVNUd/u7u3d1sNtlNNmQTkiyjkfAIqCD4AOQhGUBAqtMahloFq6KOio9qfVu0VVtrpahtrQOlCsgUlYq0QuMDMojQVFrLo0UeaSIGSAJ57SbZ7Otuv9/ds3ETQeto/+jUM/Obe8+55/E73+9xvnO11h/6cMqiabAYCT4pug5PvAN7dD8u8t6Clm4LcOJdtg8G7HdMh8cbRA52gM1o7gZaeoASL7DtFaCzEZi2CGATgvxW14zHr8jBfdNyzGX2798Pp9OJQYMGIZFIqKU1hEIh1NbWoqioCF6v12xvbW3FkSNHkJOTY7ZbrVbE4/GTqi/fwuEw6uvr4XK5UFxcbM4rpaOjAxaLBdnZ2eb4aDRqridF5pZ+hmH06pJe0nVM1VPvsp682+12s27BFylUEl0EaPlSoPpDwHMjkDl3JvK9Vfhg8xw8MAG4n7LtVSCDgJhravh/LvoX6u1wiImA9z8Gyk4AMyaPRRS/gRjabvMhxw8YUb5n9sVVWTxpUn6IJpLyOUU8QSSRNl7exbNS3vV5RfqLh6bPIUXGp7wutc5/BWDLqTxMMoPFkgUtHqdyydgxYgTISgD5nuUbjDjWENyB6GC9bMIIjDzPA4+jA8cCwDEaIZeA211uevO5jJVRlHaEjc00a50786TBw8lxDWUgZUUkEmmQkEsvEtY2m40ZSx/AajmlhOBk8xlLt42KznZ+q2e4/oP9u6SNexnCtjjTRyNlAdsqY7HY8zTCmjQjfIsyi/IMZVfavOdSrqX8ibK+n6PeROGG8RPO39L7IZSIngpfaDF47Zr+uG7VBxsJbQsCx1qcnqFv2R6taYDmfxEhlJmd6bBoqBuB2rcnYficD5FTdBly9bHoxEUYMTMfRqQBDcdWwe54Bx3WjyePzsJNk7MEhHmU0wnkms7Oznq/32+ncj8Q0Cg1wWCwQTbtcDiuYP00ykrm6oaBAwciKyvrBQI0m8Aso2zguLy0fBSRdCjG4thZJSUlTxDEe8WTaaDJ7FvJ3CtPnbl3UyAQOMQc/X22nUODXs01J/CbGPq9fgBPpNzAbxkKYNEzk3XR7SGOG0BD7uUa1aznsd6sRxInPyAsVgu6u3oOOzTbUq/b81IGovfSYwPvWEZFGx3+C/g+vtdnxL/zSrPgXbhefMy0ThZR744dRqhxIZy1K9AVNRA4EyjMwT0Xy6FglV4C3CUE9ig39gIBiFFBQ3lSuLCwEAUFBYVse47f3ATjFQFJDi9uKkeFd4D1iAI1BXBUaRVQXp8jc1IMvj/PZy2bK8QTOX6Wx+ORqJgrBmd9R+ITV470gyWknq3q+Q3KSBUt4hyi2ww+z1JTVOt+z8nPOY0Ah4iVoWk7XXkYhrbGRVtD47VHXE+Vcdl5SJyEcnAJM1h6sA098fsRbn8XHU1cnvTB5iFkFtxZVo8x2gnsrInBV+TfPsjvv4QbHEPgxCOjKnjMIJJ0wHI2xU2F99KjD8kmMjMze09P1rtF5IRQwKbSQxeSvEX6aDSSmV44z1QV5lKGsP2OpqamlwjwXWQqRxhNQebnEkZIKpBT+b6Q4ytVrp7b1dW1js9fiS6c08lvU9nPzX0sZp+DvSnikiVtp2JoiMWSSTGrsyMRGDHqmT9f9trD7Zm+m3vtmJ7xbDC8bXWvavs3L2kpnlEDP6Onx80VMpN5O2jA59Mx7/w8+Lw6gnoc7uzs7QqAin379mH37t2YMmWKReiUgCUbo/JjBRgCsSk3Nzdx9OhRHD9+HPT6vQRhPPsJfyuiZKcZx1D1QqkwBTQJBRP6xZQxlWCO4LwCvp1rlK9atWr86NGjMyoqKvazvpE5e1L/A5GlkXp+QLlIjM22v1OvoWwfrFKFGED2ciVB3qZ0OahvLP/RZxzjcRM5hHI5zXmLYfct7hM0mpI4/vDN8Lp3f2Q8qMN9qO1N/Uq8EVmAxrgNDXE72sP5pG1BLJ0cwNhBPnR25iJ/QIIGjO1gajjETQ8nqGfSK/bQI0xmQ0AsAgrz4pWK626VjbrdbpNjEvAadhtN+ZeEIuXblKXKc6+i1FFkc9dnZGQ0pNiHyuW5wtZVlOSPGzeum8YTUO9gv4vlYEyHQQ5VxUgOKs5by2cXvX0Uc/dt5ObvcC/foQGb2X4p13uTz2Nc7x4dsyo/g+MQTY2UIav0VkRtD5tsIcWeLea5/fGFsc2rH8GjLVONLbcgUz8tVuZpKg+vPnB7aI3JUT70lOHHsRnY7rwUpcUF5sB4PGklghSh3MLXi3t6eo6Wl5dPJ4DCINDW1ja7paVl28iRI5eJE3FTWyQ8JXQlZ7J8l5s4l217+D5GTnCV9+JsG6JAJHHHDILwPo3yRzGYyq8iVsnJwkCGDRvWSS//Ketn0qBZfBYqIMPylMuNsJn8/PyEpBphOVKncTbw/ed0gKt5PjylWMs1CqVfUtbqaDsFh0gYybyp58xFWH+6r8fyW8zyxARjywNb4tPu0q3GzzotBbz12dARiY45lHCtiNH77cwM+fZ/4rHuPdgWWwZreK3slwDZe1ei11bxVlVF4OwE4sFUO29pt/PG9saCBQuWTJo0CZWVleZtT25c3ORMetWF9Ooa1hfTUxrY5mQk3ElAwjRWFds+4sa97JPNlBIUYMQwBKX/6ZFgexHX3i7eR4Ak3Bepb/PZ/yM+3+d8Or/PUCljHL10HJnPjvb29tvpuWv57XW2/41rXk/Pfpn7ekyMQ3NknQRfIymWvArYXCuQTjQsvA6HOm9EyL3bkR1HXPcu1Y1gccJqXZRJ9Jtixph98ZDeTdKcYVhMaiuEwdLdgea963DAPRaWaACyT3oNdu3aZYb97Nmzn6FyEwnY02yvy8vLWzp06NBlhw8fnvjkk0+eIHi4/PLLzXCl9/yF3nifcBfK+RxTwg2XSR8JDH4fyZDNo9cWEuxAY2NjtazBNNB/p8JYxOuGc/zddXV1Z9AQTczvEmqSwsIc2yGGlXNBjGeGSDxexbl3SDvbXqa4OMcK6i9pZj3rV6QuLvqnrrIJnmw6aZ7dfRY0x28JrksloCDlblhjvzZzs0UyhAVRTQ/bE/Fbu7q73w7b7K/7dPv512i+UZx1Z0JFgx46jlDpRBwovRaNLceh97SK8uahM336dPlPsIQK30AP2LV8+fK7hK5dd911pQTl1urq6k1sn02R/GaO40ZaCPSzBONCethAdaDZVYrQOM6hWIWTkdEjoS3jJKzZR0s7QeQM9ygvXVlVVWUylPnz5wu/H0aQ1nKNA3IG0FAxGrKa883j2lryYuuAon8FqRsh39387qIElAf3o2myvmYvgSVjJVXwm2rEIq8h2nkzNNcx2PU+/xc0NXGws2eDMwOnu3LtrwbCsTm8/+00jchIsEUjaM4/D905ZyAzyPODh5TwWQLs56XhJUXga5gqZtXW1sZ8Pp8cZLcpmnU3ARDeOpcKbxIPFp5JkVtck+K0RyjDlddIKPMeDwEtqMCfyDk2CSB8uvhd6JxT3cA8HGfyotLSUjMNiZMKOOybLVxcMRExboXadqdiOE6O3UiZwvrvWH+PxniW41q4v8vY9sYnAJspgQbN8DhhzXiRyJ2NSPQ4jPiNsBm/h+ikJT718ybRezHhfd6Ceq47y4gjVw7sJMDCCJiLc1zwDx0AI8T98nIjChLEc+QOSGXupGLLZR/yd0tYgvLGe9hvBxWeKwcX36vY12DfbMpY9oko7mtRz++Zfzs0bbQ6+GQSckXUs+9bbJer0UoFTL5KEa2U3bLYtGnTUmxhjTJejTiC6ErgT6Nx97P9kYaGhlViaF6CxrF+VNgC5TlGSJB67WbfhZz/DLFZ3xRhEGCnYx0ytKn0nbXoDixEPByENy8ZTVo6pKcszQS2mWD3MYXNpkPul5w/ve/rIv1///X7WbO+371f2t4T+aI/XhQzWP8fdN2oJF0voW4PyQvTRYrybRZJ/5HE9q18bP0kB5t5mxUbDe3KXo/W5pkI1l6F4lGrzVzce5VO4MuUlA5GUos+P2/+14rk5HS90x0j/R9xkhMk1LXNbv8FCcVwtNQOwcG3ViPG9Ge14evyZf8HZxZlIR6dg0B7E+wFF9A8bcmUpn2NzlcCcKTHAyP6VwSaNiDb1/W113615d8CDAB0JaU81/NTEwAAAABJRU5ErkJggg==",rectangle:[10,5,88,20]};new Function("czmver",`var msg = \`%c🌒%c Mars3D三维可视化平台 %c

  版 本 号：3.6.0     Cesium版本：\${czmver}
  编译日期：2023-08-04 12:17:42
  版权声明：
  1. Mars3D版权完全属于 "合肥火星科技有限公司"独自所有.
  2. Mars3D软件包，任何个人或组织在遵守下列条件的前提下可以永久免费使用：
    1）不进行任何形式的破解和裁剪，程序包完整引用
    2）保留此版权信息在控制台输出
  我们保留对此版权信息的最终解释权.


  🏠官网:  http://mars3d.cn
  📞微信:  http://marsgis.cn/weixin.html
  \`;
console.log(msg,
  'font-size: 19px;padding-left: 10px;  color: rgb(240, 133, 25);',
  'font-size: 15px;  line-height: 1.5;  font-family: "微软雅黑";color: rgb(240, 133, 25);  padding-bottom: 5px;',
  'font-size: 12px;  line-height: 1.5;  font-family: "微软雅黑";color: rgb(0, 138, 255);'  );`)(Cesium.VERSION);let customImage;function setImage(n){customImage=n}function addView(n){const e={_0x61c39b:3326,_0x21de10:2826,_0x59e18f:1531,_0x39870f:1906},t=_0x3a2b68,i=image||customImage;if(!i||!n||!n[t(e._0x61c39b)])return;const s=i.rectangle||[10,5,88,20],r=new Cesium__namespace[t(e._0x21de10)];return r[t(e._0x59e18f)]=new Cesium__namespace.BoundingRectangle(s[0],s[1],s[2],s[3]),r.material=new Cesium__namespace[t(4208)]({fabric:{type:t(e._0x39870f),uniforms:{color:new Cesium__namespace.Color(1,1,1,1),image:i[t(4023)]}}}),r._muyao=!![],n.primitives.add(r),r}function add(n,e){!n||!n.primitives||(addView(n),setInterval(function(){try{!checkHasImage(n)&&addView(n)}catch{}},6e5+Math.random()*6e5))}function checkHasImage(n){const e={_0x70cc2f:615,_0x288261:4354},t=_0x3a2b68;if(!(n!=null&&n.primitives)||n.primitives.length===0)return![];for(let i=0,s=n.primitives.length;i<s;++i)if(n.primitives[t(e._0x70cc2f)](i)[t(e._0x288261)])return!![];return![]}function isNumber(n){return typeof n=="number"&&n.constructor===Number}function isString(n){const e={_0x5e8ad5:2148,_0xa83645:2649},t=_0x3a2b68;return typeof n===t(e._0x5e8ad5)&&n[t(e._0xa83645)]===String}function isBoolean(n){return typeof n=="boolean"&&n.constructor===Boolean}function isObject(n){return Object.prototype.toString.call(n)==="[object Object]"}const hasOwn={}[_0x3a2b68(2139)];function isPlainObject(n){const e={_0x26e4ef:4350},t=_0x3a2b68;return isObject(n)?n.constructor&&!hasOwn.call(n,"constructor")&&!hasOwn[t(e._0x26e4ef)](n.constructor.prototype,t(1548))?![]:!![]:![]}function isFunction(n){return n&&typeof n=="function"}function isSimpleType(n){const e={_0x3dbdeb:391},t=_0x3a2b68;return n==null||n===void 0?![]:isString(n)||isBoolean(n)||isNumber(n)||Array[t(e._0x3dbdeb)](n)?!![]:![]}const isMars3DCesium=!!(Cesium__namespace.ExpandByMars||Cesium__namespace[_0x3a2b68(4045)]);function formatNum$1(n,e=0){const t=_0x3a2b68,i=Math.pow(10,e);return Math[t(2886)](n*i)/i}function padLeft0(n,e){const t={_0x30274f:400},i=_0x3a2b68;n=String(n);let s=n[i(t._0x30274f)];for(;s<e;)n="0"+n,s++;return n}function splitWords(n){return trim(n).split(/\s+/)}function trim(n){const e={_0x439123:1869},t=_0x3a2b68;if(n)return n.trim?n[t(e._0x439123)]():n.replace(/^\s+|\s+$/g,"")}function getStrLength(n){const e={_0x469573:4262},t=_0x3a2b68;if(n)return n[t(e._0x469573)](/[\u0391-\uFFE5]/g,"00").length}const templateRe=/\{ *([a-zA-Z0-9_\u4e00-\u9fa5]+) *\}/g;function template(n,e,t){const i={_0x336f7e:407,_0x5c5c86:3479,_0x5d21be:467};return n==null||!e||!templateRe.test(n)?n:n.replace(templateRe,function(s,r,o,c){const _=_0x20dc;let l=e[r];if(!Cesium__namespace[_(i._0x336f7e)](l))return t?isString(t)?t:"":s;if(isFunction(l)){if(l=l(e),!Cesium__namespace[_(407)](l))return t?isString(t)?t:"":s}else if(l[_(i._0x5c5c86)]&&isFunction(l.getValue)&&(l=l.getValue(Cesium__namespace.JulianDate[_(i._0x5d21be)]()),!Cesium__namespace.defined(l)))return t?isString(t)?t:"":s;return l})}let lastId=0;function getGlobalId(){return++lastId}function stampGlobalId(n){const e=_0x3a2b68;return n&&isObject(n)?(n[e(3752)]=n._mars3d_id||++lastId,n._mars3d_id):-1}function createGuid(n="m-"){return n+Cesium__namespace.createGuid()}let callbackIndex=0;function getTemplateHtml(_0x4daca1){const _0x4ed4f4={_0x431cb9:1907,_0x40e92e:3631,_0x162863:1477,_0x21142c:771,_0x5db3a7:1343,_0x43a222:3144,_0x351b92:1753,_0x4eff83:1603,_0x9eabb5:3330,_0x241abe:2752,_0x11ba5c:2621,_0x1db243:950},_0x321653=_0x3a2b68;let _0xba0e5c=_0x4daca1.attr;if(!_0xba0e5c)return![];const _0x4babe4=_0x4daca1.title,_0x45036c=_0x4daca1.edit,_0x5ea896=_0x4daca1.template;if(_0xba0e5c=getAttrVal(_0xba0e5c),!_0x5ea896||_0x5ea896==="all"){let n=0,e=_0x4babe4?_0x321653(_0x4ed4f4._0x431cb9)+_0x4babe4+_0x321653(1343):"";e+='<div class="mars3d-template-content" >';for(const t in _0xba0e5c)try{let i=_0xba0e5c[t];if(t==null||i==null||t==="Shape"||t===_0x321653(_0x4ed4f4._0x40e92e)||t==="OBJECTID"||t==="_definitionChanged"||t==="_propertyNames"||isFunction(i)||(isObject(i)&&(i=JSON[_0x321653(_0x4ed4f4._0x162863)](getAttrVal(i,{onlySimpleType:!![]}))),i=String.prototype.trim.call(i||""),i===""||i===_0x321653(_0x4ed4f4._0x21142c)||i==="Unknown"))continue;e+=_0x321653(3058)+t+"</label>"+i+"</div>",n++}catch(i){logError$1("getTemplateHtml:构造all时异常",i)}return e+=_0x321653(_0x4ed4f4._0x5db3a7),n===0?![]:e}else if(Array[_0x321653(391)](_0x5ea896)){let _0x2c4f6c=0,_0x3356e7=_0x4babe4?_0x321653(1907)+_0x4babe4+"</div>":'<div style="height: 10px;"></div>';_0x3356e7+=_0x321653(_0x4ed4f4._0x43a222);for(let _0x4d47f4=0;_0x4d47f4<_0x5ea896[_0x321653(400)];_0x4d47f4++){const _0x194cdf=_0x5ea896[_0x4d47f4];if(_0x194cdf==null)continue;const _0xec067d=_0x194cdf.field,_0x3bc919=_0x194cdf[_0x321653(997)]||"";if(_0x194cdf.type===_0x321653(3476)||_0x194cdf[_0x321653(1603)]==="button"){let _0x3c6b70="";const _0x3eed32=_0x194cdf.callback;if(_0x3eed32){const _0xffe10="_cache_getTemplateHtml_"+callbackIndex++;isFunction(_0x3eed32)?window[_0xffe10]=function(){_0x3eed32(_0xba0e5c)}:isString(_0x3eed32)&&(window[_0xffe10]=function(){eval(_0x3eed32+"("+JSON.stringify(_0xba0e5c)+")")}),_0x3c6b70='onclick="'+_0xffe10+_0x321653(2194)}_0x3356e7+=_0x321653(_0x4ed4f4._0x351b92)+_0x3c6b70+`
                      data-type="`+_0xec067d+'" class="mars3d-popup-btn '+_0x3bc919+'" >'+(_0x194cdf.name||"查看详情")+_0x321653(1591),_0x2c4f6c++;continue}else if(_0x194cdf[_0x321653(_0x4ed4f4._0x4eff83)]===_0x321653(_0x4ed4f4._0x9eabb5)){const n=template(_0x194cdf.html,_0xba0e5c,!![]);_0x3356e7+='<div class="'+_0x3bc919+'">'+n+"</div>",_0x2c4f6c++;continue}let _0x1bd7b1=_0xba0e5c[_0xec067d];if(!(!_0x45036c&&(_0xec067d==null||_0x1bd7b1==null||isFunction(_0x1bd7b1)))&&(_0x1bd7b1=String.prototype[_0x321653(1869)].call(_0x1bd7b1||""),!(!_0x45036c&&(_0x194cdf.hideNull??!![])&&(_0x1bd7b1==null||_0x1bd7b1===""||_0x1bd7b1==="Null"||_0x1bd7b1==="Unknown"||_0x1bd7b1.length===0)))){if(_0x194cdf.format)try{isFunction(_0x194cdf.format)?_0x1bd7b1=_0x194cdf.format(_0x1bd7b1):_0x1bd7b1=eval(_0x194cdf[_0x321653(1775)]+"("+_0x1bd7b1+")")}catch(n){logWarn(_0x321653(1716),_0x194cdf)}if(_0x45036c)switch(_0x194cdf.type){case"textarea":_0x1bd7b1='<textarea class="mars3d-popup-edititem '+_0x3bc919+'" style="width:'+(_0x4daca1.width||190)+_0x321653(1474)+_0xec067d+'"  placeholder="请输入 '+_0x194cdf[_0x321653(3307)]+_0x321653(1089)+_0x1bd7b1+"</textarea>";break;case"string":case"number":default:_0x1bd7b1='<input type="'+(_0x194cdf.type||"text")+'" class="mars3d-popup-edititem '+_0x3bc919+'" style="width:'+(_0x4daca1.width||190)+`px;"
                          data-type="`+_0xec067d+'" value="'+_0x1bd7b1+'" placeholder="请输入 '+_0x194cdf.name+_0x321653(_0x4ed4f4._0x241abe);break}_0x194cdf.unit&&(_0x1bd7b1+=_0x194cdf[_0x321653(1733)]),_0x3356e7+="<div><label>"+_0x194cdf.name+"</label>"+_0x1bd7b1+"</div>",_0x2c4f6c++}}return _0x3356e7+="</div>",_0x2c4f6c===0?![]:_0x3356e7}else if(isObject(_0x5ea896))switch(_0x5ea896.type){case _0x321653(_0x4ed4f4._0x11ba5c):return'<iframe id="ifarm" src="'+template(_0x5ea896.url,_0xba0e5c,!![])+_0x321653(2412)+(_0x5ea896[_0x321653(517)]||_0x321653(_0x4ed4f4._0x1db243))+"px;height:"+(_0x5ea896.height||"300")+'px;overflow:hidden;margin:0;" scrolling="no" frameborder="0" ></iframe>';case"javascript":{const _0x3fcd67=_0x5ea896.callback;return eval(_0x3fcd67+"("+JSON.stringify(_0xba0e5c)+")")}}else{if(isString(_0x5ea896))return template(_0x5ea896,_0xba0e5c,!![]);if(isFunction(_0x5ea896))return _0x5ea896(_0x5ea896,_0xba0e5c)}return![]}function getCesiumValue(n,e,t){const i={_0x2e60b9:3479},s=_0x3a2b68;if(!n)return n;if(e){if(n instanceof e)return n;if(n._value&&n._value instanceof e)return n._value}return isFunction(n[s(i._0x2e60b9)])?n.getValue(t||Cesium__namespace.JulianDate.now()):n}function getCesiumColor(n,e,t){const i={_0x1fd679:2849},s=_0x3a2b68;return n?(isFunction(n.getValue)&&(n=n.getValue(t||Cesium__namespace[s(557)].now())),isString(n)?Cesium__namespace[s(2092)][s(i._0x1fd679)](n):isFunction(n)?getCesiumColor(n(t),e):n):e}function getColorByStyle(n,e=Cesium__namespace[_0x3a2b68(2092)].YELLOW){const t={_0x4353fb:3107,_0x52d77b:749},i=_0x3a2b68;let s;return n.color?isString(n.color)?s=Cesium__namespace[i(2092)].fromCssColorString(n.color):isFunction(n.color)?s=n.color(n):s=n.color:n.randomColor?s=Cesium__namespace.Color.fromRandom({minimumRed:n.minimumRed??0,maximumRed:n[i(t._0x4353fb)]??.75,minimumGreen:n.minimumGreen??0,maximumGreen:n[i(2852)]??.75,minimumBlue:n[i(4027)]??0,maximumBlue:n.maximumBlue??.75}):s=e,s&&(Cesium__namespace.defined(n[i(3248)])&&(n[i(3248)]<0?n.opacity=0:n.opacity>1&&(n.opacity=1),s=s[i(747)](Number(n.opacity))),Cesium__namespace.defined(n.globalAlpha)&&n.globalAlpha!==1&&(s=s.withAlpha(s.alpha*n[i(t._0x52d77b)])),s)}function getAttrVal(n,e={}){const t={_0x26b537:3479,_0x3e5bc5:557,_0x183455:400},i=_0x3a2b68;if(!n)return n;try{isFunction(n.getValue)&&(n=n[i(t._0x26b537)](Cesium__namespace[i(t._0x3e5bc5)].now()));const s={};if(n._propertyNames&&n._propertyNames[i(t._0x183455)]>0)for(const r of n._propertyNames){const o=getOneAttrValue(r,n[r],e);o!=null&&(s[r]=o)}else for(const r in n){const o=getOneAttrValue(r,n[r],e);o!=null&&(s[r]=o)}return s}catch(s){logError$1("getAttrVal:出错了",s)}return n}function get3DTileFeatureAttr(n){const e={_0xebd733:564},t=_0x3a2b68,i={},s=n[t(3552)]?n.getPropertyIds():n.getPropertyNames();for(let r=0;r<s.length;r++){const o=s[r];if(!n.hasProperty(o))continue;const c=n[t(e._0xebd733)](o);c!=null&&(i[o]=c)}return i}function getOneAttrValue(n,e,t){const i={_0x248cfd:3479},s=_0x3a2b68;if(e==null||e===""||e==="Null"||e==="Unknown"||(e.getValue&&typeof e.getValue=="function"&&n!=="material"&&(e=e[s(i._0x248cfd)](Cesium__namespace.JulianDate.now())),isFunction(e)))return null;if(t.onlySimpleType){if(e instanceof Cesium__namespace.Color)return e.toCssColorString();if(t[s(4232)]&&Array[s(391)](e))return null;if(isPlainObject(e))return e;if(!isSimpleType(e))return null}return e}function merge(n={},...e){let t,i,s,r;for(i=0,s=e.length;i<s;i++){r=e[i];for(t in r)hasMergeObject(n[t],r[t])?n[t]=merge(n[t],r[t]):n[t]=r[t]}return n}function hasMergeObject(n,e){const t={_0x3ce21f:407},i=_0x3a2b68;return!Cesium__namespace.defined(n)||!Cesium__namespace[i(t._0x3ce21f)](e)?![]:Array[i(391)](n)||Array.isArray(e)?![]:isPlainObject(n)&&isPlainObject(e)?!![]:![]}function clone(n,e=[],t=5){if(n==null||typeof n!="object")return n;if(n instanceof Date){const i=new Date;return i.setTime(n.getTime()),i}if(Array.isArray(n)&&t>=0){const i=[];for(let s=0,r=n.length;s<r;++s)i[s]=clone(n[s],e,t-1);return i}if(typeof n=="object"&&t>=0)try{if(n.clone)return n.clone();if(!isPlainObject(n))return n;const i={};for(const s in n)isFunction(s)||e.indexOf(s)===-1&&n.hasOwnProperty(s)&&(i[s]=clone(n[s],e,t-1));return i}catch(i){logError$1("clone:出错了",i)}return n}function getArrayRandomOne(n){const e=Math.floor(Math.random()*n.length+1)-1;return n[e]}function removeArrayItem(n,e){for(let t=0;t<n.length;t++)if(n[t]===e)return n.splice(t,1),!![];return![]}function getSymbolStyle(n,e){const t={_0x1067d8:1778,_0x151ddb:2767},i=_0x3a2b68;if(!n)return{};let s=n[i(511)]?clone(n.styleOptions):{};if(n.styleField&&n[i(1778)]&&e){const r=e[n.styleField],o=n[i(t._0x1067d8)][r];o!=null&&(s=merge(s,o))}if(e)for(const r in s)s[r]=template(s[r],e);if(s.label&&(s.label=clone(s.label)),s.highlight&&(s.highlight=clone(s.highlight)),isFunction(n[i(t._0x151ddb)])){const r=n.callback(e,s);r!=null&&(s=merge(s,r))}return s}function geojsonToArcGIS(n,e){return geojsonToArcGIS$1(n,e)}function arcgisToGeoJSON(n,e){return arcgisToGeoJSON$1(n,e)}function getGeoJsonFeatures(n){const e={_0x5f0f30:2051,_0x366123:3725,_0x1d312e:1033},t=_0x3a2b68;if(n.geometryType&&n.geometryType[t(e._0x5f0f30)](t(e._0x366123))!==-1)n=arcgisToGeoJSON(n);else if(n.type==="Topology"){let s=[];for(const r in n.objects)if(n[t(2168)][t(2139)](r)){n=Cesium__namespace[t(e._0x1d312e)].feature(n,n.objects[r]);const o=getGeoJsonFeatures(n);s=s.concat(o)}return s}let i;return Array.isArray(n.features)?i=n.features:Array[t(391)](n)?i=n:i=[n],i}function geoJsonToGraphics(n,e={}){const t={_0x56c883:3211,_0x6cd133:3663},i=_0x3a2b68;var s,r;if(!n)return[];const o=getGeoJsonFeatures(n);if(n!=null&&(s=n.crs)!==null&&s!==void 0&&(r=s[i(t._0x56c883)])!==null&&r!==void 0&&r.name&&!e[i(t._0x6cd133)]){const _=n[i(t._0x6cd133)].properties.name;_.indexOf("EPSG:")!==-1&&(e[i(t._0x6cd133)]=_)}let c=[];for(let _=0,l=o[i(400)];_<l;_++){const d=o[_],f=featureToGraphic(d,e);f&&f.length>0&&(c=c.concat(f))}return c}function featureToGraphic(n,e={}){const t={_0x3f1c11:3211,_0x2e7a1a:2748,_0xff704b:1485,_0x4d9e10:407,_0x651317:1603,_0x562020:1603,_0x489886:1525,_0x314aaf:1126,_0x5c4710:1082,_0x1e6499:400,_0x1d99db:1959,_0x1fa21d:400,_0x528f18:2836,_0xfed769:4383,_0x4449c0:400,_0xe918d3:2748,_0x33818e:400,_0x1149fe:370},i=_0x3a2b68;var s,r,o;let c=[];n.type===i(1809)&&(n={geometry:n});const _=n.geometry,l=_==null?void 0:_.coordinates;if(!l&&!_)return c;let d;e.type?d=e.type:hasType((s=n)===null||s===void 0||(r=s[i(t._0x3f1c11)])===null||r===void 0?void 0:r.type)&&(d=n.properties.type);const f=clone((o=n)===null||o===void 0?void 0:o.properties,[i(t._0x2e7a1a)])||{};let g={};if(n[i(3211)]){n.properties.style&&(g={...n[i(3211)][i(t._0x2e7a1a)]});const M=f[i(t._0xff704b)];if(Cesium__namespace[i(407)](M)){g.image=M;const R=f["marker-color"];Cesium__namespace.defined(R)&&(g.outline=!![],g.outlineColor=R)}const D=f.fill;if(Cesium__namespace[i(t._0x4d9e10)](D)&&_[i(t._0x651317)]!=="LineString"&&_[i(t._0x562020)]!=="MultiLineString"){g.color=D;const R=f[i(t._0x489886)];Cesium__namespace[i(t._0x4d9e10)](R)&&R!==1&&(g[i(3248)]=R);const k=f.stroke;if(Cesium__namespace.defined(k)){g.outline=!![],g.outlineColor=k;const N=f["stroke-width"];Cesium__namespace.defined(N)&&(g.outlineWidth=N);const $=f["stroke-opacity"];Cesium__namespace[i(407)]($)&&$!==1&&(g.outlineOpacity=$)}}else{const R=f.stroke;if(Cesium__namespace.defined(R)){g.color=R;const k=f["stroke-width"];Cesium__namespace.defined(k)&&(g.width=k);const N=f[i(2089)];Cesium__namespace.defined(N)&&N!==1&&(g.opacity=N)}}}if(e.style&&(e.style.merge?g={...g,...e.style}:g={...e.style}),e.symbol)if(isFunction(e.symbol))g=e.symbol(f,g,n)||g,g[i(t._0x651317)]&&(d=g.type);else{d=e.symbol.type||d;const M=getSymbolStyle(e[i(t._0x314aaf)],n.properties||{});M&&Object.keys(M).length!==0&&(e.symbol.merge?g={...M,...g}:g=M)}let b=e.crs;b==="EPSG:4326"&&(b=null);function C(M){return b&&(M=proj4Trans(M,b)),e.onPointTrans?e.onPointTrans(M):M}function P(M){if(!e.onPointTrans&&!b)return M;const D=[];for(let R=0,k=M.length;R<k;R++){const N=M[R];if(Array.isArray(N[0])){const $=P(N);$&&$.length>0&&D.push($)}else{const $=C(N);$&&D.push($)}}return D}function S(M,D){eachGraphicType(function(R){isObject(D[R])&&(M[R]=D[R],delete D[R])})}let L,E;switch(_[i(t._0x562020)]){case"Point":{(!d||!isPointType(d))&&(d=g.image?"billboardP":"pointP");const M={type:d,position:C(l),style:g,attr:f};S(M,f),c[i(1754)](M);break}case"MultiPoint":{for((!d||!isPointType(d))&&(d=g.image?"billboardP":i(t._0x5c4710)),L=0,E=l[i(t._0x1e6499)];L<E;L++){const M={type:d,position:C(l[L]),style:g,attr:f};S(M,f),c.push(M)}break}case i(4166):{!d&&(d=i(t._0x1d99db));const M={type:d,positions:P(l),style:g,attr:f};S(M,f),c.push(M);break}case i(828):{!d&&(d="polylineP");let M;const D=[];for(L=0,E=l.length;L<E;L++){const R={type:d,positions:P(l[L]),style:g,attr:f};S(R,f),c[i(1754)](R),D.push(R),(!M||M.positions[i(t._0x1fa21d)]<R.positions.length)&&(M=R)}if(M&&(M[i(t._0x528f18)]=!![],g[i(3203)]&&!g.label.showAll))for(L=0,E=D.length;L<E;L++){const R=D[L];M!==R&&(R[i(t._0x2e7a1a)]={...R.style},delete R.style.label)}break}case"Polygon":{if(!d&&(d=i(t._0xfed769)),d.startsWith("polygon")){const M={type:d,positions:P(l[i(400)]===1?l[0]:l),style:g,attr:f};S(M,f),c.push(M)}else for(L=0,E=l.length;L<E;L++){const M=l[L],D={type:d,positions:P(M[i(t._0x1fa21d)]===1?M[0]:M),style:g,attr:f};S(D,f),c.push(D)}break}case i(3707):{!d&&(d="polygon");let M;const D=[];for(L=0,E=l.length;L<E;L++){const R=l[L],k={type:d,positions:P(R[i(t._0x1fa21d)]===1?R[0]:R),style:g,attr:f};S(k,f),c.push(k),D.push(k),(!M||M.positions.length<k[i(2694)].length)&&(M=k)}if(M&&(M.isMultiMax=!![],g.label&&!g.label.showAll))for(L=0,E=D[i(t._0x4449c0)];L<E;L++){const R=D[L];M!==R&&(R[i(t._0xe918d3)]={...R.style},delete R.style.label)}break}case"GeometryCollection":{for(let M=0,D=_.geometries[i(t._0x33818e)];M<D;M++){const R=featureToGraphic({type:i(t._0x1149fe),geometry:_.geometries[M],properties:n[i(3211)]},e);R&&R.length>0&&(c=c.concat(R))}break}default:logError$1("Invalid GeoJSON object.",n)}return c}function mergeSymbolToGraphic(n,e){const t={_0x4d16a7:400,_0x142f43:2748},i=_0x3a2b68;if(e)if(isFunction(e))n.style=e(n.attr,n[i(2748)],n);else{e.type&&(n.type=e.type);const s=getSymbolStyle(e,n.attr||{});s&&Object.keys(s)[i(t._0x4d16a7)]!==0&&(e.merge?n.style={...s,...n.style}:n[i(t._0x142f43)]=s)}return n}function heightToZoom(n){const t=7096758e-11,i=91610.74,s=-40467.74;return Math.round(s+(40487.57-s)/(1+Math.pow(n/i,t)))}function getUrlResource(n){const e={_0x3a45fa:4023,_0x4c58e1:2497,_0x166e5b:1631,_0xcd311c:537,_0x11ca0d:3424,_0xe5f81e:1712,_0x5bc8c6:4161},t=_0x3a2b68;if(!n.url)return n;let i;if(n[t(e._0x3a45fa)]instanceof Cesium__namespace.Resource){const s=n.url;return n.headers&&(s[t(e._0x4c58e1)]=n[t(2497)]),n.proxy&&(s[t(e._0x166e5b)]=new Cesium__namespace[t(e._0xcd311c)](n.proxy)),n[t(3424)]&&s.setTemplateValues(n[t(e._0x11ca0d)]),n[t(e._0xe5f81e)]&&s[t(e._0x5bc8c6)](n.queryParameters),s}else n.templateValues&&(n.url=template(n[t(4023)],n[t(3424)])),i=new Cesium__namespace.Resource({url:n.url,queryParameters:n[t(1712)],templateValues:n.templateValues,headers:n[t(2497)],proxy:n.proxy?new Cesium__namespace.DefaultProxy(n.proxy):null});return i}function getTextImage(n,e={}){const t={_0x1b2e36:517,_0xc77567:2951,_0x4e128d:601},i=_0x3a2b68;!e[i(2828)]&&(e.backgroundColor=Cesium__namespace.Color.TRANSPARENT);const s=Cesium__namespace.writeTextToCanvas(n||"",e);if(s){if(e.outline){const r=s[i(t._0x1b2e36)],o=s[i(4241)],c=s.getContext("2d",{willReadFrequently:!![]});e.outlineColor?c.strokeStyle=e.outlineColor.toCssColorString():e.fillColor?c[i(2951)]=e[i(3258)].toCssColorString():c[i(t._0xc77567)]="#ffffff";const _=e[i(t._0x4e128d)]||4;c[i(2032)]=_,c.strokeRect(_/2,_/2,r-_,o-_)}return s}else return null}const circleImage={};function getCircleImage(n,e={}){const t={_0x4cbdcc:3878,_0x17ecc7:2540,_0x42aeb7:1592,_0x19323b:4095,_0x25bd87:2985,_0x57a79f:1460,_0xfe8262:3799,_0xf8fff7:3362,_0x367037:1040,_0x21f15d:2575},i=_0x3a2b68,s=e[i(t._0x4cbdcc)]??26,r=s+(e.borderWidth??5);let o,c;if(e.color)o=e[i(t._0x17ecc7)],c=e[i(t._0x42aeb7)]||o;else{const l=e.opacity??.6,d=e.borderOpacity??l*.8;n<10?(o=i(4131)+l+")",c="rgba(181, 226, 140, "+d+")"):n<100?(o="rgba(240, 194, 12,  "+l+")",c="rgba(241, 211, 87, "+d+")"):(o="rgba(241, 128, 23,  "+l+")",c=i(1788)+d+")")}const _=n+"_"+r+"_"+s+"_"+o;if(!circleImage[_]){const l=r*2,d=document[i(t._0x19323b)]("canvas");d.width=l,d.height=l;const f=d[i(t._0x25bd87)]("2d",{willReadFrequently:!![]});f.fillStyle="#ffffff00",f.globalAlpha=0,f[i(t._0x57a79f)](0,0,l,l),s!==r&&(f[i(749)]=1,f.beginPath(),f.arc(r,r,r,0,Math.PI*2,!![]),f.closePath(),f.fillStyle=c,f.fill()),f.globalAlpha=1,f.beginPath(),f.arc(r,r,s,0,Math.PI*2,!![]),f[i(t._0xfe8262)](),f.fillStyle=o,f.fill(),f.font=e.font||s*.9+i(t._0xf8fff7),f[i(t._0x367037)]=e.fontColor||"#ffffff",f.textAlign=i(3747),f[i(3884)]="middle",f[i(t._0x21f15d)](n,r,r),circleImage[_]=d[i(3786)]("image/png")}return circleImage[_]}function download(n,e){const t={_0x292175:3015},i=_0x3a2b68,s=document.createElement("a");s[i(t._0x292175)]=n,s.href=URL.createObjectURL(e),document.body.appendChild(s),s.click(),document.body.removeChild(s)}function base64Img2Blob(n){const e={_0x37babb:400,_0x2e2a09:1982},t=_0x3a2b68,i=n[t(821)](t(3623)),s=i[0].split(":")[1],r=window.atob(i[1]),o=r[t(e._0x37babb)],c=new Uint8Array(o);for(let _=0;_<o;++_)c[_]=r[t(e._0x2e2a09)](_);return new Blob([c],{type:s})}function downloadBase64Image(n,e){const t={_0x4ca328:3181},i=_0x3a2b68,s=base64Img2Blob(e);!n[i(t._0x4ca328)](".jpg")&&!n[i(t._0x4ca328)](".png")&&(n=n+".png"),download(n,s)}function downloadFile(n,e){const t=new Blob([e]);download(n,t)}function getExplorerInfo(){const n={_0x13efdd:2925,_0x58d824:3378,_0x1fdf2e:4012},e=_0x3a2b68;let t;const i=window[e(3411)].userAgent[e(1523)]();return i.indexOf("msie")>=0?(t=Number(i.match(/msie ([\d]+)/)[1]),{type:"IE",version:t}):i.indexOf(e(2827))>=0?(t=Number(i.match(/firefox\/([\d]+)/)[1]),{type:e(1507),version:t}):i.indexOf("chrome")>=0?(t=Number(i.match(/chrome\/([\d]+)/)[1]),{type:"Chrome",version:t}):i.indexOf(e(n._0x13efdd))>=0?(t=Number(i.match(/opera.([\d]+)/)[1]),{type:e(3850),version:t}):i.indexOf(e(n._0x58d824))>=0?(t=Number(i[e(n._0x1fdf2e)](/version\/([\d]+)/)[1]),{type:"Safari",version:t}):{type:i,version:-1}}function webglreport(){const n={_0x34a675:1603,_0x5ecc1f:2554,_0x4a9cbe:4242},e=_0x3a2b68,t=getExplorerInfo();if(t[e(n._0x34a675)]==="IE"&&t[e(n._0x5ecc1f)]<11)return![];try{let i;const s=document.createElement("canvas");if(typeof WebGL2RenderingContext!==e(1050)&&(i=s.getContext(e(n._0x4a9cbe))||s.getContext(e(1499))||void 0),i==null&&(i=s[e(2985)]("webgl")||s.getContext(e(2144))||void 0),i==null)return![]}catch{return![]}return!![]}function webglerror(){const n={_0x401022:607,_0x1cf86f:3690,_0x4244d8:4260},e=_0x3a2b68;var t,i;(t=window)!==null&&t!==void 0&&(i=t[e(607)])!==null&&i!==void 0&&i.open?window[e(n._0x401022)][e(2591)]({type:1,title:"当前浏览器不支持WebGL功能",closeBtn:0,shadeClose:![],resize:![],area:[e(n._0x1cf86f),e(n._0x4244d8)],content:'<div style="margin: 20px;color: #333;"><h3>系统检测到您使用的浏览器不支持WebGL功能！</h3>  <p>1、请您检查浏览器版本，安装使用最新版chrome、火狐或IE11以上浏览器！</p> <p>2、WebGL支持取决于GPU支持，请保证客户端电脑已安装显卡驱动程序！</p></div>'}):alert("系统检测到您使用的浏览器不支持WebGL功能")}function getRequest(){const n=_0x3a2b68,e=location.search,t={};if(e.indexOf("?")!==-1){const i=e.substr(1),s=i[n(821)]("&");for(let r=0;r<s.length;r++)t[s[r].split("=")[0]]=decodeURI(s[r][n(821)]("=")[1])}return t}function getRequestByName(n){const e=new RegExp("(^|&)"+n+"=([^&]*)(&|$)","i"),t=window.location.search.substr(1).match(e);return t!=null?decodeURI(t[2]):null}let _isPCBroswer;function isPCBroswer(){const n={_0x5ed5d8:2798,_0x3ae573:1523},e=_0x3a2b68;if(!Cesium__namespace.defined(_isPCBroswer)){const t=navigator[e(n._0x5ed5d8)][e(n._0x3ae573)](),i=["android",e(2287),"iphone",e(2093),"ipod","symbianos"];_isPCBroswer=!![];for(let s=0;s<i.length;s++)if(t.indexOf(i[s])>0){_isPCBroswer=![];break}}return _isPCBroswer}function alert(n,e){const t={_0x20a2f0:395,_0x1bfcb7:607,_0x22f9bb:1366},i=_0x3a2b68;window[i(t._0x20a2f0)]?window.globalAlert(n,e):window[i(t._0x1bfcb7)]?window.layer.alert(n,{title:e||"提示",skin:"layui-layer-lan layer-mars-dialog",closeBtn:0,anim:0}):window[i(3477)]?window[i(3477)][i(t._0x22f9bb)](n,e):window.alert(n)}function msg(n){const e={_0x4da9c9:3860},t=_0x3a2b68;window.globalMsg?window.globalMsg(n):window.toastr?window.toastr.info(n):window.layer?window.layer[t(e._0x4da9c9)](n):window[t(3317)](n)}function formatDate(n,e="yyyy-MM-dd HH:mm:ss"){const t={_0x507801:2565,_0x1b3c09:1115,_0x4d7ed9:1697,_0xf8e14c:400},i=_0x3a2b68,s={"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n[i(t._0x507801)]()%12===0?12:n.getHours()%12,"H+":n.getHours(),"m+":n[i(t._0x1b3c09)](),"s+":n[i(4039)](),"q+":Math.floor((n.getMonth()+3)/3),S:n.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(n[i(t._0x4d7ed9)]()+"").substr(4-RegExp.$1[i(t._0xf8e14c)])));for(const r in s)new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,RegExp.$1.length===1?s[r]:("00"+s[r]).substr((""+s[r])[i(t._0xf8e14c)])));return e}function formatTime(n){const e=_0x3a2b68;if(n=Number(n)||0,n<60)return n.toFixed(0)+"秒";if(n>=60&&n<3600){const t=Math[e(2654)](n%60);return Math.floor(n/60)+"分钟"+(t!==0?t+"秒":"")}else return n=Math.floor(n/60),Math.floor(n/60)+"小时"+Math.floor(n%60)+"分钟"}function fetchJson(n){const e={_0x54868b:1924},t=_0x3a2b68;return n=replaceOnlineUrlDomain(n),n.method===t(1570)?(n[t(e._0x54868b)]=n.queryParameters,delete n[t(1712)],Cesium__namespace.Resource.post(n)):Cesium__namespace.Resource.fetchJson(n)}function sendAjax(n){const e={_0x259975:846,_0x1ff497:1570},t=_0x3a2b68;return n=replaceOnlineUrlDomain(n),n[t(e._0x259975)]===t(e._0x1ff497)&&(n.data=n.queryParameters,delete n.queryParameters),xhrAdapter(n).then(i=>i==null?void 0:i.data).catch(i=>{console.log(i),logError$1("axios请求出错",i)})}function getLangText(n,e=0){const t=Lang[n];return t&&t[e]||""}function setLangText(n,e,t=0){let i=Lang[n];return!i&&(i=Lang[n]={}),i[t]=e,!![]}function requestFullscreen(n){const e={_0x3edef0:2733},t=_0x3a2b68;return Cesium__namespace.Fullscreen[t(e._0x3edef0)](n),Cesium__namespace.Fullscreen[t(1470)]}function exitFullscreen(){const n={_0x1cb5c5:2768},e=_0x3a2b68;return Cesium__namespace[e(n._0x1cb5c5)].exitFullscreen(),Cesium__namespace[e(2768)].fullscreen}function replaceOnlineUrlDomain(n){const e={_0x4c8a09:3199},t=_0x3a2b68;var i,s,r;return!n.url||!isString(n.url)||(i=window)!==null&&i!==void 0&&(s=i.location)!==null&&s!==void 0&&(r=s.hostname)!==null&&r!==void 0&&r.indexOf&&window.location.hostname[t(2051)]("mars3d.cn")===-1||n.url.indexOf(t(e._0x4c8a09))===-1||n[t(4023)].indexOf("/tile/")!==-1||(n.url=n[t(4023)][t(4262)]("data.mars3d.cn","data1.mars3d.cn")),n}var Util={__proto__:null,isNumber,isString,isBoolean,isObject,isPlainObject,isFunction,isSimpleType,isMars3DCesium,formatNum:formatNum$1,padLeft0,splitWords,trim,getStrLength,template,get lastId(){return lastId},getGlobalId,stampGlobalId,createGuid,getTemplateHtml,getCesiumValue,getCesiumColor,getColorByStyle,getAttrVal,get3DTileFeatureAttr,merge,clone,getArrayRandomOne,removeArrayItem,getSymbolStyle,geojsonToArcGIS,arcgisToGeoJSON,getGeoJsonFeatures,geoJsonToGraphics,featureToGraphic,mergeSymbolToGraphic,heightToZoom,getUrlResource,getTextImage,getCircleImage,downloadBase64Image,downloadFile,getExplorerInfo,webglreport,webglerror,getRequest,getRequestByName,isPCBroswer,alert,msg,formatDate,formatTime,fetchJson,sendAjax,getLangText,setLangText,requestFullscreen,exitFullscreen,replaceOnlineUrlDomain,setImage};Object.defineProperties(Cesium__namespace[_0x3a2b68(3348)][_0x3a2b68(4390)],{globalAlpha:{set:function(n){const e={_0x18c373:1309,_0x28c7e0:2892},t=_0x3a2b68;this[t(e._0x18c373)]=n;const i=getCesiumColor(this[t(2540)],Cesium__namespace.Color.WHITE);!Cesium__namespace.defined(this._color_alpha)&&(this[t(e._0x28c7e0)]=i.alpha),this[t(2540)]=i.withAlpha(this._color_alpha*n)},get:function(){return this._globalAlpha??1}}}),Object[_0x3a2b68(2598)](Cesium__namespace[_0x3a2b68(3599)][_0x3a2b68(4390)],{globalAlpha:{set:function(n){this._globalAlpha=n},get:function(){return this._globalAlpha??1}}});const getValue_old$5=Cesium__namespace[_0x3a2b68(3599)].prototype.getValue;Cesium__namespace[_0x3a2b68(3599)].prototype.getValue=function(n,e){const t={_0x1f87c9:2540,_0x215c44:838,_0x14d879:3216},i=_0x3a2b68;return e=getValue_old$5[i(698)](this)(n,e),this.globalAlpha!==1&&(e[i(t._0x1f87c9)]&&(e.color[i(t._0x215c44)]*=this.globalAlpha),e.cellAlpha&&(e[i(t._0x14d879)]*=this.globalAlpha)),e},Object.defineProperties(Cesium__namespace.ImageMaterialProperty.prototype,{globalAlpha:{set:function(n){const e={_0x259710:1948,_0x4153cd:407,_0x5a82ce:838,_0x54f79b:747},t=_0x3a2b68;this._globalAlpha=n;const i=getCesiumColor(this.color,Cesium__namespace.Color[t(e._0x259710)]);!Cesium__namespace[t(e._0x4153cd)](this._color_alpha)&&(this[t(2892)]=i[t(e._0x5a82ce)]),this.color=i[t(e._0x54f79b)](this._color_alpha*n)},get:function(){return this._globalAlpha??1}}}),Object.defineProperties(Cesium__namespace.PolylineArrowMaterialProperty.prototype,{globalAlpha:{set:function(n){this._globalAlpha=n},get:function(){return this._globalAlpha??1}}});const getValue_old$4=Cesium__namespace.PolylineArrowMaterialProperty[_0x3a2b68(4390)][_0x3a2b68(3479)];Cesium__namespace.PolylineArrowMaterialProperty[_0x3a2b68(4390)].getValue=function(n,e){const t=_0x3a2b68;return e=getValue_old$4.bind(this)(n,e),e.color&&this.globalAlpha!==1&&(e.color[t(838)]*=this.globalAlpha),e},Object.defineProperties(Cesium__namespace.PolylineDashMaterialProperty[_0x3a2b68(4390)],{globalAlpha:{set:function(n){const e=_0x3a2b68;this[e(1309)]=n},get:function(){return this[_0x3a2b68({_0x56aeb7:1309}._0x56aeb7)]??1}}});const getValue_old$3=Cesium__namespace[_0x3a2b68(3669)].prototype.getValue;Cesium__namespace.PolylineDashMaterialProperty[_0x3a2b68(4390)].getValue=function(n,e){const t={_0x1f85b8:2540},i=_0x3a2b68;return e=getValue_old$3.bind(this)(n,e),this.globalAlpha!==1&&(e.color&&(e[i(t._0x1f85b8)][i(838)]*=this[i(749)]),e.gapColor&&(e.gapColor.alpha*=this[i(749)])),e},Object.defineProperties(Cesium__namespace[_0x3a2b68(2648)].prototype,{globalAlpha:{set:function(n){this._globalAlpha=n},get:function(){return this._globalAlpha??1}}});const getValue_old$2=Cesium__namespace[_0x3a2b68(2648)].prototype.getValue;Cesium__namespace.PolylineGlowMaterialProperty.prototype.getValue=function(n,e){const t={_0x342186:2540},i=_0x3a2b68;return e=getValue_old$2.bind(this)(n,e),e.color&&this.globalAlpha!==1&&(e[i(t._0x342186)].alpha*=this.globalAlpha),e},Object[_0x3a2b68(2598)](Cesium__namespace.PolylineOutlineMaterialProperty[_0x3a2b68(4390)],{globalAlpha:{set:function(n){this._globalAlpha=n},get:function(){return this._globalAlpha??1}}});const getValue_old$1=Cesium__namespace.PolylineOutlineMaterialProperty.prototype[_0x3a2b68(3479)];Cesium__namespace[_0x3a2b68(2018)].prototype.getValue=function(n,e){const t={_0x5240b8:2540},i=_0x3a2b68;return e=getValue_old$1.bind(this)(n,e),this.globalAlpha!==1&&(e[i(t._0x5240b8)]&&(e.color[i(838)]*=this.globalAlpha),e[i(3559)]&&(e[i(3559)].alpha*=this[i(749)])),e},Object.defineProperties(Cesium__namespace.StripeMaterialProperty.prototype,{globalAlpha:{set:function(n){this._globalAlpha=n},get:function(){return this._globalAlpha??1}}});const getValue_old=Cesium__namespace.StripeMaterialProperty[_0x3a2b68(4390)].getValue;Cesium__namespace.StripeMaterialProperty[_0x3a2b68(4390)].getValue=function(n,e){const t={_0x4f6565:749,_0x3b5360:2977},i=_0x3a2b68;return e=getValue_old.bind(this)(n,e),this[i(t._0x4f6565)]!==1&&(e.evenColor&&(e.evenColor.alpha*=this.globalAlpha),e[i(t._0x3b5360)]&&(e.oddColor.alpha*=this.globalAlpha)),e},proj4.defs("EPSG:4490",_0x3a2b68(3582)),proj4.defs("EPSG:4491",_0x3a2b68(842)),proj4.defs("EPSG:4492","+proj=tmerc +lat_0=0 +lon_0=81 +k=1 +x_0=14500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4[_0x3a2b68(2445)]("EPSG:4493",_0x3a2b68(2862)),proj4.defs(_0x3a2b68(3790),"+proj=tmerc +lat_0=0 +lon_0=93 +k=1 +x_0=16500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4[_0x3a2b68(2445)]("EPSG:4495","+proj=tmerc +lat_0=0 +lon_0=99 +k=1 +x_0=17500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4496","+proj=tmerc +lat_0=0 +lon_0=105 +k=1 +x_0=18500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4497","+proj=tmerc +lat_0=0 +lon_0=111 +k=1 +x_0=19500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4498","+proj=tmerc +lat_0=0 +lon_0=117 +k=1 +x_0=20500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs(_0x3a2b68(3044),_0x3a2b68(3581)),proj4[_0x3a2b68(2445)](_0x3a2b68(4309),_0x3a2b68(4377)),proj4.defs(_0x3a2b68(2629),"+proj=tmerc +lat_0=0 +lon_0=135 +k=1 +x_0=23500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4513",_0x3a2b68(1077)),proj4[_0x3a2b68(2445)](_0x3a2b68(4011),"+proj=tmerc +lat_0=0 +lon_0=78 +k=1 +x_0=26500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4515","+proj=tmerc +lat_0=0 +lon_0=81 +k=1 +x_0=27500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs(_0x3a2b68(2647),"+proj=tmerc +lat_0=0 +lon_0=84 +k=1 +x_0=28500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4517",_0x3a2b68(2175)),proj4.defs(_0x3a2b68(3803),"+proj=tmerc +lat_0=0 +lon_0=90 +k=1 +x_0=30500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4[_0x3a2b68(2445)]("EPSG:4519","+proj=tmerc +lat_0=0 +lon_0=93 +k=1 +x_0=31500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4[_0x3a2b68(2445)]("EPSG:4520","+proj=tmerc +lat_0=0 +lon_0=96 +k=1 +x_0=32500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs(_0x3a2b68(2696),"+proj=tmerc +lat_0=0 +lon_0=99 +k=1 +x_0=33500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs(_0x3a2b68(4169),"+proj=tmerc +lat_0=0 +lon_0=102 +k=1 +x_0=34500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4[_0x3a2b68(2445)](_0x3a2b68(519),"+proj=tmerc +lat_0=0 +lon_0=105 +k=1 +x_0=35500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4524","+proj=tmerc +lat_0=0 +lon_0=108 +k=1 +x_0=36500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4[_0x3a2b68(2445)]("EPSG:4525",_0x3a2b68(1404)),proj4.defs("EPSG:4526","+proj=tmerc +lat_0=0 +lon_0=114 +k=1 +x_0=38500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4[_0x3a2b68(2445)]("EPSG:4527",_0x3a2b68(4318)),proj4.defs(_0x3a2b68(356),"+proj=tmerc +lat_0=0 +lon_0=120 +k=1 +x_0=40500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4529","+proj=tmerc +lat_0=0 +lon_0=123 +k=1 +x_0=41500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4530","+proj=tmerc +lat_0=0 +lon_0=126 +k=1 +x_0=42500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4531","+proj=tmerc +lat_0=0 +lon_0=129 +k=1 +x_0=43500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs(_0x3a2b68(2008),_0x3a2b68(2437)),proj4[_0x3a2b68(2445)]("EPSG:4533","+proj=tmerc +lat_0=0 +lon_0=135 +k=1 +x_0=45500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs(_0x3a2b68(2075),_0x3a2b68(1644)),proj4.defs(_0x3a2b68(1157),"+proj=tmerc +lat_0=0 +lon_0=81 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs(_0x3a2b68(2165),"+proj=tmerc +lat_0=0 +lon_0=87 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4505","+proj=tmerc +lat_0=0 +lon_0=93 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4506","+proj=tmerc +lat_0=0 +lon_0=99 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4[_0x3a2b68(2445)](_0x3a2b68(596),"+proj=tmerc +lat_0=0 +lon_0=105 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4508",_0x3a2b68(1759)),proj4.defs(_0x3a2b68(3024),"+proj=tmerc +lat_0=0 +lon_0=117 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs(_0x3a2b68(2479),"+proj=tmerc +lat_0=0 +lon_0=123 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4[_0x3a2b68(2445)]("EPSG:4511",_0x3a2b68(745)),proj4.defs("EPSG:4512",_0x3a2b68(1873)),proj4.defs("EPSG:4534","+proj=tmerc +lat_0=0 +lon_0=75 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4[_0x3a2b68(2445)]("EPSG:4535",_0x3a2b68(3530)),proj4[_0x3a2b68(2445)]("EPSG:4536",_0x3a2b68(3812)),proj4.defs(_0x3a2b68(2195),"+proj=tmerc +lat_0=0 +lon_0=84 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4[_0x3a2b68(2445)]("EPSG:4538","+proj=tmerc +lat_0=0 +lon_0=87 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4[_0x3a2b68(2445)]("EPSG:4539","+proj=tmerc +lat_0=0 +lon_0=90 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4[_0x3a2b68(2445)](_0x3a2b68(3639),_0x3a2b68(3856)),proj4.defs("EPSG:4541","+proj=tmerc +lat_0=0 +lon_0=96 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4[_0x3a2b68(2445)]("EPSG:4542","+proj=tmerc +lat_0=0 +lon_0=99 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs(_0x3a2b68(2946),"+proj=tmerc +lat_0=0 +lon_0=102 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4[_0x3a2b68(2445)](_0x3a2b68(4392),"+proj=tmerc +lat_0=0 +lon_0=105 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs("EPSG:4545","+proj=tmerc +lat_0=0 +lon_0=108 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4[_0x3a2b68(2445)]("EPSG:4546",_0x3a2b68(1759)),proj4.defs("EPSG:4547",_0x3a2b68(3091)),proj4[_0x3a2b68(2445)](_0x3a2b68(1615),"+proj=tmerc +lat_0=0 +lon_0=117 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs(_0x3a2b68(3447),_0x3a2b68(2307)),proj4.defs("EPSG:4550",_0x3a2b68(1849)),proj4[_0x3a2b68(2445)]("EPSG:4551",_0x3a2b68(678)),proj4[_0x3a2b68(2445)]("EPSG:4552",_0x3a2b68(745)),proj4[_0x3a2b68(2445)](_0x3a2b68(4009),"+proj=tmerc +lat_0=0 +lon_0=132 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs"),proj4.defs(_0x3a2b68(1314),"+proj=tmerc +lat_0=0 +lon_0=135 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs");class BaseClass{constructor(e){const t={_0x2765ed:813},i=_0x3a2b68;this.options=e,this[i(t._0x2765ed)]=(e==null?void 0:e.enabledEvent)??!![]}get[_0x3a2b68(3256)](){return this[_0x3a2b68({_0x519cc3:813}._0x519cc3)]}set enabledEvent(e){const t=_0x3a2b68;this[t(813)]=e}destroy(e){if(!e)for(const t in this)delete this[t]}on(e,t,i){const s={_0x54f747:1573},r=_0x3a2b68;if(!e)return logError$1("绑定事件时传入了空值",t),this;if(Array.isArray(e))for(let o=0,c=e.length;o<c;o++)this._on(e[o],t,i);else if(isObject(e))for(const o in e)this[r(s._0x54f747)](o,e[o],t);else{e=splitWords(e);for(let o=0,c=e.length;o<c;o++)this._on(e[o],t,i)}return this._onEventHook&&this._onEventHook(e),this}[_0x3a2b68(2971)](e,t,i){if(!e)delete this._events;else if(Array.isArray(e))for(let s=0,r=e.length;s<r;s++)this._off(e[s],t,i);else if(isObject(e))for(const s in e)this._off(s,e[s],t);else{e=splitWords(e);for(let s=0,r=e.length;s<r;s++)this._off(e[s],t,i)}return this}_on(e,t,i){const s={_0xb7b836:2088},r=_0x3a2b68;this[r(s._0xb7b836)]=this._events||{};let o=this._events[e];!o&&(o=[],this._events[e]=o),i===this&&(i=void 0);const c={fn:t,ctx:i},_=o;for(let l=0,d=_.length;l<d;l++)if(_[l].fn===t&&_[l].ctx===i)return;_.push(c)}_off(e,t,i){const s={_0x4fa550:400,_0x3119ae:4256},r=_0x3a2b68;let o,c,_;if(this[r(2088)]&&(o=this._events[e],!!o)){if(!t){for(c=0,_=o[r(s._0x4fa550)];c<_;c++)o[c].fn=falseFn;delete this._events[e];return}if(i===this&&(i=void 0),o)for(c=0,_=o.length;c<_;c++){const l=o[c];if(l.ctx===i&&l.fn===t){l.fn=falseFn,this._firingCount&&(this[r(2088)][e]=o=o.slice()),o[r(s._0x3119ae)](c,1);return}}}}fire(e,t,i){const s={_0x50e705:2088,_0x4eb4f0:4350},r=_0x3a2b68;if(!this.listens(e,i)||!this.enabledEvent)return this;const o={sourceTarget:this,...t,type:e,target:this,stopPropagation:function(){this._stopPropagation=!![]}};if(t!=null&&t.cloneProperty&&["cartesian"].forEach(function(_){const l=_0x20dc,d=Object.getOwnPropertyDescriptor(t,_);d&&Object[l(999)](o,_,d)}),this[r(s._0x50e705)]){const c=this._events[e];if(c){this._firingCount=this._firingCount+1||1;for(let _=0,l=c.length;_<l;_++){const d=c[_];d.fn[r(s._0x4eb4f0)](d.ctx||this,o)}this._firingCount--}}return i&&!o._stopPropagation&&this[r(2048)](o),this}listens(e,t){const i=_0x3a2b68,s=this._events&&this._events[e];if(s&&s.length)return!![];if(t){for(const r in this._eventParents)if(this[i(3936)][r].listens(e,t))return!![]}return![]}once(e,t,i){if(isObject(e)){for(const r in e)this.once(r,e[r],t);return this}const s=bind(()=>{this[_0x20dc(2971)](e,t,i).off(e,s,i)},this);return this.on(e,t,i).on(e,s,i)}addEventParent(e){return this._eventParents=this._eventParents||{},this._eventParents[stampGlobalId(e)]=e,this}removeEventParent(e){return this._eventParents&&delete this._eventParents[stampGlobalId(e)],this}hasEventParent(e){return this._eventParents&&this._eventParents[stampGlobalId(e)]?!![]:![]}_propagateEvent(e){for(const t in this._eventParents){const i=this._eventParents[t];if(this._filterPropagateEvent(i,e)){const s={layer:e.target,propagatedFrom:e.target,...e};i.fire(e.type,s,!![])}}}[_0x3a2b68(3053)](e,t){return!![]}}function falseFn(){return![]}function bind(n,e){const t={_0x4b857b:4390,_0x5b4edc:4350},i=_0x3a2b68,s=Array[i(t._0x4b857b)][i(2082)];if(n.bind)return n.bind.apply(n,s[i(4350)](arguments,1));const r=s[i(t._0x5b4edc)](arguments,2);return function(){return n.apply(e,r.length?r.concat(s.call(arguments)):arguments)}}const State={INITIALIZED:"inited",ADD:"add",ADDED:"added",REMOVED:"removed",DESTROY:"destroy"},EventType={add:_0x3a2b68(3674),remove:"remove",addItem:"addItem",removeItem:"removeItem",addGraphic:"addGraphic",removeGraphic:"removeGraphic",addLayer:"addLayer",removeLayer:"removeLayer",changeBasemap:_0x3a2b68(520),addControl:_0x3a2b68(3116),removeControl:"removeControl",updateControl:"updateControl",addEffect:_0x3a2b68(1097),removeEffect:"removeEffect",update:"update",updatePosition:"updatePosition",updateStyle:"updateStyle",updateAttr:"updateAttr",show:"show",hide:"hide",start:"start",change:_0x3a2b68(866),endItem:"endItem",end:"end",stop:_0x3a2b68(2682),zoom:"zoom",loadBefore:"loadBefore",load:"load",error:"error",loadConfig:_0x3a2b68(3134),popupOpen:_0x3a2b68(3701),popupClose:"popupClose",tooltipOpen:_0x3a2b68(355),tooltipClose:"tooltipClose",contextMenuOpen:"contextMenuOpen",contextMenuClose:"contextMenuClose",contextMenuClick:"contextMenuClick",highlightOpen:"highlightOpen",highlightClose:"highlightClose",click:"click",clickGraphic:"clickGraphic",clickTileGraphic:"clickTileGraphic",clickMap:"clickMap",dblClick:"dblClick",leftDown:"leftDown",leftUp:_0x3a2b68(3921),mouseMove:"mouseMove",mouseMoveTarget:"mouseMoveTarget",wheel:"wheel",rightClick:"rightClick",rightDown:"rightDown",rightUp:_0x3a2b68(1441),middleClick:"middleClick",middleDown:"middleDown",middleUp:"middleUp",pinchStart:_0x3a2b68(795),pinchEnd:"pinchEnd",pinchMove:"pinchMove",mouseDown:"mouseDown",mouseUp:"mouseUp",mouseOver:_0x3a2b68(2854),mouseOut:"mouseOut",keydown:"keydown",keyup:"keyup",drawStart:"drawStart",drawMouseMove:_0x3a2b68(3429),drawAddPoint:"drawAddPoint",drawRemovePoint:"drawRemovePoint",drawCreated:_0x3a2b68(465),editStart:"editStart",editMouseDown:"editMouseDown",editMouseMove:"editMouseMove",editMovePoint:"editMovePoint",editAddPoint:"editAddPoint",editRemovePoint:_0x3a2b68(3949),editStyle:"editStyle",editStop:"editStop",move:_0x3a2b68(538),initialTilesLoaded:"initialTilesLoaded",allTilesLoaded:"allTilesLoaded",addTile:"addTile",addTileSuccess:"addTileSuccess",addTileError:_0x3a2b68(2227),removeTile:"removeTile",cameraMoveStart:"cameraMoveStart",cameraMoveEnd:"cameraMoveEnd",cameraChanged:"cameraChanged",preUpdate:"preUpdate",postUpdate:"postUpdate",preRender:"preRender",postRender:"postRender",renderError:_0x3a2b68(2547),morphStart:_0x3a2b68(2253),morphComplete:"morphComplete",clockTick:"clockTick",clockStop:"clockStop",terrainChange:"terrainChange",terrainLoadError:_0x3a2b68(1141),terrainLoadSuccess:_0x3a2b68(2007),tileLoadProgress:"tileLoadProgress"};class BaseThing extends BaseClass{constructor(e={}){const t={_0x3ebe7d:2419,_0x4d5b05:1941},i=_0x3a2b68;isBoolean(e)&&(e={enabled:e}),super(e),this._id=e.id??createGuid(),this._enabled=e.enabled??!![],this._state=State[i(t._0x3ebe7d)],this[i(t._0x4d5b05)]=e}get state(){return this._state}get isAdded(){const e={_0x249f62:3104},t=_0x3a2b68;return this._state===State[t(e._0x249f62)]}get id(){return this._id}set id(e){const t=_0x3a2b68;this[t(1941)].id=e}get uuid(){return this._id}get[_0x3a2b68(3174)](){return this._enabled}set enabled(e){const t={_0xfc42b4:2024},i=_0x3a2b68;this._enabled!==e&&(this._enabled=e,this._enabledHook&&this[i(t._0xfc42b4)](e))}addTo(e){return e&&e.addThing&&e.addThing(this),this}[_0x3a2b68(1361)](e){const t={_0x243ca9:1575},i=_0x3a2b68;this[i(1575)]&&this[i(t._0x243ca9)].removeThing(this,e)}_onAdd(e){const t={_0x375e96:2006,_0x5394db:1586,_0x13ea0a:585,_0x23df2f:4052,_0x5b0f49:2679,_0x480925:3104},i=_0x3a2b68;var s;this.isAdded||this._state===State[i(843)]||(this[i(t._0x375e96)]=State.ADD,this._map=e,this[i(1941)].eventParent?this.addEventParent(this[i(1941)].eventParent):((s=this.options)===null||s===void 0?void 0:s.eventParent)===![]||this[i(t._0x5394db)](e),this[i(t._0x13ea0a)]&&!this[i(t._0x23df2f)]&&(this._mountedHook(),this._createOK=!![]),this._addedBaseHook&&this[i(4181)](),this[i(t._0x5b0f49)]&&this._addedHook(),this[i(2006)]=State[i(t._0x480925)],this[i(1109)](EventType.add))}_onRemove(){const e={_0x22d49a:1109,_0x53ab6f:509,_0x4852ae:4152},t=_0x3a2b68;var i,s;this._state===State.ADDED&&this._map&&(this._removedBaseHook&&this._removedBaseHook(),this._removedHook&&this._removedHook(),this._state=State.REMOVED,this[t(e._0x22d49a)](EventType.remove),(i=this.options)!==null&&i!==void 0&&i[t(e._0x53ab6f)]?this[t(e._0x4852ae)](this.options.eventParent):((s=this.options)===null||s===void 0?void 0:s[t(509)])===![]||this.removeEventParent(this[t(1575)]),this._map=null)}_mountedHook(){}_addedHook(){}_removedHook(){}[_0x3a2b68(3483)](e){const t={_0x25999a:1651},i=_0x3a2b68;return!e||Object[i(2953)](e).length===0?this:(this.options=merge(this.options,e),Cesium__namespace.defined(e.enabled)&&(this.enabled=e.enabled),this[i(t._0x25999a)]&&this[i(1651)](this.options,e),this)}destroy(e){const t={_0x579546:2006,_0x4a94ea:2619},i=_0x3a2b68;this[i(t._0x579546)]!==State.REMOVED&&(this.clear&&this[i(2126)](),this.remove()),super[i(t._0x4a94ea)](e)}}class GroupThing extends BaseThing{constructor(e={}){const t={_0x4bd0c0:4225},i=_0x3a2b68;super(e),this[i(t._0x4bd0c0)]=[]}get arrThing(){return this._arrThing}get hasEmptyGroup(){return this[_0x3a2b68({_0x27514b:400}._0x27514b)]===0}get hasChildThing(){return this.length>0}get length(){const e={_0x16f5e6:4059,_0x34a0b4:400,_0x1aa55a:1941},t=_0x3a2b68;var i;return((i=this[t(1941)][t(e._0x16f5e6)])===null||i===void 0?void 0:i[t(e._0x34a0b4)])>0?this[t(e._0x1aa55a)].things[t(e._0x34a0b4)]:this._arrThing.length}_enabledHook(e){this[_0x3a2b68({_0x295c49:476}._0x295c49)](s=>{s.enabled=e},this)}_addedHook(){this.addChildsToMap()}_removedHook(){this.removeMapChilds()}addChildsToMap(){this.eachThing(e=>{this._map.addThing(e)},this)}[_0x3a2b68(1315)](){this.eachThing(e=>{this._map.removeThing(e)},this)}addThing(e){const t={_0x4ffb5f:3591},i=_0x3a2b68;return e[i(t._0x4ffb5f)]&&(e.removeEventParent(e.parent),e.parent=null),e[i(3591)]=this,e.options.eventParent=this,this[i(4225)].push(e),this.isAdded&&!e.isAdded?this._map.addThing(e):(e.removeEventParent(this._map),e.addEventParent(this)),this}removeThing(e){return e.parent=null,e.removeEventParent(this),removeArrayItem(this._arrThing,e),this._map&&e.isAdded&&this._map.removeThing(e),this}eachThing(e,t){const i=_0x3a2b68;if(this._arrThing)return this[i(4225)].forEach(s=>{e[i(4350)](t,s)}),this}getThings(){return this._arrThing}getInMapChilds(){const e={_0x24901e:1754},t=_0x3a2b68,i=this[t(4225)]||[];return this[t(1575)][t(476)](s=>{const r=t;s.pid===this.id&&this[r(4225)].indexOf(s)===-1&&i[r(e._0x24901e)](s)},this),i}getThingById(e){const t=this._arrThing;if(!(!this._arrThing||this._arrThing.length===0))for(let i=0,s=t.length;i<s;i++){const r=t[i];if(r.id===e)return r}}destroy(e){const t={_0x1eb125:2619};this.eachThing(i=>{const s=_0x20dc;i!=null&&i[s(t._0x1eb125)]&&i.destroy(e)},this),super.destroy(e)}}var GroundSkyBoxFS=_0x3a2b68(4155),GroundSkyBoxVS=`in vec3 position;
uniform mat3 u_rotateMatrix;
out vec3 v_texCoord;

void main() {
  vec3 p = czm_viewRotation * u_rotateMatrix * (czm_temeToPseudoFixed * (czm_entireFrustum.y * position));//【火星科技marsgis.cn】 Hao 2019-9-18   天空盒
  gl_Position = czm_projection * vec4(p, 1.0);
  v_texCoord = position.xyz;
}
`;class GroundSkyBox extends Cesium__namespace.SkyBox{constructor(e){super(e),this._skyboxMatrix3=new Cesium__namespace.Matrix3}update(e,t){const i={_0x377beb:1640,_0x2ed3ba:3915,_0x408af2:3041,_0x246435:3392,_0x587342:2765,_0x52ed0c:723,_0xb14853:407,_0x56160c:4305,_0x5a214d:3437,_0x2657db:2635,_0x348203:3432},s={_0x658b3c:778,_0x3334f8:2478,_0x2f7838:3150},r={_0x504519:3535},o=_0x3a2b68,c=this;if(!this.show||e[o(i._0x377beb)]!==Cesium__namespace[o(i._0x2ed3ba)][o(1250)]&&e.mode!==Cesium__namespace.SceneMode.MORPHING||!e.passes.render)return;const _=e[o(i._0x408af2)];if(this[o(2587)]!==this[o(i._0x246435)]){this._sources=this.sources;const d=this.sources;if(!Cesium__namespace.defined(d[o(i._0x587342)])||!Cesium__namespace[o(407)](d[o(i._0x52ed0c)])||!Cesium__namespace[o(i._0xb14853)](d[o(i._0x56160c)])||!Cesium__namespace.defined(d.negativeY)||!Cesium__namespace.defined(d.positiveZ)||!Cesium__namespace.defined(d.negativeZ))throw new Cesium__namespace.DeveloperError("this.sources is required and must have positiveX, negativeX, positiveY, negativeY, positiveZ, and negativeZ properties.");if(typeof d.positiveX!=typeof d.negativeX||typeof d[o(2765)]!=typeof d.positiveY||typeof d[o(2765)]!=typeof d.negativeY||typeof d.positiveX!=typeof d[o(3127)]||typeof d.positiveX!=typeof d.negativeZ)throw new Cesium__namespace.DeveloperError("this.sources properties must all be the same type.");typeof d.positiveX===o(2148)?Cesium__namespace.loadCubeMap(_,this._sources).then(function(f){const g=o;c[g(3535)]=c._cubeMap&&c[g(r._0x504519)].destroy(),c._cubeMap=f}):(this._cubeMap=this._cubeMap&&this._cubeMap.destroy(),this._cubeMap=new Cesium__namespace.CubeMap({context:_,source:d}))}const l=this._command;if(!Cesium__namespace.defined(l.vertexArray)){l.uniformMap={u_cubeMap:()=>c._cubeMap,u_rotateMatrix:()=>{const g=o;return l[g(4238)]=Cesium__namespace.Transforms[g(s._0x658b3c)](e.camera._positionWC),Cesium__namespace[g(s._0x3334f8)].getMatrix3(l[g(4238)],this[g(s._0x2f7838)])}};const d=Cesium__namespace.BoxGeometry[o(1926)](Cesium__namespace.BoxGeometry.fromDimensions({dimensions:new Cesium__namespace.Cartesian3(2,2,2),vertexFormat:Cesium__namespace.VertexFormat.POSITION_ONLY})),f=this._attributeLocations=Cesium__namespace[o(i._0x5a214d)].createAttributeLocations(d);l.vertexArray=Cesium__namespace.VertexArray.fromGeometry({context:_,geometry:d,attributeLocations:f,bufferUsage:Cesium__namespace[o(i._0x2657db)].STATIC_DRAW}),l.renderState=Cesium__namespace[o(i._0x348203)][o(1945)]({blending:Cesium__namespace.BlendingState.ALPHA_BLEND})}if(!Cesium__namespace.defined(l.shaderProgram)||this._useHdr!==t){const d=new Cesium__namespace.ShaderSource({defines:[t?"HDR":""],sources:[GroundSkyBoxFS]});l.shaderProgram=Cesium__namespace[o(2036)].fromCache({context:_,vertexShaderSource:GroundSkyBoxVS,fragmentShaderSource:d,attributeLocations:this[o(1963)]}),this._useHdr=t}if(Cesium__namespace.defined(this[o(3535)]))return l}}var MultipleSkyBoxFS=_0x3a2b68(3761),MultipleSkyBoxVS=`in vec3 position;
out vec3 v_texCoord;
uniform mat3 u_rotateMatrix;

void main() {
  vec3 p = czm_viewRotation * u_rotateMatrix * (czm_temeToPseudoFixed * (czm_entireFrustum.y * position));
  gl_Position = czm_projection * vec4(p, 1.0);
  v_texCoord = position.xyz;
}
`;class MultipleSkyBox extends Cesium__namespace[_0x3a2b68(3744)]{constructor(e){const t=_0x3a2b68;super(e),this.sources2=e.sources2,this.sources3=e.sources3,this._sources2=void 0,this._sources3=void 0,this._cubeMap2=void 0,this._cubeMap3=void 0,this._skyboxMatrix3=new Cesium__namespace.Matrix3,this[t(4016)]=e.select||0}update(e,t){const i={_0x515a02:4359,_0xef1e5d:3041,_0x23dea6:407,_0x5b7a30:4305,_0x153762:2765,_0x394fab:2875,_0x4f7f55:4389,_0x581207:3535,_0x5cb48d:4233,_0x1ee844:3693,_0x4c26d6:2299,_0x3d803d:4187,_0x5e0cda:1963},s={_0x232bed:3737,_0xd34087:3693,_0x18d782:2478},r={_0x1ae068:3535},o=_0x3a2b68,c=this;if(!this.show||e[o(1640)]!==Cesium__namespace.SceneMode.SCENE3D&&e.mode!==Cesium__namespace.SceneMode.MORPHING||!e.passes[o(i._0x515a02)])return;const _=e[o(i._0xef1e5d)];if(this._sources!==this.sources){this[o(2587)]=this.sources;const d=this.sources;this._sources2=this.sources2;const f=this.sources2;this._sources3=this.sources3;const g=this.sources3;if(!Cesium__namespace[o(i._0x23dea6)](d.positiveX)||!Cesium__namespace.defined(d.negativeX)||!Cesium__namespace[o(i._0x23dea6)](d[o(i._0x5b7a30)])||!Cesium__namespace.defined(d.negativeY)||!Cesium__namespace.defined(d[o(3127)])||!Cesium__namespace.defined(d.negativeZ))throw new Cesium__namespace.DeveloperError("this.sources is required and must have positiveX, negativeX, positiveY, negativeY, positiveZ, and negativeZ properties.");if(typeof d[o(i._0x153762)]!=typeof d[o(723)]||typeof d[o(2765)]!=typeof d.positiveY||typeof d.positiveX!=typeof d.negativeY||typeof d.positiveX!=typeof d.positiveZ||typeof d.positiveX!=typeof d[o(i._0x394fab)])throw new Cesium__namespace.DeveloperError(o(1282));typeof d.positiveX=="string"?(Cesium__namespace.loadCubeMap(_,this._sources).then(function(b){const C=o;c._cubeMap=c[C(3535)]&&c[C(r._0x1ae068)].destroy(),c._cubeMap=b}),Cesium__namespace.loadCubeMap(_,this._sources2)[o(i._0x4f7f55)](function(b){c._cubeMap2=c._cubeMap2&&c._cubeMap2.destroy(),c._cubeMap2=b}),Cesium__namespace.loadCubeMap(_,this._sources3).then(function(b){c._cubeMap3=c._cubeMap3&&c._cubeMap3.destroy(),c._cubeMap3=b})):(this[o(i._0x581207)]=this._cubeMap&&this._cubeMap.destroy(),this[o(3535)]=new Cesium__namespace.CubeMap({context:_,source:d}),this[o(3308)]=this._cubeMap2&&this[o(3308)].destroy(),this._cubeMap2=new Cesium__namespace.CubeMap({context:_,source:f}),this._cubeMap3=this[o(3337)]&&this._cubeMap3.destroy(),this._cubeMap3=new Cesium__namespace.CubeMap({context:_,source:g}))}const l=this._command;if(l.modelMatrix=Cesium__namespace.Transforms.eastNorthUpToFixedFrame(e[o(i._0x5cb48d)][o(i._0x1ee844)]),!Cesium__namespace.defined(l.vertexArray)){l[o(i._0x4c26d6)]={u_cubeMap:function(){return c._cubeMap},u_cubeMap2:function(){return c[o(3308)]},u_cubeMap3:function(){return c._cubeMap3},u_select:()=>this.select,u_rotateMatrix:()=>{const g=o;return l.modelMatrix=Cesium__namespace[g(s._0x232bed)][g(778)](e[g(4233)][g(s._0xd34087)]),Cesium__namespace[g(s._0x18d782)].getMatrix3(l.modelMatrix,this._skyboxMatrix3)}};const d=Cesium__namespace[o(1357)][o(1926)](Cesium__namespace.BoxGeometry[o(1863)]({dimensions:new Cesium__namespace.Cartesian3(2,2,2),vertexFormat:Cesium__namespace.VertexFormat.POSITION_ONLY})),f=this._attributeLocations=Cesium__namespace.GeometryPipeline.createAttributeLocations(d);l.vertexArray=Cesium__namespace.VertexArray.fromGeometry({context:_,geometry:d,attributeLocations:f,bufferUsage:Cesium__namespace.BufferUsage[o(3235)]}),l[o(1251)]=Cesium__namespace.RenderState.fromCache({blending:Cesium__namespace[o(3557)].ALPHA_BLEND})}if(!Cesium__namespace.defined(l[o(i._0x3d803d)])||this._useHdr!==t){const d=new Cesium__namespace.ShaderSource({defines:[t?"HDR":""],sources:[MultipleSkyBoxFS]});l.shaderProgram=Cesium__namespace.ShaderProgram.fromCache({context:_,vertexShaderSource:MultipleSkyBoxVS,fragmentShaderSource:d,attributeLocations:this[o(i._0x5e0cda)]}),this[o(2262)]=t}if(Cesium__namespace[o(i._0x23dea6)](this._cubeMap)&&Cesium__namespace.defined(this._cubeMap2)&&Cesium__namespace[o(407)](this._cubeMap3))return l}[_0x3a2b68(4017)](){return![]}destroy(){const e={_0xba824b:4187,_0x39ff85:3535,_0x27f417:3337},t=_0x3a2b68,i=this._command;return i[t(3698)]=i.vertexArray&&i.vertexArray.destroy(),i[t(e._0xba824b)]=i.shaderProgram&&i.shaderProgram.destroy(),this._cubeMap=this[t(e._0x39ff85)]&&this[t(3535)][t(2619)](),this._cubeMap2=this._cubeMap2&&this._cubeMap2.destroy(),this._cubeMap3=this[t(3337)]&&this[t(e._0x27f417)][t(2619)](),this.destroyObject(this)}}class LocalWorldTransform{constructor(e,t){const i={_0x5ac2a3:672},s=_0x3a2b68;t=t||Cesium__namespace.Transforms.eastNorthUpToFixedFrame,this._matrix=t(e),this[s(i._0x5ac2a3)]=Cesium__namespace.Matrix4.inverseTransformation(this._matrix,new Cesium__namespace[s(2478)])}[_0x3a2b68(2040)](e,t){const i={_0x4b4796:3808},s=_0x3a2b68;return!t&&(t=new Cesium__namespace.Cartesian3),Cesium__namespace.Matrix4.multiplyByPoint(this[s(i._0x4b4796)],e,t),t}worldToLocal(e,t){const i=_0x3a2b68;return!t&&(t=new Cesium__namespace.Cartesian3),Cesium__namespace[i(2478)][i(3705)](this._inverseMatrix,e,t),t}}class MarsArray{constructor(){const e=_0x3a2b68;this._array=[],this[e(2348)]={}}get length(){return this._array.length}get values(){return this._array}[_0x3a2b68(1012)](e){return e?Cesium__namespace.defined(this._hash[e]):![]}set(e,t){const i={_0xb26b21:2348},s=_0x3a2b68,r=this[s(2348)][e];t!==r&&(this.remove(e),this[s(i._0xb26b21)][e]=t,this._array.push(t))}[_0x3a2b68(1132)](){const e=_0x3a2b68;return this._array.length>0?this._array[this._array[e(400)]-1]:void 0}get(e){return e?this[_0x3a2b68({_0xc03362:2348}._0xc03362)][e]:void 0}[_0x3a2b68(1861)](e,t="id",i="options"){const s={_0x500619:1290},r=_0x3a2b68;if(t==="id"&&this._hash[e])return this[r(2348)][e];for(let o=0,c=this[r(s._0x500619)].length;o<c;o++){const _=this[r(s._0x500619)][o];if(!_.isPrivate&&(_[t]==e||_[i]&&_[i][t]==e))return _}}getListByAttr(e,t="id",i=_0x3a2b68(1941)){const s={_0x3e7f6f:1290},r=_0x3a2b68,o=[];for(let c=0,_=this[r(s._0x3e7f6f)].length;c<_;c++){const l=this._array[c];l.isPrivate||(l[t]==e||l[i]&&l[i][t]==e)&&o.push(l)}return o}splitArr(e){const t=_0x3a2b68,i=[];for(let s=0,r=this._array.length;s<r;s+=e)i[t(1754)](this._array.slice(s,s+e));return i}remove(e){if(!this._hash)return;const t=this._hash[e],i=Cesium__namespace.defined(t);if(i){const s=this._array;s.splice(s.indexOf(t),1),delete this._hash[e]}return i}forEach(e,t,i){const s={_0x11ee96:4350,_0x27de0c:1290},r=_0x3a2b68;if(i)for(let o=this._array.length-1;o>=0;o--){const c=this._array[o];e[r(s._0x11ee96)](t||this,c,o)}else for(let o=0,c=this[r(s._0x27de0c)].length;o<c;o++){const _=this._array[o];e[r(4350)](t||this,_,o)}}[_0x3a2b68(836)](){const e=this._array;e.length>0&&(this._hash={},e.length=0)}destroy(){const e={_0x168136:1290,_0x4c3dd7:3214},t=_0x3a2b68;if(this._array.length>0&&this[t(e._0x168136)][0][t(2619)]){this.remove=function(){};for(let i=this[t(e._0x168136)].length-1;i>=0;i--){const s=this._array[i];if(s!=null&&s.destroy)try{s.destroy()}catch(r){logWarn(t(e._0x4c3dd7),r)}}}this.removeAll();for(const i in this)delete this[i]}}class Texture3{constructor(e={}){const t={_0x29fa8e:517,_0x124ddc:2791,_0x387a02:2383,_0x5f9bcf:758},i=_0x3a2b68,s=e.context,r=s._gl,o=e.source;let c=e[i(t._0x29fa8e)],_=e.height,l=e.depth;if(Cesium__namespace.defined(o)&&(!Cesium__namespace[i(407)](c)&&(c=Cesium__namespace.defaultValue(o.videoWidth,o.width)),!Cesium__namespace.defined(_)&&(_=Cesium__namespace[i(2623)](o.videoHeight,o.height)),!Cesium__namespace.defined(l)&&(l=Cesium__namespace[i(2623)](o.videoDepth,o.depth))),!Cesium__namespace.defined(c)||!Cesium__namespace.defined(_)||!Cesium__namespace.defined(l))throw new Cesium__namespace.DeveloperError("options requires a source field to create an initialized texture or width or height and depth fields to create a blank texture.");const d=Cesium__namespace.defaultValue(e.pixelFormat,Cesium__namespace.PixelFormat.RGBA),f=Cesium__namespace[i(2623)](e.pixelDatatype,Cesium__namespace.PixelDatatype.FLOAT),g=Cesium__namespace.PixelFormat.toInternalFormat(d,f,s),b=![],C=![];let P=4;Cesium__namespace[i(407)](o)&&Cesium__namespace[i(407)](o[i(3270)])&&(P=Cesium__namespace.PixelFormat.alignmentInBytes(d,f,c));const S=r.TEXTURE_3D,L=r.createTexture();if(r.activeTexture(r.TEXTURE0),r.bindTexture(S,L),r.pixelStorei(r.UNPACK_ALIGNMENT,P),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,r[i(4280)]),r.pixelStorei(r[i(t._0x124ddc)],C),Cesium__namespace.defined(o)&&Cesium__namespace.defined(o[i(3270)])){const M=o[i(3270)];r.texImage3D(S,0,g,c,_,l,0,d,Cesium__namespace.PixelDatatype.toWebGLConstant(f,s),M)}r.bindTexture(S,null);const E=texture3DSizeInBytes(d,f,c,_,l);this[i(t._0x387a02)]=Cesium__namespace.createGuid(),this._context=s,this._textureFilterAnisotropic=s._textureFilterAnisotropic,this._texture=L,this._textureTarget=S,this._internalFormat=g,this[i(t._0x5f9bcf)]=d,this._pixelDatatype=f,this._width=c,this._height=_,this[i(431)]=l,this._hasMipmap=![],this._sizeInBytes=E,this._preMultiplyAlpha=b,this[i(2835)]=C,this._initialized=!![],this._dimensions=new Cesium__namespace.Cartesian3(c,_,l),this._sampler=void 0,this.sampler=Cesium__namespace.defaultValue(e.sampler,new Cesium__namespace.Sampler)}get id(){return this._id}get sampler(){return this[_0x3a2b68({_0x56d0f7:2244}._0x56d0f7)]}set sampler(e){const t={_0xd31d89:2372,_0x73ed4d:2786,_0x229079:4112,_0x32ab9c:1083,_0x4cd0fa:1675,_0x40b7d7:2064,_0x322a1c:554},i=_0x3a2b68,s=e[i(1943)],r=e.magnificationFilter,o=this[i(t._0xd31d89)],c=o[i(2973)],_=this._textureTarget;c.activeTexture(c[i(t._0x73ed4d)]),c.bindTexture(_,this[i(t._0x229079)]),c.texParameteri(_,c[i(t._0x32ab9c)],s),c[i(t._0x4cd0fa)](_,c[i(t._0x40b7d7)],r),c.texParameteri(_,c.TEXTURE_WRAP_S,e.wrapS),c.texParameteri(_,c[i(t._0x322a1c)],e.wrapT),c.texParameteri(_,c.TEXTURE_WRAP_R,c.CLAMP_TO_EDGE),c.bindTexture(_,null),this[i(2244)]=e}get pixelFormat(){return this[_0x3a2b68({_0x37fddc:758}._0x37fddc)]}get pixelDatatype(){return this[_0x3a2b68(1414)]}get[_0x3a2b68(2698)](){return this._dimensions}get height(){return this._height}get depth(){return this._depth}get preMultiplyAlpha(){return this._preMultiplyAlpha}get flipY(){return this._flipY}get sizeInBytes(){return this._sizeInBytes}get _target(){return this._textureTarget}isDestroyed(){return![]}destroy(){const e={_0x4c89c8:3813,_0x48b73f:4112},t=_0x3a2b68;return this._context._gl[t(e._0x4c89c8)](this[t(e._0x48b73f)]),Cesium__namespace.destroyObject(this)}}function texture3DSizeInBytes(n,e,t,i,s){const r={_0x3185a2:833},o=_0x3a2b68,c=Cesium__namespace.PixelFormat.componentsLength(n),_=Cesium__namespace[o(3784)][o(r._0x3185a2)](e);return t*i*s*c*_}const ChinaCRS={WGS84:_0x3a2b68(1859),GCJ02:"GCJ02",BAIDU:"BD09"};let ion="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJlZDJjMTcwNS04ZDVmLTQzNWQtYWUyZC0yMTJkMDkyMzkyMjMiLCJpZCI6MTQ4MiwiaWF0IjoxNjQ4NDQ2OTIwfQ.7e1QUkx_k-mZBxKz9tV8a5TFEorrlLlkfcVNNPzfTQY";function updateIon(n){const e=_0x3a2b68;ion=n,Cesium__namespace[e(419)].defaultAccessToken=n}let mapbox="sk.eyJ1IjoibWFyc2dpcyIsImEiOiJjbDFhYXQ3a2EwaHF6M2NvdnhmdjR6ajZ2In0.-sahm9R0QuPP3pAihJHC4A";function updateMapbox(n){mapbox=n}let bing=_0x3a2b68(3941);function updateBing(n){bing=n}const tiandituArr=["789e558be762ff832392a0393fd8a4f1",_0x3a2b68(3802),"d083e4cf30bfc438ef93436c10c2c20a",_0x3a2b68(2434)];let tianditu=getArrayRandomOne(tiandituArr);function updateTianditu(n){const e={_0xf1b21f:400},t=_0x3a2b68;tiandituArr.splice(0,tiandituArr[t(e._0xf1b21f)]),Array.isArray(n)?n.forEach(i=>{tiandituArr.push(i)}):tiandituArr.push(n),tianditu=getArrayRandomOne(tiandituArr)}const gaodeArr=["65892a265537810eba29eeae73649a71","0ee24126ea61ec60a670675fd8cd29b1","fe80f2290b380cfed86c62e3edec169e","044b5684de2b2009a15084eb8b88f822","6e5d9f46b78cfb5b5ab3d407dad8fd14","ad5f8b9d03f38f8f312025c80cfff4e3","ee24b622294b5bc659fb92fe81084776"];let gaode=getArrayRandomOne(gaodeArr);function updateGaode(n){const e=_0x3a2b68;gaodeArr.splice(0,gaodeArr.length),Array[e(391)](n)?n.forEach(t=>{gaodeArr.push(t)}):gaodeArr.push(n),gaode=getArrayRandomOne(gaodeArr)}const baiduArr=["LvhIlDXT60I3NePicXWQT5K0eHFCR4hD","nLUUSRsSBRSVmtxfaGKPaN3mXf6jiivf","qWM3MBm5oWLI06sa3A3otnpaxGQr8jIw","R7KAL3f6AttldwwicmVXnYkN7EHCY729"];let baidu=getArrayRandomOne(baiduArr);function updateBaidu(n){const e=_0x3a2b68;baiduArr.splice(0,baiduArr.length),Array.isArray(n)?n[e(3782)](t=>{baiduArr.push(t)}):baiduArr[e(1754)](n),baidu=getArrayRandomOne(baiduArr)}function updateAll(n){const e={_0x380292:2528,_0x2e5590:3018,_0x2df012:2824,_0x23eb95:441},t=_0x3a2b68;n.tianditu&&updateTianditu(n[t(e._0x380292)]),n[t(1151)]&&updateGaode(n.gaode),n.baidu&&updateBaidu(n[t(e._0x2e5590)]),n.ion&&updateIon(n.ion),n[t(e._0x2df012)]&&updateMapbox(n[t(2824)]),n.bing&&updateBing(n[t(e._0x23eb95)])}var Token={__proto__:null,get ion(){return ion},updateIon,get mapbox(){return mapbox},updateMapbox,get bing(){return bing},updateBing,tiandituArr,get tianditu(){return tianditu},updateTianditu,gaodeArr,get gaode(){return gaode},updateGaode,baiduArr,get baidu(){return baidu},updateBaidu,updateAll};const Color$2=Cesium__namespace[_0x3a2b68(4208)][_0x3a2b68(2209)],PolylineDash=Cesium__namespace.Material.PolylineDashType,LineDotDash=_0x3a2b68(1619),PolylineOutline=Cesium__namespace.Material.PolylineOutlineType,PolylineArrow=Cesium__namespace.Material[_0x3a2b68(2646)],PolylineGlow=Cesium__namespace.Material[_0x3a2b68(3196)],LineFlow=_0x3a2b68(737),LineFlowColor=_0x3a2b68(2965),ODLine="ODLine",LineFlicker="LineFlicker",LineTrail=_0x3a2b68(3119),LineBloom=_0x3a2b68(977),DigitalFlow="DigitalFlow",LineThreeDash=_0x3a2b68(2104),WallScroll="WallScroll",Image$1=Cesium__namespace[_0x3a2b68(4208)].ImageType,Image2="Image2",Text=_0x3a2b68(2316),Grid=Cesium__namespace.Material.GridType,Checkerboard=Cesium__namespace.Material.CheckerboardType,Stripe=Cesium__namespace.Material.StripeType,PolyGradient=_0x3a2b68(2198),PolyAsphalt="PolyAsphalt",PolyBlob="PolyBlob",PolyFacet="PolyFacet",PolyGrass=_0x3a2b68(645),PolyWood="PolyWood",NeonLight=_0x3a2b68(4018),Water$1=Cesium__namespace.Material.WaterType,WaterLight=_0x3a2b68(2821),RectSlide="RectSlide",ScanLine="ScanLine",CircleScan=_0x3a2b68(636),CircleWave="CircleWave",RadarLine=_0x3a2b68(3721),RadarWave=_0x3a2b68(1051),CylinderWave="CylinderWave",EllipsoidElectric="EllipsoidElectric",EllipsoidWave=_0x3a2b68(1211);var MaterialType$1={__proto__:null,Color:Color$2,PolylineDash,LineDotDash,PolylineOutline,PolylineArrow,PolylineGlow,LineFlow,LineFlowColor,ODLine,LineFlicker,LineTrail,LineBloom,DigitalFlow,LineThreeDash,WallScroll,Image:Image$1,Image2,Text,Grid,Checkerboard,Stripe,PolyGradient,PolyAsphalt,PolyBlob,PolyFacet,PolyGrass,PolyWood,NeonLight,Water:Water$1,WaterLight,RectSlide,ScanLine,CircleScan,CircleWave,RadarLine,RadarWave,CylinderWave,EllipsoidElectric,EllipsoidWave};const LayerType={},ControlType={},EffectType={},LangType={ZH:0,ZHHK:1,EN:2},MoveType={ENLARGE:0,NARROW:1,LEFT_ROTATE:2,RIGHT_ROTATE:3,TOP_ROTATE:4,BOTTOM_ROTATE:5},ClipType={Z:1,ZR:2,X:3,XR:4,Y:5,YR:6},Icon={Delete:"fa fa-trash-o",Coordinates:"fa fa-info-circle",CameraInfo:"fa fa-camera-retro",Camera:"fa fa-street-view",UndergroundNo:"fa fa-ban",UndergroundYes:_0x3a2b68(2282),RotatePointStart:"fa fa-retweet",RotatePointStop:"fa fa-remove",FlyToPoint:"fa fa-send-o",FirstPerspective:"fa fa-male",KeyboardRoamYes:"fa fa-keyboard-o",KeyboardRoamNo:_0x3a2b68(386),TrackedEntityYes:"fa fa-lock",TrackedEntityNo:"fa fa-unlock-alt",Tileset:"fa fa-building-o",TilesetWireframeYes:"fa fa-connectdevelop",TilesetWireframeNo:_0x3a2b68(3227),TilesetBoundingVolumeYes:"fa fa-codepen",TilesetBoundingVolumeNo:_0x3a2b68(2995),Terrain:_0x3a2b68(3966),TerrainYes:_0x3a2b68(471),TerrainNo:"fa fa-medium",TerrainWireframeYes:"fa fa-connectdevelop",TerrainWireframeNo:"fa fa-connectdevelop",Measure:_0x3a2b68(478),MeasureDistance:"fa fa-minus",MeasureArea:_0x3a2b68(471),MeasureHeight:"fa fa-sort-amount-asc",MeasureAngle:_0x3a2b68(2747),Draw:_0x3a2b68(2695),DrawPoint:"fa fa-map-marker",DrawPolyline:_0x3a2b68(1417),DrawPolygon:"fa fa-medium",DrawCircle:_0x3a2b68(4171),DrawRectangle:_0x3a2b68(2907),DrawEditYes:"fa fa-pencil",DrawEditNo:"fa fa-pencil-square",DrawDownJson:_0x3a2b68(4294),Effect:"fa fa-rss",RainEffectYes:_0x3a2b68(891),RainEffectNo:"fa fa-tint",SnowEffectYes:"fa fa-yelp",SnowEffectNo:"fa fa-yelp",FogEffectYes:"fa fa-spinner",FogEffectNo:"fa fa-spinner",BloomEffectYes:"fa fa-bullseye",BloomEffectNo:"fa fa-bullseye",BrightnessEffectYes:"fa fa-trello",BrightnessEffectNo:"fa fa-trello",NightVisionEffectYes:"fa fa-dashboard",NightVisionEffectNo:"fa fa-dashboard",BlackAndWhiteEffectYes:_0x3a2b68(3405),BlackAndWhiteEffectNo:_0x3a2b68(3405),OutlineEffectYes:"fa fa-ticket",OutlineEffectNo:_0x3a2b68(743),Scene:"fa fa-gear",DepthTestYes:"fa fa-eye-slash",DepthTestNo:"fa fa-eye",SkyBoxYes:"fa fa-moon-o",SkyBoxNo:"fa fa-moon-o",ShadowYes:"fa fa-sun-o",ShadowNo:"fa fa-sun-o",SkyAtmosphereYes:"fa fa-soundcloud",SkyAtmosphereNo:_0x3a2b68(411),ExpImage:"fa fa-download"};function create$3(n,e,t){const i={_0x5288f5:997},s=_0x3a2b68,r=document.createElement(n);return r[s(i._0x5288f5)]=e||"",t&&t.appendChild(r),r}function createSvg(n,e,t,i){const s={_0xeb45cf:2377},r=_0x3a2b68,o=document[r(1816)]("http://www.w3.org/2000/svg","svg:svg");o.setAttribute("class","svg-path"),o.setAttribute("width",n),o.setAttribute("height",e),o.setAttribute("viewBox","0 0 "+n+" "+e);const c=document.createElementNS("http://www.w3.org/2000/svg",r(1699));return c[r(s._0xeb45cf)]("d",t),o.appendChild(c),i&&i.appendChild(o),o}function createVideo(n,e,t,i){const s={_0xecadbb:348,_0x3e1993:2377,_0x225d45:400},r=_0x3a2b68,o=create$3(r(s._0xecadbb),t,i);o.setAttribute("autoplay",!![]),o.setAttribute("loop",!![]),o[r(s._0x3e1993)]("crossorigin",!![]),!e&&(e=n.substring(n.lastIndexOf(".")+1,n[r(s._0x225d45)]));const c=create$3("source","",o);return c.setAttribute("src",n),c.setAttribute(r(1603),r(3222)+e),o}function get(n){return typeof n=="string"?document[_0x3a2b68(1476)](n):n}function parseDom(n,e,t){const i=document.createElement("div");return t&&(i.className=t),i.innerHTML=n,e?i:i.childNodes}function remove(n){if(n=get(n),!n)return;const e=n.parentNode;e&&e.removeChild(n)}function empty(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function getStyle(n,e){const t={_0x18d2d0:2748,_0xd93184:1991,_0x66d13b:3033,_0x29ee7f:2914},i=_0x3a2b68;let s=n[i(t._0x18d2d0)][e]||n[i(t._0xd93184)]&&n.currentStyle[e];if((!s||s==="auto")&&document[i(3033)]){const r=document[i(t._0x66d13b)][i(t._0x29ee7f)](n,null);s=r?r[e]:null}return s==="auto"?null:s}function hasClass(n,e){const t=_0x3a2b68;if(!n)return![];if(n.classList!==void 0)return n[t(2470)].contains(e);const i=getClass$3(n);return i[t(400)]>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(i)}function addClass(n,e){const t={_0x59e63a:400,_0x78e9d1:2470},i=_0x3a2b68;if(n){if(n[i(2470)]!==void 0){const s=splitWords(e);for(let r=0,o=s[i(t._0x59e63a)];r<o;r++)n[i(t._0x78e9d1)].add(s[r])}else if(!hasClass(n,e)){const s=getClass$3(n);setClass(n,(s?s+" ":"")+e)}}}function removeClass(n,e){const t=_0x3a2b68;n&&(n.classList!==void 0?n.classList[t(1361)](e):setClass(n,trim((" "+getClass$3(n)+" ").replace(" "+e+" "," "))))}function setClass(n,e){const t={_0x34eba1:997,_0x3ff15e:3475},i=_0x3a2b68;!n[i(t._0x34eba1)]||!n[i(997)][i(t._0x3ff15e)]?n.className=e:n[i(t._0x34eba1)].baseVal=e}function getClass$3(n){const e=_0x3a2b68;var t;return n.correspondingElement&&(n=n.correspondingElement),(t=n.className)!==null&&t!==void 0&&t.baseVal?n.className[e(3475)]:n.className}function copyCanvas(n){const e={_0x11aff3:4241},t=_0x3a2b68,i=n.getContext("2d",{willReadFrequently:!![]}).getImageData(0,0,n.width,n.height),s=document[t(4095)](t(679));s.width=n.width,s.height=n.height;const r=s.getContext("2d",{willReadFrequently:!![]});return r.clearRect(0,0,s.width,s[t(e._0x11aff3)]),r.putImageData(i,0,0),s}var DomUtil={__proto__:null,create:create$3,createSvg,createVideo,get,parseDom,remove,empty,getStyle,hasClass,addClass,removeClass,setClass,getClass:getClass$3,copyCanvas};function getCenter(n){const e={_0x58f856:3532},t=_0x3a2b68;try{const i=n.canvas,s=new Cesium__namespace[t(e._0x58f856)](i.clientWidth/2,i.clientHeight/2),r=n.camera[t(3229)](s);let o=n.globe.pick(r,n);return!o&&(o=n.camera.pickEllipsoid(s)),o?LngLatPoint.fromCartesian(o):void 0}catch{return}}function getExtent(n,e={}){const t={_0x12d6ce:1462,_0x323a0b:3402,_0x1239c4:2269,_0x4568d0:517,_0x34d013:3402,_0x1e0fc0:528,_0x13c8a2:2806,_0x567034:2269,_0x388775:3501,_0x3a3aa4:3198,_0x265589:4241,_0x12bc9b:4233,_0x479994:409,_0x2ae675:4241,_0x426c46:4241,_0xc917aa:4241,_0x457ea2:3501,_0x470018:826,_0x527563:941,_0x475cd5:528},i=_0x3a2b68,s={xmin:70,xmax:140,ymin:0,ymax:55,height:0},r=n.scene,o=r[i(t._0x12d6ce)].ellipsoid,c=r.canvas,_=n.camera.pickEllipsoid(new Cesium__namespace.Cartesian2(0,0),o);if(_){const d=o[i(t._0x323a0b)](_);s.xmin=Cesium__namespace.Math.toDegrees(d.longitude),s[i(t._0x1239c4)]=Cesium__namespace.Math.toDegrees(d.latitude),s[i(4241)]=Math.max(s.height,d[i(4241)])}else{const d=c[i(t._0x4568d0)]/2,f=c.height/2;let g;for(let b=0;b<=f;b+=10){const C=b<=d?b:d;if(g=n[i(4233)].pickEllipsoid(new Cesium__namespace.Cartesian2(C,b),o),g)break}if(g){const b=o[i(t._0x34d013)](g);s[i(t._0x1e0fc0)]=Cesium__namespace[i(t._0x13c8a2)].toDegrees(b.longitude),s[i(t._0x567034)]=Cesium__namespace.Math[i(t._0x388775)](b[i(3664)]),s.height=Math[i(t._0x3a3aa4)](s.height,b[i(t._0x265589)])}}const l=n[i(t._0x12bc9b)][i(t._0x479994)](new Cesium__namespace.Cartesian2(c.width,c[i(t._0x2ae675)]),o);if(l){const d=o.cartesianToCartographic(l);s.xmax=Cesium__namespace.Math.toDegrees(d.longitude),s.ymin=Cesium__namespace[i(2806)].toDegrees(d.latitude),s.height=Math.max(s[i(t._0x426c46)],d.height)}else{const d=c.width/2,f=c.height/2;let g;for(let b=c[i(t._0xc917aa)];b>=f;b-=10){const C=b>=d?b:d;if(g=n.camera.pickEllipsoid(new Cesium__namespace.Cartesian2(C,b),o),g)break}if(g){const b=o[i(3402)](g);s.xmax=Cesium__namespace[i(2806)][i(t._0x457ea2)](b.longitude),s.ymin=Cesium__namespace[i(t._0x13c8a2)].toDegrees(b.latitude),s[i(t._0xc917aa)]=Math.max(s[i(t._0xc917aa)],b.height)}}if(s){if(s.xmax<s.xmin){const d=s.xmax;s.xmax=s.xmin,s.xmin=d}if(s.ymax<s.ymin){const d=s.ymax;s[i(2269)]=s[i(941)],s[i(941)]=d}if(Cesium__namespace.defined(e[i(826)])){const d=e[i(t._0x470018)],f=(s.xmax-s.xmin)/2*d,g=(s.ymax-s.ymin)/2*d;s.xmin-=f,s.xmax+=f,s[i(t._0x527563)]-=g,s.ymax+=g}return e.formatNum&&(s[i(t._0x475cd5)]=formatNum$1(s.xmin,LngLatPoint.FormatLength),s.xmax=formatNum$1(s[i(4353)],LngLatPoint.FormatLength),s.ymin=formatNum$1(s.ymin,LngLatPoint[i(2637)]),s.ymax=formatNum$1(s.ymax,LngLatPoint.FormatLength)),s}}function getCameraView(n,e){const t={_0x860c4:2637,_0x1407db:2637,_0x30848c:1879,_0x4241bb:2806,_0x30c11d:3501,_0x1ecbd8:2782,_0x37ad6f:3501,_0xc53fba:3501},i=_0x3a2b68,s=n.positionCartographic,r={};return r[i(671)]=formatNum$1(Cesium__namespace[i(2806)].toDegrees(s.latitude),LngLatPoint[i(t._0x860c4)]),r.lng=formatNum$1(Cesium__namespace.Math.toDegrees(s.longitude),LngLatPoint[i(t._0x1407db)]),(e==null?void 0:e.simplify)??!![]?(r[i(t._0x30848c)]=formatNum$1(s[i(4241)],1),r.heading=formatNum$1(Cesium__namespace.Math.toDegrees(n.heading||0)%360,1),r.pitch=formatNum$1(Cesium__namespace[i(t._0x4241bb)][i(t._0x30c11d)](n.pitch||0)%360,1)):(r[i(t._0x30848c)]=formatNum$1(s.height,LngLatPoint.FormatAltLength),r[i(t._0x1ecbd8)]=formatNum$1(Cesium__namespace.Math[i(t._0x37ad6f)](n.heading||0)%360,2),r.pitch=formatNum$1(Cesium__namespace.Math[i(t._0xc53fba)](n[i(1630)]||0)%360,2),r.roll=formatNum$1(Cesium__namespace.Math.toDegrees(n.roll||0)%360,2)),r}function expImage(n,e={}){const t={_0x176b23:4359,_0x4af10f:679,_0x4bdf4c:3379,_0x2b5c4d:4291,_0x5c2486:2767};return new Promise((i,s)=>{const r={_0x21d7af:4241,_0x49a9f9:2985,_0x17410e:3786,_0x5da2b8:1603},o=_0x20dc;e[o(3015)]=e.download??!![],e.type=e.type??"image/jpeg",n[o(t._0x176b23)]();const c=n[o(t._0x4af10f)][o(3786)](e.type,e.encoderOptions),_=n.canvas.height,l=n.canvas.width;if(Cesium__namespace.defined(e[o(517)])||Cesium__namespace.defined(e.height)){const d=new Image;d.onload=function(){const f=o;let g,b;if(Cesium__namespace.defined(e.width)&&!Cesium__namespace[f(407)](e.height))g=e[f(517)],b=Math.round(g*_/l);else if(Cesium__namespace.defined(e[f(r._0x21d7af)])&&!Cesium__namespace[f(407)](e.width))b=e[f(4241)],g=Math.round(b*l/_);else{const D=e[f(517)]/l,R=e.height/_;D>R?(g=e.width,b=Math.round(g*_/l)):(b=e[f(4241)],g=Math.round(b*l/_))}const C=document.createElement("canvas");C.width=e.width||g,C.height=e.height||b;const P=C[f(r._0x49a9f9)]("2d",{willReadFrequently:!![]}),S=(C.width-g)/2,L=(C.height-b)/2;P.drawImage(d,S,L,g,b);const E=C[f(r._0x17410e)](e[f(r._0x5da2b8)],e[f(762)]);if(!e.filename&&(e[f(4291)]="场景出图_"+C.width+"x"+C.height),e.download){let D=e.filename;e.type==="image/jpeg"&&(D=D+".jpg"),downloadBase64Image(D,E)}const M={image:E,width:C.width,height:C[f(r._0x21d7af)]};e.callback&&e[f(2767)](M),i(M)},d[o(t._0x4bdf4c)]=c}else{!e[o(t._0x2b5c4d)]&&(e[o(t._0x2b5c4d)]="场景出图_"+l+"x"+_),e.download&&downloadBase64Image(e.filename,c);const d={image:c,width:l,height:_};e[o(t._0x5c2486)]&&e.callback(d),i(d)}})}function pick3DTileset(n,e){const t={_0x36a7cd:407},i=_0x3a2b68;if(!e)return null;e instanceof Cesium__namespace.Cartesian3&&(e=[e]);for(let s=0,r=e.length;s<r;++s){const o=e[s],c=Cesium__namespace.SceneTransforms.wgs84ToWindowCoordinates(n,o);if(!Cesium__namespace.defined(c))continue;const _=n[i(1660)](c,10,10);if(Cesium__namespace[i(t._0x36a7cd)](_)&&Cesium__namespace.defined(_.primitive)&&_.primitive instanceof Cesium__namespace.Cesium3DTileset)return _.primitive}return null}class SurfacePoint{constructor(e){const t={_0x236fbd:3244,_0x4b88f4:3601},i=_0x3a2b68;this.options=e,this.scene=e.map?e[i(t._0x236fbd)].scene:e[i(744)],!this.scene&&logError$1("SurfacePoint: 请传入scene参数",this.options),this[i(3601)]=LngLatPoint.parse(e.position),this._point&&(this._position=this[i(t._0x4b88f4)].toCartesian(),this._cartographic=this._point[i(1536)](),this[i(558)]=this._point.alt)}async start(){const e={_0x2b41cc:744,_0x461eab:1319,_0x144911:888,_0x13adc9:2656,_0x5f46af:1941,_0x5723b3:2101,_0xfefb4e:407,_0x5bf47f:407,_0x123d73:4241,_0x32e726:1462},t=_0x3a2b68;if(!this._point)return this.getResult();this[t(e._0x2b41cc)]._terrainProviderPromise&&await this.scene[t(4193)];const i=this.options[t(e._0x461eab)]??Cesium__namespace.defined(pick3DTileset(this[t(e._0x2b41cc)],this._position)),s=!(this.scene.terrainProvider instanceof Cesium__namespace.EllipsoidTerrainProvider);if(this[t(e._0x144911)]=i,this[t(483)]=s,!s&&!i)return this[t(1503)]();if(i){const r=await this[t(e._0x2b41cc)][t(e._0x13adc9)]([this[t(1187)].clone()],this.options.objectsToExclude,this[t(e._0x5f46af)].width);if(r.length>0){const o=r[0];if(Cesium__namespace[t(407)](o)){const c=Cesium__namespace.Cartographic[t(e._0x5723b3)](o),_=c==null?void 0:c.height;if(Cesium__namespace.defined(_)&&_>-1e3)return this.getResult(_)}}else{const o=this[t(e._0x2b41cc)][t(1063)](this._cartographic,this[t(1941)].objectsToExclude,this.options.width);if(Cesium__namespace[t(e._0xfefb4e)](o)&&o>-1e3)return this.getResult(o)}}if(this[t(483)]){const r=await Cesium__namespace.sampleTerrainMostDetailed(this.scene[t(2531)],[this._cartographic]);if(r[t(400)]>0){const o=r[0];if(Cesium__namespace[t(e._0x5bf47f)](o)&&Cesium__namespace.defined(o[t(e._0x123d73)]))return this.getResult(o.height)}else return this.getResult(this.scene[t(e._0x32e726)].getHeight(this._cartographic)||0)}return this.getResult()}[_0x3a2b68(1503)](e=0){const t={_0x45fd38:2767},i=_0x3a2b68;return this.options.callback&&this[i(1941)][i(t._0x45fd38)](e),this[i(3601)].alt=e,{height:e,height_original:this._height_original,point:this._point,position:Cesium__namespace[i(2978)].fromRadians(this._cartographic.longitude,this._cartographic.latitude,e),position_original:this._position,has3dtiles:this._has3dtiles,hasTerrain:this._hasTerrain}}}function getTransFun(n,e){if(!n||!e)return![];if(n=crsName2FunName(n),e=crsName2FunName(e),e===n)return![];const t=n+"2"+e;return PointTrans[t]?PointTrans[t]:![]}function crsName2FunName(n){const e={_0x3a5154:764},t=_0x3a2b68;switch(n){case ChinaCRS[t(e._0x3a5154)]:return t(2541);case ChinaCRS.BAIDU:return"bd";case ChinaCRS.WGS84:default:return"wgs"}}function getPositionValue(n,e){const t={_0x42fee6:1885,_0x59608e:557},i=_0x3a2b68;if(!n)return n;let s;return n instanceof Cesium__namespace.Cartesian3?s=n:n[i(t._0x42fee6)]&&n._value instanceof Cesium__namespace.Cartesian3?s=n._value:typeof n.getValue=="function"&&(s=n.getValue(e||Cesium__namespace[i(t._0x59608e)].now())),s}function getMaxHeight(n,e=0){const t={_0x433063:1879},i=_0x3a2b68;if(n==null||n.length===0)return e;let s=e;for(let r=0;r<n.length;r++){const o=LngLatPoint.parse(n[r]);r===0&&(s=o.alt),o.alt>s&&(s=o[i(t._0x433063)])}return formatNum(s,LngLatPoint.FormatAltLength)}function formatNum(n,e=0){const t=Math.pow(10,e);return Math.round(n*t)/t}function getMinHeight(n,e=0){const t={_0x5ac8b9:400,_0x26e58f:400},i=_0x3a2b68;if(n==null||n[i(t._0x5ac8b9)]===0)return e;let s=e;for(let r=0;r<n[i(t._0x26e58f)];r++){const o=Cesium__namespace[i(2228)].fromCartesian(n[r]);r===0&&(s=o.height),o.height<s&&(s=o.height)}return formatNum(s,LngLatPoint.FormatAltLength)}function addPositionsHeight(n,e=0){const t={_0x4246ac:3664,_0x1863e4:2101,_0x1540e7:3664},i=_0x3a2b68;if(e=Number(e),isNaN(e)||e===0)return n;if(Array.isArray(n)){const s=[];for(let r=0,o=n.length;r<o;r++){const c=Cesium__namespace.Cartographic.fromCartesian(n[r]),_=Cesium__namespace.Cartesian3.fromRadians(c.longitude,c[i(t._0x4246ac)],c.height+e);s.push(_)}return s}else{const s=Cesium__namespace.Cartographic[i(t._0x1863e4)](n);return Cesium__namespace.Cartesian3.fromRadians(s.longitude,s[i(t._0x1540e7)],s[i(4241)]+e)}}function setPositionsHeight(n,e=0){const t={_0x480491:400,_0x1f6060:2228,_0x3799c9:1339,_0x481965:2978},i=_0x3a2b68;if(!n)return n;if(Array.isArray(n)){const s=[];for(let r=0,o=n[i(t._0x480491)];r<o;r++){const c=Cesium__namespace[i(t._0x1f6060)].fromCartesian(n[r]),_=Cesium__namespace.Cartesian3[i(t._0x3799c9)](c.longitude,c.latitude,e);s.push(_)}return s}else{const s=Cesium__namespace[i(2228)].fromCartesian(n);return Cesium__namespace[i(t._0x481965)].fromRadians(s.longitude,s.latitude,e)}}function getHeight(n,e,t={}){const i={_0xa07262:2531,_0x37f4c2:1462},s=_0x3a2b68,r=LngLatPoint[s(738)](e);if(!n||!r)return 0;const o=r.toCartesian(),c=t.has3dtiles??Cesium__namespace.defined(pick3DTileset(n,o));if(!!!n[s(i._0xa07262)][s(1084)]&&!c)return 0;const l=r.toCartographic();if(c){const f=n.sampleHeight(l,t.objectsToExclude,t.width);if(Cesium__namespace[s(407)](f)&&f>-1e3)return f}const d=n[s(i._0x37f4c2)][s(4026)](l);return Cesium__namespace.defined(d)&&d>-1e3?d:0}function getSurfaceHeight(n,e,t={}){return t.scene=n,t.position=e,new SurfacePoint(t).start()}function getSurfaceTerrainHeight(n,e){const t=_0x3a2b68,i={scene:n,position:e,has3dtiles:![]};return new SurfacePoint(i)[t(3702)]()}function getSurfacePosition(n,e,t={}){const i={_0x1ab567:2785},s=_0x3a2b68;if(!e)return e;n.scene&&(n=n.scene);let r=getHeight(n,e,t);if(r!==0||Cesium__namespace.defined(t.maxHeight)&&r<=t[s(2627)]){const o=Cesium__namespace.Cartographic.fromCartesian(e);return t[s(i._0x1ab567)]&&(r+=o.height),Cesium__namespace[s(2978)].fromRadians(o.longitude,o.latitude,r)}return e}function hasPickedModel(n,e){const t=_0x3a2b68;if(Cesium__namespace.defined(n.id)){const i=n.id;if(i[t(1711)]||e&&i===e)return i}if(Cesium__namespace.defined(n.primitive)){const i=n.primitive;if(i._noMousePick||e&&i===e)return i}if(Cesium__namespace.defined(n.tileset)){const i=n.tileset;if(i._noMousePick||e&&i===e)return i}return null}function getCurrentMousePosition(n,e,t){const i={_0xb8da0c:1660,_0x6c9cbc:2631,_0x1267d3:407,_0xb287c9:442,_0x29206b:3992,_0x5458ed:1250,_0x581a89:409,_0x222e42:4233,_0x2e264a:407,_0x346fd9:2101},s=_0x3a2b68;let r,o;try{o=n[s(i._0xb8da0c)](e,5,5)}catch(c){logWarn(s(1827),c)}if(n[s(i._0x6c9cbc)]&&!n.onlyPickTerrainPosition&&Cesium__namespace[s(i._0x1267d3)](o)){const c=hasPickedModel(o,t);if(c){if((c.billboard||c[s(2879)]||c.label)&&!c.ellipse&&!c.model&&!c.ellipsoid)return getPositionValue(c.position);if(c.show){if(c.show=![],n.requestRender(),r=getCurrentMousePosition(n,e,t),c[s(i._0xb287c9)]=!![],r)return r;if(r=_geetTargetMousePosition(n,e,o),Cesium__namespace.defined(r))return r}if(!n.globe.show&&(r=_geetTargetMousePosition(n,e,o),Cesium__namespace.defined(r)))return r}else{if(Cesium__namespace[s(407)](o.id)){const _=o.id;if((_.billboard||_.point||_.label)&&!_[s(i._0x29206b)])return getPositionValue(_[s(4076)])}if(r=_geetTargetMousePosition(n,e,o),Cesium__namespace.defined(r))return r}}if(!n.onlyPickTerrainPosition&&n.onlyPickModelPosition)return r;if(n[s(1640)]===Cesium__namespace.SceneMode[s(i._0x5458ed)]){const c=n.camera.getPickRay(e);r=n.globe.pick(c,n),!r&&(r=n.camera[s(i._0x581a89)](e,n.globe.ellipsoid))}else r=n[s(i._0x222e42)].pickEllipsoid(e,n.globe.ellipsoid);return Cesium__namespace[s(i._0x2e264a)](r)&&n.camera.positionCartographic.height<1e4&&Cesium__namespace.Cartographic[s(i._0x346fd9)](r).height<-5e3?null:r}function _geetTargetMousePosition(n,e,t){const i={_0x58b46c:407,_0x2478b0:2101,_0x536341:407,_0x3348e6:4241},s=_0x3a2b68,r=n.pickPosition(e);if(Cesium__namespace[s(i._0x58b46c)](r)){const o=Cesium__namespace.Cartographic[s(i._0x2478b0)](r);if(o.height>=0||!Cesium__namespace[s(i._0x536341)](t==null?void 0:t.id)&&o[s(i._0x3348e6)]>=-5e3)return r}}function getCurrentMouseTerrainPosition(n,e){const t={_0x306133:1640},i=_0x3a2b68;let s;if(n[i(t._0x306133)]===Cesium__namespace.SceneMode.SCENE3D){const r=n.camera.getPickRay(e);s=n.globe.pick(r,n),!s&&(s=n.camera.pickEllipsoid(e,n.globe.ellipsoid))}else s=n.camera.pickEllipsoid(e,n[i(1462)].ellipsoid);return s}function getMidpoint(n,e){const t={_0x39a578:1536},i=_0x3a2b68;if(!e||!n)return;const s=LngLatPoint.toCartographic(n),r=LngLatPoint[i(t._0x39a578)](e),o=(s[i(4241)]+r.height)/2,c=new Cesium__namespace.EllipsoidGeodesic(s,r)[i(858)](.5);return Cesium__namespace.Cartesian3.fromRadians(c[i(768)],c.latitude,o)}function isRepeatPoint(n,e){const t={_0x42d5ce:2376},i=_0x3a2b68;return!e||!n?![]:Math.abs(n.x-e.x)<.1&&Math[i(2376)](n.y-e.y)<.1&&Math[i(t._0x42d5ce)](n.z-e.z)<.1?!![]:![]}function getRotateCenterPoint(n,e,t){const i={_0xce6eb3:3420,_0xdebe70:2978},s=_0x3a2b68,r=Cesium__namespace.Cartographic.fromCartesian(n);r.height=0;const o=Cesium__namespace.Cartographic.toCartesian(r);let c=Cesium__namespace[s(2978)][s(3420)](o,n,new Cesium__namespace.Cartesian3);c=Cesium__namespace.Cartesian3.normalize(c,new Cesium__namespace[s(2978)]);const _=Cesium__namespace[s(931)].fromAxisAngle(c,Cesium__namespace.Math.toRadians(t)),l=Cesium__namespace.Matrix3.fromQuaternion(_),d=Cesium__namespace[s(2478)].fromRotationTranslation(l),f=Cesium__namespace.Cartesian3[s(i._0xce6eb3)](e,n,new Cesium__namespace[s(2978)]),g=Cesium__namespace.Matrix4.multiplyByPoint(d,f,new Cesium__namespace[s(i._0xdebe70)]);return Cesium__namespace.Cartesian3[s(3674)](g,n,new Cesium__namespace.Cartesian3)}function _0x1c66(){const n=["关闭星空背景","geocentric","box","errorEvent","preventDefault","_measureLable","beforeExecute","getOutlineColorByStyle","showThroughEllipsoid","licenseUrl","long1","model","_frontFaceRS","children","message","duration1","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs","ModelStyleConver","strokeColor","dashLength","_conventMarsOptions","_orbitIsLook","MERIT","stRotationDegree","hasCache","img_z","_alt","_roll_reality","EPSG:4553","_divWidth","EPSG:4514","match","Water","Z_TRANSLATION","_measureHorLable","select","isDestroyed","NeonLight","单指拖动","distanceToCamera","未处理的属性","globeHeight","url","-ex","getArrowPoints:插值出错","getHeight","minimumBlue","vertex_H","updateAttrForEditing","stack","crsx","beginUpdate","_radius","wfs请求出错","_图上标记","percent","zAxis","__esModule","getSeconds","default","isFormat","_lastSelectionResult","lam0","_单击开始绘制","Mars3DEx","_layerIdx","devicePixelRatio","nightVisionEffect","_maxTileLevel","fields","geometryState","_createOK","_layer","_primitive3","Hotine_Oblique_Mercator","_createGraphics","shadowMap","GEOGCS","things","Proj","ClassificationType","_bindMoveAllDragger","marsOptions","drawAddPoint","[object Object]","ClippingPlane","resize","坡度坡向","_lastMouseOverItem","cesium-baseLayerPicker-itemLabel","UNIT_Y","updateDivPosition","analysisOptions","修改縮放比例","_bindUpdateCallback","position","xHalfAngle","noPickEntity","lng","marsJzwStyle","_outlinePositions","_editMatrix","concat","attackArrowPW","blackAndWhiteEffect","_tilesToRenderByTextureCount","extent","addColorStop","materialType","_enabled","bgColor","cesium-vrButton","_editing_entity","error","createElement","GEODCRS","_setPitchRange_rightDownHandler","distanceLastFd","oncontextmenu","topRadius","angleStr","_arrowInstances","capabilities","close","sort","Measure","lngLatToPoint","_toOneJson_Point","_onMouseMoveMapHandler","showSkyAtmosphere","_templateHtml","_texture","singam","getNextLayerId","northwest","_show","释放后完成修改","ml1","getDerivedResource","    ","closure","hasContextMenu","EllipsoidOutlineGeometry","_metadataFailure","REPEAT","ClipType","clipTarget","bidirectional","PolyUtil buffer:缓冲分析异常","circular_clone_topPoints","rgba(110, 204, 57, ","50%","Clarke 1866","_entity_scanPlane","Plane","positionShow","_last_clickPositionX",`in vec3 v_positionMC;
in vec3 v_positionEC;
in vec2 v_st;

void main() {
  czm_materialInput materialInput;

  vec3 normalEC = normalize(czm_normal3D * czm_geodeticSurfaceNormal(v_positionMC, vec3(0.0), vec3(1.0)));
    #ifdef FACE_FORWARD
  normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);
    #endif

  materialInput.s = v_st.s;
  materialInput.st = v_st;
  materialInput.str = vec3(v_st, 0.0);

    // Convert tangent space material normal to eye space
  materialInput.normalEC = normalEC;
  materialInput.tangentToEyeMatrix = czm_eastNorthUpToEyeCoordinates(v_positionMC, materialInput.normalEC);

    // Convert view vector to world space
  vec3 positionToEyeEC = -v_positionEC;
  materialInput.positionToEyeEC = positionToEyeEC;

  czm_material material = czm_getMaterial(materialInput);

    #ifdef FLAT
  out_FragColor = vec4(material.diffuse + material.emission, material.alpha);
    #else
  out_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);
    #endif
}
`,"AXIS","_setRectangleByOptions","getElementsByClassName","inertiaTranslate","tilesWaitingForChildren","拖動對象後","_updatePositionsHook","project","请求失败(","templateEmptyStr","to_meter","farValue","GaodePOI 请求出错","removeEventParent","lineNumber","highDynamicRange",`uniform samplerCube u_cubeMap;
in vec3 v_texCoord;

void main() {
  vec4 color = czm_textureCube(u_cubeMap, normalize(v_texCoord));
  out_FragColor = vec4(czm_gammaCorrect(color).rgb, czm_morphTime);
}
`,"terrainShadows",`uniform sampler2D colorTexture;//下雨前输入的场景渲染照片
in vec2 v_textureCoordinates;
uniform float speed;
uniform float size;
uniform float direction;

float hash(float x) {
  return fract(sin(x * 133.3) * 13.13);
}

void main(void) {

  float time = czm_frameNumber * speed / 1000.0;
  vec2 resolution = czm_viewport.zw;

  vec2 uv = (gl_FragCoord.xy * 2. - resolution.xy) / min(resolution.x, resolution.y);
  vec3 finalColor = vec3(.6, .7, .8);//粒子的颜色

  float si = sin(direction), co = cos(direction);
  uv *= mat2(co, -si, si, co);
  uv *= length(uv + vec2(0, 4.9))*(20.0/size) + 1.0;

  float v = 1. - sin(hash(floor(uv.x * 100.0)) * 2.0);
  float b = clamp(abs(sin(20.0 * time * v + uv.y * (5. / (2.0 + v)))) - .95, 0.0, 1.0) * 20.0;
  finalColor *= v * b; //屏幕上雨的颜色

  out_FragColor = mix(texture(colorTexture, v_textureCoordinates), vec4(finalColor, 1.0), 0.5); //将雨和三维场景融合
}
`,"longitudeShift","getCenter","addDays","setQueryParameters","正在计算体积","前进播放","enableCollisionDetection","_isPointVisibility","LineString","expires","onDragStart","EPSG:4522","styleOpt","fa fa-genderless","LINES","_hasChangeEnableInputs","_updateMatrixMovePosition","_heading_reality","u_mars3d_flat_rangeNumber","computeNormal","_requiredResolution","israel","FlyToPoint","_addedBaseHook","_toJsonEx","Turn off keyboard roaming","highlight","keydown","getAreaById","shaderProgram","MOUSE_MOVE","_cloudCollection",".mars3d-sub-menu","innerSvg","lim","_terrainProviderPromise","_getColorByColorMaterial","right click delete point","moveTo","关闭亮度","head","multiplier","the_geom","ArcType","getCameraView","LEFT_ROTATE","_mars3d_graphicId","toArray","toOneJson","token","Material","_appendHtmlHook","ZERO","neckAngle","459208nSzwOH","开启夜视","_tileLoadQueueLow","corridorStyleConver","minorDragger","startRotateMatrix","_lastDynamicPosition","918vfLoqm","createDragger","Latitude_Of_Origin","positionToTileXY","CircleOutlineGeometry","_packedInterpolationLength","_arrThing",`havn't handled "`,"_graphic","canRefine","configureDescriptionFromProperties","_pitch_max","#ccc","noArray","camera","_terrainHeight","PROJCRS","scanPlane-","_materialCache","modelMatrix","ripple","RENDERED","height","webgl2","addLayer","maxPitch","_second","distanceDisplayBillboard","_填方体积","getSlopeContourMaterial","_primitiveCluster","addItem","_pitch_minHeight","_rotateInitialCursorAngle","content-type","_createCzmControl","_onBeforeCreate","splice","_graticuleProvider","_PointEdit_YZ_TRANSLATION","setCursor","170px","startMoveMatrix","replace","fromRectangle","cesium-navigation-help-button","_effects","VERTEX_FORMAT","單擊後 激活編輯","kick","_graphic_updatePosition","EPSG3857","ggrs87","tan","clockTick","points","fromDegrees","_lineColor","_primitive1","alphaPower","fromGeometry","NONE","parameters","forwardExtrapolationType","EllipsoidGeometry",`uniform sampler2D u_mars3d_snake_texture; // 范围
uniform float u_mars3d_snake_time;
uniform bool u_mars3d_snake_showAll;

const float PI_mars3d_snake = 3.141592653589793;

// 计算一个随机单位向量
float random_mars3d_snake(vec3 scale, float seed) {
  return fract(sin(dot(vec3(czm_viewport.zw, 0.5) + seed, scale)) * 43758.5453 + seed);
}
vec3 uniformlyRandomDirection_mars3d_snake(float seed) {
  float u = random_mars3d_snake(vec3(12.9898, 78.233, 151.7182), seed);
  float v = random_mars3d_snake(vec3(63.7264, 10.873, 623.6736), seed);
  float z = 1.0 - 2.0 * u;
  float r = sqrt(1.0 - z * z);
  float angle = 6.283185307179586 * v;
  return vec3(r * cos(angle), r * sin(angle), z);
}

// 获取贴图的信息
vec4 getRegions_mars3d_snake(int x, int y) {
  float u = (float(x) + 0.5) / float(u_mars3d_snake_rangeLength);
  float v = (float(y) + 0.5);
  vec4 point = texture(u_mars3d_snake_texture, vec2(u, v));
  return vec4(point.xyz * point.w, 1.0);
}

// 判断模型坐标点在不在范围内
bool inRectangle_mars3d_snake(vec4 testPoint) {
  float counter = 0.0;
  float xinters = 0.0;
  for(int w = 0; w < 100000; w++) {
    if(w >= u_mars3d_snake_rangeLength)
      break;
    int nextIndex = w + 1;
    nextIndex = nextIndex == u_mars3d_snake_rangeLength ? 0 : nextIndex;

    // 获取点位信息
    vec4 p1 = getRegions_mars3d_snake(w, 0);
    vec4 p2 = getRegions_mars3d_snake(nextIndex, 0);

    p1 = u_mars3d_snake_inversePlaneMatrix * p1;
    p2 = u_mars3d_snake_inversePlaneMatrix * p2;

    vec4 testPointPC = u_mars3d_snake_inversePlaneMatrix * testPoint;

    float p1x = p1.x;
    float p1y = p1.y;
    float p2x = p2.x;
    float p2y = p2.y;
    float testPointPCx = testPointPC.x;
    float testPointPCy = testPointPC.y;

    if(testPointPCx > min(p1x, p2x) && testPointPCx <= max(p1x, p2x)) {
      if(testPointPCy <= max(p1y, p2y)) {
        if(p1x != p2x) {
          xinters = ((testPointPCx - p1x) * (p2y - p1y)) / (p2x - p1x) + p1y;
          if(p1y == p2y || testPointPCy <= xinters) {
            counter += 1.0;
          }
        }
      }
    }
  }
  return mod(counter, 2.0) != 0.0;
}

void vertexMain(VertexInput vsInput, inout czm_modelVertexOutput vsOutput) {
  vec3 positionMC = vsInput.attributes.positionMC;
  vec4 positionWC = czm_model * vec4(positionMC, 1.0);

  if(u_mars3d_snake_showAll || inRectangle_mars3d_snake(positionWC)) {
    v_inRange = 1.0; // 传递顶点在范围内
    float height = dot(u_mars3d_snake_planeNormal, positionWC.xyz) + u_mars3d_snake_planeDistance;

    if(height < 0.0) {
      height = 0.0;// 低于平面范围的不晃动
    }

    float lerp = height / u_mars3d_snake_maxHeight;

    float per = fract(u_mars3d_snake_time);

    // 根据featureId计算一个随机单位向量
    int featureId = vsInput.featureIds.featureId_0;
    vec3 randomDirection = uniformlyRandomDirection_mars3d_snake(float(featureId));
    // 利用叉乘计算与平面法线垂直的一个向量
    vec3 moveVector = cross(randomDirection, u_mars3d_snake_planeNormal);
    moveVector = normalize(moveVector);

    // 偏移顶点
    vec3 newPositionWC = positionWC.xyz + moveVector * vec3(lerp * u_mars3d_snake_maxDistance * sin(per * 2.0 * PI_mars3d_snake));

    vsOutput.positionMC = (czm_inverseModel * vec4(newPositionWC, 1.0)).xyz;
  } else {
    v_inRange = 0.0; // 传递顶点不在范围内
  }
}
`,"RIGHT_DRAG","_center","_attributes_depthFailColor_alpha","onChange","GeometryAttributes","avoidpolygons","filename","_defaultView","'  ","fa fa-file-text-o","平方米","1794494mRHHVC","matrix","_drawCommand","_updateDomInnerHtml","toPoints","terrainProviderChanged","_updatePositionsByCircleCenter","updateStatus","_contextmenuItemClickShowResult","positiveY","scanPlaneOpacity","PostProcessStageComposite","_reflectorViewMatrix","EPSG:4500","_initByMetaData","getBinomialFactor","TOWGS84","fromUrl","heightMeasure","AREA_3","OBLIQ","https://restapi.amap.com/v3/place/text","+proj=tmerc +lat_0=0 +lon_0=117 +k=1 +x_0=39500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","_container_rotationArc","draggers","showStop","BYTES_PER_ELEMENT","u_textureAlpha","loadOk","pointCollection","isAdded","_drawCreatedHandler","TextureMinificationFilter","_tilesInvalidated","Control","angleDecimal","property","NEAREST","renderPass","_entity","AddMidPoint","if-unmodified-since","velocity","退出全屏","attackArrowYW","reflectorProjectionMatrix","arcType","_measureExLine","pfact","_debug","_ellipsoid","_getDrawEntityClass",`
    in vec2 v_textureCoordinates;
    uniform sampler2D colorTexture;
    uniform vec2 colorTextureDimensions;
    uniform vec2 direction;
    uniform float kernelRadius;

    float gaussianPdf(in float x, in float sigma) {
        return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;
    }
    void main() {
        vec2 vUv=v_textureCoordinates;
        vec2 invSize = 1.0 / colorTextureDimensions;
        float weightSum = gaussianPdf(0.0, kernelRadius);
        vec4 diffuseSum = texture( colorTexture, vUv) * weightSum;
        vec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);
        vec2 uvOffset = delta;
        for( int i = 1; i <= MAX_RADIUS; i ++ ) {
            float w = gaussianPdf(uvOffset.x, kernelRadius);
            vec4 sample1 = texture( colorTexture, vUv + uvOffset);
            vec4 sample2 = texture( colorTexture, vUv - uvOffset);
            diffuseSum += ((sample1 + sample2) * w);
            weightSum += (2.0 * w);
            uvOffset += delta;
        }
        out_FragColor = diffuseSum/weightSum;
    }`,"cos_p14","call","host","GOOGLE","xmax","_muyao","_resource","enableControl","Resource","ceil","render","rotationDegree","_pickImageryLayerFeatures","axis","_updateLabelStyleHook","magnificationFilter","textureTranslationAndScale","_minimumLevel","_修改宽度","radii_y","spacing","tileWidth","_closeAllControl","getNumberOfYTilesAtLevel","_keyboardRoam","_起点","_targetPoint","limit","+proj=tmerc +lat_0=0 +lon_0=129 +k=1 +x_0=22500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","maxx","ExtrapolationType","LOOP_STOP",`uniform float mars3d_xAngle;
uniform float mars3d_yAngle;
uniform float mars3d_distance;
uniform float mars3d_opacity;

uniform vec3 mars3d_visibleAreaColor;
uniform vec3 mars3d_hiddenAreaColor;

uniform sampler2D shadowMap_texture;
uniform mat4 shadowMap_matrix;
uniform vec4 shadowMap_lightPositionEC;
uniform vec4 shadowMap_lightDirectionEC;
uniform vec3 shadowMap_lightUp;
uniform vec3 shadowMap_lightDir;
uniform vec3 shadowMap_lightRight;
uniform vec4 shadowMap_texelSizeDepthBias;
uniform vec4 shadowMap_normalOffsetScale;

uniform sampler2D colorTexture;
uniform sampler2D depthTexture;
in vec2 v_textureCoordinates;

vec4 toEye(in vec2 uv, in float depth) {
  vec2 xy = vec2((uv.x * 2.0 - 1.0), (uv.y * 2.0 - 1.0));
  vec4 posInCamera = czm_inverseProjection * vec4(xy, depth, 1.0);
  posInCamera = posInCamera / posInCamera.w;
  return posInCamera;
}

float getDepth(in vec4 depth) {
  float z_window = czm_unpackDepth(depth);
  z_window = czm_reverseLogDepth(z_window);
  float n_range = czm_depthRange.near;
  float f_range = czm_depthRange.far;
  return (2.0 * z_window - n_range - f_range) / (f_range - n_range);
}
float _czm_sampleShadowMap(sampler2D shadowMap, vec2 uv) {
  return texture(shadowMap, uv).r;
}
float _czm_shadowDepthCompare(sampler2D shadowMap, vec2 uv, float depth) {
  return step(depth, _czm_sampleShadowMap(shadowMap, uv));
}
float _czm_shadowVisibility(sampler2D shadowMap, czm_shadowParameters shadowParameters) {
  float depthBias = shadowParameters.depthBias;
  float depth = shadowParameters.depth;
  float nDotL = shadowParameters.nDotL;
  float normalShadingSmooth = shadowParameters.normalShadingSmooth;
  float darkness = shadowParameters.darkness;
  vec2 uv = shadowParameters.texCoords;
  depth -= depthBias;
  vec2 texelStepSize = shadowParameters.texelStepSize;
  float radius = 1.0;
  float dx0 = -texelStepSize.x * radius;
  float dy0 = -texelStepSize.y * radius;
  float dx1 = texelStepSize.x * radius;
  float dy1 = texelStepSize.y * radius;
  float visibility = (_czm_shadowDepthCompare(shadowMap, uv, depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, dy0), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(0.0, dy0), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, dy0), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, 0.0), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, 0.0), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, dy1), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(0.0, dy1), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, dy1), depth)) * (1.0 / 9.0);
  return visibility;
}

vec3 pointProjectOnPlane(in vec3 planeNormal, in vec3 planeOrigin, in vec3 point) {
  vec3 v01 = point - planeOrigin;
  float d = dot(planeNormal, v01);
  return (point - planeNormal * d);
}
float ptm(vec3 pt) {
  return sqrt(pt.x * pt.x + pt.y * pt.y + pt.z * pt.z);
}

void main() {
  const float PI = 3.141592653589793;
  vec4 color = texture(colorTexture, v_textureCoordinates);
  vec4 currD = texture(depthTexture, v_textureCoordinates);
  if(currD.r >= 1.0) {
    out_FragColor = color;
    return;
  }
  float depth = getDepth(currD);
  vec4 positionEC = toEye(v_textureCoordinates, depth);
  vec3 normalEC = vec3(1.0);
  czm_shadowParameters shadowParameters;
  shadowParameters.texelStepSize = shadowMap_texelSizeDepthBias.xy;
  shadowParameters.depthBias = shadowMap_texelSizeDepthBias.z;
  shadowParameters.normalShadingSmooth = shadowMap_texelSizeDepthBias.w;
  shadowParameters.darkness = shadowMap_normalOffsetScale.w;
  shadowParameters.depthBias *= max(depth * 0.01, 1.0);

  vec3 directionEC = normalize(positionEC.xyz - shadowMap_lightPositionEC.xyz);
  float nDotL = clamp(dot(normalEC, -directionEC), 0.0, 1.0);
  vec4 shadowPosition = shadowMap_matrix * positionEC;
  shadowPosition /= shadowPosition.w;
  if(any(lessThan(shadowPosition.xyz, vec3(0.0))) || any(greaterThan(shadowPosition.xyz, vec3(1.0)))) {
    out_FragColor = color;
    return;
  }

  //坐标与视点位置距离，大于最大距离则舍弃阴影效果
  vec4 lw = czm_inverseView * vec4(shadowMap_lightPositionEC.xyz, 1.0);
  vec4 vw = czm_inverseView * vec4(positionEC.xyz, 1.0);
  if(distance(lw.xyz, vw.xyz) > mars3d_distance) {
    out_FragColor = color;
    return;
  }

  //水平夹角限制
  vec3 ptOnSP = pointProjectOnPlane(shadowMap_lightUp, lw.xyz, vw.xyz);
  directionEC = ptOnSP - lw.xyz;
  float directionECMO = ptm(directionEC.xyz);
  float shadowMap_lightDirMO = ptm(shadowMap_lightDir.xyz);
  float cosJJ = dot(directionEC, shadowMap_lightDir) / (directionECMO * shadowMap_lightDirMO);
  float degJJ = abs(acos(cosJJ) * (180.0 / PI));
  if(degJJ > mars3d_xAngle) {
    out_FragColor = color;
    return;
  }

  //垂直夹角限制
  vec3 ptOnCZ = pointProjectOnPlane(shadowMap_lightRight, lw.xyz, vw.xyz);
  vec3 dirOnCZ = ptOnCZ - lw.xyz;
  float dirOnCZMO = ptm(dirOnCZ);
  float cosJJCZ = dot(dirOnCZ, shadowMap_lightDir) / (dirOnCZMO * shadowMap_lightDirMO);
  float degJJCZ = abs(acos(cosJJCZ) * (180.0 / PI));
  if(degJJCZ > mars3d_yAngle) {
    out_FragColor = color;
    return;
  }

  shadowParameters.texCoords = shadowPosition.xy;
  shadowParameters.depth = shadowPosition.z;
  shadowParameters.nDotL = nDotL;
  float visibility = _czm_shadowVisibility(shadowMap_texture, shadowParameters);

  //可视域
  if(visibility == 1.0) {
    out_FragColor = mix(color, vec4(mars3d_visibleAreaColor, 1.0), mars3d_opacity);
  } else {
    out_FragColor = mix(color, vec4(mars3d_hiddenAreaColor, 1.0), mars3d_opacity);
  }
}
`,"px;max-height:","polygon","TRANSPARENT","speed","FULL","_zhStyle","defaultTexture","then","prototype","minimumCone","EPSG:4544","flyHome","headTailFactor","steps","SphereOutlineGeometry","_graphic_drawing","lookAtTransform","_element","_primitiveCollection","Framebuffer","toTop","GoogleEarthEnterpriseTerrainProvider","video","rotatePoint","_highlight_mouseOutHandler","PlaneStyleConver","pickImageryLayerFeatures","CloudStyleConver","_tileReplacementQueue","tooltipOpen","EPSG:4528","DrawPolygon","_entity_outlines","flat","extrudedHeight","hasOpacity","vrButton","toUpperCase","headingPitchRollToFixedFrame","UndergroundNo","out_FragColor.rgb *= visibility;","onDownloadProgress","COMPD_CS","ClassificationPrimitive","Feature","_speed","fromString","_maximumLevel","combine","responseType","star","clustering","stopEditing","ArB","html2canvas","605112MSDqIR","_toJSONValBefore","click","CLAMP_TO_EDGE","terrainExaggeration","fa fa-keyboard-o","getListByAttr","_mouseClickHandler","getZoomUnits","getCoordinates","isArray","pow","zoomOutIcon","DistanceDisplayConditionGeometryInstanceAttribute","globalAlert","_getPopupPosition","REMOVED","_bindEvent","ParticleSystem","length","focalDistance","unbindHighlight","_orbitMouseMoveFunction","_gaze","vec","latDecimal","defined","road","pickEllipsoid","_map_preRenderHandler","fa fa-soundcloud","random","uniqueKey","_addAreaHook","getNormal","innerHTML","hpr","_objectsToExclude_auto","Ion","跟踪鎖定","_tileWidth","_timeTik","onerror","clientHeight","GroundSkyBox",`uniform sampler2D colorTexture;
in vec2 v_textureCoordinates;
const int KERNEL_WIDTH = 16;
void main(void) {
  vec2 step = 1.0 / czm_viewport.zw;
  vec2 integralPos = v_textureCoordinates - mod(v_textureCoordinates, 8.0 * step);
  vec3 averageValue = vec3(0.0);
  for(int i = 0; i < KERNEL_WIDTH; i++) {
    for(int j = 0; j < KERNEL_WIDTH; j++) {
      averageValue += texture(colorTexture, integralPos + step * vec2(i, j)).rgb;
    }
  }
  averageValue /= float(KERNEL_WIDTH * KERNEL_WIDTH);
  out_FragColor = vec4(averageValue, 1.0);
}
`,"该对象暂不支持highlight高亮","ClippingPlaneCollection","long0","addMaterial","_depth","load","startsWith","UNIT_X","minPitch","_单击增加点","_heightDraggers","_readNode","_highlightEnabled","positionWC","bing","show","terrainProviderViewModels","pointStyleConver","_createGeometryInstance","target","orientationShow","ows:WGS84BoundingBox","ShowGeometryInstanceAttribute","_updateAnalysisOptions","isReady","_单击后激活编辑","showAddText","bottom","ms1","content-length","_color_alpha_bak","toGeoJSON","onDrag","sinph0","加载模型中…","PolylineGlow","hasEditContextMenu","interVal","drawCreated","fromMercator","now","SampledPositionProperty","ellps","_containerTime","fa fa-medium","getPropertyValue","_onLayerMoved","depthTest","setRequestHeader","eachThing","glowWidth","fa fa-share-alt","innerRadii","Close Wireframe","CheckerboardMaterialProperty","offsetZ","_hasTerrain","showFillVolume","退出VR模式","OUTSIDE","fetchJsonp","filterColor","VertexArray",`
(+`,"_last_startTime","lcc","xCut","equals","krass","clippingPlanes","targetPosition","state","_key_index","result_type","_marsOptions","雙擊完成繪制","cartesianArrayToCartographicArray","Equirectangular","MeasureAngle","cancelMoveTo","set","disableDepthTestDistance","eventParent","_drawEndEventType","styleOptions","southeast","OPAQUE","availability","getTranslation","B_im","width","cameraChanged","EPSG:4523","changeBasemap","transY","KmlDataSource","RED","_globeTranslucencyState","WallOutlineGeometry","lower","container","xmin","半径：","lastTilesVisited",`in vec3 v_positionEC;
uniform float globalAlpha;

void main() {
  czm_materialInput materialInput;
  materialInput.positionToEyeEC = v_positionEC;
  czm_material material = czm_getMaterial(materialInput);
  out_FragColor = vec4(material.diffuse + material.emission, material.alpha * globalAlpha);
}
`,"_pageIndex","MoveHeight","maxAlpha","_default_cursor","backgroundColor","DefaultProxy","move","base","_draw_tooltip","unpackArray","EPSG:","noHeight","_direction","currentTime","scaleByDistance_farValue","utg","_setInsertIndex","constrainedAxis","_external","_hasMouseOver","GaodeRoute 请求出错","polyline","TEXTURE_WRAP_T","_shadingAlpha","paris","JulianDate","_height_original","dimensions_z","blue","responseText","activateEdit","getTooltip","getProperty","_海拔","handler","union","upGraphic","radii_z","DIRECTION_NONE","addLayer:图层id存在冲突，已重新赋值id","redraw","getPixelSize","BoxOutlineGeometry","_initTilesetPlanClip","polylineVolumeP","Close snow","padding","getCurrentOptions","strokeRect","REFINED","_moveHandler","resolve","lam","_mountedHook","interPolygonObj","_getOrCreateLayer","uri","processFeatureCollection","PostProcessStage","from_greenwich","positionsNew","flip_axis","contextMenu","right","EPSG:4507","headAngle","boxStyle","_measureDistanceLable","getPositions","outlineWidth","_last_pickedObject","Move it over here","asphaltColor","_layerOrderChanged","_child","layer","stopDraw","referenceFrame","cylinderC","_hasEdit","_looking","cosph0","_moveDelayTik","get","_createPostProcessStage","禁止编辑","_wall_positions","禁止進入地下","修改高度","_setEditCursor","_metadataError","customProjectionMatrix","username","removeThing","normalZ","amplitude","touchcancel","styleField","Additive","GEODETICDATUM","TimeInterval","_getExcludedStyle","Clarke 1858","_stopTime","CircleScan","PostProcessStageSampleMode","_hasCache","进入VR模式","debugAxisPrimitive","Naval Weapons Lab., 1965","addOuter","ter_z","updateAndExecuteCommands","PolyGrass","視角切換","tilesetPassState","sidesWidthRatio","getDate","_关闭地形","_forwardExtrapolationType","_reflectMatrix","startDate","Cartesian4","BoundingRectangle","rings","WebGLConstants","baseColor","_videoContainer","cos_po","EllipseGeometryLibrary","_mars3d_layerId","tileBoundingRegion","Quadrilateralized Spherical Cube","_gltfUpAxis","acos","EPSG:3785","行政地标","tileHeight","_backFaceRS","lat","_inverseMatrix","fromDate","Blur2","forEachLoadedTile","popup","waterColor","+proj=tmerc +lat_0=0 +lon_0=126 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","canvas","Mar3D提供的12.5米精度的中国地形","rightWC","_clampToTilesetHeight","spatialReference","_graphicLayer_leftUp","showFrustum","textContent","enableTilt","appendChild","125200FoSbik","normalX","computeTileVisibility","clrk80ign","lightShadowMap2D","flood","showSun","#ffd700","Lat","bind","zoomOut","uniform sampler2D lightShadowMap2D","DataSourceDisplay","isPrivate","_primitive","gapColor","clipOutSide","fetchXML","UrlTemplateImageryProvider","createImageryProvider：存在未识别的图层","modelToWorld","getPicked","pn1","drawShowRadius","無法刪除，點數量不能少于","_当前视角信息","thickness","https://gac-geo.googlecnapps.cn/maps/vt?lyrs=s&gl=CN&x={x}&y={y}&z={z}","UNLIT","radii","outlinePositions","Horizontal distance","yHalfAngle","apply","negativeX","u_type","busineData","initialTilesLoaded","offsetWidth","_sp","LocalWorldTransform","_createImageryProvider","step","_draw_holes","Token","slopeStr2","#123e59","_previousTime","LineFlow","parse","showLateralSurfaces","FRONT","changeMouseModel","cesium-baseLayerPicker-item","fa fa-ticket","scene","+proj=tmerc +lat_0=0 +lon_0=129 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","sigma","withAlpha","Globe","globalAlpha","_outlineFrustumGraphic","_useTiles","offsetLabel","labelStyleConver","_tags","HALF_PI","primitiveCollection","地形服務","_pixelFormat","queryWalking","showGroundAtmosphere","_farDepthFromNearPlusOne","encoderOptions","_updateMaxMinHeights","GCJ02","class","toBottom","_crs","longitude","LEFT_DOWN","editing","Null","_graphic_dragger_ing","LIGHTCYAN","_map_mouseDownHandler","updateRadii","_computedNewPos","用于与DIV点进行对比测试位置的点","eastNorthUpToFixedFrame","targetPositio","drawRemovePoint",".svg","endItem","description","ImageType","_silhouetteColor_alpha_bak","azimuth","visibleColor","helmert","hostname","_last_material","fromRotationY","GridImageryProvider","0,0,0","解析GetCapabilities出错","pinchStart","warn","outerHTML","upsampledFromParent","isEntity","_sceneOption","_hasChangeDepthTestAgainstTerrain","north","_lng","cass","editMouseDown","_getPitData","EDATUM","HeightReference","getTime","_bindExType","scanPlane","_rotateHpr","_enabledEvent","undergroundColorAlphaByDistance","moveTimer","cesium-performanceDisplay","sseDenominator","_hasResetEnableLighting","updateHeightDraggers","volume","split","tailWidthFactor","cons","hotPointID","_map_clickHandler","scale","queryPolygon","MultiLineString","CGCS2000_GK_CM_6","innerRadii_y","RADIANS_PER_DEGREE","hasEmptyGroup","sizeInBytes","_roiUV","READY","removeAll","DrawRectangle","alpha","_toOneCesiumVal","_showHook","_onMouseMoveHandler","+proj=tmerc +lat_0=0 +lon_0=75 +k=1 +x_0=13500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","ADD","u_color","openTooltip","method","toCssColorString","_eventResult","RGBA","createTypedArray","zh-Hans","_mouseUpHandle","VelocityOrientationProperty","_maxRangeLength","<div>名称：","addressComponent","_onMouseMoveDraggerHandler","interpolateUsingFraction","Type","_startPitch","Animation","hasDrawDelPoint","getGraphics","createAttributeLocations","glow","change","auto","_last_stopTime","RectangleGeometryLibrary","ticks","DIRECTION_RIGHT","clientY","font_size","isDestroy","validDrawPosition","ORANGE","18JXLTCn","cosX0","pointToPixel","关闭大气渲染",`uniform vec4 color;
uniform vec4 gapColor;
uniform float dashLength;
uniform float dashPattern;
in float v_polylineAngle;

const float maskLength = 16.0;

mat2 rotate(float rad) {
  float c = cos(rad);
  float s = sin(rad);
  return mat2(c, s, -s, c);
}

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);

  vec2 pos = rotate(v_polylineAngle) * gl_FragCoord.xy;

  float dashPosition = fract(pos.x / (dashLength * czm_pixelRatio));
  float maskIndex = floor(dashPosition * maskLength);
  float maskTest = floor(dashPattern / pow(2.0, maskIndex));

  vec4 fragColor = (mod(maskTest, 2.0) < 1.0) ? gapColor : color;
  if(fragColor.a < 0.005) {
    float dashPosition2 = fract(pos.x / (dashLength * 0.25 * czm_pixelRatio));
    float maskIndex2 = floor(dashPosition2 * maskLength);
    float maskTest2 = floor(dashPattern / pow(2.0, maskIndex2));
    fragColor = (mod(maskTest2, 2.0) < 1.0) ? gapColor : color;
    if(fragColor.a < 0.005) {
      discard;
    }
  }

  fragColor = czm_gammaCorrect(fragColor);
  material.emission = fragColor.rgb;
  material.alpha = fragColor.a;
  return material;
}
`,"noTitle","_tileLayer","getCacheOrAdd","frontFaceAlpha","TEXTURED","ShadowMode","_has3dtiles","_extent","zoomIn","fa fa-tint","_last_depthTestAgainstTerrain","角度调整底部圆","semiMinorAxis","Australian Natl & S. Amer. 1969","_updateDistanceDisplayConditionByEdit","imagery","_cylinderBottomRadius","rate","_startEditingHook","top","_graphic_move_z","_projectionPicker","UNSIGNED_INT_24_8","autoClose","bindHighlight","startEditing","開啓下雨","wellData","_orientation_show","latitude_of_origin","_sexagesimal","_getFactor","_subdomains","_loadedCallbacks","removeAllLayer","fadeFactor","coordinates","chinaCRS","datumName","_surface","high","_name",'<div title="大地2000坐标"><label>横坐标</label>',"substr","_updatePrimitiveForColorMaterial","开启下雪","esriGeometryMultipoint","EPSG:4326","total","Quaternion","sourceTarget","_boundingSphereWC","_smallTooltip","10px","createShadowReceiveFragmentShader","_getVector","isProperty","_arrPartMeasureLable","ElevationContour","ymin","pickIds","_updateTerrainProvider","_getCssText","bloom","contextmenuItemsOptions","_showThroughEllipsoid","contextmenuItems","_timeline","300","tooltip","enabledMoveTarget","_isFlyAnimation","debugAxis","shadows","toString","Enable shadow","mars3d-smallTooltip-leftArrow","border","_errorEvent","getAllResponseHeaders","east","arrLayer","pointMeasure","PointPrimitiveCollection","_keys","minWidth","_targetPosition","UNSIGNED_SHORT","u_0","angleBetween","timeField","_hierarchyPositions","timeline","cameraMoveStart","zoomEventTypes","LineBloom","_maxCacheCount","#ffff00","_updateControlHandler","_pickId","UniformType","PICK","Tileset","pixelRatio","southwestChild","like","title","_last_graphicsOptions","_initChildGraphic","hasUpdate","emitterModelMatrix","_onMiddleDownHandler","showScanPlane","1=1","_updateHeightsTimeSlice","className","_limitGlobe","defineProperty","mapBound","zoomTo","_updatePositionHook","关闭下雪","tilingScheme","_shadowMap","setVisible","hasChildLayer","_bindDocumentEvent","Sampler","toolbar","_onLeftDownHandler","contains","grids","_isCallbackPositions","bindEvent","onload","_updateExOpacity","_last_picked","DrawUtil","pathStyleConver","addCircle","pointerEvents","_initSampledPositionProperty","queryDriving","DOUBLE","setPositions","SceneTransforms","midpoint","updateModelMatrix","_hiddenAreaColor","corridor","_fixedLight","topojson","axisY","convex","time","grainFrequency","postPassesUpdate","request","fillStyle","options.positions","_imageryLayersUpdatedEvent","minimumTerrainLevel","mousemove","esriGeometryPolyline","_drawDelEventType","rightPoints","route","_lateralSurfaceMaterial","undefined","RadarWave","ymf","addChildsToMap","imageSR","labelHeight","intersectionWidth","_tilesetFlat","_flyok_index","fireTarget","rotateSpeed","getShapeForStar","terrainChange","sampleHeight","getBezierPoints","eachLayer","floatToByte","#btn-clockAnimate-start","plane","list","getLayerById","contextmenu","XY_TRANSLATION","hasMoveEdit","ImageryLayer","ComponentDatatype","_divHeight","+proj=tmerc +lat_0=0 +lon_0=75 +k=1 +x_0=25500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","Lambert Tangential Conformal Conic Projection","_getOutlineStyle","_position_show","_last_shouldAnimate","pointP","TEXTURE_MIN_FILTER","_layers","normalize","_arrLayer","elevationRampMaterial","debugAxisLength",'"  >',"_composites","outlineOpacity","polygonStyleConver","_isLeftDown","Picking","pickHeight","shift","addEffect","_auto_availability","_toOneJson_Poly","unbindPopup","somerc","_clockStep","longlat"," compass-inner-active","projName","lon","getTempPoint4","COLUMN1ROW1","fire","setStyle","accessToken","_uniforms_blendColor_alpha","_normalZ","eqc","getMinutes","selectedImageryProviderViewModel","Close skyBox","sin_p12","clickTileGraphic","_clickHandler","_onMap_wheel","showText","MipmapHint","Z_UP_TO_Y_UP","fromArray","symbol","endPosition","types","polylineVolumeC","_layerIndex","120000|130000|190000","getLast","Camera","homeButton","_getTargetDistanceDisplayCondition","Mid","_draggerIng","setInputAction","__created","closeAll","terrainLoadError","selectedLayer","glowPower","multiply",`
      color = sampleAndBlend(`,"_pickOffscreenView","_修改高度","u_mars3d_flood_upAxis","makeLabel","responseURL","gaode","PointUtil","updatePass","DepthTestYes","removeGraphic","imageryLayer","EPSG:4503","point2","_contextmenuMgr","C_y","Stereographic_South_Pole","_setCameraViewListArr","_onRightUpHandler","https://gac-geo.googlecnapps.cn/maps/vt?lyrs=t@131,r&gl=CN&x={x}&y={y}&z={z}","_objectsToExcludee","u_textures","rassadiran","Matrix3","_drawMouseMoveHandler","IntersectionTests","clockStop","_按轴旋转","shake","_setColorStyleItem","PolylineColorAppearance","wgs84ToWindowCoordinates","moveStart","reverse","STATIC_DRAW","cesium-viewer-animationContainer","_domeBackCommand","bern","gradient","jakarta","toRadians","_cameraPositionCartographic","_position","_morphCompleteHandler","curve","_primitive_point","index","isAnimate","EPSG4326","duration2","downGraphic","updateMaterial","hasPopup","102113","face","views","IndexDatatype","hasToGraphic","_style2JsonBase","_orginCenterPosition","Lambert_Conformal_Conic_2SP","neckHeightFactor","maximumSizeZ","sinc0","_moveMaxHeight","hasSelected","EllipsoidWave","classification","_开启深度监测","_createGeometryInstanceItem","ro0","_unbindEditEvent","_setCameraOption","_立方米","无地形",`uniform vec4 color;
uniform float speed;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  float time = fract(czm_frameNumber * speed / 1000.0);
  float alpha = abs(smoothstep(0.5, 1., fract(-st.t - time)));
  alpha += .1;
  material.alpha = alpha * globalAlpha;
  material.diffuse = color.rgb;
  return material;
}
`,"leadTime","更多功能请右击","requestRender","_initLayer","Delete","xmf","修改宽度(Y方向)","QuadtreeTileLoadState","endDate","_scanePlaneXHalfAngle","freeResources","Equidistant_Conic","清除所有标记","markStartOfRenderFrame","num","grid","QuadtreeOccluders","updateVisibleDistance","CGCS2000_GK_Zone_6","_getTileEventParams","_downHandler","qs0","BAIDU","allowDrillPick","Ellipsoid","basemap","brightnessEffect","FLOAT","queryText","SCENE3D","renderState","mod_airy","unshift","getFloat64",`uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput cmi) {
  czm_material material = czm_getDefaultMaterial(cmi);
  vec2 st = cmi.st;
  float t = fract(speed * czm_frameNumber / 1000.0) * direction;
  vec2 st1 = vec2(st.s, fract(st.t - t));
  vec4 color = vec4(0., 0., 0., 0.);
  float tt = 0.5 - abs(0.5 - st1.t);
  float ss = st1.s;
  float alpha = tt * 2.;
  color = vec4(u_color.rgb * u_color.a, alpha * 1.2);
  material.diffuse = color.rgb;
  material.alpha = color.a * globalAlpha;
  return material;
}
`,"textures","lines","moll","_pointerEvents","589,76,480","materials","scanPlaneMode","_removeLabel","promise","_showPoly","zIndex","hiddenAreaColor","classificationType","_startTime","_promise_resolve","_停止编辑","_orientation","DISABLED","_onPreRenderHandler","fullExtent","international","_mouseMoveHandler","phic0","coordinates must be finite numbers","ArcGISTiledElevationTerrainProvider","credit","this.sources properties must all be the same type.","_domeVA","Visibility","positionOnEllipsoidSurface","_addLabel","destroyCommands","holes","customShader","_array","baseLayerPicker","query","markTileRendered","editingGrid","GoogleEarthEnterpriseMetadata","max(contourMaterial.alpha, aspectRampMaterial.alpha)","animateFrame","EasingFunction","selectedIndex","Mars3D三维可视化平台","customTags","Terrain","_controlList","toCesiumVal","block","开启地形","_intersectionColor","readPixels","_globalAlpha","_fillColor_alpha_bak",'Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.',"northwestChild","_createDivGraphic","EPSG:4554","removeMapChilds","Intersect","updatePositionsHeightByAttr","lateralSurfaceMaterial","has3dtiles","bindDraggers","onmouseover","sweep","PointCloud","u_mars3d_flood_min_height","_tilesetPlanClip","_graphic_rotate_y","_globeMouseHandler","snowEffect","attribute","fromRotationMatrix","FogEffectNo","Title","CENTER","specularMap","_mergePostion","rotateUp","longitude_of_center","_style2Json","fromRadians","iconCls","word","_removeHeightCallbacks","</div>","rotation",";font-size: ","getArrowPoints","loadTile","_cancelMoveTo","atan2","标记矩形","VerticalOrigin","cloudStyleConver","createMaterial：请指定mars3d.MaterialType类型","setPlanes","_toJSON_Ex","POSITION_AND_ST","BoxGeometry","showDomeSurfaces","_updateNormal","_definitionChanged","remove","ellipse","updateOutlinesDistanceDisplayCondition","_cameraMoveStartHandler","clientWidth","info","EllipsoidalOccluder","Property","_rotate_onPreRenderHandler","_onRemove","_requestMetadata","flags","heights","mouseEvent","coord_type","fromScale","surface","toCartesian","openSmallTooltip","tiles","debugExtent","fromColor","_shadowMapMatrix","70,18,134,51","fromType","file:","Carthage 1934 Tunisia","city","Layer","originY","_inverseViewProjectionDirty","_formatRouteData","ColorGeometryInstanceAttribute","Robinson","decimal","parentContainerId","_event","Enable sky atmosphere","YELLOW","setOuterSvg","_positions_circle_x","u_textureUseWebMercatorT",".active","+proj=tmerc +lat_0=0 +lon_0=111 +k=1 +x_0=37500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","low","_maximumHeights","Mark rectangular","LEFT","projection","editStyle","dataTypes","Rotation on axis","middle","_pixelDatatype","appendForwardSlash","刪除該點","fa fa-reorder","ortho","eva",`px;
  --boder-width: `,"hasEditRotate","_leftLayer","_containerCon","Oblique Stereographic Alternative","_updateVirtualCamera","_dataSource","_firstPassInitialColor","Open terrain","lerch","northeast","startTime","clampToTileset","createLayer","-133.63,-157.5,-158.62","getPopup","getCubicValue","AREA_1","appearance","stopTime","_sideRes","rightUp","png32","depthBiasStep","drillPickFromRay","enableLook","_createIcon","_toOneCesiumVal_Point",`
                    <div><label>`,"duration3","TileMapServiceImageryProvider","centerOfMass","hasHeightEdit","application/json","roiUV0","X_TRANSLATION","_reload","_fxOnePoint","_cacheGraphic","dblClick","fillRect","s45","globe","_material_color_alpha","mars3d-compass-rotation-arc","TileCoordinatesImageryProvider","pid","width: ","4490","depthFailAppearance","fullscreen","queryExtent","bindPickId","enu",`px;"
                        data-type="`,"addHeight","getElementById","stringify","depthFailColor","createPropertyDescriptor","DEPTH_COMPONENT","wgs84","addSeconds","fireTargetEvent","_depthTest","marker-symbol","_orbitTickFunction","ch1903","bess_nam","_mouseDownHandler","_pickCommand","_onKeyDown","Geometry","strokeType","RectangleOutlineGeometry","moveToLayer","_outlineEx","_contextmenuItemClickResult","_getJsonPositions","experimental-webgl2","_平方公里","column","z4490","getResult","getType","postProcessStages","FormatAltLength","Firefox","_unbindDocumentEvent","materialOptions","output","RIGHT","success","_tilesetMatrix","停止编辑","_updateMoveAllHook","disableThisFrame","onDragEnd","_onClickHandler","_tileProvider","toMercator","minimumHeights","rotateStart","toLowerCase","isEditing","fill-opacity","getRayEarthPositions","magnitude","noAlt","_position_draw","entityAngle","rectangle","fillVolumeName","loadingDescendantLimit","_hideFeatures","//data.mars3d.cn/terrain","toCartographic","ElevationRamp","yCut","u_mars3d_flood_maxRangeLength","apa","activateMouseOut","afterRender","_boundingSphere","getPoint","_clock","_nodeIndex","middleClick","isPrototypeOf","arrIDS","far","_handler","stopFlicker","flyToOptions","ION","interpolationAlgorithm","_hasUpdate_emitterModelMatrix","initialize","backwardExtrapolationType","horizontal","updatePosition","cells","FeatureTypeList","utmSouth","maximumScreenSpaceError","ShadowVisibilityShader","Azimuth","totalAreaStr","_fireTarget_open","invertClassification","post","attributes","orginMatrix","_on","repeat_x","_map","showSectorLines","strategy","usingPrecachedTiles","_lastUpdate","removeTile","BACK","outline","rotateCamera","editPlane","_hasEditHeading","addEventParent","prevStageUpdate","all","_showPolyline","_terrainProviderIndex",`</button>
                  </div>`,"borderColor","getContextMenu","_onLeftUpHandler","MaterialSupport","_color","getCircleCenterOfThreePoints","QueryArcServer 请求出错","UNIT","zoneNumber","planes","_editPointHandler","type","UNIT_Z","_removePit","cloudCollection","one_minus_f_squared","zone","SlopeRamp","_释放后完成修改","u_mars3d_clip_maxRangeLength","RainEffectNo","_imageryLayers","C_x","EPSG:4548","lineColor","不存在graphicType无法解析数据对Graphic","verticalOrigin","LineDotDash","_handleMouseDown","_lastTileIndex","gamma","headingPitchRollQuaternion","key","平方公里","Texture","Latitude_of_center","ARCGIS","Add point","pitch","proxy","_mapEx","_updatePrimitiveOpacity","false_easting","S_POLE","TimeIntervalCollection","czmObjectEx","TileProviderError","New International 1967","mode","outlineStyle","DebugModelMatrixPrimitive","listens","+proj=tmerc +lat_0=0 +lon_0=75 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","_queryPageByIds","reportError","_wall_maximumHeights","_updateOutlineOpacity","fillColor_bak","getArrowBodyPoints","_setOptionsHook","originalStyle","content","removeChild","_view","water","getControl","webrd","_水平距离","pick","_outlineColor_alpha","_getWindowPosition","_stateAll","airy","_highlightAll","cartographicToCartesian","clearLastCamera","onabort","activate",`uniform vec4 evenColor;
uniform vec4 oddColor;
uniform float frequency;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);

  // From Stefan Gustavson's Procedural Textures in GLSL in OpenGL Insights
  vec2 F = czm_cellular(materialInput.st * frequency);
  float t = 1.0 - F.x * F.x;

  vec4 color = mix(evenColor, oddColor, t);
  material.diffuse = color.rgb;
  material.alpha = color.a * globalAlpha;

  return material;
}
`,"_enabledEdit","cityname","infiniteProjectionMatrix","WebMapServiceImageryProvider","texParameteri","_processForRemoveLayer","calcVolume","_maxPointNum","mercatorToLngLat","removeEventListener",`px);
        background-color: `,"updateOffset","scaleX","B_re","effects","getAspectContourMaterial","timeout of ","cacheTime","_setZIndex","_intersectionWidth","wall","_mouseEvent","请求出错","1.0.0","baseOptsConver","_onKeyUp","getFullYear","3dtile_feature_","path","_cluster","_bindEditEvent","fromAxisAngle","Display Wireframe","_homeButton","CRS","停止编辑方向","CesiumTerrainProvider","_calculateAsynSurfacePosition","_visibleAreaColor","clearPitchRange","_noMousePick","queryParameters","rgba(255,0,0,0.5)"," not handled: ","_zoomFactor","getTemplateHtml:格式化出错",`,
        u_textureUseWebMercatorT`,"geometries","repeat","outlineEffect","multiplyByVector","mergeOrientation","false_northing","flowGlow","Albers_Conic_Equal_Area","WHEEL","instances","mouseout","_禁止进入地下","EMPTY_OBJECT","_time","cesium-baseLayerPicker-sectionTitle","unit","_sectorFrontCommand","destroyDraggers","dimensions_x","getRectangle","visibility","shaderProgramId","pointGrid","showMoon","distance_all","volumeMeasure","setOpacity","feature","EditClass","xHalfAngleDegree","drawShow","domtoimage","getPickTarget",`<?xml version="1.0" encoding="UTF-8"?>
<svg width="20" height="20" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <rect width="48" height="48" fill="white" fill-opacity="0.01"/>
  <path d="M15 24V11.8756L25.5 17.9378L36 24L25.5 30.0622L15 36.1244V24Z" fill="none" stroke="#ffffff" stroke-width="5" stroke-linejoin="round"/>
</svg>`,"Aerial",`<div style="text-align: center;padding: 2px 0;" >
                      <button type="button"  `,"push","_last_contextmenuConfig","_map_extentChangeHandler","_smallMap","cartoList","+proj=tmerc +lat_0=0 +lon_0=111 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","createImageryProvider","_baseColor","CGCS2000_GK_Zone_3","u_hiddenColor","debugShowFramesPerSecond","關閉黑白","tile","_clearLastHighlight","showSkirts","frustumCommandsList","_drawLayer","cacheMarsOptions","_positions_show","imageBottom","paths","format","json","orginRotation","styleFieldOptions","getLoop","X_TRANSLATION_COLOR","bindPopup","function","getValueOrUndefined","fi0","_updateView","status","origin","rgba(253, 156, 115, ","BaseLayerPicker","_getTerrainHeight_ing","_toOneJson","pitPrimitive","image","radius_p","digVolumeStr","enableTranslate","_增加点","log",`in vec3 position3DHigh;
in vec3 position3DLow;
in vec3 normal;
in vec2 st;
in float batchId;
out vec2 v_st;
out vec3 v_normalEC;
out vec3 v_positionEC;

void main() {
  vec4 p = czm_translateRelativeToEye(position3DHigh, position3DLow);
  v_positionEC = (czm_modelViewRelativeToEye * p).xyz;
  v_normalEC = czm_normal * normal;
  v_st = st;
  gl_Position = czm_modelViewProjectionRelativeToEye * p;
}
`,"level","domeSurfaceMaterial","isContinued","addTo","cvs","gaodekey","clockRange","scaleY","R{arc_y}","GeometryCollection","_clearDrawCommand","mars3d-divGraphic-edit","_场景出图","fogEffect","_标记圆","planeStyleConver","createElementNS","billboardCollection","gradations","startEditingGrid","lineThickness","_rotateAngle","yyyy-MM-dd","Standard_Parallel_2","_geoJsonLayer","_updateImage","INSIDE","getCurrentMousePosition: scene.pick 拾取时异常","_lastShow","normal","_updateEditDraggerPositionHeight","mars3d-smallTooltip-rightArrow","_enabledDraw","_appearance","createVertexBuffer",`
#define CZM_SELECTED_FEATURE
uniform sampler2D czm_selectedIdTexture;
uniform float czm_selectedIdTextureStep;
uniform float czm_selectedIdTextureWidth;

bool czm_selected(vec4 id) {
  bool selected = false;
  for(int i = 0; i < 1024000; i++) {
    vec4 selectedId = texture(czm_selectedIdTexture, vec2((float(i) + 0.5) * czm_selectedIdTextureStep, 0.5));
    if(all(equal(id, selectedId))) {
      return true;
    }
    if(float(i) > czm_selectedIdTextureWidth)
      break;
  }
  return false;
}

`,"accuracy","eachChildGraphic","_getExtentView","_initTilesetClip","mouseMove","getExtent","sinphi","identify","addEventListener","_projection","-199.87,74.79,246.62","_colorFramebuffer","openSmallTooltipByMinPointNum","+proj=tmerc +lat_0=0 +lon_0=123 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","updateHeight","afterquote","updateControl","BaiduPOI 请求出错","_onMouseMove","boderColor","perPositionHeight","LEFT_CLICK","u_lightPositionEC","WGS84","eia","getByAttr","TRIANGLES","fromDimensions","mars3d-smallTooltip-arrow mars3d-smallTooltip-rightArrow","polylineVolumeStyleConver","_polyline_positions","_measureExLine_positions","editType","trim","depthFail","digVolume","_frustumPrimitive","+proj=tmerc +lat_0=0 +lon_0=135 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","zoom","按軸平移","_enabledMoveTarget","_openByClick","west","alt","_mapEx_timeTik","onlyPickModelPosition","diffHeight","u_mars3d_snake_texture","stopBounce","_value","getThing","顯示包圍盒","minimumClock","_hasMoveEdit","minHeight","radii_x","ratio","debugExtentEntity","_createCzmContainer","ControlUtil","preRender","PolylinePipeline","destination","unpackInterpolationResult","_readyPromise","frameRateHeight","updateAreaForTerrain","cancelReprojections","substring","pointVisibility","Image",'<div class="mars3d-template-titile">',"areas","toJSON","Point","convertPackedArrayForInterpolation","moveDown","Bessel 1841","numberOfLevelZeroTilesY","_getDrawEntityStyle","_y_direction","Southeast Asia","toISOString","關閉大氣渲染","CESIUM_3D_TILE","hbgd","radius_g","RIGHT_ROTATE","data","_addGraphicByArrOptions","createGeometry","_getEventByType","sin_po","graphics","maximumLevel","objectIds","_onRightClickHandler","ground","_isMouseLeftButtonPressed","moveStep","fromQuaternion","closeSmallTooltip","_setCameraViewListIndex","LOADING","_updateCamera","options","canRenderWithoutLosingDetail","minificationFilter","destroyObject","fromCache","CTRL","_container_onMousedownHandler","WHITE","hue","_createVideoPrimitive","bindEntities","polygonHierarchy","Visited ","ReplaceUrl","_wrapper","_createEntity","flipx",`uniform vec4 u_intersectionColor;
uniform float u_intersectionWidth;
uniform vec4 u_lineColor;

bool inSensorShadow(vec3 coneVertexWC, vec3 pointWC) {
    // Diagonal matrix from the unscaled ellipsoid space to the scaled space.
  vec3 D = czm_ellipsoidInverseRadii;

    // Sensor vertex in the scaled ellipsoid space
  vec3 q = D * coneVertexWC;
  float qMagnitudeSquared = dot(q, q);
  float test = qMagnitudeSquared - 1.0;

    // Sensor vertex to fragment vector in the ellipsoid's scaled space
  vec3 temp = D * pointWC - q;
  float d = dot(temp, q);

    // Behind silhouette plane and inside silhouette cone
  return (d < -test) && (d / length(temp) < -sqrt(test));
}


vec4 getLineColor() {
  return u_lineColor;
}

vec4 getIntersectionColor() {
  return u_intersectionColor;
}

float getIntersectionWidth() {
  return u_intersectionWidth;
}

vec2 sensor2dTextureCoordinates(float sensorRadius, vec3 pointMC) {
    // (s, t) both in the range [0, 1]
  float t = pointMC.z / sensorRadius;
  float s = 1.0 + (atan(pointMC.y, pointMC.x) / czm_twoPi);
  s = s - floor(s);

  return vec2(s, t);
}
`,"polylineP","cosphi","_allCount","_minHeight","_attributeLocations","_tileset","code","_jzmHeight","sexagesimal","layerDefs","updateText","https://dev.virtualearth.net","#D33038","#29cf34","_depthFailColor","green","_controls","addDynamicPosition","colorScheme","tileMatrixLabels","outerPositions","pixelOffsetX","standard_parallel_1","charCodeAt","Rectangle","checkData","_layerList","fillVolume","_正在计算体积","_billboardCollection","minDistance","BoundingBox","currentStyle","unbindUpdateEvent","outRangeColor","Close depth test against terrain","_w/wmts?service=WMTS&version=1.0.0&request=GetTile&tilematrix={TileMatrix}&layer=","lastTilesWaitingForChildren","Geostationary Satellite View","MaterialUtil registerClass: ","closeContextMenu","updateAttrForDrawing","unbindContextMenu","endUpdate","widthRatio","PolygonHierarchy","_primitive2","_state","terrainLoadSuccess","EPSG:4532","billboard","VERTICALCRS","city_limit","Appearance","_getCustomShader","HorizontalOrigin","timeRender","register: ","getEntityAttr","PolylineOutlineMaterialProperty","_updateStyleHook","_createFrustumPrimitive","resetValue","fromCartesianArray","_proxy","_enabledHook","showIntersection","removeArea","_noDestroy","scaleByDistance_near","_readChildNode","getElementsByTagName","pointer-events","lineWidth","removeLayer","showSectorSegmentLines","TrackedEntityYes","ShaderProgram","fixedFrameTransform","_pitch_min","projectionMatrix","localToWorld","passState","hasPixelOffset","VERTCRS","detail_info","类型已存在",`in vec3 position3DHigh;
in vec3 position3DLow;
in vec2 st;
in float batchId;

out vec3 v_positionMC;
out vec3 v_positionEC;
out vec2 v_st;

void main() {
  vec4 p = czm_computePosition();

  v_positionMC = position3DHigh + position3DLow;           // position in model coordinates
  v_positionEC = (czm_modelViewRelativeToEye * p).xyz;     // position in eye coordinates
  v_st = st;

  gl_Position = czm_modelViewProjectionRelativeToEye * p;
}
`,"_lineColor_alpha","_propagateEvent","animationSpeed","_tileLoadQueueMedium","indexOf","img_d","ep2","fromUniformScale","_lat","ellipsoidStyleConver","boundingSphere","Log","hierarchy","CloudCollection","PI_OVER_TWO","viewport","datumCode","TEXTURE_MAG_FILTER","_initFromEntity","zhang","_filterPOIData_polygon","u_mars3d_clip_rangeNumber","clip","bottomHeight","brightness","createGraphic","fov","_index","EPSG:4502","_minPitch","loadingImagery","-106,-87,188","defines","multiplyByScalar","27px","slice",";z=","_initTilesetFlat","display","updateGraphic","pickPosition","_events","stroke-opacity","one_minus_f","DistanceDisplayCondition","Color","ipad","_container","_hasRemoveByMapSplit","duration","PerformanceDisplay","_updateLabelPosition","_tilesetClip","_cancelOutlinePositionsCallback","fromCartesian","中键滚动","_computedModelMatrix","LineThreeDash","colorOptsConver","ALPHA_BLEND","font_weight","_scanUniforms","hasLayer","u_shadowMapTSDBANSS","For more functions, right click","updateVideoContainer","_primitive4","标记圆",`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="10px" height="20px" viewBox="0 0 19 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <path d="M0.6551724,2.3448276 L0.6551724,25.6551724 C0.6551724,26.6454761 1.4579722,27.4482759 2.4482759,27.4482759 C3.4385796,27.4482759 4.2413793,26.6454761 4.2413793,25.6551724 L4.2413793,2.3448276 C4.2413793,1.3545239 3.4385796,0.5517241 2.4482759,0.5517241 C1.4579722,0.5517241 0.6551724,1.3545239 0.6551724,2.3448276 L0.6551724,2.3448276 Z M7.6551724,2.3448276 L7.6551724,25.6551724 C7.6551724,26.6454761 8.4579722,27.4482759 9.4482759,27.4482759 C10.4385796,27.4482759 11.2413793,26.6454761 11.2413793,25.6551724 L11.2413793,2.3448276 C11.2413793,1.3545239 10.4385796,0.5517241 9.4482759,0.5517241 C8.4579722,0.5517241 7.6551724,1.3545239 7.6551724,2.3448276 L7.6551724,2.3448276 Z M14.6551724,2.3448276 L14.6551724,25.6551724 C14.6551724,26.6454761 15.4579722,27.4482759 16.4482759,27.4482759 C17.4385796,27.4482759 18.2413793,26.6454761 18.2413793,25.6551724 L18.2413793,2.3448276 C18.2413793,1.3545239 17.4385796,0.5517241 16.4482759,0.5517241 C15.4579722,0.5517241 14.6551724,1.3545239 14.6551724,2.3448276 L14.6551724,2.3448276 Z" id="splitter"></path>
</svg>
`,"_extrudedHeight","gaze","getShortestPath","notYetRenderableCount","gunung_segara","_model","_domeSurfaceMaterial","contourMaterial.alpha == 0.0 ? slopeRampMaterial.diffuse : contourMaterial.diffuse","eachControl","_hasRightTilt","clear","_clampToTilesetFrame","reload","開啓日照陰影","EQUIT","varying","_pageSize","cosrot","processImagery","_orbitCursorOpacity","getEntityPositions","_pointCollection","ImageryLayerFeatureInfo","hasOwnProperty","VanDerGrinten","polygonWall","_tooltipId","105nlhAPz","experimental-webgl","horizontalOrigin","PerInstanceColorAppearance","_pointEx","string","setValue","red","_last_planeGraphics","geometry","flipy","_frustumPlanes","degrees","_绕此处环绕飞行","raiseEvent","image/png","lat2","dataSources","sceneMode","frameRate","_graphic_editing","fill","EPSG:4504","_cacheGrid","requestImage","objects","distanceDisplayCondition","Pass","GetCapabilities","_lights","_updateDraggersTimeTik","custom","+proj=tmerc +lat_0=0 +lon_0=87 +k=1 +x_0=29500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","clearPosition","Invalid parameter value, must be numeric ","_terrainProvider","derivedCommands","definitionChanged","getOutlineCoordinates","keyup","GLOBE","particleSize","_arrLayerIdx","_last_preUpdateTime","logDepth","neckWidthFactor","slices","tiltEventTypes","CallbackProperty","_isColorMaterial","_primitives",'();"  ',"EPSG:4537","cesium-projectionPicker-buttonPerspective","停止編輯","PolyGradient","isStart","NaN","缩放视图","_popupMgr","_总长","dataColumn","root","_positions_draw","Axis","updateMatrix2","ColorType","easting","_drawAddPointHandler","plane类型未识别","hasTerrain","getOrientation","CustomShader","allDistance","endAngle","增加點","pickId","negate","GeographicProjection","hide","startFlicker","https://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer","_last_fireIndex","number","addTileError","Cartographic","CorridorGeometry","distanceDisplayCondition_near","maxDistance","_hasUpdateMater","VR模式不可用","_openByMouseEvent","moveForward","_单击完成绘制","scanPlaneRate","_target","_getTargetInfo","pipeline","COLUMN2ROW0","_updateOutlineStyle","imageryLayersUpdatedEvent","_sampler","TOP","unproject","_counts","cereatePositionsAndIndice","toCartesians","showBackground","value","_hasUpdate","morphStart","polygonWallStyle","_updateMouseDraw","simpleIntersection","clock","flyToPoint","CameraEventType","tabIndex","Buffer","_useHdr","_selectedIdTexture","_graphic_move_x","divUpLabel","updateDistanceDisplayCondition","esriGeometryPolygon","cancelFlyTo","ymax","INVALID","3dtile_pnts_","CULLED","vec_d","_pointBias","debuggerPointEntity","https://api.map.baidu.com/place/v2/search","EPSG:3857","pois","disable","LngLatArray",'" in afterquote yet, index ',"fa fa-sort-amount-desc","特效,请直接使用 map.effects.","_graphicList","getLevelMaximumGeometricError","https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer","phone","FIXED","_关闭深度监测","(window._contextmenuItemClickResult)","右擊刪除點","_graphic_rotate_z","_unbindEvent","sinlat0","geometryName","绘制时_map不能为空,请将对象添加到图层，并且图层已添加到Map","central_meridian","开启下雨","uniformMap","colorsKey","locationData","lat1","GroundPrimitive","_reflectorWorldPosition","Y_TRANSLATION","_orbit","+proj=tmerc +lat_0=0 +lon_0=120 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","_selectedLayer","_maxHeight","_lightPositionEC","6425172OoyQRQ","enableZoom","482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15","_levelZeroTiles","LabelStyleConver","Text",`
#ifdef CZM_SELECTED_FEATURE
out float me_isSelected;
bool czm_selected(){
    return czm_selected(`,"morphComplete","cos_p12","_lastSelectionResultFrame","Composite","Request aborted","_tileDiscardPolicy","maximumSizeX",`(); 
`,"upAxis","afterItem","_matrixMove","rotateMatrix","flyToByAnimationEnd","_frameState","features","openHighlight：原有style中不存在以下属性，关闭高亮时将无法恢复","_onClockTick","后退播放","setView","合肥火星科技有限公司","DrawCommand","evenColor","LOCAL_CS","roll","addInner","_setCameraViewListState","00000","_frameRateHeight","animation","_addPitGraphic","_hash","startPosition","raiseToTop","_videoPlay","complete","_xHalfAngle","normalY","顯示星空背景","selected","touches","isAvailable","last_highlighGraphic","http://online{s}.map.bdimg.com/tile/?qt=tile&x={x}&y={y}&z={z}&styles=","test","primitive","#000000","ZERO_TOLERANCE","event","coslat0","maximumSizeY","Longitude of natural origin","请引入 mars3d-cesium 库","關閉下雨","createPickFragmentShaderSource","_context","關閉霧天氣","_onMouseOver","lastPointTemporary","abs","setAttribute","datum","arc","_关闭黑白",`</Literal>
            </PropertyIsEqualTo> `,"sampler2D","_id","hasImage2","getInnerHTML","document.getElementById(","popupOptions","wkid","_frameTime","majorDragger","_清除所有标记","hscale","join","ClockRange","rightDown","停止按轴平移","toValue","VelocityVectorProperty","_readChildNodeVal","maximumCone","LightShadowMapsShader","worldToCameraCoordinatesPoint","getAzimuth","startAngle","_ready","where","sectionMeasure","_rate_positions","_czmContrl","AspectRamp","maxDepth",'"  style="width:',"editAddPoint","page","specify","projectionPicker","_onAdd","latitudeShift","INITIALIZED","_updateDomAttribute","lookUp","lineCount","_clusterData","replaceCache","scaleZ","getMatrix3","_无法删除不能少于最小点数","firstChild","infinity_dist",`uniform float globalAlpha;

float time = 0.0;
mat2 m2 = mat2(0.80, 0.60, -0.60, 0.80);

mat2 mars3d_makem(in float theta) {
  float c = cos(theta);
  float s = sin(theta);
  return mat2(c, -s, s, c);
}

float noise(in vec2 x) {
  return texture(specularMap, x * .01).x;
}

float mars3d_fbm(in vec2 p) {
  float z = 2.;
  float rz = 0.;
  for(float i = 1.; i < 7.; i++) {
    rz += abs((noise(p) - 0.5) * 2.) / z;
    z = z * 2.;
    p = p * 2.;
    p *= m2;
  }
  return rz;
}

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 vUv = materialInput.st;
  time = czm_frameNumber / 200.0;
  vec2 p = 2. * vUv.xy - vec2(1., 1.);
  vec2 bp = p;

  #ifndef CENTERED
  p += 5.;
  p *= 30.;
  #endif
  float rb = mars3d_fbm(p * .5 + time * .17) * .1;
  rb = sqrt(rb);
  #ifndef CENTERED
  p *= mars3d_makem(rb * .2 + atan(p.y, p.x) * 1.);
  #else
  p *= mars3d_makem(rb * .2 + atan(p.y, p.x) * 2.);
  #endif

    //coloring
  float rz = mars3d_fbm(p * .9 - time * .7);
  rz *= dot(bp * 5., bp) + .5;
  rz *= sin(p.x * .5 + time * 4.) * 1.5;
  vec3 col = vec3(.04, 0.07, 0.45) / (.1 - rz);
  vec4 fragColor = vec4(sqrt(abs(col)), 1.0);
  material.alpha = fragColor.a * alpha * globalAlpha;
  material.diffuse = fragColor.rgb * .5;

    // cesium
  float frequency = 2000.0;
  float amplitude = 10.0;
  float fadeFactor = 1.0;
  vec4 mapColor = texture(normalMap, materialInput.st);
  float specularMapValue = texture(normalMap, materialInput.st).r;
  specularMapValue = 1.0;

  float fade = max(1.0, (length(materialInput.positionToEyeEC) / 10000000000.0) * frequency * fadeFactor);
  vec4 noise = czm_getWaterNoise(normalMap, materialInput.st * frequency, time, 0.0);
  vec3 normalTangentSpace = noise.xyz * vec3(1.0, 1.0, (1.0 / amplitude));
  normalTangentSpace.xy /= fade;
  normalTangentSpace = mix(vec3(0.0, 0.0, 50.0), normalTangentSpace, specularMapValue);
  normalTangentSpace = normalize(normalTangentSpace);

  float mars3dPerturbationRatio = clamp(dot(normalTangentSpace, vec3(0.0, 0.0, 0.1)), 0.0, 1.0);
  material.diffuse += (0.1 * mars3dPerturbationRatio);
  material.normal = normalize(materialInput.tangentToEyeMatrix * normalTangentSpace);
  material.specular = 0.5;
  material.shininess = 10.0;

  return material;
}
`,"getColumn","waypoints","_reflectorProjectionMatrix","5e5949f7e96e8a136ef36a6594f18cdf","DESTROY","buildings","+proj=tmerc +lat_0=0 +lon_0=132 +k=1 +x_0=44500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","isMoveing","bindContextMenu","isConstant","rightLayer","_setViewerOption","thing","del","defs","customShaders","processStateMachine","cameraHeight","readyPromise","_showWall","debugShowBoundingVolume","HOLD","glowStrength","_mScale","getBaseLength","YZ_TRANSLATION","VERT_CS",`#extension GL_OES_standard_derivatives : enable

void fragmentMain(FragmentInput fsInput, inout czm_modelMaterial material) {
  if(enabled) {
    vec3 positionEC = fsInput.attributes.positionEC;
    vec4 positionWC = normalize(czm_inverseView * vec4(positionEC, 1.0));

    vec3 dx = dFdx(fsInput.attributes.positionEC);
    vec3 dy = dFdy(fsInput.attributes.positionEC);
    vec3 nor = normalize(cross(dx, dy));
    vec3 normalWC = normalize(czm_inverseViewRotation * nor);
    float dotNumWC = dot(positionWC.xyz, normalWC);
    if(dotNumWC <= 0.2) {
      material.diffuse = mix(material.diffuse, vec3(1.0), alpha * 0.2);
    } else {
      material.diffuse = mix(material.diffuse, vec3(1.0), dotNumWC * alpha);
    }
  }
}
`,"culture","KeyboardEventModifier","distortion","fogByDistance_near","allAreRenderable",`uniform float globalAlpha;

float marsstepping(float t) {
  if(t < 0.)
    return -1. + pow(1. + t, 2.);
  else
    return 1. - pow(1. - t, 2.);
}

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 vUv = materialInput.st;
  vec2 uv = 2. * vUv.xy - vec2(1., 1.);

  uv *= 2.0;
  vec4 fragColor = vec4(0.);
  uv = normalize(uv) * length(uv);

  float time = czm_frameNumber / speed;
  for(float i = 0.0; i < 12.0; i+=1.0) {
    float t = time + i * 3.141592 / 12. * (5. + 1. * marsstepping(sin(time * 3.)));
    vec2 p = vec2(cos(t), sin(t));
    p *= cos(time + i * 3.141592 * cos(time / 8.));
    vec3 col = cos(vec3(0, 1, -1) * 3.141592 * 2. / 3. + 3.141925 * (time / 2. + i / 5.)) * 0.5 + 0.5;
    fragColor += vec4(0.05 / length(uv - p * 0.9) * col, 1.0);
  }
  fragColor.xyz = pow(fragColor.xyz, vec3(3.));
  fragColor.w = 1.0;

  vec4 baseColor = vec4(fragColor.rgb + color.rgb * 2.0, fragColor.r * 0.2);
  material.alpha = baseColor.a * globalAlpha;
  material.diffuse = baseColor.rgb;

  return material;
}
`,"_createPolylineOutline","_frustum","multiple","baseMaterialConver","PROJCS","classList","graphic","querySelector","_wallEntity","{s}","_fireBindDataEx","_mapEx_extentChangeHandler","_prevCameraHeight","Matrix4","EPSG:4510","onlyPickTerrainPosition","cullingVolume","59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993","onCreateGraphic","_waterPlane","boxStyleConver","px;height: ","Lambert Conic Conformal (2SP)","drawingBufferToWgs84Coordinates",`<span style="color: red;">红色</span> 是 X轴<br/>
                  <span style="color: green;">绿色</span> 是 Y轴<br/>
                  <span style="color: blue;">蓝色</span> 是 Z轴`,"_postProcessStage","getOutlinePositions","_getPolylineOutlinePositions","_camera_cache","Latitude of false origin","getShowPositions","merge","headers","_hasFX","params","_右击删除点","min","該對象不允許編輯","nadgrid","_删除测量","_graphicLayer","&scaler=2&udt=&from=jsapi2_0","#3388ff","156","mouseover","PINCH","frequency","_containerSpeed","_getItemDataId","_height","commandList","getInt32","_pointType","_tileLayer_addTileHandler","cos","_rotateAutoStopAngle","new_zealand_geodetic_datum_1949","directionWC","getElevationContourMaterial",`rad);
      opacity: `,"_bindHeightDraggers","getLayersByAttr","DrawPolyline","tianditu","citylimit","C_re","terrainProvider","valid","_setPitchRange_mouseMoveHandler","图片加载失败：","CzmlLayer：请必须传入 url 或 data 参数","平移视图","maxWidth","osgb36","_filterPOIData_circle","color","gcj","_thingList","containerId","stopEditingGrid","_normal","dot","renderError","skyAtmosphere","_cameraReferenceFrameOriginCartographic","rgba(227,108,9, 0.5)","_updateLabelOpacity","_type",".cesium-performanceDisplay-throttled","version","coordinate","MIDDLE_DRAG","https://rt{s}.map.gtimg.com/tile?z={z}&x={x}&y={reverseY}&styleid=","_getConfig","_drawRemovePointHandler","imageryProvider","northing","touchend","Start","divGraphicStyleConver","getHours","_times","INTERSECTING","_isMouseUpdownPressed","_updateDomAttributeByEvent","updateTimer","roiUV","offsetY","clockLoop","minHeight 请传入有效数值！","fillText","fixedFrameToHeadingPitchRoll","_startHeading","transZ","POI 请求失败(","angle","_attr","navigationHelpButton","aspectRampMaterial","_createCesium3DTileset","editStop","corners","_sources","moveDelay","_areaList","rois","open","Invalid zone letter: ","readyImagery","_map_morphCompleteHandler","_onMap_mouseMove","TrackedEntityNo","pixelOffsetY","defineProperties","getColorByStyle","material_bak",`in vec3 position3DHigh;
in vec3 position3DLow;
in vec3 color;
in vec2 st;
in float batchId;

uniform mat4 mars_orthographicMatrix;
uniform mat4 mars_viewMatrix;
uniform vec2 mars_resolution;
uniform float mars_pointSize;
out vec2 v_st;
out vec3 v_worldPos;

vec4 transform(mat4 m, mat4 v, vec3 coord) {
  return m * v * vec4(coord, 1.0);
}
vec2 project(vec4 device) {
  vec3 device_normal = device.xyz / device.w;
  vec2 clip_pos = (device_normal * 0.5 + 0.5).xy;
  return clip_pos * mars_resolution;
}
vec4 unproject(vec2 screen, float z, float w) {
  vec2 clip_pos = screen / mars_resolution;
  vec2 device_normal = clip_pos * 2.0 - 1.0;
  return vec4(device_normal * w, z, w);
}

void main() {
  v_st = st;
  vec3 currP = position3DHigh.xyz + position3DLow.xyz;
  v_worldPos = currP;
  vec4 eyeCurrP = transform(mars_orthographicMatrix, mars_viewMatrix, currP);
  vec2 winCurrP = project(eyeCurrP);
  vec3 dirEye = czm_viewRotation * color;
  dirEye = normalize(dirEye);

  vec2 newWinCurrP = winCurrP + dirEye.xy * mars_pointSize;
  gl_Position = unproject(newWinCurrP, eyeCurrP.z, eyeCurrP.w);
  gl_PointSize = mars_pointSize;
}
`,"end","_getOutlinePositions","_lastFpsSampleTime","scaleFactor","geometryInstanceAttributes","_lightDirectionEC","EllipsoidSurfaceAppearance","RectangleStyleConver","PerspectiveFrustum","hasClosure","template","ontouchstart","con","leftLayer","LatLongBoundingBox","MAX_VALUE","Primitive","destroy","initialized","iframe","tilesRendered","defaultValue","_onEventHook","_url","entityCollection","maxHeight","_forPositionProperty","EPSG:4501","fabric","pickPositionSupported","getCoordinate","_公顷","hermannskogel","BufferUsage","LEFT_DOUBLE_CLICK","FormatLength","_unbindFun","_velocityScratch","getDistanceByLL","PrimitiveType","_contextmenuConfig","_orbitFrame","_fireAddPoint","geoJsonLayer_onLoadHandler","PolylineArrowType","EPSG:4516","PolylineGlowMaterialProperty","constructor","lineHeight","passes","空間距離","WGS66","floor","未查询到相关结果！","clampToHeightMostDetailed","near","_removeLayerMovedListener","_shadowMapTexture","_mousMiddleUpHandler","MeasureUtil","pure","#FF9742","swallowTailFactor","exp","Hough","lastParameters","MORPHING",'" in neutral yet, index ',"cesium-baseLayerPicker-categoryTitle","createRectanglePrimitive","cosb1",`</a>
                    `,"OrthographicFrustum","Lambert Conformal Conic","&scene=0","depthTestAgainstTerrain","bindTooltip","_addedHook","minPointNum","colorHidden","stop","DrawCircle","EditAttr","Angle","_cancelPositionsCallback",`

        czm_material czm_getMaterial(czm_materialInput materialInput)
        {
          czm_material m = czm_getDefaultMaterial(materialInput);
          vec2 uv = materialInput.st;

          float webMercatorT = getMercatorY(uv, u_tileRectangle.y, u_tileRectangle.w);

          vec4 u_initialColor = vec4(0.0);
          vec3 v_textureCoordinates = vec3(
            uv,
            webMercatorT
          );
          vec4 color = computeColor(u_initialColor, clamp(v_textureCoordinates, 0.0, 1.0));

          m.diffuse = color.rgb;
          m.alpha = color.a;
          return m;
        }
      `,"ProviderViewModel","clientX","_customShadersKey","PixelFormat","_修改长度","VertexFormat","positions","fa fa-eyedropper","EPSG:4521","openPopup","dimensions","_getModelMatrix","International 1909 (Hayford)","EPSILON5",'"  class="mars3d-popup-content mars3d-popup-color" style="',"miny","BingMapsImageryProvider","saturation","hideArea","convert","interpolation","showBox","orientation","gtu","WGS60","_getPositions","_pickCommands","minimumImageSize","insertIndex","poly","_startForExact","_initByMars3D","_angle","getDraggerContextMenu","view","_postProcessStages","wfs请求GetFeature出错","closeTooltip",` ? textureCoordinates.xz : textureCoordinates.xy,
        u_textureCoordinateRectangle`,"_面积","zmin","cross","_PerspectiveFrustum_clone_old","_positions_grid","control","requestFullscreen","Widgets/Images/TerrainProviders/Ellipsoid.png","getIntersectPoint","_initialize","_cylinderPosition","Prohibit to edit","DrawEditNo","camera_changedHandler","_startDrawHook","_buildImageResource","replacementNext","tileLoadProgress","nadgrids","hasMidPoint","fa fa-road","style","ScreenSpaceEventHandler","computePositions","u_mars3d_snake_rangeLength",'"  />',"finish","_updateEditDraggers","COLUMN0ROW0","addSample","Lon","_primitive_billboard","eachGraphic","_updatEntityAlpha","addScanPlane","_command","_objectsToExclude","_currentExtent","positiveX","Viewer","callback","Fullscreen","leftPositions","object","offsetX","left","reduce","measured","baseWaterColor","_clearDraw","_labelEx","geodeticSurfaceNormal","_getTerrainOptions","unbindEvent","FeatureCollection","heading","_matrixRotate","该功能需要引入mars3d修改版Cesium库(mars3d-cesium库)才支持!","relativeHeight","TEXTURE0","Mars3D_ShadowVisibilityShader","isTile","sqrt","右键+拖拽，或者","UNPACK_FLIP_Y_WEBGL","closePopup","_sectorSegmentLineCommand","viewFrom","Map：id 不能为空","indices","loadGeoJSON","userAgent","local","CircleStyleConver","_alpha","VaryingType","pageSize",`uniform samplerCube u_shadowMapCube;
uniform vec4 u_shadowMapTSDBANSS;
uniform float u_shadowMapDarkness;
uniform vec4 u_lightPositionEC;

struct my_shadowParameters {
  vec3 texCoordsCube;
  float depthBias;
  float depth;
  float nDotL;
  vec2 texelStepSize;
  float normalShadingSmooth;
  float darkness;
};

float shadowVisibilityCube(samplerCube shadowMap, my_shadowParameters shadowParameters) {
  float depthBias = shadowParameters.depthBias;
  float depth = shadowParameters.depth;
  float nDotL = shadowParameters.nDotL;
  float normalShadingSmooth = shadowParameters.normalShadingSmooth;
  float darkness = shadowParameters.darkness;
  vec3 uvw = shadowParameters.texCoordsCube;

  depth -= depthBias;
  return czm_shadowDepthCompare(shadowMap, uvw, depth);
}

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);

  vec3 positionEC = materialInput.positionToEyeEC;
  vec3 pointToLightEC = positionEC - u_lightPositionEC.xyz;
  float pointToLightECLength = length(pointToLightEC);
  vec3 l = normalize(pointToLightEC);

  my_shadowParameters shadowParameters;
  shadowParameters.texelStepSize = u_shadowMapTSDBANSS.xy;
  shadowParameters.depthBias = u_shadowMapTSDBANSS.z;
  shadowParameters.normalShadingSmooth = u_shadowMapTSDBANSS.w;
  shadowParameters.darkness = u_shadowMapDarkness;
  shadowParameters.depth = pointToLightECLength / u_radius;
  shadowParameters.texCoordsCube = czm_inverseViewRotation * l;
  float visibility = shadowVisibilityCube(u_shadowMapCube, shadowParameters);

  if(visibility == 1.0) {
    material.diffuse = u_visibleColor.rgb;
    material.alpha = u_visibleColor.a;
  } else {
    material.diffuse = u_hiddenColor.rgb;
    material.alpha = u_hiddenColor.a;
  }
  return material;
}
`,"StripeOrientation","Math","Name","_bindMorphComplete","frameState","maxHeight 请传入有效数值！","debugWireframe","expImage","u_tileRectangle","PARTIAL","_cameraMoveEndHandler","4301444cGpKIw","_visibility_type","Hermannskogel","sinX0","_getDefaultTemplate","WaterLight","FeatureDetection","thicknes","mapbox","viewMatrix","ViewportQuad","firefox","background","neutral","_缩小","mouseZoom","gradientCircleCanvas","CorridorOutlineGeometry","143FSlMFd","_flipY","isMultiMax","坡度: ","Enable bloom","queryGridData","_compassRectangle","clearMoveTargetDelay","touchmove","asin","rectangleP","updateGridPositions","MathDistance","addGraphic","dataSource","fromCssColorString","hasZIndex","_tilesToRender","maximumGreen","inverse","mouseOver","ringCanvas","繞此處環繞飛行","executeGlobeCommands","_islosdImg","_updateHeight","fromCartographic","_postRenderHandler","+proj=tmerc +lat_0=0 +lon_0=87 +k=1 +x_0=15500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","positionCartographic","layers","Hotine_Oblique_Mercator_Azimuth_Center","fromVertices","showElseArea","enablePickFeatures","getAddress","testPoint","divHeight","maximumHeights","entitys",`
    uniform sampler2D colorTexture;
    uniform sampler2D edgeTexture1;
    uniform sampler2D edgeTexture2;
    uniform sampler2D lineTexture;
    uniform sampler2D maskTexture;
    uniform bool showGlow;
    uniform float edgeGlow;
    uniform bool edgeOnly;
    uniform float edgeStrength;

    in vec2 v_textureCoordinates;
    void main(){

        vec2 vUv =v_textureCoordinates;
        vec4 edgeColor=texture( lineTexture, vUv);
        vec4 color=texture( colorTexture, vUv);
        float opacity=1.;
        if(edgeOnly){
            vec4 maskColor=texture( maskTexture, vUv);
            opacity=1.-maskColor.a;
            out_FragColor = maskColor;
            return;
        }

        if(showGlow){
            vec4 edgeValue1 = texture(edgeTexture1, vUv);
            vec4 edgeValue2 = texture(edgeTexture2, vUv);
            vec4 glowColor = edgeValue1 + edgeValue2 * edgeGlow;
            out_FragColor = opacity * color + edgeColor + edgeStrength * (1. - edgeColor.r) * glowColor;
        }
        else{
            out_FragColor = opacity * color + edgeColor;
        }
    }
    `,"negativeZ","_popupConfig","alignedAxis","_rangeNumber","point","_stopDrawHook","_formatPOIData","_getAddress_ing","_containerUl","_computeModelMatrix","_currentFrustum","round","dragger","setLayerSplitDirection","arcgis_cache","init","img","_color_alpha","_enableDebugWireframe","_pitch_reality","nodeValue","_normal_angle1","polylineVolume","_stat","uniformState","queryCircle","_tikRender","updateFrustum","_selectedPlane","zox","worldToModel","ModelAnimationLoop","fa fa-retweet","zmax","Polygon","minimumConeDegree","_lastPickedInfo","TilesetBoundingVolumeNo","_scene","getComputedStyle","_update","imageryProviderViewModels",`in vec4 aPosition;

void main() {
  gl_Position = czm_modelViewProjection * vec4(aPosition.xyz, 1.0);
}
`,"createPickId","Allowed to edit","_visibilitys","cgb","renderPass_","Cesium官方Ion提供的高分辨率全球地形","defer","opera","isAll","TdtPOI: 请传入参location数","rectangleStyleConver","_createGraphic","FAILED","entities","plane_distance","u_mars3d_jzw_upz","location","timeTik","clrk80","fogByDistance_nearValue","_isRotateStart","esriGeometryEnvelope","fromPointNormal","gridList","_containerBtnStart","_goHistoryView","_updatePointerEvents","outerCone","EPSG:4543","planeAngle","cartographicArrayToCartesianArray","uniforms","448780KfVops","strokeStyle","mars3d-locationbar-content","keys","graphicLayer","_positions_line_z","autoMiddleDynamicPosition","clone","u_mars3d_flood_floodAll","http://mars3d.cn","mouseUp","flyTo","closeHighlight","showDomeLines","areaStr","LineFlowColor","_createLabel","_points","datum_params","count","tileXYToNativeRectangle","off","FlodByMaterial","_gl","getGraphicById","modelUrl","positionsShow","oddColor","Cartesian3",`uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  vec2 center = st - vec2(0.5, 0.5);
  float time = -czm_frameNumber * 3.1415926 / 180.;//扫描速度1度
  float sin_t = sin(time);
  float cos_t = cos(time);
  vec2 center_rotate = vec2(center.s * cos_t - center.t * sin_t + 0.5, center.s * sin_t + center.t * cos_t + 0.5);
  vec4 color = texture(image, center_rotate);
  vec3 tColor = color.rgb * u_color.rgb;
  tColor *= u_color.a;
  material.diffuse = tColor;
  float length = 2. - length(center) / 0.5;
  material.alpha = color.a * pow(length, 0.5) * globalAlpha;//color.r = 0 或1
  return material;
}
`,"pop","&nbsp;&nbsp;","WallGeometry","_allowDrillPick","无法解析数据positions坐标位置","getContext","computeTileLoadPriority","mouseOut","cityCode","PerspectiveOffCenterFrustum","_values","equalsEpsilon","_labelEl","intersectionColor","invertColor","fa fa-codepen","identity","fromRotationZ","suspendLodUpdate","tooltipOptions","_dataProvider","MIDDLE_CLICK","getCache","Beduaram",`} 
`,"formatData","setCameraView","_lastTileLoadQueueLength","ter","https://webst0{s}.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}","_last_position","imageryLayers",`<Intersects>
                      <PropertyName>`,"updateOrientation","_scanPlaneFrontCommand","download","_onMouseMoveHandler_point","_highlightOptions","baidu","leftPoints","skyBox","offset","_onClockTickHanlder","Tilted_Perspective","EPSG:4509","cameraController","哥伦布2.5D视图","textStyles","controls","distanceDisplayCondition_far","_mouseDown","hasEdit","_initTilesetFlood","defaultView","EPSG4490",`uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  vec4 imgC = texture(image, st);
  if(imgC.a > .0) {
    material.diffuse = color.rgb;
  }
  material.alpha = imgC.a * color.a * globalAlpha;
  return material;
}
`,"runAnimations","autoSurfaceHeight","rotation_z","ScreenSpaceEventType","_面上","context","lastCameraView",`,
        u_textureAlpha`,"EPSG:4499","DIRECTION_LEFT","getThirdPoint","stopMoveMatrix","cylinderStyleConver","_getKeywords","currentObject","getImage","_minimumCollisionTerrainHeight","_filterPropagateEvent","_scanePlaneYHalfAngle","tag","boundingVolume","_mousWheelHandler","<div><label>","</And></Filter>","Entity","10000","_optionsLayersList","BoxStyleConver","lngLatToMercator","padding: ","C_im","_positions_line_y","LINEAR","isPointVisible","_getCameraFocus","silhouetteAlpha","getTooltipConfig","cylinder","_msFrameCount","radius_limit","_toChineseLang","_pointEditElementIDs","visibilitys","zoy","depthBias","laea","pixelOffset","aspectRatio","rotateRight","mouseDown","closed","WMS getMetadata请求出错","restore","_getGeoJsonGeometry","labelCollection","+proj=tmerc +lat_0=0 +lon_0=114 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","terrainData","transX","_material","viewModel","onlySelf","_lateralSurfaceTranslucent","luminanceAtZenith","tilesCulled","_minPointNum","toPoint","_container_outer","addTile","ADDED","Cassini","PlaneGeometry","maximumRed","headWidthFactor","terrain","result","_toCesiumValBefore","_bindHierarchy","projections","_updateEntityOpacity","service","addControl","sceneModePicker","未查询到“","LineTrail","czm_selectedIdTexture","size","_createPlaneByLine","initMinMap","viewShed","挖方体积","_tooltipConfig","positiveZ","_showDrawMouseMoveSmallTooltip","lineOpacity","Event","pointer","alfa","geos","loadConfig","radius_p_inv2","Modify the radius","upWC","_pauseTimeCounts",")))","_modelMatrix","circleSize","Texture3","_onClockTickHandler",'<div class="mars3d-template-content" >',"pause","flatHeight","wmts:","_czmControlKey","scaleByDistance","_skyboxMatrix3","titleField","Cesium3DTileStyle","_mergeStyleToOptions","ows:LowerCorner","contextmenuOptions","numberOfLevelZeroTilesX","AnimationViewModel","ShadowMap","RotatePointStart","CustomDataSource","Y_UP_TO_X_UP","preloadSiblings","dashPattern","geocent","labelHeightStyle","PostProcessStageLibrary","_tileLoadQueueHigh","convertor","contextMenuOpen","_orginCenterPoint","ml0","multiplyByUniformScale","mapProjection","enabled",`<?xml version="1.0" encoding="UTF-8"?>
<svg width="20" height="20" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <rect width="48" height="48" fill="white" fill-opacity="0.01"/>
  <path d="M16 12V36" stroke="#ffffff" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"/>
  <path d="M32 12V36" stroke="#ffffff" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>`,"metaKey","更多功能請右擊","fillVolumeStr","_layerList.destroy 异常","_updateDiffHeight","endsWith","ows:UpperCorner","image2","_primitive_boxs","setColumn","_removeAreaHook","altKey","editHeight","旋转视图","_trackedEntity","isPoint","once","multiplyByPointAsVector","startDraw","Bad character: ","PolylineGlowType","ComputeCommand","max","data.mars3d.cn","getCapabilities","setRotationSvg","jobScheduler","label","units","inverseMatrix","div","tileProvider","attr","GEOCCS","_hasRemoveElement","properties","turf_simplify简化失败，使用原始数据","XZ_TRANSLATION","MarsArray item.destroy 异常","BrightnessEffectNo","cellAlpha","TerrainState","percentageChanged","lineOffset","maxScale","_alt_bak","video/","_optionsBasemapsList","_highlight_mouseEventHandler","specularIntensity","pickFeatures","fa fa-connectdevelop","hasZ","getPickRay","anyWereRenderedLastFrame","getBasemaps","1jdBbUu","Ireland 1965","updateDraggers","_DRAW","unpack","sunDirectionWC","dirStep","randomColor","MGRSPoint coverting from nothing","R_A","startCompute","contrast","map","SnowEffectYes","bezierSpline","_hasMapInit","opacity","inertiaSpin","_mousePosition","_imageryCache","plane_normal","basemaps","area","execute","enabledEvent","stopRotateMatrix","fillColor","TdtPOI 请求出错","YZ_TRANSLATION_COLOR","volumeDepthMeasure","imageryLayersForClamp","_updatePosition","SlopeColorContour","toFixed","_currDistance","latColumn","bessel","southwest","arrayBufferView","minimumClockDegree","cameraMoveEnd","TileSelectionResult","_onCollectionChanged","TOP_ROTATE","qs1","threshold","anchor","_bottomPrimitive","ESRI","停止按軸平移","getArcPoints","_onMap_leftUp","silhouetteColor","czm_pickColor","GeometryInstance","ready","_moveActive","contourUniforms","originalColor","czm","COLUMBUS_VIEW","填方體積","DIRECTION_FORWARD","_toCesiumValEnd","_updateMatrixRotatePosition","_toOneCesiumVal_Poly","filter","_i3sProvider","createPrimitive","PlaneOutlineGeometry","rotation_x","开启深度监测","checkHasBreak","startMoveLeft","getAttribute","name","_cubeMap2","keyboardRoam","disableEdit","Clarke 1880 (IGN)",` == 1) {
          inside += 1;
        } else if (pointLightVisibility`,"BEVELED","editMovePoint","_isCircle",`;"></div>
    <div style="border-radius: 50%;
        width: `,"alert","inner_controlPoints","_updateStyleBaseHook","getMaxHeight","fogByDistance","u_mars3d_flat_texture","northeastChild","lblAddFun","shadowMaps","primitives","geometryInstances","_createShadowMap","cameraPosition","html","font_style","_czmContainerKey","dth","_graphic_move_y","RIGHT_UP","lowerToBottom","_cubeMap3","font_family","_setCameraViewListItem","_light_type","private","I3SLayer","GroundPolylineGeometry","endDraw","secondsDifference","placeholder","PROJECTEDCRS","ColorMaterialProperty","_高度","closeVurve","highlightEnabled","openContextMenu","BoundingSphere","_property","polylineStyleConver","shouldAnimate","_positionTexture","_setPositionsToCallback","zoomFactor","_cylinderLength","objectsToExclude","px bold normal","arrLX","cartographicLimitRectangle","wireframe","未知原因，导出失败!","offsetHeight","_clickTileGraphic","arrow","wms","VERSION","polygonCombine","_graphic_rotate_x","_uniforms_color_alpha","atan","_rotateFrame","_popupPosition","Safari","src","kilometers","_yTable","https://gac-geo.googlecnapps.cn/maps/vt?lyrs=m&x={x}&y={y}&z={z}","utm","splitNum","uniform\\s?vec4\\s?","_onMiddleUpHandler","radius_p2",`#extension GL_OES_standard_derivatives : enable
uniform sampler2D colorTexture;
uniform sampler2D depthTexture;
uniform float alpha;
in vec2 v_textureCoordinates;

vec4 toEye(in vec2 uv, in float depth) {
  vec2 xy = vec2((uv.x * 2.0 - 1.0), (uv.y * 2.0 - 1.0));
  vec4 posInCamera = czm_inverseProjection * vec4(xy, depth, 1.0);
  posInCamera = posInCamera / posInCamera.w;
  return posInCamera;
}
float getDepth(in vec4 depth) {
  float z_window = czm_unpackDepth(depth);
  z_window = czm_reverseLogDepth(z_window);
  float n_range = czm_depthRange.near;
  float f_range = czm_depthRange.far;
  return (2.0 * z_window - n_range - f_range) / (f_range - n_range);
}

void main() {
  vec4 color = texture(colorTexture, v_textureCoordinates);
  vec4 currD = texture(depthTexture, v_textureCoordinates);
  if(currD.r >= 1.0) {
    out_FragColor = color;
    return;
  }
  float depth = getDepth(currD);
  vec4 positionEC = toEye(v_textureCoordinates, depth);
  vec3 dx = dFdx(positionEC.xyz);
  vec3 dy = dFdy(positionEC.xyz);
  vec3 nor = normalize(cross(dx, dy));

  vec4 positionWC = normalize(czm_inverseView * positionEC);
  vec3 normalWC = normalize(czm_inverseViewRotation * nor);
  float dotNumWC = dot(positionWC.xyz, normalWC);
  if(dotNumWC <= 0.2) {
    out_FragColor = mix(color, vec4(1.0), alpha * 0.2);
    return;
  }
  out_FragColor = mix(color, vec4(1.0), dotNumWC * alpha);
}
`,"_defaultTerrainProvider","isCombine","rectangles","sources","POSITION_ONLY","BOOL","_level","update","positionsWall","reject","_scanPlaneBackCommand","onEnd","fxaa","cartesianToCartographic","_oldPickPrimitive","ellipsoid","fa fa-star-half-full","minimumLevel","_last_clickTime","0px","czmObject","rayEllipsoid","navigator","_draggerMove","moveEnd","_planeAngleRadians","modelStyleConver","_unionRectangle","_rectangle","body","flickerEntity","subtract","_contourSpacing","_addChildContainer","标记线","templateValues","billboardStyleConver","PolylineVolumeGeometry","_bindControl","trackedEntity","drawMouseMove","_colorTexture","_mars_type","RenderState","angle2","Comm. des Poids et Mesures 1799","proxy-authorization","UndergroundYes","GeometryPipeline","_map_click","_uniforms","AREA_2","#007be6","getValueOrDefault","stopPropagation","ms2","_setSceneOption","mprts","EPSG:4549","_关闭星空背景","removeEffect","_cutColor","backFaceAlpha","backgroundPadding","_viewer","pixelOffset_original","_rebindCzmContainer","_updateDraw","FrustumOutlineGeometry","Ray","_enabledEditGrid","autoTip","_stateOkIndex","pname","black","normalMap","AZURE","tileset","_last_firePosition","px;","_uniforms_baseWaterColor_alpha","rgb(21, 209, 242)","ows:Identifier","CLAMP_TO_GROUND","floodAll","bbox","baseVal","details","toastr","PROJECTION","getValue","openFlyAnimationEndFun","distance","微软雅黑","setOptions","_rectangle_draw","_polylines","MoveAll","_primitive_label","BlackAndWhiteEffectYes","_tooltipMgr","parentContainer","geometryType","sin","getOutline","ns0","_pickIds","getAddHeight","fog","enableLighting","coneTrack","trimTiles","toDegrees","getGeometryInstanceAttributes","3bhoULS","planClip","_start","_last_success","_clearShowPositions","isInPoly","配置中的特效未处理","_停止按轴旋转","entityGraphic","multiplyTransformation","_showSectorSegmentLines","_修改位置","ImageryLayerCollection","PolylineMaterialAppearance",`,
        u_textureTranslationAndScale`,"window._temp_mars3d_basemaps","pickedObject","_enableScreenSpaceCameraController","False easting","_showDomeSurfaces","distanceDisplayPoint","_图上量算","flyToGraphic","_imageryLayer","_hasEditScale","_updateStyleByEdit","_outlineFrustum","+proj=tmerc +lat_0=0 +lon_0=78 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","_promise","Cartesian2","featureIndex","_corridorEx","_cubeMap","_load_data","point3","SPHEROID","GraphicType","inRangeColor","mars3d-mousedownview-show","clampToGround","u_mars3d_isStart","_pickedId","wallStyleConver","rotation_y","postRender","headHeightFactor","_addChildGraphic","_city","distanceStr","getPropertyIds","setEndPoints","Central_Meridian","_computeEmitterModelMatrix","marsOcclusion","BlendingState","_startMousePosition","outlineColor","hiddenColor","X_UP_TO_Y_UP","getPopupConfig","lastTilesCulled","fetchJson出错了","radius_g_1","updateVolume","cva","_updateOutlineToCallback","frustum","按軸旋轉","eventType","inverseViewMatrix","_lastSelectionFrameNumber","sinb1","timetik","phi","showDigVolume","def","setWhere","onUploadProgress","+proj=tmerc +lat_0=0 +lon_0=123 +k=1 +x_0=21500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","+proj=longlat +ellps=GRS80 +no_defs","enableInputs","semiMajorAxis","keywords","viewer","_createPit","timeEndVal","depthTestOld","_container_onMouseoutHandler","parent","TextureWrap","cosgam","parentNode","cesium-widget-errorPanel-header","catch","Down","stepSize","GridMaterialProperty","getLangText","_point","u_flood_val","bloomTarget","_minimumHeights","_双击完成绘制","_moveStep","measure","buildModuleUrl","25px","_updateClr","lights","geodetic_datum_of_1965","mouseDownView","_wall_minimumHeights","https://rt{s}.map.gtimg.com/tile?z={z}&x={x}&y={reverseY}&styleid=1&scene=0","_autoStopAngle","rectified_grid_angle","PolygonGeometry","BOTTOM_ROTATE","normalShadingSmooth","_textureSize","showArea",";base64,","_onMorphComplete","editStart","geoidTiledTerrainProvider","bigfont","cartesian","lat0","導出GeoJSON","FID","_横切面积","MaterialAppearance","dhEvent","domToolbar","&style={style}&tilerow={TileRow}&tilecol={TileCol}&tilematrixset={TileMatrixSet}&format=tiles&tk=","显示包围盒","unbindTooltip","EPSG:4540","text","hasEditRadii","_修改半径","_timeinfo","_停止按轴平移","response","innerCone","updateEnvironment","Enable Pick highlighted","_roll","standard_parallel_2","ImageryState",`
// Permutation polynomial: (34x^2 + x) mod 289
vec3 _czm_permute289(vec3 x) {
  return mod((34.0 * x + 1.0) * x, 289.0);
}

vec2 czm_cellular(vec2 P) {
  #define K 0.142857142857 // 1/7
  #define Ko 0.428571428571 // 3/7
  #define jitter 1.0 // Less gives more regular pattern
  vec2 Pi = mod(floor(P), 289.0);
  vec2 Pf = fract(P);
  vec3 oi = vec3(-1.0, 0.0, 1.0);
  vec3 of = vec3(-0.5, 0.5, 1.5);
  vec3 px = _czm_permute289(Pi.x + oi);
  vec3 p = _czm_permute289(px.x + Pi.y + oi); // p11, p12, p13
  vec3 ox = fract(p * K) - Ko;
  vec3 oy = mod(floor(p * K), 7.0) * K - Ko;
  vec3 dx = Pf.x + 0.5 + jitter * ox;
  vec3 dy = Pf.y - of + jitter * oy;
  vec3 d1 = dx * dx + dy * dy; // d11, d12 and d13, squared
  p = _czm_permute289(px.y + Pi.y + oi); // p21, p22, p23
  ox = fract(p * K) - Ko;
  oy = mod(floor(p * K), 7.0) * K - Ko;
  dx = Pf.x - 0.5 + jitter * ox;
  dy = Pf.y - of + jitter * oy;
  vec3 d2 = dx * dx + dy * dy; // d21, d22 and d23, squared
  p = _czm_permute289(px.z + Pi.y + oi); // p31, p32, p33
  ox = fract(p * K) - Ko;
  oy = mod(floor(p * K), 7.0) * K - Ko;
  dx = Pf.x - 1.5 + jitter * ox;
  dy = Pf.y - of + jitter * oy;
  vec3 d3 = dx * dx + dy * dy; // d31, d32 and d33, squared
    // Sort out the two smallest distances (F1, F2)
  vec3 d1a = min(d1, d2);
  d2 = max(d1, d2); // Swap to keep candidates for F2
  d2 = min(d2, d3); // neither F1 nor F2 are now in d3
  d1 = min(d1a, d2); // F1 is now in d1
  d2 = max(d1a, d2); // Swap to keep candidates for F2
  d1.xy = (d1.x < d1.y) ? d1.xy : d1.yx; // Swap if smaller
  d1.xz = (d1.x < d1.z) ? d1.xz : d1.zx; // F1 is in d1.x
  d1.yz = min(d1.yz, d2.yz); // F2 is now not in d2.yz
  d1.y = min(d1.y, d1.z); // nor in  d1.z
  d1.y = min(d1.y, d2.x); // F2 is in d1.y, we're done.
  return sqrt(d1.xy);
}
`,"开启日照阴影","fromRotationTranslation","MIDDLE_DOWN","latitude_of_center","formatNum","getTimestamp","iconClass","isRestorePositions","BaseClass","none","crs","latitude","postUpdate","currentTarget","位置信息","getArrowHeadPoints","PolylineDashMaterialProperty","showPage","lat_ts","_rotateDirection","updateMatrix","add","_planeOptions","SCENE2D","max-height: ","drawImage","AREA_0","关闭深度监测","_virtualCamera","tms","_renderPassCache","lodGraphic","effect","rotateStop","_fxOnePointOk","onclick","_onTerrainChangeHandler","530px","frameNumber","u_mars3d_flood_currentheight","_positionWC","openHighlight","_setPositions","_useSingleColor","algorithmUtil","vertexArray","_showLateralSurfaces","COLUMN1ROW0","popupOpen","start","blendColor","整体平移","multiplyByPoint","_occluders","MultiPolygon","drillPick","IDENTITY","_hasHeightEdit","fileType","Camera info","http://api.tianditu.gov.cn/v2/search","stRotation","moveLeft","isClockWise","getRange","middleDown","_pickSP","contourShow","RadarLine","uniform","mouse","gravity","esri","DATUM","_quadtree","_performanceDisplay","关闭包围盒","getRequiredDataPoints","resolutions","transform","isInPush","_measured","_hasLoad","ColorOptsConver","Transforms","preUpdate","IdField","booleanPointInPolygon","_distanceDisplayCondition","GroundPolylinePrimitive","lightDirection","SkyBox","TerrainNo","GeometryAttribute","center","#D33B7D","getMetadata","_getFixedFrameToEastNorthUpTransformFromWorldMatrix","updateClock","_mars3d_id","_dragger_index","updateCallback","leftDown","heightStep","u_mars3d_snake_outRangeColor","_tilingScheme","_headingWhenLeftClicked","_positions_CallbackProperty",`uniform samplerCube u_cubeMap;
uniform samplerCube u_cubeMap2;
uniform samplerCube u_cubeMap3;
uniform float u_select;
in vec3 v_texCoord;

void main() {
  vec4 fragColor;
  if(u_select <= 1.0) {
    vec4 color = czm_textureCube(u_cubeMap, normalize(v_texCoord));
    color = vec4(czm_gammaCorrect(color).rgb, czm_morphTime);
    vec4 color2 = czm_textureCube(u_cubeMap2, normalize(v_texCoord));
    color2 = vec4(czm_gammaCorrect(color2).rgb, czm_morphTime);
    fragColor = mix(color, color2, u_select);
  }
  if(u_select > 1.0) {
    vec4 color = czm_textureCube(u_cubeMap2, normalize(v_texCoord));
    color = vec4(czm_gammaCorrect(color).rgb, czm_morphTime);
    vec4 color2 = czm_textureCube(u_cubeMap3, normalize(v_texCoord));
    color2 = vec4(czm_gammaCorrect(color2).rgb, czm_morphTime);
    fragColor = mix(color, color2, u_select - 1.0);
  }
  out_FragColor = fragColor;
}
`,"LOCAL_DATUM","direction","entity","place","addArea","_onDbClickHandler","TextureMagnificationFilter","tilesVisited","_contextmenuConfig_bak","fullscreenElement","CircleGeometry","centerOfLine","bloomEffect","insertBefore","drawingBufferHeight","Northing at false origin","sphere","pinchEnd","_特效效果","createIndexBuffer","forEach","transparent","PixelDatatype","pick3DTileset","toDataURL",'<div id="tooltip-',"_停止调整比例","_textures","EPSG:4494","mapChinaCRS","maxPointNum","material","enableRotate","BOTTOM","_camera","N_POLE","setHeight","closePath","</label>","lighting","bcc62222fc634ec736589c483de933e6","EPSG:4518","_forwardExtrapolationDuration","editMouseMove","HAS_V_NORMAL_MARS3D","icon","_matrix","contourMaterial","_hasTerrainShadows","circle","+proj=tmerc +lat_0=0 +lon_0=81 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","deleteTexture","glowColor","_axisRotation","_onClickHandler_point","COLUMN0ROW2","color2","renderable","addThing","datum_type","PolylineGeometry","_scaleBarEl","geojson","_maximumDistance","values","OBJECTID","qs2","density","Driving","BLUE","maximumSize","onSetOpacity","_splitOptionsToStyle","google","toDate","TilesetWireframeYes","_initByPosition","showResult","dimensions_y","valueFD","Latitude_Of_Center","_onMarkerDrag","_addHeightCallbacks","exact","_heightReference","_distance","showPlane","minimumZoomDistance","Opera","pit","Cesium3DTilePass","_supportsImageRenderingPixelated","postProcessStage","divLightPoint","+proj=tmerc +lat_0=0 +lon_0=93 +k=1 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs","lang",`
uniform sampler2D colorTexture;
uniform sampler2D depthTexture;

uniform float mars3d_opacity;
uniform vec3 mars3d_visibleAreaColor;
uniform vec3 mars3d_hiddenAreaColor;


const int LightNum = LightNumVlaue;
uniform vec4 lightPositionEC[LightNum];
uniform mat4 shadowMapMatrix[LightNum];
uniform vec4 shadowMapTexelSizeDepthBiasAndNormalShadingSmooth[LightNum];
uniform vec2 shadowMapDarknessType[LightNum];
uniform float mars3d_distance[LightNum];


LightShadowMapsShader

in vec2 v_textureCoordinates;

vec3 getEyeCoordinate3FromWindowCoordinate(vec2 fragCoord, float logDepthOrDepth) {
  vec4 eyeCoordinate = czm_windowToEyeCoordinates(fragCoord, logDepthOrDepth);
  return eyeCoordinate.xyz / eyeCoordinate.w;
}

vec3 vectorFromOffset(vec4 eyeCoordinate, vec2 positiveOffset) {
  vec2 glFragCoordXY = v_textureCoordinates.xy * czm_viewport.zw;
  float upOrRightLogDepth = czm_unpackDepth(texture(depthTexture, (glFragCoordXY + positiveOffset) / czm_viewport.zw));
  float downOrLeftLogDepth = czm_unpackDepth(texture(depthTexture, (glFragCoordXY - positiveOffset) / czm_viewport.zw));

  bvec2 upOrRightInBounds = lessThan(glFragCoordXY + positiveOffset, czm_viewport.zw);
  float useUpOrRight = float(upOrRightLogDepth > 0.0 && upOrRightInBounds.x && upOrRightInBounds.y);
  float useDownOrLeft = float(useUpOrRight == 0.0);
  vec3 upOrRightEC = getEyeCoordinate3FromWindowCoordinate(glFragCoordXY + positiveOffset, upOrRightLogDepth);
  vec3 downOrLeftEC = getEyeCoordinate3FromWindowCoordinate(glFragCoordXY - positiveOffset, downOrLeftLogDepth);
  return (upOrRightEC - (eyeCoordinate.xyz / eyeCoordinate.w)) * useUpOrRight + ((eyeCoordinate.xyz / eyeCoordinate.w) - downOrLeftEC) * useDownOrLeft;
}

struct my_shadowParameters
{
    vec3 texCoordsCube;
    vec2 texCoords;
    float depthBias;
    float depth;
    float nDotL;
    vec2 texelStepSize;
    float normalShadingSmooth;
    float darkness;
};

float shadowVisibilityCube(samplerCube shadowMap, my_shadowParameters shadowParameters){
    float depthBias = shadowParameters.depthBias;
    float depth = shadowParameters.depth;
    float nDotL = shadowParameters.nDotL;
    float normalShadingSmooth = shadowParameters.normalShadingSmooth;
    float darkness = shadowParameters.darkness;
    vec3 uvw = shadowParameters.texCoordsCube;

    depth -= depthBias;
    return czm_shadowDepthCompare(shadowMap, uvw, depth);
}
float shadowVisibility2D(sampler2D shadowMap, my_shadowParameters shadowParameters)
{
    float depthBias = shadowParameters.depthBias;
    float depth = shadowParameters.depth;
    float nDotL = shadowParameters.nDotL;
    float normalShadingSmooth = shadowParameters.normalShadingSmooth;
    float darkness = shadowParameters.darkness;
    vec2 uv = shadowParameters.texCoords;

    depth -= depthBias;
    return czm_shadowDepthCompare(shadowMap, uv, depth);
}

int getPointVisibility(vec3 normalEC, vec3 positionEC, int i, samplerCube lightShadowMapCube){
  vec4 lightPEC = lightPositionEC[i];
  vec2 shadowMapDT = shadowMapDarknessType[i];
  vec3 pointToLightEC = positionEC - lightPEC.xyz;
  float pointToLightECLength = length(pointToLightEC);
  vec3 l = normalize(pointToLightEC);
  float NdotL = clamp(dot(-normalEC, l), 0.0, 1.0);

  float visibility = 0.0;
  float radius = lightPEC.w;
  float type = shadowMapDT.y;

  if(pointToLightECLength <= radius){
    vec4 shadowMapTSDBANSS = shadowMapTexelSizeDepthBiasAndNormalShadingSmooth[i];

    my_shadowParameters shadowParameters;
    shadowParameters.texelStepSize = shadowMapTSDBANSS.xy;
    shadowParameters.depthBias = shadowMapTSDBANSS.z;
    shadowParameters.normalShadingSmooth = shadowMapTSDBANSS.w;
    shadowParameters.darkness = shadowMapDT.x;
    shadowParameters.depth = pointToLightECLength / radius;
    shadowParameters.nDotL = NdotL;
    shadowParameters.texCoordsCube = czm_inverseViewRotation * l;
    visibility = shadowVisibilityCube(lightShadowMapCube, shadowParameters);
    if(visibility == 1.0){
      return 0;
    } else {
      return 1;
    }
  } else {
    return 2;
  }
}

int getFrustumVisibility(vec3 normalEC, vec3 positionEC, int i, sampler2D lightShadowMap2D){
  vec4 lightPEC = lightPositionEC[i];
  vec2 shadowMapDT = shadowMapDarknessType[i];
  vec3 pointToLightEC = positionEC - lightPEC.xyz;
  vec3 l = normalize(pointToLightEC);
  float NdotL = clamp(dot(-normalEC, l), 0.0, 1.0);

  float visibility = 0.0;
  float type = shadowMapDT.y;

  vec4 shadowPosition = shadowMapMatrix[i] * vec4(positionEC, 1.0);
  shadowPosition /= shadowPosition.w;
  if (any(lessThan(shadowPosition.xyz, vec3(0.0))) || any(greaterThan(shadowPosition.xyz, vec3(1.0)))) {
    return 2;
  }

  //坐标与视点位置距离，大于最大距离则舍弃阴影效果
  vec4 lw = czm_inverseView * vec4(lightPEC.xyz, 1.0);
  vec4 vw = czm_inverseView * vec4(positionEC.xyz, 1.0);
  float one_distance = mars3d_distance[i];
  if(distance(lw.xyz, vw.xyz) > one_distance) {
    return 2;
  }


  vec4 shadowMapTSDBANSS = shadowMapTexelSizeDepthBiasAndNormalShadingSmooth[i];
  my_shadowParameters shadowParameters;
  shadowParameters.texelStepSize = shadowMapTSDBANSS.xy;
  shadowParameters.depthBias = shadowMapTSDBANSS.z;
  shadowParameters.normalShadingSmooth = shadowMapTSDBANSS.w;
  shadowParameters.darkness = shadowMapDT.x;
  shadowParameters.texCoords = shadowPosition.xy;
  shadowParameters.depth = shadowPosition.z;
  shadowParameters.nDotL = NdotL;

  visibility = shadowVisibility2D(lightShadowMap2D, shadowParameters);
  if(visibility == 1.0){
    return 0;
  } else {
    return 1;
  }

}


void main() {
  vec4 color = texture(colorTexture, v_textureCoordinates);
  float logDepthOrDepth = czm_unpackDepth(texture(depthTexture, v_textureCoordinates));
  if(logDepthOrDepth >= 1.0){
    out_FragColor = color;
    return;
  }

  vec4 eyeCoordinate = czm_windowToEyeCoordinates(v_textureCoordinates.xy * czm_viewport.zw, logDepthOrDepth);
  vec3 downUp = vectorFromOffset(eyeCoordinate, vec2(0.0, 1.0));
  vec3 leftRight = vectorFromOffset(eyeCoordinate, vec2(1.0, 0.0));
  vec3 normalEC = normalize(cross(leftRight, downUp));
  vec3 positionEC = eyeCoordinate.xyz / eyeCoordinate.w;

  int visibility = 0;
  int inside = 0;
  vec3 totalColor = vec3(0.0);

  ShadowVisibilityShader

  if(visibility > 0){
    totalColor = mars3d_visibleAreaColor;
  } else if(inside > 0) {
    totalColor = mars3d_hiddenAreaColor;
  }
  out_FragColor = vec4(color.xyz + totalColor, mars3d_opacity);
}
`,"results","msg","GeoJsonLayer：没有传入 url 或 data 参数,请确认是否有误。","marsgis","getHeadingPitchRoll","bindUpdateEvent","moveBackward","i3sNode","_updateImage_delay","heightReference","heightTriangle","texture","normalOffsetScale","_polylineCollection","_hasZIndex",`px;">
    <p></p>
    `,"_updateDivPosition","circleStyleConver","_orbitCursorAngle","radius","_onMouseOut","videoPrimitive","_unbindMorphComplete","hidden","delta","textBaseline","translucency","getInMapChilds","maxDepthVisited","_createAppearance","_getJulianDate","_contourColor","_createPrimitive","_container_inner","esriGeometryPoint","getLayer","_orbitLastTimestamp","NearFarScalar","totalArea","vscale","_menuIndex","_drawCommands","shape","setNowTime","getFloat32","_modelUpAxis","Latitude of natural origin","_isDragger","reportSuccess","_oldPickedId","indexs","numberOfDerivatives","convertToReferenceFrame","<br/>","postProcess","esriSpatialRelIntersects","SceneMode","_removedHook","_getPickIds","scanPlaneColor","BillboardCollection","UNLOADED","leftUp","视角切换","_公里","_tileToUpdateHeights","_moveDistanceSum","pageIndex","_sampledPositionProperty","screenSpaceCameraController","mousedown","高亮对象图层","_conversionStyle","granularity","WGS84标准椭球，又称EPSG：4326","Drag that object","autoStop","_eventParents","_container2","BrA",`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="17px" height="17px" viewBox="0 0 17 17" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <title>拖拽调整俯仰角</title>
    <desc>mars3d.cn</desc>
    <defs></defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill-rule="evenodd">
        <g id="compass-inner" fill-rule="nonzero">
            <path d="M8.5,16.5 C4.081722,16.5 0.5,12.918278 0.5,8.5 C0.5,4.081722 4.081722,0.5 8.5,0.5 C12.918278,0.5 16.5,4.081722 16.5,8.5 C16.5,12.918278 12.918278,16.5 8.5,16.5 Z M8.5,15.5 C12.3659932,15.5 15.5,12.3659932 15.5,8.5 C15.5,4.63400675 12.3659932,1.5 8.5,1.5 C4.63400675,1.5 1.5,4.63400675 1.5,8.5 C1.5,12.3659932 4.63400675,15.5 8.5,15.5 Z" id="Oval-96"></path>
            <path d="M9.92599835,7.09066832 C12.7122872,9.87695712 14.3709388,12.5452228 13.4497471,13.4664145 C12.5285555,14.3876061 9.86028979,12.7289545 7.074001,9.94266568 C4.2877122,7.15637688 2.62906055,4.48811119 3.55025221,3.56691953 C4.47144386,2.64572788 7.13970955,4.30437952 9.92599835,7.09066832 Z M9.21889157,7.7977751 C6.92836458,5.50724811 4.52075769,4.01062761 4.25735899,4.27402631 C3.99396029,4.53742501 5.49058078,6.9450319 7.78110778,9.2355589 C10.0716348,11.5260859 12.4792417,13.0227064 12.7426404,12.7593077 C13.0060391,12.495909 11.5094186,10.0883021 9.21889157,7.7977751 Z" id="Oval-96-Copy-2"></path>
            <path d="M9.92599835,9.94266568 C7.13970955,12.7289545 4.47144386,14.3876061 3.55025221,13.4664145 C2.62906055,12.5452228 4.2877122,9.87695712 7.074001,7.09066832 C9.86028979,4.30437952 12.5285555,2.64572788 13.4497471,3.56691953 C14.3709388,4.48811119 12.7122872,7.15637688 9.92599835,9.94266568 Z M9.21889157,9.2355589 C11.5094186,6.9450319 13.0060391,4.53742501 12.7426404,4.27402631 C12.4792417,4.01062761 10.0716348,5.50724811 7.78110778,7.7977751 C5.49058078,10.0883021 3.99396029,12.495909 4.25735899,12.7593077 C4.52075769,13.0227064 6.92836458,11.5260859 9.21889157,9.2355589 Z" id="Oval-96-Copy-3"></path>
            <path d="M15.1464466,1.1464466 L14.3453364,1.94755684 L13.9608692,2.33202401 L14.667976,3.03913077 L15.0524431,2.65466362 L15.8535534,1.8535534 L15.1464466,1.1464466 Z M2.29760014,13.995293 L1.85311902,14.4397742 L1.004311,15.2885822 L1.71141776,15.995689 L2.56022581,15.146881 L3.00470698,14.7023998 L2.29760014,13.995293 Z" id="Line"></path>
            <circle id="Oval-432" cx="16" cy="1" r="1"></circle>
            <circle id="Oval-432-Copy" cx="1" cy="16" r="1"></circle>
        </g>
    </g>
</svg>
`,"bottomRadius","Am5SdKm6pNdkP1P5zuUOMZwleCHeA7GD5vuQgZ3xBUbEMBeQ5cQ1WN4B8xqqV1Vt","_sceneEvent","translucent","rainEffect","_arrowLength","查看當前視角","{z}","https://restapi.amap.com/v3/place/detail","editRemovePoint","wheel",'<span  class="mars3d-popup-close-button mars3d-popup-color closeButton" >×</span>',"_hierarchy","DefaultImageId","_removeDynamicPosition","Mask","getClusterList","getPickDepth","fromElements","surfaceHeight","removeNearPoint","_contourWidth","GRS 1980(IUGG, 1980)","開啓亮度","polygonC","_positions","fa fa-globe","_isStart","_primitive_outline","distanceHor","flyToExtent","https://gss{s}.bdstatic.com/5LUZemja_QUU8t7mm9GUKT-xh_/tile/?udt=20150114&qt=tile&styles=pl&x={x}&y={y}&z={z}","infocode","px;color:","sin_p14","_x_direction","_labelCollection","HeadingPitchRoll","updateBox","特效效果","vertexFormat"];return _0x1c66=function(){return n},_0x1c66()}function getOnLinePointByLen(n,e,t,i){const s={_0xa1522e:2978,_0x235f9e:2478,_0x4b73d2:3481},r=_0x3a2b68,o=Cesium__namespace.Transforms[r(778)](n),c=Cesium__namespace[r(2478)].inverse(o,new Cesium__namespace.Matrix4);n=Cesium__namespace.Matrix4[r(3705)](c,n,new Cesium__namespace[r(s._0xa1522e)]),e=Cesium__namespace[r(s._0x235f9e)].multiplyByPoint(c,e,new Cesium__namespace.Cartesian3);const _=Cesium__namespace.Cartesian3.subtract(e,n,new Cesium__namespace.Cartesian3),l=Cesium__namespace.Cartesian3[r(s._0x4b73d2)](n,e);let d;l!==0?d=t/l:d=.001,i&&(d+=1);let f=Cesium__namespace.Cartesian3.multiplyByScalar(_,d,new Cesium__namespace.Cartesian3);return f=Cesium__namespace.Matrix4.multiplyByPoint(o,f,new Cesium__namespace.Cartesian3),f}function getPositionByHprAndOffset(n,e,t,i,s){const r={_0x395a79:1378},o=_0x3a2b68;n=LngLatPoint[o(r._0x395a79)](n),!t&&(t=new Cesium__namespace.HeadingPitchRoll);const c=Cesium__namespace.Transforms[o(1623)](n,t,i,s),_=Cesium__namespace.Matrix4.fromRotationTranslation(Cesium__namespace.Matrix3.fromQuaternion(c,new Cesium__namespace.Matrix3),n,new Cesium__namespace.Matrix4);return Cesium__namespace[o(2478)].multiplyByPoint(_,e,new Cesium__namespace[o(2978)])}function getPositionByDirectionAndLen(n,e,t){const i={_0x2732e3:2806,_0x1c2e6e:1185,_0x55e33e:2478},s=_0x3a2b68;n=LngLatPoint[s(1378)](n);const r=Cesium__namespace.Transforms.eastNorthUpToFixedFrame(n),o=Cesium__namespace[s(1168)].fromRotationZ(Cesium__namespace[s(i._0x2732e3)][s(i._0x1c2e6e)](360-(e||0))),c=Cesium__namespace[s(i._0x55e33e)].fromRotationTranslation(o);return Cesium__namespace.Matrix4.multiply(r,c,r),Cesium__namespace.Matrix4.multiplyByPoint(r,new Cesium__namespace[s(2978)](t,0,0),new Cesium__namespace[s(2978)])}function getPositionByHprAndLen(n,e,t){const i=_0x3a2b68;n=LngLatPoint.toCartesian(n);const s=Cesium__namespace.Transforms.headingPitchRollQuaternion(n,e),r=Cesium__namespace.Matrix4[i(3654)](Cesium__namespace.Matrix3.fromQuaternion(s,new Cesium__namespace.Matrix3),n,new Cesium__namespace.Matrix4);return Cesium__namespace[i(2478)].multiplyByPoint(r,new Cesium__namespace.Cartesian3(0,0,-t),new Cesium__namespace.Cartesian3)}function getRayEarthPosition(n,e,t,i){const s={_0x45d084:3737,_0x5a2fe5:2478,_0x4d6762:3654},r=_0x3a2b68;if(!n||!e)return;e instanceof Cesium__namespace.HeadingPitchRoll&&(e=Cesium__namespace[r(s._0x45d084)][r(1623)](n,e));const o=Cesium__namespace[r(s._0x5a2fe5)][r(s._0x4d6762)](Cesium__namespace[r(1168)].fromQuaternion(e,new Cesium__namespace.Matrix3),n,new Cesium__namespace[r(2478)]);return getRayEarthPositionByMatrix(o,t,i)}function getRayEarthPositionByMatrix(n,e,t){const i=_0x3a2b68,s=new Cesium__namespace.Cartesian3,r=new Cesium__namespace.Ray;Cesium__namespace.Matrix4.multiplyByPoint(n,Cesium__namespace.Cartesian3.ZERO,s),s[i(2957)](r.origin);const o=new Cesium__namespace.Cartesian3(0,0,e?-100:100);return extend2Earth(o,n,r,t)}function extend2Earth(n,e,t,i){const s={_0x55f7b6:2978,_0x37e6c5:2978,_0xeb6884:1085,_0x41c3d3:3763,_0x1bbaa4:3410,_0x5b8515:3458},r=_0x3a2b68;i=i||Cesium__namespace.Ellipsoid.WGS84;const o=new Cesium__namespace[r(s._0x55f7b6)];Cesium__namespace.Matrix4.multiplyByPoint(e,n,o),Cesium__namespace.Cartesian3.subtract(o,t.origin,t.direction),Cesium__namespace[r(s._0x37e6c5)][r(s._0xeb6884)](t.direction,t[r(s._0x41c3d3)]);const c=Cesium__namespace.IntersectionTests[r(s._0x1bbaa4)](t,i);let _=null;if(c&&(_=Cesium__namespace[r(s._0x5b8515)].getPoint(t,c.start)),_)try{const l=new Cesium__namespace.Cartographic;Cesium__namespace[r(2228)].fromCartesian(_,null,l)}catch{return null}return _}function getHeadingPitchRollByOrientation(n,e,t,i){const s={_0x138642:1936},r=_0x3a2b68;if(!Cesium__namespace.defined(e)||!Cesium__namespace.defined(n))return new Cesium__namespace.HeadingPitchRoll;const o=Cesium__namespace.Matrix4.fromRotationTranslation(Cesium__namespace.Matrix3[r(s._0x138642)](e,new Cesium__namespace.Matrix3),n,new Cesium__namespace.Matrix4);return getHeadingPitchRollByMatrix(o,t,i)}function getHeadingPitchRollByMatrix(n,e,t,i){const s={_0x1953c7:2576},r=_0x3a2b68;return Cesium__namespace.Transforms[r(s._0x1953c7)](n,e,t,i)}function getHeadingPitchRollForLine(n,e,t,i){const s={_0x3317f7:1378,_0x41c91a:1085,_0x31ce23:2978,_0x5cbdc7:2478},r=_0x3a2b68;n=LngLatPoint.toCartesian(n),e=LngLatPoint[r(s._0x3317f7)](e),t=t||Cesium__namespace.Ellipsoid.WGS84;const o=new Cesium__namespace.Cartesian3,c=new Cesium__namespace.Matrix4,_=new Cesium__namespace.Matrix3,l=Cesium__namespace.Cartesian3[r(s._0x41c91a)](Cesium__namespace[r(s._0x31ce23)].subtract(e,n,o),o);Cesium__namespace.Transforms.rotationMatrixFromPositionVelocity(n,l,t,_);const d=Cesium__namespace[r(s._0x5cbdc7)].fromRotationTranslation(_,n,c);return Cesium__namespace.Matrix4[r(3512)](d,Cesium__namespace.Axis.Z_UP_TO_X_UP,d),getHeadingPitchRollByMatrix(d,t,i)}function getReflectVector(n,e){const t={_0x5c126e:2957,_0x372769:2978,_0x31d753:2080},i=_0x3a2b68,s=e.clone(),r=n[i(t._0x5c126e)](),o=2*Cesium__namespace[i(t._0x372769)].dot(n,e);return Cesium__namespace.Cartesian3[i(t._0x31d753)](e,o,s),Cesium__namespace.Cartesian3.subtract(n,s,r)}var PointUtil={__proto__:null,getTransFun,getPositionValue,getMaxHeight,getMinHeight,addPositionsHeight,setPositionsHeight,getHeight,getSurfaceHeight,getSurfaceTerrainHeight,getSurfacePosition,getCurrentMousePosition,getCurrentMouseTerrainPosition,getMidpoint,isRepeatPoint,getRotateCenterPoint,getOnLinePointByLen,getPositionByHprAndOffset,getPositionByDirectionAndLen,getPositionByHprAndLen,getRayEarthPosition,getRayEarthPositionByMatrix,extend2Earth,getHeadingPitchRollByOrientation,getHeadingPitchRollByMatrix,getHeadingPitchRollForLine,getReflectVector};class SurfacePoints{constructor(e){const t=_0x3a2b68;this[t(1941)]=e,this.scene=e.map?e.map[t(744)]:e.scene,!this.scene&&logError$1("SurfacePoints: 请传入scene参数",this[t(1941)]),this.positions=LngLatArray[t(2249)](this.options.positions)}async start(){const e={_0x3810c2:4193},t=_0x3a2b68;if(this.positions==null||this.positions.length===0){this.getResult();return}this.scene[t(e._0x3810c2)]&&await this[t(744)]._terrainProviderPromise;const i=this.options.has3dtiles??Cesium__namespace[t(407)](pick3DTileset(this.scene,this[t(2694)])),s=!(this.scene[t(2531)]instanceof Cesium__namespace.EllipsoidTerrainProvider);return this._has3dtiles=i,this._hasTerrain=s,!s&&!i?this.getResult():this.options.exact?this._startForExact():this._startForSketchy()}async[_0x3a2b68(2718)](){const e={_0x2f92af:1941,_0x2a3d72:1503,_0x1a69c6:3404,_0x175971:400,_0x2a45a2:4241},t=_0x3a2b68,i=this.positions;if(this._has3dtiles){const s=[];for(let o=0,c=i.length;o<c;++o)s[t(1754)](i[o].clone());let r=await this[t(744)].clampToHeightMostDetailed(s,this[t(e._0x2f92af)][t(3361)]);if(r=removeNullData(r),r.length>0)return this.options.offset&&(r=addPositionsHeight(r,this[t(e._0x2f92af)].offset)),this[t(e._0x2a3d72)](r)}if(this._hasTerrain){const s=this.scene.globe[t(e._0x1a69c6)],r=s.cartesianArrayToCartographicArray(i),o=Cesium__namespace[t(2228)][t(2101)](i[0]).height,c=this.options[t(3021)]??0;let _=![],l=await Cesium__namespace.sampleTerrainMostDetailed(this[t(744)][t(2531)],r);l=removeNullData(l);for(let f=0;f<l[t(e._0x175971)];++f)l[f].height==null?(_=!![],l[f].height=c+o):l[f][t(e._0x2a45a2)]=c+l[f].height;const d=s.cartographicArrayToCartesianArray(l);return this.getResult(d,_)}return this.getResult()}_startForSketchy(){const e={_0x1d16a9:888,_0x27034d:744,_0x48572d:1339},t=_0x3a2b68,i=[];for(let s=0,r=this.positions.length;s<r;++s){const o=Cesium__namespace.Cartographic.fromCartesian(this.positions[s]);let c;if(this[t(e._0x1d16a9)]){const _=this.scene.sampleHeight(o,this.options.objectsToExclude,this.options.width);Cesium__namespace.defined(_)&&_>-1e3&&(c=_)}if(!Cesium__namespace.defined(c)){const _=this[t(e._0x27034d)].globe.getHeight(o);Cesium__namespace.defined(_)&&_>-1e3&&(c=_)}i.push(Cesium__namespace.Cartesian3[t(e._0x48572d)](o.longitude,o.latitude,c??o.height))}return this.getResult(i)}[_0x3a2b68(1503)](e,t){return this.options.callback&&this.options.callback(e,t,this.positions),{positions:e||this.positions,positions_original:this.positions,noHeight:t,has3dtiles:this._has3dtiles,hasTerrain:this._hasTerrain}}}function removeNullData(n){const e={_0x51ced7:1754},t=_0x3a2b68,i=[];for(let s=0;s<n.length;++s)n[s]!=null&&i[t(e._0x51ced7)](n[s]);return i}function logError(n,e){console[_0x3a2b68(4094)]("turf."+n+" 不存在,该方法需引入 turf.js 库生效。",e)}function area(n){try{return turf.area(n)}catch(e){logError("area",e)}return 0}function bbox(n){const e=_0x3a2b68;try{return turf[e(3474)](n)}catch(t){logError("bbox",t)}return null}function bezierSpline(n,e){const t={_0x11915c:3246},i=_0x3a2b68;try{return turf[i(t._0x11915c)](n,e)}catch(s){logError(i(t._0x11915c),s)}return n}function booleanPointInPolygon(n,e,t){const i={_0x3b133a:3740},s=_0x3a2b68;try{return turf[s(i._0x3b133a)](n,e,t)}catch(r){logError(s(3740),r)}return![]}function buffer$1(n,e,t){try{return turf.buffer(n,e,t)}catch(i){logError("buffer",i)}return n}function convex$1(n,e){const t={_0x1757c1:1035},i=_0x3a2b68;try{return turf.convex(n,e)}catch(s){logError(i(t._0x1757c1),s)}return n}function pointGrid(n,e,t){const i={_0x5d0745:1740},s=_0x3a2b68;try{return turf[s(i._0x5d0745)](n,e,t)}catch(r){logError("pointGrid",r)}return{features:[]}}function simplify(n,e){const t={_0x335fec:3212},i=_0x3a2b68;try{return turf.simplify({type:"Polygon",coordinates:[n]},{tolerance:1e-4,highQuality:!![],mutate:!![],...e})[i(918)][0]}catch(s){logError(i(t._0x335fec),s)}return n}const pickTilesetPassState=new Cesium__namespace.Cesium3DTilePassState({pass:Cesium__namespace[_0x3a2b68(3852)][_0x3a2b68(983)]}),packedDepthScale=new Cesium__namespace.Cartesian4(1,1/255,1/65025,1/16581375),scratchRectangle=new Cesium__namespace.BoundingRectangle(0,0,3,3),scratchColorZero=new Cesium__namespace[_0x3a2b68(2092)](0,0,0,0),scratchRight=new Cesium__namespace.Cartesian3,scratchUp=new Cesium__namespace.Cartesian3,scratchPackedDepthArray=[];function interPolygonByDepth$1(n){const e={_0xe5f657:2062,_0x4e400d:3647,_0x27c72b:3041,_0x3f73a7:1769,_0x76d9dc:3674,_0x42bd86:4233,_0x452b29:2957,_0x4b8137:1544,_0x40a5cd:2677},t=_0x3a2b68,i=n.scene,s=LngLatArray[t(2249)](n[t(2694)]),r=i.globe[t(2677)];i[t(1462)].depthTestAgainstTerrain=!![];const o=n.cameraHeight??i[t(4233)].positionCartographic.height,{ray:c,frustumWidth:_,frustumHeight:l,cameraUp:d}=getCameraInforForPoints(s,o),f=Number(n.splitNum??512),g=_/f,b=l/f,C=new Cesium__namespace[t(1094)](i),P=C._pickOffscreenView,S=new Cesium__namespace.BoundingRectangle(0,0,f,f);P.viewport=S,P.passState[t(e._0xe5f657)]=S,i.view=P,updateOffscreenCamera(c.origin,c.direction,d,_,l,P.camera),Cesium__namespace.BoundingRectangle.clone(P.viewport,scratchRectangle);const L=P.pickFramebuffer.begin(scratchRectangle,P.viewport);i.jobScheduler.disableThisFrame(),i.updateFrameState(),i.frameState.invertClassification=![],i.frameState.passes.pick=!![],i.frameState.passes.offscreen=!![],i.frameState.tilesetPassState=pickTilesetPassState,i.context[t(2899)].update(i[t(2809)]),i[t(e._0x4e400d)](),i.updateAndExecuteCommands(L,scratchColorZero),i.resolveFramebuffers(L);const E=[];if(i.context.depthTexture){const $=P.frustumCommandsList.length,B=new Cesium__namespace.Cartesian3;for(let F=0;F<$;++F){const z=C[t(3957)](i,F),Y=getDepth(i[t(e._0x27c72b)],0,0,f,f,z);for(let J=0;J<Y.length;J++){const q=Y[J];if(q>0&&q<1){const le=P[t(e._0x3f73a7)][F],j=le.near*(J!==0?i.opaqueFrustumNearOffset:1),{far:ie}=le,te=j+q*(ie-j),ce=Math.floor(J/f),xe=J%f,he=(ce-f/2)*l/f,Q=(xe-f/2)*_/f,fe=new Cesium__namespace.Cartesian3;Cesium__namespace.Cartesian3.multiplyByScalar(d,he,B),Cesium__namespace.Cartesian3[t(e._0x76d9dc)](B,P[t(e._0x42bd86)].position,fe),Cesium__namespace.Cartesian3.multiplyByScalar(P[t(4233)].right,Q,B),Cesium__namespace.Cartesian3.add(B,fe,fe);const Ae=Cesium__namespace[t(3458)][t(e._0x452b29)](c);Ae.origin=fe;const me=Cesium__namespace.Ray[t(e._0x4b8137)](Ae,te);!E[J]&&(E[J]=me)}}}}const M=[];let D=Number.MAX_VALUE,R=-Number.MAX_VALUE;const k=s.map($=>{const B=Cesium__namespace.Cartographic.fromCartesian($);return[B.longitude,B.latitude]});E.forEach($=>{const B=t,F=Cesium__namespace.Cartographic.fromCartesian($);if(F&&pointInPolygonNested([F[B(768)],F.latitude],k)){const z=F.height;R<z&&(R=z),D>z&&(D=z),$.height=z,$.getOutline=function(){return getBoxOutLine(this,g,b,d)},M.push($)}}),i.globe[t(e._0x40a5cd)]=r,i[t(2722)]=i.defaultView,i.context.endFrame(),C[t(2619)]();const N=g*b;return{positions:M,count:M.length,minHeight:D,maxHeight:R,box:{width:g,height:b,area:N},totalArea:N*M.length}}function interPolylineByDepth$1(n){const e={_0x2c1b66:744,_0x51e1de:2249,_0x456ed2:3404,_0x5dc9a7:400,_0x48023d:2978,_0x5b4f7a:2978,_0x33026f:2101,_0x165f79:655,_0xa9359e:3202,_0x583a3f:1769},t=_0x3a2b68,i=n[t(e._0x2c1b66)],s=LngLatArray[t(e._0x51e1de)](n[t(2694)]),r=i.globe.depthTestAgainstTerrain;i.globe[t(2677)]=!![];const o=Cesium__namespace[t(407)](i.globe)?i.globe[t(e._0x456ed2)]:i.mapProjection[t(e._0x456ed2)],c=i.context,_=c.uniformState,l=i.frameState,d=n.cameraHeight??i.camera[t(2863)].height,f=new Cesium__namespace.Picking(i),g=f[t(1146)],b=.1;let C=[];const P=[];for(let S=0,L=s[t(e._0x5dc9a7)]-1;S<L;S++){const E=s[S],M=s[S+1],D=Cesium__namespace.Cartographic.fromCartesian(E),R=Cesium__namespace.Cartographic.fromCartesian(M),k=Cesium__namespace.Cartesian3.fromRadians(D.longitude,D.latitude),N=Cesium__namespace.Cartesian3.fromRadians(R[t(768)],R.latitude),$=Cesium__namespace.Cartesian3.distance(k,N);let B=100;Cesium__namespace.defined(n[t(3384)])&&(B=Number(n.splitNum)),Cesium__namespace.defined(n.minDistance)&&(B=Math.floor($/n.minDistance)),B>Cesium__namespace.ContextLimits.maximumTextureSize&&(B=Cesium__namespace.ContextLimits.maximumTextureSize);const F=new Cesium__namespace.Ray,z=Cesium__namespace[t(e._0x48023d)].lerp(k,N,.5,new Cesium__namespace[t(e._0x5b4f7a)]),Y=Cesium__namespace[t(2228)][t(e._0x33026f)](z),J=o.geodeticSurfaceNormalCartographic(Y,new Cesium__namespace.Cartesian3);Cesium__namespace.Cartesian3.negate(J,F.direction),F.origin=Cesium__namespace.Cartesian3.fromRadians(Y.longitude,Y.latitude,d);const q=Cesium__namespace.Cartesian3.subtract(N,k,scratchUp);Cesium__namespace.Cartesian3.normalize(q,q);const le=$,j=new Cesium__namespace[t(e._0x165f79)](0,0,1,B);g[t(2062)]=j,g.passState.viewport=j,i[t(2722)]=g,updateOffscreenCamera(F[t(1787)],F.direction,q,b,le,g.camera),Cesium__namespace[t(655)][t(2957)](g.viewport,scratchRectangle);const ie=g.pickFramebuffer.begin(scratchRectangle,g[t(2062)]);i[t(e._0xa9359e)].disableThisFrame(),i.updateFrameState(),l[t(1569)]=![],l.passes.pick=!![],l.passes.offscreen=!![],l.tilesetPassState=pickTilesetPassState,_.update(l),i.updateEnvironment(),i.updateAndExecuteCommands(ie,scratchColorZero),i.resolveFramebuffers(ie);const te=[];if(i.context.depthTexture){const xe=g.frustumCommandsList.length,he=new Cesium__namespace.Cartesian3;for(let Q=0;Q<xe;++Q){const fe=f[t(3957)](i,Q),Ae=getDepth(c,0,0,1,B,fe);for(let me=0,Se=Ae.length;me<Se;me++){const Ie=Ae[me];if(Ie>0&&Ie<1){const pe=g[t(e._0x583a3f)][Q],Te=pe[t(2657)]*(me!==0?i.opaqueFrustumNearOffset:1),ye=pe.far,ge=Te+Ie*(ye-Te);if(Se>1){const ke=(me/(Ae.length-1)-.5)*le;Cesium__namespace.Cartesian3[t(2080)](q,ke,he)}const ae=Cesium__namespace.Ray[t(2957)](F);Cesium__namespace.Cartesian3.add(ae.origin,he,ae.origin);const we=Cesium__namespace.Ray.getPoint(ae,ge);!te[me]&&(te[me]=we)}}}}i.view=i.defaultView,c.endFrame();const ce=[];for(let xe=0,he=te.length;xe<he;xe++){const Q=te[xe];Cesium__namespace.defined(Q)&&ce.push(Q)}C=C.concat(ce),P.push({distance:$,positions:ce})}return i[t(1462)].depthTestAgainstTerrain=r,f.destroy(),{positions:C,list:P}}function getDepth(n,e,t,i,s,r){const o={_0x4cd9ec:2546},c=_0x3a2b68,_=n.readPixels({x:e,y:t,width:i,height:s,framebuffer:r.framebuffer}),l=Cesium__namespace.Cartesian4[c(541)](_,scratchPackedDepthArray),d=[];for(let f=0;f<l.length;++f){const g=l[f];Cesium__namespace.Cartesian4.divideByScalar(g,255,g);const b=Cesium__namespace.Cartesian4[c(o._0x4cd9ec)](g,packedDepthScale);d[c(1754)](b)}return d}function updateOffscreenCamera(n,e,t,i,s,r){const o={_0x1a27d5:4076,_0x3d0d47:517,_0x4cb674:3569},c=_0x3a2b68,_=Cesium__namespace.Cartesian3.cross(e,t,scratchRight);return r[c(o._0x1a27d5)]=n,r.direction=e,r.up=t,r.right=_,r.frustum[c(o._0x3d0d47)]=i,r.frustum.aspectRatio=i/s,r[c(o._0x4cb674)].computeCullingVolume(r.positionWC,r.directionWC,r.upWC)}function getCameraInforForPoints(n,e){const t={_0x539d74:768},i=_0x3a2b68,s=Cesium__namespace.Rectangle.fromCartesianArray(n),r=Cesium__namespace[i(1983)].center(s),o=Cesium__namespace.Cartesian3.fromRadians(r.longitude,r.latitude,e),c=Cesium__namespace.Ellipsoid.WGS84.geodeticSurfaceNormal(o);Cesium__namespace.Cartesian3.multiplyByScalar(c,-1,c);const _=Cesium__namespace.Cartesian3[i(1339)](r[i(t._0x539d74)],r[i(3664)]+s.height/2,e),l=Cesium__namespace.Cartesian3.subtract(_,o,new Cesium__namespace.Cartesian3),d=new Cesium__namespace.Ray(o,c),f=Cesium__namespace.Rectangle.southwest(s),g=Cesium__namespace[i(1983)].southeast(s),b=Cesium__namespace[i(1983)].northwest(s),C=Cesium__namespace.Cartographic.toCartesian(f),P=Cesium__namespace.Cartographic.toCartesian(g),S=Cesium__namespace.Cartographic[i(1378)](b),L=Cesium__namespace[i(2978)].distance(C,P),E=Cesium__namespace.Cartesian3.distance(C,S);return{ray:d,frustumWidth:L,frustumHeight:E,cameraUp:l}}function pointInPolygonNested(n,e){const t=n[0],i=n[1];let s=![];const r=e.length;for(let o=0,c=r-1;o<r;c=o++){const _=e[o][0],l=e[o][1],d=e[c][0],f=e[c][1];l>i!=f>i&&t<(d-_)*(i-l)/(f-l)+_&&(s=!s)}return s}function getBoxOutLine(n,e,t,i){const s={_0x13f52e:2978,_0x281ef4:3674,_0x23b0f1:2978,_0x2803a4:3420},r=_0x3a2b68,o=Cesium__namespace.Cartesian3[r(1085)](n,new Cesium__namespace.Cartesian3),c=Cesium__namespace.Cartesian3.cross(i,o,o);Cesium__namespace.Cartesian3.multiplyByScalar(c,e/2,c);const _=Cesium__namespace[r(s._0x13f52e)].multiplyByScalar(i,t/2,new Cesium__namespace.Cartesian3),l=Cesium__namespace.Cartesian3[r(s._0x281ef4)](n,_,new Cesium__namespace[r(s._0x13f52e)]);Cesium__namespace.Cartesian3[r(3674)](l,c,l);const d=Cesium__namespace.Cartesian3.add(n,_,new Cesium__namespace[r(2978)]);Cesium__namespace.Cartesian3.subtract(d,c,d);const f=Cesium__namespace.Cartesian3.subtract(n,_,new Cesium__namespace[r(2978)]);Cesium__namespace.Cartesian3.add(f,c,f);const g=Cesium__namespace[r(s._0x23b0f1)].subtract(n,_,new Cesium__namespace[r(2978)]);return Cesium__namespace.Cartesian3[r(s._0x2803a4)](g,c,g),[l,f,g,d]}const scratchPerspectiveFrustum$1=new Cesium__namespace[_0x3a2b68(2610)],scratchPerspectiveOffCenterFrustum$1=new Cesium__namespace[_0x3a2b68(2989)],scratchOrthographicFrustum$1=new Cesium__namespace.OrthographicFrustum,scratchOrthographicOffCenterFrustum$1=new Cesium__namespace.OrthographicOffCenterFrustum;function getRayIntersectingPositions$1(n){const e={_0x3a1ba1:2062,_0x383216:3202,_0x5d4ee8:2651,_0x55ffcb:3569,_0x294a1f:407,_0x58eaa2:3569,_0x2bea28:2899,_0x56b816:2722},t=_0x3a2b68,i=n.scene,s=n.camera??i.camera,r=Number(n.splitNum??512),o=new Cesium__namespace.Picking(i),c=o._pickOffscreenView,_=new Cesium__namespace.BoundingRectangle(0,0,r,r);c.viewport=_,c.passState[t(2062)]=_,i.view=c,c.camera=s,Cesium__namespace[t(655)].clone(c[t(e._0x3a1ba1)],scratchRectangle);const l=c.pickFramebuffer.begin(scratchRectangle,c[t(2062)]);i[t(e._0x383216)][t(1516)](),i.updateFrameState(),i.frameState[t(1569)]=![],i.frameState.passes.pick=!![],i.frameState[t(e._0x5d4ee8)].offscreen=!![],i.frameState[t(647)]=pickTilesetPassState,i.context.uniformState.update(i.frameState),i.updateEnvironment(),i[t(644)](l,scratchColorZero),i.resolveFramebuffers(l);let d;Cesium__namespace.defined(s.frustum.fov)?d=s[t(e._0x55ffcb)][t(2957)](scratchPerspectiveFrustum$1):Cesium__namespace[t(e._0x294a1f)](s.frustum[t(1673)])?d=c.camera.frustum.clone(scratchPerspectiveOffCenterFrustum$1):Cesium__namespace.defined(s.frustum[t(517)])?d=s[t(e._0x58eaa2)][t(2957)](scratchOrthographicFrustum$1):d=s.frustum.clone(scratchOrthographicOffCenterFrustum$1);const f=new Array(r);for(let g=0;g<r;g++)f[g]=new Array(r);if(i.context.depthTexture){const g=o.getPickDepth(i,0),b=getDepth(i.context,0,0,r,r,g);for(let C=0;C<b.length;C++){const P=b[C];if(P>0&&P<1){const S=c.frustumCommandsList[0];if(!S)continue;const L=Math.floor(C/r),E=C%r;d.near=S.near*i.opaqueFrustumNearOffset,d.far=S.far,i.context[t(e._0x2bea28)].updateFrustum(d);const M=Cesium__namespace[t(1027)].drawingBufferToWgs84Coordinates(i,new Cesium__namespace.Cartesian2(E,L),P,new Cesium__namespace.Cartesian3);f[E][L]=M}}}return i[t(e._0x56b816)]=i.defaultView,i.context.endFrame(),o.destroy(),f}function centerOfMass(n,e){const t=_0x3a2b68;if(!n||n.length===0)return;const i=LngLatArray.toCartesians(n);try{if(i.length===1)return i[0];if(i.length===2)return getMidpoint(i[0],i[1]);e==null&&(e=getMaxHeight(i));const s=Cesium__namespace.Rectangle.fromCartesianArray(i),r=Cesium__namespace.Rectangle.center(s);return Cesium__namespace.Cartesian3.fromRadians(r.longitude,r.latitude,e)}catch{return i[Math.floor(i[t(400)]/2)]}}function buffer(n,e=1,t=8){const i={_0x3c407c:2909,_0x145650:400},s=_0x3a2b68;try{var r,o;if(((r=n)===null||r===void 0||(o=r.geometry)===null||o===void 0?void 0:o.type)===s(i._0x3c407c)){const c=n.geometry.coordinates[0],_=c[0],l=c[c[s(i._0x145650)]-1];(_[0]!==l[0]||_[1]!==l[1])&&c.push(_)}n=buffer$1(n,e,{units:"meters",steps:t})}catch(c){logError$1("PolyUtil turf.buffer:缓冲分析异常 ",c)}return n}function bufferPoints(n,e=1,t=8){const i={_0x35df79:1754,_0x3a405d:2909,_0x362f23:2152,_0x45f426:4129},s=_0x3a2b68;try{const r=LngLatArray.toArray(n),o=r[0],c=r[r.length-1];(o[0]!==c[0]||o[1]!==c[1])&&r[s(i._0x35df79)](r[0]);const _={type:s(370),geometry:{type:s(i._0x3a405d),coordinates:[r]}},l=buffer$1(_,e,{units:"meters",steps:t});return LngLatArray.toPoints(l[s(i._0x362f23)].coordinates[0])}catch(r){logError$1(s(i._0x45f426),r)}return n}function getGranularity(n,e=10){const t={_0x20e36d:3198},i=_0x3a2b68,s=Cesium__namespace.Rectangle.fromCartesianArray(LngLatArray[i(2249)](n));let r=Math[i(t._0x20e36d)](s.height,s.width);return r/=e,r}function interPolygon(n){const e={_0x2e7bb2:3384},t={_0xb56361:3618,_0x2c6670:2796,_0x2c1136:3826,_0x48d1d1:4076,_0x65f7d1:4076,_0x58931f:2978,_0xd8552b:3826,_0x4ff1ef:4389,_0xb98638:2213},i=_0x3a2b68,s=n.scene,r=LngLatArray.toCartesians(n[i(2694)],!![]),o=getGranularity(r,n[i(e._0x2e7bb2)]);return new Promise((c,_)=>{const l={_0x160ccb:2694,_0x14f7d8:2694,_0x19d50c:3932,_0x3ba117:2627,_0x1538d0:2767};setTimeout(()=>{const d={_0x3f9c67:768,_0x56f5e3:2978,_0x4c8f53:3664},f=_0x20dc,g=[],b=new Cesium__namespace.PolygonGeometry.fromPositions({positions:r,vertexFormat:Cesium__namespace[f(2146)].FLAT_VERTEX_FORMAT,granularity:o}),C=new Cesium__namespace[f(t._0xb56361)].createGeometry(b);let P,S,L,E,M,D;for(let F=0;F<C.indices[f(400)];F+=3)P=C.indices[F],S=C[f(t._0x2c6670)][F+1],L=C.indices[F+2],E=new Cesium__namespace.Cartesian3(C.attributes.position[f(t._0x2c1136)][P*3],C.attributes[f(t._0x48d1d1)].values[P*3+1],C.attributes[f(4076)][f(3826)][P*3+2]),g.push(E),M=new Cesium__namespace.Cartesian3(C[f(1571)].position.values[S*3],C.attributes[f(t._0x65f7d1)][f(t._0x2c1136)][S*3+1],C.attributes.position[f(3826)][S*3+2]),g.push(M),D=new Cesium__namespace[f(t._0x58931f)](C.attributes.position[f(t._0xd8552b)][L*3],C.attributes[f(4076)][f(3826)][L*3+1],C.attributes.position[f(3826)][L*3+2]),g.push(D);let R=0,k=9999;const N=n.onlyPoint??![];function $(F,z){const Y=f;let J,q,le,j;return z?(delete n[Y(2767)],J=getHeight(s,F,n),j=Cesium__namespace.Cartographic.fromCartesian(F),q=Cesium__namespace.Cartesian3.fromRadians(j[Y(d._0x3f9c67)],j.latitude,0),le=Cesium__namespace[Y(d._0x56f5e3)].fromRadians(j.longitude,j[Y(3664)],J)):(j=Cesium__namespace.Cartographic.fromCartesian(F),J=j.height,q=Cesium__namespace.Cartesian3.fromRadians(j.longitude,j[Y(d._0x4c8f53)],0),le=F),R<J&&(R=J),k>J&&(k=J),{height:J,point:q,pointDM:le}}function B(F){const z=f,Y=[];let J,q,le;for(let j=0;j<F.positions.length;j+=3)J=$(F[z(l._0x160ccb)][j],F.noHeight),q=$(F.positions[j+1],F.noHeight),le=$(F[z(l._0x14f7d8)][j+2],F.noHeight),N?(addPointFoyArrOnly(Y,J),addPointFoyArrOnly(Y,q),addPointFoyArrOnly(Y,le)):Y[z(1754)]({point1:J,point2:q,point3:le});Cesium__namespace[z(407)](n.minHeight)&&(k=Math.max(n.minHeight,k),R=Math[z(3198)](R,k)),F[z(l._0x19d50c)]=o,F[z(l._0x3ba117)]=R,F.minHeight=k,F.list=Y,n[z(l._0x1538d0)]&&n[z(2767)](F),c(F)}n.exact?computeSurfacePoints({scene:s,positions:g,has3dtiles:n[f(1319)],exact:n.exact})[f(t._0x4ff1ef)](B):B({positions:g,noHeight:!![],has3dtiles:n.has3dtiles,hasTerrain:n[f(t._0xb98638)]})},50)})}function addPointFoyArrOnly(n,e){const t={_0xd99f52:1754},i=_0x3a2b68;let s=![];const r=e.point;for(let o=0;o<n.length;o++){const c=n[o].point;if(r.x===c.x&&r.y===c.y&&r.z===c.z){s=!![];break}}!s&&n[i(t._0xd99f52)](e)}function getHeightRange(n,e,t){return interPolygon({positions:n,scene:e,...t})}function getTriangleArea$1(n,e,t){const i=_0x3a2b68,s=Cesium__namespace.Cartesian3.distance(n,e),r=Cesium__namespace.Cartesian3[i(3481)](e,t),o=Cesium__namespace.Cartesian3.distance(t,n),c=(s+r+o)/2;return Math.sqrt(c*(c-s)*(c-r)*(c-o))}function computeVolume(n){return interPolygon(n).then(e=>updateVolumeByMinHeight(e))}function updateVolumeByMinHeight(n){const e={_0x13cecb:1158,_0x1e43b7:2879,_0x237fd1:2879},t=_0x3a2b68,i=n[t(1890)];let s=0,r=0;for(let o=0,c=n[t(1069)].length;o<c;o++){const _=n.list[o],l=_.point1,d=_[t(e._0x13cecb)],f=_[t(3537)],g=getTriangleArea$1(l[t(e._0x1e43b7)],d.point,f[t(e._0x237fd1)]);_[t(3254)]=g,s+=g;let b=l[t(4241)],C=d.height,P=f.height;b<i&&(b=i),C<i&&(C=i),P<i&&(P=i);const S=g*(b-i+C-i+P-i)/3;_.cutVolume=S,r=r+S}return n.totalArea=s,n.totalVolume=r,n}function updateVolume(n,e){const t={_0x5c86ac:1069,_0x1f9c5c:4241,_0x2c5f1b:1871},i=_0x3a2b68;if(!n)return;const s=n.minHeight,r=n.totalVolume;if(e<=s)return n.fillVolume=0,n.digVolume=r,n;let o=0,c=0;for(let _=0,l=n.list.length;_<l;_++){const d=n[i(t._0x5c86ac)][_];o+=d.area*(e-s);const f=d.point1,g=d[i(1158)],b=d.point3;let C=f[i(t._0x1f9c5c)],P=g[i(t._0x1f9c5c)],S=b.height;C<e&&(C=e),P<e&&(P=e),S<e&&(S=e),c+=d.area*(C-e+P-e+S-e)/3}return n[i(t._0x2c5f1b)]=c,n.fillVolume=o-(r-c),n}function getEllipseOuterPositions(n){const e={_0x1eadf2:4076,_0x521ba2:3878,_0x23a075:661,_0x3bc738:2978},t=_0x3a2b68;let i=n[t(e._0x1eadf2)];if(!i)return null;i=LngLatPoint.toCartesian(i);const s=n.semiMajorAxis??n[t(e._0x521ba2)],r=n[t(894)]??n.radius;if(!s||!r)return[i,i,i];const o=n.rotation??0;let c=n.granularity||Cesium__namespace[t(2806)].RADIANS_PER_DEGREE;n.count&&(c=Math.PI/(16*n.count));const _=Cesium__namespace[t(e._0x23a075)].computeEllipsePositions({center:i,semiMajorAxis:s,semiMinorAxis:r,rotation:o,granularity:c},!![],!![]),l=_[t(1979)],d=[];for(let f=0,g=l[t(400)];f<g;f+=3){const b=new Cesium__namespace[t(e._0x3bc738)](l[f],l[f+1],l[f+2]);d.push(b)}return d}function formatRectangle(n,e=LngLatPoint.FormatLength){const t={_0x50b55f:2806,_0x2efbc5:1878,_0x1578ab:3501},i=_0x3a2b68;let s=formatNum$1(Cesium__namespace[i(t._0x50b55f)].toDegrees(n[i(t._0x2efbc5)]),e),r=formatNum$1(Cesium__namespace.Math.toDegrees(n.east),e),o=formatNum$1(Cesium__namespace.Math[i(t._0x1578ab)](n.north),e),c=formatNum$1(Cesium__namespace.Math.toDegrees(n.south),e);if(s>r){const _=s;s=r,r=_}if(c>o){const _=c;c=o,o=_}return{xmin:s,xmax:r,ymin:c,ymax:o}}function getExtentByGeoJSON(n){const e={_0xdf89b6:400},t=_0x3a2b68,i=bbox(n);return i&&i[t(e._0xdf89b6)]===4?{xmin:i[0],ymin:i[1],xmax:i[2],ymax:i[3]}:null}function getRectangle(n,e){const t={_0x25ccf8:407,_0x2133df:1983},i=_0x3a2b68;if(!n)return null;for(let r=n.length-1;r>=0;r--)!Cesium__namespace[i(t._0x25ccf8)](n[r])&&n.splice(r,1);n=LngLatArray.toCartesians(n);const s=Cesium__namespace[i(t._0x2133df)].fromCartesianArray(n);return e?formatRectangle(s):s}function getPositionsRectVertex(n,e=0){n=LngLatArray[_0x3a2b68(2249)](n);const i=Cesium__namespace.Rectangle.fromCartesianArray(n),s=getMaxHeight(n);return getRectangleOuterPositions({rectangle:i,rotation:e,height:s})}function getRectangleOuterPositions(n){const e={_0x546133:831,_0x5098a4:1245,_0x19ee8d:869},t=_0x3a2b68,i=n[t(1531)],s=n.rotation??0,r=n.height??0;if(s===0)return[Cesium__namespace.Cartesian3.fromRadians(i.west,i.south,r),Cesium__namespace.Cartesian3.fromRadians(i.east,i.south,r),Cesium__namespace.Cartesian3[t(1339)](i.east,i.north,r),Cesium__namespace.Cartesian3.fromRadians(i.west,i.north,r)];const o=n.granularity??Cesium__namespace[t(2806)][t(e._0x546133)],c=new Cesium__namespace.Rectangle,_=new Cesium__namespace.Cartographic,l=Cesium__namespace.RectangleGeometryLibrary.computeOptions(i,o,s,0,c,_),d=l.height,f=l.width,g=n.ellipsoid??Cesium__namespace[t(e._0x5098a4)].WGS84;let b=[new Cesium__namespace.Cartesian3,new Cesium__namespace.Cartesian3,new Cesium__namespace.Cartesian3,new Cesium__namespace.Cartesian3];return Cesium__namespace.RectangleGeometryLibrary.computePosition(l,g,![],0,0,b[0]),Cesium__namespace[t(e._0x19ee8d)].computePosition(l,g,![],0,f-1,b[1]),Cesium__namespace.RectangleGeometryLibrary.computePosition(l,g,![],d-1,f-1,b[2]),Cesium__namespace[t(e._0x19ee8d)].computePosition(l,g,![],d-1,0,b[3]),r!==0&&(b=setPositionsHeight(b,r)),b}function getRectPositionsByCenter(n){const e={_0x3641d0:2978,_0x4473e2:1604},t=_0x3a2b68,i=LngLatPoint.toCartesian(n[t(3747)]),s=n.width,r=n.height,o=n.rotation??0,c=n.originX??.5,_=n[t(1390)]??.5,l=new Cesium__namespace.Matrix4,d=new Cesium__namespace.Quaternion,f=new Cesium__namespace.Matrix4,g=[Cesium__namespace[t(e._0x3641d0)][t(3958)](-c,-_,0),Cesium__namespace.Cartesian3.fromElements(1-c,-_,0),Cesium__namespace.Cartesian3.fromElements(1-c,1-_,0),Cesium__namespace.Cartesian3.fromElements(-c,1-_,0)],b=Cesium__namespace[t(3737)].eastNorthUpToFixedFrame(i,Cesium__namespace[t(1245)].WGS84,l),C=Cesium__namespace[t(931)].fromAxisAngle(Cesium__namespace.Cartesian3[t(e._0x4473e2)],o,d),P=Cesium__namespace[t(2478)].fromTranslationQuaternionRotationScale,S=P(Cesium__namespace.Cartesian3.ZERO,C,Cesium__namespace.Cartesian3.fromElements(s,r),f),L=Cesium__namespace.Matrix4[t(1144)](b,S,S),E=[];return g.forEach(function(M,D){typeof E[D]>"u"&&(E[D]=new Cesium__namespace.Cartesian3),Cesium__namespace.Matrix4.multiplyByPoint(L,M,E[D])}),E}function isInPoly(n,e){const t={_0x28ae44:4205},i=_0x3a2b68,s={type:"Feature",geometry:{type:"Point",coordinates:LngLatPoint.parse(n).toArray()}},r={type:"Polygon",coordinates:[LngLatArray[i(t._0x28ae44)](e)]};return booleanPointInPolygon(s,r)}function getBezierCurve(n,e){const t=_0x3a2b68;if(!n||n[t(400)]<3)return n;const i=LngLatArray[t(4205)](n);e!=null&&e.closure&&i.push(i[0]);const s=i[i.length-1][2],r=bezierSpline({type:t(370),geometry:{type:"LineString",coordinates:i}},{resolution:(e==null?void 0:e.resolution)??1e4,sharpness:(e==null?void 0:e.sharpness)??.85}),o=lonlats2cartesians(r[t(2152)].coordinates,s);return e!=null&&e.closure&&o[t(1754)](o[0]),o}function simplifyPositions(n,e){const t=_0x3a2b68;if(!n||n.length<3)return n;const i=LngLatArray[t(4205)](n);return e!=null&&e.closure&&i.push(i[0]),simplify(i,e)}function interPolyline(n){const e={_0xbe80e7:2249,_0x53ca84:744,_0x4ab929:1989,_0x45e518:2767},t=_0x3a2b68,i=LngLatArray[t(e._0xbe80e7)](n.positions),s=n[t(e._0x53ca84)];let r=getGranularity(i,n.splitNum||(n[t(1319)]?10:100));r<=0&&(r=null);const o=Cesium__namespace.PolylinePipeline.generateArc({positions:i,height:n.height,minDistance:n[t(e._0x4ab929)],granularity:r}),c=[];for(let _=0;_<o.length;_+=3){let l=Cesium__namespace.Cartesian3.unpack(o,_);if(s&&(n[t(3959)]??!![])){delete n[t(e._0x45e518)];const d=getHeight(s,l,n),f=Cesium__namespace.Cartographic[t(2101)](l);l=Cesium__namespace[t(2978)].fromRadians(f.longitude,f.latitude,d)}c.push(l)}return c}function interLine(n,e={}){const t={_0x1195b0:2228,_0x7f9f0c:3664},i=_0x3a2b68;if(!n||n.length<2)return n;n=LngLatArray.toCartesians(n);let s;if(e.splitNum&&!Cesium__namespace[i(407)](e.minDistance)&&(s=getGranularity(n,e[i(3384)]),s<=0&&(s=null)),e[i(1989)]==="auto"){let o=Number.MAX_VALUE;for(let c=1,_=n[i(400)];c<_;c++)o=Math.min(o,Cesium__namespace.Cartesian3.distance(n[c-1],n[c]));e.minDistance=o}const r=[n[0]];for(let o=1,c=n[i(400)];o<c;o++){const _=n[o-1],l=n[o],d=Cesium__namespace[i(1897)].generateArc({positions:[_,l],minDistance:e.minDistance,granularity:s}),f=Cesium__namespace[i(t._0x1195b0)][i(2101)](_).height,g=Cesium__namespace[i(t._0x1195b0)][i(2101)](l).height,b=(g-f)/d.length;for(let C=3,P=d[i(400)];C<P;C+=3){let S=Cesium__namespace.Cartesian3.unpack(d,C);const L=Cesium__namespace[i(2228)].fromCartesian(S),E=Number((f+b*C).toFixed(1));S=Cesium__namespace.Cartesian3.fromRadians(L[i(768)],L[i(t._0x7f9f0c)],E),r.push(S)}}return r}function computeSurfaceLine(n){const e=interPolyline({...n,surfaceHeight:![]}),t=[];for(let i=0,s=e.length;i<s;++i)t.push(e[i].clone());return n.positions=t,new SurfacePoints(n).start()}function computeSurfacePoints(n){return new SurfacePoints(n).start()}function computeStepSurfaceLine(n){const e=n.positions,t=[],i={};for(const s in n)s==="positions"||s==="callback"||s==="end"||s==="endItem"||(i[s]=n[s]);return new Promise((s,r)=>{const o={_0x1db46b:400};setTimeout(()=>{const c=_0x20dc;let _=0;const l=e[c(o._0x1db46b)]-1;function d(){const f={_0x14b4b2:2694};if(_>=l){n.callback&&n.callback(t),n.end&&n.end(t),s(t);return}i.positions=interPolyline({...n,positions:[e[_],e[_+1]],surfaceHeight:![]}),new SurfacePoints(i).start().then(g=>{const b=_0x20dc;n[b(782)]&&n.endItem(g.positions,g[b(543)],_),t.push(g[b(f._0x14b4b2)]),_++,d()})}d()},50)})}function getLinkedPointList(n,e,t,i){const s={_0x54e9cb:2228,_0x31202b:2957,_0x1af547:2978,_0x1776af:4210,_0x5784f9:1085,_0x459977:3492,_0x2dabed:2978,_0x40fe31:2080,_0x2daec7:1754},r=_0x3a2b68,o=[];n=LngLatPoint.toCartesian(n),e=LngLatPoint.toCartesian(e);const c=Cesium__namespace[r(s._0x54e9cb)].fromCartesian(n),_=Cesium__namespace.Cartographic.fromCartesian(e),l=c.longitude*180/Math.PI,d=c.latitude*180/Math.PI,f=_.longitude*180/Math.PI,g=_.latitude*180/Math.PI,b=Math[r(2789)]((l-f)*(l-f)+(d-g)*(d-g)),C=b*t,P=Cesium__namespace.Cartesian3.clone(n),S=Cesium__namespace[r(2978)][r(s._0x31202b)](e),L=Cesium__namespace[r(2978)].distance(P,Cesium__namespace[r(s._0x1af547)].ZERO),E=Cesium__namespace[r(2978)].distance(S,Cesium__namespace.Cartesian3[r(s._0x1776af)]);if(Cesium__namespace[r(2978)].normalize(P,P),Cesium__namespace.Cartesian3[r(s._0x5784f9)](S,S),Cesium__namespace[r(s._0x1af547)].distance(P,S)===0)return o;const M=Cesium__namespace[r(2978)].angleBetween(P,S);o.push(n);for(let D=1;D<i-1;D++){const R=D*1/(i-1),k=1-R,N=Math[r(s._0x459977)](k*M)/Math.sin(M),$=Math[r(3492)](R*M)/Math.sin(M),B=Cesium__namespace.Cartesian3[r(2080)](P,N,new Cesium__namespace.Cartesian3),F=Cesium__namespace.Cartesian3.multiplyByScalar(S,$,new Cesium__namespace[r(2978)]);let z=Cesium__namespace[r(2978)].add(B,F,new Cesium__namespace[r(s._0x2dabed)]);const Y=R*Math.PI,J=L*k+E*R+Math.sin(Y)*C;z=Cesium__namespace.Cartesian3[r(s._0x40fe31)](z,J,z),o[r(s._0x2daec7)](z)}return o.push(e),o}function getOffsetLine(n,e){const t={_0x4da37b:2249,_0x35b993:2978,_0xabca2c:2978,_0x1e6345:1754},i=_0x3a2b68;n=LngLatArray[i(t._0x4da37b)](n);const s=[];for(let r=1;r<n.length;r++){const o=n[r-1],c=n[r],_=Cesium__namespace[i(t._0x35b993)].subtract(o,c,new Cesium__namespace[i(t._0xabca2c)]),l=Cesium__namespace.Cartesian3.cross(o,_,new Cesium__namespace[i(2978)]),d=computedOffsetData(o,l,e*1e3),f=computedOffsetData(c,l,e*1e3);r===1&&s.push(d),s[i(t._0x1e6345)](f)}return s}function computedOffsetData(n,e,t){const i={_0x49b83a:3458},s=_0x3a2b68,r=new Cesium__namespace.Ray(n,e);return Cesium__namespace[s(i._0x49b83a)].getPoint(r,t,new Cesium__namespace.Cartesian3)}function sliceByMaxDistance(n,e,t={}){const i=_0x3a2b68;if(!n||n.length<2)return t.point?n.length===1?n[0]:void 0:n;n=LngLatArray.toCartesians(n);for(let s=n.length-1;s>=1;s--){const r=n[s],o=n[s-1],c=Cesium__namespace.Cartesian3.distance(r,o);if(e-=c,e===0)return t.point?r:n.slice(s);if(e<0){e+=c;const _=getOnLinePointByLen(r,o,e);return t.point?_:[_].concat(n.slice(s))}}return t[i(2879)]?n[n.length-1]:n}function convex(n){const e={_0x34fffe:400,_0x199dbf:2781},t=_0x3a2b68;if(n[t(e._0x34fffe)]>0){const s=[];for(let o=0;o<n.length;o++)s[t(1754)]({type:"Feature",geometry:{type:"Point",coordinates:n[o]}});const r=convex$1({type:t(e._0x199dbf),features:s});if(r){var i;const o=r==null||(i=r.geometry)===null||i===void 0?void 0:i.coordinates;o&&o.length>0&&(n=o[0])}}return n}function getGridPoints(n,e,t){const i={_0x571160:2654},s=_0x3a2b68,r=Cesium__namespace.Cartesian3.distance(Cesium__namespace.Cartesian3.fromDegrees(n[0],n[1]),Cesium__namespace.Cartesian3.fromDegrees(n[2],n[3]))/(Math.sqrt(2)*1e3),o=r/Math.sqrt(e),c=pointGrid(n,o,{units:s(3380)}),_=[];return c.features.forEach(l=>{const d=s,f=l.geometry[d(918)];_.push(new LngLatPoint(f[0],f[1],t))}),{points:_,radius:Math[s(i._0x571160)](o*1e3/2)}}function getGridPointsByPoly(n,e,t){const i={_0x1d7eba:768,_0x3b270b:3664,_0xc28e15:2806,_0x557931:3501},s={_0x4a9e1a:2501,_0x378834:3664,_0x2589b7:4241},r=_0x3a2b68;if(n.length<3)return;const o=LngLatArray.toCartographics(n),c=Cesium__namespace.defined(t),_=o[0];let l=_[r(i._0x1d7eba)],d=_[r(i._0x1d7eba)],f=_.latitude,g=_[r(i._0x3b270b)],b=c?t:_[r(4241)];const C=o.map(z=>{const Y=r;return l=Math[Y(s._0x4a9e1a)](l,z.longitude),f=Math.max(f,z[Y(768)]),d=Math.min(d,z[Y(s._0x378834)]),g=Math.max(g,z.latitude),!c&&(b=Math.max(b,z[Y(s._0x2589b7)])),z}),P=[],S=f-l,L=g-d,E=e/distanceCoor([l,d],[f,d]),M=e/distanceCoor([l,d],[l,g]),D=E*S,R=M*L,k=Math.floor(S/D),N=Math.floor(L/R),$=(S-k*D)/2,B=(L-N*R)/2;let F=l+$;for(;F<=f;){let z=d+B;for(;z<=g;){if(isInside([F,z],C)){const Y=Cesium__namespace.Math[r(3501)](F),J=Cesium__namespace[r(i._0xc28e15)][r(i._0x557931)](z);P.push(new LngLatPoint(Y,J,b))}z+=R}F+=D}return P}function distanceCoor(n,e){const t={_0x561d17:392,_0x29e4e0:2789},i=_0x3a2b68,s=e[1]-n[1],r=e[0]-n[0],o=n[1],c=e[1],_=Math.pow(Math.sin(s/2),2)+Math[i(t._0x561d17)](Math.sin(r/2),2)*Math.cos(o)*Math.cos(c);return 2*Math.atan2(Math[i(t._0x29e4e0)](_),Math.sqrt(1-_))*63710088e-1}function isInside(n,e){const t={_0x200288:3664,_0x5caa72:3664},i=_0x3a2b68;let s=![];const r=e.length,o=n[0],c=n[1];let _=e[0];for(let l=0;l<r;l++){let d=l+1;d=d===r?0:d;const f=e[d];if(_[i(768)]===o&&_.latitude===c||f[i(768)]===o&&f[i(3664)]===c)return!![];if(_[i(t._0x200288)]<c&&f[i(t._0x5caa72)]>=c||_.latitude>=c&&f.latitude<c){const g=_[i(768)]+(c-_.latitude)*(f.longitude-_[i(768)])/(f.latitude-_[i(t._0x200288)]);if(g===o)return!![];g>o&&(s=!s)}_=f}return s}function getHeightRangeByDepth(n,e,t){return new Promise((i,s)=>{setTimeout(()=>{const r=interPolygonByDepth$1({...t,positions:n,scene:e});setTimeout(()=>{i(r)},10)},10)})}function interPolygonByDepth(n){return new Promise((e,t)=>{setTimeout(()=>{const i=interPolygonByDepth$1(n);setTimeout(()=>{e(i)},10)},10)})}const getRayIntersectingPositions=getRayIntersectingPositions$1;function interPolylineByDepth(n){return new Promise((e,t)=>{setTimeout(()=>{const i=interPolylineByDepth$1(n);setTimeout(()=>{e(i)},10)},10)})}var PolyUtil={__proto__:null,centerOfMass,buffer,bufferPoints,getGranularity,interPolygon,getHeightRange,computeVolume,updateVolumeByMinHeight,updateVolume,getEllipseOuterPositions,formatRectangle,getExtentByGeoJSON,getRectangle,getPositionsRectVertex,getRectangleOuterPositions,getRectPositionsByCenter,isInPoly,getBezierCurve,simplifyPositions,interPolyline,interLine,computeSurfaceLine,computeSurfacePoints,computeStepSurfaceLine,getLinkedPointList,getOffsetLine,sliceByMaxDistance,convex,getGridPoints,getGridPointsByPoly,getHeightRangeByDepth,interPolygonByDepth,getRayIntersectingPositions,interPolylineByDepth};function getDistance(n,e){const t={_0x2e518e:2249},i=_0x3a2b68,s=n.length;if(!Cesium__namespace.defined(n)||s<2)return 0;n=LngLatArray[i(t._0x2e518e)](n);let r=0;for(let o=1;o<s;o++)r+=Cesium__namespace.Cartesian3.distance(n[o-1],n[o]);return e&&(r+=Cesium__namespace.Cartesian3.distance(n[0],n[s-1])),r}function getSurfaceDistance(n){const e={_0xeb5be8:400,_0x286ec5:2228,_0x12acee:3553,_0x3e2892:4241},t=_0x3a2b68;if(!Cesium__namespace.defined(n)||n.length<2)return 0;n=LngLatArray[t(2249)](n);let i=0;for(let s=1,r=n[t(e._0xeb5be8)];s<r;s++){const o=Cesium__namespace[t(e._0x286ec5)][t(2101)](n[s-1]),c=Cesium__namespace.Cartographic.fromCartesian(n[s]),_=new Cesium__namespace.EllipsoidGeodesic;_[t(e._0x12acee)](o,c);let l=_.surfaceDistance;l=Math.sqrt(Math.pow(l,2)+Math.pow(c[t(e._0x3e2892)]-o.height,2)),i+=l}return i}function getClampDistance(n,e){const t={_0x2d49ad:744};let i=0;const s=[];return new Promise((r,o)=>{setTimeout(()=>{const c={_0x2b90e1:2767},_=_0x20dc;computeStepSurfaceLine({scene:e[_(t._0x2d49ad)],positions:n,splitNum:e.splitNum,has3dtiles:e.has3dtiles,exact:e.exact??!![],endItem:function(l,d,f){let g=getSurfaceDistance(l);d&&e.disTerrainScale&&(g=g*e.disTerrainScale),i+=g,s.push(g),e.endItem&&e.endItem({index:f,positions:l,distance:g,arrDistance:s,all_distance:i})},end:function(l){const d=_;e[d(2767)]&&e[d(c._0x2b90e1)](i),e[d(2602)]&&e[d(2602)](i),r({distance:i,arrDistance:s,arrPositions:l})}})},50)})}function getArea(n){const e={_0x8066b9:2249,_0x46ce63:1926},t=_0x3a2b68;if(!n||!Array.isArray(n)||n.length<3)return 0;n=LngLatArray[t(e._0x8066b9)](n);const i=Cesium__namespace.CoplanarPolygonGeometry[t(e._0x46ce63)](Cesium__namespace.CoplanarPolygonGeometry.fromPositions({positions:n,vertexFormat:Cesium__namespace.VertexFormat.POSITION_ONLY}));let s=0;if(!i)return s;const r=i.attributes.position[t(3826)],o=i.indices;for(let c=0;c<o[t(400)];c+=3){const _=Cesium__namespace.Cartesian3[t(3236)](r,o[c]*3,new Cesium__namespace.Cartesian3),l=Cesium__namespace.Cartesian3.unpack(r,o[c+1]*3,new Cesium__namespace.Cartesian3),d=Cesium__namespace.Cartesian3.unpack(r,o[c+2]*3,new Cesium__namespace.Cartesian3);s+=getTriangleArea(_,l,d)}return s}function getSurfaceArea(n){const e=_0x3a2b68;if(!n||!Array.isArray(n)||n[e(400)]<3)return 0;const t=LngLatArray.toArray(n);return t.length>0&&t.push(t[0]),area({type:"Feature",geometry:{type:"Polygon",coordinates:[t]}})}function getTriangleArea(n,e,t){const i={_0x36cf9a:3420},s=_0x3a2b68,r=Cesium__namespace.Cartesian3[s(i._0x36cf9a)](n,e,new Cesium__namespace.Cartesian3),o=Cesium__namespace.Cartesian3.subtract(t,e,new Cesium__namespace.Cartesian3),c=Cesium__namespace.Cartesian3.cross(r,o,r);return Cesium__namespace[s(2978)][s(1527)](c)*.5}function getClampArea(n,e){const t={_0x18dd02:1069,_0xea6c36:1158};return interPolygon({positions:n,exact:!![],...e}).then(i=>{const s=_0x20dc;let r=0;for(let o=0,c=i.list[s(400)];o<c;o++){const _=i[s(t._0x18dd02)][o],l=_.point1,d=_[s(t._0xea6c36)],f=_.point3;r+=getTriangleArea(l.pointDM,d.pointDM,f.pointDM)}return i.area=r,e.callback&&e.callback(r,i),i})}function getAngle(n,e,t){const i={_0x1d7464:2478,_0x49bd15:971,_0x4056d7:971,_0x59916a:3501},s=_0x3a2b68;let r=Cesium__namespace.Transforms.eastNorthUpToFixedFrame(e);r=Cesium__namespace[s(i._0x1d7464)][s(2426)](r,new Cesium__namespace.Matrix3);const o=Cesium__namespace.Matrix3.getColumn(r,0,new Cesium__namespace.Cartesian3),c=Cesium__namespace.Matrix3.getColumn(r,1,new Cesium__namespace.Cartesian3),_=Cesium__namespace.Matrix3.getColumn(r,2,new Cesium__namespace.Cartesian3);let l=Cesium__namespace.Cartesian3.subtract(n,e,new Cesium__namespace.Cartesian3);if(isNaN(l.x)||isNaN(l.y)||isNaN(l.z)||l.equals(Cesium__namespace.Cartesian3[s(4210)]))return 0;l=Cesium__namespace.Cartesian3.cross(l,_,l),l=Cesium__namespace[s(2978)][s(2729)](_,l,l),l=Cesium__namespace.Cartesian3.normalize(l,l);let d=Cesium__namespace.Cartesian3[s(i._0x49bd15)](o,l);Cesium__namespace[s(2978)][s(i._0x4056d7)](c,l)>Math.PI*.5&&(d=2*Math.PI-d);let g=360-Cesium__namespace.Math[s(i._0x59916a)](d)-180;return t&&(g+=90),g<0?g=g+360:g>360&&(g=g-360),g}function formatDistance(n,e={}){const t={_0x1e8f1c:1733,_0xc6e2c5:1733,_0x42abbb:3923,_0x13d11f:2066},i=_0x3a2b68;if(n==null||(n=Number(n),isNaN(n)||n===0))return"";isString(e)&&(e={unit:e}),(e[i(t._0x1e8f1c)]==null||e[i(t._0xc6e2c5)]==="auto")&&(n<1e3?e.unit="m":e.unit="km"),e[i(1395)]=e.decimal??2;let s="";switch(e.unit){case"km":s=(n*.001).toFixed(e.decimal)+getLangText(i(t._0x42abbb),e.lang);break;case"wm":s=(n*1e-4).toFixed(e.decimal)+getLangText("_万米",e.lang);break;case"mile":s=(n*54e-5)[i(3265)](e.decimal)+getLangText("_海里",e.lang);break;case i(t._0x13d11f):s=(n*.3).toFixed(e.decimal)+getLangText("_丈",e.lang);break;case"m":default:s=n.toFixed(e.decimal)+getLangText("_米",e[i(3857)]);break}return s}function formatArea(n,e={}){const t={_0x4f5057:1395,_0x29dd3b:1500},i=_0x3a2b68;if(n==null||(n=Number(n),isNaN(n)||n===0))return"";isString(e)&&(e={unit:e}),(e.unit==null||e.unit==="auto")&&(n<1e6?e[i(1733)]="m":e.unit="km"),e[i(1395)]=e.decimal??2;let s="";switch(e.unit){case"km":s=(n/1e6).toFixed(e[i(t._0x4f5057)])+getLangText(i(t._0x29dd3b),e.lang);break;case"mu":s=(n*.0015)[i(3265)](e.decimal)+getLangText("_亩",e.lang);break;case"ha":s=(n*1e-4).toFixed(e[i(1395)])+getLangText(i(2633),e.lang);break;case"m":default:s=n.toFixed(e.decimal)+getLangText("_平方米",e.lang);break}return s}function formatVolume(n,e={}){const t={_0x268372:1395,_0x3b0905:1218},i=_0x3a2b68;return n==null||(n=Number(n),isNaN(n)||n===0)?"":(e.decimal=e.decimal??2,e.lang===LangType.EN?n.toFixed(e.decimal)+getLangText("_立方米",e.lang):n<1e4?n.toFixed(e[i(t._0x268372)])+getLangText(i(t._0x3b0905),e.lang):(n/1e4).toFixed(e.decimal)+getLangText("_万立方米",e.lang))}var MeasureUtil={__proto__:null,getDistance,getSurfaceDistance,getClampDistance,getArea,getSurfaceArea,getTriangleArea,getClampArea,getAngle,formatDistance,formatArea,formatVolume};function register$3(n,e){const t={_0x52879c:2045,_0x25b017:2630},i=_0x3a2b68;Cesium__namespace[i(4208)]._materialCache.getMaterial(n)&&logError$1("MaterialUtil register: "+n+i(t._0x52879c),e),MaterialTypes[n]=n,Cesium__namespace.Material[n+"Type"]=n,e[i(t._0x25b017)]&&(e[i(2630)].type=n),Cesium__namespace.Material._materialCache.addMaterial(n,e)}const OptsConverClass={};function registerOptsConver(n,e){const t={_0x5e32d4:2045},i=_0x3a2b68;OptsConverClass[n]&&logError$1("MaterialUtil registerOptsConver: "+n+i(t._0x5e32d4),e),OptsConverClass[n]=e}const MaterialClass={},MaterialTypes={};function registerClass(n,e){const t=_0x3a2b68;MaterialTypes[n]&&logError$1(t(1998)+n+"类型已存在",e),MaterialClass[n]=e,MaterialTypes[n]=n}const MaterialPropertyClass={};function registerPropertyClass(n,e){MaterialPropertyClass[n]&&logError$1("MaterialUtil registerPropertyClass: "+n+"属性类型已存在",e),MaterialPropertyClass[n]=e}function createMaterialProperty(n,e){const t={_0x5d7bc6:1304,_0x1ef753:1941},i=_0x3a2b68,s=MaterialPropertyClass[n];if(s){const r=OptsConverClass[n]||OptsConverClass.default;r&&(e[i(4089)]=n,e=r[i(t._0x5d7bc6)](e,{},!![]));const o=new s(e);return o._mars_type=n,o[i(t._0x1ef753)]=e,o}else logWarn("createMaterialProperty:未找到该类型的对应材质属性",n)}function createMaterial(n,e){const t={_0x215405:1353,_0x2a84f9:3431},i=_0x3a2b68;if(!n){logError$1(i(t._0x215405));return}const s=OptsConverClass[n]||OptsConverClass[i(4040)];s&&(e.materialType=n,e=s.toCesiumVal(e));let r;const o=MaterialClass[n];return o?r=new o(e):r=Cesium__namespace.Material[i(1385)](n,e),r.options=e,r[i(t._0x2a84f9)]=n,r}function hasMaterial(n,e){return e?!!MaterialPropertyClass[n]:!!MaterialTypes[n]}function toJSON(n,e={}){const t={_0x596672:1603,_0x3e6f79:4089},i=_0x3a2b68;var s;let r;if(n[i(3431)]?r=n[i(3431)]:n!=null&&(s=n._template)!==null&&s!==void 0&&s[i(t._0x596672)]?r=n._template.type:n!=null&&n.getType&&(r=n.getType()),!r)if(n instanceof Cesium__namespace.Color)r="Color";else{if(n instanceof HTMLVideoElement)return;logWarn("toJSON：未识别的材质类型",n)}const o=OptsConverClass[r]||OptsConverClass.default;return o&&(e[i(t._0x3e6f79)]=r,e[i(1509)]=o.toJSON(n)),e}function toJSONByType(n,e){const t=OptsConverClass[n]||OptsConverClass.default;return t?t.toJSON(e):e}function addTextureUniform(n){const e={_0x3a7cff:3592,_0x3afff6:1943,_0xd651cb:4328,_0x4c161b:3068,_0x29cf15:3768},t={_0x5b94e3:517,_0x1551f1:1123},i=_0x3a2b68,{context:s,material:r,uniformName:o,image:c}=n,_=n.wrapS||Cesium__namespace.TextureWrap.REPEAT,l=n.wrapT||Cesium__namespace[i(e._0x3a7cff)].REPEAT,d=n[i(e._0x3afff6)]||Cesium__namespace[i(e._0xd651cb)][i(e._0x4c161b)],f=n[i(4364)]||Cesium__namespace[i(e._0x29cf15)].LINEAR,g=new Image;g.src=c,g.addEventListener("load",()=>{const b=i,C=new Cesium__namespace.Texture({context:s,source:g,sampler:new Cesium__namespace.Sampler({wrapS:_,wrapT:l,minificationFilter:d,magnificationFilter:f})});C.type="sampler2D",isPowerOfTwo(g[b(t._0x5b94e3)])&&isPowerOfTwo(g.height)&&C.generateMipmap(Cesium__namespace[b(t._0x1551f1)].NICEST),r.uniforms[o]=C})}function isPowerOfTwo(n){return(n&n-1)===0&&n!==0}var MaterialUtil={__proto__:null,register:register$3,registerOptsConver,registerClass,registerPropertyClass,createMaterialProperty,createMaterial,hasMaterial,toJSON,toJSONByType,addTextureUniform};const PointType={Control:1,MoveAll:2,AddMidPoint:3,MoveHeight:4,EditAttr:5,EditRotation:6},PointColor={Control:"rgba(28,25,125,0.99)",MoveAll:"rgba(140,0,58,0.99)",MoveHeight:"rgba(149,0,235,0.99)",EditAttr:"rgba(245,49,232,0.99)",AddMidPoint:"rgba(4,194,201,0.3)"};let defaultEditStyle={pixelSize:12,outline:!![],outlineColor:"rgba(255,255,255,0.5)",outlineWidth:2,scaleByDistance:new Cesium__namespace.NearFarScalar(1e3,1,1e6,.5),disableDepthTestDistance:Number.POSITIVE_INFINITY};function setPointStyle(n){defaultEditStyle=merge(defaultEditStyle,n)}function getEditPointStyle(n){const e={_0x211d66:3486,_0x4414fe:2540,_0x3f19a6:2684},t=_0x3a2b68,i={...defaultEditStyle};switch(n){case PointType.AddMidPoint:i[t(2540)]=PointColor.AddMidPoint,i.outlineColor="rgba(255,255,255,0.4)";break;case PointType[t(e._0x211d66)]:i.color=PointColor.MoveAll;break;case PointType.MoveHeight:i.color=PointColor[t(533)];break;case PointType.EditAttr:i[t(e._0x4414fe)]=PointColor[t(e._0x3f19a6)];break;case PointType.Control:default:i.color=PointColor.Control;break}return i}var DrawUtil={__proto__:null,PointType,PointColor,setPointStyle,getEditPointStyle};const TerrainType={NONE:"none",XYZ:"xyz",ARCGIS:"arcgis",ION:"ion",GEE:"gee",VR:"vr"};class GCJMercatorTilingScheme extends Cesium__namespace.WebMercatorTilingScheme{constructor(e){const t={_0x33cfc6:919},i={_0x6a8792:3501,_0x12ac2e:2806},s={_0x3353e4:1185,_0x12a782:3532},r=_0x3a2b68;super(e);const o=e.mapChinaCRS,c=e[r(t._0x33cfc6)],_=getTransFun(o,c),l=getTransFun(c,o);if(_){const d=new Cesium__namespace.WebMercatorProjection;this[r(1845)].project=function(f,g){const b=r;return g=_([Cesium__namespace.Math.toDegrees(f.longitude),Cesium__namespace.Math.toDegrees(f.latitude)]),g=d[b(4146)](new Cesium__namespace.Cartographic(Cesium__namespace.Math[b(1185)](g[0]),Cesium__namespace.Math[b(s._0x3353e4)](g[1]))),new Cesium__namespace[b(s._0x12a782)](g.x,g.y)},this[r(1845)][r(2246)]=function(f,g){const b=r,C=d[b(2246)](f);return g=l([Cesium__namespace.Math[b(i._0x6a8792)](C.longitude),Cesium__namespace.Math.toDegrees(C.latitude)]),new Cesium__namespace.Cartographic(Cesium__namespace.Math.toRadians(g[0]),Cesium__namespace[b(i._0x12ac2e)].toRadians(g[1]))}}}}const LayerClass={};function register$2(n,e){const t={_0x51a90b:4390},i=_0x3a2b68;LayerClass[n]&&logError$1("register: "+n+"类型已存在",e),LayerType[n]=n,LayerClass[n]=e,e.type=n,e[i(t._0x51a90b)]._type=n}function getClass$2(n){return LayerClass[n]}function create$2(n,e){const t=getClass$2(n.type);if(t)return e&&(n.templateValues=e),new t(n);logWarn("配置中的图层未处理",n)}function converOptions(n){const e={_0x1c1ddf:363,_0x32131f:1193,_0xb7ad74:1193,_0x416ab9:1193,_0xa1b7c9:4353,_0x42d195:1531,_0x21bc5e:4262,_0x52a822:3424},t=_0x3a2b68,i={};for(const s in n){let r=n[s];if(r!=null)switch(s){case"crs":r=(r+"")[t(e._0x1c1ddf)](),r===CRS[t(e._0x32131f)]||r==="4326"||r===t(e._0xb7ad74)?(i[t(3663)]=CRS[t(e._0x416ab9)],i.tilingScheme=new Cesium__namespace.GeographicTilingScheme({numberOfLevelZeroTilesX:n.numberOfLevelZeroTilesX||2,numberOfLevelZeroTilesY:n.numberOfLevelZeroTilesY||1})):r===CRS.EPSG4490||r===t(1468)||r==="EPSG4490"?(i.crs=CRS.EPSG4490,i.tilingScheme=new Cesium__namespace.GeographicTilingScheme({numberOfLevelZeroTilesX:n[t(3156)]||2,numberOfLevelZeroTilesY:n.numberOfLevelZeroTilesY||1})):(i.crs=CRS.EPSG3857,i.tilingScheme=new Cesium__namespace.WebMercatorTilingScheme({numberOfLevelZeroTilesX:n.numberOfLevelZeroTilesX||1,numberOfLevelZeroTilesY:n.numberOfLevelZeroTilesY||1}));break;case t(919):{n[t(3791)]!==n.chinaCRS&&(i[t(1004)]=new GCJMercatorTilingScheme({mapChinaCRS:n.mapChinaCRS||ChinaCRS.WGS84,chinaCRS:n.chinaCRS,numberOfLevelZeroTilesX:n.numberOfLevelZeroTilesX||1,numberOfLevelZeroTilesY:n.numberOfLevelZeroTilesY||1}));break}case"rectangle":Cesium__namespace.defined(r)&&Cesium__namespace.defined(r.xmin)&&Cesium__namespace.defined(r[t(e._0xa1b7c9)])&&Cesium__namespace.defined(r.ymin)&&Cesium__namespace.defined(r.ymax)?i.rectangle=Cesium__namespace.Rectangle.fromDegrees(r.xmin,r.ymin,r.xmax,r.ymax):r instanceof Cesium__namespace.Rectangle&&(i.rectangle=r);break;case"bbox":i[t(e._0x42d195)]=Cesium__namespace.Rectangle.fromDegrees(r[0],r[1],r[2],r[3]);break;default:i[s]=r;break}}return i[t(3663)]===CRS.EPSG4490&&i.url&&(i.url=i.url[t(e._0x21bc5e)](/\{z\}/gm,"{z4490}"),i.url=i.url.replace(/\{arc_z\}/gm,"{arc_z4490}"),i.url=i.url.replace(/\{arc_Z\}/gm,"{arc_Z4490}")),n[t(3682)]&&(i.url=i.url.replace(/\{y\}/gm,"{reverseY}")),Cesium__namespace.defined(n.minimumTerrainLevel)&&Cesium__namespace[t(407)](n.minimumLevel)&&n.minimumTerrainLevel<n[t(3406)]&&(i.minimumTerrainLevel=n.minimumLevel),Cesium__namespace.defined(n.maximumTerrainLevel)&&Cesium__namespace.defined(n.maximumLevel)&&n.maximumTerrainLevel>n.maximumLevel&&(i.maximumTerrainLevel=n[t(1930)]),!Cesium__namespace[t(407)](n.minimumTerrainLevel)&&Cesium__namespace.defined(n.minimumLevel)&&n.minimumLevel>0&&(i.minimumTerrainLevel=n.minimumLevel),i.url&&(n.queryParameters||n[t(e._0x52a822)]||n.headers||n.proxy)&&(i.url=getUrlResource(i)),i}const ImageryProviderFun={};function registerImageryProvider(n,e){ImageryProviderFun[n]&&logError$1("registerImageryProvider: "+n+"类型已存在"),ImageryProviderFun[n]=e}function getProviderClass(n){return ImageryProviderFun[n]}async function createImageryProvider$k(n){const e={_0x271362:1603,_0x3cb546:1941,_0x1f5b44:407},t=_0x3a2b68,i=getProviderClass(n[t(e._0x271362)]);if(i){const s=await i(n);return!s[t(e._0x3cb546)]&&(s.options=n),Cesium__namespace.defined(n.invertColor)&&(s.invertColor=n.invertColor),Cesium__namespace[t(e._0x1f5b44)](n.filterColor)&&(s.filterColor=getCesiumColor(n.filterColor)),s}else logWarn(t(708),n)}function getImageryProviderViewModels(n,e){const t={_0x201a87:3424,_0x195a8a:442},i=_0x3a2b68,s=[];let r=-1;for(let o=0;o<n.length;o++){const c=n[o];c.type==="group"&&c.layers==null||(e&&(c[i(t._0x201a87)]=e),c.show?r=s[i(400)]:delete c[i(t._0x195a8a)],s[i(1754)](createProviderViewModel(c,o)))}return{imageryProviderViewModels:s,selectedIndex:r}}function createProviderViewModel(_0xb6d4a9,_0x42d8f4){const _0x5c35b2={_0x5602ca:3518},_0x1a7d91=_0x3a2b68;window._temp_mars3d_createImageryProvider=createImageryProvider$k;const _0x16254b=_0x1a7d91(_0x5c35b2._0x5602ca)+_0x42d8f4;return new Function(`
    `+_0x16254b+` = function (item) {
      item = item || `+JSON.stringify(getAttrVal(_0xb6d4a9,{onlySimpleType:!![]}))+`;
      if (item.type === "group") {
        const arrVec = []
        for (let index = 0; index < item.layers.length; index++) {
          const item2 = item.layers[index]
          if (item.templateValues) {
            item2.templateValues = item.templateValues
          }
          const temp = window._temp_mars3d_createImageryProvider(item2)
          if (temp == null) {
            continue
          }
          arrVec.push(temp)
        }
        return arrVec
      } else {
        return window._temp_mars3d_createImageryProvider(item)
      }
    }`)(),new Cesium__namespace.ProviderViewModel({name:_0xb6d4a9[_0x1a7d91(3307)]||"",tooltip:_0xb6d4a9.name||"",iconUrl:_0xb6d4a9[_0x1a7d91(3807)]||"",category:_0xb6d4a9.category||"",creationFunction:eval(_0x16254b),marsOptions:{layerId:_0xb6d4a9.id}})}const _ellipsoid=new Cesium__namespace.EllipsoidTerrainProvider({ellipsoid:Cesium__namespace.Ellipsoid[_0x3a2b68(1859)]});function getNoTerrainProvider(){return _ellipsoid}const TerrainProviderClass={};function registerTerrainProvider(n,e){TerrainProviderClass[n]&&logError$1("registerTerrainProvider: "+n+"类型已存在"),TerrainProviderClass[n]=e}function getTerrainProviderClass(n){return TerrainProviderClass[n]}async function createTerrainProvider(n){const e={_0x240475:1554,_0x3ee84f:1554,_0x448801:3835,_0x5dabde:1295,_0x5a3bce:1603},t=_0x3a2b68;n=n||{type:TerrainType[t(e._0x240475)]},n.type=n.type||TerrainType.XYZ,n.requestVertexNormals=n.requestVertexNormals??!![];let i;switch(n.type){case TerrainType.XYZ:case"terrain":{replaceOnlineUrlDomain(n),i=await Cesium__namespace[t(1707)].fromUrl(getUrlResource(n),n);break}case TerrainType.NONE:case t(3404):i=_ellipsoid;break;case TerrainType[t(e._0x3ee84f)]:i=await Cesium__namespace.CesiumTerrainProvider.fromIonAssetId(n.assetId??1,{requestWaterMask:n.requestWaterMask,requestVertexNormals:n.requestVertexNormals});break;case TerrainType.GEE:case t(e._0x448801):{const s=await Cesium__namespace[t(e._0x5dabde)].fromUrl(getUrlResource(n),n);i=await Cesium__namespace[t(347)].fromMetadata(s,n)}break;case TerrainType[t(1628)]:i=await Cesium__namespace[t(1280)].fromUrl(getUrlResource(n),n);break;case TerrainType.VR:i=await Cesium__namespace.VRTheWorldTerrainProvider.fromUrl(getUrlResource(n),n);break;default:{const s=getTerrainProviderClass(n[t(e._0x5a3bce)]);s&&(s.fromUrl?i=await s.fromUrl(getUrlResource(n),n):i=new s(n))}break}return i}function getTerrainProviderViewModels(n){const e={_0x3062a2:2688,_0x1625ab:2734,_0x3e07b1:680,_0x19ac9a:2923,_0x1db77a:3608},t=_0x3a2b68;return n?[new Cesium__namespace.ProviderViewModel({name:"无地形",iconUrl:Cesium__namespace[t(3608)]("Widgets/Images/TerrainProviders/Ellipsoid.png"),tooltip:"WGS84标准椭球，即 EPSG:4326",category:"",creationFunction:function(){return getNoTerrainProvider()}}),new Cesium__namespace[t(e._0x3062a2)]({name:n.name||"有地形",iconUrl:Cesium__namespace.buildModuleUrl("Widgets/Images/TerrainProviders/CesiumWorldTerrain.png"),tooltip:n.tooltip||"提供的高精度的DEM地形服务",category:"",creationFunction:function(){return createTerrainProvider(n)}})]:[new Cesium__namespace.ProviderViewModel({name:t(1219),iconUrl:Cesium__namespace.buildModuleUrl(t(e._0x1625ab)),tooltip:"WGS84标准椭球，即 EPSG:4326",category:"",creationFunction:function(){return getNoTerrainProvider()}}),new Cesium__namespace.ProviderViewModel({name:"Mar3D 中国地形",iconUrl:Cesium__namespace.buildModuleUrl("Widgets/Images/TerrainProviders/CesiumWorldTerrain.png"),tooltip:t(e._0x3e07b1),category:"",creationFunction:function(){return createTerrainProvider({url:t(1535)})}}),new Cesium__namespace.ProviderViewModel({name:"Ion 全球地形",iconUrl:Cesium__namespace.buildModuleUrl("Widgets/Images/TerrainProviders/CesiumWorldTerrain.png"),tooltip:t(e._0x19ac9a),category:"",creationFunction:function(){return createTerrainProvider({type:"ion"})}}),new Cesium__namespace.ProviderViewModel({name:"ArcGIS 全球地形",iconUrl:Cesium__namespace[t(e._0x1db77a)]("Widgets/Images/TerrainProviders/CesiumWorldTerrain.png"),tooltip:"arcgis官方提供的高分辨率全球地形",category:"",creationFunction:function(){return createTerrainProvider({type:"arcgis",url:"https://elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer"})}})]}var LayerUtil={__proto__:null,register:register$2,getClass:getClass$2,create:create$2,converOptions,registerImageryProvider,getProviderClass,createImageryProvider:createImageryProvider$k,getImageryProviderViewModels,getNoTerrainProvider,registerTerrainProvider,getTerrainProviderClass,createTerrainProvider,getTerrainProviderViewModels};const ControlClass={};function register$1(n,e){const t={_0x5f40af:2552},i=_0x3a2b68;ControlClass[n]&&logError$1("register: "+n+"类型已存在",e),ControlType[n]=n,ControlClass[n]=e,e[i(1603)]=n,e.prototype[i(t._0x5f40af)]=n}function getClass$1(n){return ControlClass[n]}function create$1(n,e){const t=getClass$1(n);if(t)return new t(e)}var ControlUtil={__proto__:null,register:register$1,getClass:getClass$1,create:create$1};const EffectClass={};function register(n,e){const t={_0x1c731a:2016,_0x5b309d:1603,_0x61f10f:2552},i=_0x3a2b68;EffectClass[n]&&logError$1(i(t._0x1c731a)+n+"类型已存在",e),EffectType[n]=n,EffectClass[n]=e,e[i(t._0x5b309d)]=n,e.prototype[i(t._0x61f10f)]=n}function getClass(n){return EffectClass[n]}function create(n,e){const t=_0x3a2b68,i=getClass(n);if(i)return new i(e);logWarn(t(3509),n,e)}var EffectUtil={__proto__:null,register,getClass,create};class BaseOptsConver{constructor(e={}){const t={_0x12d366:1941},i=_0x3a2b68;this[i(t._0x12d366)]=e}get excludedKeys(){return null}get includeKeys(){const e={_0x5c32cc:3999},t=_0x3a2b68;return["color","outlineColor",t(536),t(e._0x5c32cc)]}toCesiumVal(e,t={}){const i={_0x4c2b2a:3111},s=_0x3a2b68;this[s(i._0x4c2b2a)](e,t);for(const r in e){const o=e[r];if(this.includeKeys[s(2051)](r)===-1){if(!isSimpleType(o)){t[r]=o;continue}if(this.excludedKeys&&this.excludedKeys.indexOf(r)!==-1)continue}const c=this._toOneCesiumVal(r,o,e,t);c!=null&&(t[r]=c)}return this._toCesiumValEnd(e,t),t}_toCesiumValBefore(e,t){}_toCesiumValEnd(e,t){}[_0x3a2b68(839)](e,t,i,s){switch(e){default:s[e]=t;break}}toJSON(e,t={}){const i={_0x33996b:382,_0x42c465:382},s=_0x3a2b68;e=getAttrVal(e),this[s(i._0x33996b)]&&this[s(i._0x42c465)](t,e);for(const r in e){const o=e[r];isSimpleType(o)?t[r]=o:this._toOneJson(r,e[r],t)}return this._toJSONValEnd&&this._toJSONValEnd(t,e),t}_toOneJson(e,t,i){}static getColorByStyle(e){const t={_0x502933:1695},i=_0x3a2b68;return!this[i(1695)]&&(this[i(t._0x502933)]=new BaseOptsConver),this.baseOptsConver.getColorByStyle(e)}[_0x3a2b68(2599)](e){return getColorByStyle(e,this.options.color)}getOutlineColorByStyle(e){const t={_0x13e29a:1091,_0x58bbce:747},i=_0x3a2b68;let s;return e.outlineColor?isString(e.outlineColor)?s=Cesium__namespace.Color.fromCssColorString(e.outlineColor):s=e.outlineColor:s=this.options.outlineColor,s&&(Cesium__namespace.defined(e[i(t._0x13e29a)])?s=s.withAlpha(Number(e.outlineOpacity)):Cesium__namespace.defined(e.opacity)&&(s=s[i(t._0x58bbce)](Number(e.opacity))),Cesium__namespace.defined(e.globalAlpha)&&e.globalAlpha!==1&&(s=s.withAlpha(s.alpha*e.globalAlpha)),s)}}class BaseMaterialConver extends BaseOptsConver{get excludedKeys(){return["label"][_0x3a2b68(4083)](this._getExcludedStyle())}[_0x3a2b68(633)](){return[]}static[_0x3a2b68(1304)](e,t){const i={_0x5940ef:1304},s=_0x3a2b68;return!this.baseMaterialConver&&(this[s(2468)]=new BaseMaterialConver),this.baseMaterialConver[s(i._0x5940ef)](e,t)}[_0x3a2b68(839)](e,t,i,s){const r={_0x1f5c0b:2339,_0x2ea1ef:2977,_0x27444c:747,_0x55bee2:1574,_0xe5da30:1719,_0x25192d:4089,_0x487d8e:3532,_0x964c50:1820,_0x44123a:3219,_0x176cf4:2805},o=_0x3a2b68;switch(e){case"color":case o(3239):s.color=this.getColorByStyle(i);break;case"color2":case"bgColor":case o(3559):case o(r._0x1f5c0b):case o(r._0x2ea1ef):case"lightColor":case"darkColor":case o(2775):case"blendColor":case o(704):case"strokeColor":case o(536):case o(604):{let c=getCesiumColor(t);Cesium__namespace[o(407)](i.opacity)&&i[o(3248)]!==1&&(c=c[o(r._0x27444c)](i[o(3248)])),Cesium__namespace.defined(i.globalAlpha)&&i[o(749)]!==1&&(c=c[o(747)](c[o(838)]*i.globalAlpha)),s[e]=c;break}case o(r._0x55bee2):case"repeat_y":{const c=i.repeat_x??1,_=i.repeat_y??1;s[o(r._0xe5da30)]=new Cesium__namespace.Cartesian2(c,_);break}case"repeat":{i.materialType===Stripe||i[o(r._0x25192d)]===CylinderWave?s[e]=t:s[e]=new Cesium__namespace[o(r._0x487d8e)](i.repeat_x||t,i.repeat_y||t);break}case"lineCount":case o(r._0x964c50):case o(r._0x44123a):case"noiseScale":{s[e]=new Cesium__namespace.Cartesian2(t,t);break}case"orientation":{t?s[e]=Cesium__namespace.StripeOrientation.VERTICAL:s[e]=Cesium__namespace[o(r._0x176cf4)].HORIZONTAL;break}default:s[e]=t;break}}static toJSON(e,t){return!this.baseMaterialConver&&(this.baseMaterialConver=new BaseMaterialConver),this.baseMaterialConver.toJSON(e,t)}toJSON(e,t={}){const i={_0x49ac14:1941,_0x2ba23d:1909},s=_0x3a2b68;var r;if((r=e)!==null&&r!==void 0&&r.options){const o=e[s(i._0x49ac14)];for(const c in o)Cesium__namespace[s(407)](e[c])&&(o[c]=e[c]);e=o}return super[s(i._0x2ba23d)](e,t)}[_0x3a2b68(1791)](e,t,i){const s={_0x52f01d:3203,_0x3fef93:3559,_0xb6e9dc:3703,_0x3c5ac2:604},r=_0x3a2b68;if(t instanceof Cesium__namespace.Color){i[e]=t.toCssColorString();return}switch(e){case r(s._0x52f01d):break;case"color":case"fillColor":case r(s._0x3fef93):case"evenColor":case"oddColor":case"baseWaterColor":case r(s._0xb6e9dc):case"gapColor":case r(3999):case"backgroundColor":case r(s._0x3c5ac2):case"lightColor":{const o=getCesiumColor(t);o&&(i[e]=o.toCssColorString());break}case"repeat":{t instanceof Cesium__namespace[r(3532)]?t.x!==t.y?(i[e+"_x"]=t.x,i[e+"_y"]=t.y):i[e]=t.x:i[e]=t;break}case r(2422):case"lineThickness":case"lineOffset":case"noiseScale":{i[e+"_x"]=t.x,i[e+"_y"]=t.y;break}default:console.log(r(4021),e,t);break}}}registerOptsConver("default",BaseMaterialConver);class ColorOptsConver extends BaseMaterialConver{static toCesiumVal(e,t,i){const s=_0x3a2b68;return e instanceof Cesium__namespace.Color?e:(!this[s(2105)]&&(this.colorOptsConver=new ColorOptsConver),this[s(2105)].isProperty=i,this.colorOptsConver.toCesiumVal(e,t))}toCesiumVal(e){return this[_0x3a2b68({_0x5ccd75:938}._0x5ccd75)]?this.getColorByStyle(e):{color:this.getColorByStyle(e)}}static[_0x3a2b68(1909)](e,t={},i=![]){const s={_0x2f345d:2105},r=_0x3a2b68;return!this[r(2105)]&&(this.colorOptsConver=new ColorOptsConver),this[r(s._0x2f345d)].isProperty=i,this.colorOptsConver.toJSON(e,t)}toJSON(e,t={}){const i={_0x2b7674:2540,_0x5e1e68:847},s=_0x3a2b68;var r;(r=e)!==null&&r!==void 0&&r[s(i._0x2b7674)]&&(e=e.color);let o=getCesiumValue(e,Cesium__namespace.Color);return o.color&&(o=o.color),o&&(o instanceof Cesium__namespace.Color?t.color=o[s(i._0x5e1e68)]():isString(o)&&(t[s(i._0x2b7674)]=o)),t}}registerOptsConver(Color$2,ColorOptsConver),registerOptsConver(PolylineArrow,ColorOptsConver);class ImageOptsConver extends BaseMaterialConver{get excludedKeys(){return["repeat_y"]}static toCesiumVal(e,t){return!this.imageOptsConver&&(this.imageOptsConver=new ImageOptsConver),this.imageOptsConver.toCesiumVal(e,t)}_toOneCesiumVal(e,t,i,s){const r={_0x31853a:1574,_0x56fbf8:749,_0x3d87c0:2540},o=_0x3a2b68;switch(e){case o(r._0x31853a):{const c=i.repeat_x??1,_=i.repeat_y??1;s.repeat=new Cesium__namespace.Cartesian2(c,_);break}case"repeat":{s[e]=new Cesium__namespace.Cartesian2(i.repeat_x||t,i.repeat_y||t);break}case"color":break;case"opacity":Cesium__namespace.defined(i[o(r._0x56fbf8)])&&i.globalAlpha!==1?s.color=Cesium__namespace[o(2092)].WHITE.withAlpha(i.globalAlpha*(t??1)):i.transparent??!![]?s[o(r._0x3d87c0)]=Cesium__namespace.Color.WHITE.withAlpha(t??1):s.color=Cesium__namespace.Color.WHITE;break;default:s[e]=t;break}}[_0x3a2b68(3295)](e,t){const i={_0x3fcb17:3783},s=_0x3a2b68;t[s(i._0x3fcb17)]=t.transparent??!![]}static toJSON(e,t){return!this.imageOptsConver&&(this.imageOptsConver=new ImageOptsConver),this.imageOptsConver.toJSON(e,t)}_toOneJson(e,t,i){const s={_0x11f6ab:1574},r=_0x3a2b68;switch(e){case"repeat":{i[r(s._0x11f6ab)]=t.x,i.repeat_y=t.y;break}case"color":{var o;i[r(3248)]=((o=getCesiumColor(t))===null||o===void 0?void 0:o.alpha)??1;break}default:console.log("未处理的属性",e,t);break}}}registerOptsConver(Image$1,ImageOptsConver);class BaseStyleConver extends BaseOptsConver{get excludedKeys(){const e={_0x56e673:1091,_0x692e1d:2422,_0x52e95a:4083},t=_0x3a2b68;return["type","label",t(e._0x56e673),"outlineStyle",t(e._0x692e1d),"lineThickness",t(3216),"oddcolor","speed","axisY","image2","color2","scaleByDistance_near","scaleByDistance_nearValue","scaleByDistance_far","scaleByDistance_farValue","distanceDisplayCondition_far","distanceDisplayCondition_near"][t(e._0x52e95a)](this._getExcludedStyle())}_getExcludedStyle(){return[]}_toCesiumValBefore(e,t){const i={_0x392513:3239},s=_0x3a2b68;if(!e.material&&!e.materialType){var r;e.color||e[s(i._0x392513)]||(r=e.materialOptions)!==null&&r!==void 0&&r.color?e[s(4089)]=Color$2:e.image&&(e.materialType=Image$1)}}_toOneCesiumVal_Point(e,t,i,s){const r={_0x466bf7:3896,_0x590ae7:2028},o=_0x3a2b68;switch(e){case"clampToGround":t?s[o(3868)]=Cesium__namespace.HeightReference.CLAMP_TO_GROUND:s.heightReference=Cesium__namespace.HeightReference.NONE;break;case"visibleDepth":t?s.disableDepthTestDistance=0:s.disableDepthTestDistance=Number.POSITIVE_INFINITY;break;case"hasShadows":t?s.shadows=Cesium__namespace.ShadowMode.ENABLED:s[o(955)]=Cesium__namespace.ShadowMode.DISABLED;break;case"scaleByDistance":t?s.scaleByDistance=new Cesium__namespace[o(r._0x466bf7)](Number(Cesium__namespace.defaultValue(i[o(r._0x590ae7)],1e3)),Number(Cesium__namespace.defaultValue(i.scaleByDistance_nearValue,1)),Number(Cesium__namespace.defaultValue(i.scaleByDistance_far,1e6)),Number(Cesium__namespace.defaultValue(i[o(546)],.1))):s.scaleByDistance=void 0;break;case"distanceDisplayCondition":t?s.distanceDisplayCondition=new Cesium__namespace.DistanceDisplayCondition(Number(Cesium__namespace.defaultValue(i.distanceDisplayCondition_near,0)),Number(Cesium__namespace.defaultValue(i[o(3029)],Number.MAX_VALUE))):s.distanceDisplayCondition=void 0;break;default:s[e]=t;break}}_toOneCesiumVal_Poly(e,t,i,s){const r={_0xd743e7:799,_0x558e96:3793,_0x1dfceb:4089,_0x582566:3559,_0x284be5:3988,_0x4e387b:2623},o=_0x3a2b68;switch(e){case"materialType":{this[o(r._0xd743e7)]?s[o(r._0x558e96)]=createMaterialProperty(i.materialType,i.materialOptions||i):s.material=createMaterial(i[o(r._0x1dfceb)],i.materialOptions||i);break}case"color":case"randomColor":{s[o(2540)]=this.getColorByStyle(i);break}case o(3559):{s[o(r._0x582566)]=this[o(r._0x284be5)](i);break}case"hasShadows":t?s.shadows=Cesium__namespace.ShadowMode.ENABLED:s.shadows=Cesium__namespace.ShadowMode[o(1273)];break;case"distanceDisplayCondition":t?this.isEntity?s.distanceDisplayCondition=new Cesium__namespace.DistanceDisplayCondition(Number(Cesium__namespace.defaultValue(i.distanceDisplayCondition_near,0)),Number(Cesium__namespace[o(r._0x4e387b)](i.distanceDisplayCondition_far,Number.MAX_VALUE))):s.distanceDisplayCondition=new Cesium__namespace.DistanceDisplayConditionGeometryInstanceAttribute(Number(Cesium__namespace.defaultValue(i.distanceDisplayCondition_near,0)),Number(Cesium__namespace.defaultValue(i.distanceDisplayCondition_far,Number[o(2617)]))):s[o(2169)]=void 0;break;default:s[e]instanceof Cesium__namespace.CallbackProperty?logWarn("回调属性未覆盖更新",e,t):s[e]=t;break}}_toJSONValEnd(e,t){}_toOneJson_Poly(e,t,i){const s={_0x3387e8:4184,_0x448e0d:847,_0x22cafd:2806,_0xe48127:955},r=_0x3a2b68;switch(e){case r(3203):case"outlineStyle":case r(s._0x3387e8):break;case"material":{toJSON(t,i);break}case"materialOptions":{i[e]=toJSONByType(i.materialType,t);break}case"color":{const o=getCesiumColor(t);o&&(i[e]=o[r(847)]());break}case"outlineColor":{const o=getCesiumColor(t);o&&(i[e]=o[r(s._0x448e0d)]());break}case"rotation":i.rotationDegree=formatNum$1(Cesium__namespace[r(s._0x22cafd)].toDegrees(t),2);break;case"stRotation":i.stRotationDegree=formatNum$1(Cesium__namespace.Math[r(3501)](t),2);break;case r(955):{t===Cesium__namespace.ShadowMode.ENABLED?i[r(s._0xe48127)]=!![]:i[e]=t;break}case r(2169):{i.distanceDisplayCondition_near=t[r(2657)],i.distanceDisplayCondition_far=t.far;break}default:logWarn("未处理的属性",e,t);break}}[_0x3a2b68(4108)](e,t,i){const s={_0x5dd16c:536,_0x557ac2:3999,_0x1fcd22:3714,_0x317edd:4004,_0x585536:3501,_0x3a6c04:3149,_0x2e1b23:4150},r=_0x3a2b68;switch(e){case"label":case"outlineStyle":case"highlight":break;case r(3793):{toJSON(t,i);break}case"materialOptions":{i[e]=toJSONByType(i.materialType,t);break}case"color":case r(3258):case"outlineColor":case r(s._0x5dd16c):case r(s._0x557ac2):{const o=getCesiumColor(t);o&&(i[e]=o.toCssColorString());break}case"heightReference":{t===Cesium__namespace[r(808)].CLAMP_TO_GROUND&&(i.clampToGround=!![]);break}case"rotation":i.rotationDegree=formatNum$1(Cesium__namespace.Math.toDegrees(t),2);break;case r(s._0x1fcd22):i[r(s._0x317edd)]=formatNum$1(Cesium__namespace.Math[r(s._0x585536)](t),2);break;case"disableDepthTestDistance":{t===Number.POSITIVE_INFINITY?i.visibleDepth=![]:i.disableDepthTestDistance=t;break}case"scaleByDistance":{i[r(s._0x3a6c04)]=!![],i.scaleByDistance_near=t.near,i.scaleByDistance_nearValue=t.nearValue,i.scaleByDistance_far=t.far,i[r(546)]=t[r(s._0x2e1b23)];break}case"distanceDisplayCondition":{i.distanceDisplayCondition=!![],i.distanceDisplayCondition_near=t.near,i.distanceDisplayCondition_far=t.far;break}default:logWarn(r(4021),e,t);break}}}class BillboardStyleConver extends BaseStyleConver{[_0x3a2b68(633)](){const e={_0x35abe8:2107},t=_0x3a2b68;return["outlineColor",t(536),"font_style",t(e._0x35abe8),"font_size","font_family","backgroundOpacity",t(2164),"outline"]}static toCesiumVal(e,t,i){const s={_0x553433:799,_0x30b0e5:1304},r=_0x3a2b68;return!this.billboardStyleConver&&(this.billboardStyleConver=new BillboardStyleConver),this.billboardStyleConver[r(s._0x553433)]=i,this.billboardStyleConver[r(s._0x30b0e5)](e,t)}_toCesiumValBefore(e,t){const i={_0x1d8b09:2145,_0x32593b:1618},s=_0x3a2b68;t[s(i._0x1d8b09)]=t.horizontalOrigin??Cesium__namespace.HorizontalOrigin[s(1333)],t[s(i._0x32593b)]=t.verticalOrigin??Cesium__namespace.HorizontalOrigin.BOTTOM}[_0x3a2b68(839)](e,t,i,s){const r={_0x46eef2:2540,_0x3622a4:2092,_0x1dd0b2:1948,_0x36a72d:1344,_0x376a97:2597,_0x3e29ee:2597,_0x180b12:407,_0x53ff59:1447},o=_0x3a2b68;switch(e){case o(r._0x46eef2):{s.color=this.getColorByStyle(i);break}case"opacity":Cesium__namespace.defined(i.globalAlpha)&&i.globalAlpha!==1?s.color=Cesium__namespace[o(2092)].WHITE.withAlpha(i[o(749)]*(t??1)):s.color=Cesium__namespace[o(r._0x3622a4)][o(r._0x1dd0b2)].withAlpha(t??1);break;case"rotationDegree":s[o(r._0x36a72d)]=Cesium__namespace.Math.toRadians(t);break;case o(2042):!t&&(s.pixelOffset=new Cesium__namespace.Cartesian2(0,0));break;case"pixelOffsetX":case o(r._0x376a97):s.pixelOffset=new Cesium__namespace.Cartesian2(i.pixelOffsetX||0,i[o(r._0x3e29ee)]||0);break;case o(3082):Cesium__namespace.defined(t[0])&&Cesium__namespace[o(r._0x180b12)](t[1])?s.pixelOffset=new Cesium__namespace[o(3532)](t[0],t[1]):s.pixelOffset=t;break;default:this[o(r._0x53ff59)](e,t,i,s);break}}static toJSON(e,t,i){const s={_0x138dfd:3425,_0x5985a8:1909},r=_0x3a2b68;return!this.billboardStyleConver&&(this[r(s._0x138dfd)]=new BillboardStyleConver),this.billboardStyleConver.isEntity=i,this.billboardStyleConver[r(s._0x5985a8)](e,t)}_toOneJson(e,t,i){const s={_0x34a054:2597},r=_0x3a2b68;switch(e){case"pixelOffset":{i.pixelOffsetX=t.x,i[r(s._0x34a054)]=t.y;break}default:this._toOneJson_Point(e,t,i);break}}}class CloudStyleConver extends BaseStyleConver{static[_0x3a2b68(1304)](e,t){const i=_0x3a2b68;return!this.cloudStyleConver&&(this.cloudStyleConver=new CloudStyleConver),this[i(1352)].toCesiumVal(e,t)}[_0x3a2b68(3111)](e,t){}_toOneCesiumVal(e,t,i,s){const r={_0xe05682:1207,_0x2b6a0c:3832,_0x25efbc:2367,_0x5fad05:1447},o=_0x3a2b68;switch(e){case"scaleX":case"scaleY":s.scale=new Cesium__namespace.Cartesian2(i.scaleX||1,i.scaleY||1);break;case"maximumSizeX":case o(2367):case o(r._0xe05682):s[o(r._0x2b6a0c)]=new Cesium__namespace.Cartesian3(i[o(2324)]||1,i[o(r._0x25efbc)]||1,i.maximumSizeZ||1);break;default:this[o(r._0x5fad05)](e,t,i,s);break}}static[_0x3a2b68(1909)](e,t){const i={_0x28e2f4:1352,_0x5e4604:1909},s=_0x3a2b68;return!this[s(1352)]&&(this[s(1352)]=new CloudStyleConver),this[s(i._0x28e2f4)][s(i._0x5e4604)](e,t)}_toOneJson(e,t,i){const s={_0x53e7b6:1683},r=_0x3a2b68;switch(e){case"scale":i[r(s._0x53e7b6)]=formatNum$1(t.x,2),i.scaleY=formatNum$1(t.y,2);break;case"maximumSize":i.maximumSizeX=formatNum$1(t.x,2),i.maximumSizeY=formatNum$1(t.y,2),i.maximumSizeZ=formatNum$1(t.z,2);break;default:this._toOneJson_Point(e,t,i);break}}}class BoxStyleConver extends BaseStyleConver{static toCesiumVal(e,t,i){const s=_0x3a2b68;return!this.boxStyleConver&&(this.boxStyleConver=new BoxStyleConver),this.boxStyleConver.isEntity=i,this[s(2485)].toCesiumVal(e,t)}[_0x3a2b68(633)](){return["opacity","dimensions_y","dimensions_z"]}[_0x3a2b68(839)](e,t,i,s){const r={_0xe34bc6:2978},o=_0x3a2b68;switch(e){case o(3559):{s[o(3559)]=this.getOutlineColorByStyle(i);break}case"dimensions_x":{const c=i.dimensions_x??100,_=i.dimensions_y??100,l=i.dimensions_z??100;s.dimensions=new Cesium__namespace[o(r._0xe34bc6)](c,_,l);break}default:this._toOneCesiumVal_Poly(e,t,i,s);break}}static toJSON(e,t,i){const s={_0x3eb665:2485},r=_0x3a2b68;return!this[r(s._0x3eb665)]&&(this[r(2485)]=new BoxStyleConver),this.boxStyleConver.isEntity=i,this.boxStyleConver.toJSON(e,t)}_toOneJson(e,t,i){const s=_0x3a2b68;switch(e){case s(2698):{i.dimensions_x=t.x,i.dimensions_y=t.y,i[s(559)]=t.z;break}default:this._toOneJson_Poly(e,t,i);break}}}class CircleStyleConver extends BaseStyleConver{static toCesiumVal(e,t,i){const s={_0xccf289:3876},r=_0x3a2b68;return!this.circleStyleConver&&(this.circleStyleConver=new CircleStyleConver),this.circleStyleConver.isEntity=i,this[r(s._0xccf289)].toCesiumVal(e,t)}_toCesiumValBefore(e,t){const i={_0xc4291c:407},s=_0x3a2b68;super._toCesiumValBefore(e,t),e.clampToGround&&(e.hasOwnProperty("height")&&delete e.height,e.hasOwnProperty("extrudedHeight")&&delete e[s(360)],e.hasOwnProperty("diffHeight")&&delete e.diffHeight),Cesium__namespace[s(i._0xc4291c)](e.height)&&(e.clampToGround=![])}_toOneCesiumVal(e,t,i,s){const r={_0x1be904:1344,_0x46c551:4241},o=_0x3a2b68;switch(e){case"rotation":s[o(r._0x1be904)]=t,!i.stRotation&&(s[o(3714)]=s.rotation);break;case"rotationDegree":s.rotation=Cesium__namespace.Math.toRadians(t),!i.stRotation&&(s.stRotation=s.rotation);break;case"stRotationDegree":s.stRotation=Cesium__namespace.Math.toRadians(t);break;case o(r._0x46c551):s.height=t,i.diffHeight&&(s.extrudedHeight=Number(i.diffHeight)+Number(t));break;case"diffHeight":Cesium__namespace[o(407)](i.height)&&(s.extrudedHeight=i.height+t);break;case"radius":this[o(799)]?(s.semiMinorAxis=Number(t),s.semiMajorAxis=Number(t)):s.radius=Number(t);break;case"clampToGround":t?s.heightReference=Cesium__namespace.HeightReference.CLAMP_TO_GROUND:s.heightReference=Cesium__namespace.HeightReference.NONE;break;default:this._toOneCesiumVal_Poly(e,t,i,s);break}}static toJSON(e,t,i){return!this.circleStyleConver&&(this.circleStyleConver=new CircleStyleConver),this.circleStyleConver.isEntity=i,this.circleStyleConver.toJSON(e,t)}_toOneJson(e,t,i){const s=_0x3a2b68;switch(e){case s(1344):{i[s(4360)]=formatNum$1(Cesium__namespace.Math.toDegrees(t),1);break}case"stRotation":{i.stRotationDegree=formatNum$1(Cesium__namespace.Math.toDegrees(t),1);break}default:this._toOneJson_Poly(e,t,i);break}}}class CorridorStyleConver extends BaseStyleConver{static[_0x3a2b68(1304)](e,t,i){const s={_0xffd8d9:4215},r=_0x3a2b68;return!this[r(4215)]&&(this.corridorStyleConver=new CorridorStyleConver),this.corridorStyleConver.isEntity=i,this[r(s._0xffd8d9)].toCesiumVal(e,t)}[_0x3a2b68(3111)](e,t){const i={_0x30be11:3111,_0x598e7d:3542,_0x15d46e:2139},s=_0x3a2b68;super[s(i._0x30be11)](e,t),e[s(i._0x598e7d)]&&(e.hasOwnProperty("height")&&delete e.height,e[s(i._0x15d46e)]("extrudedHeight")&&delete e.extrudedHeight,e[s(2139)]("diffHeight")&&delete e.diffHeight)}_toOneCesiumVal(e,t,i,s){const r={_0x4a83ec:4241},o=_0x3a2b68;switch(e){case"outlineColor":{s.outlineColor=this[o(3988)](i);break}case"height":s[o(r._0x4a83ec)]=t,i.diffHeight&&(s.extrudedHeight=Number(i[o(1882)])+Number(t));break;case"diffHeight":Cesium__namespace[o(407)](i.height)&&(s[o(360)]=i.height+t);break;default:this._toOneCesiumVal_Poly(e,t,i,s);break}}static toJSON(e,t,i){const s=_0x3a2b68;return!this.corridorStyleConver&&(this[s(4215)]=new CorridorStyleConver),this[s(4215)].isEntity=i,this[s(4215)].toJSON(e,t)}[_0x3a2b68(1791)](e,t,i){this._toOneJson_Poly(e,t,i)}}class CylinderStyleConver extends BaseStyleConver{static toCesiumVal(e,t,i){const s={_0x36d8eb:1304},r=_0x3a2b68;return!this[r(3048)]&&(this.cylinderStyleConver=new CylinderStyleConver),this.cylinderStyleConver.isEntity=i,this[r(3048)][r(s._0x36d8eb)](e,t)}[_0x3a2b68(3111)](e,t){super._toCesiumValBefore(e,t),!e.topRadius&&(e.topRadius=0)}_toOneCesiumVal(e,t,i,s){const r={_0x41ae09:2191},o=_0x3a2b68;switch(e){case o(1882):s.length instanceof Cesium__namespace[o(r._0x41ae09)]||(s[o(400)]=Number(t));break;default:this[o(3297)](e,t,i,s);break}}static[_0x3a2b68(1909)](e,t,i){const s={_0x28fd4f:799},r=_0x3a2b68;return!this.cylinderStyleConver&&(this.cylinderStyleConver=new CylinderStyleConver),this.cylinderStyleConver[r(s._0x28fd4f)]=i,this.cylinderStyleConver.toJSON(e,t)}[_0x3a2b68(1791)](e,t,i){this._toOneJson_Poly(e,t,i)}}class DivGraphicStyleConver extends BaseStyleConver{static[_0x3a2b68(1304)](e,t){const i=_0x3a2b68;return!this.divGraphicStyleConver&&(this.divGraphicStyleConver=new DivGraphicStyleConver),this[i(2564)][i(1304)](e,t)}_toCesiumValBefore(e,t){}_toOneCesiumVal(e,t,i,s){this._toOneCesiumVal_Point(e,t,i,s)}static[_0x3a2b68(1909)](e,t){const i={_0x229eba:1909},s=_0x3a2b68;return!this.divGraphicStyleConver&&(this.divGraphicStyleConver=new DivGraphicStyleConver),this.divGraphicStyleConver[s(i._0x229eba)](e,t)}[_0x3a2b68(1791)](e,t,i){this[_0x3a2b68(4108)](e,t,i)}}class EllipsoidStyleConver extends BaseStyleConver{static toCesiumVal(e,t,i){const s={_0x307230:2056},r=_0x3a2b68;return!this.ellipsoidStyleConver&&(this.ellipsoidStyleConver=new EllipsoidStyleConver),this.ellipsoidStyleConver[r(799)]=i,this[r(s._0x307230)].toCesiumVal(e,t)}_toCesiumValBefore(e,t){super._toCesiumValBefore(e,t)}[_0x3a2b68(633)](){return["radii_y","radii_z","innerRadii_y","innerRadii_z"]}[_0x3a2b68(839)](e,t,i,s){const r={_0x492516:830,_0x59dfed:2806,_0x492beb:3297},o=_0x3a2b68;switch(e){case"radii":s.radii=new Cesium__namespace.Cartesian3(t,t,t);break;case o(1891):s[o(718)]=new Cesium__namespace.Cartesian3(i[o(1891)]??100,i.radii_y??100,i[o(569)]??100);break;case"innerRadii":s.innerRadii=new Cesium__namespace.Cartesian3(t,t,t);break;case"innerRadii_x":i.innerRadii_x>0&&i.innerRadii_y>0&&i.innerRadii_z>0?s.innerRadii=new Cesium__namespace.Cartesian3(i.innerRadii_x??0,i[o(r._0x492516)]??0,i.innerRadii_z??0):s.innerRadii=new Cesium__namespace.Cartesian3(.001,.001,.001);break;case o(3271):case"maximumClockDegree":case"minimumConeDegree":case"maximumConeDegree":s[e.replace("Degree","")]=Cesium__namespace[o(r._0x59dfed)].toRadians(t||0);break;default:this[o(r._0x492beb)](e,t,i,s);break}}static toJSON(e,t,i){const s={_0x98b0c3:2056,_0x25d7c1:799},r=_0x3a2b68;return!this.ellipsoidStyleConver&&(this.ellipsoidStyleConver=new EllipsoidStyleConver),this[r(s._0x98b0c3)][r(s._0x25d7c1)]=i,this[r(2056)].toJSON(e,t)}[_0x3a2b68(1791)](e,t,i){const s={_0x4f0db7:718,_0x5988f5:479,_0x3eb649:1888,_0x4352da:4391},r=_0x3a2b68;switch(e){case r(s._0x4f0db7):{i.radii_x=t.x,i[r(4368)]=t.y,i.radii_z=t.z;break}case r(s._0x5988f5):{i.innerRadii_x=t.x,i.innerRadii_y=t.y,i.innerRadii_z=t.z;break}case r(s._0x3eb649):case"maximumClock":case r(s._0x4352da):case r(2400):i[e+"Degree"]=formatNum$1(Cesium__namespace.Math.toDegrees(t),2);break;default:this._toOneJson_Poly(e,t,i);break}}}class LabelStyleConver extends BaseStyleConver{static toCesiumVal(e,t,i){const s={_0x3632bc:753,_0x5b9c00:1304},r=_0x3a2b68;return!this.labelStyleConver&&(this[r(s._0x3632bc)]=new LabelStyleConver),this.labelStyleConver[r(3208)]=i,t=this.labelStyleConver[r(s._0x5b9c00)](e,t),t}_toCesiumValBefore(e,t){const i=_0x3a2b68;t.horizontalOrigin=t.horizontalOrigin??Cesium__namespace.HorizontalOrigin[i(1333)],t.verticalOrigin=t.verticalOrigin??Cesium__namespace[i(2014)][i(3795)]}_toCesiumValEnd(e,t){const i={_0x1bbfd3:3482,_0x22af6f:2164,_0x53a35b:2748},s=_0x3a2b68;!Cesium__namespace.defined(e.font)&&(t.font=(e[s(3331)]||"")+" "+(e[s(2107)]||"")+" "+(e.font_size||18)+"px  "+(e[s(3338)]||s(i._0x1bbfd3))),!Cesium__namespace[s(407)](e.style)&&(e[s(i._0x22af6f)]??!![])&&(e.outline?t.style=Cesium__namespace.LabelStyle.FILL_AND_OUTLINE:t[s(i._0x53a35b)]=Cesium__namespace.LabelStyle.FILL)}[_0x3a2b68(633)](){const e={_0x587bd6:2107,_0x1de4e6:3338},t=_0x3a2b68;return["font_style",t(e._0x587bd6),"font_size",t(e._0x1de4e6),"backgroundOpacity","fill"]}[_0x3a2b68(839)](e,t,i,s){const r={_0x3ef25a:2250,_0x46a1e2:3452,_0x202cf7:3082,_0x31ff78:3532,_0x5300d6:1980,_0x4e449e:1447},o=_0x3a2b68;switch(e){case"text":{this.attr&&(t=template(t,this.attr,i.templateEmptyStr??!![])),s.text=String(t||"").replace(/<br \/>/gm,`
`);break}case"color":{s.fillColor=this.getColorByStyle(i);break}case o(3559):{s.outlineColor=this.getOutlineColorByStyle(i);break}case"strokeColor":case"fillColor":{s[e]=getCesiumColor(t);break}case"background":s.background=t,s[o(r._0x3ef25a)]=t;break;case"backgroundColor":{let c=getCesiumColor(t,Cesium__namespace.Color.BLACK);Cesium__namespace.defined(i.backgroundOpacity)?c=c.withAlpha(Number(i.backgroundOpacity)):Cesium__namespace.defined(i[o(3248)])&&(c=c.withAlpha(Number(i[o(3248)]))),s.backgroundColor=c;break}case o(r._0x46a1e2):s.backgroundPadding=new Cesium__namespace[o(3532)](t*1.2,t),s[o(578)]=t;break;case"hasPixelOffset":!t&&(s[o(r._0x202cf7)]=new Cesium__namespace[o(r._0x31ff78)](0,0));break;case o(r._0x5300d6):case"pixelOffsetY":s[o(3082)]=new Cesium__namespace.Cartesian2(i.pixelOffsetX||0,i.pixelOffsetY||0);break;case"pixelOffset":Cesium__namespace.defined(t[0])&&Cesium__namespace.defined(t[1])?s.pixelOffset=new Cesium__namespace[o(3532)](t[0],t[1]):s[o(3082)]=t;break;default:this[o(r._0x4e449e)](e,t,i,s);break}}static[_0x3a2b68(1909)](e,t){return!this.labelStyleConver&&(this.labelStyleConver=new LabelStyleConver),this.labelStyleConver.toJSON(e,t)}_toOneJson(e,t,i){const s={_0x3a5df8:508},r=_0x3a2b68;switch(e){case"pixelOffset":{i.pixelOffsetX=t.x,i.pixelOffsetY=t.y;break}case r(s._0x3a5df8):{t===Number.POSITIVE_INFINITY?i.visibleDepth=![]:i[r(508)]=t;break}default:this._toOneJson_Point(e,t,i);break}}static setOpacity(e,t){const i={_0x2a702c:1310,_0xfd49b5:3258,_0x5d3c89:1948,_0x516163:407,_0x3bb3cb:838},s=_0x3a2b68,r=getCesiumValue(e.fillColor,Cesium__namespace.Color);r?(!Cesium__namespace.defined(e._fillColor_alpha_bak)&&(e[s(i._0x2a702c)]=r.alpha??1),e[s(i._0xfd49b5)]=r[s(747)](t*e[s(1310)])):e[s(3258)]=Cesium__namespace.Color[s(i._0x5d3c89)].withAlpha(t);const o=getCesiumValue(e.outlineColor,Cesium__namespace.Color);o&&(!Cesium__namespace[s(i._0x516163)](e._outlineColor_alpha_bak)&&(e._outlineColor_alpha_bak=o[s(i._0x3bb3cb)]??1),e[s(3559)]=o.withAlpha(t*e._outlineColor_alpha_bak));const c=getCesiumValue(e.backgroundColor,Cesium__namespace.Color);c&&(!Cesium__namespace[s(407)](e._backgroundColor_alpha_bak)&&(e._backgroundColor_alpha_bak=c[s(838)]??1),e.backgroundColor=c.withAlpha(t*e._backgroundColor_alpha_bak))}}class ModelStyleConver extends BaseStyleConver{static toCesiumVal(e,t,i){const s={_0x407d4d:3415,_0x10b5a0:1304},r=_0x3a2b68;return!this[r(3415)]&&(this[r(s._0x407d4d)]=new ModelStyleConver),this.modelStyleConver.isEntity=i,this.modelStyleConver[r(s._0x10b5a0)](e,t)}[_0x3a2b68(3111)](e,t){}_getExcludedStyle(){return["silhouette","silhouetteColor","silhouetteAlpha","silhouetteSize","fill","opacity"]}_toOneCesiumVal(e,t,i,s){const r={_0x1a9aaf:588,_0x26a78d:826},o=_0x3a2b68;switch(e){case o(4023):case o(2975):case"uri":t=replaceOnlineUrlDomain({url:t}).url,this.isEntity?s[o(r._0x1a9aaf)]=t:s.url=t;break;case o(r._0x26a78d):!isNaN(t)&&(s[e]=t);break;default:this[o(1447)](e,t,i,s);break}}_toCesiumValEnd(e,t){const i={_0x1b5748:442,_0x147646:588,_0x35934e:2092,_0x2e42a5:3248,_0x1b94a7:2092,_0x136c1a:747},s=_0x3a2b68;if(t[s(i._0x1b5748)]=!!(t[s(i._0x147646)]||t.url),e.fill?t.color=getColorByStyle(e,Cesium__namespace[s(i._0x35934e)].WHITE):Cesium__namespace.defined(e[s(i._0x2e42a5)])&&e.opacity!==1?t.color=Cesium__namespace[s(i._0x1b94a7)][s(1948)][s(i._0x136c1a)](e[s(3248)]):t.color=Cesium__namespace.Color.WHITE,e.silhouette){let r=getCesiumColor(e.silhouetteColor,Cesium__namespace.Color.WHITE);Cesium__namespace.defined(e.silhouetteAlpha)&&(r=r.withAlpha(Number(e[s(3071)]))),Cesium__namespace.defined(e.globalAlpha)&&e[s(749)]!==1&&(r=r.withAlpha(r.alpha*e[s(749)])),t.silhouetteColor=r,t.silhouetteSize=Number(e.silhouetteSize||1)}else t.silhouetteColor=void 0,t.silhouetteSize=0}static toJSON(e,t,i){const s={_0x35b8c9:3415},r=_0x3a2b68;return!this[r(3415)]&&(this[r(s._0x35b8c9)]=new ModelStyleConver),this.modelStyleConver.isEntity=i,this.modelStyleConver.toJSON(e,t)}[_0x3a2b68(1791)](e,t,i){const s={_0x2c8f37:588},r=_0x3a2b68;switch(e){case r(s._0x2c8f37):{i.url=t;break}default:this._toOneJson_Point(e,t,i);break}}static setOpacity(e,t){const i={_0x94611f:457,_0x40fd3d:785},s=_0x3a2b68,r=getCesiumValue(e.color,Cesium__namespace.Color);!Cesium__namespace.defined(e._color_alpha_bak)&&(e[s(457)]=(r==null?void 0:r.alpha)??1),r?e.color=r.withAlpha(t*e[s(i._0x94611f)]):e.color=Cesium__namespace.Color.WHITE[s(747)](t);const o=getCesiumValue(e.silhouetteColor,Cesium__namespace.Color);o&&(!Cesium__namespace[s(407)](e[s(i._0x40fd3d)])&&(e._silhouetteColor_alpha_bak=o.alpha??1),e[s(3284)]=o.withAlpha(t*e._silhouetteColor_alpha_bak))}}class PathStyleConver extends BaseStyleConver{static toCesiumVal(e,t,i){return!this.pathStyleConver&&(this.pathStyleConver=new PathStyleConver),this.pathStyleConver.isEntity=i,this.pathStyleConver.toCesiumVal(e,t)}_toOneCesiumVal(e,t,i,s){this._toOneCesiumVal_Poly(e,t,i,s)}static[_0x3a2b68(1909)](e,t,i){const s=_0x3a2b68;return!this.pathStyleConver&&(this[s(1020)]=new PathStyleConver),this.pathStyleConver.isEntity=i,this.pathStyleConver.toJSON(e,t)}_toOneJson(e,t,i){this[_0x3a2b68(1099)](e,t,i)}}class PlaneStyleConver extends BaseStyleConver{static[_0x3a2b68(1304)](e,t,i){const s={_0x487c39:1815,_0x4478c2:1815},r=_0x3a2b68;return!this[r(s._0x487c39)]&&(this[r(1815)]=new PlaneStyleConver),this[r(s._0x487c39)].isEntity=i,this[r(s._0x4478c2)].toCesiumVal(e,t)}_toCesiumValBefore(e,t){super._toCesiumValBefore(e,t)}[_0x3a2b68(839)](e,t,i,s){const r=_0x3a2b68;switch(e){case"dimensions_x":{const o=i.dimensions_x??100,c=i.dimensions_y??100;s.dimensions=new Cesium__namespace.Cartesian2(o,c);break}case"plane_normal":{let o;switch(t){case"x":o=Cesium__namespace.Cartesian3.UNIT_X;break;case"y":o=Cesium__namespace[r(2978)].UNIT_Y;break;case"z":o=Cesium__namespace.Cartesian3.UNIT_Z;break;default:o=t;break}const c=i.plane_distance??0;s.plane=new Cesium__namespace.Plane(o,c);break}default:this._toOneCesiumVal_Poly(e,t,i,s);break}}static toJSON(e,t,i){const s=_0x3a2b68;return!this.planeStyleConver&&(this.planeStyleConver=new PlaneStyleConver),this[s(1815)].isEntity=i,this.planeStyleConver.toJSON(e,t)}static toOneJson(e,t,i){const s=_0x3a2b68;return!this[s(1815)]&&(this.planeStyleConver=new PlaneStyleConver),this[s(1815)]._toOneJson(e,t,i)}_toOneJson(e,t,i){const s={_0x3418a3:3252,_0x404b3d:494,_0xf09c8e:2932,_0x518bd0:1099},r=_0x3a2b68;switch(e){case"dimensions":{i.dimensions_x=t.x,i.dimensions_y=t.y;break}case r(s._0x3418a3):{t[r(s._0x404b3d)](Cesium__namespace.Cartesian3.UNIT_X)?i.plane_normal="x":t[r(494)](Cesium__namespace.Cartesian3.UNIT_Y)?i.plane_normal="y":(t[r(494)](Cesium__namespace.Cartesian3[r(1604)])||logWarn("plane类型未识别",t),i.plane_normal="z");break}case"plane":{t.normal.equals(Cesium__namespace.Cartesian3.UNIT_X)?i.plane_normal="x":t.normal[r(s._0x404b3d)](Cesium__namespace.Cartesian3[r(4071)])?i.plane_normal="y":(t.normal.equals(Cesium__namespace.Cartesian3.UNIT_Z)||logWarn(r(2212),t),i.plane_normal="z"),i[r(s._0xf09c8e)]=t.distance;break}default:this[r(s._0x518bd0)](e,t,i);break}}}class PointStyleConver extends BaseStyleConver{static toCesiumVal(e,t,i){return!this.pointStyleConver&&(this.pointStyleConver=new PointStyleConver),this.pointStyleConver.isEntity=i,this.pointStyleConver.toCesiumVal(e,t)}_toCesiumValBefore(e,t){t.pixelSize=6}_toCesiumValEnd(e,t){e[_0x3a2b68(1582)]===![]&&(t.outlineWidth=0)}_toOneCesiumVal(e,t,i,s){const r={_0x456c65:2540,_0x34674c:3988},o=_0x3a2b68;switch(e){case o(r._0x456c65):case"randomColor":{s.color=this.getColorByStyle(i);break}case"outlineColor":{s.outlineColor=this[o(r._0x34674c)](i);break}default:this[o(1447)](e,t,i,s);break}}static toJSON(e,t,i){const s={_0x28b3e2:799,_0x4a7f50:444},r=_0x3a2b68;return!this.pointStyleConver&&(this.pointStyleConver=new PointStyleConver),this.pointStyleConver[r(s._0x28b3e2)]=i,this[r(s._0x4a7f50)].toJSON(e,t)}_toOneJson(e,t,i){this._toOneJson_Point(e,t,i)}}class PolygonStyleConver extends BaseStyleConver{static toCesiumVal(e,t,i){const s={_0x3a8754:1092},r=_0x3a2b68;return!this.polygonStyleConver&&(this.polygonStyleConver=new PolygonStyleConver),this[r(s._0x3a8754)].isEntity=i,this[r(1092)].toCesiumVal(e,t)}[_0x3a2b68(3111)](e,t){const i={_0x11db67:3542,_0xe238d2:360},s=_0x3a2b68;super._toCesiumValBefore(e,t),e[s(i._0x11db67)]?(t.arcType=Cesium__namespace.ArcType.GEODESIC,e.hasOwnProperty("height")&&delete e.height,e.hasOwnProperty("diffHeight")&&delete e.diffHeight,e[s(2139)]("extrudedHeight")&&delete e[s(i._0xe238d2)]):Cesium__namespace.defined(e.height)?(e.clampToGround=![],t.perPositionHeight=![]):(e.clampToGround=![],t.perPositionHeight=!![])}_toOneCesiumVal(e,t,i,s){const r={_0x4a2c98:1185},o=_0x3a2b68;switch(e){case"outlineColor":{s[o(3559)]=this.getOutlineColorByStyle(i);break}case"height":{s[e]=t,s.perPositionHeight=![];break}case o(1882):{Cesium__namespace.defined(i.height)&&(s.extrudedHeight=i.height+t);break}case"clampToGround":s[e]=t,s.perPositionHeight=!t&&!Cesium__namespace.defined(i.height);break;case"stRotation":s.stRotation=t;break;case"stRotationDegree":s.stRotation=Cesium__namespace.Math[o(r._0x4a2c98)](t);break;default:this._toOneCesiumVal_Poly(e,t,i,s);break}}static toJSON(e,t,i){const s={_0x5cef80:1092},r=_0x3a2b68;return!this[r(s._0x5cef80)]&&(this.polygonStyleConver=new PolygonStyleConver),this.polygonStyleConver.isEntity=i,this.polygonStyleConver[r(1909)](e,t)}_toOneJson(e,t,i){const s=_0x3a2b68;switch(e){case"stRotation":{i.stRotationDegree=formatNum$1(Cesium__namespace.Math.toDegrees(t),1);break}default:this[s(1099)](e,t,i);break}}}class PolylineStyleConver extends BaseStyleConver{static toCesiumVal(e,t,i){return!this[_0x3a2b68({_0x3fd4a2:3355}._0x3fd4a2)]&&(this.polylineStyleConver=new PolylineStyleConver),this.polylineStyleConver.isEntity=i,this.polylineStyleConver.toCesiumVal(e,t)}_toCesiumValBefore(e,t){const i=_0x3a2b68;super._toCesiumValBefore(e,t),e.clampToGround&&(t.arcType=Cesium__namespace.ArcType.GEODESIC),e.materialType===Color$2&&e.outline&&e.outlineColor&&(e[i(4089)]=PolylineOutline)}_toOneCesiumVal(e,t,i,s){const r={_0x2f2b6d:1478,_0x59bb6:747,_0x5f3d0a:3248},o=_0x3a2b68;switch(e){case"depthFail":if(t){let c=getCesiumColor(i[o(r._0x2f2b6d)]||i.color,Cesium__namespace.Color.YELLOW);Cesium__namespace.defined(i.depthFailOpacity)&&(c=c[o(r._0x59bb6)](Number(i.depthFailOpacity))),this.isEntity?s.depthFailMaterial=c:s.depthFailColor=c,i.opacity===1&&(i[o(r._0x5f3d0a)]=.98)}else s.depthFailMaterial=void 0;s[e]=t;break;case"closure":!this.isEntity&&(s.loop=t),s.closure=t;break;default:this._toOneCesiumVal_Poly(e,t,i,s);break}}static toJSON(e,t,i){const s=_0x3a2b68;return!this.polylineStyleConver&&(this.polylineStyleConver=new PolylineStyleConver),this[s(3355)].isEntity=i,this.polylineStyleConver[s(1909)](e,t)}_toOneJson(e,t,i){switch(e){case"loop":i.closure=t;break;default:this._toOneJson_Poly(e,t,i);break}}}class PolylineVolumeStyleConver extends BaseStyleConver{static toCesiumVal(e,t,i){const s=_0x3a2b68;return!this.polylineVolumeStyleConver&&(this.polylineVolumeStyleConver=new PolylineVolumeStyleConver),this.polylineVolumeStyleConver[s(799)]=i,this[s(1865)].toCesiumVal(e,t)}[_0x3a2b68(3295)](e,t){const i={_0x1d4604:3901,_0x46d2f1:3878,_0x25e6a9:2240,_0x832d21:3901},s=_0x3a2b68,r=e[s(i._0x1d4604)]||e.shapePositions;switch(e[s(i._0x46d2f1)]=e.radius||10,r){case s(i._0x25e6a9):t.shape=PolylineVolumeStyleConver.getShapeForPipeline(e);break;case"circle":t.shape=PolylineVolumeStyleConver.getShapeForCircle(e);break;case s(376):t.shape=PolylineVolumeStyleConver[s(1061)](e);break;default:t[s(i._0x832d21)]=r;break}}[_0x3a2b68(839)](e,t,i,s){this._toOneCesiumVal_Poly(e,t,i,s)}static[_0x3a2b68(1909)](e,t,i){const s={_0x1d20f1:1865,_0x327c44:799},r=_0x3a2b68;return!this.polylineVolumeStyleConver&&(this.polylineVolumeStyleConver=new PolylineVolumeStyleConver),this[r(s._0x1d20f1)][r(s._0x327c44)]=i,this.polylineVolumeStyleConver.toJSON(e,t)}_toOneJson(e,t,i){this._toOneJson_Poly(e,t,i)}static getShapeForPipeline(e){const t={_0x223622:2806},i=_0x3a2b68,s=e.radius??1,r=e[i(2823)]??s/3,o=Math.ceil(360/(e[i(2189)]??60)),c=e.startAngle??0,_=e[i(2217)]??c+360,l=e.vscale??1,d=e[i(2392)]??1,f=[];for(let g=c;g<=_;g+=o){const b=Cesium__namespace[i(2806)][i(1185)](g);f.push(new Cesium__namespace.Cartesian2(s*d*Math.cos(b),s*l*Math[i(3492)](b)))}for(let g=_;g>=c;g-=o){const b=Cesium__namespace[i(t._0x223622)][i(1185)](g);f.push(new Cesium__namespace.Cartesian2((s-r)*d*Math.cos(b),(s-r)*l*Math.sin(b)))}return f}static getShapeForCircle(e){const t={_0x8693a:2404,_0x5b75f7:2217,_0x1eda6b:1754},i=_0x3a2b68,s=e[i(3878)]??1,r=Math.ceil(360/(e.slices??60)),o=e[i(t._0x8693a)]??0,c=e[i(t._0x5b75f7)]??o+360,_=e[i(3898)]??1,l=e.hscale??1,d=[];for(let f=o;f<=c;f+=r){const g=Cesium__namespace.Math.toRadians(f);d[i(t._0x1eda6b)](new Cesium__namespace.Cartesian2(s*l*Math.cos(g),s*_*Math[i(3492)](g)))}return d}static[_0x3a2b68(1061)](e){const t=_0x3a2b68,i=e.radius??1,s=i-(e.thicknes??i/3),r=e.slices??6,o=Cesium__namespace[t(2806)][t(1185)](e.startAngle??0),c=Math.PI/r,_=2*r,l=new Array(_);for(let d=0;d<_;d++){const f=d%2===0?i:s,g=o+d*c;l[d]=new Cesium__namespace.Cartesian2(Math.cos(g)*f,Math.sin(g)*f)}return l}}class RectangleStyleConver extends BaseStyleConver{static toCesiumVal(e,t,i){const s={_0x5c5af9:799,_0x100b39:1304},r=_0x3a2b68;return!this.rectangleStyleConver&&(this.rectangleStyleConver=new RectangleStyleConver),this.rectangleStyleConver[r(s._0x5c5af9)]=i,this[r(2928)][r(s._0x100b39)](e,t)}_toCesiumValBefore(e,t){const i={_0x19cc17:3542},s=_0x3a2b68;super._toCesiumValBefore(e,t),e[s(3542)]?(e.hasOwnProperty(s(4241))&&delete e.height,e[s(2139)]("diffHeight")&&delete e.diffHeight,e.hasOwnProperty("extrudedHeight")&&delete e.extrudedHeight):(e[s(i._0x19cc17)]=![],t.height=0)}[_0x3a2b68(839)](e,t,i,s){const r={_0x1312f3:4241,_0x3be3ef:1882,_0x1680dd:407,_0x1de39c:808,_0x2e7b1f:4280,_0x4db5cd:3297},o=_0x3a2b68;switch(e){case"height":s[o(r._0x1312f3)]=t,i[o(r._0x3be3ef)]&&(s.extrudedHeight=Number(i.diffHeight)+Number(t));break;case"diffHeight":Cesium__namespace[o(r._0x1680dd)](i[o(4241)])&&(s.extrudedHeight=i.height+t);break;case"rotation":s.rotation=t,!i.stRotation&&(s.stRotation=s.rotation);break;case"rotationDegree":s.rotation=Cesium__namespace.Math[o(1185)](t),!i.stRotation&&(s[o(3714)]=s.rotation);break;case"stRotation":s.stRotation=t;break;case"stRotationDegree":s.stRotation=Cesium__namespace.Math.toRadians(t);break;case"clampToGround":t?s.heightReference=Cesium__namespace[o(r._0x1de39c)].CLAMP_TO_GROUND:s[o(3868)]=Cesium__namespace.HeightReference[o(r._0x2e7b1f)];break;default:this[o(r._0x4db5cd)](e,t,i,s);break}}static[_0x3a2b68(1909)](e,t,i){const s={_0x2d9a68:2928},r=_0x3a2b68;return!this.rectangleStyleConver&&(this[r(s._0x2d9a68)]=new RectangleStyleConver),this.rectangleStyleConver.isEntity=i,this.rectangleStyleConver[r(1909)](e,t)}[_0x3a2b68(1791)](e,t,i){this._toOneJson_Poly(e,t,i)}}class RectangularSensorStyleConver extends BaseStyleConver{static[_0x3a2b68(1304)](e,t){return!this.rectangularSensorStyleConver&&(this.rectangularSensorStyleConver=new RectangularSensorStyleConver),this.rectangularSensorStyleConver.isEntity=!![],this.rectangularSensorStyleConver.toCesiumVal(e,t)}[_0x3a2b68(3111)](e,t){super._toCesiumValBefore(e,t)}[_0x3a2b68(633)](){return["lineOpacity",_0x3a2b68(4306)]}_toOneCesiumVal(e,t,i,s){const r={_0x344a39:407,_0x52eb77:749,_0x2d9b67:4077,_0x407866:721,_0x560af8:2806,_0x757b91:1185},o=_0x3a2b68;switch(e){case"lineColor":{let c=Cesium__namespace.Color.fromCssColorString(t||"#ffffff");Cesium__namespace.defined(i[o(3129)])?c=c.withAlpha(Number(i[o(3129)])):Cesium__namespace.defined(i.opacity)&&(c=c.withAlpha(Number(i[o(3248)]))),Cesium__namespace[o(r._0x344a39)](i[o(r._0x52eb77)])&&i.globalAlpha!==1&&(c=c[o(747)](c.alpha*i.globalAlpha)),s[o(1616)]=c;break}case"scanPlaneColor":{let c=Cesium__namespace.Color.fromCssColorString(t||"#ffffff");Cesium__namespace[o(407)](i.scanPlaneOpacity)?c=c.withAlpha(Number(i.scanPlaneOpacity)):Cesium__namespace.defined(i.opacity)&&(c=c.withAlpha(Number(i.opacity))),Cesium__namespace.defined(i.globalAlpha)&&i[o(r._0x52eb77)]!==1&&(c=c.withAlpha(c.alpha*i[o(r._0x52eb77)])),s[o(3918)]=c;break}case o(1747):s[o(r._0x2d9b67)]=Cesium__namespace[o(2806)].toRadians(t);break;case"yHalfAngleDegree":s[o(r._0x407866)]=Cesium__namespace[o(r._0x560af8)][o(r._0x757b91)](t);break;case"depthTest":s[o(3989)]=!t;break;default:this._toOneCesiumVal_Poly(e,t,i,s);break}}static toJSON(e,t){return!this.rectangularSensorStyleConver&&(this.rectangularSensorStyleConver=new RectangularSensorStyleConver),this.rectangularSensorStyleConver.isEntity=!![],this.rectangularSensorStyleConver.toJSON(e,t)}_toOneJson(e,t,i){this[_0x3a2b68({_0x2ccf2a:1099}._0x2ccf2a)](e,t,i)}}class WallStyleConver extends BaseStyleConver{static[_0x3a2b68(1304)](e,t,i){const s=_0x3a2b68;return!this.wallStyleConver&&(this.wallStyleConver=new WallStyleConver),this[s(3545)].isEntity=i,this.wallStyleConver.toCesiumVal(e,t)}_toOneCesiumVal(e,t,i,s){this[_0x3a2b68(3297)](e,t,i,s)}static toJSON(e,t,i){return!this.wallStyleConver&&(this.wallStyleConver=new WallStyleConver),this.wallStyleConver.isEntity=i,this.wallStyleConver.toJSON(e,t)}[_0x3a2b68(1791)](e,t,i){this._toOneJson_Poly(e,t,i)}}var czm_cellular=_0x3a2b68(3652),czm_snoise=`/**
 * @license
 * Description : Array and textureless GLSL 2D/3D/4D simplex
 *               noise functions.
 *      Author : Ian McEwan, Ashima Arts.
 *  Maintainer : ijm
 *     Lastmod : 20110822 (ijm)
 *     License : Copyright (C) 2011 Ashima Arts. All rights reserved.
 *               Distributed under the MIT License. See LICENSE file.
 *               https://github.com/ashima/webgl-noise
 */

vec4 _czm_mod289(vec4 x) {
  return x - floor(x * (1.0 / 289.0)) * 289.0;
}

vec3 _czm_mod289(vec3 x) {
  return x - floor(x * (1.0 / 289.0)) * 289.0;
}

vec2 _czm_mod289(vec2 x) {
  return x - floor(x * (1.0 / 289.0)) * 289.0;
}

float _czm_mod289(float x) {
  return x - floor(x * (1.0 / 289.0)) * 289.0;
}

vec4 _czm_permute(vec4 x) {
  return _czm_mod289(((x * 34.0) + 1.0) * x);
}

vec3 _czm_permute(vec3 x) {
  return _czm_mod289(((x * 34.0) + 1.0) * x);
}

float _czm_permute(float x) {
  return _czm_mod289(((x * 34.0) + 1.0) * x);
}

vec4 _czm_taylorInvSqrt(vec4 r) {
  return 1.79284291400159 - 0.85373472095314 * r;
}

float _czm_taylorInvSqrt(float r) {
  return 1.79284291400159 - 0.85373472095314 * r;
}

vec4 _czm_grad4(float j, vec4 ip) {
  const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);
  vec4 p, s;

  p.xyz = floor(fract(vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;
  p.w = 1.5 - dot(abs(p.xyz), ones.xyz);
  s = vec4(lessThan(p, vec4(0.0)));
  p.xyz = p.xyz + (s.xyz * 2.0 - 1.0) * s.www;

  return p;
}

/**
 * DOC_TBA
 *
 * Implemented by Ian McEwan, Ashima Arts, and distributed under the MIT License.  {@link https://github.com/ashima/webgl-noise}
 *
 * @name czm_snoise
 * @glslFunction
 *
 * @see <a href="https://github.com/ashima/webgl-noise">https://github.com/ashima/webgl-noise</a>
 * @see Stefan Gustavson's paper <a href="http://www.itn.liu.se/~stegu/simplexnoise/simplexnoise.pdf">Simplex noise demystified</a>
 */
float czm_snoise(vec2 v) {
  const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0
  0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)
  -0.577350269189626,  // -1.0 + 2.0 * C.x
  0.024390243902439); // 1.0 / 41.0
    // First corner
  vec2 i = floor(v + dot(v, C.yy));
  vec2 x0 = v - i + dot(i, C.xx);

    // Other corners
  vec2 i1;
    //i1.x = step( x0.y, x0.x ); // x0.x > x0.y ? 1.0 : 0.0
    //i1.y = 1.0 - i1.x;
  i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);
    // x0 = x0 - 0.0 + 0.0 * C.xx ;
    // x1 = x0 - i1 + 1.0 * C.xx ;
    // x2 = x0 - 1.0 + 2.0 * C.xx ;
  vec4 x12 = x0.xyxy + C.xxzz;
  x12.xy -= i1;

    // Permutations
  i = _czm_mod289(i); // Avoid truncation effects in permutation
  vec3 p = _czm_permute(_czm_permute(i.y + vec3(0.0, i1.y, 1.0)) + i.x + vec3(0.0, i1.x, 1.0));

  vec3 m = max(0.5 - vec3(dot(x0, x0), dot(x12.xy, x12.xy), dot(x12.zw, x12.zw)), 0.0);
  m = m * m;
  m = m * m;

    // Gradients: 41 points uniformly over a line, mapped onto a diamond.
    // The ring size 17*17 = 289 is close to a multiple of 41 (41*7 = 287)
  vec3 x = 2.0 * fract(p * C.www) - 1.0;
  vec3 h = abs(x) - 0.5;
  vec3 ox = floor(x + 0.5);
  vec3 a0 = x - ox;

    // Normalise gradients implicitly by scaling m
    // Approximation of: m *= inversesqrt( a0*a0 + h*h );
  m *= 1.79284291400159 - 0.85373472095314 * (a0 * a0 + h * h);

    // Compute final noise value at P
  vec3 g;
  g.x = a0.x * x0.x + h.x * x0.y;
  g.yz = a0.yz * x12.xz + h.yz * x12.yw;
  return 130.0 * dot(m, g);
}

float czm_snoise(vec3 v) {
  const vec2 C = vec2(1.0 / 6.0, 1.0 / 3.0);
  const vec4 D = vec4(0.0, 0.5, 1.0, 2.0);

    // First corner
  vec3 i = floor(v + dot(v, C.yyy));
  vec3 x0 = v - i + dot(i, C.xxx);

    // Other corners
  vec3 g = step(x0.yzx, x0.xyz);
  vec3 l = 1.0 - g;
  vec3 i1 = min(g.xyz, l.zxy);
  vec3 i2 = max(g.xyz, l.zxy);

  vec3 x1 = x0 - i1 + C.xxx;
  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y
  vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y

    // Permutations
  i = _czm_mod289(i);
  vec4 p = _czm_permute(_czm_permute(_czm_permute(i.z + vec4(0.0, i1.z, i2.z, 1.0)) + i.y + vec4(0.0, i1.y, i2.y, 1.0)) + i.x + vec4(0.0, i1.x, i2.x, 1.0));

    // Gradients: 7x7 points over a square, mapped onto an octahedron.
    // The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)
  float n_ = 0.142857142857; // 1.0/7.0
  vec3 ns = n_ * D.wyz - D.xzx;

  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)

  vec4 x_ = floor(j * ns.z);
  vec4 y_ = floor(j - 7.0 * x_);    // mod(j,N)

  vec4 x = x_ * ns.x + ns.yyyy;
  vec4 y = y_ * ns.x + ns.yyyy;
  vec4 h = 1.0 - abs(x) - abs(y);

  vec4 b0 = vec4(x.xy, y.xy);
  vec4 b1 = vec4(x.zw, y.zw);

    //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;
    //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;
  vec4 s0 = floor(b0) * 2.0 + 1.0;
  vec4 s1 = floor(b1) * 2.0 + 1.0;
  vec4 sh = -step(h, vec4(0.0));

  vec4 a0 = b0.xzyw + s0.xzyw * sh.xxyy;
  vec4 a1 = b1.xzyw + s1.xzyw * sh.zzww;

  vec3 p0 = vec3(a0.xy, h.x);
  vec3 p1 = vec3(a0.zw, h.y);
  vec3 p2 = vec3(a1.xy, h.z);
  vec3 p3 = vec3(a1.zw, h.w);

    //Normalise gradients
  vec4 norm = _czm_taylorInvSqrt(vec4(dot(p0, p0), dot(p1, p1), dot(p2, p2), dot(p3, p3)));
  p0 *= norm.x;
  p1 *= norm.y;
  p2 *= norm.z;
  p3 *= norm.w;

    // Mix final noise value
  vec4 m = max(0.6 - vec4(dot(x0, x0), dot(x1, x1), dot(x2, x2), dot(x3, x3)), 0.0);
  m = m * m;
  return 42.0 * dot(m * m, vec4(dot(p0, x0), dot(p1, x1), dot(p2, x2), dot(p3, x3)));
}

float czm_snoise(vec4 v) {
  const vec4 C = vec4(0.138196601125011,  // (5 - sqrt(5))/20  G4
  0.276393202250021,  // 2 * G4
  0.414589803375032,  // 3 * G4
  -0.447213595499958); // -1 + 4 * G4

    // (sqrt(5) - 1)/4 = F4, used once below
    #define F4 0.309016994374947451

    // First corner
  vec4 i = floor(v + dot(v, vec4(F4)));
  vec4 x0 = v - i + dot(i, C.xxxx);

    // Other corners

    // Rank sorting originally contributed by Bill Licea-Kane, AMD (formerly ATI)
  vec4 i0;
  vec3 isX = step(x0.yzw, x0.xxx);
  vec3 isYZ = step(x0.zww, x0.yyz);
    //  i0.x = dot( isX, vec3( 1.0 ) );
  i0.x = isX.x + isX.y + isX.z;
  i0.yzw = 1.0 - isX;
    //  i0.y += dot( isYZ.xy, vec2( 1.0 ) );
  i0.y += isYZ.x + isYZ.y;
  i0.zw += 1.0 - isYZ.xy;
  i0.z += isYZ.z;
  i0.w += 1.0 - isYZ.z;

    // i0 now contains the unique values 0,1,2,3 in each channel
  vec4 i3 = clamp(i0, 0.0, 1.0);
  vec4 i2 = clamp(i0 - 1.0, 0.0, 1.0);
  vec4 i1 = clamp(i0 - 2.0, 0.0, 1.0);

    //  x0 = x0 - 0.0 + 0.0 * C.xxxx
    //  x1 = x0 - i1  + 1.0 * C.xxxx
    //  x2 = x0 - i2  + 2.0 * C.xxxx
    //  x3 = x0 - i3  + 3.0 * C.xxxx
    //  x4 = x0 - 1.0 + 4.0 * C.xxxx
  vec4 x1 = x0 - i1 + C.xxxx;
  vec4 x2 = x0 - i2 + C.yyyy;
  vec4 x3 = x0 - i3 + C.zzzz;
  vec4 x4 = x0 + C.wwww;

    // Permutations
  i = _czm_mod289(i);
  float j0 = _czm_permute(_czm_permute(_czm_permute(_czm_permute(i.w) + i.z) + i.y) + i.x);
  vec4 j1 = _czm_permute(_czm_permute(_czm_permute(_czm_permute(i.w + vec4(i1.w, i2.w, i3.w, 1.0)) + i.z + vec4(i1.z, i2.z, i3.z, 1.0)) + i.y + vec4(i1.y, i2.y, i3.y, 1.0)) + i.x + vec4(i1.x, i2.x, i3.x, 1.0));

    // Gradients: 7x7x6 points over a cube, mapped onto a 4-cross polytope
    // 7*7*6 = 294, which is close to the ring size 17*17 = 289.
  vec4 ip = vec4(1.0 / 294.0, 1.0 / 49.0, 1.0 / 7.0, 0.0);

  vec4 p0 = _czm_grad4(j0, ip);
  vec4 p1 = _czm_grad4(j1.x, ip);
  vec4 p2 = _czm_grad4(j1.y, ip);
  vec4 p3 = _czm_grad4(j1.z, ip);
  vec4 p4 = _czm_grad4(j1.w, ip);

    // Normalise gradients
  vec4 norm = _czm_taylorInvSqrt(vec4(dot(p0, p0), dot(p1, p1), dot(p2, p2), dot(p3, p3)));
  p0 *= norm.x;
  p1 *= norm.y;
  p2 *= norm.z;
  p3 *= norm.w;
  p4 *= _czm_taylorInvSqrt(dot(p4, p4));

    // Mix contributions from the five corners
  vec3 m0 = max(0.6 - vec3(dot(x0, x0), dot(x1, x1), dot(x2, x2)), 0.0);
  vec2 m1 = max(0.6 - vec2(dot(x3, x3), dot(x4, x4)), 0.0);
  m0 = m0 * m0;
  m1 = m1 * m1;
  return 49.0 * (dot(m0 * m0, vec3(dot(p0, x0), dot(p1, x1), dot(p2, x2))) + dot(m1 * m1, vec2(dot(p3, x3), dot(p4, x4))));
}
`,LineDotDashMaterial=_0x3a2b68(881),LineFlowMaterial=`uniform float globalAlpha;
uniform bool axisY;
uniform bool mixt;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = repeat * materialInput.st;

  vec4 colorImage;
  if(speed != 0.0) {
    float currTime;
    if(time < 0.0) {
      currTime = speed * czm_frameNumber / 1000.0;
    } else {
      currTime = time;
    }
    colorImage = texture(image, vec2(fract((axisY ? st.t : st.s) - currTime), st.t));
  } else {
    colorImage = texture(image, st);
  }

  if(color.a == 0.0) {
    if(colorImage.rgb == vec3(1.0)) {
      discard;
    }
  }

  if(color.rgb == vec3(1.0)) {
    material.alpha = colorImage.a * globalAlpha;
    material.diffuse = colorImage.rgb;
  } else {
    material.alpha = colorImage.a * color.a * globalAlpha;
    if(mixt)
      material.diffuse = max(colorImage.rgb * color.rgb * material.alpha * 3.0, colorImage.rgb * color.rgb);
    else
      material.diffuse = max(color.rgb * material.alpha * 3.0, color.rgb);
  }

  if(hasImage2) {
    vec4 colorBG = texture(image2, materialInput.st);
    if(colorBG.a > 0.5) {
      material.diffuse = color2.rgb;
    }
  }
  return material;
}
`,LineFlowColorMaterial=`uniform vec4 color;
uniform float speed;
uniform float startTime;
uniform float percent;
uniform float alpha;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  float t = fract(startTime + czm_frameNumber * speed / 1000.0);
  t *= (1.0 + percent);
  float alpha1 = smoothstep(t - percent, t, st.s) * step(-t, -st.s);
  alpha1 += alpha;
  material.diffuse = color.rgb;
  material.alpha = alpha1 * globalAlpha;
  return material;
}
`,ODLineMaterial=`uniform vec4 color;
uniform vec4 bgColor;
uniform float speed;
uniform float startTime;
uniform float bidirectional;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  float t = fract(startTime + czm_frameNumber * speed / 1000.0);

  t *= 1.03;
  float alpha0 = smoothstep(t - 0.03, t, st.s) * step(st.s, t);
  float mt = 1. - t;
  float alpha1 = smoothstep(mt + 0.03, mt, st.s) * step(mt, st.s);

  float a0 = step(abs(bidirectional - 0.0) - 0.001, 0.);
  float a1 = step(abs(bidirectional - 1.0) - 0.001, 0.);
  float db = step(abs(bidirectional - 2.0) - 0.001, 0.);
  float alpha = alpha0 * (a0 + db) + alpha1 * (a1 + db);
  alpha = clamp(alpha, 0., 1.);

  material.diffuse = color.rgb * alpha + bgColor.rgb * (1. - alpha);
  material.alpha = (color.a * alpha + bgColor.a * (1. - alpha)) * globalAlpha;

    // if (useImageAndRepeat.x != 0.) {
    //     float repeat = useImageAndRepeat.y;
    //     vec4 marsImageColor = texture(image, fract(vec2(fract((st.s-t)*repeat), st.t)));
    //     material.diffuse = marsImageColor.rgb;
    //     material.alpha = marsImageColor.a;
    // }

  return material;
}
`,LineFlickerMaterial=`uniform vec4 color;
uniform float speed;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  float time = fract(czm_frameNumber * speed / 1000.0);
  vec2 st = materialInput.st;
  float scalar = smoothstep(0.0, 1.0, time);
  material.diffuse = color.rgb * scalar;
  material.alpha = color.a * scalar * globalAlpha;
  return material;
}
`,LineTrailMaterial=`uniform vec4 bgColor;
uniform vec4 color;
uniform float speed;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  float time = fract(czm_frameNumber * speed / 1000.0);

  vec3 fragColor = color.rgb;
  if(st.t > 0.45 && st.t < 0.55) {
    fragColor = vec3(1.0);
  }
  material.alpha = color.a * 1.5 * smoothstep(.0, 1., fract(st.s - time));
  material.diffuse = max(fragColor.rgb * material.alpha, fragColor.rgb);

  if(material.alpha < bgColor.a) {
    material.alpha = bgColor.a;
    material.diffuse = bgColor.rgb;
  }
  material.alpha = material.alpha * globalAlpha;

  return material;
}
`,LineBloomMaterial=`uniform vec4 color;
uniform float speed;
uniform float glow;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);

  vec2 st = materialInput.st;
  float t = fract(speed * czm_frameNumber / 1000.0);
  t *= 1.03;

  float alpha = smoothstep(t - 0.03, t, st.s) * step(-t, -st.s);
  alpha += 0.1;

  vec4 fragColor;
  fragColor.rgb = (color.rgb) / 0.5;
  fragColor = czm_gammaCorrect(fragColor);
  material.diffuse = fragColor.rgb;
  material.alpha = alpha * globalAlpha;
  material.emission = fragColor.rgb * glow;
  return material;
}
`,DigitalFlowMaterial=`uniform float globalAlpha;

float plot(float st, float pct) {
  return smoothstep(pct, pct, st) - smoothstep(pct, pct + 0.5, st);
}

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  float time2 = czm_frameNumber / speed;
  vec4 colorImage = texture(image, vec2(fract(st.s), fract(float(st.t * segment) - time2)));
  float percent = distance(st.y, .5) / 0.9;
  float distance = length(vec2(st.x, st.y));
  float pf = plot(distance, fract(czm_frameNumber / 200.0) * 10.);
  vec4 gradient = mix(vec4(1.0, 1.0, 1.0, 1.0), vec4(pf, pf, pf, 1.0), 0.8);
  float alpha = (colorImage.a * (1.0 - percent));
  vec3 diffuse = max(color.rgb * alpha * glow, color.rgb);

  if(flowGlow == 1.0) {
    vec4 rgba = mix(vec4(diffuse, alpha), gradient, pf);
    material.diffuse = rgba.rgb;
    material.alpha = rgba.a * globalAlpha;
  } else {
    material.diffuse = diffuse;
    material.alpha = alpha * globalAlpha;
  }
  return material;
}
`,LineThreeDashMaterial=`uniform vec4 color;
uniform float dashLength;
uniform float dashPattern;

uniform vec4 sidesColor;
uniform float sidesDashLength;
uniform float globalAlpha;

in float v_polylineAngle;

const float maskLength = 16.0;

mat2 rotate(float rad) {
  float c = cos(rad);
  float s = sin(rad);
  return mat2(c, s, -s, c);
}

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);

  vec2 pos = rotate(v_polylineAngle) * gl_FragCoord.xy;
  vec2 st = materialInput.st;

  float centerGlow = widthRatio / abs(st.t - 0.5) - (widthRatio / 0.5) - 1.0;
  if(centerGlow > 0.0) {
    float dashPosition = fract(pos.x / (dashLength * czm_pixelRatio));
    float maskIndex = floor(dashPosition * maskLength);
    float maskTest = floor(dashPattern / pow(2.0, maskIndex));
    if((mod(maskTest, 2.0) < 1.0)) {
      discard;
    }

    material.emission = color.rgb;
    material.alpha = color.a;
    return material;
  }

  float sidesGlow = (1.0 - sidesWidthRatio) / abs(st.t - 0.5) - ((1.0 - sidesWidthRatio) / 0.5) - 1.0;
  if(sidesGlow < 0.0) {
    float dashPosition = fract(pos.x / (sidesDashLength * czm_pixelRatio));
    float maskIndex = floor(dashPosition * maskLength);
    float maskTest = floor(dashPattern / pow(2.0, maskIndex));
    if((mod(maskTest, 2.0) < 1.0)) {
      discard;
    }

    material.emission = sidesColor.rgb;
    material.alpha = sidesColor.a* globalAlpha;
    return material;
  }

  discard;
}
`,WallScrollMaterial=`uniform sampler2D image;
uniform float speed;
uniform vec4 color;
uniform float count;
uniform bool axisY;
uniform bool reverse;
uniform bool bloom;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  float time = fract(czm_frameNumber * speed / 1000.0);

  vec4 colorImage;
  if(axisY) {
    if(reverse)
      colorImage = texture(image, vec2(fract(float(count) * st.s - time)));
    else
      colorImage = texture(image, vec2(fract(float(count) * st.s + time)));
  } else {
    if(reverse)
      colorImage = texture(image, vec2(fract(float(count) * st.t - time)));
    else
      colorImage = texture(image, vec2(fract(float(count) * st.t + time)));
  }

  float perDis = 1.0 / count / 3.0;
  material.alpha = colorImage.a * color.a * smoothstep(.2, 1., distance(st.t * perDis, 1. + perDis)) * globalAlpha;

  if(bloom) {
    //泛光
    vec4 fragColor;
    fragColor.rgb = (colorImage.rgb + color.rgb) / 1.0;
    fragColor = czm_gammaCorrect(fragColor);

    material.diffuse = colorImage.rgb;
    material.emission = fragColor.rgb;
  } else {
    material.diffuse = max(color.rgb * material.alpha * 1.5, color.rgb);
    material.emission = max(color.rgb * material.alpha * 1.5, color.rgb);
  }
  return material;
}
`,ScanLineMaterial=`uniform vec4 color;
uniform float globalAlpha;

float circle(vec2 uv, float r, float blur) {
  float d = length(uv) * 2.0;
  float c = smoothstep(r + blur, r, d);
  return c;
}

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st - .5;
  material.diffuse = color.rgb;
  material.emission = vec3(0);

  float t = fract(czm_frameNumber * speed / 1000.0);
  float s = 0.3;
  float radius1 = smoothstep(.0, s, t) * 0.9;
  float alpha1 = circle(st, radius1, 0.01) * circle(st, radius1, -0.01);
  float alpha2 = circle(st, radius1, 0.01 - radius1) * circle(st, radius1, 0.01);
  float radius2 = 0.5 + smoothstep(s, 1.0, t) * 0.5;
  float alpha3 = circle(st, radius1, radius2 + 0.01 - radius1) * circle(st, radius1, -0.01);

  material.alpha = smoothstep(1.0, s, t) * (alpha1 + alpha2 * 0.1 + alpha3 * 0.1);
  material.alpha *= color.a * globalAlpha;

  return material;
}
`,CircleScanMaterial=_0x3a2b68(3035),CircleWaveMaterial=`uniform float globalAlpha;
uniform vec4 color;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  material.diffuse = 1.5 * color.rgb;

  vec2 st = materialInput.st;
  float dis = distance(st, vec2(0.5, 0.5));
  float currTime;
  if(time < 0.0) {
    currTime = speed * czm_frameNumber / 1000.0;
  } else {
    currTime = time;
  }

  float per = fract(currTime);
  if(count == 1.0) {
    if(dis > per * 0.5) {
      discard;
    } else {
      material.alpha = color.a * dis / per / 2.0 * globalAlpha;
    }
  } else {
    vec3 str = materialInput.str;
    if(abs(str.z) > 0.001) {
      discard;
    }
    if(dis > 0.5) {
      discard;
    } else {
      float perDis = 0.5 / count;
      float disNum;
      float bl = 0.0;
      for(float i = 0.0; i <= 99.0; i+=1.0) {
        if(i <= count) {
          disNum = perDis * i - dis + per / count;
          if(disNum > 0.0) {
            if(disNum < perDis) {
              bl = 1.0 - disNum / perDis;
            } else if(disNum - perDis < perDis) {
              bl = 1.0 - abs(1.0 - disNum / perDis);
            }
            material.alpha = pow(bl, (1.0 + 10.0 * (1.0 - gradient))) * color.a * globalAlpha;
          }
        }
      }
    }
  }
  return material;
}
`,RadarLineMaterial=`uniform vec4 color;
uniform float speed;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st * 2.0 - 1.0;
  float t = czm_frameNumber * speed / 1000.0;
  vec3 col = vec3(0.0);
  vec2 p = vec2(sin(t), cos(t));
  float d = length(st - dot(p, st) * p);
  if(dot(st, p) < 0.) {
    d = length(st);
  }

  col = .006 / d * color.rgb;

  if(distance(st, vec2(0)) > 0.99) {
    col = color.rgb;
  }

  material.alpha = pow(length(col), 2.0) * globalAlpha;
  material.diffuse = col * 3.0;
  return material;
}
`,RadarWaveMaterial=`uniform vec4 color;
uniform float speed;
uniform float globalAlpha;

#define PI 3.14159265359

float rand(vec2 co) {
  return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  vec2 pos = st - vec2(0.5);
  float time = czm_frameNumber * speed / 1000.0;
  float r = length(pos);
  float t = atan(pos.y, pos.x) - time * 2.5;
  float a = (atan(sin(t), cos(t)) + PI) / (2.0 * PI);
  float ta = 0.5;
  float v = smoothstep(ta - 0.05, ta + 0.05, a) * smoothstep(ta + 0.05, ta - 0.05, a);
  vec3 flagColor = color.rgb * v;
  float blink = pow(sin(time * 1.5) * 0.5 + 0.5, 0.8);
  flagColor = color.rgb * pow(a, 8.0 * (.2 + blink)) * (sin(r * 500.0) * .5 + .5);
  flagColor = flagColor * pow(r, 0.4);
  material.alpha = length(flagColor) * 1.3 * globalAlpha;
  material.diffuse = flagColor * 3.0;
  return material;
}
`,RectSlideMaterial=`uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  vec4 colorImage = texture(image, vec2(fract(st.s + czm_frameNumber * speed / 1000.0), fract(st.t)));

  material.alpha = colorImage.a * color.a * globalAlpha;
  if(pure) {
    material.diffuse = diffusePower * color.rgb;
  } else {
    material.diffuse = colorImage.rgb;
  }
  return material;
}
`,EllipsoidElectricMaterial=`precision highp float;
precision highp int;

#define pi 3.1415926535
#define PI2RAD 0.01745329252
#define TWO_PI (2. * PI)

uniform vec4 marscolor;
uniform float speed;
uniform float globalAlpha;

float time;
float rands(float p) {
  return fract(sin(p) * 10000.0);
}
float noise(vec2 p) {
  float t = time / 20000.0;
  if(t > 1.0)
    t -= floor(t);
  return rands(p.x * 14. + p.y * sin(t) * 0.5);
}
vec2 sw(vec2 p) {
  return vec2(floor(p.x), floor(p.y));
}
vec2 se(vec2 p) {
  return vec2(ceil(p.x), floor(p.y));
}
vec2 nw(vec2 p) {
  return vec2(floor(p.x), ceil(p.y));
}
vec2 ne(vec2 p) {
  return vec2(ceil(p.x), ceil(p.y));
}
float smoothNoise(vec2 p) {
  vec2 inter = smoothstep(0.0, 1.0, fract(p));
  float s = mix(noise(sw(p)), noise(se(p)), inter.x);
  float n = mix(noise(nw(p)), noise(ne(p)), inter.x);
  return mix(s, n, inter.y);
}
float fbm(vec2 p) {
  float z = 2.0;
  float rz = 0.0;
  vec2 bp = p;
  for(float i = 1.0; i < 6.0; i++) {
    rz += abs((smoothNoise(p) - 0.5) * 2.0) / z;
    z *= 2.0;
    p *= 2.0;
  }
  return rz;
}
czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 vUv = materialInput.st;
  time = czm_frameNumber * speed / 100.0;

  vec2 uv = vUv;
  vec2 uv2 = vUv;
  // if (uv.y < 0.5) {
  //     discard;
  // }
  uv *= 4.;
  float rz = fbm(uv);
  uv /= exp(mod(time * 2.0, pi));
  rz *= pow(15., 1.0);
  vec4 marscolor = mix(vec4(color.rgb, 1.0) / rz, vec4(color.rgb, 0.1), 0.5);
  if(uv2.x < 0.05) {
    marscolor = mix(vec4(color.rgb, 0.1), marscolor, uv2.x / 0.05);
  }
  if(uv2.x > 0.95) {
    marscolor = mix(marscolor, vec4(color.rgb, 0.1), (uv2.x - 0.95) / 0.05);
  }

  material.alpha = marscolor.a * 2.0 * globalAlpha;
  material.diffuse = max(marscolor.rgb + marscolor.rgb * material.alpha, marscolor.rgb);

  return material;
}
`,EllipsoidWaveMaterial=_0x3a2b68(1220),PolyGradientMaterial=`uniform vec4 color;
uniform float diffusePower;
uniform float alphaPower;
uniform float globalAlpha;
uniform vec2 center;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  float alpha = distance(st, center);
  material.alpha = color.a * alpha * alphaPower * globalAlpha;
  material.diffuse = color.rgb * diffusePower;
  return material;
}
`,AsphaltMaterial=`uniform vec4 color;
uniform float size;
uniform float frequency;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);

  // From Stefan Gustavson's Procedural Textures in GLSL in OpenGL Insights
  //Main cellular pattern
  vec4 color = color;
  vec2 st = materialInput.st;
  vec2 F = czm_cellular(st / size);
  color.rgb -= (F.x / F.y) * 0.1;

  //Extra bumps for frequency
  float noise = czm_snoise(st / size);
  noise = pow(noise, 5.0) * frequency;
  color.rgb += noise;

  material.diffuse = color.rgb;
  material.alpha = color.a * globalAlpha;

  return material;
}
`,BlobMaterial=_0x3a2b68(1670),FacetMaterial=`uniform vec4 evenColor;
uniform vec4 oddColor;
uniform float frequency;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);

  // From Stefan Gustavson's Procedural Textures in GLSL in OpenGL Insights
  vec2 F = czm_cellular(materialInput.st * frequency);
  float t = 0.1 + (F.y - F.x);

  vec4 color = mix(evenColor, oddColor, t);
  material.diffuse = color.rgb;
  material.alpha = color.a * globalAlpha;

  return material;
}
`,PolyGrassMaterial=`uniform vec4 evenColor;
uniform vec4 oddColor;
uniform float frequency;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);

  vec2 st = materialInput.st;
  float noise1 = (czm_snoise(st * frequency * 1.0)) * 1.0;
  float noise2 = (czm_snoise(st * frequency * 2.0)) * 0.5;
  float noise3 = (czm_snoise(st * frequency * 4.0)) * 0.25;
  float noise = sin(noise1 + noise2 + noise3) * 0.1;

  vec4 color = mix(evenColor, oddColor, noise);

  //Make thatch patterns
  float verticalNoise = czm_snoise(vec2(st.x * 100.0, st.y * 20.0)) * 0.02;
  float horizontalNoise = czm_snoise(vec2(st.x * 20.0, st.y * 100.0)) * 0.02;
  float stripeNoise = min(verticalNoise, horizontalNoise);

  color.rgb += stripeNoise;

  material.diffuse = color.rgb;
  material.alpha = color.a * globalAlpha;

  return material;
}
`,PolyWoodMaterial=`uniform vec4 evenColor;
uniform vec4 oddColor;
uniform float frequency;
uniform vec2 noiseScale;
uniform float grainFrequency;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);

  //Based on wood shader from OpenGL Shading Language (3rd edition) pg. 455
  vec2 st = materialInput.st;

  vec2 noisevec;
  noisevec.x = czm_snoise(st * noiseScale.x);
  noisevec.y = czm_snoise(st * noiseScale.y);

  vec2 location = st + noisevec;
  float dist = sqrt(location.x * location.x + location.y * location.y);
  dist *= frequency;

  float r = fract(dist + noisevec[0] + noisevec[1]) * 2.0;
  if(r > 1.0)
    r = 2.0 - r;

  vec4 color = mix(evenColor, oddColor, r);

  //streaks
  r = abs(czm_snoise(vec2(st.x * grainFrequency, st.y * grainFrequency * 0.02))) * 0.2;
  color.rgb += evenColor.rgb * r;

  material.diffuse = color.rgb;
  material.alpha = color.a * globalAlpha;

  return material;
}
`,ImageMaterial=`uniform sampler2D image;
uniform float opacity;
uniform vec4 color;
uniform float globalAlpha;
uniform bool flipx;
uniform bool flipy;
uniform bool noWhite;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  if(flipx){
    st.x = st.x + (0.5 - st.x) * 2.0;
  }
  if(flipy){
    st.y = st.y + (0.5 - st.y) * 2.0;
  }

  vec4 colorImage;
  if(speed != 0.0)
    colorImage = texture(image, vec2(fract(st.s + czm_frameNumber * speed / 1000.0), fract(st.t)));
  else
    colorImage = texture(image, st);

  if(noWhite && colorImage.rgb == vec3(1.0)) {
    discard;
  }
  material.alpha = colorImage.a * opacity * color.a * globalAlpha;
  material.diffuse = colorImage.rgb * color.rgb;
  return material;
}
`,WaterLightMaterial=_0x3a2b68(2430),NeonLightMaterial=_0x3a2b68(2464);Cesium__namespace.ShaderSource._czmBuiltinsAndUniforms.czm_cellular=czm_cellular,Cesium__namespace.ShaderSource._czmBuiltinsAndUniforms.czm_snoise=czm_snoise,register$3(LineDotDash,{fabric:{uniforms:{color:new Cesium__namespace[_0x3a2b68(2092)](1,0,1,1),gapColor:new Cesium__namespace[_0x3a2b68(2092)](0,0,0,0),dashLength:16,dashPattern:255},source:LineDotDashMaterial},translucent:!![]}),register$3(LineFlow,{fabric:{uniforms:{image:Cesium__namespace.Material.DefaultImageId,color:new Cesium__namespace.Color(1,1,1,0),repeat:new Cesium__namespace.Cartesian2(1,1),axisY:![],mixt:![],speed:10,time:-1,hasImage2:![],image2:Cesium__namespace[_0x3a2b68(4208)].DefaultImageId,color2:new Cesium__namespace.Color(1,1,1),globalAlpha:1},source:LineFlowMaterial},translucent:!![]}),register$3(LineFlowColor,{fabric:{uniforms:{color:new Cesium__namespace.Color(1,0,0,.7),startTime:0,speed:2,percent:.04,alpha:.1,globalAlpha:1},source:LineFlowColorMaterial},translucent:!![]}),register$3(ODLine,{fabric:{uniforms:{color:new Cesium__namespace.Color(1,1,0,.7),startTime:0,speed:20,bgColor:new Cesium__namespace[_0x3a2b68(2092)](1,1,0,.1),bidirectional:0,globalAlpha:1},source:ODLineMaterial},translucent:!![]}),register$3(LineFlicker,{fabric:{uniforms:{color:new Cesium__namespace.Color(1,0,0,.7),speed:10,globalAlpha:1},source:LineFlickerMaterial},translucent:!![]}),register$3(LineTrail,{fabric:{uniforms:{color:new Cesium__namespace.Color(1,0,0,.7),bgColor:new Cesium__namespace[_0x3a2b68(2092)](0,0,0,0),speed:5,globalAlpha:1},source:LineTrailMaterial},translucent:!![]}),register$3(LineBloom,{fabric:{uniforms:{color:Cesium__namespace.Color[_0x3a2b68(876)],glow:1,speed:5,globalAlpha:1},source:LineBloomMaterial},translucent:!![]}),register$3(DigitalFlow,{fabric:{uniforms:{color:new Cesium__namespace.Color(0,0,0,.8),image:Cesium__namespace[_0x3a2b68(4208)][_0x3a2b68(3953)],speed:10,glow:10,flowGlow:1,segment:3,globalAlpha:1},source:DigitalFlowMaterial},translucent:!![]}),register$3(LineThreeDash,{fabric:{uniforms:{color:Cesium__namespace.Color.RED,dashLength:64,widthRatio:.1,sidesColor:Cesium__namespace.Color[_0x3a2b68(1948)],sidesDashLength:32,sidesWidthRatio:.1,dashPattern:255,globalAlpha:1},source:LineThreeDashMaterial},translucent:!![]}),register$3(WallScroll,{fabric:{uniforms:{color:new Cesium__namespace[_0x3a2b68(2092)](0,0,0,1),image:Cesium__namespace[_0x3a2b68(4208)].DefaultImageId,count:1,speed:5,reverse:![],axisY:![],bloom:![],globalAlpha:1},source:WallScrollMaterial},translucent:!![]}),register$3(ScanLine,{fabric:{uniforms:{color:new Cesium__namespace.Color(1,1,0,1),speed:10,globalAlpha:1},source:ScanLineMaterial},translucent:!![]}),register$3(CircleScan,{fabric:{uniforms:{color:new Cesium__namespace[_0x3a2b68(2092)](1,0,0,1),image:Cesium__namespace.Material.DefaultImageId,globalAlpha:1},source:CircleScanMaterial},translucent:!![]}),register$3(CircleWave,{fabric:{uniforms:{color:new Cesium__namespace[_0x3a2b68(2092)](1,1,0,1),speed:10,time:-1,count:1,gradient:.1,globalAlpha:1},source:CircleWaveMaterial},translucent:!![]}),register$3(RadarLine,{fabric:{uniforms:{color:new Cesium__namespace.Color(0,1,1,.7),speed:5,globalAlpha:1},source:RadarLineMaterial},translucent:!![]}),register$3(RadarWave,{fabric:{uniforms:{color:new Cesium__namespace.Color(0,1,1,.7),speed:5,globalAlpha:1},source:RadarWaveMaterial},translucent:!![]}),register$3(RectSlide,{fabric:{uniforms:{image:Cesium__namespace.Material[_0x3a2b68(3953)],color:Cesium__namespace[_0x3a2b68(2092)].WHITE,speed:10,pure:![],diffusePower:1.3,globalAlpha:1},source:RectSlideMaterial},translucent:!![]}),register$3(EllipsoidElectric,{fabric:{uniforms:{color:new Cesium__namespace.Color(0,1,1,.7),speed:5,globalAlpha:1},source:EllipsoidElectricMaterial},translucent:!![]}),register$3(EllipsoidWave,{fabric:{uniforms:{color:new Cesium__namespace[_0x3a2b68(2092)](0,1,1,.7),speed:5,globalAlpha:1},source:EllipsoidWaveMaterial},translucent:!![]}),register$3(PolyGradient,{fabric:{uniforms:{color:new Cesium__namespace.Color(1,1,0,.5),diffusePower:1.6,alphaPower:1.5,center:new Cesium__namespace.Cartesian2(.5,.5),globalAlpha:1},source:PolyGradientMaterial},translucent:!![]}),register$3(PolyAsphalt,{fabric:{uniforms:{color:new Cesium__namespace[_0x3a2b68(2092)](.15,.15,.15,1),size:.02,frequency:.2,globalAlpha:1},source:AsphaltMaterial},translucent:function(n){return n[_0x3a2b68(2949)].color.alpha<1}}),register$3(PolyBlob,{fabric:{uniforms:{evenColor:new Cesium__namespace.Color(1,1,1,.5),oddColor:new Cesium__namespace.Color(0,0,1,.5),frequency:10,globalAlpha:1},source:BlobMaterial},translucent:function(n){const e=n.uniforms;return e.evenColor.alpha<1||e.oddColor.alpha<0}}),register$3(PolyFacet,{fabric:{uniforms:{evenColor:new Cesium__namespace.Color(.25,.25,.25,.75),oddColor:new Cesium__namespace[_0x3a2b68(2092)](.75,.75,.75,.75),frequency:10,globalAlpha:1},source:FacetMaterial},translucent:function(n){const e={_0x226eda:2977,_0x43b370:838},t=_0x3a2b68,i=n.uniforms;return i.evenColor.alpha<1||i[t(e._0x226eda)][t(e._0x43b370)]<0}}),register$3(PolyGrass,{fabric:{uniforms:{evenColor:new Cesium__namespace.Color(.25,.4,.1,1),oddColor:new Cesium__namespace.Color(.1,.1,.1,1),frequency:1.5,globalAlpha:1},source:PolyGrassMaterial},translucent:function(n){const e=n.uniforms;return e.evenColor.alpha<1||e.oddColor.alpha<1}}),register$3(PolyWood,{fabric:{uniforms:{evenColor:new Cesium__namespace.Color(.6,.3,.1,1),oddColor:new Cesium__namespace.Color(.4,.2,.07,1),frequency:3,noiseScale:new Cesium__namespace[_0x3a2b68(3532)](.7,.5),grainFrequency:27,globalAlpha:1},source:PolyWoodMaterial},translucent:function(n){const e={_0x3c2f28:2949},t=_0x3a2b68,i=n[t(e._0x3c2f28)];return i.evenColor[t(838)]<1||i.oddColor[t(838)]<1}}),register$3(Image2,{fabric:{uniforms:{image:Cesium__namespace[_0x3a2b68(4208)].DefaultImageId,color:Cesium__namespace.Color.WHITE,opacity:1,speed:0,flipx:![],flipy:![],noWhite:!![],globalAlpha:1},source:ImageMaterial},translucent:!![]}),register$3(WaterLight,{fabric:{uniforms:{alpha:.3,specularMap:Cesium__namespace.Material.DefaultImageId,normalMap:Cesium__namespace.buildModuleUrl("Assets/Textures/waterNormals.jpg"),globalAlpha:1},source:WaterLightMaterial},translucent:!![]}),register$3(NeonLight,{fabric:{uniforms:{color:Cesium__namespace.Color.WHITE,speed:1,globalAlpha:1},source:NeonLightMaterial},translucent:!![]}),registerPropertyClass(Color$2,Cesium__namespace[_0x3a2b68(3348)]),registerPropertyClass(Image$1,Cesium__namespace.ImageMaterialProperty),registerPropertyClass(PolylineArrow,Cesium__namespace.PolylineArrowMaterialProperty),registerPropertyClass(PolylineOutline,Cesium__namespace[_0x3a2b68(2018)]),registerPropertyClass(PolylineDash,Cesium__namespace[_0x3a2b68(3669)]),registerPropertyClass(PolylineGlow,Cesium__namespace.PolylineGlowMaterialProperty),registerPropertyClass(Grid,Cesium__namespace.GridMaterialProperty),registerPropertyClass(Checkerboard,Cesium__namespace.CheckerboardMaterialProperty),registerPropertyClass(Stripe,Cesium__namespace.StripeMaterialProperty);class TextMaterial extends Cesium__namespace[_0x3a2b68(4208)]{constructor(e={}){super(conventOptions$1(e))}}function conventOptions$1(n){const e={_0x2d2655:3640,_0x3a2857:873},t=_0x3a2b68,i=n[t(e._0x2d2655)];n.font_size=n[t(e._0x3a2857)]||70;const s=LabelStyleConver.toCesiumVal(n,{fill:n.fill??!![],fillColor:new Cesium__namespace.Color(1,1,0,1),textBaseline:t(1413),padding:10}),r=getTextImage(i,s);let o;return r&&(o=r[t(3786)](t(2158))),{fabric:{uniforms:{image:o,opacity:1,color:Cesium__namespace.Color.WHITE,speed:n.speed||0,flipx:![],flipy:![],noWhite:!![],globalAlpha:1},source:ImageMaterial},translucent:!![]}}registerClass(Text,TextMaterial);var CylinderWaveMaterialGlsl=`uniform vec4 color;
uniform float repeat;
uniform float offset;
uniform float thickness;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  float sp = 1.0 / repeat;
  vec2 st = materialInput.st;
  float dis = distance(st, vec2(0.5));
  float m = mod(dis + offset, sp);
  float a = step(sp * (1.0 - thickness), m);
  material.diffuse = color.rgb;
  material.alpha = a * color.a * globalAlpha;
  return material;
}
`;class CylinderWaveMaterial extends Cesium__namespace.Material{constructor(e={}){const t={_0x49c880:2162},i=_0x3a2b68;super(conventOptions(e)),this._frameTime=1e3/(e[i(t._0x49c880)]||60),this._speed=e.speed??10;const s=this;let r=Date[i(467)]();(function o(){const c=i;s.animateFrame=window.requestAnimationFrame(o);const _=Date[c(467)](),l=_-r;l>s._frameTime&&(r=_-l%s[c(2389)],s[c(1682)]())})()}updateOffset(){const e={_0x5318af:3021},t=_0x3a2b68;let i=this.uniforms[t(e._0x5318af)];i-=1e-4*this._speed,i>1&&(i=0),this.uniforms.offset=i}[_0x3a2b68(2619)](e){const t={_0x5cb624:1297},i=_0x3a2b68;return window.cancelAnimationFrame(this[i(t._0x5cb624)]),delete this.animateFrame,super.destroy(e)}}function conventOptions(n){const e={_0x4a35dc:838},t=_0x3a2b68;return{fabric:{uniforms:{color:getCesiumColor(n.color,new Cesium__namespace[t(2092)](2,1,0,.8)),repeat:n.repeat??30,thickness:n.thickness??.3,offset:n.offset??0,globalAlpha:1},source:CylinderWaveMaterialGlsl},translucent:function(i){const s=t;return i.uniforms.color[s(e._0x4a35dc)]<1}}}registerClass(CylinderWave,CylinderWaveMaterial);class BaseMaterialProperty{constructor(e={}){const t=_0x3a2b68;this.options=e,this[t(1360)]=new Cesium__namespace.Event}get[_0x3a2b68(2440)](){return!![]}get[_0x3a2b68(2180)](){return this[_0x3a2b68(1360)]}getType(e){return null}getValue(e,t={}){return t}[_0x3a2b68(494)](e){return this===e}}class CircleScanMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x2a9cf9:1793},i=_0x3a2b68;super(e),this[i(t._0x2a9cf9)]=e.image??e.url,this[i(2540)]=e.color,this.globalAlpha=e.globalAlpha??1}[_0x3a2b68(1504)](e){return CircleScan}[_0x3a2b68(3479)](e,t){const i={_0x46ae4d:2092},s=_0x3a2b68;return!Cesium__namespace.defined(t)&&(t={}),t.color=getCesiumColor(this.color,new Cesium__namespace[s(i._0x46ae4d)](1,0,0,.5),e),t.image=this.image,t.globalAlpha=this.globalAlpha,t}equals(e){const t=_0x3a2b68;return this===e||e instanceof CircleScanMaterialProperty&&Cesium__namespace.Property.equals(this.color,e[t(2540)])&&this.image===e.image}}registerPropertyClass(CircleScan,CircleScanMaterialProperty);class CircleWaveMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x89ac7d:4385,_0x53cfca:2969,_0x194b3a:1183,_0x21f508:2969},i=_0x3a2b68;super(e),this[i(2540)]=e.color,this[i(t._0x89ac7d)]=e.speed??10,this[i(2096)]=e[i(2096)],this[i(t._0x53cfca)]=e[i(2969)]??1,this.gradient=e[i(t._0x194b3a)]??.1,this.globalAlpha=e.globalAlpha??1,this.count<=0&&(this[i(t._0x21f508)]=1),this.gradient<0&&(this.gradient=0),this.gradient>1&&(this.gradient=1)}getType(e){return CircleWave}[_0x3a2b68(3479)](e,t){const i={_0x568cb4:2540},s=_0x3a2b68;return!Cesium__namespace[s(407)](t)&&(t={}),t[s(2540)]=getCesiumColor(this[s(i._0x568cb4)],Cesium__namespace.Color[s(1399)],e),t.count=this.count,t.gradient=this[s(1183)],t.speed=this.speed,t.globalAlpha=this.globalAlpha,this[s(2096)]?(this._time===void 0&&(this._time=new Date().getTime()),t[s(1036)]=(new Date()[s(809)]()-this._time)/(this.duration*1e3)):t[s(1036)]=-1,t}equals(e){const t={_0x3e1662:2969,_0x18a750:4385},i=_0x3a2b68;return this===e||e instanceof CircleWaveMaterialProperty&&Cesium__namespace.Property.equals(this.color,e[i(2540)])&&this.count===e[i(t._0x3e1662)]&&this[i(t._0x18a750)]===e[i(4385)]&&this.gradient===e.gradient}}registerPropertyClass(CircleWave,CircleWaveMaterialProperty),register$3(CylinderWave,{fabric:{uniforms:{color:new Cesium__namespace.Color(2,1,0,.8),repeat:30,thickness:.3,offset:0,globalAlpha:1},source:CylinderWaveMaterialGlsl},translucent:!![]});class CylinderWaveMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x351e34:1719,_0x4e00ee:4385},i=_0x3a2b68;super(e),this[i(2540)]=e.color,this[i(t._0x351e34)]=e.repeat??30,this.thickness=e.thickness??.3,this.speed=e[i(t._0x4e00ee)]??10,this.offset=0,this.globalAlpha=e.globalAlpha??1}getType(e){return CylinderWave}[_0x3a2b68(3479)](e,t){const i={_0x388610:3021,_0x5c2e11:715},s=_0x3a2b68;return!Cesium__namespace.defined(t)&&(t={}),this.offset-=1e-4*this.speed,this.offset>1&&(this.offset=0),t.color=getCesiumColor(this.color,new Cesium__namespace.Color(2,1,0,.8),e),t.repeat=this[s(1719)],t[s(i._0x388610)]=this.offset,t[s(i._0x5c2e11)]=this[s(715)],t.globalAlpha=this[s(749)],t}[_0x3a2b68(494)](e){const t=_0x3a2b68;return this===e||e instanceof CylinderWaveMaterialProperty&&Cesium__namespace.Property[t(494)](this[t(2540)],e[t(2540)])&&this[t(1719)]===e.repeat&&this.thickness===e.thickness}}registerPropertyClass(CylinderWave,CylinderWaveMaterialProperty);class DigitalFlowMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x17dc76:4385,_0x27a1ea:1724},i=_0x3a2b68;super(e),this.color=getCesiumColor(e.color,new Cesium__namespace[i(2092)](0,0,0,0)),this.speed=e[i(t._0x17dc76)]??5,this.glow=e.glow??1,this[i(t._0x27a1ea)]=e[i(1724)]??1,this.segment=e.segment??3,this.globalAlpha=e.globalAlpha??1}[_0x3a2b68(1504)](e){return DigitalFlow}getValue(e,t){const i={_0x4f6b57:4385,_0x3fe10a:1724},s=_0x3a2b68;return!Cesium__namespace.defined(t)&&(t={}),t.color=this.color,t[s(i._0x4f6b57)]=this[s(i._0x4f6b57)],t.glow=this.glow,t[s(i._0x3fe10a)]=this.flowGlow,t.segment=this.segment,t.globalAlpha=this.globalAlpha,t}equals(e){const t=_0x3a2b68;return this===e||e instanceof DigitalFlowMaterialProperty&&Cesium__namespace.Property.equals(this.color,e.color)&&this.glow===e.glow&&this[t(4385)]===e.speed}}registerPropertyClass(DigitalFlow,DigitalFlowMaterialProperty);class EllipsoidElectricMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0xcc65ba:2092},i=_0x3a2b68;super(e),this[i(2540)]=getCesiumColor(e.color,new Cesium__namespace[i(t._0xcc65ba)](0,0,0,0)),this.speed=e.speed??5,this.globalAlpha=e.globalAlpha??1}getType(e){return EllipsoidElectric}getValue(e,t){const i={_0x1a721a:4385},s=_0x3a2b68;return!Cesium__namespace.defined(t)&&(t={}),t.color=this.color,t[s(i._0x1a721a)]=this.speed,t.globalAlpha=this[s(749)],t}equals(e){return this===e||e instanceof EllipsoidElectricMaterialProperty&&Cesium__namespace.Property.equals(this.color,e.color)&&this.speed===e.speed}}registerPropertyClass(EllipsoidElectric,EllipsoidElectricMaterialProperty);class EllipsoidWaveMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x3bf492:2540,_0x3e31c0:749},i=_0x3a2b68;super(e),this[i(t._0x3bf492)]=getCesiumColor(e.color,new Cesium__namespace.Color(0,0,0,0)),this.speed=e.speed??5,this[i(t._0x3e31c0)]=e[i(749)]??1}getType(e){return EllipsoidWave}[_0x3a2b68(3479)](e,t){return!Cesium__namespace[_0x3a2b68(407)](t)&&(t={}),t.color=this.color,t.speed=this.speed,t.globalAlpha=this.globalAlpha,t}equals(e){const t={_0x3b0891:494},i=_0x3a2b68;return this===e||e instanceof EllipsoidWaveMaterialProperty&&Cesium__namespace.Property[i(t._0x3b0891)](this.color,e.color)&&this.speed===e.speed}}registerPropertyClass(EllipsoidWave,EllipsoidWaveMaterialProperty);class Image2MaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x44b88a:4385},i=_0x3a2b68;super(e),this.image=e[i(1793)],this.opacity=e.opacity??1,this.color=e.color??Cesium__namespace[i(2092)][i(1948)],this.speed=e[i(t._0x44b88a)]??0,this[i(1957)]=e.flipx??![],this.flipy=e[i(2153)]??![],this.noWhite=e.noWhite??!![],this[i(749)]=e.globalAlpha??1}getType(e){return Image2}[_0x3a2b68(3479)](e,t){const i={_0x49fc13:1957,_0x596de1:2153,_0x5a1412:749},s=_0x3a2b68;return!Cesium__namespace[s(407)](t)&&(t={}),t.image=this.image,t.color=this.color,t.opacity=this.opacity,t.speed=this.speed,t[s(i._0x49fc13)]=this.flipx,t[s(i._0x596de1)]=this[s(i._0x596de1)],t.noWhite=this.noWhite,t.globalAlpha=this[s(i._0x5a1412)],t}[_0x3a2b68(494)](e){const t={_0x32e4bf:3248,_0x70be42:1793},i=_0x3a2b68;return this===e||e instanceof Image2MaterialProperty&&Cesium__namespace.Property[i(494)](this.color,e.color)&&this[i(t._0x32e4bf)]===e.opacity&&this[i(t._0x70be42)]===e.image}}registerPropertyClass(Image2,Image2MaterialProperty);class LineBloomMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x2a7dc1:2092,_0x2f0811:4385,_0x242ed3:865,_0x21826f:865,_0x44176d:749},i=_0x3a2b68;super(e),this.color=getCesiumColor(e.color,new Cesium__namespace[i(t._0x2a7dc1)](0,0,0,0)),this.speed=e[i(t._0x2f0811)]??5,this[i(t._0x242ed3)]=e[i(t._0x21826f)]??1,this.globalAlpha=e[i(t._0x44176d)]??1}getType(e){return LineBloom}getValue(e,t){const i={_0x26f734:4385,_0x45ca17:865},s=_0x3a2b68;return!Cesium__namespace[s(407)](t)&&(t={}),t[s(2540)]=this[s(2540)],t[s(i._0x26f734)]=this.speed,t[s(i._0x45ca17)]=this.glow,t.globalAlpha=this.globalAlpha,t}[_0x3a2b68(494)](e){const t={_0x99225d:2540},i=_0x3a2b68;return this===e||e instanceof LineBloomMaterialProperty&&Cesium__namespace.Property.equals(this.color,e[i(t._0x99225d)])&&this.glow===e.glow&&this[i(4385)]===e.speed}}registerPropertyClass(LineBloom,LineBloomMaterialProperty);class LineFlickerMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t=_0x3a2b68;super(e),this.color=e[t(2540)],this.speed=e.speed??2,this.globalAlpha=e[t(749)]??1}[_0x3a2b68(1504)](e){return LineFlicker}getValue(e,t){const i={_0x16e979:407,_0x4c277f:749},s=_0x3a2b68;return!Cesium__namespace[s(i._0x16e979)](t)&&(t={}),t[s(2540)]=getCesiumColor(this.color,new Cesium__namespace.Color(0,0,0,0),e),t[s(4385)]=this.speed,t[s(i._0x4c277f)]=this.globalAlpha,t}[_0x3a2b68(494)](e){const t={_0x4c8dc7:4385},i=_0x3a2b68;return this===e||e instanceof LineFlickerMaterialProperty&&Cesium__namespace.Property[i(494)](this.color,e.color)&&this.speed===e[i(t._0x4c8dc7)]}}registerPropertyClass(LineFlicker,LineFlickerMaterialProperty);class LineFlowColorMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x98f76a:2540,_0x1f92a3:838,_0x2f9fdd:1431,_0x242026:749},i=_0x3a2b68;super(e),this[i(t._0x98f76a)]=e.color,this.speed=e.speed??2,this.percent=e.percent??.04,this.alpha=e[i(t._0x1f92a3)]??.1,this[i(t._0x2f9fdd)]=e.startTime??0,this[i(t._0x242026)]=e.globalAlpha??1}getType(e){return LineFlowColor}getValue(e,t){const i={_0x387318:407,_0x43ef57:2092,_0x37c3d8:1431,_0x1ca58f:749},s=_0x3a2b68;return!Cesium__namespace[s(i._0x387318)](t)&&(t={}),t[s(2540)]=getCesiumColor(this.color,new Cesium__namespace[s(i._0x43ef57)](1,0,0,1),e),t[s(4385)]=this.speed,t.percent=this[s(4036)],t.alpha=this.alpha,t[s(i._0x37c3d8)]=this[s(1431)],t.globalAlpha=this[s(i._0x1ca58f)],t}equals(e){const t={_0x293cd2:2540,_0x4a081d:838},i=_0x3a2b68;return this===e||e instanceof LineFlowColorMaterialProperty&&Cesium__namespace.Property[i(494)](this[i(t._0x293cd2)],e.color)&&this[i(4385)]===e.speed&&this.percent===e.percent&&this.startTime===e.startTime&&this.alpha===e[i(t._0x4a081d)]}}registerPropertyClass(LineFlowColor,LineFlowColorMaterialProperty);class LineFlowMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x9fd1d1:4385,_0x4d0b9f:2096,_0x5c3feb:1719,_0x2f85de:3532},i=_0x3a2b68;super(e),this.image=e.image??e.url,this.color=e[i(2540)]??new Cesium__namespace.Color(1,1,1,0),this[i(1034)]=e.axisY??![],this.mixt=e.mixt??![],this.speed=e[i(t._0x9fd1d1)]??10,this[i(2096)]=e[i(t._0x4d0b9f)],this[i(t._0x5c3feb)]=e.repeat??new Cesium__namespace[i(t._0x2f85de)](1,1),this.image2=e.image2??e.bgUrl,this.color2=e.color2??e.bgColor??new Cesium__namespace.Color(1,1,1),this.hasImage2=Cesium__namespace.defined(this.image2),this.globalAlpha=e.globalAlpha??1}getType(e){return LineFlow}getValue(e,t){const i={_0x30efa8:1793,_0x2573fb:1034,_0x1e55a7:1731,_0x4627b4:2096},s=_0x3a2b68;return!Cesium__namespace.defined(t)&&(t={}),t[s(1793)]=this[s(i._0x30efa8)],t.color=getCesiumColor(this.color,new Cesium__namespace.Color(1,1,1,0),e),t.repeat=getCesiumValue(this.repeat,Cesium__namespace[s(3532)],e),t[s(i._0x2573fb)]=this.axisY,t.mixt=this.mixt,t.speed=getCesiumValue(this[s(4385)],Number,e),this.duration?(this[s(1731)]===void 0&&(this._time=new Date()[s(809)]()),t.time=(new Date().getTime()-this[s(i._0x1e55a7)])/(this[s(i._0x4627b4)]*1e3)):t.time=-1,t.hasImage2=this[s(2384)],t.image2=this.image2,t[s(3818)]=getCesiumColor(this.color2,new Cesium__namespace[s(2092)](1,1,1),e),t.globalAlpha=this.globalAlpha,t}equals(e){const t={_0x25e079:494,_0x3b063b:1793},i=_0x3a2b68;return this===e||e instanceof LineFlowMaterialProperty&&Cesium__namespace.Property[i(494)](this.color,e.color)&&Cesium__namespace.Property[i(t._0x25e079)](this[i(1719)],e.repeat)&&this.image===e[i(t._0x3b063b)]&&this.axisY===e.axisY&&this.speed===e.speed&&this.hasImage2===e.hasImage2&&this.image2===e[i(3183)]&&Cesium__namespace.Property.equals(this.color2,e[i(3818)])}}registerPropertyClass(LineFlow,LineFlowMaterialProperty);class LineTrailMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t=_0x3a2b68;super(e),this.color=getCesiumColor(e.color,new Cesium__namespace[t(2092)](0,0,0,0)),this.bgColor=getCesiumColor(e.bgColor,this.color[t(747)](.1)),this.speed=e.speed??2,this.globalAlpha=e.globalAlpha??1}getType(e){return LineTrail}getValue(e,t){const i={_0x11320f:4091,_0x4c45cc:4385},s=_0x3a2b68;return!Cesium__namespace.defined(t)&&(t={}),t[s(2540)]=this.color,t.bgColor=this[s(i._0x11320f)],t[s(i._0x4c45cc)]=this.speed,t.globalAlpha=this.globalAlpha,t}equals(e){const t={_0x5b8148:4385},i=_0x3a2b68;return this===e||e instanceof LineTrailMaterialProperty&&Cesium__namespace.Property.equals(this.color,e.color)&&Cesium__namespace.Property[i(494)](this.bgColor,e.bgColor)&&this[i(t._0x5b8148)]===e.speed}}registerPropertyClass(LineTrail,LineTrailMaterialProperty);class LineDotDashMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x49cbd8:2540,_0x9cad97:2092,_0x5820b5:704},i=_0x3a2b68;super(e),this[i(t._0x49cbd8)]=getCesiumColor(e.color,new Cesium__namespace[i(t._0x9cad97)](0,0,0,0)),this.gapColor=getCesiumColor(e[i(t._0x5820b5)],Cesium__namespace.Color.TRANSPARENT),this.dashLength=e.dashLength??16,this.dashPattern=e.dashPattern??255,this.globalAlpha=e.globalAlpha??1}[_0x3a2b68(1504)](e){return LineDotDash}[_0x3a2b68(3479)](e,t){const i={_0x361a68:407,_0x37cdaf:704},s=_0x3a2b68;return!Cesium__namespace[s(i._0x361a68)](t)&&(t={}),t.color=this.color,t[s(i._0x37cdaf)]=this.gapColor,t.dashLength=this.dashLength,t[s(3163)]=this.dashPattern,t.globalAlpha=this.globalAlpha,t}[_0x3a2b68(494)](e){const t={_0x504e60:2540,_0x393e4e:1368},i=_0x3a2b68;return this===e||e instanceof LineDotDashMaterialProperty&&Cesium__namespace[i(1368)].equals(this[i(t._0x504e60)],e[i(2540)])&&Cesium__namespace[i(t._0x393e4e)].equals(this.gapColor,e.gapColor)&&this.dashLength===e.dashLength&&this[i(3163)]===e.dashPattern}}registerPropertyClass(LineDotDash,LineDotDashMaterialProperty);class NeonLightMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t=_0x3a2b68;super(e),this.color=getCesiumColor(e.color,Cesium__namespace[t(2092)].fromCssColorString("#9b08fd")),this.speed=e.speed??2,this.globalAlpha=e.globalAlpha??1}getType(e){return NeonLight}getValue(e,t){const i={_0x478be8:2540,_0x16a205:4385,_0x1c6cc4:749},s=_0x3a2b68;return!Cesium__namespace.defined(t)&&(t={}),t.color=this[s(i._0x478be8)],t.speed=this[s(i._0x16a205)],t.globalAlpha=this[s(i._0x1c6cc4)],t}equals(e){const t=_0x3a2b68;return this===e||e instanceof NeonLightMaterialProperty&&Cesium__namespace.Property.equals(this[t(2540)],e.color)&&this.speed===e[t(4385)]}}registerPropertyClass(NeonLight,NeonLightMaterialProperty);class LineThreeDashMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x1e32b1:2540,_0x1a3cce:2092,_0x2cee82:3163,_0x275aa7:749},i=_0x3a2b68;super(e),this.color=getCesiumColor(e[i(t._0x1e32b1)],Cesium__namespace[i(t._0x1a3cce)][i(523)]),this.dashLength=e[i(4e3)]??16,this.widthRatio=e.widthRatio??.1,this.sidesColor=getCesiumColor(e.sidesColor,Cesium__namespace.Color.WHITE),this.sidesDashLength=e.sidesDashLength??32,this.sidesWidthRatio=e.sidesWidthRatio??.1,this[i(t._0x2cee82)]=e.dashPattern??255,this.globalAlpha=e[i(t._0x275aa7)]??1}getType(e){return LineThreeDash}getValue(e,t){const i={_0x437301:2540,_0x3a79c7:648},s=_0x3a2b68;return!Cesium__namespace.defined(t)&&(t={}),t[s(i._0x437301)]=getCesiumColor(this.color,Cesium__namespace.Color[s(523)],e),t.dashLength=this.dashLength,t.widthRatio=this[s(2003)],t.sidesColor=getCesiumColor(this.sidesColor,Cesium__namespace.Color.WHITE,e),t.sidesDashLength=this.sidesDashLength,t.sidesWidthRatio=this[s(i._0x3a79c7)],t.dashLength=this.dashLength,t.globalAlpha=this[s(749)],t}equals(e){const t={_0x211ef4:4385},i=_0x3a2b68;return this===e||e instanceof LineThreeDashMaterialProperty&&Cesium__namespace.Property.equals(this.color,e.color)&&this[i(t._0x211ef4)]===e.speed}}registerPropertyClass(LineThreeDash,LineThreeDashMaterialProperty);class ODLineMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x4612dd:2540,_0x20b5c9:4091,_0x3d9ccd:1431},i=_0x3a2b68;super(e),this[i(2540)]=getCesiumColor(e[i(t._0x4612dd)],new Cesium__namespace.Color(Math.random()*.5+.5,Math[i(412)]()*.8+.2,0,1)),this[i(t._0x20b5c9)]=getCesiumColor(e.bgColor,this.color.withAlpha(.1)),this[i(4385)]=e.speed??20+10*Math.random(),this[i(t._0x3d9ccd)]=e[i(1431)]??Math.random(),this.bidirectional=e.bidirectional??0,this.globalAlpha=e.globalAlpha??1}getType(e){return ODLine}[_0x3a2b68(3479)](e,t){const i={_0x3473c5:4128},s=_0x3a2b68;return!t&&(t={}),t[s(2540)]=this.color,t.speed=this.speed,t.startTime=this[s(1431)],t[s(4091)]=this[s(4091)],t[s(i._0x3473c5)]=this.bidirectional,t.globalAlpha=this.globalAlpha,t}[_0x3a2b68(494)](e){const t={_0x237690:4385,_0x2666b7:1431,_0x2559a3:4128},i=_0x3a2b68;return this===e||e instanceof ODLineMaterialProperty&&Cesium__namespace[i(1368)].equals(this.color,e.color)&&Cesium__namespace.Property.equals(this[i(4091)],e.bgColor)&&this[i(t._0x237690)]===e.speed&&this[i(t._0x2666b7)]===e[i(1431)]&&this.bidirectional===e[i(t._0x2559a3)]}}registerPropertyClass(ODLine,ODLineMaterialProperty);class PolyAsphaltMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x2dc358:3121},i=_0x3a2b68;super(e),this.color=getCesiumColor(e.color,new Cesium__namespace.Color(0,0,0,0)),this.size=e[i(t._0x2dc358)]??.02,this.frequency=e[i(2511)]??.2,this.globalAlpha=e[i(749)]??1}getType(e){return PolyAsphalt}[_0x3a2b68(3479)](e,t){const i=_0x3a2b68;return!Cesium__namespace.defined(t)&&(t={}),t[i(2540)]=this.color,t.size=this.size,t.frequency=this.frequency,t.globalAlpha=this.globalAlpha,t}[_0x3a2b68(494)](e){const t={_0x559b83:2540,_0x8ffe6a:3121},i=_0x3a2b68;return this===e||e instanceof PolyAsphaltMaterialProperty&&Cesium__namespace.Property[i(494)](this.color,e[i(t._0x559b83)])&&this.frequency===e.frequency&&this[i(t._0x8ffe6a)]===e.size}}registerPropertyClass(PolyAsphalt,PolyAsphaltMaterialProperty);class PolyBlobMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x4694ab:2339},i=_0x3a2b68;super(e),this[i(t._0x4694ab)]=getCesiumColor(e.evenColor,new Cesium__namespace.Color(1,1,1,.5)),this[i(2977)]=getCesiumColor(e.evenColor,new Cesium__namespace.Color(0,0,1,.5)),this[i(2511)]=e.frequency??10,this.globalAlpha=e.globalAlpha??1}getType(e){return PolyBlob}getValue(e,t){const i={_0x23e973:2339},s=_0x3a2b68;return!Cesium__namespace.defined(t)&&(t={}),t.evenColor=this[s(i._0x23e973)],t.evenColor=this.oddColor,t.frequency=this.frequency,t[s(749)]=this.globalAlpha,t}equals(e){const t={_0x5c82be:2339},i=_0x3a2b68;return this===e||e instanceof PolyBlobMaterialProperty&&Cesium__namespace.Property.equals(this[i(t._0x5c82be)],e.evenColor)&&Cesium__namespace.Property.equals(this.oddColor,e.oddColor)&&this.frequency===e[i(2511)]}}registerPropertyClass(PolyBlob,PolyBlobMaterialProperty);class PolyFacetMaterialProperty extends PolyBlobMaterialProperty{getType(e){return PolyFacet}}registerPropertyClass(PolyFacet,PolyFacetMaterialProperty);class PolyGradientMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x3fc364:4278,_0x2599f6:749},i=_0x3a2b68;super(e),this.color=getCesiumColor(e.color,new Cesium__namespace.Color(1,1,0,.5)),this.diffusePower=e.diffusePower??1.6,this.alphaPower=e[i(t._0x3fc364)]??1.5,this[i(3747)]=e.center??new Cesium__namespace.Cartesian2(.5,.5),this.globalAlpha=e[i(t._0x2599f6)]??1}getType(e){return PolyGradient}[_0x3a2b68(3479)](e,t){const i={_0x510110:407},s=_0x3a2b68;return!Cesium__namespace[s(i._0x510110)](t)&&(t={}),t.color=this.color,t.diffusePower=this.diffusePower,t[s(4278)]=this[s(4278)],t.center=this.center,t.globalAlpha=this[s(749)],t}equals(e){const t={_0x39350b:494},i=_0x3a2b68;return this===e||e instanceof PolyGradientMaterialProperty&&Cesium__namespace.Property[i(t._0x39350b)](this.color,e.color)&&this.diffusePower===e.diffusePower}}registerPropertyClass(PolyGradient,PolyGradientMaterialProperty);class PolyGrassMaterialProperty extends PolyBlobMaterialProperty{getType(e){return PolyGrass}}registerPropertyClass(PolyGrass,PolyGrassMaterialProperty);class PolyWoodMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x362f9c:1037},i=_0x3a2b68;super(e),this.evenColor=getCesiumColor(e.evenColor,new Cesium__namespace.Color(1,1,1,.5)),this.oddColor=getCesiumColor(e.evenColor,new Cesium__namespace.Color(0,0,1,.5)),this.frequency=e.frequency??10,this.noiseScale=e.noiseScale??new Cesium__namespace[i(3532)](.7,.5),this[i(1037)]=e[i(t._0x362f9c)]??27,this[i(749)]=e.globalAlpha??1}getType(e){return PolyWood}[_0x3a2b68(3479)](e,t){const i={_0x3ccd72:2339,_0x5cbc08:1037},s=_0x3a2b68;return!Cesium__namespace.defined(t)&&(t={}),t[s(2339)]=this.evenColor,t[s(i._0x3ccd72)]=this.oddColor,t.frequency=this[s(2511)],t.noiseScale=this.noiseScale,t[s(i._0x5cbc08)]=this[s(1037)],t.globalAlpha=this.globalAlpha,t}equals(e){const t={_0x41d1eb:1368,_0x39283a:494,_0x250840:2339,_0x464cc2:2977},i=_0x3a2b68;return this===e||e instanceof PolyWoodMaterialProperty&&Cesium__namespace[i(t._0x41d1eb)][i(t._0x39283a)](this[i(t._0x250840)],e.evenColor)&&Cesium__namespace[i(t._0x41d1eb)][i(494)](this[i(t._0x464cc2)],e.oddColor)&&this[i(2511)]===e.frequency}}registerPropertyClass(PolyWood,PolyWoodMaterialProperty);class RadarLineMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x8cc1c3:4385},i=_0x3a2b68;super(e),this.color=getCesiumColor(e.color,new Cesium__namespace.Color(0,0,0,0)),this.speed=e[i(t._0x8cc1c3)]??5,this.globalAlpha=e[i(749)]??1}[_0x3a2b68(1504)](e){return RadarLine}getValue(e,t){const i={_0x2b1957:2540,_0xe6c650:749},s=_0x3a2b68;return!Cesium__namespace[s(407)](t)&&(t={}),t.color=this[s(i._0x2b1957)],t.speed=this.speed,t.globalAlpha=this[s(i._0xe6c650)],t}[_0x3a2b68(494)](e){const t=_0x3a2b68;return this===e||e instanceof RadarLineMaterialProperty&&Cesium__namespace.Property.equals(this.color,e[t(2540)])&&this[t(4385)]===e.speed}}registerPropertyClass(RadarLine,RadarLineMaterialProperty);class RadarWaveMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t=_0x3a2b68;super(e),this[t(2540)]=getCesiumColor(e.color,new Cesium__namespace[t(2092)](0,0,0,0)),this[t(4385)]=e[t(4385)]??5,this.globalAlpha=e[t(749)]??1}[_0x3a2b68(1504)](e){return RadarWave}getValue(e,t){return!Cesium__namespace.defined(t)&&(t={}),t.color=this.color,t.speed=this.speed,t.globalAlpha=this.globalAlpha,t}equals(e){const t={_0x3f2985:2540,_0x3965e1:4385},i=_0x3a2b68;return this===e||e instanceof RadarWaveMaterialProperty&&Cesium__namespace[i(1368)].equals(this.color,e[i(t._0x3f2985)])&&this[i(t._0x3965e1)]===e[i(4385)]}}registerPropertyClass(RadarWave,RadarWaveMaterialProperty);class RectSlideMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x199c1a:1793,_0x5110dd:4385},i=_0x3a2b68;super(e),this.image=e[i(t._0x199c1a)],this[i(2540)]=getCesiumColor(e.color,new Cesium__namespace[i(2092)](1,1,1,.9)),this.speed=e[i(t._0x5110dd)]??1,this[i(2662)]=!!e.pure,this[i(749)]=e.globalAlpha??1}getType(e){return RectSlide}getValue(e,t){const i={_0x270217:4385},s=_0x3a2b68;return!Cesium__namespace.defined(t)&&(t={}),t.image=this.image,t.color=this.color,t[s(i._0x270217)]=this.speed,t.pure=this.pure,t.globalAlpha=this.globalAlpha,t}equals(e){const t={_0x352cfa:494,_0x3b0f02:4385},i=_0x3a2b68;return this===e||e instanceof RectSlideMaterialProperty&&Cesium__namespace.Property[i(t._0x352cfa)](this.color,e.color)&&this.image===e.image&&this.pure===e.pure&&this.speed===e[i(t._0x3b0f02)]}}registerPropertyClass(RectSlide,RectSlideMaterialProperty);class ScanLineMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x3c7f1a:1399,_0x2f840:749},i=_0x3a2b68;super(e),this.color=getCesiumColor(e.color,Cesium__namespace.Color[i(t._0x3c7f1a)]),this.speed=e.speed??10,this[i(t._0x2f840)]=e[i(t._0x2f840)]??1}[_0x3a2b68(1504)](e){return ScanLine}getValue(e,t){const i={_0x3d53ae:2540},s=_0x3a2b68;return!Cesium__namespace[s(407)](t)&&(t={}),t[s(i._0x3d53ae)]=this.color,t.speed=this.speed,t.globalAlpha=this.globalAlpha,t}equals(e){const t={_0xace4cc:494},i=_0x3a2b68;return this===e||e instanceof ScanLineMaterialProperty&&Cesium__namespace[i(1368)][i(t._0xace4cc)](this[i(2540)],e.color)&&this[i(4385)]===e.speed}}registerPropertyClass(ScanLine,ScanLineMaterialProperty);class TextMaterialProperty extends Image2MaterialProperty{constructor(e={}){const t={_0x418f09:3783,_0x315f10:2540,_0x49b5dd:2092,_0x2d9e64:1413},i=_0x3a2b68;e.font_size=e.font_size??70,super(e),this.transparent=e[i(t._0x418f09)]??!![],this[i(t._0x315f10)]=Cesium__namespace[i(2092)].WHITE,this._textStyles=LabelStyleConver.toCesiumVal(e,{fill:e.fill??!![],fillColor:new Cesium__namespace[i(t._0x49b5dd)](1,1,0,1),textBaseline:i(t._0x2d9e64),padding:10}),this._updateImage()}get text(){return this.options.text}set text(e){const t=_0x3a2b68;this.options[t(3640)]=e,this._updateImage()}get[_0x3a2b68(3027)](){return this._textStyles}set[_0x3a2b68(3027)](e){const t=_0x3a2b68;this._textStyles=LabelStyleConver.toCesiumVal(e,this._textStyles),this[t(1825)]()}[_0x3a2b68(1825)](){if(this._canvas=getTextImage(this.options.text,this._textStyles),this._canvas){var e;this.image=this._canvas;const t=(e=this.options)===null||e===void 0?void 0:e.onCustomCanvas;t&&t(this._canvas,this).then(i=>{this.image=copyCanvas(i)})}}}registerPropertyClass(Text,TextMaterialProperty);class WallScrollMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x264ac8:2540,_0x474bea:2540,_0xc44d8c:1034},i=_0x3a2b68;super(e),this.image=e.image,this[i(t._0x264ac8)]=getCesiumColor(e[i(t._0x474bea)],new Cesium__namespace.Color(0,0,0,1)),this.speed=e.speed??10,this.count=e.count??1,this.reverse=e.reverse??![],this.axisY=e[i(t._0xc44d8c)]??![],this.bloom=e.bloom??![],this.globalAlpha=e.globalAlpha??1}[_0x3a2b68(1504)](e){return WallScroll}getValue(e,t){const i={_0x14a90c:2540,_0x2a8e28:4385,_0x1bf75d:2969,_0x2dcee4:1034},s=_0x3a2b68;return!Cesium__namespace.defined(t)&&(t={}),t.image=this.image,t[s(i._0x14a90c)]=this[s(i._0x14a90c)],t.speed=this[s(i._0x2a8e28)],t[s(2969)]=this[s(i._0x1bf75d)],t.reverse=this.reverse,t.axisY=this[s(i._0x2dcee4)],t.bloom=this.bloom,t.globalAlpha=this.globalAlpha,t}equals(e){const t={_0x1a575f:2540,_0x539138:2969},i=_0x3a2b68;return this===e||e instanceof WallScrollMaterialProperty&&Cesium__namespace.Property[i(494)](this[i(t._0x1a575f)],e.color)&&this.image===e.image&&this[i(2969)]===e[i(t._0x539138)]&&this.reverse===e.reverse&&this.bloom===e.bloom&&this.speed===e.speed}}registerPropertyClass(WallScroll,WallScrollMaterialProperty);class WaterLightMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x163834:3953},i=_0x3a2b68;super(e),this.specularMap=e[i(1334)],this.normalMap=e.normalMap||Cesium__namespace.Material[i(t._0x163834)],this.alpha=e[i(838)]??.2,this.globalAlpha=e.globalAlpha??1}getType(e){return WaterLight}getValue(e,t){const i=_0x3a2b68;return!Cesium__namespace.defined(t)&&(t={}),t[i(1334)]=this.specularMap,t.normalMap=this.normalMap,t[i(838)]=this.alpha,t.globalAlpha=this.globalAlpha,t}[_0x3a2b68(494)](e){return this===e||e instanceof WaterLightMaterialProperty&&this.specularMap===e.specularMap&&this.normalMap===e.normalMap&&this.alpha===e.alpha}}registerPropertyClass(WaterLight,WaterLightMaterialProperty);class WaterMaterialProperty extends BaseMaterialProperty{constructor(e={}){const t={_0x4d158b:4208,_0x26e5b0:3464,_0x2d11cf:2049,_0x5aa067:917},i=_0x3a2b68;super(e),this.baseWaterColor=getCesiumColor(e.baseWaterColor,new Cesium__namespace.Color(.2,.3,.6,1)),this.blendColor=getCesiumColor(e.blendColor,new Cesium__namespace[i(2092)](0,1,.699,1)),this.specularMap=e.specularMap||Cesium__namespace[i(t._0x4d158b)].DefaultImageId,this[i(t._0x26e5b0)]=e.normalMap||Cesium__namespace[i(4208)].DefaultImageId,this[i(2511)]=e[i(2511)]??1e3,this[i(t._0x2d11cf)]=e.animationSpeed??.01,this.amplitude=e.amplitude??10,this[i(3225)]=e.specularIntensity??.5,this.fadeFactor=e[i(t._0x5aa067)]??1,this.globalAlpha=e.globalAlpha??1}[_0x3a2b68(1504)](e){return Water$1}[_0x3a2b68(3479)](e,t){const i={_0x52648e:2775,_0x24a794:3703,_0x3e593e:3225,_0x3192db:749},s=_0x3a2b68;return!t&&(t={}),t.baseWaterColor=this[s(i._0x52648e)],t.blendColor=this[s(i._0x24a794)],t.specularMap=this[s(1334)],t.normalMap=this.normalMap,t.frequency=this.frequency,t.animationSpeed=this.animationSpeed,t.amplitude=this.amplitude,t[s(i._0x3e593e)]=this.specularIntensity,t.fadeFactor=this.fadeFactor,this.globalAlpha!==1&&(t[s(2775)].alpha*=this.globalAlpha,t.blendColor.alpha*=this[s(i._0x3192db)]),t}equals(e){const t={_0x5747ed:2775,_0x53280e:494,_0x14aca0:2511,_0x1e2c47:627},i=_0x3a2b68;return this===e||e instanceof WaterMaterialProperty&&this[i(2775)][i(494)](e[i(t._0x5747ed)])&&this.blendColor[i(t._0x53280e)](e.blendColor)&&this.specularMap===e.specularMap&&this[i(3464)]===e.normalMap&&this[i(t._0x14aca0)]===e.frequency&&this.animationSpeed===e.animationSpeed&&this[i(627)]===e[i(t._0x1e2c47)]&&this.specularIntensity===e[i(3225)]&&this.fadeFactor===e.fadeFactor}}registerPropertyClass(Water$1,WaterMaterialProperty);var index$7={__proto__:null,TextMaterial,CylinderWaveMaterial,BaseMaterialProperty,CircleScanMaterialProperty,CircleWaveMaterialProperty,CylinderWaveMaterialProperty,DigitalFlowMaterialProperty,EllipsoidElectricMaterialProperty,EllipsoidWaveMaterialProperty,Image2MaterialProperty,LineBloomMaterialProperty,LineFlickerMaterialProperty,LineFlowColorMaterialProperty,LineFlowMaterialProperty,LineTrailMaterialProperty,LineDotDashMaterialProperty,NeonLightMaterialProperty,LineThreeDashMaterialProperty,ODLineMaterialProperty,PolyAsphaltMaterialProperty,PolyBlobMaterialProperty,PolyFacetMaterialProperty,PolyGradientMaterialProperty,PolyGrassMaterialProperty,PolyWoodMaterialProperty,RadarLineMaterialProperty,RadarWaveMaterialProperty,RectSlideMaterialProperty,ScanLineMaterialProperty,TextMaterialProperty,WallScrollMaterialProperty,WaterLightMaterialProperty,WaterMaterialProperty};class BaseGraphic extends BaseClass{constructor(e={}){const t={_0x39f6ad:2387,_0x5416e9:2006},i=_0x3a2b68;e.style=e.style||{},e.attr=e.attr||{},super(e),this.options=e,this[i(2383)]=e.id??e.attr.id??createGuid(),this._name=e[i(3307)]||e[i(3208)].name||"",this[i(4116)]=e.show??!![],this._private=e.private,e.popup&&this.bindPopup(e.popup,e[i(t._0x39f6ad)]),e.tooltip&&this.bindTooltip(e[i(951)],e[i(2999)]),e.contextmenuItems&&this.bindContextMenu(e.contextmenuItems,e.contextmenuItemsOptions),this[i(t._0x5416e9)]=State.INITIALIZED}get type(){return this._type}get id(){return this._id}set id(e){this._id=e}get uuid(){return this[_0x3a2b68({_0x4468ca:2383}._0x4468ca)]}get[_0x3a2b68(498)](){return this[_0x3a2b68({_0x51f0af:2006}._0x51f0af)]}get[_0x3a2b68(4326)](){return this._state===State.ADDED}get isDestroy(){return this[_0x3a2b68({_0x3ac909:2006}._0x3ac909)]===State.DESTROY||!this.options}get isPrivate(){return this._private?!![]:![]}get czmObject(){return null}get czmObjectEx(){return null}get show(){return this._show}set show(e){const t={_0x497fe4:1637,_0xce8122:3782,_0x5a04cd:442},i=_0x3a2b68;this._show!==e&&(this._show=e,this.czmObject&&(this.czmObject.show=this._show),this[i(t._0x497fe4)]&&this.czmObjectEx[i(t._0xce8122)](function(s){s.show=e}),this._showHook&&this._showHook(e),e?this.fire(EventType[i(t._0x5a04cd)]):this.fire(EventType.hide))}get name(){return this._name}set name(e){const t=_0x3a2b68;this[t(923)]=e}get attr(){return this.options.attr}set attr(e){this.options.attr=e,this.fire(EventType.updateAttr,{attr:e},!![])}get style(){const e={_0x3535bb:1941,_0x2775f3:2748},t=_0x3a2b68;var i;return(i=this[t(e._0x3535bb)])===null||i===void 0?void 0:i[t(e._0x2775f3)]}set style(e){this.setStyle(e)}get allowDrillPick(){return this.options.allowDrillPick}set allowDrillPick(e){const t={_0x50ce9d:1244},i=_0x3a2b68;this.options[i(t._0x50ce9d)]=e}get hasEdit(){const e=_0x3a2b68;return this._hasEdit&&!!(this.EditClass||this[e(4347)])}set[_0x3a2b68(3031)](e){this._hasEdit=e}get enabledEvent(){return this[_0x3a2b68(4053)]?this._layer.enabledEvent&&this._enabledEvent:this._enabledEvent}set enabledEvent(e){this._enabledEvent=e}get center(){return null}get centerPoint(){return LngLatPoint[_0x3a2b68({_0x325e9f:2101}._0x325e9f)](this.center)}get[_0x3a2b68(361)](){return!![]}addTo(e){const t=_0x3a2b68;return e&&e.addGraphic&&e[t(2847)](this),this}remove(e){const t={_0x2343eb:1155},i=_0x3a2b68;this[i(4053)]&&this[i(4053)][i(t._0x2343eb)](this,e)}[_0x3a2b68(1472)](e){const t={_0x193ac5:4204},i=_0x3a2b68;var s;return e._mars3d_layerId=(s=this._layer)===null||s===void 0?void 0:s.id,e[i(t._0x193ac5)]=this.id,this}[_0x3a2b68(2417)](e){const t={_0x25d0bf:4326,_0x21b43b:843,_0x1cf97f:4053,_0x140043:1941,_0x34b0a1:509,_0x5bf09a:1586,_0x309b75:2679,_0x146c4d:4184,_0x260773:1941,_0x55e34f:4053},i=_0x3a2b68;var s,r;this[i(t._0x25d0bf)]||(this[i(2006)]=State[i(t._0x21b43b)],this[i(t._0x1cf97f)]=e,this._map=e._map,!this._map&&logWarn("BaseGraphic:为了避免异常问题，请将图层添加到Map上再进行添加矢量数据的操作！"),this[i(t._0x140043)][i(t._0x34b0a1)]?this[i(1586)](this.options.eventParent):((s=this.options)===null||s===void 0?void 0:s[i(509)])===![]||this[i(t._0x5bf09a)](e),!this.czmObject&&this._mountedHook&&this._mountedHook(),this[i(t._0x309b75)]&&this._addedHook(this.style),(r=this._layer)!==null&&r!==void 0&&r._highlightOptions||(this.style.highlight?this.bindHighlight(this.style[i(4184)]):this.options[i(4184)]&&this.bindHighlight(this.options[i(t._0x146c4d)])),this.czmObject&&this.bindPickId(this.czmObject),this.czmObjectEx&&this.czmObjectEx.forEach(o=>{this.bindPickId(o)}),this[i(t._0x260773)].flyTo&&this[i(2961)]({duration:0}),this._state=State[i(3104)],this.fire(EventType.add),!this[i(702)]&&this.enabledEvent&&this[i(t._0x55e34f)].fire(EventType.addGraphic,{graphic:this},!![]))}[_0x3a2b68(1370)](){const e={_0x3df834:1941,_0x21c88a:4371,_0xfda4ee:509,_0x5ea855:4152,_0x7d6cb4:509,_0x5ac3aa:4053},t=_0x3a2b68;var i,s;this._state===State.ADDED&&(!this._layer||!this[t(e._0x3df834)]||(this[t(e._0x21c88a)](),this.unbindHighlight(),this.update&&this[t(1992)](),this._removedHook&&this._removedHook(),this.options&&(this._state=State.REMOVED,this.fire(EventType[t(1361)]),!this.isPrivate&&this[t(3256)]&&this._layer.fire(EventType[t(1155)],{graphic:this},!![]),(i=this.options)!==null&&i!==void 0&&i[t(e._0xfda4ee)]?this[t(e._0x5ea855)](this.options[t(509)]):((s=this[t(e._0x3df834)])===null||s===void 0?void 0:s[t(e._0x7d6cb4)])===![]||this.removeEventParent(this[t(e._0x5ac3aa)]),this._layer=null,this._map=null)))}_mountedHook(){}_addedHook(e){}[_0x3a2b68(3916)](){}enableControl(e){const t={_0x90480a:1374,_0x5c6990:676,_0x30c3a2:951},i=_0x3a2b68;this._map[i(t._0x90480a)].enabledMoveTarget=e,this._map[i(t._0x5c6990)]&&(this._map.popup.enabled=e),this._map.tooltip&&(this._map[i(t._0x30c3a2)].enabled=e),this._map[i(1071)]&&(this[i(1575)].contextmenu.enabled=e)}setOptions(e){const t={_0x17d288:400,_0x44f3ef:1941,_0x24ecb5:3208,_0x5aad80:1941,_0x43c442:1941,_0x113518:676,_0x5ee097:946},i=_0x3a2b68;if(!e||Object.keys(e)[i(t._0x17d288)]===0)return this;for(const s in e){const r=e[s];switch(s){case i(3307):case"show":case"position":case"positions":case"targetPosition":this.options[s]=r,this[s]=r;break;case"orientation":this[i(t._0x44f3ef)][s]=r,this.czmObject[s]=r;break;case i(t._0x24ecb5):{this.options.attr=merge(this[i(t._0x5aad80)].attr,e[i(3208)]),this.fire(EventType.updateAttr,{attr:e.attr},!![]);break}case"style":{this.options[i(2748)]=merge(this[i(t._0x43c442)][i(2748)],e.style),this._updateStyleBaseHook(e.style),this.fire(EventType.updateStyle,{style:e.style},!![]);break}default:{isObject(r)?this.options[s]=merge(this.options[s],r):this.options[s]=r;break}}}return(e[i(t._0x113518)]||e.popupOptions)&&this.bindPopup(this.options.popup,this.options.popupOptions),(e.tooltip||e.tooltipOptions)&&this[i(2678)](this.options.tooltip,this.options.tooltipOptions),(e.contextmenuItems||e[i(t._0x5ee097)])&&this.bindContextMenu(this.options.contextmenuItems,this.options.contextmenuItemsOptions),this._setOptionsHook&&this._setOptionsHook(this.options,e),this}[_0x3a2b68(1110)](e){const t={_0x35cc11:2748,_0x205629:1941,_0x34ef7a:4053},i=_0x3a2b68;var s;return e.material&&delete this.options[i(t._0x35cc11)].material,e[i(4089)]&&this[i(t._0x205629)].style.materialOptions&&delete this.options.style.materialOptions,this[i(t._0x205629)].style=merge(this.options[i(2748)],e),!((s=this[i(t._0x34ef7a)])!==null&&s!==void 0&&s._highlightOptions)&&Cesium__namespace.defined(e.highlight)&&(e.highlight?this[i(906)](this.style.highlight):this.unbindHighlight()),this[i(3319)](e),this.fire(EventType.updateStyle,{style:e},!![]),this}[_0x3a2b68(3319)](e){}setOpacity(e){clearTimeout(this._canrefresh),this._canrefresh=setTimeout(()=>{this.isAdded&&this.setStyle({globalAlpha:e})},500)}toGeoJSON(e){const t={_0x1d12d2:1603,_0x4ba899:1203,_0x43fd10:1528,_0x1bb225:3211},i=_0x3a2b68,s={type:"Feature",properties:{name:this[i(3307)],...this.attr,id:this.id,type:this[i(t._0x1d12d2)],style:this[i(t._0x4ba899)](this.style,!![])}};return this[i(3089)]?s.geometry=this._getGeoJsonGeometry(e):this.position?s[i(2152)]={type:"Point",coordinates:this.getCoordinate(e==null?void 0:e[i(t._0x43fd10)])}:this.positions&&(s[i(2152)]={type:"LineString",coordinates:this.getCoordinates(e==null?void 0:e.noAlt)}),Cesium__namespace.defined(this.options.styleType)&&(s.properties.styleType=this.options.styleType),this[i(1355)]&&this._toJSON_Ex(s[i(t._0x1bb225)]),s}toJSON(){const e={_0x2a74d5:2748,_0x4154e1:1498},t=_0x3a2b68,i={...getAttrVal(this[t(1941)],{onlySimpleType:!![]}),id:this.id,name:this.name,type:this.type,attr:this.attr,style:this._style2JsonBase(this[t(e._0x2a74d5)],![])};return this._getJsonPositions?this[t(e._0x4154e1)](i):this.coordinate?i.position=this.coordinate:this.coordinates?i.positions=this.coordinates:logError$1("toJSON:缺少坐标信息",this),Cesium__namespace[t(407)](this.options.styleType)&&this.options.styleType!==this[t(1603)]&&(i.styleType=this.options.styleType),this._toJSON_Ex&&this._toJSON_Ex(i),i}[_0x3a2b68(1203)](e,t){const i={_0x48ef6b:1909},s=_0x3a2b68;let r;return this._style2Json?(r=this._style2Json(e),e.highlight&&(r.highlight=this[s(1338)](e.highlight))):r=getAttrVal(e,{onlySimpleType:!![]}),e.label&&(r.label=LabelStyleConver.toJSON(e.label)),e.outlineStyle&&(r.outlineStyle=PolylineStyleConver[s(i._0x48ef6b)](e.outlineStyle)),r}[_0x3a2b68(3864)](){const e=_0x3a2b68;!this[e(3396)]||!this[e(1575)]||(this.unbindUpdateEvent(),this._map.on(EventType.preRender,this._map_preRenderHandler,this),this._map_preRenderHandler(this._map.scene))}unbindUpdateEvent(){const e={_0x252709:2971,_0x5743b2:1896},t=_0x3a2b68;this._map&&this._map[t(e._0x252709)](EventType[t(e._0x5743b2)],this._map_preRenderHandler,this)}[_0x3a2b68(410)](e){const t={_0x21f76d:2162,_0x503fe1:2186,_0x283408:3396},i=_0x3a2b68;var s;this._map&&((s=this[i(1941)])!==null&&s!==void 0&&s[i(t._0x21f76d)]&&this._last_preUpdateTime&&e._frameState.frameNumber-this[i(t._0x503fe1)]<this[i(1941)][i(2162)]||(this._last_preUpdateTime=e[i(2331)].frameNumber,this[i(t._0x283408)](e[i(2331)])))}[_0x3a2b68(1737)](e){const t=_0x3a2b68,i=this.positionsShow||this.positions;if(i&&i.length>0)return getRectangle(i,e==null?void 0:e.isFormat);if(this.position)return getRectangle([this[t(4076)]],e==null?void 0:e.isFormat)}getMaxHeight(){const e={_0x481571:2976},t=_0x3a2b68,i=this[t(e._0x481571)]||this.positions;return i&&i.length>0?getMaxHeight(i):this.position?getRectangle(this.position):0}fire(e,t={},i){const s={_0x2c7cbc:1109},r=_0x3a2b68;return t[r(2471)]=this,super[r(s._0x2c7cbc)](e,t,i)}flyTo(e={}){const t={_0x17c93e:2694,_0x56f8ae:3542},i=_0x3a2b68;if(!this._map)return Promise.resolve(![]);this.options[i(1553)]&&(e={...this.options[i(1553)],...e});let s;return this.positionsShow?s=this.positionsShow:this.positions?s=this[i(t._0x17c93e)]:this.position&&(s=[this.position]),e[i(t._0x56f8ae)]=this.style.clampToGround,this[i(1575)].flyToPositions(s,e)}getAddHeight(e=0){const t={_0x36575d:391},i=_0x3a2b68;let s=this.style[i(1475)];return Cesium__namespace.defined(s)?(isString(s)?(s=Number(template(s,this.attr,!![])),isNaN(s)&&(s=0)):Array[i(t._0x36575d)](s)&&(s=s[e]||0),s):0}bindHighlight(e){const t={_0x26ed6d:3017,_0x5bd396:350},i=_0x3a2b68;this.unbindHighlight(),this._highlightOptions=e,this[i(t._0x26ed6d)].type===EventType.click?this.on(EventType.click,this[i(3224)],this):(this.on(EventType.mouseOver,this[i(3224)],this),this.on(EventType.mouseOut,this[i(t._0x5bd396)],this))}unbindHighlight(){const e={_0x527cb0:3017,_0x317556:350,_0x408eb8:3017},t=_0x3a2b68;this[t(e._0x527cb0)]&&(this._highlightOptions[t(1603)]===EventType[t(383)]?this.off(EventType[t(383)],this._highlight_mouseEventHandler,this):(this[t(2971)](EventType.mouseOver,this._highlight_mouseEventHandler,this),this[t(2971)](EventType.mouseOut,this[t(e._0x317556)],this)),this._map.closeHighlight(),this[t(e._0x408eb8)]=null)}[_0x3a2b68(3224)](e){if(!this._map)return;const t=e==null?void 0:e.graphic;t?this._map.openHighlight(t,this._highlightOptions,e):this._map.closeHighlight()}_highlight_mouseOutHandler(e){this._map.closeHighlight()}[_0x3a2b68(4371)](){const e={_0x3a65e4:1999},t=_0x3a2b68;this.closePopup(),this.closeTooltip(),this.closeSmallTooltip(),this[t(e._0x3a65e4)]()}_getPopupPosition(){return this.position||this.center}[_0x3a2b68(1197)](e){return!!this.getPopupConfig(e)}getPopupConfig(e=!![]){const t={_0x1dbbca:4053,_0x3a4cb3:2876},i=_0x3a2b68;var s;return this._popupConfig?{...this._popupConfig}:e&&(s=this._layer)!==null&&s!==void 0&&s._popupConfig?{...this[i(t._0x1dbbca)][i(t._0x3a4cb3)]}:null}[_0x3a2b68(1781)](e,t={}){const i={_0x55c6a0:2876,_0x47385b:2387,_0x390fa5:676},s=_0x3a2b68;return this[s(i._0x55c6a0)]={content:e,options:t||this.options[s(i._0x47385b)],graphic:this,layer:this._layer},this._onEventHook&&this[s(2624)](s(i._0x390fa5)),this}[_0x3a2b68(1100)](e){return e?this._popupConfig=![]:this._popupConfig=null,this._onEventHook&&this._onEventHook("popup"),this}openPopup(e,t){const i={_0x2d22c4:3562,_0x421e7c:1575},s=_0x3a2b68,r=this[s(i._0x2d22c4)]();return r&&this._map&&(t&&(r.event=t),r.graphic=this,r[s(607)]=this._layer,this[s(i._0x421e7c)].popup.open(e||this._getPopupPosition(),r)),this}[_0x3a2b68(2792)](){return this._map&&this._map.popup.close(this),this}[_0x3a2b68(1435)](){const e=_0x3a2b68;if(this._map)return this[e(1575)].popup[e(1435)](this)}hasTooltip(e){return!!this.getTooltipConfig(e)}[_0x3a2b68(3072)](e=!![]){const t=_0x3a2b68;var i;return this._tooltipConfig?{...this[t(3126)]}:e&&(i=this[t(4053)])!==null&&i!==void 0&&i._tooltipConfig?{...this._layer[t(3126)]}:null}bindTooltip(e,t){const i=_0x3a2b68;return this[i(3126)]={content:e,options:t||this.options.tooltipOptions},this[i(2624)]&&this[i(2624)]("tooltip"),this}[_0x3a2b68(3638)](e){return e?this._tooltipConfig=![]:this._tooltipConfig=null,this._onEventHook&&this._onEventHook("tooltip"),this}openTooltip(e,t){const i=_0x3a2b68,s=this.getTooltipConfig();return s&&this[i(1575)]&&(s.graphic=this,s.layer=this._layer,t&&(s[i(2365)]=t),this._map.tooltip[i(2591)](e||this._getPopupPosition(),s)),this}closeTooltip(){return this._map&&this._map.tooltip.close(this),this}getTooltip(){const e=_0x3a2b68;if(this[e(1575)])return this._map.tooltip[e(563)](this)}hasContextMenu(e){return!!this.getContextMenu(e)}[_0x3a2b68(1593)](e=!![]){const t={_0x31ce10:2642,_0xc1cf56:2642},i=_0x3a2b68;var s;return this[i(t._0x31ce10)]?this._contextmenuConfig:e&&(s=this._layer)!==null&&s!==void 0&&s[i(t._0xc1cf56)]?this[i(4053)]._contextmenuConfig:null}bindContextMenu(e,t){const i={_0x4f3164:1941,_0x41d47c:3155},s=_0x3a2b68;return this._contextmenuConfig={content:e,options:t||this[s(i._0x4f3164)][s(i._0x41d47c)],graphic:this,layer:this._layer},this._onEventHook&&this._onEventHook("contextMenu"),this}unbindContextMenu(e){const t={_0x5a8bd7:2642,_0x4f1108:2624,_0x44a08c:2624},i=_0x3a2b68;return e?this[i(t._0x5a8bd7)]=![]:this[i(t._0x5a8bd7)]=null,this[i(t._0x4f1108)]&&this[i(t._0x44a08c)](i(594)),this}openContextMenu(e){const t={_0x3a4b47:4053,_0x3efe37:1575},i=_0x3a2b68,s=this.getContextMenu();return s&&this._map&&(s[i(2471)]=this,s.layer=this[i(t._0x3a4b47)],this[i(t._0x3efe37)].contextmenu.open(e||this._getPopupPosition(),s)),this}closeContextMenu(){return this.hasContextMenu()&&this._map&&this._map.contextmenu.close(this),this}[_0x3a2b68(1379)](e,t){return this._map&&this._map.openSmallTooltip(e,t),this}closeSmallTooltip(){const e=_0x3a2b68;return this._map&&this[e(1575)].closeSmallTooltip(),this}destroy(e){const t={_0x371007:2619,_0x398b7b:2435},i=_0x3a2b68;this[i(2006)]===State.DESTROY||this._noDestroy||(this._state!==State.REMOVED&&(this.clear&&this.clear(),this.remove()),super[i(t._0x371007)](e),this._state=State[i(t._0x398b7b)])}}class FlickerEntity{constructor(e={}){const t={_0x497df8:747},i=_0x3a2b68;this.color=Cesium__namespace.Color.YELLOW[i(t._0x497df8)](0)}[_0x3a2b68(2223)](e,t={}){const i={_0x36cb50:534,_0x47f6a5:2540},s={_0x2f7f88:4383,_0x4730fe:2600,_0x421a7d:3793,_0x10603c:3348,_0x2f0c2d:3404,_0x45053c:3793,_0x6a4a97:2600,_0x1c697d:1691,_0x2a1dd1:3793,_0x36f144:2191,_0x3ee08e:3203,_0x3dbbe1:1649,_0x143b5b:3258},r=_0x3a2b68,o=this;return this.stopFlicker(),this.entitys=e,this.maxAlpha=t[r(i._0x36cb50)]??.3,this.time=t[r(1036)],this.color=t.color??Cesium__namespace[r(2092)].YELLOW,this.color=this[r(i._0x47f6a5)].withAlpha(this.maxAlpha),this.onEnd=t.onEnd,this._startTime(),loopArrayForFun(e,function(c){const _={_0x2ad8b8:2540},l=r;c[l(4383)]&&(c[l(s._0x2f7f88)][l(s._0x4730fe)]=c.polygon.material,c.polygon[l(s._0x421a7d)]=new Cesium__namespace[l(s._0x10603c)](new Cesium__namespace.CallbackProperty(d=>o.color,![]))),c.polyline&&(c.polyline.material_bak=c.polyline.material,c.polyline.material=new Cesium__namespace.ColorMaterialProperty(new Cesium__namespace.CallbackProperty(d=>o.color,![]))),c.ellipsoid&&(c[l(s._0x2f0c2d)].material_bak=c.ellipsoid.material,c.ellipsoid.material=new Cesium__namespace.ColorMaterialProperty(new Cesium__namespace.CallbackProperty(d=>o.color,![]))),c.ellipse&&(c.ellipse.material_bak=c.ellipse[l(s._0x45053c)],c.ellipse[l(3793)]=new Cesium__namespace[l(3348)](new Cesium__namespace.CallbackProperty(d=>o.color,![]))),c.rectangle&&(c.rectangle[l(s._0x6a4a97)]=c.rectangle.material,c.rectangle.material=new Cesium__namespace[l(3348)](new Cesium__namespace.CallbackProperty(d=>o.color,![]))),c.wall&&(c[l(1691)].material_bak=c[l(s._0x1c697d)][l(s._0x421a7d)],c.wall[l(s._0x2a1dd1)]=new Cesium__namespace.ColorMaterialProperty(new Cesium__namespace[l(s._0x36f144)](d=>o[l(_._0x2ad8b8)],![]))),c.point&&(c.point.color_bak=c.point.color,c.point[l(2540)]=o.color),c.billboard&&(c[l(2009)].color_bak=c.billboard.color,c.billboard[l(2540)]=o.color),c.model&&(c.model.color_bak=c.model.color,c.model.color=o.color),c.label&&(c[l(s._0x3ee08e)][l(s._0x3dbbe1)]=c.label[l(s._0x143b5b)],c.label.fillColor=o.color)}),this}stopFlicker(){const e={_0x414d0c:3400,_0x2dca6b:2873},t={_0x261b0c:2600,_0x44c1bc:3404,_0x515399:1362,_0x179411:2600,_0x4777c5:1691,_0xd0acfa:2009,_0x51ccb5:3992,_0x5c4607:3992,_0xa33a42:3203},i=_0x3a2b68;return this._stopTime(),this.entitys&&(loopArrayForFun(this.entitys,function(s){const r=_0x20dc;s.polygon&&s.polygon.material_bak&&(s.polygon.material=s[r(4383)].material_bak),s.polyline&&s.polyline[r(t._0x261b0c)]&&(s.polyline.material=s.polyline.material_bak),s[r(t._0x44c1bc)]&&s[r(t._0x44c1bc)][r(t._0x261b0c)]&&(s.ellipsoid.material=s.ellipsoid.material_bak),s.ellipse&&s[r(t._0x515399)].material_bak&&(s[r(1362)].material=s[r(t._0x515399)][r(2600)]),s.rectangle&&s.rectangle.material_bak&&(s.rectangle[r(3793)]=s.rectangle[r(t._0x179411)]),s[r(t._0x4777c5)]&&s.wall.material_bak&&(s.wall.material=s.wall[r(t._0x179411)]),s.point&&s[r(2879)].color_bak&&(s[r(2879)].color=s.point.color_bak),s.billboard&&(s.billboard.color_bak?s.billboard.color=s[r(t._0xd0acfa)].color_bak:s.billboard.color=void 0),s[r(t._0x51ccb5)]&&(s[r(t._0x51ccb5)].color_bak?s.model.color=s.model.color_bak:s[r(t._0x5c4607)].color=void 0),s[r(t._0xa33a42)]&&s.label.fillColor_bak&&(s.label.fillColor=s[r(3203)][r(1649)])}),this[i(e._0x414d0c)]&&this.onEnd(this.entitys),delete this[i(e._0x2dca6b)]),this}_updateClr(){const e={_0x2cd3cc:2879},t=this;this.entitys&&loopArrayForFun(this.entitys,function(i){const s=_0x20dc;i[s(e._0x2cd3cc)]&&(i[s(2879)].color=t.color),i.billboard&&(i.billboard.color=t.color),i.model&&(i.model.color=t.color),i[s(3203)]&&(i.label[s(3258)]=t.color)})}_startTime(){const e={_0x2b7e07:3588},t=_0x3a2b68,i=30,s=this.maxAlpha/i;let r=0;this.interVal=setInterval(()=>{const o=_0x20dc;r+=s,r>this.maxAlpha&&(r=0),this.color=this.color.withAlpha(r),this[o(3610)]()},i),this[t(1036)]&&(this[t(e._0x2b7e07)]=setTimeout(()=>{this.stopFlicker()},this.time*1e3))}[_0x3a2b68(635)](){const e={_0x10f389:464},t=_0x3a2b68;this.interVal&&(clearInterval(this.interVal),this[t(e._0x10f389)]=null),this[t(3588)]&&(clearTimeout(this.timeEndVal),this.timeEndVal=null)}}function loopArrayForFun(n,e){const t=_0x3a2b68;if(n!=null)if(Array.isArray(n)){const i=[];for(let s=0,r=n[t(400)];s<r;s++)i.push(e(n[s]));return i}else return e(n)}class BaseEntity extends BaseGraphic{get dataSource(){var e;return(e=this._layer)===null||e===void 0?void 0:e.dataSource}get czmObject(){return this._entity}get[_0x3a2b68(1637)](){const e={_0x2c72c2:358},t=_0x3a2b68;let i=[];return this._primitive_label&&i.push(this._primitive_label),this[t(e._0x2c72c2)]&&(i=i.concat(this[t(358)])),i}get entity(){return this[_0x3a2b68({_0x285042:4335}._0x285042)]}get[_0x3a2b68(3511)](){const e=_0x3a2b68;var t;return(t=this[e(4335)])===null||t===void 0?void 0:t.point}get label(){const e={_0x83d8:4335,_0x317e92:2748,_0x4484f5:3203},t=_0x3a2b68;var i,s;if(this[t(3487)])return this[t(3487)];if((i=this._entity)!==null&&i!==void 0&&i.label)return this[t(e._0x83d8)].label;if((s=this[t(2748)])!==null&&s!==void 0&&s.label){var r;return(r=this[t(e._0x317e92)])===null||r===void 0?void 0:r[t(e._0x4484f5)]}return{}}get[_0x3a2b68(1524)](){return this._enabledEdit}get availability(){return this.options.availability}set availability(e){const t=_0x3a2b68;this.options.availability=e,this[t(3764)]&&(this.entity.availability=e)}reload(){const e={_0x2eb165:1941,_0x552a96:4076},t=_0x3a2b68;this.enabledEvent=![];const i=this[t(4053)];this._entity.show=![],this._onRemove(),delete this._entity,this._cancelPositionsCallback(),this.options[t(2694)]&&(this[t(2694)]=this.options.positions),this[t(e._0x2eb165)].position&&(this.position=this.options[t(e._0x552a96)]),this._onAdd(i),this.enabledEvent=!![]}_mountedHook(){}_addedHook(e){const t={_0x1cf715:3060},i=_0x3a2b68;this.dataSource.entities.add(this[i(3409)]),this.czmObjectEx[i(3782)](s=>{const r=i;s instanceof Cesium__namespace[r(t._0x1cf715)]&&this.dataSource.entities[r(3674)](s)}),this._clampToGround_reload&&(this._clampToGround_last=this[i(2748)].clampToGround)}_removedHook(){const e={_0x26f56e:3409},t={_0x565153:2848},i=_0x3a2b68;this.stopDraw(),this.stopEditing(),this.czmObject&&this.dataSource.entities.remove(this[i(e._0x26f56e)]),this.czmObjectEx&&this.czmObjectEx.forEach(s=>{const r=i;s instanceof Cesium__namespace.Entity&&this[r(t._0x565153)].entities.remove(s)}),this._primitive_label&&(this._layer.labelCollection.remove(this._primitive_label),delete this._primitive_label)}[_0x3a2b68(2065)](e){const t=_0x3a2b68;return e.entityCollection&&e.entityCollection.remove(e),e[t(2383)]=this.id,e}_updateEditDraggers(){var e;(e=this.editing)!==null&&e!==void 0&&e.enabled&&this.editing.updateDraggers()}[_0x3a2b68(3319)](e){const t={_0x432a1b:3542,_0x2039b9:2242,_0x5d493e:770},i=_0x3a2b68;var s;if(!(!this.czmObject||!e)){if(this._clampToGround_reload&&Cesium__namespace.defined(e[i(t._0x432a1b)])&&e.clampToGround!==this._clampToGround_last){const r=this.isEditing;this.reload(),this._clampToGround_last=e.clampToGround,r&&this.startEditing();return}return(Cesium__namespace.defined(e[i(3798)])||Cesium__namespace[i(407)](e.addHeight))&&(this._positions_draw?(this[i(2694)]=this._positions_draw,this[i(2e3)](![])):this.positions=this.positionsShow),this._updateStyleHook(this.style,e),this._updateLabelStyleHook(this.style,e),this._getOutlinePositions&&this[i(t._0x2039b9)](this._getOutlinePositions(),this.style),this._updateExOpacity&&Cesium__namespace.defined(e.globalAlpha)&&this._updateExOpacity(e.globalAlpha),this._isCallbackPositions&&this._updateDistanceDisplayConditionByEdit(),(s=this[i(t._0x5d493e)])!==null&&s!==void 0&&s[i(3174)]&&this.editing._updateStyleHook(e),this}}_updateDistanceDisplayConditionByEdit(){const e={_0x1afddd:2978,_0x429864:1245,_0x1a352f:2266,_0x41e87a:358,_0x1377d5:358,_0xe9353:2191,_0x522a07:1363,_0x3d5a97:2169},t=_0x3a2b68;let i;const s=this.center;if(s?i=Cesium__namespace[t(e._0x1afddd)].distance(s,new Cesium__namespace.Cartesian3):i=(Cesium__namespace.Ellipsoid.WGS84.minimumRadius+Cesium__namespace[t(e._0x429864)].WGS84.maximumRadius)/2,this._isCallbackPositions?this[t(e._0x1a352f)](i):this.updateDistanceDisplayCondition(),this[t(e._0x41e87a)])for(let r=0,o=this._entity_outlines.length;r<o;r++){const c=this[t(e._0x1377d5)][r].polyline;this.style.distanceDisplayCondition?c[t(2694)]instanceof Cesium__namespace[t(e._0xe9353)]&&this.style.clampToGround?this[t(1363)](c,i):this[t(e._0x522a07)](c):c[t(e._0x3d5a97)]=void 0}}updateDistanceDisplayCondition(e=0){const t={_0x3a3cda:3511},i=_0x3a2b68;this.style.distanceDisplayCondition?this[i(t._0x3a3cda)].distanceDisplayCondition=new Cesium__namespace.DistanceDisplayCondition(Number((this.style.distanceDisplayCondition_near??0)+e),Number((this.style.distanceDisplayCondition_far??Number.MAX_VALUE)+e)):this[i(3511)].distanceDisplayCondition=void 0}updateOutlinesDistanceDisplayCondition(e,t=0){const i={_0x262765:2617},s=_0x3a2b68;e.distanceDisplayCondition=new Cesium__namespace[s(2091)](Number((this.style.distanceDisplayCondition_near??0)+t),Number((this.style.distanceDisplayCondition_far??Number[s(i._0x262765)])+t))}[_0x3a2b68(2019)](e,t){}[_0x3a2b68(3694)](e,t=!![]){const i={_0x1fe696:2359,_0x13b31e:400,_0x41a874:2603},s=_0x3a2b68;var r;t&&(this._map.closeHighlight(),this._map[s(i._0x1fe696)]=this);const o=e||this._highlightOptions||((r=this._layer)===null||r===void 0?void 0:r[s(3017)]);if(o){const c=[];for(const l in o)l!=="type"&&!Cesium__namespace.defined(this.style[l])&&c.push(l);c[s(i._0x13b31e)]>0&&logWarn("openHighlight：原有style中不存在以下属性，关闭高亮时将无法恢复",c);const _=merge(clone(this.style),o);this._updateStyleHook(_,o),this._updateLabelStyleHook(_,o),this._getOutlinePositions&&this._updateOutlineStyle(this[s(i._0x41a874)](),_),this.fire(EventType.highlightOpen,{},!![])}}closeHighlight(){const e={_0x1c1047:4363,_0x2c9f6b:1109},t=_0x3a2b68;var i;!this.isAdded||((i=this[t(1575)])===null||i===void 0?void 0:i.last_highlighGraphic)!==this||(this._updateStyleHook(this.style,this.style),this[t(e._0x1c1047)](this.style,this.style),this[t(2603)]&&this._updateOutlineStyle(this._getOutlinePositions(),this[t(2748)]),this[t(1575)]._clearLastHighlight(),this[t(e._0x2c9f6b)](EventType.highlightClose,{},!![]))}_createEntity(e){const t={_0x1596f7:3307,_0x4588e7:1941,_0x294322:514,_0x4427c5:1941,_0x5b02fc:783},i=_0x3a2b68;this.options.onBeforeCreate&&(e=this.options.onBeforeCreate(e)||e),this._onBeforeCreate&&(e=this[i(4255)](e)||e);const s={id:this.id,name:this[i(t._0x1596f7)]||this.id,properties:this.attr,show:this.show,parent:this[i(t._0x4588e7)].parent};return this[i(t._0x4588e7)][i(t._0x294322)]&&(s[i(t._0x294322)]=this.options.availability),this[i(t._0x4427c5)].description&&(s.description=this.options[i(t._0x5b02fc)]),this.options[i(2794)]&&(s.viewFrom=this.options.viewFrom),this.options.parent&&(s.parent=this.options.parent),new Cesium__namespace.Entity({...s,...e})}_updateLabelStyleHook(e,t){const i={_0x1c7e5f:3487,_0x33f77b:407,_0x1c7fdb:4335,_0x3e7b17:3208,_0x546c46:3203,_0x3fdce5:407,_0x1327df:2551,_0x1d327c:749},s=_0x3a2b68;if(t!=null&&t.label)if(Cesium__namespace[s(407)](e.clampToGround)&&!Cesium__namespace.defined(e.label.clampToGround)&&(t[s(3203)].clampToGround=e.clampToGround),this._primitive_label){var r,o,c,_;LabelStyleConver.toCesiumVal(e.label,this[s(i._0x1c7e5f)],this.attr),(Cesium__namespace[s(i._0x33f77b)](t==null||(r=t.label)===null||r===void 0?void 0:r.position)||Cesium__namespace[s(407)](t==null||(o=t.label)===null||o===void 0?void 0:o[s(4241)])||Cesium__namespace[s(407)](t==null||(c=t.label)===null||c===void 0?void 0:c.addHeight)||Cesium__namespace.defined(t==null||(_=t.label)===null||_===void 0?void 0:_.setHeight))&&this[s(2098)]()}else if(this[s(i._0x1c7fdb)].label){var l,d,f;LabelStyleConver.toCesiumVal(e.label,this._entity.label,this[s(i._0x3e7b17)]),(Cesium__namespace.defined(t==null||(l=t.label)===null||l===void 0?void 0:l.height)||Cesium__namespace.defined(t==null||(d=t[s(i._0x546c46)])===null||d===void 0?void 0:d.addHeight)||Cesium__namespace[s(i._0x3fdce5)](t==null||(f=t.label)===null||f===void 0?void 0:f[s(3798)]))&&this._updateLabelPosition()}else this._addLabel();else Cesium__namespace.defined(t==null?void 0:t.globalAlpha)&&this[s(i._0x1327df)](t[s(i._0x1d327c)])}[_0x3a2b68(1286)](){const e={_0x247195:3090,_0x48b40a:3090},t=_0x3a2b68,i=this.style.label;if(!i||!i.text)return;Cesium__namespace.defined(this.style.clampToGround)&&!Cesium__namespace.defined(i.clampToGround)&&!Cesium__namespace.defined(i.height)&&(i.clampToGround=this.style.clampToGround);const s=LabelStyleConver.toCesiumVal(this.style.label,{},this[t(3208)]);return s.show=this.show,s[t(4076)]=this._getLablePosition(),this._primitive_label&&this._layer[t(e._0x247195)][t(1361)](this._primitive_label),this[t(3487)]=this._layer[t(e._0x48b40a)].add(s),this.bindPickId(this._primitive_label),this._primitive_label}_updateLabelPosition(){this[_0x3a2b68({_0x58725b:3487}._0x58725b)]&&(this._primitive_label.position=this._getLablePosition())}_updateLabelOpacity(e){const t={_0x132161:3487,_0x5df73b:442},i=_0x3a2b68;var s;(s=this._entity)!==null&&s!==void 0&&s.label&&LabelStyleConver.setOpacity(this[i(4335)].label,e),this[i(t._0x132161)]&&this._primitive_label[i(t._0x5df73b)]&&LabelStyleConver.setOpacity(this._primitive_label,e)}_getLablePosition(){const e={_0xe411f4:3747,_0x47f2c6:738,_0x33ab3e:4076,_0x47d1e1:407,_0x362fd5:3208},t=_0x3a2b68,i=this.style.label;let s;if(i.position)if(i[t(4076)]===t(e._0xe411f4))s=this[t(1451)];else if(isString(i.position)){const c=template(i[t(4076)],this.attr,!![]);c&&(s=LngLatPoint.parse(c).toCartesian())}else s=LngLatPoint[t(e._0x47f2c6)](i[t(e._0x33ab3e)]).toCartesian();if(!s&&(s=this.center),!s)return new Cesium__namespace.Cartesian3;if(Cesium__namespace[t(407)](i.height)||Cesium__namespace[t(e._0x47d1e1)](this.style[t(4241)])){const c=i.height??this.style[t(4241)];s=setPositionsHeight(s,c)}Cesium__namespace.defined(this.style.diffHeight)&&(s=addPositionsHeight(s,this.style[t(1882)]));let r=i.setHeight;Cesium__namespace[t(407)](r)&&(isString(r)&&(r=Number(template(r,this.attr,!![])),isNaN(r)&&(r=0)),s=setPositionsHeight(s,r));let o=i.addHeight;return Cesium__namespace[t(407)](o)&&(isString(o)&&(o=Number(template(o,this[t(e._0x362fd5)],!![])),isNaN(o)&&(o=0)),s=addPositionsHeight(s,o)),s}_createLabel(e={},t){const i={_0x213fff:1603,_0xfd6919:2598,_0x2e94f9:2363,_0x135c6d:4053},s={_0x248d6e:1969},r=_0x3a2b68;if(e.type&&e[r(i._0x213fff)]!=="label"){const o=create$4(e.type,{position:t,style:e,hasEdit:![],isPrivate:!![]});return Object[r(i._0xfd6919)](o,{text:{set:function(c){const _=r;this.attr.text=c,this.style[_(s._0x248d6e)](c,this)},get:function(){return this.attr.text}}}),this._layer.addGraphic(o),o}else{const o=LabelStyleConver[r(1304)]({color:"#ffffff",font_size:20,outline:!![],outlineColor:"#000000",outlineWidth:3,background:!![],backgroundColor:r(i._0x2e94f9),backgroundOpacity:.5,scaleByDistance:!![],scaleByDistance_far:8e5,scaleByDistance_farValue:.5,scaleByDistance_near:1e3,scaleByDistance_nearValue:1,pixelOffsetY:-15,horizontalOrigin:Cesium__namespace.HorizontalOrigin.LEFT,verticalOrigin:Cesium__namespace.VerticalOrigin[r(3795)],visibleDepth:![],...e});t&&(o.position=t);const c=this[r(i._0x135c6d)].labelCollection.add(o);return this.bindPickId(c),c._noMousePick=!![],c.hasEdit=![],c}}_removeLabel(e){const t={_0x18a854:4053,_0x2b43e9:1155,_0x3352d0:3090},i=_0x3a2b68;e.isAdded?this[i(t._0x18a854)][i(t._0x2b43e9)](e,!![]):this[i(4053)][i(t._0x3352d0)].remove(e)}_getOutlineStyle(e,t){const i={_0x1f96e8:3793,_0x1d3e38:1582,_0x48b647:3559,_0x2566fb:1091,_0x124148:4201},s=_0x3a2b68,r={...e};return delete r[s(i._0x1f96e8)],delete r.materialType,delete r.materialOptions,delete r[s(i._0x1d3e38)],delete r[s(i._0x48b647)],delete r[s(i._0x2566fb)],delete r[s(601)],delete r.outlineStyle,{...r,show:e[s(1582)]??![],color:e[s(3559)]??Cesium__namespace.Color[s(1948)],opacity:e[s(1091)],width:e.outlineWidth??1,arcType:e[s(4342)]??e.clampToGround?Cesium__namespace[s(i._0x124148)].GEODESIC:Cesium__namespace.ArcType.NONE,...e.outlineStyle,...t}}_updateOutlineStyle(e,t,i){const s={_0x4451c6:1079,_0xf53813:3511,_0x1bcc96:2694,_0x5419e8:2694,_0x23ace8:1475,_0x249949:1956,_0xa98489:1472,_0x242d90:358,_0x4c085a:553,_0x5ccc47:442,_0x4ef572:517,_0x2bf23c:2540,_0x34ae39:1948},r=_0x3a2b68;var o;if(!this.entityGraphic)return;const c=this[r(s._0x4451c6)](t,i);if(c.show&&(this.style.diffHeight??0)===0&&(c.width>1||t.clampToGround||((o=this._entity_outlines)===null||o===void 0?void 0:o.length)>0)){if(this[r(s._0xf53813)].outline=![],this._entity_outlines)for(let _=0,l=this._entity_outlines.length;_<l;_++){const d=this[r(358)][_].polyline;if(e&&e[_]){let f=e[_];f instanceof Cesium__namespace[r(2191)]?d[r(s._0x1bcc96)]=f:Array.isArray(f)&&f[r(400)]>0&&(Cesium__namespace.defined(c[r(4241)])&&(f=setPositionsHeight(f,c.height)),Cesium__namespace.defined(c.setHeight)&&(f=setPositionsHeight(f,c.setHeight)),Cesium__namespace.defined(c.addHeight)&&(f=addPositionsHeight(f,c.addHeight)),c.closure??!![]?d.positions=f.concat(f[0]):d.positions=f)}PolylineStyleConver.toCesiumVal(c,d,!![])}else if(e){this._entity_outlines=[];for(let _=0,l=e.length;_<l;_++){let d=e[_];const f=PolylineStyleConver.toCesiumVal(c,{},!![]);d instanceof Cesium__namespace.CallbackProperty?f[r(s._0x5419e8)]=d:Array.isArray(d)&&d.length>0&&(Cesium__namespace.defined(c[r(4241)])&&(d=setPositionsHeight(d,c[r(4241)])),Cesium__namespace.defined(c.setHeight)&&(d=setPositionsHeight(d,c.setHeight)),Cesium__namespace.defined(c.addHeight)&&(d=addPositionsHeight(d,c[r(s._0x23ace8)])),c[r(4121)]??!![]?f.positions=d[r(4083)](d[0]):f.positions=d);const g=this[r(s._0x249949)]({id:this.id+"-outline"+_,polyline:f,show:this.show});this[r(s._0xa98489)](g),this._entity_outlines.push(g),this.isAdded&&this.dataSource.entities.add(g)}}return!![]}else{if(this._entity_outlines)for(let _=0,l=this[r(s._0x242d90)].length;_<l;_++){const d=this[r(s._0x242d90)][_][r(s._0x4c085a)];d.show=![]}return this[r(s._0xf53813)].outline=c[r(s._0x5ccc47)],this[r(3511)].outlineWidth=c[r(s._0x4ef572)],c.show&&(this.entityGraphic.outlineColor=getCesiumColor(c[r(s._0x2bf23c)],Cesium__namespace.Color[r(s._0x34ae39)])),![]}}_updateOutlineOpacity(e){const t={_0x4d113f:358,_0x14295f:407,_0x28e5f4:3511,_0x2dad24:3511,_0x514855:1661,_0x2bb2d1:747},i=_0x3a2b68;var s;if(this._entity_outlines&&this._entity_outlines.length>0)for(let o=0,c=this[i(t._0x4d113f)][i(400)];o<c;o++){var r;const _=this[i(t._0x4d113f)][o].polyline;Cesium__namespace[i(t._0x14295f)](_==null||(r=_.material)===null||r===void 0?void 0:r.globalAlpha)?_.material[i(749)]=e:this[i(2242)](null,this.style)}if((s=this[i(t._0x28e5f4)])!==null&&s!==void 0&&s.outline&&this[i(3511)].outline.getValue()){const o=getCesiumColor(this[i(t._0x2dad24)].outlineColor,Cesium__namespace.Color.WHITE);!Cesium__namespace[i(407)](this.entityGraphic._outlineColor_alpha)&&(this.entityGraphic[i(t._0x514855)]=o[i(838)]),this.entityGraphic.outlineColor=o[i(t._0x2bb2d1)](this.entityGraphic._outlineColor_alpha*e)}}_updateOutlineToCallback(){const e={_0x94dd77:400,_0x2a5355:2694},t=_0x3a2b68;if(this._entity_outlines)for(let i=0,s=this._entity_outlines[t(e._0x94dd77)];i<s;i++){const r=this._entity_outlines[i];r.polyline.positions instanceof Cesium__namespace.CallbackProperty||(r.polyline[t(e._0x2a5355)]=new Cesium__namespace.CallbackProperty(o=>this.outlinePositions,![]))}}_cancelOutlinePositionsCallback(){const e=_0x3a2b68;if(this._entity_outlines)for(let t=0,i=this._entity_outlines[e(400)];t<i;t++){const s=this[e(358)][t];s[e(553)].positions instanceof Cesium__namespace.CallbackProperty&&(s.polyline.positions=this.outlinePositions)}}setOpacity(e){const t={_0x19462f:2748,_0x2196f1:749,_0x3853d5:1648},i=_0x3a2b68;if(this[i(t._0x19462f)][i(t._0x2196f1)]=e,this._updateEntityOpacity(this[i(3511)],e)){this._updateLabelOpacity(e),this[i(t._0x3853d5)](e),this._updateExOpacity&&this[i(1017)](e);return}super.setOpacity(e)}_updateEntityOpacity(e,t){const i={_0x597c21:749,_0x132f1b:1948},s=_0x3a2b68,r=e==null?void 0:e.material;if(!r)return![];if(Cesium__namespace.defined(r==null?void 0:r[s(i._0x597c21)]))return r.globalAlpha=t,!![];if(r._mars_type===s(2092)||r[s(3431)]==="Image"){const o=getCesiumColor(r.color,Cesium__namespace.Color[s(i._0x132f1b)]);return!Cesium__namespace.defined(r._color_alpha)&&(r._color_alpha=o.alpha),r.color=o.withAlpha(r._color_alpha*t),!![]}return![]}[_0x3a2b68(2223)](e){const t={_0x4d70b3:3419,_0x426b64:2223,_0xf1e293:3419},i=_0x3a2b68;!this.flickerEntity&&(this.flickerEntity=new FlickerEntity);const s=this.czmObjectEx.concat(this[i(3409)]);return this[i(t._0x4d70b3)][i(t._0x426b64)](s,e),this[i(t._0xf1e293)]}stopFlicker(){const e={_0x7e7787:1552},t=_0x3a2b68;return this.flickerEntity?this.flickerEntity[t(e._0x7e7787)]():null}[_0x3a2b68(3194)](e){const t={_0xaa34db:1832,_0x227b76:1803,_0x317a12:2296,_0x5cfd81:1941,_0x292fb2:1374,_0x214e85:1575},i=_0x3a2b68;if(this[i(t._0xaa34db)])return this;if(this._enabledDraw=!![],e&&this[i(t._0x227b76)](e),!this[i(1575)])throw new Error(i(t._0x317a12));this._drawEndEventType=e[i(t._0x5cfd81)].drawEndEventType??EventType[i(1459)],this._drawDelEventType=e[i(1941)].drawDelEventType??EventType.rightClick,this[i(1575)][i(t._0x292fb2)].noPickEntity=this._entity,this[i(t._0x214e85)]._setEditCursor(!![]),this.enableControl(![]),this._setPositionsToCallback(),this._startDrawHook(),this.fire(EventType.drawStart,{drawtype:this.type,graphic:this},!![])}[_0x3a2b68(608)](){const e={_0xe3ad19:1575,_0x1b7fb3:2206,_0x302122:1361,_0xe322cd:1941,_0x2b12a3:1603,_0x46196c:3531,_0x3cedd7:583},t=_0x3a2b68;var i,s,r,o;if(!this._enabledDraw)return this;if(this._stopDrawHook(),this[t(2098)](),this[t(e._0xe3ad19)]._setEditCursor(![]),this.enableControl(!![]),this._map.closeSmallTooltip(),this._map.mouseEvent.noPickEntity=null,this._enabledDraw=![],this.lastPointTemporary){var c;((c=this._positions_draw)===null||c===void 0?void 0:c.length)>0&&this[t(e._0x1b7fb3)].pop(),this._position_draw&&(this[t(1529)]=void 0),this.updateAttrForDrawing(![])}if(this.lastPointTemporary=![],!this._position_draw&&(!this._positions_draw||((i=this[t(2206)])===null||i===void 0?void 0:i.length)===0))return this.remove(!![]),void 0;if(this._positions_draw&&this._positions_draw.length<this._minPointNum)return this[t(e._0x302122)](!![]),void 0;this._layer[t(e._0xe322cd)].isRestorePositions&&this._cancelPositionsCallback(),this.fire(EventType[t(465)],{drawtype:this[t(e._0x2b12a3)],positions:this[t(2206)]},!![]),(s=this[t(e._0xe322cd)])!==null&&s!==void 0&&s.success&&this.options.success(this),(r=this[t(1941)])!==null&&r!==void 0&&(o=r[t(e._0x46196c)])!==null&&o!==void 0&&o[t(e._0x3cedd7)]&&this.options._promise.resolve(this)}_setPositionsToCallback(){}[_0x3a2b68(2686)](){}_startDrawHook(){}[_0x3a2b68(2880)](){}[_0x3a2b68(3128)](e){const t={_0x1d98d2:1127,_0x23a61c:1379,_0x4208de:3600,_0x2d4d2f:2500,_0x1ee765:436,_0x33b72c:3605,_0x43563f:1575,_0x1b431c:1575},i=_0x3a2b68,s=e[i(t._0x1d98d2)]??e[i(4076)];if(this._positions_draw[i(400)]<=1&&isPCBroswer())this._map[i(t._0x23a61c)](s,this._map.getLangText(i(4044)));else if(this[i(2206)].length<this[i(3100)])this._map[i(t._0x23a61c)](s,this._map[i(3600)]("_单击增加点"));else if(this[i(2206)][i(400)]>=this._maxPointNum)this._map.openSmallTooltip(s,this[i(1575)][i(t._0x4208de)]("_单击完成绘制"));else{let r;if(isPCBroswer()){let o="";(this[i(1941)].hasDrawDelPoint??!![])&&(o=", "+this._map.getLangText(i(t._0x2d4d2f))),r=this._map.getLangText(i(t._0x1ee765))+o+"<br/>"+this[i(1575)].getLangText(i(t._0x33b72c))}else r=this[i(t._0x43563f)].getLangText(i(t._0x1ee765));this[i(t._0x1b431c)].openSmallTooltip(s,r)}}_onMouseMoveHandler(e){const t={_0x470c48:3128,_0x1e713d:875,_0x1d7040:1941,_0x50eab2:2375,_0x5d3d5f:2206,_0x4ebcdb:1109},i=_0x3a2b68;this[i(t._0x470c48)](e);const s=e.cartesian;if(s){if(this.options[i(t._0x1e713d)]&&!this[i(t._0x1d7040)].validDrawPosition(s,this))return;this[i(t._0x50eab2)]&&this._positions_draw.pop(),this[i(2375)]=!![],this[i(t._0x5d3d5f)].push(s),this.updateAttrForDrawing(![]),this[i(t._0x4ebcdb)](EventType.drawMouseMove,{...e,drawtype:this.type,positions:this._positions_draw},!![])}}_onClickHandler(e){const t={_0x25da77:3407,_0x43fae3:809,_0x14211d:4137,_0x16ac69:1109},i=_0x3a2b68,s=new Date().getTime()-(this[i(t._0x25da77)]||0);if(this._last_clickTime&&s<200||(this._last_clickTime=new Date()[i(t._0x43fae3)](),this._last_clickPositionX&&Math.abs(this[i(t._0x14211d)]-e.windowPosition.x)<10&&Math.abs(this._last_clickPositionY-e.windowPosition.y)<10))return;this[i(4137)]=e.windowPosition.x,this._last_clickPositionY=e.windowPosition.y;let r=e.cartesian;if(!r&&this.lastPointTemporary&&(r=this._positions_draw[this._positions_draw.length-1]),r){var o;if(this.options.validDrawPosition&&!this.options[i(875)](r,this))return;this[i(2375)]&&this._positions_draw[i(2980)](),this.lastPointTemporary=![],this.removeNearPoint(),(o=this[i(1941)])!==null&&o!==void 0&&o.addHeight&&(r=addPositionsHeight(r,this.options.addHeight)),this._positions_draw.push(r),this[i(2e3)](![]),!isPCBroswer()&&this._showDrawMouseMoveSmallTooltip(e),this[i(t._0x16ac69)](EventType.drawAddPoint,{...e,drawtype:this.type,positions:this._positions_draw},!![]),this._positions_draw[i(400)]>=this._maxPointNum&&this.stopDraw()}}_onRightClickHandler(e){const t=_0x3a2b68;this._positions_draw.pop();const i=e.cartesian;i&&(this.lastPointTemporary&&this._positions_draw.pop(),this[t(2375)]=!![],this.fire(EventType[t(780)],{...e,drawtype:this.type,positions:this[t(2206)]},!![]),this._positions_draw.push(i),this[t(2e3)](![]))}[_0x3a2b68(3767)](e){e[_0x3a2b68({_0x1311b9:1603}._0x1311b9)]!==EventType.dblClick&&(this.lastPointTemporary=![]),this.removeNearPoint(),this.endDraw()}[_0x3a2b68(3960)](){const e={_0x26728d:400},t=_0x3a2b68;if(!(this._positions_draw[t(e._0x26728d)]<3))for(let i=this._positions_draw[t(400)]-1;i>0;i--){const s=this._positions_draw[i],r=this._positions_draw[i-1];if(Cesium__namespace.Cartesian3.distance(s,r)<.01)this._positions_draw.splice(i,1);else break}}endDraw(){const e={_0x300a4a:1832},t=_0x3a2b68;return this[t(e._0x300a4a)]?this[t(2206)]&&this[t(2206)].length<this._minPointNum?![]:(this[t(2e3)](![]),this.stopDraw(),!![]):![]}updateAttrForDrawing(e){}startEditing(){const e={_0x2f2376:1671,_0x401012:1575,_0x239086:4078,_0x56549b:770,_0x575c2c:896},t=_0x3a2b68;if(this[t(e._0x2f2376)])return this;if(this._enabledEdit=!![],!this._map)throw new Error("编辑时_map不能为空,请将对象添加到图层，并且图层已添加到Map");this[t(e._0x401012)].mouseEvent[t(e._0x239086)]=this._entity,this[t(1575)].mouseEvent.enabledMoveTarget=![],!this[t(770)]&&(this.editing=new this.EditClass(this)),this[t(e._0x56549b)].activate&&this.editing.activate(),this._isCallbackPositions&&this[t(e._0x575c2c)]()}[_0x3a2b68(378)](){const e={_0x25f49a:1374},t=_0x3a2b68;var i;if(!this._enabledEdit||!this.isAdded)return this;(i=this.editing)!==null&&i!==void 0&&i.disable&&this.editing.disable(),this[t(1941)]&&(this.style.distanceDisplayCondition&&this[t(896)](),this._stopEditingHook&&this._stopEditingHook(),this._map&&(this._map.closeSmallTooltip(),this[t(1575)][t(e._0x25f49a)][t(4078)]=null,this._map.mouseEvent[t(952)]=!![]),this[t(1671)]=![])}}class BasePrimitive extends BaseGraphic{get czmObject(){return this._primitive}get czmObjectEx(){const e={_0xa2a7d2:3487},t=_0x3a2b68,i=[];return this[t(e._0xa2a7d2)]&&i.push(this[t(e._0xa2a7d2)]),this[t(3968)]&&i.push(this._primitive_outline),i}get primitiveCollection(){const e={_0xcea036:756},t=_0x3a2b68;var i;return(i=this._layer)===null||i===void 0?void 0:i[t(e._0xcea036)]}get[_0x3a2b68(2362)](){return this._primitive}get[_0x3a2b68(2606)](){const e={_0x511d38:3968,_0x4a915a:3968},t=_0x3a2b68;return this._primitive?this[t(3502)](this.id):this[t(e._0x511d38)]?this.getGeometryInstanceAttributes(this.id,this[t(e._0x4a915a)]):null}get uniforms(){const e=_0x3a2b68;var t,i,s;return(t=this[e(2362)])===null||t===void 0||(i=t[e(1438)])===null||i===void 0||(s=i[e(3793)])===null||s===void 0?void 0:s.uniforms}get[_0x3a2b68(3203)](){const e={_0x18d3a6:3203},t=_0x3a2b68;return this[t(3487)]?this._primitive_label:this.style[t(e._0x18d3a6)]}get isEditing(){return this._enabledEdit}_isColorMaterial(e,t){const i={_0x32a5b1:407},s=_0x3a2b68;var r;const o=e.materialType||(t==null?void 0:t.materialType)||(t==null||(r=t.material)===null||r===void 0?void 0:r.type);return Cesium__namespace[s(i._0x32a5b1)](o)&&o!==Color$2?![]:!![]}_addedHook(e){const t={_0x13879b:4089,_0x51cb2d:2540,_0x53f6ea:3968,_0x339673:1641},i=_0x3a2b68;if(!this.show)return;!e.material&&!e[i(t._0x13879b)]&&(e[i(t._0x51cb2d)]||e[i(3239)]?e[i(t._0x13879b)]=Color$2:e.image&&(e.materialType=Image$1));const s=this._conversionStyle(e);if(s._isColorMaterial=this._isColorMaterial(e,s),this._primitive&&this[i(756)].remove(this._primitive),(e.fill??!![])&&(this._primitive=this[i(3891)](s)),this._primitive_outline&&(this.primitiveCollection.remove(this[i(t._0x53f6ea)]),delete this._primitive_outline),e[i(1582)]){const r=this._getOutlineStyle(e);r.width>1&&(this.style[i(1882)]??0)===0||r.clampToGround?this._primitive_outline=this._createPolylineOutline(r):(s[i(t._0x339673)]=r,this._primitive_outline=this[i(3891)](s,!![]))}e.label&&this._addLabel()}_removedHook(){const e={_0x253b93:1361,_0x3454d0:756,_0x21af77:3968,_0x33b279:3090},t=_0x3a2b68;!this._noDestroy&&(this.stopDraw(),this.stopEditing()),this._primitive&&(this.primitiveCollection[t(e._0x253b93)](this._primitive),delete this._primitive),this[t(3968)]&&(this[t(e._0x3454d0)][t(1361)](this._primitive_outline),delete this[t(e._0x21af77)]),this._primitive_label&&(this._layer[t(e._0x33b279)].remove(this._primitive_label),delete this._primitive_label)}_showHook(e){const t=_0x3a2b68;this.isAdded&&(e?(this._addedHook(this.style),this.czmObject&&this.bindPickId(this.czmObject),this.czmObjectEx&&this.czmObjectEx[t(3782)](i=>{this.bindPickId(i)})):(this[t(2027)]=!![],this[t(3916)](),this._noDestroy=![]))}[_0x3a2b68(3931)](e){return e}_createPrimitive(e,t){const i={_0x484452:2192,_0x4abcb7:449,_0x528d58:3888,_0x3798a2:1603,_0x7d7fe:3674,_0x3548d9:756,_0x3430e7:1268,_0x5bc011:1920,_0x185980:369,_0x50a4d7:3674},s=_0x3a2b68;(!e.vertexFormat&&e[s(i._0x484452)]||t)&&(e.vertexFormat=this.defaultVertexFormat||Cesium__namespace.PerInstanceColorAppearance[s(4266)]);const r={...this.options,geometryInstances:this._createGeometryInstance(e,t),show:this.show,shadows:e.shadows};delete r.style,delete r.attr,delete r.modelMatrix,r.geometryInstances.attributes=r.geometryInstances.attributes||{},r.geometryInstances[s(1571)].show=new Cesium__namespace[s(i._0x4abcb7)](this.show),e.distanceDisplayCondition&&(r.geometryInstances.attributes[s(2169)]=e.distanceDisplayCondition),!r[s(1438)]&&(r[s(1438)]=this[s(i._0x528d58)](e,r,t)),e.depthFail&&!r[s(1469)]&&(r.depthFailAppearance=this._createAppearance(e,r,t));let o;return this.style[s(3542)]?(r.classificationType=e[s(1268)],this[s(i._0x3798a2)]===s(1959)||this.type==="polylineC"?o=this.primitiveCollection[s(i._0x7d7fe)](new Cesium__namespace.GroundPolylinePrimitive(r)):o=this[s(i._0x3548d9)][s(3674)](new Cesium__namespace.GroundPrimitive(r))):e.classification?(r[s(i._0x3430e7)]=e.classificationType||Cesium__namespace.ClassificationType[s(i._0x5bc011)],o=this[s(i._0x3548d9)].add(new Cesium__namespace[s(i._0x185980)](r))):o=this.primitiveCollection[s(i._0x50a4d7)](new Cesium__namespace.Primitive(r)),this.bindPickId(o),o}[_0x3a2b68(4194)](e,t=Cesium__namespace[_0x3a2b68(2092)].WHITE.withAlpha(.5)){const i={_0x469fc1:2540},s=_0x3a2b68;var r,o,c,_;return((r=e.material)===null||r===void 0||(o=r.uniforms)===null||o===void 0?void 0:o[s(i._0x469fc1)])||((c=e.material)===null||c===void 0||(_=c.options)===null||_===void 0?void 0:_[s(2540)])||e.color||t}_createAppearance(e,t,i){const s={_0x14012c:3327,_0x5e96d5:1571,_0x4bf7bd:1870,_0x2953d4:1382,_0xdac642:3943},r=_0x3a2b68;if(e.material&&!e[r(2192)]&&!i)return new Cesium__namespace.MaterialAppearance({...e});if(t[r(s._0x14012c)]instanceof Cesium__namespace.GeometryInstance){let o;i&&e[r(1641)]?o=getColorByStyle(e.outlineStyle,Cesium__namespace.Color.WHITE):o=this._getColorByColorMaterial(e),e[r(3943)]=o.alpha!==1,t[r(3327)][r(s._0x5e96d5)]=t.geometryInstances.attributes||{},t.geometryInstances.attributes.color=Cesium__namespace.ColorGeometryInstanceAttribute.fromColor(o),e[r(s._0x4bf7bd)]&&(t.geometryInstances.attributes.depthFailColor=Cesium__namespace.ColorGeometryInstanceAttribute[r(s._0x2953d4)](e.depthFailColor||o))}return Cesium__namespace.defined(this.translucent)&&(e[r(s._0xdac642)]=this[r(3943)]),new Cesium__namespace.PerInstanceColorAppearance({...e})}_createGeometryInstance(e,t){return this.options.geometryInstances}_updateDiffHeight(e,t){const i={_0x203171:4241},s=_0x3a2b68;if(!this.style.clampToGround){if(t){let r=0;Cesium__namespace.defined(this.style.height)?r=this.style.height:r=getMaxHeight(this.positions),e[s(4241)]=r}if(Cesium__namespace.defined(this.style.diffHeight)&&!Cesium__namespace.defined(e.extrudedHeight)){let r=0;Cesium__namespace[s(407)](e.height)?r=e.height:Cesium__namespace.defined(this.style.height)?r=this.style[s(i._0x203171)]:r=getMaxHeight(this.positions),e.extrudedHeight=r+this.style.diffHeight}}}_updateStyleBaseHook(e){const t={_0x21735f:4093,_0x378bb0:1110},i=_0x3a2b68;e&&(this._editing_entity&&this.type.startsWith(this[i(t._0x21735f)].type)?this._editing_entity[i(t._0x378bb0)](e):this[i(3409)]&&(this._updateLabelStyleHook(this.style,e),this._updateExOpacity&&Cesium__namespace.defined(e.globalAlpha)&&this._updateExOpacity(e[i(749)]),(Cesium__namespace.defined(e[i(3798)])||Cesium__namespace.defined(e[i(1475)]))&&(this[i(2694)]=this[i(2976)]),this._updateStyleHook(this.style,e)))}[_0x3a2b68(2019)](e,t){const i={_0x391ac4:926,_0x31e9e0:756},s=_0x3a2b68;if(e.materialType===Color$2&&(Cesium__namespace.defined(t.color)||Cesium__namespace.defined(t.opacity))){const r=getColorByStyle(e);if(r&&this[s(i._0x391ac4)](this._primitive,r,e))if(Cesium__namespace.defined(t.outline)){if(this._primitive_outline){const c=this[s(1079)](e);if(!c.materialType)if(c.show){if(this._updatePrimitiveForColorMaterial(this._primitive_outline,getCesiumColor(c.color),e))return}else{this._primitive_outline&&(this[s(i._0x31e9e0)].remove(this._primitive_outline),delete this._primitive_outline);return}}}else return}this.redraw(e)}[_0x3a2b68(926)](e,t,i){const s={_0x279598:3793,_0x46331a:3943,_0x2b692e:838,_0x4efcc5:3502,_0xaf568:2397,_0x5bb4da:1870},r=_0x3a2b68;var o,c;if(!e)return![];const _=e==null||(o=e.appearance)===null||o===void 0||(c=o.material)===null||c===void 0?void 0:c.uniforms;if(Cesium__namespace.defined(_==null?void 0:_.color)&&e[r(1438)][r(s._0x279598)].type===Color$2)return e[r(1438)][r(s._0x46331a)]=t[r(s._0x2b692e)]!==1,_.color=t,!![];const l=this[r(s._0x4efcc5)](this.id,e);return l!=null&&l[r(2540)]?(l.color=Cesium__namespace[r(1393)][r(s._0xaf568)](t),l.depthFailColor&&(i.depthFailColor||i[r(s._0x5bb4da)])&&(l.depthFailColor=Cesium__namespace.ColorGeometryInstanceAttribute[r(2397)](getCesiumColor(i.depthFailColor,t))),!![]):![]}setOpacity(e){const t={_0x32def3:1633},i=_0x3a2b68;if(this.style[i(749)]=e,this[i(t._0x32def3)](this[i(703)],e)){this._updatePrimitiveOpacity(this._primitive_outline,e),this._updateLabelOpacity(e),this[i(1017)]&&this._updateExOpacity(e);return}super[i(1744)](e)}[_0x3a2b68(1633)](e,t){const i={_0x2b123e:3943,_0x3c4fee:838,_0x47c086:3469,_0x1b2712:1112,_0xe2fc2d:3703,_0x4fe73d:2092,_0x2d84ab:4287,_0x1ca1ae:1478,_0x31ec95:1066},s=_0x3a2b68;if(!e)return![];try{var r,o;const c=e==null||(r=e.appearance)===null||r===void 0||(o=r.material)===null||o===void 0?void 0:o.uniforms;if(c){if(Cesium__namespace.defined(c[s(749)]))return e[s(1438)][s(i._0x2b123e)]=t!==1,c.globalAlpha=t,!![];if((e.appearance.material.type===Color$2||e.appearance.material.type===Image$1)&&Cesium__namespace.defined(c.color))return!Cesium__namespace.defined(e[s(3374)])&&(e._uniforms_color_alpha=c[s(2540)].alpha),c.color[s(i._0x3c4fee)]=e[s(3374)]*t,e.appearance.translucent=c.color.alpha!==1,!![];if(e.appearance.material[s(1603)]===Water$1)return!Cesium__namespace.defined(e._uniforms_baseWaterColor_alpha)&&(e[s(i._0x47c086)]=c.baseWaterColor.alpha,e[s(i._0x1b2712)]=c.blendColor.alpha),this[s(749)]!==1&&(c.baseWaterColor.alpha=e._uniforms_baseWaterColor_alpha*t,c[s(i._0xe2fc2d)].alpha=e[s(i._0x1b2712)]*t),!![]}const _=this.getGeometryInstanceAttributes(this.id,e);if(_!=null&&_.color){!Cesium__namespace.defined(e._attributes_color_alpha)&&(e._attributes_color_alpha=_.color[3]/255);const l=e._attributes_color_alpha*t;return _.color=new Uint8Array([_.color[0],_.color[1],_.color[2],Cesium__namespace[s(i._0x4fe73d)].floatToByte(l)]),e.appearance.translucent=l!==1,_.depthFailColor&&(!Cesium__namespace.defined(e._attributes_depthFailColor_alpha)&&(e[s(i._0x2d84ab)]=_.depthFailColor[3]/255),_.depthFailColor=new Uint8Array([_[s(i._0x1ca1ae)][0],_.depthFailColor[1],_.depthFailColor[2],Cesium__namespace.Color[s(i._0x31ec95)](e._attributes_depthFailColor_alpha*t)])),!![]}}catch{}return![]}[_0x3a2b68(3502)](e,t){return t=t||this[_0x3a2b68(703)],!t||!t.getGeometryInstanceAttributes||this.style.clampToGround&&!t._primitive?null:t.getGeometryInstanceAttributes(e)}_updateLabelOpacity(e){const t={_0x12e915:3487},i=_0x3a2b68;this._primitive_label&&this._primitive_label.show&&LabelStyleConver.setOpacity(this[i(t._0x12e915)],e)}redraw(e){const t={_0x28b06a:442,_0xa19801:3409,_0x3d0086:3782},i=_0x3a2b68;return this.isAdded&&this[i(t._0x28b06a)]&&(this._noDestroy=!![],this._removedHook(),this._noDestroy=![],this._addedHook(e||this.style),this[i(t._0xa19801)]&&this.bindPickId(this.czmObject),this.czmObjectEx&&this[i(1637)][i(t._0x3d0086)](s=>{this.bindPickId(s)})),this}[_0x3a2b68(4145)](){this[_0x3a2b68(572)]()}[_0x3a2b68(4363)](e,t){const i={_0x93f64:3208,_0x23b55a:3203,_0xdc2702:1475,_0x5f542d:2098,_0x5aa6df:749},s=_0x3a2b68;if(t!=null&&t.label)if(this._primitive_label){var r,o,c,_;LabelStyleConver.toCesiumVal(e.label,this[s(3487)],this[s(i._0x93f64)]),(Cesium__namespace.defined(t==null||(r=t.label)===null||r===void 0?void 0:r.position)||Cesium__namespace.defined(t==null||(o=t.label)===null||o===void 0?void 0:o[s(4241)])||Cesium__namespace.defined(t==null||(c=t[s(i._0x23b55a)])===null||c===void 0?void 0:c[s(i._0xdc2702)])||Cesium__namespace[s(407)](t==null||(_=t[s(3203)])===null||_===void 0?void 0:_.setHeight))&&this[s(i._0x5f542d)]()}else this._addLabel();else Cesium__namespace.defined(t==null?void 0:t.globalAlpha)&&this._updateLabelOpacity(t[s(i._0x5aa6df)])}[_0x3a2b68(1286)](){const e={_0x2a0dd0:3542,_0x2e4268:4241},t=_0x3a2b68,i=this.style.label;if(!i||!i.text)return;Cesium__namespace.defined(this[t(2748)][t(e._0x2a0dd0)])&&!Cesium__namespace.defined(i[t(e._0x2a0dd0)])&&!Cesium__namespace.defined(i[t(e._0x2e4268)])&&(i.clampToGround=this.style.clampToGround);const s=LabelStyleConver.toCesiumVal(i,{},this.attr);return s.show=this.show,s.position=this._getLablePosition(),this._primitive_label&&this[t(4053)].labelCollection.remove(this._primitive_label),this._primitive_label=this._layer.labelCollection.add(s),this.bindPickId(this._primitive_label),this._primitive_label}[_0x3a2b68(2098)](){const e={_0x2d5353:3487},t=_0x3a2b68;this[t(e._0x2d5353)]&&!this[t(3487)].isDestroyed()&&(this._primitive_label.position=this._getLablePosition())}_getLablePosition(){const e={_0x332d19:4076,_0x1387da:738,_0x215035:2748},t=_0x3a2b68,i=this.style.label;let s;if(i.position)if(i[t(e._0x332d19)]===t(3747))s=this[t(1451)];else if(isString(i.position)){const c=template(i[t(e._0x332d19)],this.attr,!![]);c&&(s=LngLatPoint[t(e._0x1387da)](c).toCartesian())}else s=LngLatPoint[t(e._0x1387da)](i[t(4076)]).toCartesian();if(!s&&(s=this.center),!s)return new Cesium__namespace.Cartesian3;if(Cesium__namespace.defined(i.height)||Cesium__namespace.defined(this.style.height)){const c=i.height??this[t(2748)].height;s=setPositionsHeight(s,c)}Cesium__namespace.defined(this[t(2748)].diffHeight)&&(s=addPositionsHeight(s,this[t(e._0x215035)].diffHeight));let r=i.setHeight;Cesium__namespace.defined(r)&&(isString(r)&&(r=Number(template(r,this.attr,!![])),isNaN(r)&&(r=0)),s=setPositionsHeight(s,r));let o=i.addHeight;return Cesium__namespace.defined(o)&&(isString(o)&&(o=Number(template(o,this.attr,!![])),isNaN(o)&&(o=0)),s=addPositionsHeight(s,o)),s}[_0x3a2b68(1079)](e,t){const i={_0x4bfcd7:1091,_0x55b787:601,_0x4dc90d:3542},s=_0x3a2b68,r={...e};return delete r.material,delete r[s(4089)],delete r.materialOptions,delete r.outline,delete r.outlineColor,delete r[s(i._0x4bfcd7)],delete r[s(i._0x55b787)],delete r.outlineStyle,{...r,show:e.outline??![],color:e[s(3559)]??Cesium__namespace.Color[s(1948)],opacity:e.outlineOpacity,width:e[s(601)]??1,arcType:e.arcType??e[s(i._0x4dc90d)]?Cesium__namespace.ArcType.GEODESIC:Cesium__namespace.ArcType.NONE,...e.outlineStyle,...t}}_getPolylineOutlinePositions(){return[this.positions]}_createPolylineOutline(e){const t={_0x3d7a00:1304,_0xa666de:3542,_0x1d77a6:3822,_0x42e7df:2492,_0x84bb28:407,_0x3146a3:1754,_0x4324af:1438,_0x545f83:756},i=_0x3a2b68,s=PolylineStyleConver[i(t._0x3d7a00)](e),r=s[i(t._0xa666de)]?Cesium__namespace.GroundPolylineGeometry:Cesium__namespace[i(t._0x1d77a6)],o=[],c=this[i(t._0x42e7df)]();for(let d=0,f=c.length;d<f;d++){let g=c[d];if(!g||g.length===0)continue;Cesium__namespace.defined(e.height)&&(g=setPositionsHeight(g,e[i(4241)])),Cesium__namespace.defined(e.setHeight)&&(g=setPositionsHeight(g,e.setHeight)),Cesium__namespace[i(t._0x84bb28)](e[i(1475)])&&(g=addPositionsHeight(g,e.addHeight)),g.length>0&&(g=g.concat(g[0]));const b={...s};b[i(2694)]=g,(!b.material||b.material.type===i(2092))&&(b.vertexFormat=Cesium__namespace.PolylineColorAppearance.VERTEX_FORMAT);const C=this._getColorByColorMaterial(b),P=new Cesium__namespace.GeometryInstance({id:this.id,geometry:new r(b),attributes:{color:Cesium__namespace.ColorGeometryInstanceAttribute.fromColor(C),distanceDisplayCondition:s[i(2169)],show:new Cesium__namespace.ShowGeometryInstanceAttribute(this.show)}});o[i(t._0x3146a3)](P)}if(o.length===0)return;const _={...this.options,geometryInstances:o,show:this.show,shadows:s.shadows};delete _.style,delete _.attr,s.material&&!s.classification?_.appearance=new Cesium__namespace.PolylineMaterialAppearance({...s}):_[i(t._0x4324af)]=new Cesium__namespace.PolylineColorAppearance({...s});let l;return this.style.clampToGround?(_.classificationType=s.classificationType,l=this.primitiveCollection.add(new Cesium__namespace[i(3742)](_))):l=this[i(t._0x545f83)].add(new Cesium__namespace[i(2618)](_)),this[i(1472)](l),l}openHighlight(e,t=!![]){const i={_0x3914e7:1603,_0x52b481:400,_0x17dcb7:2333},s=_0x3a2b68;var r;t&&(this._map.closeHighlight(),this._map.last_highlighGraphic=this);const o=e||this._highlightOptions||((r=this[s(4053)])===null||r===void 0?void 0:r._highlightOptions);if(o){const c=[];for(const l in o)l!==s(i._0x3914e7)&&!Cesium__namespace.defined(this.style[l])&&c.push(l);c[s(i._0x52b481)]>0&&logWarn(s(i._0x17dcb7),c);const _=merge(clone(this.style),o);this._updateStyleHook(_,o),this._updateLabelStyleHook(_,o),this.fire(EventType.highlightOpen,{},!![])}}closeHighlight(){const e=_0x3a2b68;var t;!this.isAdded||((t=this._map)===null||t===void 0?void 0:t.last_highlighGraphic)!==this||(this._updateStyleHook(this.style,this[e(2748)]),this._updateLabelStyleHook(this.style,this.style),this._map._clearLastHighlight(),this.fire(EventType.highlightClose,{},!![]))}_replaceFragmentShaderSourceByStyle(e){const t={_0x1e6d70:2748},i=_0x3a2b68;return this.style[i(359)]&&(e=`#define FLAT
`+e),this[i(t._0x1e6d70)].faceForward&&(e=`#define FACE_FORWARD
`+e),e}[_0x3a2b68(3194)](e){const t={_0x35c6be:4093,_0x4a0669:780},i=_0x3a2b68;if(!this._getDrawEntityClass){logInfo("对象不支持标绘",this);return}if(this._enabledDraw)return this;if(this._enabledDraw=!![],this[i(442)]=![],e&&this.addTo(e),!this._map)throw new Error("绘制时_map不能为空,请将对象添加到图层，并且图层已添加到Map");this[i(4093)]=this._getDrawEntityClass({minPointNum:this[i(1941)].minPointNum,maxPointNum:this.options.maxPointNum,style:this._getDrawEntityStyle(),private:!![]},!![]),this._editing_entity.parent=this,this._editing_entity[i(3192)](EventType.drawCreated,s=>{this.stopDraw()}),this[i(t._0x35c6be)].on([EventType.drawAddPoint,EventType.drawMouseMove,EventType[i(t._0x4a0669)]],s=>{const r=i;s.graphic=this,s.drawtype=this.type,this[r(1109)](s.type,s,!![])}),this._editing_entity.startDraw(this._map[i(2954)]),this.fire(EventType.drawStart,{drawtype:this.type},!![])}[_0x3a2b68(608)](){const e=_0x3a2b68;var t,i,s;if(!this._enabledDraw||!this._editing_entity)return this;if(this._enabledDraw=![],!this._editing_entity.stopDraw()){this.remove(!![]);return}this._updateDrawEntityToThis(),this.fire(EventType.drawCreated,{drawtype:this.type,positions:this[e(2694)]},!![]),(t=this.options)!==null&&t!==void 0&&t.success&&this[e(1941)].success(this),(i=this.options)!==null&&i!==void 0&&(s=i[e(3531)])!==null&&s!==void 0&&s.resolve&&this.options._promise.resolve(this)}endDraw(){const e={_0x254a73:4093},t=_0x3a2b68;return!this._enabledDraw||!this[t(e._0x254a73)]?![]:this._editing_entity.endDraw()?!![]:![]}[_0x3a2b68(1915)](){const e={_0x102e17:1203},t=_0x3a2b68,i=this[t(e._0x102e17)](this.style,![]);return delete i.highlight,i}_getDrawPointEntityClass(e,t){const i=_0x3a2b68;return e[i(1748)]=!t,e.style=getEditPointStyle(),create$4("point",e)}_updateDrawEntityToThis(){const e={_0x294846:4093,_0x1feef2:1603,_0x17880f:2748,_0x22ef1e:4076,_0x560a9b:442},t=_0x3a2b68,i=this[t(4093)].toJSON();this._editing_entity.remove(!![]),delete this[t(e._0x294846)],i.style&&this.type.startsWith(i[t(e._0x1feef2)])?(this.options.style=merge(this.options[t(e._0x17880f)],i[t(2748)]),this[t(3319)](this.options[t(2748)])):this[t(3528)]&&this[t(3528)](i[t(2748)],i),i.position?this[t(e._0x22ef1e)]=i[t(e._0x22ef1e)]:i.positions&&(this.positions=i.positions),this[t(e._0x560a9b)]=!![]}startEditing(){const e={_0x5d0e27:1671,_0x1e2e4c:1575,_0x2d55d6:4076,_0x45e34b:900,_0x5d8da3:3192,_0x83eb2a:1410},t={_0x486c6d:738,_0x3011da:2206,_0x2c881b:4093,_0x170062:2206},i={_0x22a198:3528},s=_0x3a2b68;if(this[s(e._0x5d0e27)])return this;if(this._enabledEdit=!![],!this[s(e._0x1e2e4c)])throw new Error("编辑时_map不能为空,请将对象添加到图层，并且图层已添加到Map");this._editing_entity=this._getDrawEntityClass({hasMoveEdit:this.options.hasMoveEdit,hasHeightEdit:this.options.hasHeightEdit,style:this._getDrawEntityStyle(),position:this[s(e._0x2d55d6)],positions:this.positions,private:!![]},![]),this[s(e._0x45e34b)]&&this._startEditingHook(this._editing_entity),this._editing_entity[s(3591)]=this;const r=this.type[s(433)](this._editing_entity.type);this._editing_entity[s(e._0x5d8da3)](EventType.editStop,o=>{this.stopEditing()}),this._editing_entity.on(EventType[s(e._0x83eb2a)],o=>{const c=s,_=this._editing_entity[c(1909)]();_.style&&r?this.options[c(2748)]=merge(this.options.style,_.style):this._updateStyleByEdit&&this[c(i._0x22a198)](_.style,_)}),this._editing_entity.on([EventType.editAddPoint,EventType[s(3314)],EventType[s(3949)]],o=>{const c=s;this._editing_entity[c(1529)]?r?(this[c(3601)]=LngLatPoint[c(t._0x486c6d)](this._editing_entity._position_draw),this._position=this._editing_entity[c(1529)]):this.position=this._editing_entity._position_draw:this[c(4093)]._positions_draw&&(r?(this._points=LngLatArray[c(4300)](this._editing_entity._positions_draw),this._positions=this._editing_entity[c(t._0x3011da)]):this.positions=this[c(t._0x2c881b)][c(t._0x170062)])}),this[s(1575)][s(2954)].addGraphic(this._editing_entity),this._editing_entity.startEditing(),r?this[s(442)]=![]:this._editing_entity[s(1603)]!==s(2879)&&(this._editing_entity.entityGraphic.show=![])}stopEditing(){const e=_0x3a2b68;if(!this._enabledEdit||!this[e(4093)])return this;this._enabledEdit=![],this._updateDrawEntityToThis()}}class BasePointPrimitive extends BasePrimitive{constructor(e={}){const t={_0x59fd61:2694,_0xca8f4b:2478,_0x29673b:4238,_0x7b0ff:738,_0x5b7541:2748,_0x59447e:2782,_0x52551e:2426,_0x388073:3737,_0x4b2328:778,_0x109613:1168,_0x37ccb5:2978,_0x3ab184:2978,_0x18148b:2729,_0x264516:2782},i=_0x3a2b68;if(super(e),this._hasEdit=this.options[i(3031)]??!![],e[i(t._0x59fd61)]&&(this.positions=e.positions),e[i(4076)])this[i(4076)]=e.position;else if(e.modelMatrix&&(this._position=Cesium__namespace[i(t._0xca8f4b)][i(515)](e[i(t._0x29673b)],new Cesium__namespace.Cartesian3),this._point=LngLatPoint[i(t._0x7b0ff)](this._position),!Cesium__namespace.defined(this[i(t._0x5b7541)][i(t._0x59447e)]))){const s=Cesium__namespace.Matrix4[i(t._0x52551e)](e[i(4238)],new Cesium__namespace.Matrix3),r=Cesium__namespace.Matrix4.getMatrix3(Cesium__namespace[i(t._0x388073)][i(t._0x4b2328)](this._position),new Cesium__namespace.Matrix3),o=Cesium__namespace[i(t._0x109613)].getColumn(r,0,new Cesium__namespace[i(t._0x37ccb5)]),c=Cesium__namespace.Matrix3.getColumn(r,1,new Cesium__namespace[i(t._0x3ab184)]),_=Cesium__namespace.Matrix3.getColumn(r,2,new Cesium__namespace.Cartesian3);let l=Cesium__namespace[i(1168)].getColumn(s,0,new Cesium__namespace.Cartesian3);l=Cesium__namespace.Cartesian3[i(t._0x18148b)](l,_,l),l=Cesium__namespace[i(2978)].cross(_,l,l),l=Cesium__namespace.Cartesian3.normalize(l,l);let d=Cesium__namespace.Cartesian3.angleBetween(o,l);Cesium__namespace.Cartesian3.angleBetween(c,l)>Math.PI*.5&&(d=2*Math.PI-d),this.style[i(t._0x264516)]=Cesium__namespace.Math[i(3501)](d)}}get position(){const e=_0x3a2b68;if(this._position)return this._position;if(this.property){var t,i;return this.property.getValue((t=this._map)===null||t===void 0||(i=t.clock)===null||i===void 0?void 0:i[e(545)])}}set[_0x3a2b68(4076)](e){const t={_0x45cdc0:407,_0x2d19cb:3208,_0x4929cb:3601,_0x3b39aa:4238,_0x4e8674:3409},i=_0x3a2b68;var s;if(!this.isDestroy){if(this[i(2628)](e))return this._position;if(this[i(3601)]=LngLatPoint.parse(e),this[i(3601)]){var r;let o=(r=this.style)===null||r===void 0?void 0:r.setHeight;Cesium__namespace[i(t._0x45cdc0)](o)&&(isString(o)&&(o=Number(template(o,this[i(t._0x2d19cb)],!![])),isNaN(o)&&(o=0)),this._point.alt=o);const c=this[i(3496)]();c!==0&&(this[i(t._0x4929cb)].alt=this._point.alt+c)}this._position=(s=this._point)===null||s===void 0?void 0:s.toCartesian(),this.options[i(t._0x3b39aa)]&&delete this.options.modelMatrix,this[i(t._0x4e8674)]&&this[i(4145)](),this[i(3487)]&&this._updateLabelPosition(),this._editing_entity&&(this._editing_entity.position=this._position),this.fire(EventType.updatePosition,{position:this._position})}}get positionsShow(){return this.positions}get[_0x3a2b68(4136)](){return this._position}get[_0x3a2b68(2879)](){return this._point}get[_0x3a2b68(2555)](){return this.getCoordinate()}get[_0x3a2b68(3747)](){return this[_0x3a2b68(4076)]}get centerPoint(){return this.point}get height(){const e={_0x3996be:1879},t=_0x3a2b68;var i;return(i=this.point)===null||i===void 0?void 0:i[t(e._0x3996be)]}set height(e){const t=_0x3a2b68;this.point.alt=e,this[t(4076)]=this.point}get[_0x3a2b68(2694)](){return this.position?[this.position]:null}set positions(e){const t={_0x2b8549:4076},i=_0x3a2b68;e&&e.length>0&&(this[i(t._0x2b8549)]=e[0])}get[_0x3a2b68(4274)](){return[this.point]}get coordinates(){return[this.coordinate]}get orientation(){return this._orientation||this.options.orientation}set orientation(e){const t={_0x3b06ad:1272},i=_0x3a2b68;this[i(t._0x3b06ad)]=e}get modelMatrix(){const e=_0x3a2b68;return this.options[e(4238)]?this[e(1941)].modelMatrix:this._getModelMatrix(this.position,this._orientation)}get heading(){const e={_0x27f550:407,_0x5a461c:2748},t=_0x3a2b68;return Cesium__namespace[t(e._0x27f550)](this._heading_reality)?Cesium__namespace.Math.toDegrees(this._heading_reality):this[t(e._0x5a461c)].heading??0}set heading(e){const t={_0x564092:2748},i=_0x3a2b68;this[i(t._0x564092)][i(2782)]=e,this.updateModelMatrix()}get pitch(){const e={_0xcf47e5:2894},t=_0x3a2b68;return Cesium__namespace.defined(this._pitch_reality)?Cesium__namespace.Math.toDegrees(this[t(e._0xcf47e5)]):this[t(2748)].pitch??0}set[_0x3a2b68(1630)](e){this.style.pitch=e,this.updateModelMatrix()}get roll(){const e=_0x3a2b68;return Cesium__namespace.defined(this[e(4008)])?Cesium__namespace.Math.toDegrees(this._roll_reality):this.style.roll??0}set[_0x3a2b68(2341)](e){this.style.roll=e,this.updateModelMatrix()}get[_0x3a2b68(3361)](){const e=_0x3a2b68;if(this.options.objectsToExclude)return this.options.objectsToExclude;if(this[e(1165)])return this._objectsToExclude}set objectsToExclude(e){this._objectsToExclude=e}get trackedEntity(){const e={_0x456f56:3190},t=_0x3a2b68;return!this._trackedEntity&&(this[t(e._0x456f56)]=this._layer.dataSource.entities.add({position:this.property||new Cesium__namespace.CallbackProperty(i=>this._position,![]),point:{pixelSize:2,color:Cesium__namespace[t(2092)][t(1948)].withAlpha(.01)}})),this._trackedEntity}get debugAxis(){return this._debugAxis}set debugAxis(e){const t={_0x488b6f:2228,_0x277c84:1642,_0x13ae06:640,_0x234d17:640},i=_0x3a2b68;if(this._debugAxis=e,!this.debugAxisPrimitive){const s=Math.max(Cesium__namespace[i(t._0x488b6f)].fromCartesian(this.positionShow)[i(4241)]*.06,100);this.debugAxisPrimitive=this._layer.primitiveCollection[i(3674)](new Cesium__namespace[i(t._0x277c84)]({modelMatrix:this.modelMatrix,length:s,width:5})),this.debugAxisPrimitive._tooltipConfig={content:`<span style="color: red;">红色</span> 是 X轴<br/>
                  <span style="color: green;">绿色</span> 是 Y轴<br/>
                  <span style="color: blue;">蓝色</span> 是 Z轴`,options:this.options.tooltipOptions},this[i(4332)]&&(this[i(t._0x13ae06)]._timeTik=setInterval(()=>{const r=i;this[r(640)].modelMatrix=this.modelMatrix},300)),this[i(1472)](this[i(640)])}this[i(t._0x234d17)][i(442)]=e}get debugAxisLength(){const e=_0x3a2b68;return this.debugAxisPrimitive?this[e(640)].length:0}set debugAxisLength(e){const t={_0x25c627:640},i=_0x3a2b68;!this.debugAxisPrimitive&&(this.debugAxis=!![]),this[i(t._0x25c627)].length=e}_addedHook(e){!this.show||!this.position||(this._forPositionProperty(this.options.position),super._addedHook(e))}_removedHook(e){const t={_0x10ec7e:1575,_0x120693:3190,_0xdd59a8:3916},i=_0x3a2b68;this._trackedEntity&&(this._map.trackedEntity===this[i(3190)]&&(this[i(t._0x10ec7e)].trackedEntity=void 0),this._layer[i(2848)].entities.remove(this[i(t._0x120693)]),delete this[i(t._0x120693)]),super[i(t._0xdd59a8)](e)}updateModelMatrix(){const e={_0x7678e0:703,_0x4eeefc:4238},t=_0x3a2b68;this[t(e._0x7678e0)]&&(this._primitive.modelMatrix=this[t(e._0x4eeefc)])}_getModelMatrix(e,t){const i={_0x19288b:3709,_0x342cb3:1630,_0xcba734:545,_0x590956:1683,_0xbb8d48:407,_0x19b122:1683,_0x18f8b2:1807,_0x2b6fdb:826,_0x281f55:2748,_0x169b02:826},s=_0x3a2b68;if(!e)return Cesium__namespace.Matrix4[s(i._0x19288b)];let r=Cesium__namespace[s(2806)].toRadians(this.style.heading||0),o=Cesium__namespace.Math.toRadians(this.style[s(i._0x342cb3)]||0),c=Cesium__namespace[s(2806)][s(1185)](this.style.roll||0);if(t){if(t[s(3479)]){var _,l;t=t.getValue((_=this._map)===null||_===void 0||(l=_[s(2257)])===null||l===void 0?void 0:l[s(i._0xcba734)])}if(t){const f=getHeadingPitchRollByOrientation(e,t);this.style.mergeOrientation?(r+=f.heading,c+=f.roll,o+=f.pitch):(!Cesium__namespace.defined(this.style.heading)&&(r=f.heading),!Cesium__namespace.defined(this.style.roll)&&(c=f[s(2341)]),!Cesium__namespace.defined(this.style[s(1630)])&&(o=f.pitch))}}this._heading_reality=r,this._pitch_reality=o,this._roll_reality=c;const d=Cesium__namespace[s(3737)].headingPitchRollToFixedFrame(e,new Cesium__namespace.HeadingPitchRoll(r,o,c),Cesium__namespace.Ellipsoid.WGS84,this.options.fixedFrameTransform);return Cesium__namespace[s(407)](this[s(i._0x590956)])&&Cesium__namespace.defined(this.scaleY)&&Cesium__namespace[s(i._0xbb8d48)](this.scaleZ)?Cesium__namespace.Matrix4.multiplyByScale(d,new Cesium__namespace.Cartesian3(this[s(i._0x19b122)],this[s(i._0x18f8b2)],this.scaleZ),d):Cesium__namespace.defined(this.style[s(i._0x2b6fdb)])&&Cesium__namespace.Matrix4.multiplyByScale(d,new Cesium__namespace.Cartesian3(this[s(2748)].scale,this[s(i._0x281f55)][s(i._0x169b02)],this.style.scale),d),d}[_0x3a2b68(3089)](e){const t=_0x3a2b68;return{type:"Point",coordinates:this.getCoordinate(e==null?void 0:e[t(1528)])}}[_0x3a2b68(2628)](e){const t={_0x58141f:468,_0x565377:1272},i=_0x3a2b68;return e instanceof Cesium__namespace.CallbackProperty||e instanceof Cesium__namespace[i(t._0x58141f)]?(this[i(1941)].frameRate=this.options.frameRate??20,this[i(t._0x565377)]=this.options.orientation||new Cesium__namespace.VelocityOrientationProperty(e),this.property=e,this[i(3864)](),!![]):![]}update(e){const t={_0x52b049:4332},i=_0x3a2b68;this.show&&this.property&&(this[i(1187)]=this[i(t._0x52b049)].getValue(e.time),this.czmObject&&this._updatePositionsHook(),this._primitive_label&&this._updateLabelPosition())}_getPopupPosition(){const e={_0x4e6a00:4332},t=_0x3a2b68;return this[t(e._0x4e6a00)]||this[t(4076)]||this.center}addDynamicPosition(e,t){const i={_0x460119:3927,_0x215284:2257,_0xf358c1:545,_0x424296:2051,_0x2bdb0e:557,_0x17fe11:2956,_0x4fa613:400,_0x5b1234:3345,_0x3ecab5:2756},s=_0x3a2b68;var r,o,c,_;!this[s(i._0x460119)]&&this._initSampledPositionProperty(),this._removeDynamicPosition();const l=((r=this[s(1575)])===null||r===void 0||(o=r[s(i._0x215284)])===null||o===void 0?void 0:o[s(i._0xf358c1)])||Cesium__namespace.JulianDate.now();t?isNumber(t)?t=Cesium__namespace.JulianDate.addSeconds(l,t,new Cesium__namespace.JulianDate):isString(t)?t[s(i._0x424296)]("Z")===-1?t=Cesium__namespace[s(i._0x2bdb0e)].fromDate(new Date(t)):t=Cesium__namespace[s(557)].fromIso8601(t):t instanceof Date&&(t=Cesium__namespace.JulianDate[s(673)](t)):t=l,e=LngLatPoint[s(738)](e);const d=(c=this[s(3927)])===null||c===void 0||(_=c[s(3354)])===null||_===void 0?void 0:_._times;if(this.options[s(i._0x17fe11)]&&(d==null?void 0:d[s(400)])>0&&this._position){const g=d[d[s(i._0x4fa613)]-1];if(Cesium__namespace.JulianDate[s(i._0x5b1234)](l,g)>.3){let b=this._position;this._lastDynamicPosition&&(b=getOnLinePointByLen(this._lastDynamicPosition,this._position,.01,!![])),b=setPositionsHeight(b,e.alt||0),this._sampledPositionProperty[s(i._0x3ecab5)](l,b)}}const f=e.toCartesian();return this._sampledPositionProperty[s(2756)](t,f),this[s(4218)]=f,this}[_0x3a2b68(1023)](){const e={_0x2714e2:2127,_0x42bdaf:1901,_0xdef95b:4379,_0x59455a:4280,_0x460aca:3927,_0x256330:4332,_0x3ca494:3864},t={_0x1b660b:4053,_0x522325:2101,_0x40ae9c:1339,_0x4b7669:3496},i=_0x3a2b68;this[i(e._0x2714e2)]=-1,this._frameRateHeight=this.options[i(e._0x42bdaf)]??30,this._maxCacheCount=this.options.maxCacheCount??50;let s;this._sampledPositionProperty?s=this._sampledPositionProperty:(s=new Cesium__namespace.SampledPositionProperty(this.options.referenceFrame,this.options.numberOfDerivatives),s.forwardExtrapolationType=this.options.forwardExtrapolationType??Cesium__namespace[i(e._0xdef95b)].NONE,s.backwardExtrapolationType=this.options.backwardExtrapolationType??Cesium__namespace.ExtrapolationType[i(e._0x59455a)],this[i(e._0x460aca)]=s),this[i(e._0x256330)]=new Cesium__namespace.CallbackProperty(r=>{const o=i;if(!this._map)return;let c=s.getValue(r);if(c&&this.options.clampToTileset){if(this._clampToTilesetFrame++,!this[o(682)]||this[o(2127)]%this[o(2345)]===0){const _=getHeight(this._map.scene,c,{objectsToExclude:this[o(t._0x1b660b)].objectsToExclude,has3dtiles:!![]});_&&(this._clampToTilesetHeight=_)}if(this._clampToTilesetHeight){const _=Cesium__namespace.Cartographic[o(t._0x522325)](c);c=Cesium__namespace.Cartesian3[o(t._0x40ae9c)](_.longitude,_.latitude,this._clampToTilesetHeight+this[o(t._0x4b7669)]())}}return c},![]),this._orientation=this[i(1941)].orientation||new Cesium__namespace.VelocityOrientationProperty(s),this[i(e._0x3ca494)]()}[_0x3a2b68(3954)](){const e=_0x3a2b68;var t,i;if(this._maxCacheCount<1)return;const s=(t=this[e(3927)])===null||t===void 0||(i=t[e(3354)])===null||i===void 0?void 0:i._times;if(!s||s.length===0)return;const r=s.length-this._maxCacheCount-1;r>0&&this._sampledPositionProperty.removeSamples(new Cesium__namespace.TimeInterval({start:s[0],stop:s[r]}))}autoSurfaceHeight(e={}){return getSurfaceHeight(this._map.scene,this.position,e).then(t=>{t.position&&(this.position=t.position)})}clampToGround(e){return this.autoSurfaceHeight(e)}[_0x3a2b68(2632)](e){return this.point?this.point.toArray(e):[]}}class PointPrimitive extends BasePointPrimitive{get[_0x3a2b68(756)](){var e,t;return(e=this._layer)!==null&&e!==void 0&&e._primitiveCluster?this._layer._primitiveCluster._pointCollection:(t=this._layer)===null||t===void 0?void 0:t.pointCollection}_showHook(e){const t=_0x3a2b68;this._primitive?this._primitive.show=e:e&&super[t(840)](e)}_addedHook(e){const t={_0x3dbcee:3674},i=_0x3a2b68;if(!this.show)return;this[i(2628)](this.options.position),this._calculateAsynSurfacePosition(),this._primitive&&this[i(756)].remove(this._primitive);const s=PointStyleConver.toCesiumVal(this.style,{show:this.show,position:this.position});this[i(703)]=this.primitiveCollection[i(t._0x3dbcee)](s),this.style.label&&this._addLabel()}[_0x3a2b68(2019)](e,t){PointStyleConver.toCesiumVal(e,this.primitive)}_style2Json(e,t){return PointStyleConver.toJSON(e,t)}[_0x3a2b68(4145)](){const e=_0x3a2b68;this._primitive.position=this[e(4076)]}_calculateAsynSurfacePosition(){const e={_0x5546a3:3542,_0x391b5b:3868},t={_0x123e66:2748},i=_0x3a2b68;this._hasAsynSurfacePosition=![];const s=this.position;s instanceof Cesium__namespace.Cartesian3&&(this.style[i(e._0x5546a3)]||this.style[i(e._0x391b5b)]===Cesium__namespace.HeightReference.CLAMP_TO_GROUND||this[i(2748)].heightReference===Cesium__namespace.HeightReference.RELATIVE_TO_GROUND)&&getSurfaceHeight(this._map.scene,s,this.style).then(r=>{const o=i;this.isDestroy||(this[o(t._0x123e66)].heightReference===Cesium__namespace.HeightReference.RELATIVE_TO_GROUND&&(r.point.alt+=r.height_original),this[o(4076)]=r.point,this._hasAsynSurfacePosition=!![])})}_getDrawEntityClass(e,t){return create$4(_0x3a2b68({_0x435b9a:2879}._0x435b9a),e)}}register$4("pointP",PointPrimitive,!![]);class BasePolyPrimitive extends BasePrimitive{constructor(e={}){const t={_0x3c204a:2694},i=_0x3a2b68;super(e),this._hasEdit=this.options.hasEdit??!![],e.positions&&(this.style.buffer>0?this[i(t._0x3c204a)]=bufferPoints(e.positions,this.style.buffer,this.style.bufferSteps):this.positions=e[i(2694)])}get center(){const e={_0x5be559:1451},t=_0x3a2b68;return this.style.closure?this[t(e._0x5be559)]:this[t(3773)]}get[_0x3a2b68(1451)](){return centerOfMass(this.positions)}get[_0x3a2b68(3773)](){const e={_0xf9b093:2694,_0x5c39a8:400,_0x2fbb67:400},t=_0x3a2b68,i=this[t(e._0xf9b093)];return!i||i[t(e._0x5c39a8)]===0?null:i.length===1?i[0]:i[t(e._0x2fbb67)]<10?sliceByMaxDistance(i,this.distance/2,{point:!![]}):i[Math.floor(i.length/2)]}get distance(){return getDistance(this.positions)}get[_0x3a2b68(3254)](){return getSurfaceArea(this.positions)}get positions(){return this[_0x3a2b68({_0x430abd:3965}._0x430abd)]}set positions(e){const t={_0x265e9d:4145,_0x4b5b9a:1109},i={_0x556781:2532,_0x7cc32b:1879},s=_0x3a2b68;if(!e||this.isDestroy)return;const r=[],o=[];e.forEach((c,_)=>{const l=_0x20dc,d=LngLatPoint.parse(c);if(!d||!d[l(i._0x556781)]())return;let f=this[l(2748)].setHeight;Cesium__namespace[l(407)](f)&&(isString(f)?(f=Number(template(f,this.attr,!![])),isNaN(f)&&(f=0)):Array.isArray(f)&&(f=f[_]||0),d.alt=f);const g=this.getAddHeight(_);g!==0&&(d.alt=d[l(i._0x7cc32b)]+g),r.push(d),o.push(d.toCartesian())}),this[s(2967)]=r,this._positions=o,this._primitive&&this[s(t._0x265e9d)](),this._primitive_label&&this[s(2098)](),this._editing_entity&&(this._editing_entity.positions=o),this[s(t._0x4b5b9a)](EventType.updatePosition,{positions:this._positions})}get positionsShow(){return this.positions}get points(){const e=_0x3a2b68;return!this._points&&(this._points=LngLatArray[e(4300)](this._positions)),this._points}get coordinates(){return this[_0x3a2b68(390)]()}get rectangle(){return Cesium__namespace[_0x3a2b68(1983)].fromCartesianArray(this.positions)}_getGeoJsonGeometry(e){return{type:"LineString",coordinates:this[_0x3a2b68(390)](e==null?void 0:e.noAlt)}}[_0x3a2b68(390)](e){const t={_0x401902:4274},i={_0x55e359:4205},s=_0x3a2b68,r=[];return this[s(t._0x401902)].forEach(o=>{const c=s;r.push(o[c(i._0x55e359)](e))}),r}[_0x3a2b68(3508)](e){const t={_0x22e09a:1983,_0x456812:1012},i=_0x3a2b68,s=LngLatPoint.parse(e);return Cesium__namespace[i(t._0x22e09a)][i(t._0x456812)](Cesium__namespace.Rectangle.fromCartesianArray(this.positions),s.toCartographic())?isInPoly(s,this.coordinates):![]}autoSurfaceHeight(e={}){const t={_0x5e8482:2694},i=_0x3a2b68;return computeSurfacePoints({...e,map:this._map,positions:this.positions})[i(4389)](s=>{const r=i;return!s.noHeight&&(this[r(t._0x5e8482)]=s.positions),s})}clampToGround(e){return this.autoSurfaceHeight(e)}}class PolylinePrimitive extends BasePolyPrimitive{_conversionStyle(e){return PolylineStyleConver.toCesiumVal(e)}_style2Json(e,t){return PolylineStyleConver[_0x3a2b68({_0x26b356:1909}._0x26b356)](e,t)}[_0x3a2b68(445)](e,t){const i={_0x1342f8:3542},s=_0x3a2b68;var r;e.positions=this.positions||[],e[s(4121)]&&((r=e.positions)===null||r===void 0?void 0:r.length)>0&&(e.positions=e.positions.concat(e.positions[0]));const o=e[s(i._0x1342f8)]?Cesium__namespace[s(3343)]:Cesium__namespace.PolylineGeometry;return new Cesium__namespace.GeometryInstance({id:this.id,geometry:new o(e),attributes:this.options[s(1571)]})}[_0x3a2b68(3888)](e,t){const i={_0x4c0c08:3327,_0x3dbfef:1571,_0x36e8d5:1393,_0x32ceb6:1393},s=_0x3a2b68;if(e._isColorMaterial){if(t[s(i._0x4c0c08)][s(2152)].vertexFormat=Cesium__namespace.PolylineColorAppearance.VERTEX_FORMAT,!e.colors){const r=this._getColorByColorMaterial(e);t.geometryInstances.attributes=t.geometryInstances[s(i._0x3dbfef)]||{},t.geometryInstances.attributes[s(2540)]=Cesium__namespace[s(i._0x36e8d5)][s(1382)](r),e.depthFail&&(t.geometryInstances.attributes.depthFailColor=Cesium__namespace[s(i._0x32ceb6)].fromColor(e.depthFailColor||r))}return new Cesium__namespace.PolylineColorAppearance({...e})}else return new Cesium__namespace[s(3516)]({...e})}[_0x3a2b68(2019)](e,t){const i={_0x25ebf4:2019},s=_0x3a2b68;Cesium__namespace.defined(t.color)&&Object.keys(t)===1?super[s(i._0x25ebf4)](e,t):this.redraw(e)}_getDrawEntityClass(e,t){return create$4("polyline",e)}}register$4("polylineP",PolylinePrimitive);class BaseLayer extends BaseClass{constructor(e={}){const t={_0x51ca22:1466,_0x4ec35a:1941,_0x2a5be8:838,_0x16cf4a:2023,_0x4cc19f:2924,_0x23caef:2419},i=_0x3a2b68;super(e),this.options=e,e.id=e.id??createGuid(),e.pid=e[i(t._0x51ca22)]??-1,this._show=e[i(442)]??!![],this._private=e[i(3341)],this[i(1941)].opacity=e.opacity??1,Cesium__namespace.defined(e[i(838)])&&(this[i(t._0x4ec35a)].opacity=e[i(t._0x2a5be8)]),this[i(1941)].proxy&&(isString(this.options.proxy)?this[i(t._0x16cf4a)]=new Cesium__namespace.DefaultProxy(this.options.proxy):this._proxy=this.options.proxy),replaceOnlineUrlDomain(this.options),this[i(3427)](),this._readyPromise=Cesium__namespace[i(t._0x4cc19f)](),this._state=State[i(t._0x23caef)]}get id(){return this.options.id}set id(e){this.options.id=e}get uuid(){return this.options.id}get[_0x3a2b68(3307)](){const e=_0x3a2b68;return this.options[e(3307)]}set name(e){this.options.name=e}get[_0x3a2b68(1466)](){return this.options.pid}set pid(e){const t=_0x3a2b68;this[t(1941)].pid=e}get type(){return this._type}get[_0x3a2b68(498)](){return this[_0x3a2b68(2006)]}get[_0x3a2b68(4326)](){const e=_0x3a2b68;return this._state===State[e(3104)]}get isDestroy(){return this._state===State.DESTROY}get[_0x3a2b68(702)](){return this._private?!![]:![]}get readyPromise(){return this[_0x3a2b68({_0x88260c:1900}._0x88260c)].promise}get layer(){return null}get[_0x3a2b68(442)](){return this._show}set show(e){const t={_0x3acffa:4326,_0x3c1de9:2222},i=_0x3a2b68;if(this[i(4116)]===e||this.isDestroy)return;this.options.show=e,this._show=e;const s=this.layer;s&&(Array.isArray(s)?s.forEach(function(r){const o=i;r.show=e,r[o(840)]&&r._showHook(e)}):(s.show=e,s._showHook&&s._showHook(e))),this[i(t._0x3acffa)]&&(this[i(840)]&&this._showHook(e),e?this.fire(EventType[i(442)]):this.fire(EventType[i(t._0x3c1de9)]))}get hasOpacity(){const e={_0xcff7d6:361,_0x38685a:1744},t=_0x3a2b68;return this.options[t(e._0xcff7d6)]===![]?![]:!!this[t(e._0x38685a)]}get opacity(){return this[_0x3a2b68({_0x331ef7:1941}._0x331ef7)].opacity}set[_0x3a2b68(3248)](e){const t={_0x3708a7:3248,_0x5eb69a:1744},i=_0x3a2b68;this.options[i(t._0x3708a7)]=e,this.setOpacity&&this[i(t._0x5eb69a)](e)}[_0x3a2b68(1803)](e){return e&&e.addLayer&&e.addLayer(this),this}remove(e){this._map&&this._map.removeLayer(this,e)}_onAdd(e){const t={_0x387014:843,_0x3e44f6:1941},i=_0x3a2b68;var s;this.isAdded||this._state===State.ADD||(this._state=State[i(t._0x387014)],this._map=e,this.options.eventParent?this.addEventParent(this[i(t._0x3e44f6)][i(509)]):((s=this.options)===null||s===void 0?void 0:s.eventParent)===![]||this.addEventParent(e),this._mountedHook&&!this._createOK&&(this._mountedHook(),this._createOK=!![]),this._addedHook&&this._addedHook(),this.options.flyTo&&this[i(2330)]({duration:0}),this._state=State.ADDED,this.fire(EventType.add),this[i(1109)](EventType.addLayer,{},!![]))}[_0x3a2b68(1370)](){const e={_0x2ff77f:397,_0x2011a9:1361,_0x274c7b:1941,_0x255f21:1941},t=_0x3a2b68;var i,s;this._state===State.ADDED&&this._map&&(this._removedHook&&this._removedHook(),this._state=State[t(e._0x2ff77f)],this.fire(EventType[t(e._0x2011a9)]),this.fire(EventType.removeLayer,{},!![]),(i=this[t(e._0x274c7b)])!==null&&i!==void 0&&i.eventParent?this.removeEventParent(this.options.eventParent):((s=this[t(e._0x255f21)])===null||s===void 0?void 0:s.eventParent)===![]||this.removeEventParent(this[t(1575)]),this._map=null)}_mountedHook(){}_addedHook(){}[_0x3a2b68(3916)](){}fire(e,t={},i){const s=_0x3a2b68;return!t[s(607)]&&(t.layer=this),super[s(1109)](e,t,i)}flyToByAnimationEnd(e){const t={_0xcc2b2e:2961},i=_0x3a2b68;return!this._map||!this[i(442)]?this:(this._map.isFlyAnimation()?this._map.openFlyAnimationEndFun=()=>{this[i(2961)](e)}:this[i(t._0xcc2b2e)](e),this)}flyTo(e){const t=_0x3a2b68,i=this._flyTo(e);return i||this[t(2449)].then(s=>this._flyTo(e))}_flyTo(e={}){const t={_0x18d5d4:1553,_0x1fe4da:1941,_0x10f9e4:1575},i=_0x3a2b68;if(!this[i(1575)])return Promise.resolve(![]);if(this.options[i(t._0x18d5d4)]&&(e={...this.options.flyToOptions,...e}),this._map.cancelFlyTo(),this[i(t._0x1fe4da)].center)return this._map[i(3006)](this.options.center,e);const s=this.options[i(4087)]||this._extent||this.getRectangle&&this.getRectangle();if(s)return this[i(t._0x10f9e4)].flyToExtent(s,e)}setOptions(e){const t={_0x2947ca:407,_0x1732fa:1651},i=_0x3a2b68;return!e||Object.keys(e).length===0?this:(this[i(1941)]=merge(this[i(1941)],e),Cesium__namespace[i(t._0x2947ca)](e[i(3248)])&&(this.opacity=e.opacity),Cesium__namespace.defined(e.name)&&(this.name=e.name),Cesium__namespace[i(407)](e[i(442)])&&(this.show=e.show),this[i(3427)](),this[i(t._0x1732fa)]&&this._setOptionsHook(this.options,e),this)}[_0x3a2b68(1909)](){const e={_0x58dc90:442,_0x47f894:4182},t=_0x3a2b68,i=clone(this[t(1941)],[t(3591),"eventParent"]);return i.id=this.id,i.type=this.type,i.show=this[t(e._0x58dc90)],this[t(e._0x47f894)](i),i}[_0x3a2b68(4182)](e){}[_0x3a2b68(3427)](){const e={_0x31fa12:948,_0x42f422:1941,_0x3689d7:1941},t=_0x3a2b68;if(Cesium__namespace.defined(this.options[t(948)])&&(this.options[t(e._0x31fa12)]?this._contextmenuConfig={content:this.options.contextmenuItems,options:this[t(e._0x42f422)].contextmenuOptions,layer:this}:this._contextmenuConfig=null),Cesium__namespace.defined(this.options.popup))if(this[t(1941)].popup){const i=this[t(1941)].popupOptions||{};this._popupConfig={options:i,content:bindLayerPopup(i,this.options[t(676)],this.name),layer:this}}else this._popupConfig=null;if(Cesium__namespace.defined(this.options.tooltip))if(this[t(e._0x3689d7)].tooltip){const i=this.options[t(2999)]||{};this._tooltipConfig={options:i,content:bindLayerPopup(i,this.options[t(951)],this.name),layer:this}}else this[t(3126)]=null}_filterPropagateEvent(e,t){return t.type==="load"?![]:!![]}destroy(e){const t={_0x362951:2006,_0x1cb5dd:2006,_0x506a1b:2435},i=_0x3a2b68;this[i(2006)]!==State[i(2435)]&&(this[i(t._0x362951)]!==State[i(397)]&&(this.clear&&this.clear(),this.remove()),super.destroy(e),this[i(t._0x1cb5dd)]=State[i(t._0x506a1b)])}}function bindLayerPopup(n,e,t){const i={_0x523eca:1782},s=_0x3a2b68;return typeof e===s(i._0x523eca)?function(r){return e(r)}:function(r){const o=s;let c=_getAttrForPopup(r);if(c instanceof Promise)return c.then(_=>{const l=_0x20dc;c={layer_name:t,..._};let d=t;return n[l(882)]?d=null:n.title?d=n.title:n.titleField&&(d=c[n.titleField]),getTemplateHtml({title:d,template:e,attr:c})});{c={layer_name:t,...c};let _=t;return n.noTitle?_=null:n.title?_=n[o(988)]:n.titleField&&(_=c[n[o(3151)]]),getTemplateHtml({title:_,template:e,attr:c})}}}function _getAttrForPopup(n){const e={_0xa108b9:3208,_0x168a83:3208},t=_0x3a2b68;var i;return n!=null&&n.attr?n[t(e._0xa108b9)]:n!=null&&(i=n[t(2471)])!==null&&i!==void 0&&i.attr?n.graphic[t(e._0x168a83)]:n.czmObject?(n.czmObject._attr||n.czmObject.properties||n.czmObject[t(1329)])??{}:{}}class BaseGraphicLayer extends BaseLayer{constructor(e={}){const t={_0x3fe1cb:4023,_0xe50366:4023},i=_0x3a2b68;e[i(t._0x3fe1cb)]&&e.templateValues&&(e[i(t._0xe50366)]=template(e.url,e.templateValues)),super(e)}[_0x3a2b68(840)](e){!e&&this[_0x3a2b68(4371)]()}_addedHook(){const e=_0x3a2b68;var t,i;this.options.highlight?this[e(906)](this.options.highlight):(t=this.options.symbol)!==null&&t!==void 0&&(i=t.styleOptions)!==null&&i!==void 0&&i.highlight&&this.bindHighlight(this[e(1941)].symbol.styleOptions.highlight)}_removedHook(){this._closeAllControl(),this.unbindHighlight()}_setOptionsHook(e,t){const i={_0x8c3030:906},s=_0x3a2b68;var r,o;this._highlightOptions&&this.unbindHighlight(),t.highlight?this[s(i._0x8c3030)](e.highlight):(r=t.symbol)!==null&&r!==void 0&&(o=r.styleOptions)!==null&&o!==void 0&&o.highlight&&this.bindHighlight(e[s(1126)].styleOptions.highlight)}_closeAllControl(){this[_0x3a2b68({_0x46657e:2792}._0x46657e)](),this.closeTooltip(),this.closeSmallTooltip(),this.closeContextMenu()}bindHighlight(e){const t={_0x58190b:3017},i=_0x3a2b68;this.unbindHighlight(),this[i(t._0x58190b)]=e,this[i(3017)].type===EventType.click?this.on(EventType[i(383)],this._highlight_mouseEventHandler,this):(this.on(EventType.mouseOver,this[i(3224)],this),this.on(EventType[i(2987)],this._highlight_mouseOutHandler,this))}[_0x3a2b68(402)](){const e=_0x3a2b68;this._highlightOptions&&(this.off(EventType.click,this._highlight_mouseEventHandler,this),this.off(EventType.mouseOver,this._highlight_mouseEventHandler,this),this.off(EventType.mouseOut,this._highlight_mouseOutHandler,this),this[e(1575)][e(2962)](),this[e(3017)]=null)}[_0x3a2b68(3224)](e){const t={_0x14730e:2962},i=_0x3a2b68;if(!this._map)return;const s=e==null?void 0:e.graphic;s?this._map.openHighlight(s,this._highlightOptions,e):this._map[i(t._0x14730e)]()}_highlight_mouseOutHandler(e){this._map.closeHighlight()}[_0x3a2b68(3694)](e,t){const i={_0x28b161:3017},s=_0x3a2b68;!this._map||!e||this._map.openHighlight(e,this[s(i._0x28b161)],t)}closeHighlight(){this[_0x3a2b68({_0x4db2ab:1575}._0x4db2ab)].closeHighlight()}hasPopup(){const e=_0x3a2b68;if(this[e(2876)])return!![];if(this._graphicList){const t=this._graphicList[e(3826)];for(let i=0,s=t.length;i<s;i++)if(t[i]._popupConfig)return!![]}return![]}bindPopup(e,t){const i=_0x3a2b68;return this._popupConfig={content:e,options:t||this[i(1941)].popupOptions,layer:this},this}[_0x3a2b68(1100)](e){return this.closePopup(),e?this._popupConfig=![]:this._popupConfig=null,this}openPopup(e){const t={_0x13dc3b:1575,_0x27351b:676},i=_0x3a2b68;return e.openPopup?e[i(2697)]():this._popupConfig&&e&&this._map&&(this._popupConfig.graphic=null,this[i(t._0x13dc3b)][i(t._0x27351b)].open(e,this._popupConfig)),this}[_0x3a2b68(2792)](){const e={_0x392779:4104},t=_0x3a2b68;return this._map&&this.hasPopup()&&this._map.popup[t(e._0x392779)](null,this),this}hasTooltip(){const e={_0x125fc4:2284,_0x4cec31:3826},t=_0x3a2b68;if(this._tooltipConfig)return!![];if(this._graphicList){const i=this[t(e._0x125fc4)][t(e._0x4cec31)];for(let s=0,r=i.length;s<r;s++)if(i[s][t(3126)])return!![]}return![]}[_0x3a2b68(2678)](e,t){return this._tooltipConfig={content:e,options:t||this.options.tooltipOptions,layer:this},this}unbindTooltip(e){const t=_0x3a2b68;return e?this._tooltipConfig=![]:this._tooltipConfig=null,this[t(2725)](),this}[_0x3a2b68(845)](e){const t=_0x3a2b68;return e.openTooltip?e[t(845)]():this._tooltipConfig&&e&&this._map&&(this._tooltipConfig.graphic=null,this._map.tooltip[t(2591)](e,this._tooltipConfig)),this}closeTooltip(){return this._map&&this.hasTooltip()&&this._map.tooltip.close(null,this),this}hasContextMenu(){const e={_0x24fe3a:2284,_0x456a3a:400},t=_0x3a2b68;if(this._contextmenuConfig)return!![];if(this[t(e._0x24fe3a)]){const i=this._graphicList.values;for(let s=0,r=i[t(e._0x456a3a)];s<r;s++)if(i[s]._contextmenuConfig)return!![]}return![]}getContextMenu(){return this._contextmenuConfig}bindContextMenu(e,t){const i={_0x11ad1e:1941},s=_0x3a2b68;return this._contextmenuConfig={content:e,options:t||this[s(i._0x11ad1e)].contextmenuOptions,layer:this},this}unbindContextMenu(e){const t=_0x3a2b68;return e?this[t(2642)]=![]:this[t(2642)]=null,this.closeContextMenu(),this}[_0x3a2b68(3352)](e){const t={_0x530ba7:1575,_0x17613e:1071},i=_0x3a2b68;return e.openContextMenu?e[i(3352)]():this._contextmenuConfig&&e&&this._map&&(this._contextmenuConfig.graphic=null,this[i(t._0x530ba7)][i(t._0x17613e)][i(2591)](e,this._contextmenuConfig)),this}[_0x3a2b68(1999)](){const e={_0x18262e:4122,_0x17a703:1071},t=_0x3a2b68;return this._map&&this[t(e._0x18262e)]()&&this._map[t(e._0x17a703)].close(null,this),this}[_0x3a2b68(1379)](e,t){const i=_0x3a2b68;return this._map&&this._map[i(1379)](e,t),this}closeSmallTooltip(){const e={_0x245d4a:1937},t=_0x3a2b68;return this[t(1575)]&&this._map[t(e._0x245d4a)](),this}}class GraphicLayer extends BaseGraphicLayer{constructor(e={}){const t={_0xf5ae63:2284},i=_0x3a2b68;super(e),this._setOptionsHook(e,e),this[i(t._0xf5ae63)]=new MarsArray}[_0x3a2b68(1651)](e,t){const i={_0x4d9bf6:1802},s=_0x3a2b68;super._setOptionsHook(e,t),this.hasEdit=e[s(3031)]??![],this.isAutoEditing=e.isAutoEditing??!![],this[s(i._0x4d9bf6)]=e.isContinued??![]}get layer(){const e={_0x3cdf29:1426,_0x3cb1c6:3976},t=_0x3a2b68,i=[];return this._dataSource&&i.push(this[t(e._0x3cdf29)]),this._primitiveCollection&&i.push(this[t(344)]),this._labelCollection&&i.push(this[t(e._0x3cb1c6)]),this._billboardCollection&&i.push(this._billboardCollection),this[t(4189)]&&i.push(this._cloudCollection),this._pointCollection&&i.push(this._pointCollection),this._polylineCollection&&i.push(this._polylineCollection),this._lights&&i[t(1754)](this[t(2172)]),this._visibilitys&&i.push(this[t(2920)]),i}get clustering(){const e={_0x37826b:1426,_0x590c31:377},t=_0x3a2b68;var i;if(this._primitiveCluster)return this._primitiveCluster.enabled;if((i=this[t(e._0x37826b)])!==null&&i!==void 0&&i[t(377)])return this._dataSource[t(e._0x590c31)].enabled}set clustering(e){const t={_0x376774:3174},i=_0x3a2b68;var s;this._primitiveCluster?this._primitiveCluster[i(t._0x376774)]=e:(s=this._dataSource)!==null&&s!==void 0&&s.clustering&&(this.dataSource.clustering.enabled=e)}get dataSource(){const e=_0x3a2b68;return!this[e(1426)]&&(this._dataSource=new Cesium__namespace[e(3160)](this.id),this._dataSource.show=this.show,this._map&&(this._map[e(2160)].add(this._dataSource),Cesium__namespace.defined(this.options.zIndex)&&(this.zIndex=this.options.zIndex))),this._dataSource}get primitiveCollection(){const e={_0x280b7e:1266},t=_0x3a2b68;return!this._primitiveCollection&&(this._primitiveCollection=new Cesium__namespace.PrimitiveCollection(this.options),this._primitiveCollection.show=this.show,this._map&&(this._map.scene.primitives.add(this._primitiveCollection),Cesium__namespace.defined(this.options.zIndex)&&(this.zIndex=this[t(1941)][t(e._0x280b7e)]))),this._primitiveCollection}get labelCollection(){const e={_0x2bb5f8:744},t=_0x3a2b68;return!this._labelCollection&&(this._labelCollection=new Cesium__namespace.LabelCollection({...this.options,scene:this._map[t(e._0x2bb5f8)]}),this._labelCollection.show=this.show,this._map&&this._map.scene[t(3326)][t(3674)](this._labelCollection)),this._labelCollection}get[_0x3a2b68(4325)](){const e={_0x27a289:965,_0x165eac:2137},t=_0x3a2b68;return!this._pointCollection&&(this._pointCollection=new Cesium__namespace[t(e._0x27a289)](this.options),this._pointCollection[t(442)]=this.show,this[t(1575)]&&this._map.scene[t(3326)].add(this[t(e._0x165eac)])),this[t(2137)]}get billboardCollection(){const e={_0x11a355:1988,_0x4259a6:3919,_0x1e0764:1575,_0x3cc513:744},t=_0x3a2b68;return!this[t(e._0x11a355)]&&(this[t(1988)]=new Cesium__namespace[t(e._0x4259a6)]({...this.options,scene:this._map.scene}),this[t(e._0x11a355)].show=this[t(442)],this[t(1575)]&&this[t(e._0x1e0764)][t(e._0x3cc513)][t(3326)][t(3674)](this._billboardCollection)),this[t(1988)]}get[_0x3a2b68(1606)](){const e={_0x3e61e5:3326,_0x360359:3674},t=_0x3a2b68;return!this._cloudCollection&&(this._cloudCollection=new Cesium__namespace[t(2060)](this.options.cloud),this._cloudCollection.show=this.show,this._map&&this._map.scene[t(e._0x3e61e5)][t(e._0x360359)](this._cloudCollection)),this._cloudCollection}get[_0x3a2b68(3611)](){const e=_0x3a2b68;return!this._lights&&(this._lights=new MarsArray,this._lights.show=this[e(442)]),this._lights}get visibilitys(){return!this._visibilitys&&(this._visibilitys=new MarsArray,this._visibilitys.show=this.show),this._visibilitys}get container(){const e={_0x42d8bb:2748,_0x270568:3662},t=_0x3a2b68;return!this._container&&(this[t(2094)]=create$3("div","mars3d-divlayer"),this.show?this[t(2094)].style.display="block":this._container[t(e._0x42d8bb)].display=t(e._0x270568),this._map&&this._map[t(527)].appendChild(this[t(2094)])),this._container}get pointerEvents(){return this._pointerEvents}set[_0x3a2b68(1022)](e){const t=_0x3a2b68;this[t(1259)]=e,e?this.container.style["pointer-events"]="all":this.container.style["pointer-events"]="none"}get objectsToExclude(){const e={_0x3e3e05:2763},t={_0x141deb:3409,_0x2a4459:2051},i={_0x208526:418},s=_0x3a2b68;return this[s(e._0x3e3e05)]?this._objectsToExclude:(!this._objectsToExclude_auto&&(this[s(418)]=[],this._graphicList.forEach(r=>{const o=s,c=r.objectsToExclude;if(c&&c.length>0)c.forEach(_=>{const l=_0x20dc;this._objectsToExclude_auto.indexOf(_)===-1&&this[l(i._0x208526)].push(_)});else if(r.czmObject){const _=r[o(t._0x141deb)];this._objectsToExclude_auto[o(t._0x2a4459)](_)===-1&&this._objectsToExclude_auto.push(_)}},this)),this._objectsToExclude_auto)}set objectsToExclude(e){const t=_0x3a2b68;this[t(2763)]=e}get hasZIndex(){return!![]}get[_0x3a2b68(1266)](){const e={_0x524c53:1941,_0xe60886:1266},t=_0x3a2b68;return this[t(e._0x524c53)][t(e._0xe60886)]}set zIndex(e){const t={_0x28c1e8:1941},i=_0x3a2b68;this[i(t._0x28c1e8)][i(1266)]=e,e!=null&&setTimeout(()=>{this[i(1689)](e)},100)}_setZIndex(e){const t={_0x176c34:3326,_0x198d4b:344,_0xebba9a:1575,_0x5997a2:1426},i=_0x3a2b68;if(this.isAdded){if(this._primitiveCollection){this._primitiveCollection[i(1266)]=e,this._map.scene[i(t._0x176c34)].raiseToTop(this._primitiveCollection);const s=this._map.scene.primitives;for(let r=s.length-1;r>=0;r--){const o=s.get(r);o!==this._primitiveCollection&&Cesium__namespace.defined(o.zIndex)&&e<o[i(1266)]&&this._map.scene.primitives.lower(this[i(t._0x198d4b)])}}if(this._dataSource){this._dataSource.zIndex=e,this[i(t._0xebba9a)].dataSources.raiseToTop(this._dataSource);const s=this._map.dataSources;for(let r=s[i(400)]-1;r>=0;r--){const o=s.get(r);o!==this._dataSource&&Cesium__namespace.defined(o.zIndex)&&e<o.zIndex&&this._map.dataSources[i(526)](this[i(t._0x5997a2)])}}}}[_0x3a2b68(346)](){const e={_0x488721:1575,_0x12a3c3:2160,_0x3d360b:1426},t=_0x3a2b68;if(this._map){if(this._primitiveCollection)return this[t(1575)].scene.primitives.raiseToTop(this[t(344)]);if(this._dataSource)return this[t(e._0x488721)][t(e._0x12a3c3)].raiseToTop(this[t(e._0x3d360b)])}}toBottom(){const e=_0x3a2b68;if(this._map){if(this._primitiveCollection)return this._map[e(744)].primitives[e(3336)](this._primitiveCollection);if(this._dataSource)return this._map.dataSources[e(3336)](this._dataSource)}}get[_0x3a2b68(400)](){var e;return(e=this._graphicList)===null||e===void 0?void 0:e.length}get graphics(){return this.getGraphics()}get[_0x3a2b68(3031)](){return this._hasEdit}set[_0x3a2b68(3031)](e){e?this.activateEdit():this[_0x3a2b68(3310)]()}get isDrawing(){return this[_0x3a2b68({_0x1bfc40:4397}._0x1bfc40)]!=null}get[_0x3a2b68(1524)](){return this[_0x3a2b68(2163)]!=null}get allowDrillPick(){return this[_0x3a2b68(1941)].allowDrillPick}set allowDrillPick(e){this.options.allowDrillPick=e}_onAdd(e){const t={_0x318add:1575,_0x40bce3:1941,_0x28a49c:3674,_0x4ebdf0:1426,_0x9d27a7:3976,_0x469398:1988,_0x10d56b:2137,_0x16f33c:3674,_0x387e09:527,_0x437116:2679,_0xc7caa7:2006},i={_0x411a43:2417},s=_0x3a2b68;var r;this[s(t._0x318add)]||(this._state=State.ADD,this._map=e,this[s(t._0x40bce3)].eventParent?this.addEventParent(this.options.eventParent):((r=this[s(1941)])===null||r===void 0?void 0:r.eventParent)===![]||this[s(1586)](e),this._dataSource&&this._map.dataSources[s(t._0x28a49c)](this[s(t._0x4ebdf0)]),this._primitiveCollection&&this._map.scene.primitives.add(this[s(344)]),this._labelCollection&&this._map[s(744)].primitives[s(3674)](this[s(t._0x9d27a7)]),this[s(t._0x469398)]&&this._map.scene[s(3326)][s(3674)](this._billboardCollection),this._cloudCollection&&this._map.scene.primitives[s(t._0x28a49c)](this._cloudCollection),this[s(t._0x10d56b)]&&this._map.scene[s(3326)].add(this._pointCollection),this._polylineCollection&&this._map.scene.primitives[s(t._0x16f33c)](this[s(3872)]),this[s(2094)]&&this[s(1575)][s(t._0x387e09)].appendChild(this._container),this[s(585)]&&!this[s(4052)]&&(this._createOK=!![],this._mountedHook()),this._addedHook&&this[s(t._0x437116)](),this._graphicList.forEach(o=>{const c=s;o!=null&&o[c(i._0x411a43)]&&o._onAdd(this)},this),Cesium__namespace.defined(this.options[s(1266)])&&(this.zIndex=this.options.zIndex),this[s(t._0xc7caa7)]=State[s(3104)],this.fire(EventType.addLayer,{layer:this},!![]))}[_0x3a2b68(1370)](){const e={_0x371a45:1575,_0x2a6135:744,_0x4e7729:1361,_0xe39853:4189,_0x4c8fef:3326,_0x452ba5:744,_0x29bbc7:1109,_0x27edff:2033,_0x505caf:1941,_0x2b4466:4152,_0x45a497:509},t=_0x3a2b68;var i,s;this._state===State.ADDED&&this[t(e._0x371a45)]&&(this[t(2284)][t(3782)](r=>{r!=null&&r._onRemove&&r._onRemove()},this),this._dataSource&&this._map[t(2160)].remove(this[t(1426)]),this._primitiveCollection&&this._map[t(e._0x2a6135)].primitives.remove(this[t(344)]),this._labelCollection&&this._map[t(744)].primitives[t(1361)](this._labelCollection),this._billboardCollection&&this._map.scene.primitives[t(e._0x4e7729)](this[t(1988)]),this[t(4189)]&&this._map.scene.primitives[t(1361)](this[t(e._0xe39853)]),this[t(2137)]&&this[t(e._0x371a45)].scene.primitives.remove(this._pointCollection),this._polylineCollection&&this._map[t(744)][t(e._0x4c8fef)].remove(this._polylineCollection),this[t(2094)]&&this._container.parentNode&&this[t(1575)].container.removeChild(this._container),this[t(e._0x371a45)][t(e._0x452ba5)].primitives.destroyPrimitives&&(this._primitiveCollection=null,this._labelCollection=null,this._billboardCollection=null,this._cloudCollection=null,this._pointCollection=null,this._polylineCollection=null),this._removedHook&&this._removedHook(),this._state=State.REMOVED,this.fire(EventType.remove),this[t(e._0x29bbc7)](EventType[t(e._0x27edff)],{layer:this},!![]),(i=this[t(e._0x505caf)])!==null&&i!==void 0&&i.eventParent?this[t(e._0x2b4466)](this.options[t(e._0x45a497)]):((s=this[t(1941)])===null||s===void 0?void 0:s.eventParent)===![]||this.removeEventParent(this._map),this[t(1575)]=null)}_showHook(e){const t=_0x3a2b68;super._showHook(e),e?this._container&&(this._container.style.display="block",this[t(2284)].forEach(i=>{const s=t;i.updateDivPosition&&i[s(4072)]()},this)):(this._container&&(this._container[t(2748)][t(2085)]="none"),this.stopDraw())}_mountedHook(){const e={_0x42b8f5:1941,_0x291d1c:2736,_0x119016:1941,_0x1adb5e:2797},t={_0x189f8e:4397,_0x2eea0b:2163},i={_0x5c717c:608,_0xef6dc0:1941,_0x3e7de1:907},s=_0x3a2b68;if(super._mountedHook(),this.on(EventType.drawCreated,o=>{const c=_0x20dc;this[c(i._0x5c717c)](),this.isContinued?this[c(3194)](clone(o.graphic[c(i._0xef6dc0)])):this.hasEdit&&this.isAutoEditing&&this[c(i._0x3e7de1)](o.graphic)},this),this.on(EventType.load,o=>{const c=_0x20dc;this.hasEdit&&this.isAutoEditing&&this._graphic_editing===o.graphic&&this.startEditing(o[c(2471)])},this),this.on(EventType.removeGraphic,o=>{const c=_0x20dc;this[c(4397)]===o.graphic&&(this[c(t._0x189f8e)]=null),this[c(t._0x2eea0b)]===o.graphic&&(this._graphic_editing=null)},this),this.on(EventType.editStart,o=>{this._graphic_editing=o.graphic},this),this.on(EventType.editStop,o=>{this._graphic_editing=null},this),this[s(e._0x42b8f5)].clustering){var r;if((r=this.dataSource)!==null&&r!==void 0&&r.clustering&&this._bindClustering(this.dataSource.clustering,this.options.clustering),Cesium__namespace.PrimitiveCluster){const o=new Cesium__namespace.PrimitiveCluster(this.options[s(377)]);o._billboardCollection=new Cesium__namespace[s(3919)],o._pointCollection=new Cesium__namespace.PointPrimitiveCollection,o._labelCollection=new Cesium__namespace.LabelCollection,o[s(e._0x291d1c)](this._map[s(744)]),this._bindClustering(o,this[s(e._0x119016)][s(377)]),this._map[s(744)].primitives.add(o),this._primitiveCluster=o}}this.type==="graphic"&&(this[s(1941)].data&&this[s(2847)](this.options.data),this._readyPromise.resolve(this)),this.options.geojson&&this[s(e._0x1adb5e)](this.options.geojson)}_addedHook(){const e=_0x3a2b68;super._addedHook(),this._hasEdit&&this[e(1701)](),this.options.flyTo&&this[e(2330)]()}[_0x3a2b68(3916)](){const e=_0x3a2b68;super._removedHook(),this._hasEdit&&(this[e(608)](),this._unbindEditEvent())}getRectangle(e){const t={_0x282b68:1983};let i;return this._graphicList.forEach(s=>{const r=_0x20dc;if(!s[r(1737)])return;const o=s.getRectangle();Cesium__namespace.defined(o)&&(i?i=Cesium__namespace[r(t._0x282b68)].union(o,i):i=o)},this),e?formatRectangle(i):i}[_0x3a2b68(3320)](){let e=0;return this._graphicList.forEach(t=>{const i=_0x20dc;t.getMaxHeight&&(e=Math[i(3198)](t.getMaxHeight(),e))},this),e}toGeoJSON(e){const t=_0x3a2b68;e!=null&&e.stopEdit&&this[t(378)]();let i=[];return this._graphicList.forEach(s=>{const r=t;if(s.isPrivate)return;const o=s.toGeoJSON(e);o&&(Array[r(391)](o)?i=i.concat(o):i.push(o))},this),{type:"FeatureCollection",layer:{id:this.id,name:this[t(3307)]},features:i}}_toJsonEx(e){const t={_0x316958:1924},i=_0x3a2b68;this.stopEditing();let s=[];this[i(2284)].forEach(r=>{if(r.isPrivate||!r.state)return;const o=r.toJSON();o&&(Array.isArray(o)?s=s.concat(o):s.push(o))},this),e[i(t._0x316958)]=s}[_0x3a2b68(2797)](e,t={}){var i;try{isString(e)&&(e=JSON.parse(e))}catch(_){logError$1("loadGeoJSON:请确认json文件格式正确!",_);return}const s=(i=this._map)===null||i===void 0?void 0:i.chinaCRS,r=this.options.chinaCRS,o=getTransFun(r,s),c=geoJsonToGraphics(e,{...t,symbol:this.options.symbol,crs:this.options.crs,onPointTrans:o});return this._addGraphicByArrOptions(c,t)}[_0x3a2b68(1925)](e,t={}){const i={_0x1fd077:2126,_0x489423:3256,_0x4e5b23:400,_0x2f367b:2483,_0x54788c:1575},s=_0x3a2b68;t[s(i._0x1fd077)]&&this.clear();let r=[];if(e[s(400)]===0)return r;let o;t[s(i._0x489423)]===![]&&(this.enabledEvent=![],o=!![]);const c=e[0].type,_=this.options.graphicOptions||{};if(isCombineType(c)){const l={..._,type:c,instances:e};t.onEachFeature&&t.onEachFeature(l);const d=this._addGraphic(l,![]);r.push(d)}else for(let l=0,d=e[s(i._0x4e5b23)];l<d;l++){const f={..._,...e[l]};if(t.onEachFeature&&t.onEachFeature(f),this.options[s(i._0x2f367b)]){const g=this[s(1941)].onCreateGraphic(f);g&&(this.addGraphic(g),Array.isArray(g)?r=r[s(4083)](g):r.push(g))}else{const g=this._addGraphic(f,![]);r.push(g)}}return o&&(this.enabledEvent=!![]),t[s(2961)]&&this.show&&this[s(i._0x54788c)][s(3525)](r),r}_bindClustering(e,t={}){const i={_0x1d3499:3203,_0x44265d:2009,_0x2bcd85:1618,_0x3bb8c3:4076},s={_0x313f86:1700},r=_0x3a2b68;if(!e)return;e.enabled=t[r(3174)]??![],e.pixelRange=t.pixelRange??20,e.minimumClusterSize=t.minimumClusterSize??2;let o=setInterval(()=>{const c=r;this[c(400)]>0&&e[c(s._0x313f86)]&&e._cluster()},100);e.clusterEvent.addEventListener((c,_)=>{const l={_0x37677e:1754},d=r;if(o&&(clearInterval(o),o=null),_[d(3203)][d(662)]=this.id,_[d(i._0x1d3499)].show=![],_.point[d(662)]=this.id,_.billboard._mars3d_layerId=this.id,_.billboard.show=!![],_[d(i._0x44265d)].id=_.label.id,_.billboard[d(i._0x2bcd85)]=Cesium__namespace.VerticalOrigin.BOTTOM,_.billboard.heightReference=t.clampToGround?Cesium__namespace.HeightReference.CLAMP_TO_GROUND:Cesium__namespace.HeightReference.NONE,_.billboard.scale=.5,t[d(2748)]&&(BillboardStyleConver.toCesiumVal(t.style,_.billboard),t[d(2748)].setHeight&&(_.billboard.position=setPositionsHeight(_.billboard[d(i._0x3bb8c3)],t.style[d(3798)])),t[d(2748)].addHeight&&(_.billboard.position=addPositionsHeight(_.billboard.position,t.style.addHeight))),t.getImage){const b=t[d(3051)](c.length,t);b.then?b.then(function(C){_.billboard.image=C}):_.billboard.image=b}else _[d(i._0x44265d)].image=getCircleImage(c.length,t);const f=this,g={entities:c,cluster:_,getGraphics:function(){const b=d,C=[],P=this.entities;for(let S=0,L=P[b(400)];S<L;S++){const E=P[S],M=f.getGraphicById(E==null?void 0:E._mars3d_graphicId);C[b(l._0x37677e)](M)}return C}};_[d(i._0x44265d)]._clusterData=g,this.fire("clustering",g)})}[_0x3a2b68(3956)](){const e={_0x2d71cd:2423},t=_0x3a2b68;var i;const s=(i=this.dataSource)===null||i===void 0?void 0:i.clustering;if(!s)return;const r=s._clusterBillboardCollection,o=s._previousClusters,c=[];for(let _=0,l=r.length;_<l;_++){const d=r.get(_);c.push({...o[_],...d[t(e._0x2d71cd)],billboard:d})}return c}setOpacity(e){const t={_0x5864a3:2284},i={_0x287f71:1744},s=_0x3a2b68;this.options.opacity=e,this[s(t._0x5864a3)][s(3782)](r=>{r[s(i._0x287f71)]&&r.setOpacity(e)},this)}addGraphic(e){const t={_0x4bba03:400},i=_0x3a2b68;if(!this._createOK&&this._mountedHook&&(this._createOK=!![],this[i(585)]()),Array.isArray(e)){if(e[i(400)]===0)return;const s=e[0].type;if(isCombineType(s)&&!e[0].instances){const r={type:s,instances:e};return this._addGraphic(r)}else{const r=[];for(let o=0,c=e[i(t._0x4bba03)];o<c;o++){const _=this._addGraphic(e[o]);_&&r.push(_)}return r}}else return this._addGraphic(e)}_addGraphic(e,t=!![]){const i={_0x242d1f:418,_0x1d52c4:1941},s=_0x3a2b68;var r;return delete this[s(i._0x242d1f)],this._graphicList[s(615)]((r=e)===null||r===void 0?void 0:r.id)&&(e.id=createGuid(),logWarn("addGraphic:数据id存在冲突，已重新赋值id",e)),!e._onAdd&&(e.type||this[s(i._0x1d52c4)].symbol)&&(t&&this.options.symbol&&(e=mergeSymbolToGraphic(e,this[s(1941)].symbol)),e=create$4(e.type,e)),e&&(e._onAdd(this),this._graphicList.set(e.id,e)),e}[_0x3a2b68(1155)](e,t){return this._removeGraphic(e,t),this}_removeGraphic(e,t,i){const s=_0x3a2b68;if(!e||!e._onRemove)return this;delete this[s(418)],!i&&this._graphicList.remove(e.id),e._onRemove(),t&&e.destroy()}getGraphicById(e){const t=_0x3a2b68;return this[t(2284)][t(615)](e)}getGraphicByAttr(e,t){const i={_0x56b77b:3208},s=_0x3a2b68;return this[s(2284)].getByAttr(e,t,s(i._0x56b77b))}getGraphicsByAttr(e,t){const i={_0x36c27f:387,_0x1bdcb9:3208},s=_0x3a2b68;return this._graphicList[s(i._0x36c27f)](e,t,s(i._0x1bdcb9))}getGraphicsByStyle(e,t){const i={_0x77b1a8:3782},s={_0x5e0050:2748},r=_0x3a2b68,o=[];return this._graphicList[r(i._0x77b1a8)](c=>{c[r(s._0x5e0050)][e]===t&&o.push(c)},this),o}eachGraphic(e,t){return this[_0x3a2b68({_0x4080ff:2284}._0x4080ff)].forEach(e,t||this),this}getGraphics(e=![]){const t=_0x3a2b68;if(e)return this[t(2284)].values;{const i=[];return this._graphicList.forEach(s=>{!s.isPrivate&&i.push(s)},this),i}}clear(e=!![]){const t={_0xc0d893:3782,_0x3ddf32:2284,_0x36c55c:2931,_0x1fe500:2193,_0x2578d9:400,_0x36db56:1090,_0x1e8174:344,_0x5324ff:836,_0x314ceb:3872},i=_0x3a2b68;if(this.stopDraw(),this._graphicList&&(this._graphicList[i(t._0xc0d893)](o=>{this._removeGraphic(o,e,!![])},this),this[i(t._0x3ddf32)].removeAll()),this[i(1426)]&&this._dataSource[i(t._0x36c55c)][i(836)](),this._primitiveCollection)try{this._primitiveCollection.removeAll()}catch{const c=this._primitiveCollection[i(t._0x1fe500)],_=c[i(t._0x2578d9)];for(let l=0;l<_;++l){var s,r;(s=c[l])!==null&&s!==void 0&&(r=s._external)!==null&&r!==void 0&&r[i(t._0x36db56)]&&(delete c[l][i(550)]._composites[this._guid],this._primitiveCollection.destroyPrimitives&&c[l].destroy())}this[i(t._0x1e8174)]._primitives=[]}this._labelCollection&&this[i(3976)][i(t._0x5324ff)](),this._billboardCollection&&this._billboardCollection.removeAll(),this._cloudCollection&&this._cloudCollection.removeAll(),this[i(2137)]&&this._pointCollection.removeAll(),this[i(t._0x314ceb)]&&this[i(3872)].removeAll(),this[i(2172)]&&this[i(2172)].removeAll(),this._visibilitys&&this._visibilitys[i(836)](),this._closeAllControl()}[_0x3a2b68(3037)](e={}){return new Promise((t,i)=>{const s={_0x5ae35d:2602,_0x4899bd:3037,_0x433639:3037},r=_0x20dc,o=this.getGraphics();let c=-1;const _=o[r(400)];function l(){const d=r;if(c++,c>=_){e.end&&e[d(s._0x5ae35d)]({index:c,count:_,graphics:o}),t(o);return}const f=o[c];f[d(s._0x4899bd)]?f[d(s._0x433639)](e).then(()=>{e.endItem&&e.endItem({graphic:f,index:c,count:_}),l()}):(e.endItem&&e.endItem({graphic:f,index:c,count:_}),l())}l()})}clampToGround(e){return this[_0x3a2b68(3037)](e)}[_0x3a2b68(3194)](e){return new Promise((t,i)=>{if(this.stopDraw(),!this._map)throw new Error("startDraw:需要 map.addLayer(当前图层) 后，才行使用本方法");e._promise={resolve:t,reject:i};const s=fromDraw(this,e);s!=null&&(this._graphic_drawing=s)})}[_0x3a2b68(3344)](){const e={_0x42cf05:4397},t=_0x3a2b68;if(this.stopEditing(),this[t(e._0x42cf05)]){const i=this._graphic_drawing.endDraw();return i&&(this._graphic_drawing=null),i}return![]}[_0x3a2b68(608)](){const e=_0x3a2b68;return this.stopEditing(),this._graphic_drawing?(this[e(4397)].stopDraw(),this._graphic_drawing=null,!![]):![]}clearDrawing(){const e={_0x460ed5:4397,_0x5355d1:1361},t=_0x3a2b68;return this._graphic_drawing?(this[t(e._0x460ed5)][t(e._0x5355d1)](!![]),this._graphic_drawing=null,!![]):![]}activateEdit(){const e={_0x4af9a3:1575,_0x2b395a:1701},t=_0x3a2b68;if(!this._hasEdit)return this[t(611)]=!![],this[t(e._0x4af9a3)]&&this[t(e._0x2b395a)](),this}disableEdit(){if(this[_0x3a2b68(611)])return this._hasEdit=![],this._unbindEditEvent(),this.stopEditing(),this}_bindEditEvent(){const e={_0xc8e04d:383},t=_0x3a2b68;this._map.on(EventType[t(e._0xc8e04d)],this._onClickHandler,this),this._map.on(EventType.mouseMoveTarget,this._onMouseMoveHandler,this)}[_0x3a2b68(1216)](){const e={_0x19b806:2971},t=_0x3a2b68;this._map.off(EventType.click,this[t(1518)],this),this._map[t(e._0x19b806)](EventType.mouseMoveTarget,this[t(841)],this)}_onMouseMoveHandler(e){const t={_0x102522:1127,_0x2602e6:2471,_0x23dca4:702,_0x4a7566:446,_0x5c31ee:3600},i=_0x3a2b68;if(!this._hasEdit||!this[i(1575)].scene.screenSpaceCameraController.enableInputs)return;let s=e.graphic;if(!s){const o=this._map[i(1374)].getPickTarget(e[i(t._0x102522)],e);s=o==null?void 0:o[i(t._0x2602e6)]}if(s==null||s._layer!==this){this._map.closeSmallTooltip();return}if(s._enabledDraw||s[i(t._0x23dca4)]||!s.hasEdit||this[i(1575)].contextmenu.show&&this._map.contextmenu[i(t._0x4a7566)]===s)return;let r;isPCBroswer()?r=this._map.getLangText("_单击后激活编辑")+"<br/>"+this._map.getLangText("_右击菜单删除"):r=this._map[i(t._0x5c31ee)](i(452)),this[i(1575)].openSmallTooltip(e.windowPosition,r)}_onClickHandler(e){const t={_0x5457a2:378},i=_0x3a2b68;if(this[i(4397)])return;const s=e.graphic;s&&(s.isPrivate||!s.hasEdit)||(this.hasEdit&&s&&e.layer===this?this.startEditing(s,e):this[i(t._0x5457a2)]())}[_0x3a2b68(907)](e,t){const i={_0x5bb1a2:907,_0x27ac04:1379,_0x3d3ef6:4076},s=_0x3a2b68;if(!(!e||!e.startEditing||!e.isAdded||!e.hasEdit)&&!(this[s(2163)]===e||e[s(1832)]))return this.stopEditing(),e[s(i._0x5bb1a2)](),t&&e._draw_tooltip&&this._map[s(i._0x27ac04)](t[s(i._0x3d3ef6)],e[s(540)]),this._graphic_editing=e,this}[_0x3a2b68(378)](){const e=_0x3a2b68;return this._graphic_editing&&(this[e(2163)].stopEditing(),this[e(2163)]=null),this}}register$2(_0x3a2b68(2471),GraphicLayer);class MatrixMove extends BaseThing{constructor(e={}){const t={_0x53cfc2:4076},i=_0x3a2b68;super(e),this.translation=new Cesium__namespace.Cartesian3(0,0,0),this.rotateMatrix=new Cesium__namespace.Matrix3(1,0,0,0,1,0,0,0,1),e[i(4076)]&&(this.position=e[i(t._0x53cfc2)])}get position(){return this[_0x3a2b68(1187)]}set position(e){const t={_0x545607:1187},i=_0x3a2b68;this[i(t._0x545607)]=LngLatPoint.toCartesian(e),this._initByPosition(),this._updatePositionHook(!![])}get isMoveing(){return this[_0x3a2b68({_0x4aeb54:1575}._0x4aeb54)]?this._hasChangeEnableInputs:![]}_mountedHook(){this._graphicLayer=new GraphicLayer({private:!![]})}_addedHook(){const e={_0x437cbb:2505},t=_0x3a2b68;this[t(1575)].addLayer(this[t(e._0x437cbb)]),this._updatePositionHook(!![]),this._createGraphics(),this[t(398)]()}[_0x3a2b68(3916)](){const e={_0x41050a:772,_0x253514:2126},t=_0x3a2b68;this._graphic_move_x&&delete this._graphic_move_x,this[t(3334)]&&delete this._graphic_move_y,this._graphic_move_z&&delete this._graphic_move_z,this._graphic_dragger_ing&&delete this[t(e._0x41050a)],this._graphicLayer[t(e._0x253514)](),this._map.removeLayer(this._graphicLayer),this[t(2293)]()}_createGraphics(){const e={_0x260c27:2264,_0x127c53:523,_0x4017ae:4280,_0x414bb9:2847,_0x518cd7:3334,_0x2a15f1:2505,_0x3fe516:2092},t=_0x3a2b68;this._graphicLayer[t(2126)](),this[t(e._0x260c27)]=new PolylinePrimitive({positions:this._positions_line_x,style:{width:15,arcType:Cesium__namespace.ArcType.NONE,materialType:PolylineArrow,color:Cesium__namespace.Color[t(e._0x127c53)],depthFail:!![]},attr:{move:!![],type:Cesium__namespace.Axis.X},asynchronous:![]}),this[t(2505)][t(2847)](this[t(2264)]),this._graphic_move_y=new PolylinePrimitive({positions:this[t(3067)],style:{width:15,arcType:Cesium__namespace.ArcType[t(e._0x4017ae)],materialType:PolylineArrow,color:Cesium__namespace.Color.GREEN,depthFail:!![]},attr:{move:!![],type:Cesium__namespace[t(2207)].Y},asynchronous:![]}),this._graphicLayer[t(e._0x414bb9)](this[t(e._0x518cd7)]),this[t(902)]=new PolylinePrimitive({positions:this[t(2955)],style:{width:15,arcType:Cesium__namespace[t(4201)].NONE,materialType:PolylineArrow,color:Cesium__namespace[t(2092)].BLUE,depthFail:!![]},attr:{move:!![],type:Cesium__namespace.Axis.Z},asynchronous:![]}),this[t(e._0x2a15f1)][t(e._0x414bb9)](this._graphic_move_z),this._graphic_dragger_ing=new PolylinePrimitive({positions:[],style:{width:3,arcType:Cesium__namespace.ArcType.NONE,materialType:PolylineDash,color:Cesium__namespace[t(e._0x3fe516)].YELLOW,depthFail:!![]},asynchronous:![],show:![]}),this._graphicLayer.addGraphic(this._graphic_dragger_ing)}[_0x3a2b68(3838)](){const e={_0x22645c:3737,_0x4743b0:2978,_0x382258:3193,_0x3a6f19:2478},t=_0x3a2b68;this.modelToWorld=Cesium__namespace[t(e._0x22645c)][t(778)](this.position),this.worldToModel=Cesium__namespace.Matrix4.inverse(this.modelToWorld,new Cesium__namespace.Matrix4),this[t(4297)]=this.modelToWorld.clone(),this.inverseMatrix=Cesium__namespace.Matrix4.inverse(this.matrix,new Cesium__namespace[t(2478)]),this[t(690)]=Cesium__namespace.Matrix4.multiplyByPointAsVector(this.matrix,Cesium__namespace.Cartesian3[t(434)],new Cesium__namespace[t(e._0x4743b0)]),this.normalY=Cesium__namespace.Matrix4[t(e._0x382258)](this.matrix,Cesium__namespace[t(2978)].UNIT_Y,new Cesium__namespace.Cartesian3),this.normalZ=Cesium__namespace[t(e._0x3a6f19)][t(3193)](this.matrix,Cesium__namespace.Cartesian3.UNIT_Z,new Cesium__namespace.Cartesian3),this._positions_line_x=[],this._positions_line_y=[],this._positions_line_z=[]}_getFactor(){const e={_0x6c9a9a:4076,_0x254d95:3569,_0x2bf84b:2073},t=_0x3a2b68;let s=-new Cesium__namespace.Matrix4.multiplyByPoint(this[t(1575)].camera.viewMatrix,this[t(e._0x6c9a9a)],new Cesium__namespace.Cartesian3).z*Math.tan(this._map.camera[t(e._0x254d95)][t(e._0x2bf84b)]/2)*2;return(!s||s<100)&&(s=100),s/this._map.canvas.width}[_0x3a2b68(1002)](e){const t={_0x3d4d36:3878,_0x2420bd:4297,_0x5ab7c4:3878,_0x5ed09f:3878,_0x447290:2694},i=_0x3a2b68;if(!this._map)return;const s=this.position.clone();e&&(this[i(t._0x3d4d36)]=200*this[i(913)]()),this._positions_line_x=[s,Cesium__namespace.Matrix4[i(3705)](this[i(t._0x2420bd)],new Cesium__namespace.Cartesian3(this[i(t._0x5ab7c4)],0,0),new Cesium__namespace.Cartesian3)],this._positions_line_y=[s,Cesium__namespace[i(2478)][i(3705)](this[i(4297)],new Cesium__namespace.Cartesian3(0,this[i(3878)],0),new Cesium__namespace.Cartesian3)],this._positions_line_z=[s,Cesium__namespace[i(2478)].multiplyByPoint(this.matrix,new Cesium__namespace[i(2978)](0,0,this[i(t._0x5ed09f)]),new Cesium__namespace[i(2978)])],this._graphic_move_x&&(this._graphic_move_x[i(t._0x447290)]=this._positions_line_x),this._graphic_move_y&&(this._graphic_move_y.positions=this[i(3067)]),this._graphic_move_z&&(this._graphic_move_z.positions=this._positions_line_z)}_bindEvent(){const e={_0x41daf9:3755,_0x1d2f6b:3950},t=_0x3a2b68;this._graphicLayer.on(EventType[t(e._0x41daf9)],this._onMap_leftDown,this),this[t(1575)].on(EventType.leftUp,this._onMap_leftUp,this),this._map.on(EventType[t(1547)],this._onMap_middleClick,this),this._map.on(EventType[t(e._0x1d2f6b)],this[t(1121)],this)}_unbindEvent(){const e={_0x5eb53f:2971,_0x5dc700:3755,_0x20dced:3921,_0x34b753:1575},t=_0x3a2b68;this._graphicLayer[t(e._0x5eb53f)](EventType[t(e._0x5dc700)],this._onMap_leftDown,this),this._map.off(EventType[t(e._0x20dced)],this._onMap_leftUp,this),this._map.off(EventType.mouseMove,this._onMap_mouseMove,this),this._map[t(2971)](EventType[t(1547)],this._onMap_middleClick,this),this[t(e._0x34b753)].off(EventType.wheel,this._onMap_wheel,this)}_onMap_leftDown(e){const t={_0x2c40a8:1840,_0x20ff80:2595},i=_0x3a2b68;if(this._graphic=void 0,e.layer!==this._graphicLayer)return;const s=e.graphic;if(!s||!(s.attr.move||s.attr.rotate))return;this._graphic=s,!s.style.color_bak&&(s.style.color_bak=s[i(2748)][i(2540)]),s.setStyle({color:Cesium__namespace[i(2092)].YELLOW}),this._graphic_dragger_ing[i(2694)]=[this.position,this[i(4076)]],this._graphic_dragger_ing.show=!![];const r=this._graphic[i(3208)].type;this.fire(EventType[i(3702)],{...e,editType:r,graphic:s}),this._map.scene.screenSpaceCameraController.enableInputs&&(this._map.scene.screenSpaceCameraController[i(3583)]=![],this[i(4173)]=!![]),this._map.on(EventType[i(t._0x2c40a8)],this[i(t._0x20ff80)],this)}_onMap_mouseMove(e){const t={_0x59c42a:3208,_0x70049d:1603,_0x30729e:2354,_0x47425f:626,_0x188008:3676,_0x13590c:1575,_0x2b8ef6:913,_0x19c78e:2228,_0x263b42:3664,_0x59b3c0:3705,_0x180d4a:654,_0x170281:4297,_0x2e2cf1:2978,_0x56dd72:2478,_0x59d03f:2329,_0x3545d6:2978,_0x1a6a30:1144,_0x1afe6d:971,_0x54bf7e:2905,_0x28fe7a:1721,_0x2b43b2:772,_0x58a315:2694},i=_0x3a2b68;if(!this._graphic)return;const s=e.startPosition,r=e.endPosition;let o;const c=this._graphic[i(t._0x59c42a)][i(t._0x70049d)];c===Cesium__namespace.Axis.X&&(o=this[i(690)]),c===Cesium__namespace.Axis.Y&&(o=this[i(t._0x30729e)]),c===Cesium__namespace.Axis.Z&&(o=this[i(t._0x47425f)]);const _=new Cesium__namespace.Cartesian3(r.x-s.x,-(r.y-s.y),0);this._map.scene.mode===Cesium__namespace.SceneMode[i(t._0x188008)]&&(_.x=-1*_.x);const l=new Cesium__namespace.Matrix4.multiplyByPointAsVector(this[i(t._0x13590c)].camera.inverseViewMatrix,_,new Cesium__namespace[i(2978)]),d=Cesium__namespace[i(2978)].dot(l,o)*this[i(t._0x2b8ef6)](),f=Cesium__namespace[i(2228)].fromCartesian(this.position);let g=new Cesium__namespace.Cartesian3(this.position.x+o.x*d,this.position.y+o.y*d,this.position.z+o.z*d);c!==Cesium__namespace.Axis.Z&&(g=Cesium__namespace[i(t._0x19c78e)].fromCartesian(g),g.height=f[i(4241)],c===Cesium__namespace.Axis.X?g.latitude=f[i(t._0x263b42)]:g.longitude=f[i(768)],g=Cesium__namespace[i(2978)].fromRadians(g.longitude,g.latitude,g.height));const b=Cesium__namespace.Matrix4[i(t._0x59b3c0)](this[i(3205)],g,new Cesium__namespace[i(2978)]);Cesium__namespace[i(2478)][i(3193)](this.matrix,b,b),Cesium__namespace.Matrix4.multiplyByVector(this.worldToModel,new Cesium__namespace[i(t._0x180d4a)](b.x,b.y,b.z,0),b),Cesium__namespace.Cartesian3.add(this.translation,b,this.translation),this.position=g,this.matrix=Cesium__namespace.Transforms.eastNorthUpToFixedFrame(this.position),Cesium__namespace[i(2478)].inverse(this[i(t._0x170281)],this.inverseMatrix);const C=this.normalX,P=this.normalY,S=this.normalZ;if(this.normalX=Cesium__namespace.Matrix4.multiplyByPointAsVector(this[i(t._0x170281)],Cesium__namespace.Cartesian3.UNIT_X,new Cesium__namespace.Cartesian3),this[i(2354)]=Cesium__namespace.Matrix4.multiplyByPointAsVector(this.matrix,Cesium__namespace.Cartesian3.UNIT_Y,new Cesium__namespace.Cartesian3),this.normalZ=Cesium__namespace.Matrix4.multiplyByPointAsVector(this.matrix,Cesium__namespace.Cartesian3.UNIT_Z,new Cesium__namespace.Cartesian3),c===Cesium__namespace.Axis.X){let E=Cesium__namespace.Cartesian3[i(971)](P,this[i(2354)]),M=Cesium__namespace[i(t._0x2e2cf1)].angleBetween(S,this.normalZ);d<0&&(M=-M,E=-E);const D=Cesium__namespace[i(t._0x56dd72)][i(3193)](this.worldToModel,S,new Cesium__namespace.Cartesian3);let R=Cesium__namespace.Matrix3.inverse(this.rotateMatrix,new Cesium__namespace.Matrix3),k=Cesium__namespace.Matrix3.multiplyByVector(R,D,new Cesium__namespace[i(t._0x2e2cf1)]),N=this._axisRotation(k,E);Cesium__namespace.Matrix3.multiply(this[i(t._0x59d03f)],N,this.rotateMatrix);const $=Cesium__namespace[i(t._0x56dd72)].multiplyByPointAsVector(this.worldToModel,P,new Cesium__namespace[i(t._0x3545d6)]);R=Cesium__namespace.Matrix3.inverse(this.rotateMatrix,new Cesium__namespace.Matrix3),k=Cesium__namespace.Matrix3.multiplyByVector(R,$,new Cesium__namespace[i(t._0x2e2cf1)]),N=this[i(3815)](k,M),Cesium__namespace.Matrix3[i(t._0x1a6a30)](this[i(t._0x59d03f)],N,this.rotateMatrix)}if(c===Cesium__namespace.Axis.Y){let E=Cesium__namespace.Cartesian3[i(t._0x1afe6d)](S,this.normalZ);d>0&&(E=-E);const M=Cesium__namespace.Matrix4.multiplyByPointAsVector(this[i(t._0x54bf7e)],C,new Cesium__namespace.Cartesian3),D=Cesium__namespace[i(1168)].inverse(this.rotateMatrix,new Cesium__namespace.Matrix3),R=Cesium__namespace.Matrix3[i(t._0x28fe7a)](D,M,new Cesium__namespace.Cartesian3),k=this[i(3815)](R,E);Cesium__namespace.Matrix3.multiply(this.rotateMatrix,k,this.rotateMatrix)}this[i(t._0x2b43b2)][i(t._0x58a315)]=[this[i(t._0x2b43b2)].positions[0],g],this._updatePositionHook();const L={...e,editType:c,position:g};this[i(4288)](L)}[_0x3a2b68(3283)](e){const t={_0xd36cba:4227,_0x5c2dca:2748,_0x5cefc7:1575,_0x54c08f:4173,_0x19c116:2971,_0x5906f5:1840},i=_0x3a2b68;this._graphic&&(this._graphic[i(1110)]({color:this[i(t._0xd36cba)][i(t._0x5c2dca)].color_bak}),this._graphic=null,this._graphic_dragger_ing.positions=[],this._graphic_dragger_ing.show=![],this._hasChangeEnableInputs&&(this[i(t._0x5cefc7)].scene.screenSpaceCameraController.enableInputs=!![],delete this[i(t._0x54c08f)]),this._map[i(t._0x19c116)](EventType[i(t._0x5906f5)],this._onMap_mouseMove,this),this.fire(EventType.stop,e))}_axisRotation(e,t,i){const s={_0x29fee3:2755,_0x4ede0e:3817,_0x56f81b:1108,_0x1cf13c:1168,_0x20baca:1168},r=_0x3a2b68;let o=e.x,c=e.y,_=e.z;const l=Math.sqrt(o*o+c*c+_*_);o=o/l,c=c/l,_=_/l;const d=o*o,f=c*c,g=_*_,b=Math.cos(t),C=Math.sin(t),P=1-b;return i=i||new Cesium__namespace.Matrix3,i[Cesium__namespace.Matrix3[r(s._0x29fee3)]]=d+(1-d)*b,i[Cesium__namespace.Matrix3.COLUMN0ROW1]=o*c*P+_*C,i[Cesium__namespace.Matrix3[r(s._0x4ede0e)]]=o*_*P-c*C,i[Cesium__namespace.Matrix3[r(3700)]]=o*c*P-_*C,i[Cesium__namespace.Matrix3[r(s._0x56f81b)]]=f+(1-f)*b,i[Cesium__namespace[r(s._0x1cf13c)].COLUMN1ROW2]=c*_*P+o*C,i[Cesium__namespace[r(s._0x20baca)][r(2241)]]=o*_*P+c*C,i[Cesium__namespace.Matrix3.COLUMN2ROW1]=c*_*P-o*C,i[Cesium__namespace.Matrix3.COLUMN2ROW2]=g+(1-g)*b,i}_onMap_wheel(){this[_0x3a2b68(1002)](!![])}_onMap_middleClick(e){const t={_0x3e5e0c:4297},i=_0x3a2b68,s=this[i(1575)][i(744)].pickPosition(e.position);s&&(this.position=s,this.matrix=Cesium__namespace.Transforms.eastNorthUpToFixedFrame(this[i(4076)]),Cesium__namespace.Matrix4.inverse(this[i(t._0x3e5e0c)],this.inverseMatrix),this._updatePositionHook())}onChange(e){const t=_0x3a2b68;this.options.onChange&&this.options.onChange(e),this[t(1109)](EventType.change,e,!![])}}class MatrixRotate extends MatrixMove{get heading(){const e=_0x3a2b68;return this[e(1941)][e(2782)]??0}set heading(e){const t={_0x53afb9:2782},i=_0x3a2b68;this.options[i(t._0x53afb9)]=e}get[_0x3a2b68(1630)](){return this[_0x3a2b68({_0x5b8e28:1941}._0x5b8e28)].pitch??0}set pitch(e){this.options.pitch=e}get roll(){const e={_0x121bad:1941},t=_0x3a2b68;return this[t(e._0x121bad)][t(2341)]??0}set roll(e){const t={_0x4400e6:1941,_0x174046:2341},i=_0x3a2b68;this[i(t._0x4400e6)][i(t._0x174046)]=e}_removedHook(){const e={_0x40ec96:3373},t=_0x3a2b68;delete this._graphic_rotate_z,delete this[t(e._0x40ec96)],delete this._graphic_rotate_y,super._removedHook()}_createGraphics(){const e={_0x56657c:2126,_0xf78cf8:523,_0x93573e:2847,_0x30b589:2207,_0x3f83c3:1326,_0x44806d:3831,_0x2219ca:2092,_0x3642e2:2092},t=_0x3a2b68;this._graphicLayer[t(e._0x56657c)](),this[t(3373)]=new PolylinePrimitive({positions:this._positions_circle_x,style:{width:8,color:Cesium__namespace.Color[t(e._0xf78cf8)],depthFail:!![],depthFailColor:Cesium__namespace.Color.RED.withAlpha(.5)},attr:{rotate:!![],type:Cesium__namespace.Axis.X},asynchronous:![]}),this._graphicLayer[t(e._0x93573e)](this._graphic_rotate_x),this._graphic_rotate_y=new PolylinePrimitive({positions:this._positions_circle_y,style:{width:8,color:Cesium__namespace.Color.GREEN,depthFail:!![],depthFailColor:Cesium__namespace[t(2092)].GREEN.withAlpha(.5)},attr:{rotate:!![],type:Cesium__namespace[t(e._0x30b589)].Y},asynchronous:![]}),this._graphicLayer.addGraphic(this[t(e._0x3f83c3)]),this._graphic_rotate_z=new PolylinePrimitive({positions:this._positions_circle_z,style:{width:8,color:Cesium__namespace[t(2092)][t(e._0x44806d)],depthFail:!![],depthFailColor:Cesium__namespace[t(e._0x2219ca)].BLUE.withAlpha(.5)},attr:{rotate:!![],type:Cesium__namespace.Axis.Z},asynchronous:![]}),this._graphicLayer.addGraphic(this[t(2292)]),this._graphic_dragger_ing=new PolylinePrimitive({positions:[],style:{width:3,arcType:Cesium__namespace.ArcType.NONE,materialType:PolylineDash,color:Cesium__namespace[t(e._0x3642e2)].YELLOW,depthFail:!![]},asynchronous:![],show:![]}),this._graphicLayer.addGraphic(this._graphic_dragger_ing)}[_0x3a2b68(3838)](){const e={_0x310350:2478,_0x26a1c0:4297,_0x4e0902:709,_0x2c6ed3:2478,_0x588b2d:434,_0x395444:2978,_0x464a5c:626},t=_0x3a2b68;this.modelToWorld=Cesium__namespace.Transforms.eastNorthUpToFixedFrame(this.position),this.worldToModel=Cesium__namespace.Matrix4[t(2853)](this.modelToWorld,new Cesium__namespace[t(e._0x310350)]),this[t(e._0x26a1c0)]=this[t(e._0x4e0902)].clone(),this.inverseMatrix=Cesium__namespace[t(e._0x2c6ed3)].inverse(this.matrix,new Cesium__namespace.Matrix4),this[t(690)]=Cesium__namespace.Matrix4.multiplyByPointAsVector(this[t(4297)],Cesium__namespace.Cartesian3[t(e._0x588b2d)],new Cesium__namespace.Cartesian3),this.normalY=Cesium__namespace[t(2478)].multiplyByPointAsVector(this.matrix,Cesium__namespace.Cartesian3.UNIT_Y,new Cesium__namespace[t(e._0x395444)]),this[t(e._0x464a5c)]=Cesium__namespace.Matrix4[t(3193)](this.matrix,Cesium__namespace.Cartesian3.UNIT_Z,new Cesium__namespace[t(2978)]),this._positions_circle_z=[],this._positions_circle_x=[],this._positions_circle_y=[]}_updatePositionHook(e){const t={_0x4e6b01:4233,_0x3f020e:1575,_0x454a11:1401,_0x3183bd:2978,_0x6973d:3674,_0x1afe90:2978,_0x4ebb9f:2080,_0x49a7b0:3373,_0x4e7534:2694,_0x458887:1326,_0xbfecda:1326},i=_0x3a2b68;if(!this._map)return;const s=this.position.clone();if(e){const r=new Cesium__namespace[i(2478)].multiplyByPoint(this._map[i(t._0x4e6b01)].viewMatrix,s,new Cesium__namespace.Cartesian3),o=-r.z*Math.tan(this[i(t._0x3f020e)][i(4233)].frustum.fov/2)*2,c=o/this._map.canvas.width;this.radius=200*c}this._positions_circle_z=[],this[i(t._0x454a11)]=[],this._positions_circle_y=[];for(let r=0;r<=360;r++){const o=this.radius*Math[i(2519)](r/180*Math.PI),c=this.radius*Math.sin(r/180*Math.PI),_=new Cesium__namespace[i(t._0x3183bd)];Cesium__namespace.Cartesian3.add(s,Cesium__namespace[i(t._0x3183bd)][i(2080)](this.normalX,o,new Cesium__namespace[i(t._0x3183bd)]),_),Cesium__namespace.Cartesian3[i(3674)](_,Cesium__namespace.Cartesian3.multiplyByScalar(this.normalY,c,new Cesium__namespace[i(t._0x3183bd)]),_),this._positions_circle_z.push(_);const l=new Cesium__namespace[i(2978)];Cesium__namespace.Cartesian3[i(t._0x6973d)](s,Cesium__namespace[i(t._0x3183bd)].multiplyByScalar(this.normalX,o,new Cesium__namespace.Cartesian3),l),Cesium__namespace.Cartesian3.add(l,Cesium__namespace.Cartesian3.multiplyByScalar(this.normalZ,c,new Cesium__namespace.Cartesian3),l),this._positions_circle_x.push(l);const d=new Cesium__namespace.Cartesian3;Cesium__namespace[i(t._0x1afe90)].add(s,Cesium__namespace[i(2978)][i(t._0x4ebb9f)](this[i(2354)],o,new Cesium__namespace.Cartesian3),d),Cesium__namespace[i(2978)].add(d,Cesium__namespace[i(2978)].multiplyByScalar(this[i(626)],c,new Cesium__namespace.Cartesian3),d),this._positions_circle_y.push(d)}this._graphic_rotate_z&&(this._graphic_rotate_z[i(2694)]=this._positions_circle_z),this[i(t._0x49a7b0)]&&(this._graphic_rotate_x[i(t._0x4e7534)]=this._positions_circle_x),this[i(t._0x458887)]&&(this[i(t._0xbfecda)].positions=this._positions_circle_y)}_onMap_mouseMove(e){const t={_0x2c422e:2825,_0x50f1cb:4076,_0xcbf61b:3569,_0x182af8:679,_0x32d89c:2978,_0x19c8d4:1575,_0x19161a:4297,_0x2c3983:1575,_0x5ba636:1575,_0x355525:4241,_0x542c7a:3705,_0x1fb478:3205,_0x302dfe:2207,_0x21072b:2905,_0x3e2dd1:1630,_0x195a83:2806,_0x4fe0b6:2978,_0x31eff4:2329,_0x353933:1168},i=_0x3a2b68,s=e.startPosition,r=e.endPosition,o=new Cesium__namespace.Matrix4.multiplyByPoint(this._map.camera[i(t._0x2c422e)],this[i(t._0x50f1cb)],new Cesium__namespace.Cartesian3);let _=-o.z*Math.tan(this[i(1575)].camera[i(t._0xcbf61b)][i(2073)]/2)*2/this._map[i(t._0x182af8)].width;const l=new Cesium__namespace.Cartesian3(1,1,1);let d;const f=this._graphic.attr[i(1603)];f===Cesium__namespace.Axis.Z&&(l.z=0,d=Cesium__namespace.Cartesian3.angleBetween(Cesium__namespace.Matrix4.multiplyByPointAsVector(this.matrix,new Cesium__namespace.Cartesian3(0,0,1),new Cesium__namespace.Cartesian3),this[i(1575)].camera.direction)),f===Cesium__namespace[i(2207)].X&&(l.y=0,d=Cesium__namespace[i(t._0x32d89c)].angleBetween(Cesium__namespace.Matrix4.multiplyByPointAsVector(this[i(4297)],new Cesium__namespace.Cartesian3(0,1,0),new Cesium__namespace[i(t._0x32d89c)]),this[i(t._0x19c8d4)][i(4233)].direction)),f===Cesium__namespace.Axis.Y&&(l.x=0,d=Cesium__namespace.Cartesian3.angleBetween(Cesium__namespace.Matrix4[i(3193)](this[i(t._0x19161a)],new Cesium__namespace.Cartesian3(1,0,0),new Cesium__namespace.Cartesian3),this._map.camera.direction)),Math.abs(d-Math.PI/2)<.1&&(_=1,o.z=0);let g=new Cesium__namespace.Cartesian3((s.x-this._map[i(679)].width/2)*_,(-s.y+this[i(t._0x2c3983)].canvas.height/2)*_,o.z),b=new Cesium__namespace.Cartesian3((r.x-this[i(t._0x5ba636)][i(t._0x182af8)].width/2)*_,(-r.y+this._map.canvas[i(t._0x355525)]/2)*_,o.z);Cesium__namespace.Matrix4[i(t._0x542c7a)](this._map.camera.inverseViewMatrix,g,g),Cesium__namespace.Matrix4[i(3705)](this._map.camera.inverseViewMatrix,b,b),Cesium__namespace[i(2478)].multiplyByPoint(this.inverseMatrix,g,g),Cesium__namespace.Matrix4.multiplyByPoint(this[i(t._0x1fb478)],b,b),g=new Cesium__namespace[i(2978)](g.x*l.x,g.y*l.y,g.z*l.z),b=new Cesium__namespace.Cartesian3(b.x*l.x,b.y*l.y,b.z*l.z),d=Cesium__namespace[i(2978)][i(971)](g,b);let C;if(f===Cesium__namespace[i(t._0x302dfe)].Z){const M=g.x*b.y-g.y*b.x;C=Cesium__namespace[i(2478)][i(3193)](this[i(t._0x21072b)],this[i(626)],new Cesium__namespace.Cartesian3),M>0&&(d=-d),this.heading=(this.heading+Cesium__namespace.Math.toDegrees(d))%360}else if(f===Cesium__namespace[i(2207)].X){const M=g.x*b.z-g.z*b.x;C=Cesium__namespace.Matrix4[i(3193)](this.worldToModel,this[i(2354)],new Cesium__namespace.Cartesian3),M>0&&(d=-d),this[i(t._0x3e2dd1)]=(this.pitch+Cesium__namespace[i(t._0x195a83)].toDegrees(d))%360}else if(f===Cesium__namespace.Axis.Y){const M=g.y*b.z-g.z*b.y;C=Cesium__namespace.Matrix4.multiplyByPointAsVector(this.worldToModel,this.normalX,new Cesium__namespace[i(t._0x4fe0b6)]),M<0&&(d=-d),this.roll=(this.roll+Cesium__namespace.Math.toDegrees(d))%360}const P=Cesium__namespace.Matrix3.inverse(this[i(t._0x31eff4)],new Cesium__namespace[i(t._0x353933)]),S=Cesium__namespace.Matrix3.multiplyByVector(P,C,new Cesium__namespace.Cartesian3),L=this[i(3815)](S,d);Cesium__namespace.Matrix3.multiply(this.rotateMatrix,L,this[i(2329)]);const E={...e,editType:f,position:this.position,heading:this[i(2782)],pitch:this.pitch,roll:this.roll};this.onChange(E)}_onMap_middleClick(e){}}class EditBase{constructor(e){this._graphic=e,this._map=e._map,this.draggers=[]}get[_0x3a2b68(3174)](){return this._enabled}get map(){return this._map}get layer(){return this[_0x3a2b68(4227)]._layer}get[_0x3a2b68(2748)](){return this._graphic.style}get clampToGround(){const e={_0x5205a2:4227},t=_0x3a2b68;var i,s;return(i=this[t(e._0x5205a2)])===null||i===void 0||(s=i.style)===null||s===void 0?void 0:s.clampToGround}get[_0x3a2b68(1603)](){return this[_0x3a2b68(4227)].type}get entityGraphic(){return this[_0x3a2b68({_0x49c200:4227}._0x49c200)].entityGraphic}set[_0x3a2b68(2694)](e){const t=_0x3a2b68;this._graphic[t(2206)]=e}get positions(){return this[_0x3a2b68(4227)]._positions_draw||this._graphic._positions||[]}get hasRotateMatrix(){return!!this._matrixRotate}get hasMoveMatrix(){return!!this._matrixMove}fire(e,t={},i=!![]){const s={_0x119348:1603,_0x46a992:1603},r=_0x3a2b68;if(this._graphic){const o=this._graphic.parent;t.editType=this[r(s._0x119348)],this._graphic[r(1109)](e,t,i),o&&(t[r(1868)]=o[r(s._0x46a992)],o.fire(e,t,i))}}formatNum(e,t){return formatNum$1(e,t)}[_0x3a2b68(1669)](){const e={_0x23b05b:4227,_0x60be90:3358,_0x479081:3625},t=_0x3a2b68;return this._enabled?this:(this[t(4090)]=!![],this[t(e._0x23b05b)]._setPositionsToCallback&&this[t(e._0x23b05b)][t(e._0x60be90)](),this.destroyDraggers(),this.bindDraggers(),this.bindEvent(),this.fire(EventType[t(e._0x479081)]),this)}disable(){const e={_0x6fda65:1735,_0x36fc7e:2753,_0xcfef47:3660},t=_0x3a2b68;var i,s,r;return this[t(4090)]?(this._enabled=![],this.stopMoveMatrix(),this.stopRotateMatrix(),this.unbindEvent(),this[t(e._0x6fda65)](),this[t(e._0x36fc7e)](),(i=this._graphic)!==null&&i!==void 0&&(s=i._layer)!==null&&s!==void 0&&(r=s.options)!==null&&r!==void 0&&r[t(e._0xcfef47)]&&this._graphic._cancelPositionsCallback(),this.fire(EventType.editStop),this):this}finish(){}[_0x3a2b68(1015)](){const e={_0x12852b:1575},t=_0x3a2b68;this._map.on(EventType.leftDown,this._onLeftDownHandler,this),this[t(e._0x12852b)].on(EventType[t(1840)],this._onMouseMoveHandler,this),this._map.on(EventType.leftUp,this._onLeftUpHandler,this)}[_0x3a2b68(2780)](){const e={_0x5696d3:1840,_0x45e011:841,_0x232796:3928},t=_0x3a2b68;this._map.off(EventType.leftDown,this._onLeftDownHandler,this),this[t(1575)][t(2971)](EventType[t(e._0x5696d3)],this[t(e._0x45e011)],this),this._map.off(EventType.leftUp,this._onLeftUpHandler,this),this._hasChangeEnableInputs&&(this._map.scene[t(e._0x232796)][t(3583)]=!![],delete this._hasChangeEnableInputs),this._map._setEditCursor(![]),!this._graphic[t(442)]&&(this._graphic.show=!![])}[_0x3a2b68(1011)](e){const t={_0xd111c6:1750,_0x2b418d:607,_0x152e28:744,_0x5e64cd:3928,_0x2654c0:4371,_0x23090b:1137,_0x211c63:442,_0x49891f:1748,_0x112e3f:4076,_0xd416a9:805},i=_0x3a2b68,s=this._map.mouseEvent[i(t._0xd111c6)](e.position,e);if(s[i(t._0x2b418d)]!==this.layer)return;const r=s==null?void 0:s.graphic;!r||!r._isDragger||(this[i(1575)][i(t._0x152e28)][i(t._0x5e64cd)].enableInputs&&(this._map.scene.screenSpaceCameraController[i(3583)]=![],this._hasChangeEnableInputs=!![]),this._map._setEditCursor(!![]),r[i(t._0x2654c0)](),this[i(t._0x23090b)]=r,this[i(1137)][i(t._0x211c63)]=r.options[i(t._0x49891f)]??![],r.onDragStart&&r.onDragStart(r,s.cartesian||r[i(t._0x112e3f)]),this[i(1109)](EventType[i(t._0xd416a9)],{...e,...s,index:this._draggerIng.index}))}[_0x3a2b68(841)](e){this._draggerIng?this._onMouseMoveDraggerHandler(e):this._onMouseMoveMapHandler(e)}[_0x3a2b68(857)](e){const t={_0x2604fb:1575,_0x163e61:2978,_0x21434a:459,_0x2d2b54:1137,_0x49fa8f:4029,_0x223450:1127,_0x293197:1137},i=_0x3a2b68;let s;switch(this[i(1137)]._pointType){case PointType.MoveHeight:{var r;const o=e.endPosition.y-e.startPosition.y,c=getPositionValue(this._draggerIng.position,(r=this[i(t._0x2604fb)])===null||r===void 0?void 0:r.clock.currentTime),_=new Cesium__namespace.EllipsoidTangentPlane(c),l=new Cesium__namespace.BoundingSphere,d=new Cesium__namespace[i(2978)];l.center=c,l.radius=1;const f=this._map.scene.frameState[i(4233)][i(573)](l,this._map.scene.frameState.context.drawingBufferWidth,this._map.scene.frameState.context.drawingBufferHeight)*1.5;Cesium__namespace.Cartesian3[i(2080)](_[i(4037)],-o*f,d),s=Cesium__namespace[i(t._0x163e61)].clone(c),Cesium__namespace[i(2978)].add(c,d,s),this[i(1137)].position=s,this._draggerIng[i(t._0x21434a)]&&this._draggerIng[i(459)](this[i(t._0x2d2b54)],s,c),this[i(t._0x49fa8f)](),this[i(1109)](EventType.editStyle,e);break}default:{this[i(t._0x2604fb)].openSmallTooltip(e[i(t._0x223450)],this._map.getLangText("_释放后完成修改"));let o=this._graphic[i(4335)];if(this.clampToGround&&(o=null),s=getCurrentMousePosition(this[i(1575)].scene,e[i(1127)],o),s){if(this[i(4227)].options.validDrawPosition&&!this._graphic.options[i(875)](s,this[i(4227)]))return;this[i(t._0x293197)].position=s,this._draggerIng.onDrag&&this[i(1137)].onDrag(this[i(t._0x293197)],s),this.updateAttrForEditing()}}break}this.fire(EventType.editMouseMove,{...e,index:this._draggerIng.index,cartesian:s,windowPosition:e.endPosition})}_onMouseMoveMapHandler(e){const t={_0x2e4002:1937,_0x2e1751:607,_0x22932f:3906,_0x116f8d:1071,_0x2c4b71:400,_0x4c7c2b:3912,_0x150a4d:2500},i=_0x3a2b68;var s,r;const o=this[i(1575)].mouseEvent.getPickTarget(e.endPosition,e),c=o==null?void 0:o[i(2471)];if(c==null){this._map[i(t._0x2e4002)]();return}if(o[i(t._0x2e1751)]!==this.layer||!c[i(t._0x22932f)]||this._map[i(t._0x116f8d)].show&&this._map.contextmenu.target===c)return;let _=c._draw_tooltip;_&&(PointType[i(4330)]===c._pointType&&((s=this._graphic)===null||s===void 0||(r=s._positions_draw)===null||r===void 0?void 0:r[i(t._0x2c4b71)])>this._graphic._minPointNum&&(_+=i(t._0x4c7c2b)+this._map.getLangText(i(t._0x150a4d))),this._map.openSmallTooltip(e.endPosition,_))}[_0x3a2b68(1594)](e){const t={_0x5962b6:1575,_0xfbec8d:1191,_0x569ec4:1517},i=_0x3a2b68;var s;if(!this._draggerIng)return;this._draggerIng.show=!![];const r=getPositionValue(this[i(1137)].position,(s=this[i(t._0x5962b6)])===null||s===void 0?void 0:s.clock.currentTime),o=this[i(1137)][i(t._0xfbec8d)];this[i(1137)][i(1517)]&&this._draggerIng[i(t._0x569ec4)](this._draggerIng,r),this.updateAttrForEditing(),this.fire(EventType.editMovePoint,{...e,index:o,cartesian:r}),this[i(1137)]=null,this._map._setEditCursor(![]),this._hasChangeEnableInputs&&(this._map.scene[i(3928)].enableInputs=!![],delete this._hasChangeEnableInputs)}[_0x3a2b68(1848)](e){const t={_0x4d1b3a:3600,_0x51c111:2427},i=_0x3a2b68;this._map.openSmallTooltip(e,this._map[i(t._0x4d1b3a)](i(t._0x51c111))+" "+this._graphic._minPointNum)}createDragger(e){const t={_0x69086e:2887,_0x3b9e3b:4076,_0x204f8b:2978,_0x4fa8ee:2748,_0x2bd691:540,_0x4ff116:3600,_0x3d20e9:3906},i=_0x3a2b68;let s;return e.dragger?s=e[i(t._0x69086e)]:(s=new PointPrimitive({position:e[i(t._0x3b9e3b)]??Cesium__namespace[i(t._0x204f8b)].ZERO,style:getEditPointStyle(e.type),hasEdit:![],private:!![]}),s[i(t._0x4fa8ee)].clampToGround=this.clampToGround,s.parent=this._graphic,this[i(607)].addGraphic(s)),s[i(t._0x2bd691)]=this._map[i(t._0x4ff116)]("_拖动该点后")+" "+(e.tooltip||this._map.getLangText("_修改位置")),s[i(t._0x3d20e9)]=!![],s._noMousePick=!![],s._pointType=e.type||PointType.Control,s.onDragStart=e[i(4168)],s.onDrag=e.onDrag,s[i(1517)]=e.onDragEnd,(s[i(2517)]===PointType.Control||s._pointType===PointType.MoveAll)&&(this._graphic.options[i(463)]??!![])&&(s[i(t._0x2bd691)]+="<br/>"+this._map.getLangText("_更多功能请右击"),s.bindContextMenu(this.getDraggerContextMenu(s))),s}bindDraggers(){}destroyDraggers(){const e={_0x1f2daf:400},t=_0x3a2b68;for(let i=0,s=this[t(4320)][t(e._0x1f2daf)];i<s;i++)this.layer.removeGraphic(this.draggers[i],!![]);this.draggers=[]}updateDraggers(){const e={_0x4b5568:2173},t=_0x3a2b68;if(!this._enabled)return this;clearTimeout(this[t(2173)]),this[t(e._0x4b5568)]=setTimeout(()=>{this._updateDraggers()},20)}_updateDraggers(){const e={_0xe1bfa:400,_0x4b8b7f:4320,_0x3bf43a:1191},t=_0x3a2b68;var i;if(!this._enabled)return this;const s=(i=this._matrixMove)===null||i===void 0?void 0:i._dragger_index;if(this.destroyDraggers(),this.bindDraggers(),Cesium__namespace.defined(s))for(let r=0,o=this.draggers[t(e._0xe1bfa)];r<o;r++){const c=this[t(e._0x4b8b7f)][r];if(!(c._pointType!==PointType.Control&&c[t(2517)]!==PointType.MoveAll)&&c[t(e._0x3bf43a)]===s){this.startMoveMatrix(c);break}}}[_0x3a2b68(4029)](){const e={_0x494f07:2098},t=_0x3a2b68;this._graphic.updateAttrForDrawing&&this._graphic[t(2e3)](!![]),this._graphic._updateLabelPosition&&this._graphic[t(e._0x494f07)]()}getDraggerContextMenu(e){const t={_0x395585:2739},i={_0x1cec8c:1250},s={_0x5b5997:1191,_0x31fa04:2206},r={_0x29313f:3486,_0x5f599c:4076},o={_0x29683a:1524},c=_0x3a2b68;return[{text:this._map.getLangText(c(1271)),icon:Icon[c(2739)],show:_=>{const l=c;var d;return(d=this[l(4227)])===null||d===void 0?void 0:d[l(o._0x29683a)]},callback:_=>{this._graphic.stopEditing()}},{text:this._map.getLangText("_删除该点"),icon:Icon.Delete,show:_=>{const l=c;var d;return!((d=this._graphic)!==null&&d!==void 0&&d._positions_draw)||e._pointType===PointType[l(r._0x29313f)]?![]:this._graphic._positions_draw.length-1<this._graphic._minPointNum?(this.openSmallTooltipByMinPointNum(_[l(r._0x5f599c)]),![]):!![]},callback:_=>{const l=c,d=_.graphic;if(d){const f=d[l(s._0x5b5997)];f>=0&&f<this._graphic[l(s._0x31fa04)].length&&(this._graphic._positions_draw.splice(f,1),this.updateDraggers(),this.updateAttrForEditing(),this[l(1109)](EventType.editRemovePoint,{..._,index:f}))}}},{text:this._map[c(3600)]("_按轴平移"),icon:Icon.DrawEditYes,show:_=>{const l=c;return this._map.scene.mode!==Cesium__namespace.SceneMode[l(i._0x1cec8c)]?![]:!this._matrixMove||this._matrixMove._dragger_index!==e[l(1191)]},callback:_=>{const l=c;var d;const f=(d=_.graphic)!==null&&d!==void 0&&d[l(4076)]?_.graphic:_.layer;this.startMoveMatrix(f,_)}},{text:this[c(1575)][c(3600)]("_停止按轴平移"),icon:Icon[c(t._0x395585)],show:_=>{const l=c;return this._matrixMove&&this[l(2328)]._dragger_index===e.index},callback:_=>{this[c(3047)]()}}]}_updateStyleHook(e){const t={_0xbf4140:3047},i=_0x3a2b68;Cesium__namespace.defined(e.clampToGround)&&(this[i(t._0xbf4140)](),this[i(3257)](),this.updateDraggers())}[_0x3a2b68(2644)](e,t){const i={_0x4fe805:2413},s=_0x3a2b68;this[s(1109)](EventType[s(i._0x4fe805)],{index:e.index,cartesian:t})}[_0x3a2b68(4261)](e,t={}){const i={_0x32da03:3047,_0x5c3eae:4136,_0x4c1ed4:2328,_0x5d00d2:3644,_0x30d4d1:2328,_0x548ae1:2328,_0x51f771:3702,_0x21477c:2682,_0x2929c9:1560,_0xf74594:4174},s={_0x44ab27:4227,_0x5eb39e:1529,_0x2f577d:4227},r={_0x39aa44:4076},o={_0x121da2:2328},c=_0x3a2b68;this[c(i._0x32da03)](),this.stopRotateMatrix(),!e&&(e=this._graphic);let _=e[c(i._0x5c3eae)]||e[c(4076)];this.clampToGround&&(_=getSurfacePosition(this._map.scene,_)),this._matrixMove=new MatrixMove({position:_}),this[c(1575)].addThing(this[c(2328)]),this[c(i._0x4c1ed4)]._graphicLayer.bindContextMenu([{text:this[c(1575)].getLangText(c(i._0x5d00d2)),icon:Icon[c(2739)],show:l=>this[c(o._0x121da2)],callback:l=>{this.stopMoveMatrix()}}]),this.clampToGround&&this._matrixMove._graphic_move_z&&(this[c(i._0x30d4d1)][c(902)].show=![]),this[c(i._0x4c1ed4)]._dragger_index=e.index,this[c(i._0x548ae1)].on(EventType[c(i._0x51f771)],l=>{const d=c;e.onDragStart&&e.onDragStart(e,this._matrixMove[d(r._0x39aa44)])}),this._matrixMove.on(EventType[c(i._0x21477c)],l=>{const d=c;e.onDragEnd?e.onDragEnd(e,this[d(2328)][d(4076)],l):e[d(4076)]=this._matrixMove.position,e.fire(EventType.updatePosition,{position:this[d(2328)].position}),this.fire(EventType.editMovePoint,{...t,...l,index:e.index,cartesian:_})}),this[c(i._0x30d4d1)].on(EventType.change,l=>{const d=c;var f;const g=this._matrixMove.position;if(e.isPrivate?e.position=g:Cesium__namespace[d(407)]((f=this[d(s._0x44ab27)])===null||f===void 0?void 0:f[d(s._0x5eb39e)])?this[d(s._0x2f577d)][d(1529)]=g:e[d(4076)]=g,l.editType===Cesium__namespace.Axis.Z&&this._updateHeight){const b=Cesium__namespace.Cartographic.fromCartesian(g).height;this._updateHeight(b)}else e.onDrag&&e[d(459)](e,g);this.updateAttrForEditing(),this.fire(EventType.editMouseMove,{...t,...l,index:e.index,cartesian:g})}),e.off(EventType.updatePosition,this._updateMatrixMovePosition,this),e.off(EventType.updatePosition,this._updateMatrixRotatePosition,this),e.on(EventType[c(i._0x2929c9)],this[c(i._0xf74594)],this)}[_0x3a2b68(4174)](e){const t={_0x13e672:2328},i=_0x3a2b68;var s;!this._matrixMove||this[i(t._0x13e672)].isMoveing||!e.position||this._matrixMove._dragger_index!==((s=e.graphic)===null||s===void 0?void 0:s.index)||(this[i(2328)].position=e[i(4076)])}stopMoveMatrix(){this[_0x3a2b68({_0x98ab0b:2328}._0x98ab0b)]&&(this._map.removeThing(this._matrixMove,!![]),delete this._matrixMove)}[_0x3a2b68(4217)](e){const t={_0x4a72ce:2783,_0x5540c0:2341,_0x5cf51f:2439,_0x23e294:1575,_0x482672:1560},i={_0x141de2:2748,_0xe591e8:1630},s=_0x3a2b68;this[s(3047)](),this.stopRotateMatrix(),!e&&(e=this[s(4227)]),this[s(t._0x4a72ce)]=new MatrixRotate({position:e.positionShow||e.position,heading:this.style.heading||0,pitch:this.style.pitch||0,roll:this[s(2748)][s(t._0x5540c0)]||0}),this._map.addThing(this._matrixRotate),this[s(2783)]._graphicLayer[s(t._0x5cf51f)]([{text:this[s(t._0x23e294)].getLangText("_停止按轴旋转"),icon:Icon.BloomEffectNo,show:r=>this._matrixRotate,callback:r=>{this.stopRotateMatrix()}}]),this[s(2783)].on(EventType.change,r=>{const o=s;this[o(i._0x141de2)].heading=formatNum$1(r.heading,2),this[o(2748)].pitch=formatNum$1(r[o(i._0xe591e8)],2),this.style[o(2341)]=formatNum$1(r.roll,2),this._graphic.updateOrientation(),this.fire(EventType.editStyle)}),e.off(EventType[s(1560)],this._updateMatrixMovePosition,this),e[s(2971)](EventType[s(t._0x482672)],this._updateMatrixRotatePosition,this),e.on(EventType.updatePosition,this[s(3296)],this)}_updateMatrixRotatePosition(e){const t=_0x3a2b68;var i;!this._matrixRotate||this._matrixRotate[t(2438)]||!e.position||this._matrixRotate._dragger_index!==((i=e[t(2471)])===null||i===void 0?void 0:i.index)||(this._matrixRotate.position=e.position)}stopRotateMatrix(){const e={_0x153914:625},t=_0x3a2b68;this[t(2783)]&&(this._map[t(e._0x153914)](this._matrixRotate,!![]),delete this._matrixRotate)}destroy(){this.disable();for(const e in this)delete this[e]}}class EditPoint extends EditBase{bindDraggers(){const e={_0x1f3898:1529};this.createDragger({dragger:this._graphic,onDrag:(t,i)=>{const s=_0x20dc;this._graphic[s(e._0x1f3898)]=i}})}[_0x3a2b68(2753)](){const e={_0x9d5394:4227,_0x2036cd:4227,_0x45f4ed:2001},t=_0x3a2b68;delete this[t(e._0x9d5394)]._draw_tooltip,delete this[t(e._0x2036cd)]._isDragger,delete this._graphic._noMousePick,delete this._graphic[t(2517)],delete this[t(4227)].onDrag,this._graphic[t(e._0x45f4ed)]()}}class BasePointEntity extends BaseEntity{constructor(e={}){const t={_0x5cbab4:1748},i=_0x3a2b68;e[i(t._0x5cbab4)]=e.drawShow??!![],super(e),this._minPointNum=e.minPointNum??1,this[i(1678)]=e[i(3792)]??1,this._hasEdit=this.options.hasEdit??!![],e.positions&&(this.positions=e.positions),e.position&&(this.position=e.position)}get[_0x3a2b68(1746)](){return EditPoint}get[_0x3a2b68(4076)](){return this[_0x3a2b68({_0x4e2f56:1187}._0x4e2f56)]}set[_0x3a2b68(4076)](e){const t={_0x506146:3601,_0x2658aa:3798,_0x1574aa:1879,_0x4608d8:1014,_0x5dd16e:1560},i=_0x3a2b68;var s,r;if(this.isDestroy)return;if(this._point=LngLatPoint.parse(e),this._point&&!(this[i(t._0x506146)][i(671)]===0&&this._point.lng===0)){let _=this.style[i(t._0x2658aa)];Cesium__namespace[i(407)](_)&&(isString(_)&&(_=Number(template(_,this.attr,!![])),isNaN(_)&&(_=0)),this._point[i(1879)]=_);const l=this.getAddHeight();l!==0&&(this._point.alt=this._point[i(t._0x1574aa)]+l)}const o=(s=this._point)===null||s===void 0?void 0:s.toCartesian();if((r=this.editing)!==null&&r!==void 0&&r.enabled&&o instanceof Cesium__namespace.Cartesian3){var c;this._position_draw=o,o&&((c=this._positions_draw)===null||c===void 0?void 0:c[i(400)])>0&&(this[i(2206)][0]=o)}else this[i(t._0x4608d8)]&&o instanceof Cesium__namespace.Cartesian3&&this._cancelPositionsCallback(),this._position=o;this._entity&&this._updatePositionsHook(),this.fire(EventType[i(t._0x5dd16e)],{position:this[i(1187)]})}get[_0x3a2b68(4136)](){var e;return getPositionValue(this.position,(e=this._map)===null||e===void 0?void 0:e.clock.currentTime)}get point(){const e={_0x5eb785:3601},t=_0x3a2b68;return!(this._position instanceof Cesium__namespace.Cartesian3)&&(this[t(e._0x5eb785)]=LngLatPoint[t(738)](this.positionShow)),this[t(3601)]}get coordinate(){return this.getCoordinate()}get center(){var e;return getPositionValue(this.positionShow,(e=this._map)===null||e===void 0?void 0:e.clock.currentTime)}get centerPoint(){return this.point}get positions(){return this.position?[this.position]:[]}set positions(e){const t={_0x1ab317:4076},i=_0x3a2b68;e&&e.length>0&&(this[i(t._0x1ab317)]=e[0])}get[_0x3a2b68(4274)](){return this.point?[this.point]:[]}get coordinates(){const e={_0x1b285b:2555},t=_0x3a2b68;return this[t(2555)]?[this[t(e._0x1b285b)]]:[]}get positionsShow(){return this[_0x3a2b68(4136)]?[this.positionShow]:[]}get orientation(){return this.getOrientation()}set orientation(e){this._orientation=e,this.updateOrientation()}get[_0x3a2b68(2782)](){const e={_0x2f8ac1:2748},t=_0x3a2b68;return this[t(e._0x2f8ac1)][t(2782)]??0}set[_0x3a2b68(2782)](e){const t={_0x15ea7a:3013},i=_0x3a2b68;this.style.heading=e,this[i(t._0x15ea7a)]()}get pitch(){return this.style.pitch??0}set pitch(e){this.style.pitch=e,this.updateOrientation()}get roll(){return this.style.roll??0}set roll(e){this.style.roll=e,this.updateOrientation()}get[_0x3a2b68(4241)](){var e;return(e=this.point)===null||e===void 0?void 0:e.alt}set height(e){const t=_0x3a2b68;this.point.alt=e,this[t(4076)]=this[t(2879)]}get modelMatrix(){const e={_0x628030:4335,_0x377329:1575},t=_0x3a2b68;if(this._entity){var i,s;return this[t(e._0x628030)].computeModelMatrix((i=this[t(e._0x377329)])===null||i===void 0||(s=i.clock)===null||s===void 0?void 0:s.currentTime,new Cesium__namespace[t(2478)])}else return}get debugAxis(){return this._debugAxis}set[_0x3a2b68(954)](e){const t={_0x510004:422},i={_0x4769f5:4238},s=_0x3a2b68;if(this._debugAxis=e,!this.debugAxisPrimitive){const r=Math.max(Cesium__namespace.Cartographic.fromCartesian(this.positionShow).height*.06,100);this.debugAxisPrimitive=this._layer[s(756)].add(new Cesium__namespace.DebugModelMatrixPrimitive({modelMatrix:this.modelMatrix,length:r,width:5})),this.debugAxisPrimitive._tooltipConfig={content:s(2489),options:this.options[s(2999)]},(this.position instanceof Cesium__namespace.CallbackProperty||this.position instanceof Cesium__namespace.SampledPositionProperty)&&(this.debugAxisPrimitive[s(t._0x510004)]=setInterval(()=>{const o=s;this[o(640)].modelMatrix=this[o(i._0x4769f5)]},300)),this.bindPickId(this[s(640)])}this.debugAxisPrimitive.show=e}get[_0x3a2b68(1088)](){return this.debugAxisPrimitive?this.debugAxisPrimitive.length:0}set[_0x3a2b68(1088)](e){!this.debugAxisPrimitive&&(this.debugAxis=!![]),this.debugAxisPrimitive.length=e}get objectsToExclude(){const e=_0x3a2b68;if(this.options[e(3361)])return this.options[e(3361)];if(this._objectsToExcludee)return this._objectsToExclude}set objectsToExclude(e){this._objectsToExclude=e}_mountedHook(){}_removedHook(){const e={_0x5832d0:3916,_0x33fcac:640},t=_0x3a2b68;super[t(e._0x5832d0)](),this[t(e._0x33fcac)]&&(clearInterval(this[t(640)]._timeTik),this._layer.primitiveCollection[t(1361)](this.debugAxisPrimitive),delete this[t(640)])}_updatePositionsHook(){const e={_0x4ec8d3:4335,_0x58f6b4:4076,_0xb4107a:1187},t=_0x3a2b68;this[t(e._0x4ec8d3)][t(e._0x58f6b4)]=this[t(e._0xb4107a)],this.debugAxisPrimitive&&(this.debugAxisPrimitive.modelMatrix=this.modelMatrix),this._updateEditDraggers(),this._updateLabelPosition()}updateOrientation(){const e={_0x3a9a89:2710,_0x5360e6:640},t=_0x3a2b68;return this._entity[t(e._0x3a9a89)]=this[t(2214)](),this[t(e._0x5360e6)]&&(this[t(640)].modelMatrix=this.modelMatrix),this[t(4335)].orientation}getOrientation(e){const t={_0x4e5a78:2782,_0x23e7d5:853,_0xb94a43:1185,_0x1e7a91:1185,_0x342d4b:3977,_0x33964a:744},i={_0x25cea8:2341,_0xa2fcb5:1630,_0x4ea3c0:2782,_0x39a753:407,_0x297e1b:2037},s=_0x3a2b68;var r,o;e=e||this.style;let c=this[s(1941)].orientation||this._orientation;if(c){const b=e.mergeOrientation||Cesium__namespace[s(407)](e[s(t._0x4e5a78)])||Cesium__namespace.defined(e.pitch)||Cesium__namespace[s(407)](e.roll);if(c instanceof Cesium__namespace[s(t._0x23e7d5)]&&b){const C=c,P=Cesium__namespace.Math[s(t._0xb94a43)](this[s(2782)]),S=Cesium__namespace.Math.toRadians(this.pitch),L=Cesium__namespace[s(2806)].toRadians(this.roll);c=new Cesium__namespace.CallbackProperty(E=>{const M=s;var D,R,k,N;const $=getPositionValue(this[M(4076)],E),B=C.getValue(E);if(!$||!B)return null;const F=getHeadingPitchRollByOrientation($,B,(D=this._map)===null||D===void 0||(R=D.scene)===null||R===void 0?void 0:R[M(1462)].ellipsoid,this.options.fixedFrameTransform);return e[M(1722)]?(F.heading+=P,F[M(i._0x25cea8)]+=L,F[M(i._0xa2fcb5)]+=S):(Cesium__namespace.defined(e[M(2782)])&&(F[M(i._0x4ea3c0)]=P),Cesium__namespace[M(i._0x39a753)](e[M(i._0x25cea8)])&&(F.roll=L),Cesium__namespace.defined(e[M(i._0xa2fcb5)])&&(F.pitch=S)),Cesium__namespace.Transforms.headingPitchRollQuaternion($,F,(k=this._map)===null||k===void 0||(N=k.scene)===null||N===void 0?void 0:N.globe.ellipsoid,this.options[M(i._0x297e1b)])},![])}return c}const _=this.positionShow;if(_==null)return;const l=Cesium__namespace[s(2806)][s(t._0xb94a43)](e.heading??0),d=Cesium__namespace.Math.toRadians(e.pitch??0),f=Cesium__namespace.Math[s(t._0x1e7a91)](e.roll??0),g=new Cesium__namespace[s(t._0x342d4b)](l,d,f);return Cesium__namespace[s(3737)].headingPitchRollQuaternion(_,g,(r=this._map)===null||r===void 0||(o=r[s(t._0x33964a)])===null||o===void 0?void 0:o.globe.ellipsoid,this[s(1941)].fixedFrameTransform)}_getGeoJsonGeometry(e){const t={_0x47dfd8:1528},i=_0x3a2b68;return{type:"Point",coordinates:this.getCoordinate(e==null?void 0:e[i(t._0x47dfd8)])}}clearDynamicPosition(){return this._orientation=void 0,this.property=null,this.position=void 0,this}_initSampledPositionProperty(){const e={_0x4c3563:978,_0x390082:609,_0x2b1a2d:4282,_0x542415:4379,_0x4625e1:1272},t={_0x4c1d1e:635,_0x2b658c:3010,_0x1c8f33:682,_0x16b7cf:2127,_0x41e5b5:1575,_0x4dd48a:3361},i=_0x3a2b68;this._clampToTilesetFrame=-1,this._frameRateHeight=this.options[i(1901)]??30,this[i(e._0x4c3563)]=this.options.maxCacheCount??50;const s=new Cesium__namespace.SampledPositionProperty(this.options[i(e._0x390082)],this.options.numberOfDerivatives);s[i(e._0x2b1a2d)]=this.options.forwardExtrapolationType??Cesium__namespace.ExtrapolationType.HOLD,s.backwardExtrapolationType=this.options.backwardExtrapolationType??Cesium__namespace[i(e._0x542415)][i(2452)],!this[i(e._0x4625e1)]&&(this._orientation=new Cesium__namespace[i(853)](s),this._entity&&(this[i(4335)].orientation=this.getOrientation())),this[i(4332)]=s,this.position=new Cesium__namespace.CallbackProperty(r=>{const o=i;if(!this[o(1575)])return;let c=s.getValue(r);if(!c)return!this._last_isFireStop&&this[o(t._0x4c1d1e)]&&Cesium__namespace.JulianDate.greaterThanOrEquals(r,this._stopTime)&&(this._last_isFireStop=!![],this.fire(EventType[o(2682)])),this[o(t._0x2b658c)];if(c&&this.options.clampToTileset){if(this._clampToTilesetFrame++,!this[o(t._0x1c8f33)]||this[o(t._0x16b7cf)]%this[o(2345)]===0){const _=getHeight(this[o(t._0x41e5b5)].scene,c,{objectsToExclude:this._layer[o(t._0x4dd48a)],has3dtiles:!![]});_&&(this._clampToTilesetHeight=_)}if(this._clampToTilesetHeight){const _=Cesium__namespace[o(2228)].fromCartesian(c);c=Cesium__namespace[o(2978)].fromRadians(_[o(768)],_.latitude,this._clampToTilesetHeight+this.getAddHeight())}}return this._primitive_label&&(this._primitive_label.position=c),this._last_position=c,this._last_isFireStop=![],c},![])}[_0x3a2b68(1976)](e,t){const i={_0x34e7e5:4332,_0x5d02e5:2257,_0x558f2b:557,_0x1fc6e6:557,_0x458aa1:673,_0x2d93a6:400},s=_0x3a2b68;var r,o,c,_;!this[s(i._0x34e7e5)]&&this._initSampledPositionProperty(),this._removeDynamicPosition();const l=((r=this._map)===null||r===void 0||(o=r[s(i._0x5d02e5)])===null||o===void 0?void 0:o.currentTime)||Cesium__namespace.JulianDate.now();t?isNumber(t)?t=Cesium__namespace[s(i._0x558f2b)].addSeconds(l,t,new Cesium__namespace.JulianDate):isString(t)?t.indexOf("Z")===-1?t=Cesium__namespace[s(i._0x558f2b)][s(673)](new Date(t)):t=Cesium__namespace.JulianDate.fromIso8601(t):t instanceof Date&&(t=Cesium__namespace[s(i._0x1fc6e6)][s(i._0x458aa1)](t)):t=l,e=LngLatPoint.parse(e);const d=(c=this._sampledPositionProperty)===null||c===void 0||(_=c._property)===null||_===void 0?void 0:_._times;if(this[s(1941)].autoMiddleDynamicPosition&&(d==null?void 0:d.length)>0&&this._position){const g=d[d[s(i._0x2d93a6)]-1];if(Cesium__namespace.JulianDate.secondsDifference(l,g)>.3){let b=this[s(1187)];this._lastDynamicPosition&&(b=getOnLinePointByLen(this._lastDynamicPosition,this._position,.01,!![])),b=setPositionsHeight(b,e.alt||0),this._sampledPositionProperty.addSample(l,b)}}const f=e.toCartesian();return this[s(4332)].addSample(t,f),this._lastDynamicPosition=f,this._stopTime=t,this}_removeDynamicPosition(){const e={_0x378303:4332},t=_0x3a2b68;var i,s;if(this._maxCacheCount<1)return;const r=(i=this[t(e._0x378303)])===null||i===void 0||(s=i[t(3354)])===null||s===void 0?void 0:s._times;if(!r||(r==null?void 0:r.length)===0)return;const o=r.length-this._maxCacheCount-1;o>0&&this.property.removeSamples(new Cesium__namespace[t(632)]({start:r[0],stop:r[o]}))}_getPopupPosition(){return this.property||this.position||this.center}autoSurfaceHeight(e={}){const t=_0x3a2b68;return getSurfaceHeight(this._map.scene,this[t(4076)],{objectsToExclude:this._layer.objectsToExclude,...e}).then(i=>{const s=t;i.position&&(this[s(4076)]=i.position)})}clampToGround(e){return this.autoSurfaceHeight(e)}[_0x3a2b68(2632)](e){const t=_0x3a2b68;return this.point?this.point[t(4205)](e):[]}setCallbackPosition(e){const t={_0x1b639e:1529},i=_0x3a2b68;return this._setPositionsToCallback(),e&&(this[i(1529)]=LngLatPoint.toCartesian(e)),this[i(t._0x1b639e)]}[_0x3a2b68(3358)](){const e={_0x186cde:442,_0x77291e:1748,_0x275b67:2191},t=_0x3a2b68;this._isCallbackPositions||(this._isCallbackPositions=!![],this[t(e._0x186cde)]=this.options[t(e._0x77291e)],this._position_draw=this.positionShow,this.position=new Cesium__namespace[t(e._0x275b67)](i=>this._position_draw,![]),this.updateAttrForDrawing&&this.updateAttrForDrawing(!![]),this._updateOutlineToCallback(),this._updateLabelPosition())}_cancelPositionsCallback(){const e=_0x3a2b68;this._isCallbackPositions&&(this._isCallbackPositions=![],this[e(1187)]=this._position_draw,this._point=LngLatPoint.fromCartesian(this._position),delete this[e(1529)],this[e(4335)]&&(this._entity[e(4076)]=this._position))}[_0x3a2b68(2741)](){this._map.on(EventType.mouseMove,this._onMouseMoveHandler_point,this),this._map.on(EventType.click,this._onClickHandler_point,this)}_stopDrawHook(){const e={_0x2ae9b1:3016,_0x1133ab:2971},t=_0x3a2b68;this._map.off(EventType.mouseMove,this[t(e._0x2ae9b1)],this),this._map[t(e._0x1133ab)](EventType[t(383)],this._onClickHandler_point,this),this.show=!![]}_onMouseMoveHandler_point(e){const t={_0x15d305:2236,_0xf12a70:1603},i=_0x3a2b68,s=e.cartesian;s&&(this._position_draw=s,this.lastPointTemporary=!![]),this._map[i(1379)](e.endPosition,this._draw_tooltip||this._map.getLangText(i(t._0x15d305))),this.fire(EventType[i(3429)],{...e,drawtype:this[i(t._0xf12a70)],graphic:this},!![])}_onClickHandler_point(e){const t=_0x3a2b68,i=e.cartesian;i&&(this[t(1529)]=i),this._position_draw&&(this.lastPointTemporary=![],this.stopDraw())}}class EditPoly extends EditBase{get[_0x3a2b68(2611)](){return this[_0x3a2b68({_0x2c1fce:2748}._0x2c1fce)].closure}get[_0x3a2b68(2746)](){const e=_0x3a2b68;return this.positions.length<this[e(4227)]._maxPointNum}bindDraggers(){const e={_0x55bfc1:400,_0x392798:1754,_0x56042f:1575},t={_0x40bb43:400},i={_0xf57439:1191,_0x5f451f:1317,_0x7a1a2b:3412},s=_0x3a2b68,r=this.positions;for(let o=0,c=r[s(e._0x55bfc1)];o<c;o++){const _=this.updatePositionsHeightByAttr(r[o]),l=this.createDragger({position:_,onDrag:(d,f)=>{const g=s;var b;if(f=this.updatePositionsHeightByAttr(f),d.position=f,this.positions[d.index]=f,!(((b=this[g(437)])===null||b===void 0?void 0:b.length)>0)){if(this.hasMidPoint){let C,P,S;if(this[g(2611)]||!this.hasClosure&&d.index!==0){d.index===0?(C=c*2-1,P=c-1):(C=d.index*2-1,P=d[g(1191)]-1);const L=r[P];S=getMidpoint(f,L),S=this[g(1317)](S),this[g(4320)][C].position=S}(this[g(2611)]||!this.hasClosure&&d[g(i._0xf57439)]!==c-1)&&(d.index===c-1?(C=d[g(1191)]*2+1,P=0):(C=d[g(i._0xf57439)]*2+1,P=d.index+1),S=getMidpoint(f,r[P]),S=this[g(i._0x5f451f)](S),this.draggers[C].position=S)}if(this._draggerMove){let C=centerOfMass(r);C=this.updatePositionsHeightByAttr(C),this[g(i._0x7a1a2b)].position=C}}},onDragStart:(d,f)=>{const g=s;var b;if(((b=this._heightDraggers)===null||b===void 0?void 0:b[g(t._0x40bb43)])>0)for(let C=0,P=this.draggers.length;C<P;C++)this.draggers[C].show=![]},onDragEnd:(d,f)=>{const g=s;var b;((b=this[g(437)])===null||b===void 0?void 0:b.length)>0&&this.updateDraggers()}});if(l.index=o,this.draggers[s(e._0x392798)](l),this.hasMidPoint&&(this.hasClosure||!this.hasClosure&&o<c-1)){const d=(o+1)%c;let f=getMidpoint(_,r[d]);f=this.updatePositionsHeightByAttr(f);const g=this.createDragger({position:f,type:PointType.AddMidPoint,tooltip:this[s(e._0x56042f)].getLangText(s(1797)),onDragStart:(b,C)=>{this.positions.splice(b.index,0,C)},onDrag:(b,C)=>{this.positions[b.index]=C},onDragEnd:(b,C)=>{this._fireAddPoint(b,C),this.updateDraggers()}});g.index=d,this[s(4320)].push(g)}}this._bindMoveAllDragger(),this.entityGraphic.extrudedHeight&&this._bindHeightDraggers()}[_0x3a2b68(4062)](){const e={_0x2a2105:2694},t={_0x82bb21:4227,_0x533eb4:4320},i=_0x3a2b68;if(!this[i(4227)]._hasMoveEdit)return;let s=centerOfMass(this.positions);if(this[i(e._0x2a2105)][i(400)]===2){const o=Cesium__namespace[i(2978)].distance(this.positions[0],this[i(2694)][1]);s=getPositionByDirectionAndLen(s,90,o*.06)}s=this.updatePositionsHeightByAttr(s);const r=this.createDragger({position:s,type:PointType.MoveAll,tooltip:this[i(1575)].getLangText("_整体平移"),onDragStart:(o,c)=>{s=c},onDrag:(o,c)=>{const _={_0x754f35:2978},l=i;var d;const f=Cesium__namespace.Cartesian3.subtract(c,s,new Cesium__namespace.Cartesian3);if(s=c,this.positions.forEach((g,b,C)=>{const P=this.updatePositionsHeightByAttr(Cesium__namespace.Cartesian3.add(g,f,new Cesium__namespace.Cartesian3));this.positions[b]=P}),((d=this._graphic._draw_holes)===null||d===void 0?void 0:d.length)>0)for(let g=0,b=this[l(t._0x82bb21)]._draw_holes.length;g<b;g++){const C=this._graphic[l(732)][g];C.forEach((P,S,L)=>{const E=l,M=this[E(1317)](Cesium__namespace[E(_._0x754f35)].add(P,f,new Cesium__namespace[E(2978)]));C[S]=M})}for(let g=0,b=this.draggers[l(400)];g<b;g++)r!==this.draggers[g]&&(this[l(t._0x533eb4)][g].position=this.updatePositionsHeightByAttr(Cesium__namespace.Cartesian3.add(this.draggers[g].position,f,new Cesium__namespace.Cartesian3)));this._updateMoveAllHook(c)}});this._draggerMove=r,this.draggers.push(r)}_updateMoveAllHook(e){}_bindHeightDraggers(e){const t={_0x4cb634:2257,_0x7296e4:1575,_0x3adbdc:1754},i={_0x15d212:4241,_0x52a65e:360,_0xeb61c5:1109},s=_0x3a2b68;if(!this._graphic._hasHeightEdit)return;this._heightDraggers=[],e=e||this.positions;const r=getCesiumValue(this.entityGraphic.extrudedHeight,Number,this[s(1575)][s(t._0x4cb634)].currentTime);for(let o=0,c=e.length;o<c;o++){const _=setPositionsHeight(e[o],r),l=this.createDragger({position:_,type:PointType[s(533)],tooltip:this[s(t._0x7296e4)].getLangText("_修改高度"),onDrag:(d,f)=>{const g=s,b=Cesium__namespace[g(2228)].fromCartesian(f)[g(i._0x15d212)];this.entityGraphic[g(i._0x52a65e)]=b;const C=getMaxHeight(this.positions);this.style.diffHeight=this[g(3657)](b-C,2),this.updateHeightDraggers(b),this.updateAttrForEditing(),this[g(i._0xeb61c5)](EventType.editStyle)}});this.draggers[s(t._0x3adbdc)](l),this[s(437)].push(l)}}[_0x3a2b68(819)](e){const t={_0x13d74a:400,_0x39ca95:4076},i=_0x3a2b68;for(let r=0;r<this._heightDraggers[i(t._0x13d74a)];r++){var s;const o=this._heightDraggers[r],c=setPositionsHeight(getPositionValue(o[i(t._0x39ca95)],(s=this[i(1575)])===null||s===void 0?void 0:s.clock.currentTime),e);o.position=c}}updatePositionsHeightByAttr(e){const t={_0x35882a:4227},i=_0x3a2b68;return this.clampToGround?e=getSurfacePosition(this._map.scene,e,{has3dtiles:!![]}):this._graphic[i(1830)]&&(e=this[i(t._0x35882a)]._updateEditDraggerPositionHeight(e)),e}[_0x3a2b68(2019)](e){const t={_0x1eaf79:407,_0x412734:3542},i=_0x3a2b68;super._updateStyleHook(e),(Cesium__namespace[i(407)](e.diffHeight)||Cesium__namespace.defined(e.height)||Cesium__namespace[i(t._0x1eaf79)](e[i(t._0x412734)]))&&this[i(3234)]()}}class BasePolyEntity extends BaseEntity{constructor(e={}){const t={_0x924cf3:2748,_0x714b0:2694},i=_0x3a2b68;super(e),this._hasEdit=this.options.hasEdit??!![],this._minPointNum=e.minPointNum??2,this._maxPointNum=e.maxPointNum??9999,this[i(1889)]=e[i(1073)]??!![],this._hasHeightEdit=e.hasHeightEdit??!![],e.positions&&(this.style.buffer>0?this.positions=bufferPoints(e.positions,this.style.buffer,this[i(t._0x924cf3)].bufferSteps):this[i(t._0x714b0)]=e.positions)}get hasMoveEdit(){return this._hasMoveEdit}get[_0x3a2b68(1452)](){return this._hasHeightEdit}get EditClass(){return EditPoly}get center(){const e={_0x1c07fa:4121,_0xf14e77:3773},t=_0x3a2b68;return this[t(2748)][t(e._0x1c07fa)]?this.centerOfMass:this[t(e._0xf14e77)]}get centerOfMass(){return centerOfMass(this[_0x3a2b68(2976)])}get centerOfLine(){const e={_0x2143f6:400},t=_0x3a2b68,i=this[t(2976)];return!i||i[t(400)]===0?null:i[t(e._0x2143f6)]===1?i[0]:i.length<10?sliceByMaxDistance(i,this.distance/2,{point:!![]}):i[Math.floor(i.length/2)]}get[_0x3a2b68(3481)](){return getDistance(this.positionsShow)}get area(){return getSurfaceArea(this.positionsShow)}get positions(){return this._getPositions?this._getPositions():this._positions}set[_0x3a2b68(2694)](e){const t={_0x56e53d:3782,_0x467671:3174,_0x89aadd:3965,_0x884b91:4335},i={_0x2f757f:1879},s=_0x3a2b68;if(!(!e||this.isDestroy)){if(Array.isArray(e)){var r;const o=[],c=[];e[s(t._0x56e53d)]((_,l)=>{const d=s,f=LngLatPoint.parse(_);if(!f||!f.valid())return;let g=this.style.setHeight;Cesium__namespace.defined(g)&&(isString(g)?(g=Number(template(g,this.attr,!![])),isNaN(g)&&(g=0)):Array[d(391)](g)&&(g=g[l]||0),f[d(i._0x2f757f)]=g);const b=this.getAddHeight(l);b!==0&&(f.alt=f[d(i._0x2f757f)]+b),o.push(f),c.push(f[d(1378)]())}),(r=this.editing)!==null&&r!==void 0&&r[s(t._0x467671)]?this._positions_draw=c:(this._positions_draw&&this._cancelPositionsCallback(),this[s(t._0x89aadd)]=c),this._points=o}else this._positions=e;this[s(t._0x884b91)]&&this._updatePositionsHook(),this.fire(EventType.updatePosition,{positions:this._positions})}}get positionsShow(){const e=_0x3a2b68;let t=getCesiumValue(this._positions);return t instanceof Cesium__namespace.Rectangle&&(t=this[e(719)]),t}get points(){const e={_0x44a394:3965,_0x5d244a:4121,_0x1e2629:2980},t=_0x3a2b68;if(this[t(e._0x44a394)]instanceof Cesium__namespace[t(2191)]){let i;this._positions_draw?i=this[t(2206)]:(i=this.positionsShow,this.style[t(e._0x5d244a)]&&i[t(e._0x1e2629)]());const s=[];i[t(3782)](function(r){const o=LngLatPoint.parse(r);o&&s.push(o)}),this._points=s}return!this[t(2967)]&&(this._points=LngLatArray[t(4300)](this._positions)),this._points}get[_0x3a2b68(918)](){return this.getCoordinates()}get rectangle(){return Cesium__namespace[_0x3a2b68({_0xdc16e8:1983}._0xdc16e8)].fromCartesianArray(this.positions)}[_0x3a2b68(2136)](){const e={_0x4b6ab0:2694},t=_0x3a2b68;return this[t(3511)][t(e._0x4b6ab0)]}_mountedHook(){}[_0x3a2b68(4145)](){const e={_0x3a4bbd:2754},t=_0x3a2b68;this._updateLabelPosition(),this[t(e._0x3a4bbd)]()}_getGeoJsonGeometry(e){return{type:_0x3a2b68({_0x56a2b9:4166}._0x56a2b9),coordinates:this.getCoordinates(e==null?void 0:e.noAlt)}}getCoordinates(e){const t=[];return this.points.forEach(i=>{t.push(i.toArray(e))}),t}isInPoly(e){const t=_0x3a2b68,i=LngLatPoint.parse(e);return Cesium__namespace[t(1983)].contains(Cesium__namespace.Rectangle.fromCartesianArray(this.positionsShow),i.toCartographic())?isInPoly(i,this.coordinates):![]}autoSurfaceHeight(e={}){const t={_0x3e706d:4389},i={_0x3b462e:2694},s=_0x3a2b68;return computeSurfacePoints({...e,map:this._map,positions:this.positionsShow})[s(t._0x3e706d)](r=>{const o=s;return!r.noHeight&&(this.positions=r[o(i._0x3b462e)]),r})}clampToGround(e){return this[_0x3a2b68({_0x338bc7:3037}._0x338bc7)](e)}setCallbackPositions(e){const t={_0x1d1988:3358,_0xf852d3:2206},i=_0x3a2b68;return this[i(t._0x1d1988)](),e&&(this._positions_draw=LngLatArray.toCartesians(e),this.getShowPositions&&this._positions_show&&(this._positions_show=this.getShowPositions(this[i(t._0xf852d3)]))),this._positions_draw}_setPositionsToCallback(){const e=_0x3a2b68;if(this._isCallbackPositions)return;this._isCallbackPositions=!![];let t=getCesiumValue(this[e(3965)]);t instanceof Cesium__namespace.PolygonHierarchy?t=t[e(2694)]:t instanceof Cesium__namespace.Rectangle&&(t=this.outlinePositions),this._positions_draw=t||this.positionsShow||[],this.positions=new Cesium__namespace.CallbackProperty(i=>this._positions_CallbackProperty(),![]),this._updateOutlineToCallback(),this[e(2e3)]&&this.updateAttrForDrawing(!![]),this._updateLabelPosition()}_positions_CallbackProperty(){return this._positions_draw}_cancelPositionsCallback(){const e={_0x5b71d4:1014,_0xc7e664:3965,_0x50a020:4335},t=_0x3a2b68;this._isCallbackPositions&&(this[t(e._0x5b71d4)]=![],this[t(e._0xc7e664)]=this._positions_draw,this._points=LngLatArray.toPoints(this[t(2206)]),delete this._positions_draw,this[t(e._0x50a020)]&&(this._updatePositionsHook(),this[t(2100)]()))}_startDrawHook(){const e={_0x52cdd2:1932},t=_0x3a2b68;this[t(1575)].on(EventType.mouseMove,this._onMouseMoveHandler,this),this[t(1575)].on(EventType[t(383)],this._onClickHandler,this),this._map.on(this._drawEndEventType,this._onDbClickHandler,this),(this.options.hasDrawDelPoint??!![])&&this._map.on(this[t(1046)],this[t(e._0x52cdd2)],this)}[_0x3a2b68(2880)](){const e={_0x35e29a:2971,_0x37c685:510,_0x184cd3:1575},t=_0x3a2b68;this._map.off(EventType.mouseMove,this._onMouseMoveHandler,this),this[t(1575)][t(e._0x35e29a)](EventType.click,this._onClickHandler,this),this[t(1575)].off(this[t(e._0x37c685)],this._onDbClickHandler,this),(this[t(1941)].hasDrawDelPoint??!![])&&this[t(e._0x184cd3)].off(this[t(1046)],this._onRightClickHandler,this)}}class PointEntity extends BasePointEntity{get entityGraphic(){const e={_0x2c14fc:2879},t=_0x3a2b68;var i;return(i=this[t(4335)])===null||i===void 0?void 0:i[t(e._0x2c14fc)]}_mountedHook(){const e={_0x587332:2748,_0x5aa293:2214,_0x343262:1941,_0x21e0c0:3992,_0x2319f6:400,_0x3e486b:514,_0x3da6b4:1956},t=_0x3a2b68,i={position:this.position,point:PointStyleConver.toCesiumVal(this[t(e._0x587332)])};if(this.style[t(3203)]&&(i.label=LabelStyleConver.toCesiumVal(this[t(2748)].label,{},this[t(3208)])),this.options.billboard&&(i.billboard=BillboardStyleConver.toCesiumVal(this.options.billboard,{},!![])),this.options.circle&&(i.ellipse=CircleStyleConver.toCesiumVal(this.options.circle,{},!![])),this[t(1941)].model&&(i.orientation=this[t(e._0x5aa293)](this[t(e._0x343262)].model),i.model=ModelStyleConver.toCesiumVal(this[t(1941)][t(e._0x21e0c0)],{},!![])),this.options.path){var s,r;const c=PathStyleConver[t(1304)](this[t(1941)].path,{},!![]);!c[t(2926)]&&(c.leadTime=0),i[t(1699)]=c;const _=(s=this.position)===null||s===void 0||(r=s._property)===null||r===void 0?void 0:r._times;if(_&&_[t(e._0x2319f6)]>0){var o;const l=_[0];let d=_[_.length-1];((o=this[t(4076)])===null||o===void 0?void 0:o.forwardExtrapolationType)===Cesium__namespace.ExtrapolationType.HOLD&&(d=Cesium__namespace[t(557)].fromDate(new Date(2100,1,1))),i[t(e._0x3e486b)]=new Cesium__namespace.TimeIntervalCollection([new Cesium__namespace.TimeInterval({start:l,stop:d})])}}this[t(4335)]=this[t(e._0x3da6b4)](i)}[_0x3a2b68(1286)](){const e={_0x46ef49:2748},t=_0x3a2b68;this._entity.label=this._entity.label||{},LabelStyleConver.toCesiumVal(this[t(e._0x46ef49)].label,this._entity.label,this.attr)}[_0x3a2b68(2019)](e,t){const i={_0x470f75:1304},s=_0x3a2b68;PointStyleConver[s(i._0x470f75)](e,this[s(3511)])}_style2Json(e,t){return PointStyleConver.toJSON(e,t,!![])}_setOptionsHook(e,t){const i={_0x5667e7:4335,_0x3edb05:1304,_0x44674a:1362},s=_0x3a2b68;t.model&&ModelStyleConver.toCesiumVal(e.model,this._entity[s(3992)],!![]),t.billboard&&BillboardStyleConver.toCesiumVal(e.billboard,this._entity[s(2009)],!![]),t.path&&PathStyleConver.toCesiumVal(e.path,this[s(i._0x5667e7)].path,!![]),t.circle&&CircleStyleConver[s(i._0x3edb05)](e.circle,this._entity[s(i._0x44674a)],!![])}[_0x3a2b68(1355)](e){const t={_0x3d9330:1941,_0x61e63b:3992,_0x4bcbe5:3811},i=_0x3a2b68;this[i(t._0x3d9330)].model&&(e[i(t._0x61e63b)]={},ModelStyleConver[i(1909)](this.options.model,e.model,!![])),this[i(t._0x3d9330)].billboard&&(e.billboard={},BillboardStyleConver.toJSON(this.options.billboard,e.billboard,!![])),this.options.path&&(e.path={},PathStyleConver.toJSON(this.options.path,e.path,!![])),this.options.circle&&(e.circle={},CircleStyleConver.toJSON(this.options[i(t._0x4bcbe5)],e.circle,!![]))}[_0x3a2b68(1017)](e){const t={_0x59f3f9:4335,_0x348b5a:747},i=_0x3a2b68;this._entity.model&&(this[i(t._0x59f3f9)].model.color=Cesium__namespace.Color.WHITE[i(t._0x348b5a)](e)),this[i(4335)][i(2009)]&&(this._entity.billboard.color=Cesium__namespace.Color.WHITE[i(747)](e)),this._entity.path&&!this._updateEntityOpacity(this[i(t._0x59f3f9)].path,e)&&PathStyleConver.toCesiumVal({...this.options.path,globalAlpha:e},this._entity.path,!![]),this[i(4335)].circle&&!this._updateEntityOpacity(this._entity.circle,e)&&CircleStyleConver.toCesiumVal({...this.options.circle,globalAlpha:e},this._entity.ellipse,!![])}_updateDistanceDisplayConditionByEdit(){}}register$4("point",PointEntity,!![]);class BillboardEntity extends BasePointEntity{get[_0x3a2b68(3511)](){var e;return(e=this._entity)===null||e===void 0?void 0:e.billboard}get image(){const e={_0x2e5b12:1793},t=_0x3a2b68;return this.style[t(e._0x2e5b12)]}set[_0x3a2b68(1793)](e){const t=_0x3a2b68;this.style.image=e,this[t(4335)]&&(this._entity.billboard[t(1793)]=e)}[_0x3a2b68(585)](){const e={_0xfbc0c:4076,_0x5ce4e6:1304,_0x5173da:3542,_0xffcaa0:2748,_0x121e1c:2879,_0x4405c3:1304},t=_0x3a2b68,i={position:this[t(e._0xfbc0c)],billboard:BillboardStyleConver[t(e._0x5ce4e6)](this.style)};if(this.style.label&&(Cesium__namespace[t(407)](this.style.clampToGround)&&!Cesium__namespace[t(407)](this[t(2748)][t(3203)][t(e._0x5173da)])&&(this[t(e._0xffcaa0)][t(3203)].clampToGround=this.style.clampToGround),i.label=LabelStyleConver.toCesiumVal(this.style.label,{},this[t(3208)])),this[t(1941)][t(e._0x121e1c)]&&(i.point=PointStyleConver[t(e._0x4405c3)](this[t(1941)].point,{},!![])),this.options.circle&&(i.ellipse=CircleStyleConver.toCesiumVal(this.options.circle,{},!![])),this.options[t(3992)]&&(i.orientation=this.getOrientation(this.options[t(3992)]),i.model=ModelStyleConver[t(1304)](this.options[t(3992)],{},!![])),this.options.path){var s,r;const c=PathStyleConver.toCesiumVal(this.options.path,{},!![]);!c[t(2926)]&&(c.leadTime=0),i.path=c;const _=(s=this[t(e._0xfbc0c)])===null||s===void 0||(r=s._property)===null||r===void 0?void 0:r._times;if(_&&_.length>0){var o;const l=_[0];let d=_[_.length-1];((o=this.position)===null||o===void 0?void 0:o.forwardExtrapolationType)===Cesium__namespace.ExtrapolationType[t(2452)]&&(d=Cesium__namespace[t(557)].fromDate(new Date(2100,1,1))),i.availability=new Cesium__namespace.TimeIntervalCollection([new Cesium__namespace.TimeInterval({start:l,stop:d})])}}this._entity=this._createEntity(i)}_addLabel(){const e={_0x234500:3203},t=_0x3a2b68;this._entity.label=this._entity.label||{},LabelStyleConver.toCesiumVal(this.style[t(e._0x234500)],this._entity[t(3203)],this.attr)}_style2Json(e,t){return BillboardStyleConver.toJSON(e,t,!![])}_updateStyleHook(e,t){BillboardStyleConver[_0x3a2b68(1304)](e,this.entityGraphic)}[_0x3a2b68(1651)](e,t){const i={_0x5092de:3992,_0x1530ee:1304},s=_0x3a2b68;t.model&&ModelStyleConver.toCesiumVal(e[s(i._0x5092de)],this._entity.model,!![]),t.point&&PointStyleConver.toCesiumVal(e[s(2879)],this._entity.point,!![]),t.path&&PathStyleConver.toCesiumVal(e[s(1699)],this._entity.path,!![]),t.circle&&CircleStyleConver[s(i._0x1530ee)](e.circle,this._entity.ellipse,!![])}_updateExOpacity(e){const t={_0x10514e:3114,_0x23034f:3811},i=_0x3a2b68;this._entity.model&&(this._entity.model.color=Cesium__namespace.Color.WHITE.withAlpha(e)),this._entity.point&&!this._updateEntityOpacity(this._entity.point,e)&&PointStyleConver.toCesiumVal({...this.options.point,globalAlpha:e},this[i(4335)].point,!![]),this._entity.path&&!this._updateEntityOpacity(this._entity.path,e)&&PathStyleConver.toCesiumVal({...this.options.path,globalAlpha:e},this._entity.path,!![]),this._entity[i(3811)]&&!this[i(t._0x10514e)](this._entity[i(t._0x23034f)],e)&&CircleStyleConver.toCesiumVal({...this.options.circle,globalAlpha:e},this._entity.ellipse,!![])}_toJSON_Ex(e){const t={_0x4965ca:3992,_0x2165ac:2879,_0x22baf1:1699,_0x3b5889:1909},i=_0x3a2b68;this[i(1941)][i(t._0x4965ca)]&&(e.model={},ModelStyleConver.toJSON(this.options[i(3992)],e[i(t._0x4965ca)],!![])),this[i(1941)].point&&(e.point={},PointStyleConver.toJSON(this.options[i(t._0x2165ac)],e.point,!![])),this[i(1941)][i(t._0x22baf1)]&&(e.path={},PathStyleConver.toJSON(this.options[i(1699)],e.path,!![])),this.options.circle&&(e.circle={},CircleStyleConver[i(t._0x3b5889)](this.options.circle,e.circle,!![]))}_updateDistanceDisplayConditionByEdit(){}setOpacity(e){this.style.globalAlpha=e,this._entity&&(this._entity.billboard.color=Cesium__namespace.Color.WHITE.withAlpha(e)),this._updateLabelOpacity(e)}startBounce(e={}){const t={_0x1f510e:3511,_0x494cd9:3082,_0x233fe0:3532,_0xf64e30:3454,_0x4790a6:4335},i=_0x3a2b68;if(!this._entity)return;let s=-(e.maxHeight||50);const r=e.step||1,o=e.autoStop;let c=s,_=-1;const l=this;function d(){c<=s&&_!==1?(_=1,o&&(s*=.55,r*2>=-s&&l.stopBounce())):c>=0&&_!==-1&&(_=-1),c+=r*_}const f=getCesiumValue(this[i(t._0x1f510e)][i(t._0x494cd9)],Cesium__namespace[i(t._0x233fe0)])||new Cesium__namespace[i(3532)](0,0),g=f[i(2957)]();if(this.entityGraphic[i(t._0xf64e30)]=f,this.entityGraphic.pixelOffset=new Cesium__namespace.CallbackProperty(b=>(d(),g.y=f.y+c,g)),this._entity[i(3203)]){const b=getCesiumValue(this._entity.label.pixelOffset,Cesium__namespace[i(3532)])||new Cesium__namespace[i(3532)](0,0),C=b.clone();this[i(t._0x4790a6)].label.pixelOffset_original=b,this._entity.label.pixelOffset=new Cesium__namespace.CallbackProperty(P=>(C.y=b.y+c,C))}}stopBounce(){const e={_0x564fad:3082,_0x46fc2c:3511,_0x55c55c:3454},t=_0x3a2b68;this.entityGraphic[t(e._0x564fad)]=this[t(e._0x46fc2c)].pixelOffset_original,this._entity.label&&(this[t(4335)].label.pixelOffset=this._entity[t(3203)][t(e._0x55c55c)])}}register$4("billboard",BillboardEntity,!![]);class DivBillboardEntity extends BillboardEntity{_mountedHook(){super._mountedHook(),this._updateImage_delay()}_updateStyleHook(e,t){const i={_0x4089e9:3867},s=_0x3a2b68;delete e.image,super._updateStyleHook(e,t),t&&(t.html||t.iconSize||t.color)&&this[s(i._0x4089e9)]()}[_0x3a2b68(3867)](){this.updateTimer&&clearTimeout(this.updateTimer),this.updateTimer=setTimeout(()=>{delete this.updateTimer,this._entity&&this._updateImage()},300)}_updateImage(){const e={_0x1a59b2:3206,_0x3f9a46:3596},t={_0x56e8f3:1654},i={_0x199a52:3418,_0x5adda2:1109,_0x2daff3:1793},s=_0x3a2b68,r=create$3(s(e._0x1a59b2),"mars3d-hideDiv"),o=this.style.html;isString(o)?r[s(416)]=o:o instanceof Element&&r[s(688)](o),document.body.appendChild(r),this._islosdImg=!![],window.domtoimage?window[s(1749)].toPng(r).then(c=>{const _=s;this.entityGraphic.image=""+c,document[_(i._0x199a52)][_(1654)](r),this._islosdImg=![],this[_(i._0x5adda2)](_(i._0x2daff3),{image:c})}).catch(c=>{logError$1("未知原因，导出失败!",c),document.body.removeChild(r),this._islosdImg=![]}):window.html2canvas&&window.html2canvas(r,{backgroundColor:null,allowTaint:!![]}).then(c=>{const _=s;this.entityGraphic.image=c,document.body[_(t._0x56e8f3)](r),this._islosdImg=![],this.fire("image",{canvas:c})})[s(e._0x3f9a46)](c=>{const _=s;logError$1("未知原因，导出失败!",c),document[_(3418)].removeChild(r),this._islosdImg=![]})}}register$4("divBillboard",DivBillboardEntity,!![]);class FontBillboardEntity extends DivBillboardEntity{_updateImage(){const e={_0xc6cf56:2748,_0x44ca24:2377,_0x4a0b32:3065,_0x1a8492:4382,_0x428a64:3659,_0x27bc72:3973,_0x409a9b:1749,_0x192196:380},t={_0x449501:3366},i={_0xfff79f:1109,_0x1c48c7:1793},s={_0x423dbf:1654},r=_0x3a2b68,o=this[r(2748)].iconSize??50,c=this[r(e._0xc6cf56)].iconPadding??10,_=this.style[r(2540)]??"#ff0000",l=create$3("div","mars3d-hideDiv");l[r(e._0x44ca24)]("style",r(e._0x4a0b32)+c+"px;text-align:center;max-width:"+o+r(e._0x1a8492)+o+"px;");const d=document[r(4095)]("i");d[r(2377)](r(765),this.style[r(e._0x428a64)]),d.setAttribute("style","font-size:"+o+r(e._0x27bc72)+_+";"),l.appendChild(d),document.body.appendChild(l),this._islosdImg=!![],window[r(e._0x409a9b)]?window.domtoimage.toPng(l).then(f=>{const g=r;this.entityGraphic.image=""+f,document.body.removeChild(l),this._islosdImg=![],this[g(1109)]("image",{image:f})}).catch(f=>{const g=r;logError$1(g(3366),f),document.body[g(s._0x423dbf)](l),this[g(2858)]=![]}):window.html2canvas&&window[r(e._0x192196)](l,{backgroundColor:null,allowTaint:!![]}).then(f=>{const g=r;this.entityGraphic.image=f,document.body.removeChild(l),this._islosdImg=![],this[g(i._0xfff79f)](g(i._0x1c48c7),{canvas:f})}).catch(f=>{const g=r;logError$1(g(t._0x449501),f),document.body[g(1654)](l),this._islosdImg=![]})}}register$4("fontBillboard",FontBillboardEntity,!![]);class LabelEntity extends BasePointEntity{get[_0x3a2b68(3511)](){const e={_0x5de12a:4335},t=_0x3a2b68;var i;return(i=this[t(e._0x5de12a)])===null||i===void 0?void 0:i.label}get[_0x3a2b68(3203)](){const e={_0x4a507e:3203},t=_0x3a2b68;return this._entity?this._entity[t(e._0x4a507e)]:this.style}get text(){return this.style.text}set text(e){const t={_0x4920a9:2748},i=_0x3a2b68;this[i(t._0x4920a9)].text=e,this._entity&&(this.entityGraphic.text=e)}_mountedHook(){const e={_0x3d26ad:4076},t=_0x3a2b68,i={position:this[t(e._0x3d26ad)],label:LabelStyleConver.toCesiumVal(this.style)};this[t(4335)]=this._createEntity(i),this._bindMorphComplete()}[_0x3a2b68(3916)](){super._removedHook(),this._unbindMorphComplete()}_addLabel(){}_style2Json(e,t){return LabelStyleConver.toJSON(e,t,!![])}[_0x3a2b68(2019)](e,t){const i={_0xb8bc9f:407},s=_0x3a2b68;LabelStyleConver.toCesiumVal(e,this[s(3511)]),Cesium__namespace[s(i._0xb8bc9f)](t.clampToGround)&&(this._bindMorphComplete(),this._map_morphCompleteHandler())}_updateDistanceDisplayConditionByEdit(){}_bindMorphComplete(){const e={_0x2b623b:1575},t=_0x3a2b68;this._unbindMorphComplete(),this.style.clampToGround&&this[t(e._0x2b623b)].on(EventType.morphComplete,this._map_morphCompleteHandler,this)}_unbindMorphComplete(){this._map.off(EventType.morphComplete,this._map_morphCompleteHandler,this)}_map_morphCompleteHandler(e){const t={_0x371c11:3676,_0x13192a:3868},i=_0x3a2b68;this._map.scene.mode===Cesium__namespace.SceneMode[i(t._0x371c11)]?this.entityGraphic[i(t._0x13192a)]=Cesium__namespace.HeightReference.NONE:this.entityGraphic.heightReference=this.style.clampToGround?Cesium__namespace.HeightReference.CLAMP_TO_GROUND:Cesium__namespace.HeightReference.NONE}startBounce(e={}){const t={_0x18fc29:3532,_0x565293:3511,_0x1fe5e5:2191},i={_0x432ee8:1884},s=_0x3a2b68;if(!this[s(4335)])return;let r=-(e.maxHeight||50);const o=e[s(731)]||1,c=e.autoStop;let _=r,l=-1;const d=this;function f(){const C=s;_<=r&&l!==1?(l=1,c&&(r*=.55,o*2>=-r&&d[C(i._0x432ee8)]())):_>=0&&l!==-1&&(l=-1),_+=o*l}const g=getCesiumValue(this.entityGraphic.pixelOffset,Cesium__namespace[s(t._0x18fc29)])||new Cesium__namespace.Cartesian2(0,0),b=g.clone();this[s(t._0x565293)].pixelOffset_original=g,this[s(3511)].pixelOffset=new Cesium__namespace[s(t._0x1fe5e5)](C=>(f(),b.y=g.y+_,b))}stopBounce(){this.entityGraphic.pixelOffset=this.entityGraphic.pixelOffset_original}setOpacity(e){const t=_0x3a2b68;this[t(2748)].globalAlpha=e,this[t(4335)]&&LabelStyleConver.setOpacity(this.entityGraphic,e)}}register$4("label",LabelEntity,!![]);class CanvasLabelEntity extends BillboardEntity{[_0x3a2b68(585)](){const e={_0x1fe3a1:585},t=_0x3a2b68;super[t(e._0x1fe3a1)](),this._updateImage_delay(this.style)}_onBeforeCreate(e){const t=_0x3a2b68;var i,s;return Cesium__namespace.defined(e==null||(i=e.billboard)===null||i===void 0?void 0:i.image)&&delete e.billboard.image,Cesium__namespace.defined(e==null||(s=e.billboard)===null||s===void 0?void 0:s[t(2540)])&&delete e.billboard.color,e}[_0x3a2b68(2019)](e,t){const i=_0x3a2b68,s={...e};delete s[i(1793)],delete s.color,super[i(2019)](s,t),this._updateImage_delay(e)}[_0x3a2b68(3867)](e){const t=_0x3a2b68;this[t(2570)]&&clearTimeout(this.updateTimer),this.updateTimer=setTimeout(()=>{const i=t;delete this[i(2570)],this._entity&&this._updateImage(e)},100)}_updateImage(e){const t=_0x3a2b68,i=LabelStyleConver.toCesiumVal(e),s=getTextImage(i.text,i);s&&(this.entityGraphic[t(1793)]=s)}}register$4("canvasLabel",CanvasLabelEntity,!![]);class EditCircle extends EditPoly{bindDraggers(){const e={_0x118bbd:3584,_0x9fa3fb:3511,_0x2f85f1:1889},t={_0x22fad0:4241,_0x2b69c6:3511,_0x5352e3:2748,_0x499ca3:3878},i={_0x30bd23:3511,_0x327f75:407,_0x282b5a:3878,_0x16e328:3584},s=_0x3a2b68,r=this.positions,o=this.updatePositionsHeightByAttr(r[0]),c=this[s(1575)].clock[s(545)],_=getEllipseOuterPositions({position:o,semiMajorAxis:getCesiumValue(this.entityGraphic[s(e._0x118bbd)],Number,c),semiMinorAxis:getCesiumValue(this.entityGraphic.semiMinorAxis,Number,c),rotation:getCesiumValue(this[s(e._0x9fa3fb)].rotation,Number,c)??0,count:1}),l=this.updatePositionsHeightByAttr(_[3]);r[1]=l;const d=this[s(4220)]({position:l,type:PointType.EditAttr,tooltip:this._map.getLangText(s(3642)),onDragStart:(g,b)=>{const C=s;if(this._heightDraggers)for(let P=0,S=this._heightDraggers.length;P<S;P++)this._heightDraggers[P][C(442)]=![]},onDrag:(g,b)=>{const C=s;if(this[C(3511)].height!==void 0){const S=getCesiumValue(this[C(i._0x30bd23)].height,Number,c);b=setPositionsHeight(b,S),g.position=b}r[g.index]=b;const P=this.formatNum(Cesium__namespace.Cartesian3.distance(r[0],b),2);this.entityGraphic.semiMajorAxis=P,this._graphic._maxPointNum===3||!Cesium__namespace[C(i._0x327f75)](this.style[C(i._0x282b5a)])?this.style[C(i._0x16e328)]=P:(this[C(3511)][C(894)]=P,this[C(2748)].radius=P),this.fire(EventType.editStyle)},onDragEnd:(g,b)=>{this[s(3234)]()}});d.index=1,this.draggers[s(1754)](d);let f;if(this._graphic._maxPointNum===3){const g=this[s(1317)](_[2]);r[2]=g,f=this.createDragger({position:g,type:PointType.EditAttr,tooltip:this[s(1575)].getLangText("_修改半径"),onDragStart:(b,C)=>{const P=s;if(this[P(437)])for(let S=0,L=this._heightDraggers.length;S<L;S++)this._heightDraggers[S][P(442)]=![]},onDrag:(b,C)=>{const P=s;if(this.entityGraphic[P(t._0x22fad0)]!==void 0){const E=getCesiumValue(this.entityGraphic.height,Number,c);C=setPositionsHeight(C,E),b.position=C}r[b.index]=C;let S=this.formatNum(Cesium__namespace.Cartesian3.distance(r[0],C),2);const L=getCesiumValue(this[P(t._0x2b69c6)].semiMajorAxis,Number,c);S>L&&(S=L),this.entityGraphic[P(894)]=S,this._graphic._maxPointNum===3||!Cesium__namespace.defined(this.style.radius)?this.style.semiMinorAxis=S:(this.entityGraphic.semiMajorAxis=S,this[P(t._0x5352e3)][P(t._0x499ca3)]=S),this.fire(EventType.editStyle)},onDragEnd:(b,C)=>{this.updateDraggers()}}),f.index=2,this[s(4320)][s(1754)](f)}if(this._graphic[s(e._0x2f85f1)]){const g=this.createDragger({position:o,onDragStart:(b,C)=>{for(let P=0,S=this.draggers.length;P<S;P++)this.draggers[P].show=![]},onDrag:(b,C)=>{r[0]=C},onDragEnd:(b,C)=>{this.updateDraggers()}});g.index=0,this.draggers.push(g),g[s(2390)]=d,g[s(4216)]=f}if(this.entityGraphic.extrudedHeight){const g=this._graphic._maxPointNum===3?[r[1],r[2]]:[r[1]];this._bindHeightDraggers(g)}}[_0x3a2b68(1317)](e){const t={_0x593128:3511,_0x39897c:2257},i=_0x3a2b68;if(this.clampToGround&&(e=getSurfacePosition(this._map.scene,e)),this.entityGraphic.height!==void 0){const s=getCesiumValue(this[i(t._0x593128)][i(4241)],Number,this._map[i(t._0x39897c)].currentTime);e=setPositionsHeight(e,s)}return e}[_0x3a2b68(2019)](e){const t={_0x59ed8a:407},i=_0x3a2b68;super._updateStyleHook(e),(Cesium__namespace[i(407)](e.radius)||Cesium__namespace[i(t._0x59ed8a)](e.semiMinorAxis)||Cesium__namespace[i(t._0x59ed8a)](e.semiMajorAxis)||Cesium__namespace.defined(e.height)||Cesium__namespace.defined(e.diffHeight))&&this[i(3234)]()}[_0x3a2b68(1848)](e){}}class CircleEntity extends BasePointEntity{constructor(e={}){super(e),this._minPointNum=2,this._maxPointNum=2,this._hasMoveEdit=e.hasMoveEdit??!![],this._clampToGround_reload=!![],this.options.drawShowRadius=this.options.drawShowRadius??!![]}get[_0x3a2b68(3511)](){const e={_0x256824:1362},t=_0x3a2b68;var i;return(i=this._entity)===null||i===void 0?void 0:i[t(e._0x256824)]}get EditClass(){return EditCircle}get outlinePositions(){const e=_0x3a2b68;return this._entity&&(this._outlinePositions=this.getOutlinePositions()),this[e(4081)]}set outlinePositions(e){const t={_0x4909f2:4081},i=_0x3a2b68;this[i(t._0x4909f2)]=e}get outlineCoordinates(){return cartesians2lonlats(this.outlinePositions)}get[_0x3a2b68(3481)](){return Math.PI*2*this.radius}get area(){const e=this.radius;return Math.PI*e*e}get radius(){const e={_0x216403:3878,_0x521f9f:3511,_0x372879:3584},t=_0x3a2b68;var i;return this.style.radius?this.style[t(e._0x216403)]:getCesiumValue((i=this[t(e._0x521f9f)])===null||i===void 0?void 0:i[t(e._0x372879)],Number,Cesium__namespace.JulianDate[t(467)]())}set[_0x3a2b68(3878)](e){const t=_0x3a2b68;this.style[t(3878)]=e,this[t(3511)]&&(this.entityGraphic.semiMajorAxis=e,this.entityGraphic.semiMinorAxis=e,this._updateOutlineStyle(this._getOutlinePositions(),this.style))}get height(){const e={_0x31beb1:2748,_0x16fa5b:4241},t=_0x3a2b68;var i;return this[t(e._0x31beb1)].height?this.style[t(e._0x16fa5b)]:getCesiumValue((i=this.entityGraphic)===null||i===void 0?void 0:i.height,Number)??0}set height(e){this.style.height=e,this.entityGraphic&&(this.entityGraphic.height=e)}_mountedHook(){const e={_0x38b4c4:3203,_0x47c950:3203,_0x175e67:3208,_0x39e899:4335,_0x1f0178:2242,_0x560db8:468},t=_0x3a2b68,i={position:this.position,ellipse:CircleStyleConver[t(1304)](this[t(2748)],{},!![])},s=this[t(2748)][t(e._0x38b4c4)];s&&(Cesium__namespace.defined(this.style.clampToGround)&&!Cesium__namespace[t(407)](s.clampToGround)&&(s.clampToGround=this[t(2748)][t(3542)]),Cesium__namespace.defined(s.setHeight)||Cesium__namespace.defined(s[t(1475)])?this._addLabel():i.label=LabelStyleConver.toCesiumVal(this[t(2748)][t(e._0x47c950)],{},this[t(e._0x175e67)])),this[t(e._0x39e899)]=this[t(1956)](i),this._updateHeight(),this[t(e._0x1f0178)](this._getOutlinePositions(),this[t(2748)]),(this[t(4076)]instanceof Cesium__namespace[t(2191)]||this.position instanceof Cesium__namespace[t(e._0x560db8)])&&this._updateOutlineToCallback()}_addLabel(){const e={_0x45ef30:407,_0x41501f:3798,_0x57855f:407,_0x56b331:442,_0x44bda0:4335,_0x206ce1:3208},t=_0x3a2b68,i=this.style.label;if(Cesium__namespace[t(e._0x45ef30)](i[t(e._0x41501f)])||Cesium__namespace[t(e._0x57855f)](i[t(1475)])){var s;(s=this._entity)!==null&&s!==void 0&&s[t(3203)]&&(this._entity[t(3203)][t(e._0x56b331)]=![]),super._addLabel()}else this._entity.label=this._entity.label||{},LabelStyleConver[t(1304)](this.style.label,this[t(e._0x44bda0)].label,this[t(e._0x206ce1)])}[_0x3a2b68(1338)](e,t){return CircleStyleConver.toJSON(e,t,!![])}[_0x3a2b68(458)](e){const t={_0x3e5352:458},i=_0x3a2b68;return super[i(t._0x3e5352)](e)}_getGeoJsonGeometry(e){const t={_0x323de6:2909,_0x38809f:1910},i=_0x3a2b68;return e!=null&&e.outline?{type:i(t._0x323de6),coordinates:[this.getOutlineCoordinates(e==null?void 0:e.closure,e==null?void 0:e.count,e==null?void 0:e.noAlt)]}:{type:i(t._0x38809f),coordinates:this.getCoordinate(e==null?void 0:e.noAlt)}}_updateStyleHook(e,t){const i={_0x65a90b:1304,_0xfd2295:2859,_0x178988:407,_0x28bd67:4335,_0x3a138e:3203,_0x533a4d:4335},s=_0x3a2b68;if(CircleStyleConver[s(i._0x65a90b)](e,this[s(3511)],!![]),(Cesium__namespace.defined(t.diffHeight)||Cesium__namespace.defined(t[s(4241)]))&&this[s(i._0xfd2295)](),t!=null&&t.label)if(Cesium__namespace.defined(e.clampToGround)&&!Cesium__namespace.defined(e.label.clampToGround)&&(e.label.clampToGround=e.clampToGround),Cesium__namespace.defined(e.label[s(3798)])||Cesium__namespace[s(i._0x178988)](e.label.addHeight)){var r;(r=this._entity)!==null&&r!==void 0&&r[s(3203)]&&(this._entity.label[s(442)]=![]),this._addLabel()}else this[s(i._0x28bd67)][s(i._0x3a138e)]=this._entity[s(3203)]||{},LabelStyleConver.toCesiumVal(e.label,this[s(i._0x533a4d)][s(i._0x3a138e)],this.attr)}_updatePositionsHook(){const e=_0x3a2b68;this._entity.position=this.position,this._updateHeight(),this._updateOutlineStyle(this._getOutlinePositions(),this.style),this[e(2098)](),this._updateEditDraggers()}_getOutlinePositions(){return[this.outlinePositions]}[_0x3a2b68(3358)](){const e={_0x2c039a:2694,_0x3d3e46:4076},t=_0x3a2b68;this._isCallbackPositions||(this._isCallbackPositions=!![],this._positions_draw=this[t(e._0x2c039a)]||[],this[t(e._0x3d3e46)]=new Cesium__namespace.CallbackProperty(i=>this._positions_draw.length<1?null:this._positions_draw[0],![]),this._updateOutlineToCallback())}_cancelPositionsCallback(){const e={_0x33bc36:1014},t=_0x3a2b68;this._isCallbackPositions&&(this[t(e._0x33bc36)]=![],this[t(1187)]=this._positions_draw[0],this._point=LngLatPoint[t(2101)](this[t(1187)]),this._entity&&this._updatePositionsHook())}_updateHeight(){const e={_0x32b63a:407},t=_0x3a2b68;var i;if(this.style.clampToGround)return;let s=this._position;if(((i=this._positions_draw)===null||i===void 0?void 0:i.length)>0&&(s=this._positions_draw[0]),!s)return;const r=this.style.height??LngLatPoint.fromCartesian(s).alt;this.entityGraphic.height=r,Cesium__namespace[t(e._0x32b63a)](this.style.diffHeight)&&(Cesium__namespace[t(407)](this.style[t(1882)])&&this.style.diffHeight!==0?this.entityGraphic.extrudedHeight=r+this.style.diffHeight:this.entityGraphic.extrudedHeight=void 0),this[t(1109)](EventType[t(1410)])}_startDrawHook(){const e={_0x50dc0e:383,_0x2facd6:1518,_0x1f33cc:862},t=_0x3a2b68;this[t(1575)].on(EventType.mouseMove,this._onMouseMoveHandler,this),this._map.on(EventType[t(e._0x50dc0e)],this[t(e._0x2facd6)],this),this._map.on(this._drawEndEventType,this._onDbClickHandler,this),(this[t(1941)][t(e._0x1f33cc)]??!![])&&this._map.on(this[t(1046)],this[t(1932)],this)}[_0x3a2b68(2880)](){const e={_0x499fc8:1575,_0x4aafd3:2971,_0x3332cf:510,_0x430a42:2971,_0x1bb57e:1046,_0x33c0f:1932},t=_0x3a2b68;this[t(e._0x499fc8)][t(e._0x4aafd3)](EventType.mouseMove,this._onMouseMoveHandler,this),this[t(1575)].off(EventType.click,this._onClickHandler,this),this._map.off(this[t(e._0x3332cf)],this._onDbClickHandler,this),(this[t(1941)][t(862)]??!![])&&this._map[t(e._0x430a42)](this[t(e._0x1bb57e)],this[t(e._0x33c0f)],this)}_showDrawMouseMoveSmallTooltip(e){const t={_0x19bde0:712,_0x5d4bfb:529},i=_0x3a2b68;if(this._positions_draw.length<=1){this._map.openSmallTooltip(e.endPosition,this._map.getLangText(i(4044)));return}let s="";if(this.options[i(t._0x19bde0)]&&this[i(2206)].length>0&&e.cartesian){const r=Cesium__namespace.Cartesian3.distance(this._positions_draw[0],e.cartesian);r>0&&(s=i(t._0x5d4bfb)+formatDistance(r)+"<br />")}this[i(1575)].openSmallTooltip(e.endPosition,s+this._map[i(3600)]("_单击完成绘制"))}[_0x3a2b68(2e3)](e){const t={_0x57ca16:400,_0x4e62c0:2206,_0x53913b:894,_0x5940af:2491,_0x54b923:3568},i=_0x3a2b68;if(!(this._positions_draw.length<2)){if(this._updateHeight(),!e){const s=formatNum$1(Cesium__namespace.Cartesian3.distance(this._positions_draw[0],this._positions_draw[1]),2);if(s<1)return;if(this._maxPointNum===3){let r=s,o=s;if(this._positions_draw[i(t._0x57ca16)]===3&&(o=formatNum$1(Cesium__namespace.Cartesian3.distance(this[i(t._0x4e62c0)][0],this._positions_draw[2]),2)),r>o){const c=r;r=o,o=c}this.entityGraphic.semiMajorAxis=o,this.entityGraphic.semiMinorAxis=r,this.style.semiMajorAxis=o,this.style[i(t._0x53913b)]=r}else this.entityGraphic[i(3584)]=s,this.entityGraphic[i(894)]=s,this[i(2748)].radius=s}this._entity_outlines&&(this._outlinePositions=this[i(t._0x5940af)](),this[i(t._0x54b923)]())}}_onRightClickHandler(e){const t={_0x29c0d3:894,_0x3eceb4:3878},i=_0x3a2b68;super[i(1932)](e),this.entityGraphic.semiMajorAxis=0,this.entityGraphic[i(t._0x29c0d3)]=0,this.style[i(t._0x3eceb4)]=0}[_0x3a2b68(2491)](e=!![],t){const i={_0xce9751:557,_0x5e2c32:3932},s=_0x3a2b68;var r,o,c,_;const l=Cesium__namespace[s(i._0xce9751)][s(467)](),d=getEllipseOuterPositions({position:getPositionValue(this._entity.position),semiMajorAxis:getCesiumValue((r=this._entity.ellipse)===null||r===void 0?void 0:r.semiMajorAxis,Number,l),semiMinorAxis:getCesiumValue((o=this._entity.ellipse)===null||o===void 0?void 0:o.semiMinorAxis,Number,l),rotation:getCesiumValue((c=this._entity.ellipse)===null||c===void 0?void 0:c.rotation,Number,l)??0,granularity:getCesiumValue((_=this._entity.ellipse)===null||_===void 0?void 0:_[s(i._0x5e2c32)],Number,l),count:t});if(e&&d){var f;d.push(d[0]),(this.style[s(601)]>4||((f=this.style[s(1641)])===null||f===void 0?void 0:f.width)>4)&&d[s(1754)](d[1])}return d}[_0x3a2b68(2181)](e,t,i){return cartesians2lonlats(this[_0x3a2b68({_0x29cfd8:2491}._0x29cfd8)](e,t),i)}[_0x3a2b68(1079)](e,t){const i={_0x5b092b:4201},s=_0x3a2b68,r=super._getOutlineStyle(e,t);return r.arcType=Cesium__namespace[s(i._0x5b092b)].RHUMB,r}[_0x3a2b68(1737)](e){const t=this.getOutlinePositions(![],1);return!t||t.length===0?void 0:getRectangle(t,e==null?void 0:e.isFormat)}[_0x3a2b68(3508)](e){const t=_0x3a2b68;return e=LngLatPoint.parse(e).toCartesian(),e=setPositionsHeight(e,this.height),Cesium__namespace[t(2978)][t(3481)](this.positionShow,e)<=this.radius}flyTo(e={}){const t={_0x3166b2:583,_0x3a296a:1575},i=_0x3a2b68;return this._map?(e.radius=this.radius*2*(e.scale||1.8),this[i(t._0x3a296a)].flyToPoint(this.point,e)):Promise[i(t._0x3166b2)](![])}}register$4("circle",CircleEntity,!![]);class EditModel extends EditBase{get position(){return this._graphic._position_draw}set position(e){const t={_0x4cc282:4227},i=_0x3a2b68;this[i(t._0x4cc282)]._position_draw=e}[_0x3a2b68(1317)](e){const t={_0x25464f:1575},i=_0x3a2b68;return this.clampToGround&&(e=getSurfacePosition(this[i(t._0x25464f)].scene,e)),e}bindDraggers(){const e={_0x4b8829:3912,_0x5873d8:3514,_0x1a853e:2228,_0x49b09a:4241,_0xd6d2e:1530,_0x25d59a:893,_0x4b0aaf:2847,_0x20b29f:2684,_0x1c94ec:4320,_0x4bd6e7:533,_0x3451b6:3878},t={_0x99894a:3234},i={_0x1d59c3:1530,_0x67c64c:442,_0x1db1e2:4320},s={_0x544f03:4076},r={_0x2d8d96:4320},o=_0x3a2b68;this._graphic[o(540)]=this._map.getLangText("_拖动该点后")+o(e._0x4b8829)+this._map.getLangText(o(e._0x5873d8)),this[o(4220)]({dragger:this._graphic,onDragStart:(d,f)=>{const g=o;for(let b=0,C=this.draggers.length;b<C;b++)this[g(r._0x2d8d96)][b].show=![]},onDrag:(d,f)=>{const g=o;this[g(s._0x544f03)]=f},onDragEnd:(d,f)=>{this.updateDraggers()}});const c=this[o(2748)][o(3878)],_=this.updatePositionsHeightByAttr(this.position),l=Cesium__namespace[o(e._0x1a853e)].fromCartesian(_)[o(e._0x49b09a)];if(this[o(1585)]){this[o(e._0xd6d2e)]=new CircleEntity({name:o(e._0x25d59a),position:new Cesium__namespace.CallbackProperty(g=>_,![]),style:{fill:![],outline:!![],outlineColor:"#ffff00",outlineOpacity:.8,radius:c,height:l},private:!![]}),this[o(607)][o(e._0x4b0aaf)](this.entityAngle);const d=getPositionByDirectionAndLen(_,this.style.heading,c),f=this[o(4220)]({position:d,type:PointType[o(e._0x20b29f)],tooltip:this._map.getLangText("_修改方向"),onDrag:(g,b)=>{const C=o,P=getAngle(_,b);this.style[C(2782)]=formatNum$1(P,2),g.position=getPositionByDirectionAndLen(_,this[C(2748)].heading,this.style.radius),this._graphic.updateOrientation(_)}});this[o(e._0x1c94ec)].push(f)}if(this._hasEditScale){const d=addPositionsHeight(_,c),f=this.createDragger({position:d,type:PointType[o(e._0x4bd6e7)],tooltip:this._map[o(3600)]("_修改缩放比例"),onDragStart:(g,b)=>{const C=o;this.entityAngle&&(this[C(i._0x1d59c3)][C(i._0x67c64c)]=![]);for(let P=0,S=this[C(i._0x1db1e2)].length;P<S;P++)this.draggers[P].show=![]},onDrag:(g,b)=>{const C=o,P=Cesium__namespace.Cartesian3.distance(b,_),S=g.radius/(this.style.scale||1);let L=formatNum$1(P/S,3);isNaN(L)||(L<=0&&(L=.001),this.style[C(826)]=L,this[C(3511)].scale=L,g.radius=P,this.style.radius=P)},onDragEnd:(g,b)=>{const C=o;this[C(t._0x99894a)](),this.fire(EventType[C(1410)])}});f[o(e._0x3451b6)]=c,this.draggers.push(f)}}destroyDraggers(){const e=_0x3a2b68;super.destroyDraggers(),this.entityAngle&&(this.layer.removeGraphic(this.entityAngle,!![]),delete this[e(1530)])}[_0x3a2b68(2721)](e){const t={_0x23e54c:1575,_0x29eb82:1754,_0x5dd0b:2683,_0x52db32:3788},i={_0x462b67:3527},s={_0x5900cb:3234},r={_0x11f303:1585},o={_0x32045a:1530},c={_0x52cbbb:1575},_=_0x3a2b68,l=super.getDraggerContextMenu(e);return(this[_(2748)].hasEditRotate??!![])&&(l.push({text:this[_(t._0x23e54c)].getLangText("_按轴旋转"),icon:Icon.BloomEffectYes,show:d=>{const f=_;return this[f(c._0x52cbbb)].scene.mode!==Cesium__namespace.SceneMode.SCENE3D?![]:!this._matrixRotate||this[f(2783)]._dragger_index!==e.index},callback:d=>{const f=_;this.entityAngle&&(this.layer.removeGraphic(this[f(o._0x32045a)],!![]),delete this.entityAngle,this._hasEditHeading=![],this.updateDraggers()),this[f(4217)](d.graphic,d)}}),l.push({text:this._map.getLangText("_停止按轴旋转"),icon:Icon.BloomEffectNo,show:d=>{const f=_;return this._matrixRotate&&this._matrixRotate[f(3753)]===e.index},callback:d=>{this.stopRotateMatrix()}})),!Cesium__namespace.defined(this._hasEditHeading)&&(this._hasEditHeading=this._graphic.options.hasEditHeading??![]),l[_(t._0x29eb82)]({text:"编辑方向",icon:Icon[_(t._0x5dd0b)],show:d=>!this[_(1585)],callback:d=>{const f=_;this.stopRotateMatrix(),this._hasEditHeading=!![],this[f(3234)]()}}),l.push({text:_(1706),icon:Icon[_(t._0x5dd0b)],show:d=>this[_(r._0x11f303)],callback:d=>{const f=_;this[f(1585)]=![],this.updateDraggers()}}),!Cesium__namespace.defined(this._hasEditScale)&&(this[_(3527)]=this._graphic.options.hasEditScale??![]),l[_(1754)]({text:this._map.getLangText("_调整比例"),icon:Icon[_(3436)],show:d=>{const f=_;return this[f(1575)].scene.mode!==Cesium__namespace.SceneMode.SCENE3D?![]:!this[f(3527)]},callback:d=>{const f=_;this[f(3527)]=!![],this[f(s._0x5900cb)]()}}),l.push({text:this._map[_(3600)](_(t._0x52db32)),icon:Icon.UndergroundNo,show:d=>this._hasEditScale,callback:d=>{const f=_;this[f(i._0x462b67)]=![],this[f(3234)]()}}),l}finish(){const e={_0x13ae7d:3906,_0x42153c:4227},t=_0x3a2b68;delete this._graphic._draw_tooltip,delete this[t(4227)][t(e._0x13ae7d)],delete this[t(e._0x42153c)]._noMousePick,delete this._graphic._pointType,delete this._graphic.onDrag,this._graphic.unbindContextMenu()}}class ModelEntity extends BasePointEntity{constructor(e={}){const t={_0x175d87:1748,_0x6f3cea:1900},i=_0x3a2b68;e[i(t._0x175d87)]=e[i(1748)]??!![],super(e),this.style.radius=this[i(2748)].radius??50,this[i(t._0x6f3cea)]=Cesium__namespace.defer()}get entityGraphic(){var e;return(e=this._entity)===null||e===void 0?void 0:e.model}get EditClass(){return EditModel}get scale(){const e={_0x277b22:826},t=_0x3a2b68;return this.style[t(e._0x277b22)]??1}set scale(e){const t={_0x1743f4:2019},i=_0x3a2b68;this.style.scale=e,this[i(t._0x1743f4)](this.style,{scale:e})}get readyPromise(){const e={_0xfc907e:1264},t=_0x3a2b68;return this._readyPromise[t(e._0xfc907e)]}_mountedHook(){const e={_0x4555a2:1575,_0x4cd654:1109,_0x266aae:1941,_0x173fdb:2767,_0x259d93:4023,_0x26ce6e:3542,_0x49b7f9:1286,_0x12933e:1304,_0x11c891:2009,_0x43085f:1221,_0xd0c3ba:4282,_0x372f54:3523,_0x31faef:2748,_0x3556e0:2169,_0x593f91:1956},t={_0x25c6c3:2748,_0x3e039a:432,_0x2913ef:1900},i=_0x3a2b68,s={occlusion:this.style.marsOcclusion};isMars3DCesium&&(this.loadOk=![],this._draw_tooltip=this[i(e._0x4555a2)].getLangText("_加载模型中"),this[i(e._0x4cd654)](EventType.loadBefore,{url:this[i(e._0x266aae)].url}),s[i(e._0x173fdb)]=(d,f)=>{const g=i;delete this._draw_tooltip,this.loadOk=!![],this._model=f,f.boundingSphere.radius<(this[g(2748)].maxRadius,1e3)&&(this[g(t._0x25c6c3)].radius=f[g(2057)].radius),this.fire(EventType[g(t._0x3e039a)],{drawtype:this.type,entity:d,model:f,graphic:this},!![]),this[g(t._0x2913ef)].resolve(this)});const r={position:this[i(4076)],orientation:this.getOrientation(),model:ModelStyleConver.toCesiumVal(this.style,{},!![])};!r[i(3992)].uri&&this[i(e._0x266aae)].url&&(r.model.uri=this.options[i(e._0x259d93)],r.model.show=!![]);const o=this[i(2748)].label;if(o&&(Cesium__namespace[i(407)](this.style[i(e._0x26ce6e)])&&!Cesium__namespace[i(407)](o.clampToGround)&&(o[i(e._0x26ce6e)]=this.style.clampToGround),Cesium__namespace.defined(o.setHeight)||Cesium__namespace[i(407)](o.addHeight)?this[i(e._0x49b7f9)]():r.label=LabelStyleConver.toCesiumVal(this.style[i(3203)],{},this.attr)),this.options.billboard&&(r.billboard=BillboardStyleConver[i(e._0x12933e)](this.options[i(e._0x11c891)],{},!![])),this.options.point&&(r.point=PointStyleConver.toCesiumVal(this.options.point,{},!![])),this.options.circle&&(r.ellipse=CircleStyleConver.toCesiumVal(this.options[i(3811)],{},!![])),this.options.path){var c,_;const d=PathStyleConver[i(1304)](this.options.path,{},!![]);!d.isAll&&(d[i(e._0x43085f)]=0),r.path=d;const f=(c=this.position)===null||c===void 0||(_=c._property)===null||_===void 0?void 0:_._times;if(f&&f.length>0){var l;const g=f[0];let b=f[f.length-1];((l=this.position)===null||l===void 0?void 0:l[i(e._0xd0c3ba)])===Cesium__namespace.ExtrapolationType.HOLD&&(b=Cesium__namespace.JulianDate.fromDate(new Date(2100,1,1))),r.availability=new Cesium__namespace.TimeIntervalCollection([new Cesium__namespace.TimeInterval({start:g,stop:b})])}}this[i(2748)].distanceDisplayCondition&&(this.style[i(3523)]?(r.point=PointStyleConver.toCesiumVal(this.style[i(e._0x372f54)]),r[i(2879)].distanceDisplayCondition=this._getTargetDistanceDisplayCondition(this[i(e._0x31faef)].distanceDisplayPoint)):this.style.distanceDisplayBillboard&&(r.billboard=BillboardStyleConver.toCesiumVal(this.style.distanceDisplayBillboard),r.billboard[i(e._0x3556e0)]=this._getTargetDistanceDisplayCondition(this.style[i(4246)]))),r.model.marsOptions=s,this[i(4335)]=this[i(e._0x593f91)](r)}_removedHook(){const e=_0x3a2b68;this.rotateStop(),super[e(3916)]()}[_0x3a2b68(1338)](e,t){const i={_0x17a0da:1909,_0x5bd3b7:1909,_0x3a4c87:4246},s=_0x3a2b68,r=ModelStyleConver.toJSON(e,t,!![]);return this.style.distanceDisplayPoint?r.distanceDisplayPoint=PointStyleConver[s(i._0x17a0da)](this.style.distanceDisplayPoint,{},!![]):this.style.distanceDisplayBillboard&&(r.distanceDisplayBillboard=BillboardStyleConver[s(i._0x5bd3b7)](this[s(2748)][s(i._0x3a4c87)],{},!![])),r}_updateStyleHook(e,t){const i={_0x3ed276:3511,_0x2be570:1109,_0x263be1:4335,_0x55e175:3203,_0x136620:3203},s=_0x3a2b68;if(t!=null&&t.url&&(this.loadOk=![],this[s(i._0x3ed276)]._readyOk=![],this[s(i._0x2be570)](EventType.loadBefore,{url:t==null?void 0:t.url})),ModelStyleConver[s(1304)](e,this.entityGraphic,!![]),this[s(i._0x263be1)][s(2710)]=this.getOrientation(),Cesium__namespace.defined(e.clampToGround)&&this._position_draw&&(this._position_draw.z+=.01),t!=null&&t.label)if(Cesium__namespace.defined(e.clampToGround)&&!Cesium__namespace.defined(e[s(i._0x55e175)].clampToGround)&&(e.label.clampToGround=e.clampToGround),Cesium__namespace.defined(e[s(i._0x55e175)].setHeight)||Cesium__namespace.defined(e[s(3203)].addHeight)){var r;(r=this[s(4335)])!==null&&r!==void 0&&r.label&&(this._entity.label.show=![]),this._addLabel()}else this[s(4335)].label=this._entity[s(3203)]||{},LabelStyleConver[s(1304)](e[s(i._0x136620)],this[s(i._0x263be1)].label,this[s(3208)])}_updatePositionsHook(){const e={_0x12e63b:4145,_0x142a65:4335,_0x3e2124:400,_0x4dd974:673},t=_0x3a2b68;if(super[t(e._0x12e63b)](),this[t(e._0x142a65)][t(2710)]=this.getOrientation(),this._entity.path){var i,s;const o=(i=this.position)===null||i===void 0||(s=i._property)===null||s===void 0?void 0:s._times;if(o&&o.length>0){var r;const c=o[0];let _=o[o[t(e._0x3e2124)]-1];((r=this.position)===null||r===void 0?void 0:r.forwardExtrapolationType)===Cesium__namespace.ExtrapolationType.HOLD&&(_=Cesium__namespace.JulianDate[t(e._0x4dd974)](new Date(2100,1,1))),this._entity[t(514)]=new Cesium__namespace.TimeIntervalCollection([new Cesium__namespace.TimeInterval({start:c,stop:_})])}}}_setPositionsToCallback(){const e={_0x5b00c7:2806};super._setPositionsToCallback(),this._entity.orientation=new Cesium__namespace.CallbackProperty(t=>{const i=_0x20dc,s=getPositionValue(this.position,t);if(s==null)return;const r=Cesium__namespace.Math.toRadians(this.style.heading??0),o=Cesium__namespace.Math.toRadians(this[i(2748)].pitch??0),c=Cesium__namespace[i(e._0x5b00c7)].toRadians(this.style.roll??0),_=new Cesium__namespace.HeadingPitchRoll(r,o,c);return Cesium__namespace.Transforms.headingPitchRollQuaternion(s,_)},![])}_cancelPositionsCallback(){const e=_0x3a2b68;this._isCallbackPositions&&(super._cancelPositionsCallback(),this._entity&&(this._entity[e(2710)]=this[e(2214)]()))}_setOptionsHook(e,t){const i={_0x8a379c:2009,_0x99df60:3811,_0x5e30b9:4335},s=_0x3a2b68;t.billboard&&BillboardStyleConver[s(1304)](e.billboard,this._entity[s(i._0x8a379c)],!![]),t[s(2879)]&&PointStyleConver.toCesiumVal(e.point,this._entity.point,!![]),t[s(1699)]&&(PathStyleConver.toCesiumVal(e[s(1699)],this._entity.path,!![]),!e[s(1699)][s(2926)]&&(this._entity.path.leadTime=0)),t.circle&&CircleStyleConver.toCesiumVal(e[s(i._0x99df60)],this[s(i._0x5e30b9)].ellipse,!![])}_toJSON_Ex(e){const t={_0x5c5310:1941,_0x1d1469:1941,_0x285682:2009,_0x5b40ab:2879},i=_0x3a2b68;this[i(t._0x5c5310)].billboard&&(e.billboard={},BillboardStyleConver.toJSON(this[i(t._0x1d1469)][i(t._0x285682)],e.billboard,!![])),this[i(1941)].point&&(e.point={},PointStyleConver.toJSON(this[i(1941)].point,e[i(t._0x5b40ab)],!![])),this[i(1941)].path&&(e.path={},PathStyleConver.toJSON(this.options[i(1699)],e[i(1699)],!![])),this.options[i(3811)]&&(e.circle={},CircleStyleConver.toJSON(this[i(1941)].circle,e.circle,!![]))}_addLabel(){const e={_0x99cbde:407,_0x2e2bb0:3203,_0x46392f:4335},t=_0x3a2b68,i=this.style.label;if(Cesium__namespace[t(e._0x99cbde)](i[t(3798)])||Cesium__namespace.defined(i.addHeight)){var s;(s=this._entity)!==null&&s!==void 0&&s[t(e._0x2e2bb0)]&&(this._entity[t(3203)].show=![]),super[t(1286)]()}else this._entity[t(e._0x2e2bb0)]=this[t(e._0x46392f)].label||{},LabelStyleConver.toCesiumVal(this.style.label,this._entity.label,this.attr)}updateAttrForDrawing(e){}_updateDistanceDisplayConditionByEdit(){}[_0x3a2b68(1135)](e){const t={_0xa20945:2748,_0x284014:2230},i=_0x3a2b68;let s;return this.style.distanceDisplayCondition instanceof Cesium__namespace.DistanceDisplayCondition?s=this[i(2748)][i(2169)].far:this[i(t._0xa20945)].distanceDisplayCondition_far&&(s=this.style.distanceDisplayCondition_far),new Cesium__namespace.DistanceDisplayCondition((e[i(t._0x284014)],s),(e.distanceDisplayCondition_far,Number.MAX_VALUE))}getHeadingPitchRoll(){const e=_0x3a2b68,t=this._map[e(2257)][e(545)],i=this.positionShow,s=Cesium__namespace.Property.getValueOrUndefined(this._entity.orientation,t,new Cesium__namespace.Quaternion);return getHeadingPitchRollByOrientation(i,s)}[_0x3a2b68(1522)](e={}){const t={_0x543cf2:3672,_0x5e3740:1036,_0x285cf2:3863,_0x3e3a4e:812,_0x41d3ac:1575},i={_0x2b0933:3737},s=_0x3a2b68;this[s(2938)]&&this.rotateStop(),this[s(t._0x543cf2)]=e.direction?1:-1,this._rotateAngle=360/(60*(e[s(t._0x5e3740)]||60)),this._rotateAutoStopAngle=e.autoStopAngle,this._rotateHpr=this[s(t._0x285cf2)](),this._startHeading=this[s(t._0x3e3a4e)].heading,this._tikRender=0,this[s(2938)]=!![],this.entity.orientation=new Cesium__namespace.CallbackProperty(r=>{const o=s;var c,_;const l=getPositionValue(this.position,r);return Cesium__namespace[o(i._0x2b0933)][o(1623)](l,this._rotateHpr,(c=this[o(1575)])===null||c===void 0||(_=c.scene)===null||_===void 0?void 0:_.globe.ellipsoid)},![]),this[s(t._0x41d3ac)].on(EventType.preRender,this[s(1369)],this)}_rotate_onPreRenderHandler(e){const t={_0x505c08:2901,_0x213894:2901,_0x568d18:2520},i=_0x3a2b68;if(!this[i(1575)])return;this[i(t._0x505c08)]++;const s=this[i(t._0x213894)]*this._rotateAngle;if(this._rotateAutoStopAngle&&s>=this[i(t._0x568d18)]){this.rotateStop();return}const r=Cesium__namespace.Math.toRadians(s*this._rotateDirection)+this._startHeading;this._rotateHpr[i(2782)]=r}[_0x3a2b68(3686)](){const e={_0x362689:1896,_0xbe91cf:2782,_0x3e0293:1821},t=_0x3a2b68;this._isRotateStart&&(this._isRotateStart=![],this._map.off(EventType[t(e._0x362689)],this._rotate_onPreRenderHandler,this),this[t(e._0xbe91cf)]=Cesium__namespace[t(2806)][t(3501)](this._rotateHpr.heading),delete this[t(3672)],delete this[t(e._0x3e0293)],delete this._rotateAutoStopAngle,delete this._rotateHpr,delete this._startHeading,delete this._tikRender)}[_0x3a2b68(4196)](e){const t={_0x3e1b6f:738,_0x5ec8aa:1036,_0x38c67e:2756,_0x48da56:1575,_0x52e6bd:2257,_0x67381d:4385,_0x385637:1348};return new Promise((i,s)=>{const r=_0x20dc,o=new Cesium__namespace.SampledPositionProperty;o[r(4282)]=Cesium__namespace[r(4379)].HOLD;const c=this._map.clock.currentTime.clone(),_=this.positionShow;o.addSample(c,_);const l=LngLatPoint[r(t._0x3e1b6f)](e.position).toCartesian(),d=e[r(t._0x5ec8aa)]||5,f=Cesium__namespace.JulianDate.addSeconds(c,d,new Cesium__namespace[r(557)]);o[r(t._0x38c67e)](f,l),this._entity.position=o;const g=this._map.clock.multiplier;this[r(1575)].clock.shouldAnimate=!![],this[r(t._0x48da56)][r(t._0x52e6bd)][r(4199)]=e[r(t._0x67381d)]||1,this[r(t._0x385637)]=()=>{this._map&&(delete this._cancelMoveTo,this.position=l,this._map.clock.multiplier=g,e.onEnd&&e.onEnd(),i(this))},setTimeout(()=>{this.cancelMoveTo()},d*1e3)})}[_0x3a2b68(506)](){this[_0x3a2b68({_0x2ad81e:1348}._0x2ad81e)]&&this._cancelMoveTo()}_getPopupPosition(){return this[_0x3a2b68({_0x38f945:4335}._0x38f945)].position}flyTo(e={}){const t={_0x5baccc:583,_0x415b52:2879},i=_0x3a2b68;return this._map?(!Cesium__namespace.defined(e.radius)&&(e.radius=this[i(2748)].radius*2*(e.scale||1.8)),this._map[i(2258)](this[i(t._0x415b52)],e)):Promise[i(t._0x5baccc)](![])}setOpacity(e){const t={_0x1dbaac:749,_0x3a4b88:1744,_0x49065a:2551},i=_0x3a2b68;this.style[i(t._0x1dbaac)]=e,this._entity&&(ModelStyleConver[i(t._0x3a4b88)](this[i(3511)],e),this[i(t._0x49065a)](e))}}register$4("model",ModelEntity,!![]);class EditBox extends EditBase{get position(){return this._graphic._position_draw}set[_0x3a2b68(4076)](e){this._graphic._position_draw=e}bindDraggers(){const e={_0xbe1ae7:4227,_0x53520f:2684,_0x2930c2:4220},t={_0x392df9:3234},i={_0x5564fe:3840},s={_0x3b3f4e:4076,_0x4da002:2978,_0xecb15b:4076,_0x4ef593:3978},r={_0x3d753f:400,_0x2c2193:4320},o=_0x3a2b68,c=this.style;let _;const l=this.position;_=this.createDragger({position:l,onDrag:(L,E)=>{const M=_0x20dc,D=Cesium__namespace.Cartesian3[M(3420)](E,this.position,new Cesium__namespace.Cartesian3);this.position=E;for(let R=0,k=this.draggers[M(r._0x3d753f)];R<k;R++)this.draggers[R]!==L&&(this[M(r._0x2c2193)][R].position=Cesium__namespace.Cartesian3.add(this.draggers[R].position,D,new Cesium__namespace[M(2978)]))}}),this.draggers.push(_);const d=Cesium__namespace.Math.toRadians(this._graphic[o(2782)]),f=Cesium__namespace.Math[o(1185)](this[o(e._0xbe1ae7)].pitch),g=Cesium__namespace.Math.toRadians(this._graphic.roll),b=new Cesium__namespace.HeadingPitchRoll(d,f,g),C=getPositionByHprAndOffset(l,new Cesium__namespace.Cartesian3(c[o(1736)]/2,0,0),b);_=this.createDragger({position:C,type:PointType[o(2684)],tooltip:this._map.getLangText(o(2692)),onDrag:(L,E)=>{const M=o,D=Cesium__namespace[M(2228)].fromCartesian(this.position).height;E=setPositionsHeight(E,D),L[M(s._0x3b3f4e)]=E;const R=this[M(3657)](Cesium__namespace[M(s._0x4da002)].distance(this[M(s._0xecb15b)],E),2);c.dimensions_x=R*2,this[M(s._0x4ef593)](c),this.fire(EventType.editStyle)},onDragEnd:(L,E)=>{this.updateDraggers()}}),this[o(4320)].push(_);const P=getPositionByHprAndOffset(l,new Cesium__namespace.Cartesian3(0,c.dimensions_y/2,0),b);_=this.createDragger({position:P,type:PointType[o(e._0x53520f)],tooltip:this._map.getLangText(o(4367)),onDrag:(L,E)=>{const M=o,D=Cesium__namespace.Cartographic.fromCartesian(l).height;E=setPositionsHeight(E,D),L.position=E;const R=this.formatNum(Cesium__namespace.Cartesian3.distance(this[M(4076)],E),2);c[M(i._0x5564fe)]=R*2,this.updateBox(c),this.fire(EventType.editStyle)},onDragEnd:(L,E)=>{this[o(3234)]()}}),this.draggers.push(_);const S=getPositionByHprAndOffset(l,new Cesium__namespace.Cartesian3(0,0,c.dimensions_z/2),b);_=this[o(e._0x2930c2)]({position:S,type:PointType[o(533)],tooltip:this._map.getLangText("_修改高度"),onDrag:(L,E)=>{const M=o,D=this.formatNum(Cesium__namespace.Cartesian3.distance(this.position,E),2);c.dimensions_z=D*2,this[M(3978)](c),this.fire(EventType.editStyle)},onDragEnd:(L,E)=>{this[o(t._0x392df9)]()}}),this.draggers.push(_)}[_0x3a2b68(3978)](e){const t={_0x23a49c:3511},i=_0x3a2b68,s=new Cesium__namespace.Cartesian3(e.dimensions_x,e[i(3840)],e.dimensions_z);this[i(t._0x23a49c)].dimensions.setValue(s)}[_0x3a2b68(2019)](e){const t={_0x122f31:407},i=_0x3a2b68;super[i(2019)](e),(Cesium__namespace.defined(e[i(1736)])||Cesium__namespace[i(t._0x122f31)](e.dimensions_y)||Cesium__namespace[i(407)](e.dimensions_z))&&this.updateDraggers()}}class BoxEntity extends BasePointEntity{get[_0x3a2b68(3511)](){var e;return(e=this._entity)===null||e===void 0?void 0:e.box}get[_0x3a2b68(1746)](){return EditBox}_mountedHook(){const e={_0x4e1c00:1304,_0x116419:4335,_0x48f0c2:1956,_0x17f4e7:2748,_0x265bff:1286},t=_0x3a2b68,i={position:this.position,orientation:this.getOrientation(),box:BoxStyleConver[t(e._0x4e1c00)](this.style,{},!![])};this[t(e._0x116419)]=this[t(e._0x48f0c2)](i),this[t(e._0x17f4e7)].label&&this[t(e._0x265bff)]()}_style2Json(e,t){return BoxStyleConver[_0x3a2b68(1909)](e,t,!![])}_updateStyleHook(e,t){const i={_0x2b9b17:2341},s=_0x3a2b68;t&&(Cesium__namespace.defined(t.heading)||Cesium__namespace.defined(t.pitch)||Cesium__namespace.defined(t[s(i._0x2b9b17)]))&&(this[s(4335)].orientation=this.getOrientation()),BoxStyleConver.toCesiumVal(e,this[s(3511)],!![])}_setPositionsToCallback(){const e={_0x29353c:1575},t=_0x3a2b68;super._setPositionsToCallback();const i=getCesiumValue(this.entityGraphic.dimensions,Number,this[t(e._0x29353c)][t(2257)].currentTime);this[t(2748)].dimensions_x=this.style.dimensions_x??i.x,this.style.dimensions_y=this.style[t(3840)]??i.y,this.style.dimensions_z=this.style[t(559)]??i.z,delete this.style.dimensions}}register$4("box",BoxEntity,!![]);class EditPlane extends EditBase{get[_0x3a2b68(4076)](){return this[_0x3a2b68({_0x586be0:4227}._0x586be0)]._position_draw}set position(e){const t={_0x595d28:1529},i=_0x3a2b68;this._graphic[i(t._0x595d28)]=e}bindDraggers(){const e={_0x4983a9:4320,_0x237284:2782,_0x160b2e:2978,_0x249a79:3252,_0x479b00:4220,_0x528323:4320},t={_0x49edc5:3657,_0x51a413:3840},i={_0x3f4a65:3234},s={_0x5f0eb1:4076},r={_0x4a538b:4320,_0x56ad28:400},o=_0x3a2b68,c=this.style;let _;const l=this.position;_=this.createDragger({position:l,onDrag:(P,S)=>{const L=_0x20dc,E=Cesium__namespace.Cartesian3.subtract(S,this[L(4076)],new Cesium__namespace.Cartesian3);this.position=S;for(let M=0,D=this[L(r._0x4a538b)][L(r._0x56ad28)];M<D;M++)this.draggers[M]!==P&&(this.draggers[M].position=Cesium__namespace.Cartesian3.add(this.draggers[M].position,E,new Cesium__namespace[L(2978)]))}}),this[o(e._0x4983a9)][o(1754)](_);const d=Cesium__namespace[o(2806)][o(1185)](this._graphic[o(e._0x237284)]),f=Cesium__namespace.Math.toRadians(this._graphic[o(1630)]),g=Cesium__namespace.Math.toRadians(this._graphic.roll),b=new Cesium__namespace.HeadingPitchRoll(d,f,g),C=new Cesium__namespace[o(e._0x160b2e)];switch(c[o(e._0x249a79)]){case"x":C.y=c.dimensions_x/2;break;default:C.x=c.dimensions_x/2;break}if(_=this.createDragger({position:getPositionByHprAndOffset(l,C,b),type:PointType.EditAttr,tooltip:this._map.getLangText("_修改长度"),onDrag:(P,S)=>{const L=o,E=Cesium__namespace.Cartographic.fromCartesian(this.position)[L(4241)];S=setPositionsHeight(S,E),P[L(s._0x5f0eb1)]=S;const M=this[L(3657)](Cesium__namespace.Cartesian3.distance(this.position,S),2);c[L(1736)]=M*2,this.updatePlane(c)},onDragEnd:(P,S)=>{this[o(i._0x3f4a65)]()}}),this.draggers.push(_),c.plane_normal==="z")_=this[o(e._0x479b00)]({position:getPositionByHprAndOffset(l,new Cesium__namespace.Cartesian3(0,c[o(3840)]/2,0),b),type:PointType.EditAttr,tooltip:this._map.getLangText("_修改宽度"),onDrag:(P,S)=>{const L=o,E=Cesium__namespace.Cartographic.fromCartesian(this[L(4076)])[L(4241)];S=setPositionsHeight(S,E),P.position=S;const M=this[L(t._0x49edc5)](Cesium__namespace.Cartesian3.distance(this.position,S),2);c[L(t._0x51a413)]=M*2,this.updatePlane(c)},onDragEnd:(P,S)=>{this.updateDraggers()}}),this[o(e._0x528323)].push(_);else{const P={x:0,y:0,z:0};switch(c.plane_normal){case"x":case"y":P.z=c[o(3840)]/2;break;default:P.y=c.dimensions_y/2;break}_=this.createDragger({position:getPositionByHprAndOffset(l,P,b),type:PointType[o(533)],tooltip:this._map.getLangText(o(4367)),onDrag:(S,L)=>{const E=this.formatNum(Cesium__namespace.Cartesian3.distance(this.position,L),2);c.dimensions_y=E*2,this.updatePlane(c)},onDragEnd:(S,L)=>{this.updateDraggers()}}),this[o(e._0x4983a9)].push(_)}}updatePlane(e){const t={_0x29ceab:3532},i=_0x3a2b68,s=new Cesium__namespace[i(t._0x29ceab)](e.dimensions_x,e.dimensions_y);this.entityGraphic[i(2698)][i(2149)](s),this.fire(EventType.editStyle)}_updateStyleHook(e){const t=_0x3a2b68;super[t(2019)](e),(Cesium__namespace.defined(e.dimensions_x)||Cesium__namespace.defined(e[t(3840)]))&&this.updateDraggers()}}class PlaneEntity extends BasePointEntity{get entityGraphic(){const e={_0x452e2e:1068},t=_0x3a2b68;var i;return(i=this._entity)===null||i===void 0?void 0:i[t(e._0x452e2e)]}get[_0x3a2b68(1746)](){return EditPlane}_mountedHook(){const e=_0x3a2b68,t={position:this.position,orientation:this.getOrientation(),plane:PlaneStyleConver.toCesiumVal(this[e(2748)],{},!![])};this._entity=this._createEntity(t),this.style.label&&this._addLabel()}_style2Json(e,t){return PlaneStyleConver.toJSON(e,t,!![])}_updateStyleHook(e,t){const i={_0x446666:2782,_0x363fd6:407,_0x4049b5:407,_0x4af4fe:3511},s=_0x3a2b68;t&&(Cesium__namespace.defined(t[s(i._0x446666)])||Cesium__namespace[s(i._0x363fd6)](t.pitch)||Cesium__namespace[s(i._0x4049b5)](t.roll))&&(this._entity.orientation=this.getOrientation()),PlaneStyleConver.toCesiumVal(e,this[s(i._0x4af4fe)],!![])}[_0x3a2b68(3358)](){const e={_0x3db983:4206},t=_0x3a2b68;super._setPositionsToCallback();const i=getCesiumValue(this.entityGraphic.dimensions,Cesium__namespace.Cartesian2,this._map.clock[t(545)]);i&&PlaneStyleConver[t(e._0x3db983)](t(2698),i,this[t(2748)]);const s=getCesiumValue(this.entityGraphic.plane,Cesium__namespace.Plane,this[t(1575)].clock[t(545)]);s&&PlaneStyleConver[t(4206)]("plane",s,this[t(2748)])}}register$4(_0x3a2b68(1068),PlaneEntity,!![]);class EditCylinder extends EditPoly{bindDraggers(){const e={_0x52b79e:3940,_0x4e4c00:2684,_0x268700:1575,_0x57d193:3642,_0xc9ae3e:2748},t={_0x3d408d:2748},i={_0x24fa82:3234},s={_0x5be7f6:1410},r=_0x3a2b68,o=this[r(2694)],c=o[0];let _=0;const l=this.createDragger({position:c,onDragStart:(P,S)=>{for(let L=0,E=this.draggers.length;L<E;L++)this.draggers[L].show=![]},onDrag:(P,S)=>{o[0]=S},onDragEnd:(P,S)=>{this.updateDraggers()}});l[r(1191)]=_,this.draggers.push(l);const d=getEllipseOuterPositions({position:c,semiMajorAxis:this.style.bottomRadius,semiMinorAxis:this[r(2748)][r(e._0x52b79e)],rotation:Cesium__namespace.Math.toRadians(Number(this[r(2748)].rotation||0))});_=1;const f=d[0];o[_]=f;const g=this[r(4220)]({position:f,type:PointType[r(e._0x4e4c00)],tooltip:this[r(e._0x268700)].getLangText(r(e._0x57d193)),onDrag:(P,S)=>{const L=r;o[1]=S;const E=this.formatNum(Cesium__namespace[L(2978)].distance(o[0],S),2);this[L(2748)].bottomRadius=E,this.fire(EventType[L(s._0x5be7f6)])},onDragEnd:(P,S)=>{this[r(i._0x24fa82)]()}});g.index=_,this.draggers.push(g),_=2;const b=addPositionsHeight(c,this[r(e._0xc9ae3e)].length);o[_]=b;const C=this[r(4220)]({position:b,type:PointType[r(533)],tooltip:this._map[r(3600)]("_修改高度"),onDrag:(P,S)=>{const L=r;o[P.index]=S;const E=this.formatNum(Cesium__namespace[L(2978)].distance(o[0],S),2);this[L(t._0x3d408d)].length=E,this[L(1109)](EventType.editStyle)},onDragEnd:(P,S)=>{this.updateDraggers()}});C.index=_,this.draggers.push(C)}_updateStyleHook(e){const t=_0x3a2b68;super[t(2019)](e),(Cesium__namespace.defined(e.topRadius)||Cesium__namespace.defined(e.bottomRadius)||Cesium__namespace.defined(e.length)||Cesium__namespace[t(407)](e[t(1882)]))&&this[t(3234)]()}}class CylinderEntity extends BasePointEntity{constructor(e={}){super(e),this._minPointNum=2,this._maxPointNum=2}get entityGraphic(){var e;return(e=this._entity)===null||e===void 0?void 0:e.cylinder}get EditClass(){return EditCylinder}_mountedHook(){const e=_0x3a2b68;this._entity=this[e(1956)](this._getCreateEntityAttr()),this.style.label&&this._addLabel()}_getCreateEntityAttr(){return{position:this.position,orientation:this.getOrientation(),cylinder:CylinderStyleConver.toCesiumVal(this.style,{},!![])}}_style2Json(e,t){return CylinderStyleConver.toJSON(e,t,!![])}_updateStyleHook(e,t){const i={_0xa00139:407,_0x2de229:2206},s=_0x3a2b68;if(CylinderStyleConver.toCesiumVal(e,this.entityGraphic,{},!![]),(Cesium__namespace.defined(t[s(2782)])||Cesium__namespace.defined(t.pitch)||Cesium__namespace[s(i._0xa00139)](t[s(2341)]))&&(this._entity.orientation=this[s(2214)]()),Cesium__namespace.defined(t[s(400)])||Cesium__namespace[s(407)](t.diffHeight)){var r;((r=this[s(i._0x2de229)])===null||r===void 0?void 0:r[s(400)])>0&&(this._position_show=addPositionsHeight(this[s(i._0x2de229)][0],e.length/2))}}[_0x3a2b68(4145)](){const e=_0x3a2b68;var t,i;(t=this.editing)!==null&&t!==void 0&&t.enabled&&((i=this._positions_draw)===null||i===void 0?void 0:i.length)>0&&(this._position_show=addPositionsHeight(this._positions_draw[0],this.style[e(400)]/2)),super._updatePositionsHook()}[_0x3a2b68(3358)](){const e={_0x1d55a8:2191,_0x18ac0f:400,_0x2a2e90:3511,_0xdc12d9:2206,_0x3023f9:4076},t=_0x3a2b68;if(this._isCallbackPositions)return;this._isCallbackPositions=!![];const i=this._map.clock.currentTime;this.style[t(4100)]=getCesiumValue(this.entityGraphic.topRadius,Number,i),this.entityGraphic[t(4100)]=new Cesium__namespace.CallbackProperty(s=>this.style.topRadius,![]),this.style.bottomRadius=getCesiumValue(this.entityGraphic.bottomRadius,Number,i),this.entityGraphic.bottomRadius=new Cesium__namespace[t(e._0x1d55a8)](s=>this.style.bottomRadius,![]),this[t(2748)][t(e._0x18ac0f)]=getCesiumValue(this[t(e._0x2a2e90)][t(400)],Number,i),this.entityGraphic[t(400)]=new Cesium__namespace.CallbackProperty(s=>this.style.length,![]),this.position?(this._positions_draw=this.positions,this._positions_draw[0]=addPositionsHeight(this.position,-this.style.length/2)):this[t(e._0xdc12d9)]=[],this[t(1080)]=this[t(e._0x3023f9)],this.position=new Cesium__namespace.CallbackProperty(s=>this._position_show,![])}_cancelPositionsCallback(){const e={_0x53ac92:1187,_0x47ea4:400,_0x10b40c:4100},t=_0x3a2b68;this._isCallbackPositions&&(this._isCallbackPositions=![],this[t(e._0x53ac92)]=this._position_show,this._point=LngLatPoint.fromCartesian(this._position),this._entity&&(this.entityGraphic.length=this.style[t(e._0x47ea4)],this.entityGraphic[t(e._0x10b40c)]=this.style.topRadius,this.entityGraphic.bottomRadius=this[t(2748)].bottomRadius,this._updatePositionsHook()))}[_0x3a2b68(2741)](){const e={_0x5ded17:1575,_0x4c520d:1840,_0x546434:862},t=_0x3a2b68;this[t(e._0x5ded17)].on(EventType[t(e._0x4c520d)],this[t(841)],this),this._map.on(EventType.click,this._onClickHandler,this),this[t(1575)].on(this._drawEndEventType,this[t(3767)],this),(this[t(1941)][t(e._0x546434)]??!![])&&this._map.on(this._drawDelEventType,this._onRightClickHandler,this)}_stopDrawHook(){const e={_0xa7d2e1:2971,_0x1e6b90:1840,_0x56b47d:862},t=_0x3a2b68;this._map[t(e._0xa7d2e1)](EventType[t(e._0x1e6b90)],this._onMouseMoveHandler,this),this._map.off(EventType.click,this._onClickHandler,this),this._map[t(e._0xa7d2e1)](this._drawEndEventType,this._onDbClickHandler,this),(this.options[t(e._0x56b47d)]??!![])&&this._map.off(this[t(1046)],this._onRightClickHandler,this)}updateAttrForDrawing(e){const t={_0x11d4b8:3481,_0x450dd0:3940},i=_0x3a2b68;if(this._position_show=addPositionsHeight(this._positions_draw[0],this.style.length/2),!e&&this._positions_draw.length>1){const s=formatNum$1(Cesium__namespace.Cartesian3[i(t._0x11d4b8)](this._positions_draw[0],this[i(2206)][1]),2);this.style[i(t._0x450dd0)]=s,this.style.length=s*2}}_onRightClickHandler(e){const t=_0x3a2b68;super._onRightClickHandler(e),this[t(2748)].bottomRadius=0,this.style.length=0}}register$4(_0x3a2b68(3073),CylinderEntity,!![]);class ConeTrack extends CylinderEntity{constructor(e={}){super(e),e.targetPosition&&(this.targetPosition=e.targetPosition)}get hasEdit(){return![]}get EditClass(){}get[_0x3a2b68(497)](){return this[_0x3a2b68(968)]}set targetPosition(e){const t=_0x3a2b68;this[t(4375)]=LngLatPoint.parse(e),this._targetPosition=this._targetPoint.toCartesian()}get targetPoint(){return this._targetPoint}get[_0x3a2b68(2580)](){return this[_0x3a2b68({_0x1e3ed9:2748}._0x1e3ed9)].angle}set[_0x3a2b68(2580)](e){const t=_0x3a2b68;this[t(2748)].angle=e}_mountedHook(){const e=_0x3a2b68;super[e(585)](),this._updateDistanceDisplayConditionByEdit()}_getCreateEntityAttr(){const e={_0x18e9e3:2191,_0x37703b:2748,_0x4e20d4:2580},t=_0x3a2b68,i=super._getCreateEntityAttr();return i.position=new Cesium__namespace[t(e._0x18e9e3)](s=>(this._update(s),this._cylinderPosition),![]),i.orientation=new Cesium__namespace.CallbackProperty(s=>this._orientation,![]),i[t(3073)][t(400)]=new Cesium__namespace.CallbackProperty(s=>this._cylinderLength,![]),!Cesium__namespace.defined(i.cylinder.topRadius)&&(i[t(3073)][t(4100)]=0),Cesium__namespace.defined(this[t(e._0x37703b)][t(e._0x4e20d4)])&&(i[t(3073)].bottomRadius=new Cesium__namespace.CallbackProperty(s=>this[t(898)],![])),this._isCallbackPositions=!![],i}_update(e){const t={_0x1aebeb:497,_0x24ce36:2737,_0x367bf6:1879,_0x4cdd69:744,_0x4b1b54:1623,_0x505b26:2748,_0x35c386:2519},i=_0x3a2b68,s=getPositionValue(this.position,e);if(!s){this._cylinderPosition=void 0;return}if(Cesium__namespace.defined(this[i(t._0x1aebeb)])){const r=getPositionValue(this.targetPosition,e);r&&(this._cylinderLength=Cesium__namespace[i(2978)].distance(s,r),this[i(t._0x24ce36)]=Cesium__namespace.Cartesian3[i(1028)](s,r,new Cesium__namespace.Cartesian3),this._orientation=Cesium__namespace.Transforms.headingPitchRollQuaternion(r,getHeadingPitchRollForLine(r,s)))}else{if(this._cylinderLength=this.style[i(400)],!this._cylinderLength){const o=LngLatPoint[i(738)](s);this[i(3360)]=o[i(t._0x367bf6)]-getHeight(this._map[i(t._0x4cdd69)],o,{has3dtiles:![]})}const r=Cesium__namespace.HeadingPitchRoll.fromDegrees(this.heading,this.pitch,this.roll);this._orientation=Cesium__namespace.Transforms[i(t._0x4b1b54)](s,r),this._cylinderPosition=getPositionByHprAndLen(s,r,this._cylinderLength/2)}Cesium__namespace.defined(this[i(t._0x505b26)].angle)&&(this._cylinderBottomRadius=this._cylinderLength*Math[i(t._0x35c386)](Cesium__namespace.Math.toRadians(90-this.angle)))}_updatePositionsHook(){}}register$4("coneTrack",ConeTrack);class EditEllipsoid extends EditBase{bindDraggers(){const e={_0xa9fd96:1754,_0x5ebedf:3600,_0x2c9793:1891,_0x34b407:2748,_0x2f182e:2390},t={_0x11c864:2694,_0x523253:2978,_0x2577e4:3481},i={_0x2994e2:2228,_0x1006a3:4368},s={_0x379e59:775},r={_0x34dd82:3234},o={_0x4b73f0:2694},c={_0xbb1a37:4320},_=_0x3a2b68;let l;const d=this.positions[0];if(l=this.createDragger({position:d,onDragStart:(g,b)=>{const C=_0x20dc;for(let P=0,S=this[C(c._0xbb1a37)].length;P<S;P++)this.draggers[P][C(442)]=![]},onDrag:(g,b)=>{const C=_0x20dc;this[C(o._0x4b73f0)][0]=b},onDragEnd:(g,b)=>{this[_0x20dc(r._0x34dd82)]()}}),l[_(1191)]=0,this.draggers[_(e._0xa9fd96)](l),this._graphic.options[_(3641)]??!![]){l=this.createDragger({position:addPositionsHeight(d,this.style.radii_z),type:PointType.MoveHeight,tooltip:this._map[_(e._0x5ebedf)]("_修改半径"),onDrag:(L,E)=>{const M=_,D=this.positions[0],R=this.formatNum(Cesium__namespace.Cartesian3.distance(D,E),2);this.style[M(569)]=R,this[M(4227)][M(s._0x379e59)](this.style),this[M(1109)](EventType.editStyle)}}),this.draggers.push(l);const g=getEllipseOuterPositions({position:d,semiMajorAxis:Number(this.style[_(e._0x2c9793)]),semiMinorAxis:Number(this.style.radii_y),rotation:Cesium__namespace.Math[_(1185)](Number(this[_(e._0x34b407)][_(1344)]||0))}),b=g[0],C=this.createDragger({position:b,type:PointType.EditAttr,tooltip:this._map.getLangText("_修改半径"),onDrag:(L,E)=>{const M=_,D=this.positions[0],R=Cesium__namespace[M(i._0x2994e2)].fromCartesian(D).height;E=setPositionsHeight(E,R),L.position=E;const k=this[M(3657)](Cesium__namespace.Cartesian3.distance(D,E),2);this.style[M(i._0x1006a3)]=k,this[M(4227)].updateRadii(this[M(2748)]),this.fire(EventType.editStyle)}});l[_(e._0x2f182e)]=C,this.draggers.push(C);const P=g[1],S=this[_(4220)]({position:P,type:PointType.EditAttr,tooltip:this._map.getLangText("_修改半径"),onDrag:(L,E)=>{const M=_,D=this[M(t._0x11c864)][0],R=Cesium__namespace.Cartographic.fromCartesian(D)[M(4241)];E=setPositionsHeight(E,R),L.position=E;const k=this.formatNum(Cesium__namespace[M(t._0x523253)][M(t._0x2577e4)](D,E),2);this.style.radii_x=k,this._graphic[M(775)](this[M(2748)]),this.fire(EventType.editStyle)}});l.minorDragger=S,this.draggers[_(e._0xa9fd96)](S)}}[_0x3a2b68(2019)](e){const t=_0x3a2b68;super[t(2019)](e),(Cesium__namespace.defined(e.radii_x)||Cesium__namespace.defined(e.radii_y)||Cesium__namespace.defined(e.radii_z))&&this.updateDraggers()}}class EllipsoidEntity extends BasePointEntity{constructor(e={}){super(e),this._minPointNum=2,this._maxPointNum=3}get entityGraphic(){var e;return(e=this._entity)===null||e===void 0?void 0:e.ellipsoid}get EditClass(){return EditEllipsoid}get[_0x3a2b68(1637)](){const e={_0x54b6db:3487},t=_0x3a2b68;let i=[];return this._primitive_label&&i.push(this[t(e._0x54b6db)]),this._entity_scanPlane&&(i=i[t(4083)](this._entity_scanPlane)),i}[_0x3a2b68(585)](){const e={_0x268d6:2748,_0x1febf4:811,_0x530ade:811},t=_0x3a2b68,i={position:this.position,orientation:this.getOrientation(),ellipsoid:EllipsoidStyleConver.toCesiumVal(this[t(e._0x268d6)],{},!![])};this._entity=this._createEntity(i),this.style.label&&this._addLabel();const s=this.options[t(e._0x1febf4)]||this[t(2748)][t(e._0x530ade)];s&&(Array[t(391)](s)?s.forEach(r=>{this.addScanPlane(r)}):this.addScanPlane(s))}_style2Json(e,t){const i=_0x3a2b68;if(t=EllipsoidStyleConver.toJSON(e,t,!![]),this._entity_scanPlane&&this._entity_scanPlane[i(400)]>0){const s=[];this._entity_scanPlane.forEach(r=>{s.push(r._planeOptions)}),t.scanPlane=s}return t}_updateStyleHook(e,t){const i={_0x5808c0:407,_0x2f2e55:2214,_0x4faa19:775},s=_0x3a2b68;EllipsoidStyleConver.toCesiumVal(e,this.entityGraphic,!![]),(Cesium__namespace[s(407)](t.heading)||Cesium__namespace[s(407)](t.pitch)||Cesium__namespace[s(i._0x5808c0)](t.roll))&&(this._entity.orientation=this[s(i._0x2f2e55)]()),(Cesium__namespace.defined(t.radii_x)||Cesium__namespace[s(407)](t.radii_y)||Cesium__namespace.defined(t.radii_z))&&this[s(i._0x4faa19)](e)}_updatePositionsHook(){const e={_0x262068:4134,_0x3949f6:3782},t={_0x5ada31:4076},i=_0x3a2b68;super._updatePositionsHook(),this[i(e._0x262068)]&&this._entity_scanPlane[i(e._0x3949f6)](s=>{const r=i;s[r(t._0x5ada31)]=this.position})}[_0x3a2b68(1651)](e,t){const i=_0x3a2b68;if(t.scanPlane){this.removeAllScanPlan();const s=e[i(811)];Array.isArray(s)?s.forEach(r=>{this.addScanPlane(r)}):this.addScanPlane(s)}}[_0x3a2b68(1017)](e){const t={_0x425663:1304,_0x109ea8:3675},i=_0x3a2b68;var s;((s=this._entity_scanPlane)===null||s===void 0?void 0:s.length)>0&&this[i(4134)].forEach(r=>{const o=i;!this._updateEntityOpacity(r.ellipsoid,e)&&(r._planeOptions.style.globalAlpha=e,EllipsoidStyleConver[o(t._0x425663)](r[o(t._0x109ea8)].style,r.ellipsoid,!![]))})}updateRadii(e){const t={_0x3e39ba:1891},i=_0x3a2b68,s=new Cesium__namespace.Cartesian3(e[i(t._0x3e39ba)],e[i(4368)],e.radii_z);this.entityGraphic.radii?this[i(3511)].radii.setValue(s):this.entityGraphic[i(718)]=s}_setPositionsToCallback(){const e={_0x18580f:1014,_0x48182c:2748},t={_0x5d728d:2206},i=_0x3a2b68;if(this[i(e._0x18580f)])return;this._isCallbackPositions=!![];const s=getCesiumValue(this[i(3511)].radii,Cesium__namespace.Cartesian3,this._map.clock.currentTime);s&&(this.style.radii_x=this.style[i(1891)]??s.x,this.style.radii_y=this[i(e._0x48182c)].radii_y??s.y,this[i(e._0x48182c)].radii_z=this[i(2748)][i(569)]??s.z),this._positions_draw=this.positions||[],this.position=new Cesium__namespace.CallbackProperty(r=>{const o=i;return this._positions_draw[o(400)]<1?null:this[o(t._0x5d728d)][0]},![])}[_0x3a2b68(2686)](){const e={_0x30eed6:3601,_0x3690c5:2101,_0x34f2e2:4335},t=_0x3a2b68;this._isCallbackPositions&&(this[t(1014)]=![],this._position=this[t(2206)][0],this[t(e._0x30eed6)]=LngLatPoint[t(e._0x3690c5)](this._position),this[t(e._0x34f2e2)]&&this._updatePositionsHook())}_startDrawHook(){const e={_0x5d4981:1840,_0x36e8b9:1575},t=_0x3a2b68;this[t(1575)].on(EventType[t(e._0x5d4981)],this[t(841)],this),this._map.on(EventType.click,this._onClickHandler,this),this[t(1575)].on(this._drawEndEventType,this[t(3767)],this),(this.options.hasDrawDelPoint??!![])&&this[t(e._0x36e8b9)].on(this._drawDelEventType,this._onRightClickHandler,this)}_stopDrawHook(){const e={_0x367b26:1840,_0x18f6a4:1575},t=_0x3a2b68;this[t(1575)].off(EventType[t(e._0x367b26)],this._onMouseMoveHandler,this),this[t(e._0x18f6a4)].off(EventType.click,this._onClickHandler,this),this._map.off(this._drawEndEventType,this._onDbClickHandler,this),(this.options.hasDrawDelPoint??!![])&&this._map.off(this._drawDelEventType,this._onRightClickHandler,this)}updateAttrForDrawing(e){const t={_0x5d62f4:2206,_0x60142a:4368},i=_0x3a2b68;if(!(this._positions_draw.length<2)&&!e){const s=formatNum$1(Cesium__namespace.Cartesian3.distance(this._positions_draw[0],this._positions_draw[1]),2);this.style.radii_x=s,this.style.radii_z=s;let r;this[i(t._0x5d62f4)].length===3?r=formatNum$1(Cesium__namespace.Cartesian3.distance(this._positions_draw[0],this._positions_draw[2]),2):r=s,this.style[i(t._0x60142a)]=r,this.updateRadii(this.style)}}[_0x3a2b68(1932)](e){const t={_0xb849b7:2748},i=_0x3a2b68;super._onRightClickHandler(e),this.style.radii_y=0,this._positions_draw.length===1&&(this.style.radii_x=0,this[i(2748)].radii_z=0),this.updateRadii(this[i(t._0xb849b7)])}[_0x3a2b68(2761)](e={}){const t={_0x9888a1:2748,_0x2c620f:2910,_0x44fac6:2748,_0x5da9a3:3248,_0xbb842:2806,_0x4a8e15:1630,_0x5ced2d:2806,_0x4cc24c:3198,_0xc96df0:2806,_0x27cc9c:1185},i={_0x16556a:2257},s=_0x3a2b68;this[s(4134)]=this._entity_scanPlane||[],e.style=e.style||{};const r={radii:this.entityGraphic[s(718)],innerRadii:1e-5,minimumClockDegree:-1e-5,maximumClockDegree:1e-5,minimumConeDegree:this[s(t._0x9888a1)][s(t._0x2c620f)]||0,maximumConeDegree:this.style.maximumConeDegree||90,outline:![]};this[s(t._0x44fac6)].color?(r.color=this[s(2748)].color,this.style.opacity&&(r[s(t._0x5da9a3)]=this.style.opacity)):this.style.outlineColor&&(r.color=this.style.outlineColor,this.style.outlineOpacity&&(r.opacity=this.style.outlineOpacity));let o;const c=Cesium__namespace.Math.toRadians(e[s(731)]||.5),_=new Cesium__namespace.HeadingPitchRoll(Cesium__namespace.Math.toRadians(e[s(2748)].heading||this.heading),Cesium__namespace.Math.toRadians(e.style.pitch||this.pitch),Cesium__namespace[s(t._0xbb842)].toRadians(e[s(t._0x44fac6)].roll||this.roll));let l=Cesium__namespace[s(3737)].headingPitchRollQuaternion(this[s(4136)],_);switch(e.type){case s(t._0x4a8e15):{const g=Cesium__namespace[s(2806)].toRadians(e.min??0),b=Cesium__namespace[s(t._0x5ced2d)].toRadians(e[s(t._0x4cc24c)]??180);o=new Cesium__namespace.CallbackProperty(C=>{const P=s;return this[P(1575)][P(2257)][P(3356)]&&(_.pitch+=c,_.pitch>=b&&(_.pitch=g),l=Cesium__namespace.Transforms.headingPitchRollQuaternion(this.positionShow,_)),l},![])}break;case"roll":{const g=Cesium__namespace[s(t._0xc96df0)].toRadians(e[s(2501)]??-90),b=Cesium__namespace.Math[s(t._0x27cc9c)](e[s(3198)]??90);o=new Cesium__namespace.CallbackProperty(C=>{const P=s;return this[P(1575)].clock[P(3356)]&&(_.roll+=c,_.roll>=b&&(_.roll=g),l=Cesium__namespace.Transforms.headingPitchRollQuaternion(this.positionShow,_)),l},![])}break;case"heading":default:{const g=Cesium__namespace.Math[s(t._0x27cc9c)](e.min??-180),b=Cesium__namespace.Math.toRadians(e.max??180);o=new Cesium__namespace.CallbackProperty(C=>{const P=s;return this._map[P(i._0x16556a)].shouldAnimate&&(_.heading+=c,_.heading>=b&&(_.heading=g),l=Cesium__namespace.Transforms.headingPitchRollQuaternion(this[P(4136)],_)),l},![]);break}}const d={id:s(4236)+createGuid(),position:this[s(4076)],orientation:o,ellipsoid:EllipsoidStyleConver.toCesiumVal({...r,...e[s(2748)]},{},!![])},f=this[s(1956)](d);return this.dataSource&&this.isAdded&&this.dataSource.entities.add(f),this.bindPickId(f),f._planeOptions=e,this._entity_scanPlane.push(f),f}removeScanPlan(e){const t={_0x4e3789:4326},i=_0x3a2b68;this.dataSource&&this[i(t._0x4e3789)]&&this[i(2848)].entities.remove(e),removeArrayItem(this._entity_scanPlane,e)}removeAllScanPlan(){const e=_0x3a2b68;this[e(2848)]&&this[e(4326)]&&this._entity_scanPlane.forEach(t=>{this.dataSource.entities.remove(t)}),this._entity_scanPlane=[]}}register$4(_0x3a2b68(3404),EllipsoidEntity,!![]);class PolylineEntity extends BasePolyEntity{get entityGraphic(){var e;return(e=this._entity)===null||e===void 0?void 0:e.polyline}[_0x3a2b68(585)](){const e={_0x31ed8e:1772},t=_0x3a2b68;this._positions_show=this.getShowPositions(this.positions);const i={polyline:PolylineStyleConver.toCesiumVal(this[t(2748)],{},!![])};i.polyline.positions=this[t(e._0x31ed8e)],this[t(4335)]=this._createEntity(i),this.style.label&&this._addLabel()}getShowPositions(e){return this.style.closure&&(e==null?void 0:e.length)>0?e.concat(e[0]):e}_style2Json(e,t){return PolylineStyleConver.toJSON(e,t,!![])}[_0x3a2b68(2019)](e,t){const i={_0x47eb0e:407,_0x33bded:1014,_0x33788f:2495,_0x3acef4:3965,_0x569fc4:3511},s=_0x3a2b68;PolylineStyleConver.toCesiumVal(e,this.entityGraphic,!![]),Cesium__namespace[s(i._0x47eb0e)](t==null?void 0:t.closure)&&(!this[s(i._0x33bded)]&&(this._positions_show=this[s(i._0x33788f)](this[s(i._0x3acef4)]),this[s(i._0x569fc4)].positions=this._positions_show),this.updateAttrForDrawing())}_updatePositionsHook(){const e={_0x1ce69a:2191,_0x51ac2f:2206,_0x57e0e2:2694,_0x15867f:2098},t=_0x3a2b68;this._positions instanceof Cesium__namespace[t(e._0x1ce69a)]?(this._positions_draw&&(this._positions_show=this.getShowPositions(this[t(e._0x51ac2f)])),this.entityGraphic.positions=this._positions):(this._positions_show=this.getShowPositions(this._positions),this.entityGraphic[t(e._0x57e0e2)]=this._positions_show),this[t(e._0x15867f)](),this._updateEditDraggers()}[_0x3a2b68(3760)](){return this._positions_show}updateAttrForDrawing(e){const t=_0x3a2b68;Cesium__namespace.defined(this.entityGraphic.depthFailMaterial)&&(this.entityGraphic.positions=this[t(3760)]()),this._positions_show=this[t(2495)](this._positions_draw)}_stopDrawHook(){super._stopDrawHook(),Cesium__namespace.defined(this.entityGraphic.depthFailMaterial)&&(this.positions=this._positions_draw)}[_0x3a2b68(896)](){const e={_0x409e72:3481},t=_0x3a2b68;if(this._isCallbackPositions&&this.style[t(3542)]){let i;const s=this.center;s?i=Cesium__namespace.Cartesian3[t(e._0x409e72)](s,new Cesium__namespace.Cartesian3):i=(Cesium__namespace.Ellipsoid.WGS84.minimumRadius+Cesium__namespace.Ellipsoid.WGS84.maximumRadius)/2,this[t(2266)](i)}else this.updateDistanceDisplayCondition()}}register$4("polyline",PolylineEntity);class CurveEntity extends PolylineEntity{getShowPositions(e){return!e||e[_0x3a2b68(400)]<2?e:getBezierCurve(e,this.style)}}register$4(_0x3a2b68(1189),CurveEntity);class EditPolylineVolume extends EditPoly{}class PolylineVolumeEntity extends BasePolyEntity{get[_0x3a2b68(3511)](){const e={_0x26979d:2897},t=_0x3a2b68;var i;return(i=this._entity)===null||i===void 0?void 0:i[t(e._0x26979d)]}get EditClass(){return EditPolylineVolume}_mountedHook(){const e={_0x263841:2748,_0x5db5c6:4335,_0x46be47:1286},t=_0x3a2b68,i={polylineVolume:PolylineVolumeStyleConver.toCesiumVal(this[t(e._0x263841)],{},!![])};i.polylineVolume.positions=this[t(2694)],this[t(e._0x5db5c6)]=this._createEntity(i),this.style[t(3203)]&&this[t(e._0x46be47)]()}[_0x3a2b68(1338)](e,t){return PolylineVolumeStyleConver.toJSON(e,t,!![])}_updateStyleHook(e,t){const i={_0xbf3c38:3511},s=_0x3a2b68;PolylineVolumeStyleConver.toCesiumVal(e,this[s(i._0xbf3c38)],!![])}_updatePositionsHook(){const e={_0x2e7e5f:2098},t=_0x3a2b68;this.entityGraphic[t(2694)]=this.positions,this[t(e._0x2e7e5f)](),this[t(2754)]()}}register$4("polylineVolume",PolylineVolumeEntity);class PathEntity extends BasePointEntity{constructor(e={}){const t={_0x12d7ab:907},i=_0x3a2b68;super(e),delete this[i(t._0x12d7ab)],this._hasEdit=![]}get entityGraphic(){var e;return(e=this._entity)===null||e===void 0?void 0:e.path}get[_0x3a2b68(447)](){return Cesium__namespace.Property.getValueOrUndefined(this.orientation,this._map.clock.currentTime,new Cesium__namespace.Quaternion)}get hpr(){return getHeadingPitchRollByOrientation(this.positionShow,this.orientationShow)}get[_0x3a2b68(1630)](){return this.style.pitch??0}set pitch(e){const t={_0x4b4ddf:2748},i=_0x3a2b68;this[i(t._0x4b4ddf)].pitch=e,this[i(3013)]()}get[_0x3a2b68(2341)](){return this[_0x3a2b68(2748)].roll??0}set roll(e){const t={_0x3f8e03:2748},i=_0x3a2b68;this[i(t._0x3f8e03)].roll=e,this.updateOrientation()}get positions(){return this[_0x3a2b68({_0xe91859:3965}._0xe91859)]}set positions(e){const t={_0x75de7e:3782,_0x4b494b:4076},i={_0x3a61c0:673,_0xae3d6b:4275},s=_0x3a2b68;if(!e)return;const r=new Cesium__namespace.SampledPositionProperty;e[s(t._0x75de7e)]((o,c)=>{const _=s,l=Cesium__namespace.JulianDate[_(i._0x3a61c0)](new Date(o[3]));r.addSample(l,Cesium__namespace.Cartesian3[_(i._0xae3d6b)](o[0],o[1],o[2]))}),this[s(t._0x4b494b)]=r}get coordinates(){return this[_0x3a2b68(390)]()}_updatePositionsHook(){const e={_0x2dedb8:1098,_0x3b46ea:4076,_0x551dd0:557,_0x3719fc:514},t=_0x3a2b68;if(super._updatePositionsHook(),!this.position||this.position instanceof Cesium__namespace.Cartesian3)this._entity.orientation=void 0,this._entity[t(514)]=void 0;else{var i,s,r;if(this.options._auto_orientation&&(this[t(4335)].orientation=new Cesium__namespace.VelocityOrientationProperty(this.position)),this.options[t(e._0x2dedb8)]&&((i=this[t(e._0x3b46ea)])===null||i===void 0||(s=i._property)===null||s===void 0||(r=s._times)===null||r===void 0?void 0:r.length)>0){var o;const c=this.position[t(3354)][t(2566)],_=c[0];let l=c[c.length-1];((o=this[t(4076)])===null||o===void 0?void 0:o.forwardExtrapolationType)===Cesium__namespace.ExtrapolationType.HOLD&&(l=Cesium__namespace[t(e._0x551dd0)].fromDate(new Date(2100,1,1))),this._entity[t(e._0x3719fc)]=new Cesium__namespace.TimeIntervalCollection([new Cesium__namespace.TimeInterval({start:_,stop:l})])}}}[_0x3a2b68(585)](){const e={_0x1d1356:2710,_0x5b47aa:2710,_0x4689b9:1941,_0x658752:400,_0x4ba66f:673,_0x2ca794:514,_0x5460e4:1636,_0x1a281b:3203,_0x10bdfd:1941,_0x110564:1941,_0x1ca314:3307,_0x1c6cea:1304,_0x4c2de4:3992,_0x46759c:1722,_0x400217:407},t=_0x3a2b68;this[t(4076)]&&!this.options[t(e._0x1d1356)]&&(this[t(1941)][t(e._0x5b47aa)]=new Cesium__namespace.VelocityOrientationProperty(this[t(4076)]),this._auto_orientation=!![]);const i={position:this.position,orientation:this.options.orientation,path:PathStyleConver.toCesiumVal(this.style||this[t(e._0x4689b9)].path,{},!![])};if(!this[t(1941)][t(514)]){var s,r,o;if(((s=this.position)===null||s===void 0||(r=s._property)===null||r===void 0||(o=r._times)===null||o===void 0?void 0:o.length)>0){var c;const l=this.position._property._times,d=l[0];let f=l[l[t(e._0x658752)]-1];((c=this.position)===null||c===void 0?void 0:c.forwardExtrapolationType)===Cesium__namespace[t(4379)].HOLD&&(f=Cesium__namespace.JulianDate[t(e._0x4ba66f)](new Date(2100,1,1))),i[t(e._0x2ca794)]=new Cesium__namespace.TimeIntervalCollection([new Cesium__namespace.TimeInterval({start:d,stop:f})]),this._auto_availability=!![]}else{var _;const l=this._map.clock.currentTime;let d=Cesium__namespace.JulianDate.addDays(l,1,new Cesium__namespace.JulianDate);((_=this.position)===null||_===void 0?void 0:_.forwardExtrapolationType)===Cesium__namespace.ExtrapolationType[t(2452)]&&(d=Cesium__namespace.JulianDate.addDays(d,365,new Cesium__namespace.JulianDate)),i.availability=new Cesium__namespace[t(e._0x5460e4)]([new Cesium__namespace[t(632)]({start:l,stop:d})])}}if(this.options[t(e._0x1a281b)]&&(this[t(e._0x10bdfd)].label[t(3640)]=this[t(e._0x110564)][t(3203)].text||this[t(e._0x1ca314)],i.label=LabelStyleConver.toCesiumVal(this.options[t(3203)])),this.options.billboard&&(i[t(2009)]=BillboardStyleConver[t(1304)](this.options.billboard)),this[t(e._0x110564)].point&&(i.point=PointStyleConver.toCesiumVal(this.options.point)),this.options.circle&&(i.ellipse=CircleStyleConver[t(e._0x1c6cea)](this[t(1941)].circle,{},!![])),this[t(1941)][t(e._0x4c2de4)]){i[t(e._0x4c2de4)]=ModelStyleConver[t(e._0x1c6cea)](this.options[t(3992)],{},!![]);const l=this.options.model;(l[t(e._0x46759c)]||Cesium__namespace.defined(l.heading)||Cesium__namespace.defined(l.pitch)||Cesium__namespace[t(e._0x400217)](l[t(2341)]))&&(i.orientation=new Cesium__namespace.CallbackProperty(d=>this._getCustomQuaternion(this.position,this.options.orientation),![]))}this._entity=this._createEntity(i)}_getCustomQuaternion(e,t){const i={_0x45b5b7:3479,_0x318d96:1941,_0x199a98:2806,_0x2c69cd:2341,_0x32d5be:1722,_0x231ba9:3737},s=_0x3a2b68;var r,o;if(e.getValue){var c,_;e=e[s(3479)]((c=this._map)===null||c===void 0||(_=c.clock)===null||_===void 0?void 0:_.currentTime)}if(t.getValue){var l,d;t=t[s(i._0x45b5b7)]((l=this[s(1575)])===null||l===void 0||(d=l.clock)===null||d===void 0?void 0:d[s(545)])}const f=this[s(i._0x318d96)].model;let g=Cesium__namespace.Math.toRadians(f[s(2782)]||0),b=Cesium__namespace[s(i._0x199a98)].toRadians(f.pitch||0),C=Cesium__namespace[s(2806)][s(1185)](f[s(i._0x2c69cd)]||0);if(t){const P=getHeadingPitchRollByOrientation(e,t);f[s(i._0x32d5be)]?(g+=P.heading,C+=P[s(2341)],b+=P.pitch):(!Cesium__namespace.defined(f.heading)&&(g=P.heading),!Cesium__namespace.defined(f.roll)&&(C=P.roll),!Cesium__namespace.defined(f.pitch)&&(b=P.pitch))}return Cesium__namespace[s(i._0x231ba9)][s(1623)](e,new Cesium__namespace.HeadingPitchRoll(g,b,C),(r=this._map)===null||r===void 0||(o=r.scene)===null||o===void 0?void 0:o.globe.ellipsoid)}_initSampledPositionProperty(){const e={_0x2c6c39:4379,_0x22fdb3:2452,_0x53b292:4335,_0x265db0:1575},t=_0x3a2b68;if(this.options){if(this[t(978)]=this.options.maxCacheCount??50,!this.position){const s=new Cesium__namespace.SampledPositionProperty(this.options.referenceFrame);if(s.forwardExtrapolationType=this.options.forwardExtrapolationType??Cesium__namespace[t(e._0x2c6c39)][t(e._0x22fdb3)],s.backwardExtrapolationType=this.options.backwardExtrapolationType??Cesium__namespace.ExtrapolationType[t(2452)],!this[t(1941)].orientation&&(this.options.orientation=new Cesium__namespace.VelocityOrientationProperty(s),this._entity&&(this[t(e._0x53b292)].orientation=this.getOrientation())),this._entity&&!this._entity.availability&&this._map){var i;const r=this[t(e._0x265db0)].clock.currentTime;let o=Cesium__namespace.JulianDate.addDays(r,1,new Cesium__namespace[t(557)]);((i=this.position)===null||i===void 0?void 0:i.forwardExtrapolationType)===Cesium__namespace.ExtrapolationType.HOLD&&(o=Cesium__namespace.JulianDate.addDays(o,365,new Cesium__namespace.JulianDate)),this._entity.availability=new Cesium__namespace.TimeIntervalCollection([new Cesium__namespace.TimeInterval({start:r,stop:o})])}this.position=s}this.property=this.position}}_updateStyleHook(e,t){const i={_0x4ac451:3511},s=_0x3a2b68;PathStyleConver.toCesiumVal(e,this[s(i._0x4ac451)],{},!![])}[_0x3a2b68(1338)](e,t){return PathStyleConver[_0x3a2b68({_0x57457a:1909}._0x57457a)](e,t,!![])}_getGeoJsonGeometry(e){return{type:_0x3a2b68(4166),coordinates:this.getCoordinates(e==null?void 0:e.noAlt)}}_getJsonPositions(e){e.positions=this.getCoordinates()}_toJSON_Ex(e){const t={_0x35bbac:3203,_0x2c6774:1941,_0x4a86c0:1941},i=_0x3a2b68;this.options.label&&(e[i(t._0x35bbac)]={},LabelStyleConver.toJSON(this.options.label,e.label,!![])),this[i(t._0x2c6774)][i(3992)]&&(e[i(3992)]={},ModelStyleConver[i(1909)](this.options.model,e.model,!![])),this[i(t._0x4a86c0)].billboard&&(e.billboard={},BillboardStyleConver.toJSON(this.options.billboard,e.billboard,!![])),this.options[i(2879)]&&(e[i(2879)]={},PointStyleConver.toJSON(this.options[i(2879)],e.point,!![])),this.options.circle&&(e.circle={},CircleStyleConver.toJSON(this.options.circle,e.circle,!![]))}_setOptionsHook(e,t){const i={_0x2c2457:3992,_0x334007:1304,_0x599a69:2879},s=_0x3a2b68;t[s(3203)]&&LabelStyleConver.toCesiumVal(e.label,this._entity.label,this),t[s(i._0x2c2457)]&&ModelStyleConver[s(i._0x334007)](e[s(3992)],this._entity.model,!![]),t.billboard&&BillboardStyleConver.toCesiumVal(e[s(2009)],this._entity[s(2009)],!![]),t.point&&PointStyleConver.toCesiumVal(e.point,this._entity[s(i._0x599a69)],!![]),t.circle&&CircleStyleConver.toCesiumVal(e.circle,this._entity.ellipse,!![])}[_0x3a2b68(1017)](e){const t={_0x1a8024:1948,_0x4bb6bf:2009,_0x4ca783:2092,_0x3367f8:1304,_0x28f33d:2879,_0x485dd5:3811,_0x4072f8:3114,_0x2b4b27:4335},i=_0x3a2b68;this[i(4335)][i(3992)]&&(this._entity.model.color=Cesium__namespace.Color[i(t._0x1a8024)].withAlpha(e)),this._entity.billboard&&(this[i(4335)][i(t._0x4bb6bf)].color=Cesium__namespace[i(t._0x4ca783)].WHITE.withAlpha(e)),this._entity.point&&!this._updateEntityOpacity(this._entity.point,e)&&PointStyleConver[i(t._0x3367f8)]({...this.options.point,globalAlpha:e},this._entity[i(t._0x28f33d)],!![]),this._entity[i(t._0x485dd5)]&&!this[i(t._0x4072f8)](this[i(4335)][i(3811)],e)&&CircleStyleConver[i(1304)]({...this.options.circle,globalAlpha:e},this[i(t._0x2b4b27)].ellipse,!![])}getIndex(e){const t={_0x540e06:3354},i=_0x3a2b68;var s,r,o,c;const _=(s=this.position)===null||s===void 0||(r=s[i(t._0x540e06)])===null||r===void 0?void 0:r._times,l=_.length;if(l===0)return 0;const d=e||((o=this._map)===null||o===void 0||(c=o.clock)===null||c===void 0?void 0:c.currentTime)||Cesium__namespace.JulianDate.now();let f=Cesium__namespace.binarySearch(_,d,Cesium__namespace[i(557)].compare);return f<0&&(f=~f),f<0&&(f=0),f>=l&&(f=l-1),f}getRectangle(e){const t={_0x486bd4:4076,_0x5997c3:2990,_0x634e0b:4041},i=_0x3a2b68;var s,r,o,c;const _=(s=this.position)===null||s===void 0||(r=s[i(3354)])===null||r===void 0?void 0:r._times,l=(o=this[i(t._0x486bd4)])===null||o===void 0||(c=o._property)===null||c===void 0?void 0:c[i(t._0x5997c3)];if(!_||_.length===0)return;const d=[];for(let g=0,b=_.length;g<b;g++)d.push(new Cesium__namespace.Cartesian3(l[g*3],l[g*3+1],l[g*3+2]));return getRectangle(d,e==null?void 0:e[i(t._0x634e0b)])}[_0x3a2b68(390)](e){const t={_0x5d8b81:3354,_0x5e0c86:2566},i=_0x3a2b68;var s,r,o,c;const _=(s=this.position)===null||s===void 0||(r=s[i(t._0x5d8b81)])===null||r===void 0?void 0:r[i(t._0x5e0c86)],l=(o=this.position)===null||o===void 0||(c=o._property)===null||c===void 0?void 0:c._values;if(!_||_.length===0)return[];const d=[];for(let f=0,g=_.length;f<g;f++){const b=LngLatPoint[i(2101)](new Cesium__namespace.Cartesian3(l[f*3],l[f*3+1],l[f*3+2])),C=b.toArray(e);C.push(Cesium__namespace.JulianDate.toDate(_[f]).getTime()),d.push(C)}return d}flyToPoint(e={}){const t={_0x33e25f:583,_0x3439f8:2782,_0x4ca47f:417},i=_0x3a2b68;if(!this._map)return Promise[i(t._0x33e25f)](![]);const s=this.positionShow;if(!s)return Promise.resolve(![]);let r;if(Cesium__namespace.defined(e[i(t._0x3439f8)])){var o;r=e.heading+Cesium__namespace.Math[i(3501)](((o=this[i(t._0x4ca47f)])===null||o===void 0?void 0:o.heading)||0)}return this._map.flyToPoint(s,{...e,heading:r})}}register$4("path",PathEntity,!![]);class EditCorridor extends EditPoly{updatePositionsHeightByAttr(e){const t={_0x3087d0:3511,_0x34ce3a:4241},i=_0x3a2b68;if(this[i(t._0x3087d0)].height!==void 0){const s=getCesiumValue(this.entityGraphic[i(t._0x34ce3a)],Number,this._map[i(2257)].currentTime);e=setPositionsHeight(e,s)}return e}[_0x3a2b68(4220)](e){return this.clampToGround&&(e.position=getSurfacePosition(this._map.scene,e.position)),super.createDragger(e)}[_0x3a2b68(1515)](e){const t=_0x3a2b68;if(this.clampToGround)return;const i=Cesium__namespace[t(2228)].fromCartesian(e)[t(4241)];this[t(3511)].height=i,this[t(2748)][t(4241)]=this[t(3657)](i,2)}_updateHeight(e){const t={_0x2ef8a2:3657},i=_0x3a2b68;this[i(3511)].height=e,this.style.height=this[i(t._0x2ef8a2)](e,2);const s=this.positions;for(let r=0,o=s.length;r<o;r++)s[r]=setPositionsHeight(s[r],e);for(let r=0,o=this.draggers.length;r<o;r++){const c=this.draggers[r];c.position=setPositionsHeight(c.position,e)}this.fire(EventType.editStyle)}}class CorridorEntity extends BasePolyEntity{get entityGraphic(){var e;return(e=this._entity)===null||e===void 0?void 0:e.corridor}get EditClass(){return EditCorridor}_mountedHook(){const e={_0x34f529:2694,_0x503745:2694,_0x183e06:3203},t=_0x3a2b68,i={corridor:CorridorStyleConver.toCesiumVal(this.style,{},!![])};i.corridor[t(e._0x34f529)]=this[t(e._0x503745)],this._entity=this[t(1956)](i),this.style[t(e._0x183e06)]&&this._addLabel()}[_0x3a2b68(1338)](e,t){return CorridorStyleConver[_0x3a2b68(1909)](e,t,!![])}[_0x3a2b68(2019)](e,t){const i={_0x19d82b:1882,_0x4879f1:2859},s=_0x3a2b68;CorridorStyleConver[s(1304)](e,this.entityGraphic,!![]),t&&(Cesium__namespace.defined(t[s(i._0x19d82b)])||Cesium__namespace.defined(t.height))&&this[s(i._0x4879f1)]()}_updatePositionsHook(){const e={_0x264b40:2694,_0x5aa777:2098},t=_0x3a2b68;this.entityGraphic.positions=this[t(e._0x264b40)],this[t(e._0x5aa777)](),this._updateEditDraggers()}_updateHeight(e=!![]){const t={_0x57d5f7:4241,_0x486f70:407,_0x12de62:1882},i=_0x3a2b68;if(this.style.clampToGround)return;let s=0;e&&Cesium__namespace.defined(this.style.height)?s=this[i(2748)].height:s=getMaxHeight(this._positions_draw||this._positions),this.entityGraphic.height=s,this.style[i(t._0x57d5f7)]=s,Cesium__namespace.defined(this[i(2748)].diffHeight)&&(Cesium__namespace[i(t._0x486f70)](this.style.diffHeight)&&this.style[i(t._0x12de62)]!==0?this.entityGraphic.extrudedHeight=s+this.style[i(t._0x12de62)]:this[i(3511)].extrudedHeight=void 0)}updateAttrForDrawing(e){const t={_0x578072:2748,_0x1bdb28:407,_0x29d774:360},i=_0x3a2b68;if(e)this._updateHeight();else if(!this.style.clampToGround){const s=getMaxHeight(this._positions_draw);s!==0&&(this.entityGraphic.height=s,this[i(t._0x578072)].height=s,Cesium__namespace[i(t._0x1bdb28)](this.style.diffHeight)&&(Cesium__namespace.defined(this.style.diffHeight)&&this.style.diffHeight!==0?this[i(3511)].extrudedHeight=s+Number(this[i(2748)].diffHeight):this.entityGraphic[i(t._0x29d774)]=void 0))}}}register$4("corridor",CorridorEntity);class EditWall extends EditPoly{bindDraggers(){const e={_0x1cd27a:2611,_0x41732d:4320},t={_0x5ab6f8:437,_0x7c3a90:1191},i=_0x3a2b68,s=this[i(2694)],r=this.style,o=this.hasMidPoint;for(let c=0,_=s.length;c<_;c++){const l=s[c],d=this.createDragger({position:l,onDrag:(f,g)=>{const b=i;s[f.index]=g,this._heightDraggers&&this._heightDraggers.length>0&&(this[b(t._0x5ab6f8)][f.index].position=addPositionsHeight(g,r[b(1882)])),o&&(f[b(1191)]>0&&(this[b(4320)][f.index*2-1].position=getMidpoint(g,s[f[b(t._0x7c3a90)]-1],new Cesium__namespace.Cartesian3)),f[b(1191)]<s[b(400)]-1&&(this.draggers[f.index*2+1].position=getMidpoint(g,s[f[b(1191)]+1])));const C=centerOfMass(s);this._draggerMove.position=C}});if(d.index=c,this[i(4320)].push(d),this.hasMidPoint&&(this.hasClosure||!this[i(e._0x1cd27a)]&&c<_-1)){const f=(c+1)%_,g=getMidpoint(l,s[f]),b=this.createDragger({position:g,type:PointType[i(4336)],tooltip:this._map.getLangText("_增加点"),onDragStart:(C,P)=>{const S=i;this.positions.splice(C[S(1191)],0,P),this.updateAttrForEditing()},onDrag:(C,P)=>{this.positions[C.index]=P},onDragEnd:(C,P)=>{this._fireAddPoint(C,P),this.updateDraggers()}});b.index=f,this[i(e._0x41732d)].push(b)}}this[i(4062)](),this._bindHeightDraggers()}[_0x3a2b68(2525)](){const e={_0x5c3649:3710,_0x36ba6b:533,_0x2c252c:1147},t={_0x581e18:2748,_0x218173:4029},i=_0x3a2b68;if(!this._graphic[i(e._0x5c3649)])return;this._heightDraggers=[];const s=this.positions,r=Number(this.style[i(1882)]);for(let o=0,c=s.length;o<c;o++){const _=addPositionsHeight(s[o],r),l=this.createDragger({position:_,type:PointType[i(e._0x36ba6b)],tooltip:this[i(1575)][i(3600)](i(e._0x2c252c)),onDrag:(d,f)=>{const g=i,b=Cesium__namespace.Cartographic.fromCartesian(f).height;this.style[g(1882)]=formatNum$1(b-this[g(4227)]._minimumHeights[d.index],2);for(let C=0;C<s.length;C++)C!==d.index&&(this[g(437)][C].position=addPositionsHeight(s[C],this[g(t._0x581e18)].diffHeight));this[g(t._0x218173)](),this.fire(EventType.editStyle)}});l[i(1191)]=o,this.draggers.push(l),this[i(437)].push(l)}}}class WallEntity extends BasePolyEntity{get[_0x3a2b68(3511)](){var e;return(e=this._entity)===null||e===void 0?void 0:e.wall}get[_0x3a2b68(1746)](){return EditWall}_mountedHook(){const e={_0x3147e5:1882,_0xbe132:2748,_0x5a901c:2748},t=_0x3a2b68;var i;this.style[t(1882)]=this[t(2748)][t(e._0x3147e5)]||100;const s={wall:WallStyleConver.toCesiumVal(this.style,{},!![])};this.style[t(4121)]&&((i=this.positions)===null||i===void 0?void 0:i.length)>0?s.wall[t(2694)]=this[t(2694)][t(4083)](this[t(2694)][0]):s.wall.positions=this.positions,(!this[t(e._0xbe132)].maximumHeights||!this.style[t(1521)])&&this._updateMaxMinHeights(s),this._entity=this._createEntity(s),this[t(e._0x5a901c)].label&&this._addLabel()}[_0x3a2b68(1338)](e,t){return WallStyleConver.toJSON(e,t,!![])}_updateStyleHook(e,t){WallStyleConver.toCesiumVal(e,this.entityGraphic,!![]),Cesium__namespace.defined(t.closure)&&this._updatePositionsHook(),Cesium__namespace.defined(t==null?void 0:t.diffHeight)&&this._updateMaxMinHeights(this._entity)}[_0x3a2b68(4145)](){const e={_0x435928:2694,_0x215173:2748,_0x2ef24c:4335},t=_0x3a2b68;var i;this.style.closure&&((i=this.positions)===null||i===void 0?void 0:i.length)>0?this.entityGraphic.positions=this[t(e._0x435928)].concat(this.positions[0]):this.entityGraphic.positions=this.positions,(!this[t(2748)].maximumHeights||!this[t(e._0x215173)].minimumHeights)&&this._updateMaxMinHeights(this[t(e._0x2ef24c)]),this._updateLabelPosition(),this._updateEditDraggers()}[_0x3a2b68(763)](e){const t={_0x41928d:1691,_0x5ed916:2191},i=_0x3a2b68,s=this[i(4274)];if(!s||s.length===0)return;const r=s.length,o=new Array(r),c=new Array(r);for(let _=0;_<r;_++){const l=s[_].alt;o[_]=l,this.style.fixedTop?c[_]=s[0].alt+this[i(2748)][i(1882)]:c[_]=l+this.style.diffHeight}this.style.closure&&r>0&&(o[i(1754)](o[0]),c.push(c[0])),this[i(3604)]=o,this._maximumHeights=c,e&&(!(e[i(t._0x41928d)].minimumHeights instanceof Cesium__namespace.CallbackProperty)&&(e.wall[i(1521)]=o),!(e.wall.maximumHeights instanceof Cesium__namespace[i(t._0x5ed916)])&&(e.wall.maximumHeights=c))}_setPositionsToCallback(){const e={_0x31ec84:1014,_0x1f31cd:2872},t=_0x3a2b68;this[t(e._0x31ec84)]||(super._setPositionsToCallback(),this.entityGraphic.minimumHeights=new Cesium__namespace.CallbackProperty(i=>this._minimumHeights,![]),this.entityGraphic[t(e._0x1f31cd)]=new Cesium__namespace.CallbackProperty(i=>this._maximumHeights,![]))}[_0x3a2b68(3760)](){const e={_0x25de36:400},t=_0x3a2b68;var i;return this.style.closure&&((i=this._positions_draw)===null||i===void 0?void 0:i[t(e._0x25de36)])>0?this._positions_draw.concat(this._positions_draw[0]):this._positions_draw}_cancelPositionsCallback(){const e={_0x267ab5:1406},t=_0x3a2b68;this._isCallbackPositions&&(super._cancelPositionsCallback(),this._entity&&(this.entityGraphic.minimumHeights=this._minimumHeights,this.entityGraphic.maximumHeights=this[t(e._0x267ab5)]))}updateAttrForDrawing(e){this._updateMaxMinHeights(this._entity)}}register$4(_0x3a2b68(1691),WallEntity);class EditRectangle extends EditPoly{bindDraggers(){const e={_0x597dc9:3511,_0x4d5bb6:360},t={_0xa9306e:3511,_0xf95be:2694,_0x346e4d:2694},i=_0x3a2b68,s=this.positions;for(let r=0,o=s[i(400)];r<o;r++){const c=this.updatePositionsHeightByAttr(s[r]),_=this.createDragger({position:c,onDrag:(l,d)=>{const f=i,g=this[f(1575)].clock.currentTime,b=getCesiumValue(this[f(t._0xa9306e)][f(4241)],Number,g);if(this[f(t._0xf95be)][l.index]=d,this.entityGraphic.height!==void 0)for(let P=0,S=this.draggers.length;P<S;P++){const L=this.draggers[P],E=setPositionsHeight(this[f(t._0x346e4d)][L.index],b);L.position=E,this.positions[L.index]=E}if(this._heightDraggers&&this._heightDraggers.length>0){const P=getCesiumValue(this.entityGraphic.extrudedHeight,Number,g);this._heightDraggers[l.index][f(4076)]=setPositionsHeight(d,P)}let C=centerOfMass(this.positions);C=this.updatePositionsHeightByAttr(C),this._draggerMove.position=C}});_.index=r,this.draggers.push(_)}this._bindMoveAllDragger(),this[i(e._0x597dc9)][i(e._0x4d5bb6)]&&this._bindHeightDraggers()}updatePositionsHeightByAttr(e){const t={_0x56e64a:4241,_0x407d50:3511},i=_0x3a2b68;if(this[i(3542)]&&(e=getSurfacePosition(this._map.scene,e)),this.entityGraphic[i(t._0x56e64a)]!==void 0){const s=getCesiumValue(this[i(t._0x407d50)].height,Number,this._map.clock.currentTime);e=setPositionsHeight(e,s)}return e}_updateHeight(e){const t={_0x2a92e1:2748,_0x55dc94:4241,_0x597037:2694,_0x4f764f:400,_0x419087:1109,_0x437a9d:1410},i=_0x3a2b68;this.entityGraphic.height=e,this[i(t._0x2a92e1)][i(t._0x55dc94)]=this.formatNum(e,2);const s=this[i(t._0x597037)];for(let r=0,o=s[i(t._0x4f764f)];r<o;r++)s[r]=setPositionsHeight(s[r],e);for(let r=0,o=this.draggers[i(400)];r<o;r++){const c=this.draggers[r];c.position=setPositionsHeight(c[i(4076)],e)}this[i(t._0x419087)](EventType[i(t._0x437a9d)])}}class RectangleEntity extends BasePolyEntity{constructor(e={}){const t={_0x4c7937:1678,_0x375ca3:918},i=_0x3a2b68;super(e),this._minPointNum=2,this[i(t._0x4c7937)]=2,this._clampToGround_reload=!![],this.options.rectangle?this._rectangle=this.options.rectangle:this.options[i(t._0x375ca3)]&&(this[i(3417)]=this.options[i(918)])}get[_0x3a2b68(3511)](){const e=_0x3a2b68;var t;return(t=this[e(4335)])===null||t===void 0?void 0:t.rectangle}get EditClass(){return EditRectangle}get center(){const e={_0x18b202:1983},t=_0x3a2b68,i=getCesiumValue(this.rectangle);return i?Cesium__namespace.Cartographic.toCartesian(Cesium__namespace[t(e._0x18b202)].center(i)):null}get outlinePositions(){return this._entity&&(this._outlinePositions=getOutlinePositions(this._entity)),this._outlinePositions}set outlinePositions(e){this._outlinePositions=e}get outlineCoordinates(){return cartesians2lonlats(this[_0x3a2b68({_0x532aaf:719}._0x532aaf)])}get[_0x3a2b68(1531)](){const e={_0x42278f:1983},t=_0x3a2b68;return!this._rectangle&&this.positions&&(this._rectangle=Cesium__namespace[t(e._0x42278f)].fromCartesianArray(this.positions)),this._rectangle}set rectangle(e){const t=_0x3a2b68;var i;(i=this[t(770)])!==null&&i!==void 0&&i.enabled&&!(e instanceof Cesium__namespace.CallbackProperty)?this._rectangle_draw=e:(this._rectangle=e,this._entity&&(this.entityGraphic.coordinates=e))}get points(){const e={_0x248a0f:2206,_0xe8c5ea:2206,_0x8dce7:3479},t=_0x3a2b68,i=[];let s;return this[t(e._0x248a0f)]?s=this[t(e._0xe8c5ea)]:this._positions[t(e._0x8dce7)]?s=this._positions[t(e._0x8dce7)]():s=this._positions,!s&&(s=getOutlinePositions(this._entity,![])),s.forEach(function(r){const o=LngLatPoint.parse(r);!o||!o.valid()||i.push(o)}),this[t(2967)]=i,this._points}get distance(){return getDistance(this.outlinePositions,!![])}get area(){return getSurfaceArea(this.outlinePositions)}getEntityPositions(){const e={_0x26e876:2978,_0x2ab83e:1339},t=_0x3a2b68;if(!this._entity.rectangle)return null;const i=getCesiumValue(this._entity.rectangle[t(918)],Cesium__namespace.Rectangle),s=getCesiumValue(this._entity[t(1531)].height,Number)||0,r=Cesium__namespace[t(e._0x26e876)].fromRadians(i.west,i.south,s),o=Cesium__namespace.Cartesian3[t(e._0x2ab83e)](i.east,i.north,s);return[r,o]}_mountedHook(){const e={_0xd1fb25:1304,_0x27bad8:2748,_0x279249:918,_0x7dc950:3511},t={_0x2d8df4:3965,_0x13d773:400,_0x4003e1:3417},i=_0x3a2b68,s={rectangle:RectangleStyleConver[i(e._0xd1fb25)](this[i(e._0x27bad8)],{},!![])};s.rectangle.coordinates=this.rectangle,this._positions instanceof Cesium__namespace.CallbackProperty&&(s.rectangle[i(e._0x279249)]=new Cesium__namespace.CallbackProperty(r=>{const o=i,c=this[o(t._0x2d8df4)].getValue(r);return c&&c[o(t._0x13d773)]>0?(this[o(3417)]=Cesium__namespace.Rectangle.fromCartesianArray(c),this[o(t._0x4003e1)]):void 0},![])),this._entity=this._createEntity(s),this._updateHeight(),this[i(2242)](this[i(2603)](),this.style),this._entity_outlines&&this[i(e._0x7dc950)][i(e._0x279249)]instanceof Cesium__namespace.CallbackProperty&&this._updateOutlineToCallback(),this.style.label&&this[i(1286)]()}[_0x3a2b68(1338)](e,t){return RectangleStyleConver[_0x3a2b68(1909)](e,t,!![])}_updateStyleHook(e,t){const i=_0x3a2b68;RectangleStyleConver.toCesiumVal(e,this[i(3511)],!![]),(Cesium__namespace[i(407)](t[i(1882)])||Cesium__namespace.defined(t.height))&&this[i(2859)]()}_updatePositionsHook(){const e={_0x50ff0b:2206},t=_0x3a2b68;this.positions?this.rectangle=Cesium__namespace.Rectangle.fromCartesianArray(this.positions):this._rectangle_draw=Cesium__namespace.Rectangle.fromCartesianArray(this[t(e._0x50ff0b)]),this.outlinePositions=getOutlinePositions(this._entity),this._updateOutlineStyle(this._getOutlinePositions(),this.style),this._updateLabelPosition(),this._updateHeight(),this._updateEditDraggers()}[_0x3a2b68(1079)](e,t){const i=super._getOutlineStyle(e,t);return i.arcType=Cesium__namespace.ArcType.RHUMB,i}_getOutlinePositions(){return[this.outlinePositions]}toGeoJSON(e){return super.toGeoJSON(e)}_getGeoJsonGeometry(e){const t={_0x3af094:2909,_0x5ea6e6:4166},i=_0x3a2b68;return e!=null&&e.outline?{type:i(t._0x3af094),coordinates:[this[i(2181)](e==null?void 0:e.closure,e==null?void 0:e.noAlt)]}:{type:i(t._0x5ea6e6),coordinates:this.getCoordinates(e==null?void 0:e.noAlt)}}[_0x3a2b68(3358)](){const e={_0x5b4b22:2206,_0x59fdbf:2694},t=_0x3a2b68;if(this._isCallbackPositions)return;this._isCallbackPositions=!![];const i=this.positions;i?(i instanceof Cesium__namespace.CallbackProperty?this[t(e._0x5b4b22)]=this.getEntityPositions():this._positions_draw=this[t(e._0x59fdbf)],this._rectangle_draw=Cesium__namespace.Rectangle.fromCartesianArray(this[t(2206)])):(this._positions_draw=[],this._rectangle_draw=null),this.rectangle=new Cesium__namespace.CallbackProperty(s=>this._rectangle_draw,![]),this._updateOutlineToCallback()}_cancelPositionsCallback(){const e={_0x667f18:1014,_0x1b2737:2206,_0x15431d:2206,_0x30b7c9:4335,_0x134825:2100},t=_0x3a2b68;this[t(e._0x667f18)]&&(this._isCallbackPositions=![],this._positions=this[t(e._0x1b2737)],this._rectangle=this._rectangle_draw,delete this[t(e._0x15431d)],delete this._rectangle_draw,this[t(e._0x30b7c9)]&&(this.entityGraphic.coordinates=this._rectangle,this[t(e._0x134825)]()))}updateAttrForDrawing(e){const t={_0x27bc69:3484,_0xf35203:4335},i=_0x3a2b68;this[i(t._0x27bc69)]=Cesium__namespace.Rectangle.fromCartesianArray(this._positions_draw),this._entity_outlines&&(this[i(3568)](),this._outlinePositions=getOutlinePositions(this[i(t._0xf35203)])),this[i(2859)](![])}_updateHeight(e=!![]){const t={_0x35de8e:3965,_0x4116d7:4241,_0x5360e9:1109},i=_0x3a2b68;if(this.style.clampToGround)return;let s=0;e&&Cesium__namespace.defined(this.style.height)?s=this.style.height:s=getMaxHeight(this._positions_draw||this[i(t._0x35de8e)]),this.entityGraphic[i(t._0x4116d7)]=s,this.style.height=s,Cesium__namespace.defined(this.style.diffHeight)&&(Cesium__namespace.defined(this.style[i(1882)])&&this.style.diffHeight!==0?this.entityGraphic.extrudedHeight=s+this.style.diffHeight:this.entityGraphic.extrudedHeight=void 0),this[i(t._0x5360e9)](EventType[i(1410)])}getOutlinePositions(e){return getOutlinePositions(this[_0x3a2b68(4335)],e)}[_0x3a2b68(2181)](e,t){return cartesians2lonlats(this.getOutlinePositions(e),t)}[_0x3a2b68(1737)](e){const t={_0x333f57:4041},i=_0x3a2b68,s=this._rectangle_draw||this.rectangle;return e!=null&&e[i(t._0x333f57)]?formatRectangle(s):s}isInPoly(e){const t={_0x2ca853:1983},i=_0x3a2b68;var s;const r=getCesiumValue((s=this._entity.rectangle)===null||s===void 0?void 0:s.coordinates,Cesium__namespace[i(t._0x2ca853)]);return Cesium__namespace.Rectangle.contains(r,LngLatPoint.parse(e).toCartographic())}flyTo(e={}){const t={_0x510776:2748,_0x1bd508:3970},i=_0x3a2b68;if(this._map)return e.clampToGround=this[i(t._0x510776)].clampToGround,this._map[i(t._0x1bd508)](getCesiumValue(this.rectangle,Cesium__namespace.Rectangle),e),this}}register$4(_0x3a2b68(1531),RectangleEntity);function getOutlinePositions(n,e=!![]){const t={_0x3649be:1983},i=_0x3a2b68;if(!n||!n[i(1531)])return[];const s=getCesiumValue(n.rectangle.coordinates,Cesium__namespace[i(t._0x3649be)]);if(!s)return[];const r=getCesiumValue(n.rectangle.rotation,Number)||0,o=getCesiumValue(n[i(1531)].height,Number)||0,c=getRectangleOuterPositions({rectangle:s,rotation:r,height:o});return e&&c[i(1754)](c[0]),c}function getAllPositions(n){const e=_0x3a2b68,t=getCesiumValue(n.polygon.hierarchy,Cesium__namespace[e(2004)]);return getHierarchyVal(t)}function getPositions(n,e){const t={_0x142cc9:2206},i=_0x3a2b68;if(!e&&n[i(t._0x142cc9)]&&n._positions_draw.length>0)return n._positions_draw;let s=getCesiumValue(n[i(4383)].hierarchy,Cesium__namespace[i(2004)]);return s&&s instanceof Cesium__namespace.PolygonHierarchy&&(s=s.positions),s}function getHolesPositions(n){const e=getCesiumValue(n.polygon.hierarchy,Cesium__namespace.PolygonHierarchy),t=getHierarchyVal(e);return t.length>1?t.slice(1):null}function getHierarchyVal(n){const e={_0x216b9d:2694},t=_0x3a2b68;if(!n)return[];if(n&&n instanceof Cesium__namespace.PolygonHierarchy){let i=[n[t(e._0x216b9d)]];for(let s=0,r=n.holes.length;s<r;s++){const o=n[t(1288)][s];i=i.concat(getHierarchyVal(o))}return i}else return[n]}function getPolygonHierarchy(n,e){const t={_0x2aea02:2004},i=_0x3a2b68;if(n.length===0)return new Cesium__namespace[i(t._0x2aea02)];const s=[];if(n[i(400)]>1)for(let c=1,_=n.length;c<_;c++)s.push(new Cesium__namespace.PolygonHierarchy(lonlats2cartesians(n[c],e)));const r=n[0];return new Cesium__namespace.PolygonHierarchy(lonlats2cartesians(r,e),s)}function getPolygonHierarchy2(n){const e={_0x1b05ae:400,_0x49a22e:2249},t=_0x3a2b68;if(n[t(400)]===0)return new Cesium__namespace.PolygonHierarchy;const i=[];if(n[t(e._0x1b05ae)]>1)for(let o=1,c=n.length;o<c;o++)i.push(new Cesium__namespace.PolygonHierarchy(LngLatArray[t(e._0x49a22e)](n[o])));const s=n[0];return new Cesium__namespace.PolygonHierarchy(LngLatArray[t(2249)](s),i)}class EditPolygon extends EditPoly{get[_0x3a2b68(2611)](){return this._graphic.hasClosure??!![]}get clampToGround(){const e={_0x3b4d52:2748},t=_0x3a2b68;var i,s;return this[t(e._0x3b4d52)].clampToGround??!getCesiumValue((i=this._graphic)===null||i===void 0||(s=i.entityGraphic)===null||s===void 0?void 0:s[t(1856)],Boolean)}bindDraggers(){const e=_0x3a2b68;var t;if(super.bindDraggers(),((t=this._graphic[e(732)])===null||t===void 0?void 0:t.length)>0)for(let i=0,s=this[e(4227)]._draw_holes.length;i<s;i++)this.bindHolesDraggers(this._graphic._draw_holes[i],i)}bindHolesDraggers(e,t){const i={_0x1919d1:400,_0x2ca6e4:2611,_0x58b664:4220,_0x12d66f:1797},s={_0x2d33bb:3234},r=_0x3a2b68;for(let o=0,c=e[r(i._0x1919d1)];o<c;o++){const _=this[r(1317)](e[o]),l=this.createDragger({position:_,onDrag:(d,f)=>{f=this.updatePositionsHeightByAttr(f),d.position=f,e[d.index]=f},onDragEnd:(d,f)=>{this[r(s._0x2d33bb)]()}});if(l.index=o,this.draggers.push(l),this[r(2746)]&&(this.hasClosure||!this[r(i._0x2ca6e4)]&&o<c-1)){const d=(o+1)%c;let f=getMidpoint(_,e[d]);f=this.updatePositionsHeightByAttr(f);const g=this[r(i._0x58b664)]({position:f,type:PointType.AddMidPoint,tooltip:this._map.getLangText(r(i._0x12d66f)),onDragStart:(b,C)=>{const P=r;e.splice(b[P(1191)],0,C)},onDrag:(b,C)=>{e[b.index]=C},onDragEnd:(b,C)=>{this[r(2644)](b,C),this.updateDraggers()}});g[r(1191)]=d,this.draggers[r(1754)](g)}}}}const nullColor$1=new Cesium__namespace.Color(0,0,0,.01);class PolygonEntity extends BasePolyEntity{constructor(e={}){const t=_0x3a2b68;super(e),this._minPointNum=e[t(2680)]??3,this._clampToGround_reload=!![]}get entityGraphic(){const e=_0x3a2b68;var t;return(t=this[e(4335)])===null||t===void 0?void 0:t.polygon}get[_0x3a2b68(1746)](){return EditPolygon}get center(){return this.centerOfMass}get distance(){return getDistance(this.positionsShow,!![])}get[_0x3a2b68(2976)](){const e={_0x220109:2004,_0x3cc021:2694},t=_0x3a2b68;let i=getCesiumValue(this[t(3965)]);return i instanceof Cesium__namespace[t(e._0x220109)]&&(i=i[t(e._0x3cc021)]),this._positions_show??this.getShowPositions(i)}get hierarchy(){const e={_0x4bd4d4:3952,_0x31378d:2059},t=_0x3a2b68;var i;return this[t(e._0x4bd4d4)]||((i=this.entityGraphic)===null||i===void 0?void 0:i[t(e._0x31378d)])}get[_0x3a2b68(2694)](){return this._positions}set positions(e){const t={_0xdf2ffc:1772,_0x2c141e:400,_0x54ff52:2748,_0x4789ad:3798},i={_0x1420b3:738,_0x26328a:3208,_0x213bcd:1879,_0x485ac0:1879,_0x39fe62:1754},s=_0x3a2b68;var r;if(e){if(!((r=this[s(770)])!==null&&r!==void 0&&r.enabled)&&(this._hierarchy=null,this[s(t._0xdf2ffc)]=null),e instanceof Cesium__namespace.PolygonHierarchy&&(this._hierarchy=e,e=this._hierarchy.positions),Array.isArray(e)){var o;if(e[s(t._0x2c141e)]>0&&Array.isArray(e[0])&&e[0].length>0){const l=e[0][0];Array.isArray(l)&&isNumber(l[0])?(this[s(3952)]=getPolygonHierarchy(e,this[s(t._0x54ff52)][s(4241)]||this.style[s(t._0x4789ad)]||this.style.addHeight),e=this._hierarchy.positions):l instanceof Cesium__namespace[s(2978)]&&(this._hierarchy=getPolygonHierarchy2(e),e=this._hierarchy.positions)}const c=[],_=[];e.forEach((l,d)=>{const f=s,g=LngLatPoint[f(i._0x1420b3)](l);if(!g)return;let b=this.style[f(3798)];Cesium__namespace.defined(b)&&(isString(b)?(b=Number(template(b,this[f(i._0x26328a)],!![])),isNaN(b)&&(b=0)):Array.isArray(b)&&(b=b[d]||0),g[f(i._0x213bcd)]=b);const C=this.getAddHeight(d);C!==0&&(g[f(i._0x485ac0)]=g.alt+C),c.push(g),_[f(i._0x39fe62)](g[f(1378)]())}),this._points=c,(o=this[s(770)])!==null&&o!==void 0&&o.enabled?this[s(2206)]=_:this[s(3965)]=_}else this._positions=e;this._entity&&this._updatePositionsHook(),this.fire(EventType.updatePosition,{positions:this[s(3965)]})}}getEntityPositions(){return getPositions(this._entity)}getShowPositions(e){if(!e||e[_0x3a2b68({_0x2ab556:400}._0x2ab556)]===0)return e;const s=[];return e.forEach(function(r){s.push(r.clone())}),s}[_0x3a2b68(585)](){const e={_0x1e6316:1304,_0x44885a:391,_0x1346cc:2059,_0x161db9:3965,_0x50bf95:1772,_0x3fce53:2059,_0x255257:2191,_0x15bd6a:2748},t={_0x4358e6:3479,_0x11381a:1772,_0x4dc28f:719},i=_0x3a2b68,s={polygon:PolygonStyleConver[i(e._0x1e6316)](this.style,{},!![])};if(this._positions instanceof Cesium__namespace.CallbackProperty){const r=this._positions.getValue(this._map.clock.currentTime);if(r&&Array[i(e._0x44885a)](r)){const o=new Cesium__namespace.PolygonHierarchy;s.polygon[i(e._0x1346cc)]=new Cesium__namespace[i(2191)](c=>{const _=i;var l;const d=this._positions[_(t._0x4358e6)](c);if(this._positions_show=this.getShowPositions(d),o.positions=this[_(1772)],this._entity_outlines&&((l=this._positions_show)===null||l===void 0?void 0:l.length)>0){var f;((f=this.style[_(1641)])===null||f===void 0?void 0:f.closure)??!![]?this.outlinePositions=this[_(t._0x11381a)].concat(this._positions_show[0]):this[_(t._0x4dc28f)]=this._positions_show}return o},![]),this._hierarchy=o}else s.polygon.hierarchy=this[i(e._0x161db9)]}else this._hierarchy?s.polygon[i(e._0x1346cc)]=this._hierarchy:(!this[i(e._0x50bf95)]&&(this[i(1772)]=this.getShowPositions(this[i(2694)])),s.polygon[i(e._0x3fce53)]=new Cesium__namespace.PolygonHierarchy(this._positions_show));this._entity=this[i(1956)](s),this[i(3180)](),this._bindExType(),this[i(2242)](this._getOutlinePositions(),this.style),this._entity.polygon[i(e._0x1346cc)]instanceof Cesium__namespace[i(e._0x255257)]&&this._updateOutlineToCallback(),this[i(e._0x15bd6a)].label&&this._addLabel()}_bindExType(){const e={_0x18c330:1941,_0x2e0baa:3208,_0x59e673:4335,_0x466ea3:3208,_0x1f9ed7:4241,_0x4c4763:4335,_0x403389:4383,_0x1f816d:4383,_0x35faca:4053,_0x176e85:3333,_0x155879:4241},t=_0x3a2b68,i=this[t(e._0x18c330)][t(2436)]||this._layer.options.buildings;if(i&&(i[t(3174)]??!![])){if(i.bottomHeight){let _;isNumber(i.bottomHeight)?_=i.bottomHeight:isString(i[t(2070)])&&(_=Number(this[t(e._0x2e0baa)][i.bottomHeight]||0)),this[t(e._0x59e673)].polygon.height=_}const r=Number(this.attr[i.cloumn]||1);let o;isNumber(i.height)?o=i.height:isString(i.height)?o=this[t(e._0x466ea3)][i[t(e._0x1f9ed7)]]||o:o=3.5;const c=getCesiumValue(this[t(e._0x4c4763)][t(e._0x403389)].height)||0;this._entity[t(e._0x1f816d)].extrudedHeight=c+r*o}(this[t(1941)].dth||this[t(e._0x35faca)].options[t(e._0x176e85)])&&(this[t(4335)].polygon.classificationType=Cesium__namespace[t(4061)].BOTH,!Cesium__namespace.defined(this[t(2748)].color)&&(this._entity.polygon[t(3793)]=nullColor$1),!Cesium__namespace[t(407)](this.style[t(e._0x155879)])&&(this._entity[t(4383)].perPositionHeight=![]),this._entity.polygon.zIndex=99)}_updateDiffHeight(){const e={_0x3698b1:2748,_0x5c4ca0:2191,_0x1522f8:1882},t=_0x3a2b68;if(!(!Cesium__namespace.defined(this[t(e._0x3698b1)].diffHeight)||this.entityGraphic.extrudedHeight instanceof Cesium__namespace[t(e._0x5c4ca0)]))if(Cesium__namespace.defined(this.style[t(e._0x1522f8)])&&this.style.diffHeight!==0){const i=this.getMaxHeight();this.entityGraphic.extrudedHeight=i+this.style.diffHeight}else this.entityGraphic.extrudedHeight=void 0}[_0x3a2b68(3320)](){const e=_0x3a2b68;let t=0;return Cesium__namespace.defined(this.style.height)?t=this.style[e(4241)]:t=getMaxHeight(this._positions_draw||this._positions),t}_style2Json(e,t){return PolygonStyleConver[_0x3a2b68({_0x377a4d:1909}._0x377a4d)](e,t,!![])}_updateStyleHook(e,t){const i={_0x12cba6:1882},s=_0x3a2b68;PolygonStyleConver.toCesiumVal(e,this.entityGraphic,!![]),(Cesium__namespace.defined(t[s(i._0x12cba6)])||Cesium__namespace.defined(t.height))&&this._updateDiffHeight()}_updatePositionsHook(){const e={_0x54a557:2495,_0x33c0e6:2694,_0xf7056e:2059,_0x3f2b73:2748,_0x3e8268:2098,_0x3a5a14:3180},t=_0x3a2b68;if(this._positions instanceof Cesium__namespace.CallbackProperty){var i;this.entityGraphic[t(2059)]=this._positions,(i=this.editing)!==null&&i!==void 0&&i[t(3174)]&&this[t(3952)]&&(this._positions_show=this[t(e._0x54a557)](this[t(2206)]),this[t(3952)].positions=this._positions_show)}else this[t(3952)]?this.entityGraphic.hierarchy=this._hierarchy:(this._positions_show=this.getShowPositions(this[t(e._0x33c0e6)]),this.entityGraphic[t(e._0xf7056e)]=new Cesium__namespace[t(2004)](this[t(1772)]));this._updateOutlineStyle(this._getOutlinePositions(),this[t(e._0x3f2b73)]),this[t(e._0x3e8268)](),this[t(e._0x3a5a14)](),this._updateEditDraggers()}_getOutlinePositions(){return getAllPositions(this[_0x3a2b68({_0x2b26a8:4335}._0x2b26a8)])}toGeoJSON(e){return super.toGeoJSON(e)}_getGeoJsonGeometry(e){const t={_0x2d0345:1754,_0x20c979:3952},i=_0x3a2b68;var s,r;let o=this.getCoordinates(e==null?void 0:e.noAlt);return e!=null&&e.closure&&o.length>0&&o[i(t._0x2d0345)](o[0]),((s=this[i(t._0x20c979)])===null||s===void 0||(r=s.holes)===null||r===void 0?void 0:r.length)>0&&(o=[o],getHolesPositions(this._entity).forEach(_=>{o.push(LngLatArray.toArray(_))})),{type:"Polygon",coordinates:[o]}}setCallbackPositions(e){return this._setPositionsToCallback(),e&&(e&&(e=LngLatArray.toCartesians(e)),this._positions_draw=e,this.updateAttrForDrawing(!![]),this._updateLabelPosition()),this._positions_draw}_positions_CallbackProperty(){return this[_0x3a2b68(3952)]}_cancelPositionsCallback(){const e={_0x698994:2686},t=_0x3a2b68;super[t(e._0x698994)](),this._hierarchy=null}[_0x3a2b68(2741)](){const e={_0x22ef8e:2741,_0x40b7bc:2242},t=_0x3a2b68;super[t(e._0x22ef8e)](),this[t(e._0x40b7bc)]([new Cesium__namespace.CallbackProperty(i=>this[t(719)],![])],this.style,{show:!![],width:2,color:this.style.color})}_setPositionsToCallback(){const e={_0x291e01:3358},t=_0x3a2b68;this[t(1014)]||(this._draw_holes=getHolesPositions(this._entity),super[t(e._0x291e01)]())}updateAttrForDrawing(e){const t={_0x323b20:3952,_0x545f12:1641},i=_0x3a2b68;var s;if(!this[i(t._0x323b20)]&&(this._hierarchy=new Cesium__namespace.PolygonHierarchy,this._draw_holes)){const c=[];this._draw_holes[i(3782)](_=>{c.push(new Cesium__namespace.PolygonHierarchy(_))}),this._hierarchy.holes=c}if(this._positions_show=this.getShowPositions(this[i(2206)]),this[i(3952)].positions=this._positions_show,((s=this._positions_show)===null||s===void 0?void 0:s[i(400)])>0){var r;((r=this[i(2748)][i(t._0x545f12)])===null||r===void 0?void 0:r[i(4121)])??!![]?this[i(719)]=this[i(1772)].concat(this._positions_show[0]):this[i(719)]=this._positions_show}let o;this._positions_draw.length<this._minPointNum&&(o={show:!![],width:2,color:this.style.color}),this._updateOutlineToCallback(),this._updateOutlineStyle(null,this.style,o),this._updateDiffHeight()}}register$4(_0x3a2b68(4383),PolygonEntity),PolygonEntity[_0x3a2b68(600)]=getPositions,PolygonEntity.getAllPositions=getAllPositions;class EllipseEntity extends CircleEntity{constructor(e={}){super(e),this._maxPointNum=3}}register$4(_0x3a2b68(1362),EllipseEntity,!![]);function RectangularSensorGraphics(n){const e={_0x484b35:4276,_0x48ff70:3699,_0x3fbe33:3522},t=_0x3a2b68;this._show=void 0,this._radius=void 0,this._xHalfAngle=void 0,this._yHalfAngle=void 0,this[t(e._0x484b35)]=void 0,this._showSectorLines=void 0,this._showSectorSegmentLines=void 0,this[t(e._0x48ff70)]=void 0,this[t(3094)]=void 0,this[t(e._0x3fbe33)]=void 0,this._showDomeLines=void 0,this._showIntersection=void 0,this._intersectionColor=void 0,this._intersectionWidth=void 0,this._showThroughEllipsoid=void 0,this._gaze=void 0,this._showScanPlane=void 0,this._scanPlaneColor=void 0,this._scanPlaneMode=void 0,this._scanPlaneRate=void 0,this._definitionChanged=new Cesium__namespace[t(3130)],this.merge(Cesium__namespace[t(2623)](n,Cesium__namespace.defaultValue[t(1730)]))}Object.defineProperties(RectangularSensorGraphics.prototype,{definitionChanged:{get:function(){return this[_0x3a2b68({_0x63c0e5:1360}._0x63c0e5)]}},show:Cesium__namespace[_0x3a2b68(1479)](_0x3a2b68(442)),radius:Cesium__namespace.createPropertyDescriptor("radius"),xHalfAngle:Cesium__namespace.createPropertyDescriptor("xHalfAngle"),yHalfAngle:Cesium__namespace.createPropertyDescriptor("yHalfAngle"),lineColor:Cesium__namespace[_0x3a2b68(1479)](_0x3a2b68(1616)),showSectorLines:Cesium__namespace.createPropertyDescriptor(_0x3a2b68(1576)),showSectorSegmentLines:Cesium__namespace[_0x3a2b68(1479)]("showSectorSegmentLines"),showLateralSurfaces:Cesium__namespace.createPropertyDescriptor("showLateralSurfaces"),material:Cesium__namespace.createMaterialPropertyDescriptor("material"),showDomeSurfaces:Cesium__namespace.createPropertyDescriptor("showDomeSurfaces"),showDomeLines:Cesium__namespace[_0x3a2b68(1479)]("showDomeLines"),showIntersection:Cesium__namespace.createPropertyDescriptor(_0x3a2b68(2025)),intersectionColor:Cesium__namespace.createPropertyDescriptor(_0x3a2b68(2993)),intersectionWidth:Cesium__namespace.createPropertyDescriptor("intersectionWidth"),showThroughEllipsoid:Cesium__namespace.createPropertyDescriptor("showThroughEllipsoid"),gaze:Cesium__namespace.createPropertyDescriptor(_0x3a2b68(2117)),showScanPlane:Cesium__namespace.createPropertyDescriptor("showScanPlane"),scanPlaneColor:Cesium__namespace.createPropertyDescriptor("scanPlaneColor"),scanPlaneMode:Cesium__namespace.createPropertyDescriptor(_0x3a2b68(1262)),scanPlaneRate:Cesium__namespace.createPropertyDescriptor("scanPlaneRate")}),RectangularSensorGraphics.prototype[_0x3a2b68(2957)]=function(n){const e={_0x545fa7:1358,_0x4dc3dd:2963,_0x21fb70:2993,_0x246fbc:3989,_0x296e28:2237},t=_0x3a2b68;return!Cesium__namespace.defined(n)&&(n=new RectangularSensorGraphics),n[t(442)]=this.show,n.radius=this.radius,n.xHalfAngle=this[t(4077)],n.yHalfAngle=this.yHalfAngle,n.lineColor=this.lineColor,n[t(1576)]=this.showSectorLines,n[t(2034)]=this.showSectorSegmentLines,n.showLateralSurfaces=this.showLateralSurfaces,n.material=this.material,n[t(e._0x545fa7)]=this.showDomeSurfaces,n[t(e._0x4dc3dd)]=this.showDomeLines,n.showIntersection=this.showIntersection,n.intersectionColor=this[t(e._0x21fb70)],n.intersectionWidth=this.intersectionWidth,n.showThroughEllipsoid=this[t(e._0x246fbc)],n.gaze=this.gaze,n.showScanPlane=this.showScanPlane,n.scanPlaneColor=this[t(3918)],n.scanPlaneMode=this.scanPlaneMode,n.scanPlaneRate=this[t(e._0x296e28)],n},RectangularSensorGraphics.prototype.merge=function(n){const e={_0xcab83d:2082,_0x35ec33:3878,_0x24ec5b:2623,_0x2983cc:2623,_0x1a09fb:1576,_0x598dbd:739,_0x466ac0:2117,_0x3627e0:994,_0x3a1a2a:2623},t=_0x3a2b68;if(!Cesium__namespace.defined(n))throw new Cesium__namespace.DeveloperError("source is required.");this[t(2082)]=Cesium__namespace.defaultValue(this[t(e._0xcab83d)],n.slice),this.show=Cesium__namespace[t(2623)](this.show,n.show),this[t(e._0x35ec33)]=Cesium__namespace[t(e._0x24ec5b)](this[t(3878)],n[t(3878)]),this.xHalfAngle=Cesium__namespace.defaultValue(this.xHalfAngle,n[t(4077)]),this.yHalfAngle=Cesium__namespace[t(e._0x2983cc)](this.yHalfAngle,n[t(721)]),this[t(1616)]=Cesium__namespace.defaultValue(this.lineColor,n.lineColor),this.showSectorLines=Cesium__namespace.defaultValue(this[t(1576)],n[t(e._0x1a09fb)]),this[t(2034)]=Cesium__namespace[t(2623)](this[t(2034)],n.showSectorSegmentLines),this.showLateralSurfaces=Cesium__namespace.defaultValue(this[t(e._0x598dbd)],n.showLateralSurfaces),this.material=Cesium__namespace[t(2623)](this.material,n.material),this.showDomeSurfaces=Cesium__namespace.defaultValue(this.showDomeSurfaces,n[t(1358)]),this.showDomeLines=Cesium__namespace[t(2623)](this.showDomeLines,n[t(2963)]),this.showIntersection=Cesium__namespace.defaultValue(this.showIntersection,n[t(2025)]),this.intersectionColor=Cesium__namespace.defaultValue(this.intersectionColor,n[t(2993)]),this.intersectionWidth=Cesium__namespace[t(2623)](this.intersectionWidth,n.intersectionWidth),this[t(3989)]=Cesium__namespace.defaultValue(this.showThroughEllipsoid,n.showThroughEllipsoid),this[t(e._0x466ac0)]=Cesium__namespace[t(2623)](this.gaze,n.gaze),this[t(994)]=Cesium__namespace[t(e._0x24ec5b)](this[t(994)],n[t(e._0x3627e0)]),this.scanPlaneColor=Cesium__namespace[t(e._0x3a1a2a)](this.scanPlaneColor,n.scanPlaneColor),this[t(1262)]=Cesium__namespace.defaultValue(this.scanPlaneMode,n.scanPlaneMode),this.scanPlaneRate=Cesium__namespace[t(2623)](this.scanPlaneRate,n.scanPlaneRate)};var RectangularSensorVS=`in vec4 position;
in vec3 normal;
out vec3 v_position;
out vec3 v_positionWC;
out vec3 v_positionEC;
out vec3 v_normalEC;

void main() {
  gl_Position = czm_modelViewProjection * position;
  v_position = vec3(position);
  v_positionWC = (czm_model * position).xyz;
  v_positionEC = (czm_modelView * position).xyz;
  v_normalEC = czm_normal * normal;
}
`,RectangularSensorFS=`uniform bool u_showIntersection;
uniform bool u_showThroughEllipsoid;

uniform float u_radius;
uniform float u_xHalfAngle;
uniform float u_yHalfAngle;
uniform float u_normalDirection;
uniform float u_type;

in vec3 v_position;
in vec3 v_positionWC;
in vec3 v_positionEC;
in vec3 v_normalEC;

vec4 getColor(float sensorRadius, vec3 pointEC) {
  czm_materialInput materialInput;

  vec3 pointMC = (czm_inverseModelView * vec4(pointEC, 1.0)).xyz;
  materialInput.st = sensor2dTextureCoordinates(sensorRadius, pointMC);
  materialInput.str = pointMC / sensorRadius;

  vec3 positionToEyeEC = -v_positionEC;
  materialInput.positionToEyeEC = positionToEyeEC;

  vec3 normalEC = normalize(v_normalEC);
  materialInput.normalEC = u_normalDirection * normalEC;

  czm_material material = czm_getMaterial(materialInput);
    // czm_lightDirectionEC在cesium1.66开始加入的
  return mix(czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC), vec4(material.diffuse, material.alpha), 0.4);

}

bool isOnBoundary(float value, float epsilon) {
  float width = getIntersectionWidth();
  float tolerance = width * epsilon;

  float delta = max(abs(dFdx(value)), abs(dFdy(value)));
  float pixels = width * delta;
  float temp = abs(value);
  return temp < tolerance && temp < pixels || (delta < 10.0 * tolerance && temp - delta < tolerance && temp < pixels);
}

vec4 shade(bool isOnBoundary) {
  if(u_showIntersection && isOnBoundary) {
    return getIntersectionColor();
  }
  if(u_type == 1.0) {
    return getLineColor();
  }
  return getColor(u_radius, v_positionEC);
}

float ellipsoidSurfaceFunction(vec3 point) {
  vec3 scaled = czm_ellipsoidInverseRadii * point;
  return dot(scaled, scaled) - 1.0;
}

void main() {
  vec3 sensorVertexWC = czm_model[3].xyz;      // (0.0, 0.0, 0.0) in model coordinates

  float positionX = v_position.x;
  float positionY = v_position.y;
  float positionZ = v_position.z;

  vec3 zDir = vec3(0.0, 0.0, 1.0);
  vec3 lineX = vec3(positionX, 0, positionZ);
  vec3 lineY = vec3(0, positionY, positionZ);
  float resX = dot(normalize(lineX), zDir);
  if(resX < cos(u_xHalfAngle) - 0.00001) {
    discard;
  }
  float resY = dot(normalize(lineY), zDir);
  if(resY < cos(u_yHalfAngle) - 0.00001) {
    discard;
  }

  float ellipsoidValue = ellipsoidSurfaceFunction(v_positionWC);
  if(!u_showThroughEllipsoid) {
    if(ellipsoidValue < 0.0) {
      discard;
    }
    if(inSensorShadow(sensorVertexWC, v_positionWC)) {
      discard;
    }
  }

  bool isOnEllipsoid = isOnBoundary(ellipsoidValue, czm_epsilon3);
  out_FragColor = shade(isOnEllipsoid);
}
`,RectangularSensor$1=_0x3a2b68(1958),RectangularSensorScanPlaneFS=`
uniform bool u_showIntersection;
uniform bool u_showThroughEllipsoid;

uniform float u_radius;
uniform float u_xHalfAngle;
uniform float u_yHalfAngle;
uniform float u_normalDirection;
uniform vec4 u_color;

in vec3 v_position;
in vec3 v_positionWC;
in vec3 v_positionEC;
in vec3 v_normalEC;

vec4 getColor(float sensorRadius, vec3 pointEC) {
  czm_materialInput materialInput;

  vec3 pointMC = (czm_inverseModelView * vec4(pointEC, 1.0)).xyz;
  materialInput.st = sensor2dTextureCoordinates(sensorRadius, pointMC);
  materialInput.str = pointMC / sensorRadius;

  vec3 positionToEyeEC = -v_positionEC;
  materialInput.positionToEyeEC = positionToEyeEC;

  vec3 normalEC = normalize(v_normalEC);
  materialInput.normalEC = u_normalDirection * normalEC;

  czm_material material = czm_getMaterial(materialInput);

  material.diffuse = u_color.rgb;
  material.alpha = u_color.a;
    // czm_lightDirectionEC在cesium1.66开始加入的
  return mix(czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC), vec4(material.diffuse, material.alpha), 0.4);

}

bool isOnBoundary(float value, float epsilon) {
  float width = getIntersectionWidth();
  float tolerance = width * epsilon;

  float delta = max(abs(dFdx(value)), abs(dFdy(value)));
  float pixels = width * delta;
  float temp = abs(value);
  return temp < tolerance && temp < pixels || (delta < 10.0 * tolerance && temp - delta < tolerance && temp < pixels);
}

vec4 shade(bool isOnBoundary) {
  if(u_showIntersection && isOnBoundary) {
    return getIntersectionColor();
  }
  return getColor(u_radius, v_positionEC);
}

float ellipsoidSurfaceFunction(vec3 point) {
  vec3 scaled = czm_ellipsoidInverseRadii * point;
  return dot(scaled, scaled) - 1.0;
}

void main() {
  vec3 sensorVertexWC = czm_model[3].xyz;      // (0.0, 0.0, 0.0) in model coordinates

  float positionX = v_position.x;
  float positionY = v_position.y;
  float positionZ = v_position.z;

  vec3 zDir = vec3(0.0, 0.0, 1.0);
  vec3 lineX = vec3(positionX, 0, positionZ);
  vec3 lineY = vec3(0, positionY, positionZ);
  float resX = dot(normalize(lineX), zDir);
  if(resX < cos(u_xHalfAngle) - 0.0001) {
    discard;
  }
  float resY = dot(normalize(lineY), zDir);
  if(resY < cos(u_yHalfAngle) - 0.0001) {
    discard;
  }

  float ellipsoidValue = ellipsoidSurfaceFunction(v_positionWC);

  if(!u_showThroughEllipsoid) {
    if(ellipsoidValue < 0.0) {
      discard;
    }
    if(inSensorShadow(sensorVertexWC, v_positionWC)) {
      discard;
    }
  }
  bool isOnEllipsoid = isOnBoundary(ellipsoidValue, czm_epsilon3);
  out_FragColor = shade(isOnEllipsoid);
}
`;const BoundingSphere$1=Cesium__namespace.BoundingSphere,Cartesian3$4=Cesium__namespace[_0x3a2b68(2978)],Color$1=Cesium__namespace.Color,combine$1=Cesium__namespace.combine,ComponentDatatype$1=Cesium__namespace.ComponentDatatype,defaultValue$2=Cesium__namespace.defaultValue,defined$4=Cesium__namespace.defined,DeveloperError$1=Cesium__namespace.DeveloperError,Matrix4$2=Cesium__namespace.Matrix4,PrimitiveType$1=Cesium__namespace.PrimitiveType,Buffer=Cesium__namespace[_0x3a2b68(2261)],BufferUsage=Cesium__namespace[_0x3a2b68(2635)],DrawCommand=Cesium__namespace.DrawCommand,Pass=Cesium__namespace.Pass,RenderState=Cesium__namespace.RenderState,ShaderProgram=Cesium__namespace.ShaderProgram,ShaderSource=Cesium__namespace.ShaderSource,VertexArray=Cesium__namespace.VertexArray,BlendingState=Cesium__namespace.BlendingState,CullFace=Cesium__namespace.CullFace,Material=Cesium__namespace.Material,SceneMode$1=Cesium__namespace.SceneMode,VertexFormat$1=Cesium__namespace[_0x3a2b68(2693)],CesiumMath$2=Cesium__namespace.Math,Matrix3$2=Cesium__namespace[_0x3a2b68(1168)],JulianDate=Cesium__namespace.JulianDate,sin=Math[_0x3a2b68(3492)],cos=Math.cos,tan=Math.tan,atan=Math[_0x3a2b68(3375)],attributeLocations={position:0,normal:1};function RectangularSensorPrimitive(n){const e={_0xd28099:1730,_0x40a607:442,_0x555b9c:2103,_0x4b5b98:3878,_0x355aac:721,_0xa5279e:739,_0x7883aa:1385,_0xf43c82:3097,_0xc876a8:1801,_0x11525f:2122,_0x5a114e:2963,_0x4fb126:2025,_0x4b05a7:3918,_0x1cf4ef:1948,_0x24ee2e:1262,_0x343332:1862,_0x2c363:933,_0x535928:2793,_0x586512:1283,_0x1565dd:3399},t={_0x6d5d41:1616},i={_0xd6ac38:2025},s={_0x481525:721},r=_0x3a2b68,o=this;n=defaultValue$2(n,defaultValue$2[r(e._0xd28099)]),this[r(e._0x40a607)]=defaultValue$2(n[r(442)],!![]),this.slice=defaultValue$2(n[r(2082)],32),this.modelMatrix=Matrix4$2[r(2957)](n.modelMatrix,new Matrix4$2),this._modelMatrix=new Matrix4$2,this[r(e._0x555b9c)]=new Matrix4$2,this._computedScanPlaneModelMatrix=new Matrix4$2,this[r(e._0x4b5b98)]=defaultValue$2(n[r(3878)],Number.POSITIVE_INFINITY),this._radius=void 0,this.xHalfAngle=defaultValue$2(n.xHalfAngle,0),this._xHalfAngle=void 0,this.yHalfAngle=defaultValue$2(n[r(e._0x355aac)],0),this._yHalfAngle=void 0,this.lineColor=defaultValue$2(n[r(1616)],Color$1.WHITE),this.showSectorLines=defaultValue$2(n.showSectorLines,!![]),this[r(2034)]=defaultValue$2(n.showSectorSegmentLines,!![]),this[r(e._0xa5279e)]=defaultValue$2(n.showLateralSurfaces,!![]),this.material=defined$4(n.material)?n.material:Material[r(e._0x7883aa)](Material[r(2209)]),this._material=void 0,this._translucent=void 0,this.lateralSurfaceMaterial=defined$4(n[r(1318)])?n.lateralSurfaceMaterial:Material.fromType(Material.ColorType),this[r(1049)]=void 0,this[r(e._0xf43c82)]=void 0,this.showDomeSurfaces=defaultValue$2(n.showDomeSurfaces,!![]),this.domeSurfaceMaterial=defined$4(n[r(e._0xc876a8)])?n.domeSurfaceMaterial:Material.fromType(Material[r(2209)]),this[r(e._0x11525f)]=void 0,this.showDomeLines=defaultValue$2(n[r(e._0x5a114e)],!![]),this.showIntersection=defaultValue$2(n[r(e._0x4fb126)],!![]),this.intersectionColor=defaultValue$2(n.intersectionColor,Color$1.WHITE),this[r(1056)]=defaultValue$2(n.intersectionWidth,5),this.showThroughEllipsoid=defaultValue$2(n.showThroughEllipsoid,![]),this._showThroughEllipsoid=void 0,this.showScanPlane=defaultValue$2(n.showScanPlane,!![]),this[r(3918)]=defaultValue$2(n[r(e._0x4b05a7)],Color$1[r(e._0x1cf4ef)]),this.scanPlaneMode=defaultValue$2(n[r(e._0x24ee2e)],"horizontal"),this.scanPlaneRate=defaultValue$2(n.scanPlaneRate,10),this._scanePlaneXHalfAngle=0,this[r(3054)]=0,this._time=JulianDate.now(),this._boundingSphere=new BoundingSphere$1,this._boundingSphereWC=new BoundingSphere$1,this._sectorFrontCommand=new DrawCommand({owner:this,primitiveType:PrimitiveType$1[r(e._0x343332)],boundingVolume:this._boundingSphereWC}),this._sectorBackCommand=new DrawCommand({owner:this,primitiveType:PrimitiveType$1.TRIANGLES,boundingVolume:this[r(e._0x2c363)]}),this._sectorVA=void 0,this._sectorLineCommand=new DrawCommand({owner:this,primitiveType:PrimitiveType$1[r(4172)],boundingVolume:this[r(e._0x2c363)]}),this._sectorLineVA=void 0,this[r(e._0x535928)]=new DrawCommand({owner:this,primitiveType:PrimitiveType$1.LINES,boundingVolume:this._boundingSphereWC}),this._sectorSegmentLineVA=void 0,this._domeFrontCommand=new DrawCommand({owner:this,primitiveType:PrimitiveType$1.TRIANGLES,boundingVolume:this._boundingSphereWC}),this[r(1181)]=new DrawCommand({owner:this,primitiveType:PrimitiveType$1[r(e._0x343332)],boundingVolume:this._boundingSphereWC}),this[r(e._0x586512)]=void 0,this._domeLineCommand=new DrawCommand({owner:this,primitiveType:PrimitiveType$1.LINES,boundingVolume:this._boundingSphereWC}),this._domeLineVA=void 0,this._scanPlaneFrontCommand=new DrawCommand({owner:this,primitiveType:PrimitiveType$1.TRIANGLES,boundingVolume:this._boundingSphereWC}),this[r(e._0x1565dd)]=new DrawCommand({owner:this,primitiveType:PrimitiveType$1.TRIANGLES,boundingVolume:this._boundingSphereWC}),this._scanRadialCommand=void 0,this._colorCommands=[],this._frontFaceRS=void 0,this[r(670)]=void 0,this._sp=void 0,this[r(3439)]={u_type:function(){return 0},u_xHalfAngle:function(){return o.xHalfAngle},u_yHalfAngle:function(){return o[r(s._0x481525)]},u_radius:function(){return o.radius},u_showThroughEllipsoid:function(){return o.showThroughEllipsoid},u_showIntersection:function(){return o[r(i._0xd6ac38)]},u_intersectionColor:function(){return o.intersectionColor},u_intersectionWidth:function(){return o.intersectionWidth},u_normalDirection:function(){return 1},u_lineColor:function(){return o.lineColor}},this._scanUniforms={u_xHalfAngle:function(){return o._scanePlaneXHalfAngle},u_yHalfAngle:function(){return o._scanePlaneYHalfAngle},u_radius:function(){return o.radius},u_color:function(){return o.scanPlaneColor},u_showThroughEllipsoid:function(){return o.showThroughEllipsoid},u_showIntersection:function(){return o[r(2025)]},u_intersectionColor:function(){return o[r(2993)]},u_intersectionWidth:function(){return o[r(1056)]},u_normalDirection:function(){return 1},u_lineColor:function(){return o[r(t._0x6d5d41)]}}}RectangularSensorPrimitive.prototype.update=function(n){const e={_0x3f582c:2353,_0x59d05b:4033,_0x24ec20:3140,_0x599f3b:3172,_0x13037d:3878,_0x14e1e0:947,_0xa426f4:1559,_0x3d8c1f:1230,_0x3f0024:1230},t=_0x3a2b68,i=n.mode;if(!this.show||i!==SceneMode$1.SCENE3D)return;let s=![],r=![],o=![];const c=this.xHalfAngle,_=this.yHalfAngle;if(c<0||_<0)throw new DeveloperError$1("halfAngle must be greater than or equal to zero.");if(c===0||_===0)return;(this[t(e._0x3f582c)]!==c||this._yHalfAngle!==_)&&(this._xHalfAngle=c,this._yHalfAngle=_,s=!![]);const l=this.radius;if(l<0)throw new DeveloperError$1("this.radius must be greater than or equal to zero.");let d=![];this._radius!==l&&(d=!![],this[t(e._0x59d05b)]=l,this._boundingSphere=new BoundingSphere$1(Cartesian3$4.ZERO,this.radius)),(!Matrix4$2.equals(this[t(4238)],this[t(e._0x24ec20)])||d)&&(Matrix4$2.clone(this.modelMatrix,this[t(3140)]),Matrix4$2[t(e._0x599f3b)](this.modelMatrix,this[t(e._0x13037d)],this._computedModelMatrix),BoundingSphere$1.transform(this._boundingSphere,this.modelMatrix,this._boundingSphereWC));const g=this.showThroughEllipsoid;this[t(e._0x14e1e0)]!==this.showThroughEllipsoid&&(this._showThroughEllipsoid=g,r=!![]);const b=this.material;this._material!==b&&(this[t(3094)]=b,r=!![],o=!![]);const C=b.isTranslucent();if(this._translucent!==C&&(this._translucent=C,r=!![]),this.showScanPlane){const E=n.time,M=JulianDate.secondsDifference(E,this._time);M<0&&(this._time=JulianDate.clone(E,this._time));const D=Math.max(M%this.scanPlaneRate/this.scanPlaneRate,0);let R;const k=new Matrix3$2;if(this.scanPlaneMode===t(e._0xa426f4)){R=2*_*D-_;const N=cos(R),$=tan(c),B=atan(N*$);this[t(1230)]=B,this._scanePlaneYHalfAngle=R,Cesium__namespace[t(1168)].fromRotationX(this._scanePlaneYHalfAngle,k)}else{R=2*c*D-c;const N=tan(_),$=cos(R),B=atan($*N);this[t(e._0x3d8c1f)]=R,this[t(3054)]=B,Cesium__namespace[t(1168)].fromRotationY(this[t(e._0x3f0024)],k)}Cesium__namespace.Matrix4.multiplyByMatrix3(this.modelMatrix,k,this._computedScanPlaneModelMatrix),Matrix4$2.multiplyByUniformScale(this._computedScanPlaneModelMatrix,this.radius,this._computedScanPlaneModelMatrix)}s&&createVertexArray(this,n),r&&createRenderState(this,g,C),o&&createShaderProgram(this,n,b),(r||o)&&createCommands(this,C);const P=n[t(2515)],S=n.passes,L=this._colorCommands;if(S.render)for(let E=0,M=L.length;E<M;E++){const D=L[E];P.push(D)}};const nScratch=new Cartesian3$4;function computeUnitPosiiton(n,e,t){const i=_0x3a2b68,s=n[i(2082)],r=cos(t),o=tan(t),c=cos(e),_=tan(e),l=atan(c*o),d=atan(r*_),f=[];for(let b=0;b<s;b++){const C=2*l*b/(s-1)-l;f.push(new Cartesian3$4(0,sin(C),cos(C)))}const g=[];for(let b=0;b<s;b++){const C=2*d*b/(s-1)-d;g[i(1754)](new Cartesian3$4(sin(C),0,cos(C)))}return{zoy:f,zox:g}}function computeSectorPositions(n,e){const t={_0x2fd933:721,_0xa7b02e:3079},i={_0x46a246:1721},s={_0x30a6e6:2978},r=_0x3a2b68,o=n.xHalfAngle,c=n[r(t._0x2fd933)],_=e[r(t._0xa7b02e)],l=e[r(2904)],d=[],f=new Matrix3$2;let g=Matrix3$2.fromRotationY(o,f);return d.push(_.map(function(b){const C=r;return Matrix3$2.multiplyByVector(g,b,new Cesium__namespace[C(s._0x30a6e6)])})),g=Matrix3$2.fromRotationX(-c,f),d.push(l.map(function(b){return Matrix3$2.multiplyByVector(g,b,new Cesium__namespace.Cartesian3)})[r(1178)]()),g=Matrix3$2.fromRotationY(-o,f),d.push(_[r(3244)](function(b){const C=r;return Matrix3$2[C(i._0x46a246)](g,b,new Cesium__namespace[C(2978)])})[r(1178)]()),g=Matrix3$2.fromRotationX(c,f),d.push(l.map(function(b){return Matrix3$2.multiplyByVector(g,b,new Cesium__namespace.Cartesian3)})),d}function createSectorVertexArray(n,e){const t={_0xa4f65:4322,_0xe4ca3a:4322},i=_0x3a2b68,s=Array.prototype.concat.apply([],e).length-e.length,r=new Float32Array(2*3*3*s);let o=0;for(let d=0,f=e[i(400)];d<f;d++){const g=e[d],b=Cartesian3$4[i(1085)](Cartesian3$4[i(2729)](g[0],g[g.length-1],nScratch),nScratch);for(let C=0,P=g.length-1;C<P;C++)r[o++]=0,r[o++]=0,r[o++]=0,r[o++]=-b.x,r[o++]=-b.y,r[o++]=-b.z,r[o++]=g[C].x,r[o++]=g[C].y,r[o++]=g[C].z,r[o++]=-b.x,r[o++]=-b.y,r[o++]=-b.z,r[o++]=g[C+1].x,r[o++]=g[C+1].y,r[o++]=g[C+1].z,r[o++]=-b.x,r[o++]=-b.y,r[o++]=-b.z}const c=Buffer.createVertexBuffer({context:n,typedArray:r,usage:BufferUsage.STATIC_DRAW}),_=2*3*Float32Array[i(t._0xa4f65)],l=[{index:attributeLocations.position,vertexBuffer:c,componentsPerAttribute:3,componentDatatype:ComponentDatatype$1.FLOAT,offsetInBytes:0,strideInBytes:_},{index:attributeLocations.normal,vertexBuffer:c,componentsPerAttribute:3,componentDatatype:ComponentDatatype$1.FLOAT,offsetInBytes:3*Float32Array[i(t._0xe4ca3a)],strideInBytes:_}];return new VertexArray({context:n,attributes:l})}function createSectorLineVertexArray(n,e){const t={_0x4c3eab:1179},i=_0x3a2b68,s=e[i(400)],r=new Float32Array(3*3*s);let o=0;for(let d=0,f=e.length;d<f;d++){const g=e[d];r[o++]=0,r[o++]=0,r[o++]=0,r[o++]=g[0].x,r[o++]=g[0].y,r[o++]=g[0].z}const c=Buffer.createVertexBuffer({context:n,typedArray:r,usage:BufferUsage[i(t._0x4c3eab)]}),_=3*Float32Array.BYTES_PER_ELEMENT,l=[{index:attributeLocations[i(4076)],vertexBuffer:c,componentsPerAttribute:3,componentDatatype:ComponentDatatype$1.FLOAT,offsetInBytes:0,strideInBytes:_}];return new VertexArray({context:n,attributes:l})}function createSectorSegmentLineVertexArray(n,e){const t={_0x1eda93:1248},i=_0x3a2b68,s=Array.prototype[i(4083)].apply([],e).length-e.length,r=new Float32Array(3*3*s);let o=0;for(let d=0,f=e.length;d<f;d++){const g=e[d];for(let b=0,C=g.length-1;b<C;b++)r[o++]=g[b].x,r[o++]=g[b].y,r[o++]=g[b].z,r[o++]=g[b+1].x,r[o++]=g[b+1].y,r[o++]=g[b+1].z}const c=Buffer.createVertexBuffer({context:n,typedArray:r,usage:BufferUsage.STATIC_DRAW}),_=3*Float32Array.BYTES_PER_ELEMENT,l=[{index:attributeLocations.position,vertexBuffer:c,componentsPerAttribute:3,componentDatatype:ComponentDatatype$1[i(t._0x1eda93)],offsetInBytes:0,strideInBytes:_}];return new VertexArray({context:n,attributes:l})}function createDomeVertexArray(n){const e={_0xebf7ec:4283,_0x3aac87:3393},t=_0x3a2b68,i=Cesium__namespace.EllipsoidGeometry[t(1926)](new Cesium__namespace[t(e._0xebf7ec)]({vertexFormat:VertexFormat$1[t(e._0x3aac87)],stackPartitions:32,slicePartitions:32}));return VertexArray.fromGeometry({context:n,geometry:i,attributeLocations,bufferUsage:BufferUsage.STATIC_DRAW,interleave:![]})}function createDomeLineVertexArray(n){const e={_0x3dfa93:1926,_0x262857:3393},t=_0x3a2b68,i=Cesium__namespace.EllipsoidOutlineGeometry[t(e._0x3dfa93)](new Cesium__namespace[t(4123)]({vertexFormat:VertexFormat$1[t(e._0x262857)],stackPartitions:32,slicePartitions:32}));return VertexArray.fromGeometry({context:n,geometry:i,attributeLocations,bufferUsage:BufferUsage.STATIC_DRAW,interleave:![]})}function createScanPlaneVertexArray(n,e){const t={_0x5344d8:4076},i=_0x3a2b68,s=e.length-1,r=new Float32Array(3*3*s);let o=0;for(let d=0;d<s;d++)r[o++]=0,r[o++]=0,r[o++]=0,r[o++]=e[d].x,r[o++]=e[d].y,r[o++]=e[d].z,r[o++]=e[d+1].x,r[o++]=e[d+1].y,r[o++]=e[d+1].z;const c=Buffer.createVertexBuffer({context:n,typedArray:r,usage:BufferUsage.STATIC_DRAW}),_=3*Float32Array.BYTES_PER_ELEMENT,l=[{index:attributeLocations[i(t._0x5344d8)],vertexBuffer:c,componentsPerAttribute:3,componentDatatype:ComponentDatatype$1.FLOAT,offsetInBytes:0,strideInBytes:_}];return new VertexArray({context:n,attributes:l})}function createVertexArray(n,e){const t={_0x29c8f4:1283,_0x2a49db:2963},i=_0x3a2b68,s=e.context,r=computeUnitPosiiton(n,n.xHalfAngle,n.yHalfAngle),o=computeSectorPositions(n,r);if(n.showLateralSurfaces&&(n._sectorVA=createSectorVertexArray(s,o)),n.showSectorLines&&(n._sectorLineVA=createSectorLineVertexArray(s,o)),n.showSectorSegmentLines&&(n._sectorSegmentLineVA=createSectorSegmentLineVertexArray(s,o)),n[i(1358)]&&(n[i(t._0x29c8f4)]=createDomeVertexArray(s)),n[i(t._0x2a49db)]&&(n._domeLineVA=createDomeLineVertexArray(s)),n.showScanPlane)if(n[i(1262)]==="horizontal"){const c=computeUnitPosiiton(n,CesiumMath$2.PI_OVER_TWO,0);n._scanPlaneVA=createScanPlaneVertexArray(s,c.zox)}else{const c=computeUnitPosiiton(n,0,CesiumMath$2[i(2061)]);n._scanPlaneVA=createScanPlaneVertexArray(s,c.zoy)}}function createCommonShaderProgram(n,e,t){const i={_0x5dd1b2:2424,_0x178e46:3719},s=_0x3a2b68,r=e[s(3041)],o=RectangularSensorVS,c=new ShaderSource({sources:[RectangularSensor$1,t.shaderSource,RectangularSensorFS]});n._sp=ShaderProgram[s(i._0x5dd1b2)]({context:r,shaderProgram:n[s(728)],vertexShaderSource:o,fragmentShaderSource:c,attributeLocations});const _=new ShaderSource({sources:[RectangularSensor$1,t.shaderSource,RectangularSensorFS],pickColorQualifier:s(3722)});n[s(i._0x178e46)]=ShaderProgram.replaceCache({context:r,shaderProgram:n._pickSP,vertexShaderSource:o,fragmentShaderSource:_,attributeLocations})}function createScanPlaneShaderProgram(n,e,t){const i=e.context,s=RectangularSensorVS,r=new ShaderSource({sources:[RectangularSensor$1,t.shaderSource,RectangularSensorScanPlaneFS]});n._scanePlaneSP=ShaderProgram.replaceCache({context:i,shaderProgram:n._scanePlaneSP,vertexShaderSource:s,fragmentShaderSource:r,attributeLocations})}function createShaderProgram(n,e,t){createCommonShaderProgram(n,e,t),n.showScanPlane&&createScanPlaneShaderProgram(n,e,t)}function createRenderState(n,e,t){const i={_0x3b24bd:670,_0x183c33:740,_0x38b941:1945},s=_0x3a2b68;t?(n._frontFaceRS=RenderState.fromCache({depthTest:{enabled:!e},depthMask:![],blending:BlendingState.ALPHA_BLEND,cull:{enabled:!![],face:CullFace.BACK}}),n[s(i._0x3b24bd)]=RenderState.fromCache({depthTest:{enabled:!e},depthMask:![],blending:BlendingState[s(2106)],cull:{enabled:!![],face:CullFace[s(i._0x183c33)]}}),n._pickRS=RenderState[s(i._0x38b941)]({depthTest:{enabled:!e},depthMask:![],blending:BlendingState[s(2106)]})):(n._frontFaceRS=RenderState.fromCache({depthTest:{enabled:!e},depthMask:!![]}),n._pickRS=RenderState.fromCache({depthTest:{enabled:!![]},depthMask:!![]}))}function createCommand(n,e,t,i,s,r,o,c,_,l,d,f){const g={_0x2c5129:2299,_0x3dc4dd:3439,_0x3d7db6:4238,_0x686bf9:724},b=_0x3a2b68;l&&t&&(t.vertexArray=o,t.renderState=s,t.shaderProgram=r,t[b(g._0x2c5129)]=combine$1(c,n._material[b(g._0x3dc4dd)]),t.uniformMap.u_normalDirection=function(){return-1},t.pass=d,t[b(g._0x3d7db6)]=_,n._colorCommands.push(t)),e[b(3698)]=o,e[b(1251)]=i,e.shaderProgram=r,e.uniformMap=combine$1(c,n._material._uniforms),f&&(e.uniformMap[b(g._0x686bf9)]=function(){return 1}),e.pass=d,e.modelMatrix=_,n._colorCommands.push(e)}function createCommands(n,e){const t={_0x4de708:513,_0x5a761f:1734,_0x10bbab:728,_0x112941:3439,_0x4a3b98:1576},i=_0x3a2b68;n._colorCommands.length=0;const s=e?Pass.TRANSLUCENT:Pass[i(t._0x4de708)];n.showLateralSurfaces&&createCommand(n,n[i(t._0x5a761f)],n._sectorBackCommand,n._frontFaceRS,n._backFaceRS,n[i(t._0x10bbab)],n._sectorVA,n[i(t._0x112941)],n[i(2103)],e,s),n[i(t._0x4a3b98)]&&createCommand(n,n._sectorLineCommand,void 0,n._frontFaceRS,n._backFaceRS,n._sp,n._sectorLineVA,n._uniforms,n._computedModelMatrix,e,s,!![]),n.showSectorSegmentLines&&createCommand(n,n._sectorSegmentLineCommand,void 0,n[i(3993)],n._backFaceRS,n[i(728)],n._sectorSegmentLineVA,n[i(t._0x112941)],n._computedModelMatrix,e,s,!![]),n.showDomeSurfaces&&createCommand(n,n._domeFrontCommand,n[i(1181)],n._frontFaceRS,n[i(670)],n._sp,n._domeVA,n[i(3439)],n[i(2103)],e,s),n.showDomeLines&&createCommand(n,n._domeLineCommand,void 0,n._frontFaceRS,n._backFaceRS,n._sp,n._domeLineVA,n._uniforms,n._computedModelMatrix,e,s,!![]),n.showScanPlane&&createCommand(n,n[i(3014)],n._scanPlaneBackCommand,n._frontFaceRS,n._backFaceRS,n._scanePlaneSP,n._scanPlaneVA,n[i(2108)],n._computedScanPlaneModelMatrix,e,s)}const AssociativeArray=Cesium__namespace.AssociativeArray,Cartesian3$3=Cesium__namespace.Cartesian3,Color=Cesium__namespace.Color,defined$3=Cesium__namespace.defined,DeveloperError=Cesium__namespace.DeveloperError,Matrix3$1=Cesium__namespace.Matrix3,Matrix4$1=Cesium__namespace[_0x3a2b68(2478)],Quaternion$1=Cesium__namespace.Quaternion,MaterialProperty=Cesium__namespace.MaterialProperty,Property=Cesium__namespace.Property,matrix3Scratch=new Matrix3$1,cachedPosition=new Cartesian3$3,cachedGazePosition=new Cartesian3$3,cachedOrientation=new Quaternion$1,diffVectorScratch=new Cartesian3$3,orientationScratch=new Quaternion$1;function removePrimitive(n,e,t){const i={_0x1dfee2:1361},s=_0x3a2b68,r=e[n.id];if(Cesium__namespace[s(407)](r)){const o=r.primitive;try{t[s(i._0x1dfee2)](o)}catch{}o.isDestroyed&&!o.isDestroyed()&&o.destroy(),delete e[n.id]}}function RectangularSensorVisualizer(n,e){const t={_0x139be8:4390},i=_0x3a2b68;if(!defined$3(n))throw new DeveloperError("scene is required.");if(!defined$3(e))throw new DeveloperError("entityCollection is required.");e.collectionChanged.addEventListener(RectangularSensorVisualizer[i(t._0x139be8)][i(3274)],this),this._scene=n,this._primitives=n.primitives,this._entityCollection=e,this._hash={},this._entitiesToVisualize=new AssociativeArray,this._onCollectionChanged(e,e.values,[],[])}RectangularSensorVisualizer.prototype.update=function(n){const e={_0x3aac16:3826,_0x5e9032:400,_0x1bca57:2358,_0x310142:3442,_0x4e7e1a:2362,_0x5da6a3:404,_0x3f7100:971,_0x5ce8e9:4238,_0x3be190:3654,_0x1af7e2:4076,_0x1a2e76:2710,_0x15c99f:4276,_0x163a05:3699,_0x2697ed:3442,_0x32f776:1948},t=_0x3a2b68;if(!defined$3(n))throw new DeveloperError("time is required.");const i=this._entitiesToVisualize[t(e._0x3aac16)],s=this[t(2348)],r=this._primitives;let o,c,_,l,d;for(let f=0,g=i[t(e._0x5e9032)];f<g;f++){const b=i[f],C=b._rectangularSensorMars;let P=s[b.id],S=b.isShowing&&b[t(e._0x1bca57)](n)&&Property[t(e._0x310142)](C._show,n,!![]);if(S&&(o=Property.getValueOrUndefined(b._position,n,cachedPosition),c=Property.getValueOrUndefined(b._orientation,n,cachedOrientation),_=Property.getValueOrUndefined(C._radius,n),l=Property.getValueOrUndefined(C._xHalfAngle,n),d=Property.getValueOrUndefined(C._yHalfAngle,n),S=defined$3(o)&&defined$3(l)&&defined$3(d)),!S){defined$3(P)&&(P[t(e._0x4e7e1a)][t(442)]=![]);continue}let L=defined$3(P)?P.primitive:void 0;!defined$3(L)&&(L=new RectangularSensorPrimitive,L.id=b,r.add(L),P={primitive:L,position:void 0,orientation:void 0},s[b.id]=P);const E=Property.getValueOrUndefined(C[t(e._0x5da6a3)],n);if(defined$3(E)){const M=Property[t(1783)](E._position,n,cachedGazePosition);if(!defined$3(o)||!defined$3(M))continue;const D=Cartesian3$3.subtract(o,M,diffVectorScratch),R=Cartesian3$3[t(e._0x3f7100)](Cesium__namespace[t(2978)].UNIT_Z,D),k=Cartesian3$3[t(2729)](Cesium__namespace.Cartesian3.UNIT_Z,D,diffVectorScratch);c=Quaternion$1[t(1702)](k,R-Math.PI,orientationScratch),_=Cartesian3$3[t(3481)](o,M),L[t(e._0x5ce8e9)]=Matrix4$1[t(e._0x3be190)](Matrix3$1.fromQuaternion(c,matrix3Scratch),o,L.modelMatrix)}else(!Cartesian3$3.equals(o,P.position)||!Quaternion$1.equals(c,P.orientation))&&(defined$3(c)?(L.modelMatrix=Matrix4$1[t(3654)](Matrix3$1.fromQuaternion(c,matrix3Scratch),o,L.modelMatrix),P.position=Cartesian3$3.clone(o,P[t(e._0x1af7e2)]),P.orientation=Quaternion$1.clone(c,P[t(e._0x1a2e76)])):(L.modelMatrix=Cesium__namespace.Transforms[t(778)](o),P[t(4076)]=Cartesian3$3[t(2957)](o,P.position)));L.show=!![],L.gaze=E,L.radius=_,L.xHalfAngle=l,L.yHalfAngle=d,L.lineColor=Property[t(3442)](C[t(e._0x15c99f)],n,Color.WHITE),L.showSectorLines=Property[t(e._0x310142)](C._showSectorLines,n,!![]),L.showSectorSegmentLines=Property[t(3442)](C[t(3513)],n,!![]),L.showLateralSurfaces=Property[t(3442)](C[t(e._0x163a05)],n,!![]),L.material=MaterialProperty.getValue(n,C._material,L.material),L[t(1358)]=Property[t(e._0x2697ed)](C._showDomeSurfaces,n,!![]),L.showDomeLines=Property.getValueOrDefault(C._showDomeLines,n,!![]),L.showIntersection=Property.getValueOrDefault(C._showIntersection,n,!![]),L[t(2993)]=Property[t(3442)](C[t(1307)],n,Color.WHITE),L.intersectionWidth=Property.getValueOrDefault(C[t(1690)],n,1),L[t(3989)]=Property.getValueOrDefault(C._showThroughEllipsoid,n,![]),L.scanPlaneMode=Property[t(3442)](C._scanPlaneMode,n),L.scanPlaneColor=Property.getValueOrDefault(C._scanPlaneColor,n,Color[t(e._0x32f776)]),L.showScanPlane=Property[t(3442)](C._showScanPlane,n,!![]),L.scanPlaneRate=Property.getValueOrDefault(C._scanPlaneRate,n,1)}return!![]},RectangularSensorVisualizer.prototype[_0x3a2b68(4017)]=function(){return![]},RectangularSensorVisualizer.prototype.destroy=function(){const n={_0x9ad96f:400,_0x39da7c:1944},e=_0x3a2b68,t=this._entitiesToVisualize.values,i=this._hash,s=this._primitives;for(let r=t[e(n._0x9ad96f)]-1;r>-1;r--)removePrimitive(t[r],i,s);for(const r in this)delete this[r];return Cesium__namespace[e(n._0x39da7c)](this)},RectangularSensorVisualizer.prototype._onCollectionChanged=function(n,e,t,i){const s={_0x2f05bf:1187,_0x14b648:1361},r=_0x3a2b68,o=this._entitiesToVisualize;if(!o)return;const c=this._hash,_=this._primitives;let l,d;for(l=e.length-1;l>-1;l--)d=e[l],defined$3(d._rectangularSensorMars)&&defined$3(d._position)&&o.set(d.id,d);for(l=i.length-1;l>-1;l--)d=i[l],defined$3(d._rectangularSensorMars)&&defined$3(d[r(s._0x2f05bf)])?o.set(d.id,d):(removePrimitive(d,c,_),o[r(1361)](d.id));for(l=t[r(400)]-1;l>-1;l--)d=t[l],removePrimitive(d,c,_),o[r(s._0x14b648)](d.id)};const originalDefaultVisualizersCallback=Cesium__namespace.DataSourceDisplay.defaultVisualizersCallback;Cesium__namespace[_0x3a2b68(701)].defaultVisualizersCallback=function(n,e,t){const i={_0x5486d9:2931},s=_0x3a2b68,r=t[s(i._0x5486d9)];return originalDefaultVisualizersCallback(n,e,t).concat([new RectangularSensorVisualizer(n,r)])};class RectangularSensor extends BasePointEntity{get entityGraphic(){var e;return(e=this._entity)===null||e===void 0?void 0:e.rectangularSensorMars}get radius(){return this.style.radius}set radius(e){const t={_0x27250e:3878},i=_0x3a2b68;this.style[i(t._0x27250e)]=e,this[i(4335)]&&(this[i(3511)].radius=e)}_mountedHook(){const e={_0x50677a:4076,_0x3b6701:1304,_0x18ea6c:2748,_0x1dab61:1956},t=_0x3a2b68,i={position:this[t(e._0x50677a)],orientation:this.getOrientation(),rectangularSensorMars:new RectangularSensorGraphics(RectangularSensorStyleConver[t(e._0x3b6701)](this[t(e._0x18ea6c)]))};this._entity=this[t(e._0x1dab61)](i),this.style.label&&this._addLabel()}_updateStyleHook(e,t){const i={_0x3cfa9f:2931,_0xf77b6:585,_0x597156:2931},s=_0x3a2b68;if(this[s(4335)]&&this.isAdded){const r=this._layer.dataSource;r[s(i._0x3cfa9f)].remove(this._entity),delete this._entity,this[s(i._0xf77b6)](),r[s(i._0x597156)].add(this._entity)}}_updateEntityOpacity(e,t){const i=_0x3a2b68,s=e==null?void 0:e.material;if(!s)return![];const r=getCesiumColor(s.color,Cesium__namespace.Color[i(1948)]);return!Cesium__namespace[i(407)](this._material_color_alpha)&&(this._material_color_alpha=r[i(838)]),s.color=r.withAlpha(this[i(1463)]*t),!![]}_updateExOpacity(e){const t={_0x4942be:2092,_0x23cb58:2047,_0x43236a:838,_0x11cec7:747,_0x296669:407},i=_0x3a2b68,s=getCesiumColor(this[i(3511)].lineColor,Cesium__namespace[i(t._0x4942be)].WHITE);!Cesium__namespace.defined(this._lineColor_alpha)&&(this[i(t._0x23cb58)]=s[i(t._0x43236a)]),this.entityGraphic.lineColor=s[i(t._0x11cec7)](this._lineColor_alpha*e);const r=getCesiumColor(this.entityGraphic.scanPlaneColor,Cesium__namespace[i(2092)].WHITE);!Cesium__namespace[i(t._0x296669)](this._scanPlaneColor_alpha)&&(this._scanPlaneColor_alpha=r[i(838)]),this.entityGraphic.scanPlaneColor=r.withAlpha(this._scanPlaneColor_alpha*e)}[_0x3a2b68(1338)](e,t){return RectangularSensorStyleConver.toJSON(e,t,!![])}}register$4("rectangularSensor",RectangularSensor,!![]);class EditVideo2D extends EditBase{[_0x3a2b68(1320)](){const e={_0x62d668:4076,_0x2e0018:1754},t=_0x3a2b68,i=this._graphic[t(e._0x62d668)],s=this.createDragger({position:i,onDragEnd:(r,o)=>{this._graphic.position=o}});this.draggers[t(e._0x2e0018)](s)}}const DEF_STYLE$r={distance:.1,perPositionHeight:!![],showFrustum:![],opacity:1,flipx:![],flipy:![]};class Video2D extends PolygonEntity{constructor(e={}){const t=_0x3a2b68;e[t(2748)]={...DEF_STYLE$r,...e[t(2748)]},super(e),e.position&&(this.position=e.position),this._videoPlay=!![]}get[_0x3a2b68(1637)](){let e=[];return this._frustumPrimitive&&e.push(this._frustumPrimitive),this._entity_label&&e.push(this._entity_label),this._entity_outlines&&(e=e.concat(this._entity_outlines)),e}get[_0x3a2b68(1746)](){return EditVideo2D}get position(){return getPositionValue(this[_0x3a2b68({_0x594fbc:1187}._0x594fbc)])}set position(e){const t=_0x3a2b68;var i;this._point=LngLatPoint.parse(e),this._position=(i=this._point)===null||i===void 0?void 0:i.toCartesian(),this._entity&&(this._updateDraw(),this._updatePositionsHook(),this[t(3112)]())}get point(){return this[_0x3a2b68({_0x1fa436:3601}._0x1fa436)]}get coordinate(){return this.point.toArray()}get targetPosition(){return this[_0x3a2b68({_0x3a2141:1941}._0x3a2141)].targetPosition}set[_0x3a2b68(497)](e){const t={_0x23e86b:1575,_0x5711ab:1133,_0x5442cb:4076},i=_0x3a2b68;var s;if(this.options.targetPosition=e,!this._map)return;const r=this.position;if(!r)return;const o=LngLatPoint.toCartesian(e,(s=this[i(t._0x23e86b)])===null||s===void 0?void 0:s[i(545)]);this.distance=Cesium__namespace[i(2978)].distance(r,o);const c=Cesium__namespace[i(2978)].normalize(Cesium__namespace.Cartesian3.subtract(o,r,new Cesium__namespace.Cartesian3),new Cesium__namespace.Cartesian3),_=Cesium__namespace.Cartesian3.normalize(r,new Cesium__namespace.Cartesian3),l=new Cesium__namespace[i(t._0x5711ab)](this._map.scene);l[i(t._0x5442cb)]=r,l.direction=c,l.up=_,this.style.heading=Cesium__namespace.Math.toDegrees(l.heading),this.style.pitch=Cesium__namespace.Math.toDegrees(l.pitch),this._updateDraw(),this._bindHierarchy()}get heading(){return this.style.heading??0}set heading(e){const t={_0x230cc5:3112},i=_0x3a2b68;this.style.heading=e,this[i(3456)](),this[i(t._0x230cc5)]()}get pitch(){const e=_0x3a2b68;return this.style[e(1630)]??0}set pitch(e){const t={_0x59e0bb:1630},i=_0x3a2b68;this.style[i(t._0x59e0bb)]=e,this[i(3456)](),this._bindHierarchy()}get roll(){return this.style.roll??0}set roll(e){const t={_0x6d28d4:3456},i=_0x3a2b68;this.style.roll=e,this[i(t._0x6d28d4)](),this._bindHierarchy()}get[_0x3a2b68(2580)](){return this.style.angle}set angle(e){const t={_0x392529:3456},i=_0x3a2b68;this.style.angle=e,this[i(t._0x392529)](),this._bindHierarchy()}get angle2(){const e=_0x3a2b68;return this.style.angle2??this.style[e(2580)]}set angle2(e){const t={_0x14a153:2748},i=_0x3a2b68;this[i(t._0x14a153)].angle2=e,this._updateDraw(),this._bindHierarchy()}get[_0x3a2b68(3481)](){return this[_0x3a2b68({_0x320ba4:2748}._0x320ba4)].distance}set distance(e){const t=_0x3a2b68;this[t(2748)][t(3481)]=e,this._updateDraw(),this._bindHierarchy()}get opacity(){const e={_0x4eb1da:3248},t=_0x3a2b68;return this.style[t(e._0x4eb1da)]}set[_0x3a2b68(3248)](e){const t={_0x3aab43:4335},i=_0x3a2b68;this.style.opacity=e,this._entity&&(this._entity[i(4383)].material._color._value.alpha=e,this[i(t._0x3aab43)].polygon.material.transparent=e!==1)}get flipx(){return this[_0x3a2b68(2748)].flipx}set flipx(e){const t={_0x4c0526:4383,_0x203782:1957},i=_0x3a2b68;this.style[i(1957)]=e,this._entity&&(this._entity[i(t._0x4c0526)].material[i(t._0x203782)]=e)}get showFrustum(){return this.style.showFrustum}set[_0x3a2b68(685)](e){const t=_0x3a2b68;this.style.showFrustum=e,this._frustumPrimitive[t(442)]=e}get play(){return this[_0x3a2b68({_0x3081d3:2351}._0x3081d3)]}set play(e){if(this._videoPlay=e,!!this._videoContainer)try{this._videoPlay?this._videoContainer.play():this._videoContainer.pause()}catch{}}[_0x3a2b68(2112)](){const e={_0x546de8:2748,_0x45a23c:2748,_0x1a19a7:659,_0x5beb24:2085,_0x49871c:3662,_0x131a84:659,_0x397959:2748,_0x54ea2d:3248,_0x23f018:2748,_0x38b4eb:2748},t=_0x3a2b68;var i;this[t(3210)]&&(i=this._videoContainer)!==null&&i!==void 0&&i.parentNode&&(this._videoContainer[t(3594)].removeChild(this._videoContainer),delete this._hasRemoveElement,delete this._videoContainer),this[t(e._0x546de8)].url?(this._videoContainer=createVideo(this[t(e._0x45a23c)].url,this.style.fileType,"",document.body),this[t(e._0x1a19a7)].style[t(e._0x5beb24)]=t(e._0x49871c),this[t(3210)]=!![]):this[t(e._0x546de8)].container&&(this[t(e._0x131a84)]=this.style.container),this._videoContainer&&(this._entity.polygon[t(3793)]=new Image2MaterialProperty({image:this[t(e._0x1a19a7)],color:Cesium__namespace.Color.WHITE.withAlpha(this[t(e._0x397959)][t(e._0x54ea2d)]),transparent:this[t(e._0x23f018)].opacity!==1,flipx:this[t(e._0x38b4eb)][t(1957)],flipy:this.style.flipy}))}setOpacity(e){const t={_0x97bdae:3248,_0xb4f723:3793},i=_0x3a2b68;this.style[i(t._0x97bdae)]=e,this._entity&&(this._entity.polygon[i(t._0xb4f723)].opacity=e,this._entity.polygon.material[i(3783)]=this.style.opacity!==1)}[_0x3a2b68(585)](){const e={_0x43f06c:497},t=_0x3a2b68;super._mountedHook(),this.options.targetPosition&&(this.targetPosition=this[t(1941)][t(e._0x43f06c)]),this.updateVideoContainer()}_updateStyleHook(e,t){const i={_0x413f26:2019,_0x42a9fd:2112},s=_0x3a2b68;super[s(i._0x413f26)](e,t),(t.url||t.container)&&this[s(i._0x42a9fd)]()}_addedHook(e){const t=_0x3a2b68;this._updateDraw(),this._bindHierarchy(),this.dataSource[t(2931)].add(this._entity)}_removedHook(){const e={_0x5a7d7d:3594},t=_0x3a2b68;var i;this._frustumPrimitive&&(this[t(4053)].primitiveCollection.remove(this._frustumPrimitive),delete this._frustumPrimitive),this.dataSource[t(2931)].remove(this[t(4335)]),this[t(3210)]&&(i=this[t(659)])!==null&&i!==void 0&&i[t(e._0x5a7d7d)]&&(this._videoContainer.parentNode.removeChild(this[t(659)]),delete this._hasRemoveElement,delete this._videoContainer)}_updateDraw(){const e={_0x7f141f:1575,_0x115a6b:1185,_0x2f8c30:2580,_0x38d58a:2657,_0x473166:3569,_0x5ebf86:2748,_0x3d93db:2789,_0x4994fa:3458,_0x36c5eb:2978,_0xbadabb:3458,_0x3858b4:3965,_0x3ccb93:2206},t=_0x3a2b68;if(!this[t(e._0x7f141f)])return;const i=this.position;if(!i)return;const s=new Cesium__namespace.HeadingPitchRoll(Cesium__namespace.Math.toRadians(this.heading),Cesium__namespace.Math[t(1185)](this.pitch),Cesium__namespace.Math[t(e._0x115a6b)](this.roll)),r=new Cesium__namespace.Camera(this._map.scene);r.position=i,r.frustum.fov=Cesium__namespace.Math.toRadians(this[t(e._0x2f8c30)]*2),r.frustum.aspectRatio=this.angle/this.angle2,r.frustum[t(e._0x38d58a)]=.01,r[t(e._0x473166)].far=this[t(2748)].distance,r.setView({destination:i,orientation:{heading:s.heading,pitch:s.pitch,roll:s.roll}}),this._createFrustumPrimitive(r);const o=r.directionWC,c=r.upWC,_=r.rightWC,l=new Cesium__namespace.Ray(i,o),d=Cesium__namespace.Ray.getPoint(l,this[t(e._0x5ebf86)].distance,new Cesium__namespace.Cartesian3),f=Cesium__namespace.Math[t(1185)](this.angle),g=Math[t(4272)](f),b=this[t(e._0x5ebf86)][t(3481)]*g,C=b/r.frustum.aspectRatio,P=Math[t(e._0x3d93db)](b*b+C*C),S=new Cesium__namespace.Cartesian3,L=new Cesium__namespace.Ray(d,_),E=Cesium__namespace[t(3458)].getPoint(L,b,new Cesium__namespace.Cartesian3),M=new Cesium__namespace.Ray(E,c);Cesium__namespace[t(e._0x4994fa)].getPoint(M,C,S);const D=new Cesium__namespace.Cartesian3,R=Cesium__namespace.Cartesian3.negate(c,new Cesium__namespace[t(2978)]),k=new Cesium__namespace.Ray(E,R);Cesium__namespace.Ray[t(1544)](k,C,D);const N=new Cesium__namespace[t(e._0x36c5eb)],$=Cesium__namespace[t(e._0x36c5eb)].normalize(Cesium__namespace.Cartesian3.subtract(d,S,new Cesium__namespace.Cartesian3),new Cesium__namespace.Cartesian3),B=new Cesium__namespace.Ray(d,$);Cesium__namespace.Ray.getPoint(B,P,N);const F=new Cesium__namespace[t(e._0x36c5eb)],z=Cesium__namespace.Cartesian3.normalize(Cesium__namespace.Cartesian3.subtract(d,D,new Cesium__namespace.Cartesian3),new Cesium__namespace[t(e._0x36c5eb)]),Y=new Cesium__namespace[t(e._0xbadabb)](d,z);Cesium__namespace.Ray.getPoint(Y,P,F);const J=[F,S,D,N];this[t(e._0x3858b4)]=J,this[t(e._0x3ccb93)]&&(this._positions_draw=this[t(e._0x3858b4)])}_bindHierarchy(){const e={_0x23cb60:2191,_0x475575:468,_0x44a10b:2004},t=_0x3a2b68;if(this._entity)if(this._position instanceof Cesium__namespace[t(e._0x23cb60)]||this._position instanceof Cesium__namespace[t(e._0x475575)]){const i=new Cesium__namespace.PolygonHierarchy;this[t(4335)].polygon.hierarchy=new Cesium__namespace.CallbackProperty(s=>(this[t(3456)](),i.positions=this._positions,i),![])}else this[t(4335)].polygon.hierarchy=new Cesium__namespace[t(e._0x44a10b)](this[t(3965)])}[_0x3a2b68(2020)](e){const t={_0x440220:1168,_0x319ee0:3185,_0x254eb8:4053,_0x161c33:1361,_0x5dfa08:3286,_0x1f1f10:3569,_0x3298d6:1382},i=_0x3a2b68,s=e[i(2522)],r=e.upWC;let o=e[i(681)];o=Cesium__namespace.Cartesian3[i(2220)](o,new Cesium__namespace.Cartesian3);const c=new Cesium__namespace[i(t._0x440220)];Cesium__namespace[i(t._0x440220)][i(t._0x319ee0)](c,0,o,c),Cesium__namespace.Matrix3.setColumn(c,1,r,c),Cesium__namespace.Matrix3.setColumn(c,2,s,c);const _=Cesium__namespace.Quaternion[i(1330)](c,new Cesium__namespace.Quaternion);this._frustumPrimitive&&this[i(t._0x254eb8)].primitiveCollection[i(t._0x161c33)](this._frustumPrimitive),this._frustumPrimitive=new Cesium__namespace.Primitive({geometryInstances:new Cesium__namespace[i(t._0x5dfa08)]({id:this.id,geometry:new Cesium__namespace.FrustumOutlineGeometry({origin:e.position,orientation:_,frustum:e[i(t._0x1f1f10)],_drawNearPlane:!![]}),attributes:{color:Cesium__namespace.ColorGeometryInstanceAttribute[i(t._0x3298d6)](Cesium__namespace.Color.AZURE)}}),appearance:new Cesium__namespace.PerInstanceColorAppearance({translucent:![],flat:!![]}),asynchronous:![],show:this.showFrustum&&this.show}),this[i(t._0x254eb8)].primitiveCollection[i(3674)](this._frustumPrimitive)}[_0x3a2b68(1203)](e,t){const i={_0x55e05d:2386},s=_0x3a2b68,r=getAttrVal(e,{onlySimpleType:!![]});return this.style.container&&(r.container=s(i._0x55e05d)+this._videoContainer.id+")"),r}_getGeoJsonGeometry(e){return{type:_0x3a2b68({_0x368914:1910}._0x368914),coordinates:this.getCoordinate(e==null?void 0:e.noAlt)}}[_0x3a2b68(2632)](e){return this.point?this.point.toArray(e):[]}setView(){const e={_0x582b52:1575,_0x16d7a1:4233},t=_0x3a2b68;this._map&&this[t(e._0x582b52)][t(e._0x16d7a1)].setView({destination:this.position,orientation:{heading:Cesium__namespace[t(2806)].toRadians(this.heading),pitch:Cesium__namespace[t(2806)][t(1185)](this.pitch),roll:Cesium__namespace.Math.toRadians(this.roll)}})}startDraw(e){const t={_0x338edd:1832,_0x17d5f3:1575},i=_0x3a2b68;if(this[i(t._0x338edd)])return this;if(this[i(1832)]=!![],e&&this.addTo(e),!this[i(t._0x17d5f3)])throw new Error("绘制时_map不能为空,请将对象添加到图层，并且图层已添加到Map");this._map._setEditCursor(!![]),this.enableControl(![]),this._startDrawHook(),this[i(1109)](EventType.drawStart,{drawtype:this.type,graphic:this},!![])}stopDraw(){const e={_0x5ca438:1832,_0xe81518:3481,_0x2bd883:1512,_0x386426:1941,_0x44fe36:3531,_0x341263:583},t=_0x3a2b68;var i,s,r;if(!this[t(e._0x5ca438)])return this;if(this._stopDrawHook(),this._map._setEditCursor(![]),this.enableControl(!![]),this._map.closeSmallTooltip(),this._enabledDraw=![],!this.position||!this[t(e._0xe81518)]){this.remove(!![]);return}this.fire(EventType.drawCreated,{drawtype:this.type,graphic:this},!![]),(i=this.options)!==null&&i!==void 0&&i.success&&this.options[t(e._0x2bd883)](this),(s=this[t(e._0x386426)])!==null&&s!==void 0&&(r=s[t(e._0x44fe36)])!==null&&r!==void 0&&r.resolve&&this[t(1941)]._promise[t(e._0x341263)](this)}_startDrawHook(){const e={_0x2a235e:1575},t=_0x3a2b68;this[t(e._0x2a235e)].on(EventType.click,this[t(1518)],this),this[t(1575)].on(EventType.mouseMove,this[t(841)],this)}_stopDrawHook(){const e={_0x325d8a:1575,_0x1ce868:2971,_0x19c69d:1575,_0x24d719:1840,_0x135468:841},t=_0x3a2b68;this[t(e._0x325d8a)][t(e._0x1ce868)](EventType.click,this._onClickHandler,this),this[t(e._0x19c69d)].off(EventType[t(e._0x24d719)],this[t(e._0x135468)],this)}[_0x3a2b68(1518)](e){const t={_0x5de442:1603},i=_0x3a2b68,s=e.cartesian;if(s){if(this.fire(EventType[i(4064)],{...e,drawtype:this[i(t._0x5de442)],graphic:this},!![]),!this.position){this[i(4076)]=s;return}this.targetPosition=s,this.stopDraw(),this.fire(EventType.drawCreated,e)}}_onMouseMoveHandler(e){const t={_0x3ab330:3600,_0x2d4f2d:2236,_0x1b681e:1575},i=_0x3a2b68,s=e.cartesian;if(!s)return;this.position?(this[i(497)]=s,this.fire(EventType.drawMouseMove,{...e,drawtype:this.type,graphic:this},!![]),this._map.openSmallTooltip(e[i(1127)],this._map[i(t._0x3ab330)](i(t._0x2d4f2d)))):this[i(t._0x1b681e)].openSmallTooltip(e[i(1127)],this._map.getLangText("_单击开始绘制"))}}register$4("video2D",Video2D,!![]);class PitEntity extends BasePolyEntity{constructor(e={}){const t=_0x3a2b68;super(e),this.style.diffHeight=this.style.diffHeight??10,this.style.splitNum=this[t(2748)].splitNum??50}get diffHeight(){return this.style.diffHeight}set diffHeight(e){const t={_0xa94233:1882,_0x4b0941:1521},i=_0x3a2b68;if(this.style[i(t._0xa94233)]=e,this._entity){const s=this._minHeight-this.style.diffHeight;this._entity.polygon.height=s;const r=Array(this._positionsWall.length).fill(s);this._entity.wall[i(t._0x4b0941)]=r}}_mountedHook(){const e={_0x98471b:806,_0x1af651:3397},t=_0x3a2b68,i=this.options[t(1924)]||this[t(e._0x98471b)]();this.data=i;const s={polygon:new Cesium__namespace.PolygonGraphics({hierarchy:new Cesium__namespace.PolygonHierarchy(this.positions),perPositionHeight:![],height:i.height,material:new Cesium__namespace.ImageMaterialProperty({image:this.style.imageBottom,repeat:new Cesium__namespace.Cartesian2(2,2),transparent:![]}),fill:!![],outline:![]}),wall:{positions:i[t(e._0x1af651)],minimumHeights:i.minimumHeights,maximumHeights:i.maximumHeights,fill:!![],material:new Cesium__namespace.ImageMaterialProperty({image:this.style.image,repeat:new Cesium__namespace.Cartesian2(1,1)}),outline:![]}};this._entity=this[t(1956)](s),this._minHeight=i.minHeight,this._positionsWall=i.positionsWall,this._wallHeights=i[t(2872)],this.style.label&&this._addLabel()}_getPitData(){const e={_0x4438f6:744,_0x27179a:2228,_0x3f3b01:400},t=_0x3a2b68,i=this.positions,s=interPolyline({scene:this[t(1575)][t(e._0x4438f6)],positions:i.concat(i[0]),splitNum:this.style[t(3384)]}),r=[];let o=Number[t(2617)];for(let l=0,d=s[t(400)];l<d;l++){const f=Cesium__namespace[t(e._0x27179a)].fromCartesian(s[l]);o=Math[t(2501)](o,f.height),r.push(f[t(4241)])}const c=o-this.style.diffHeight,_=Array(s[t(e._0x3f3b01)])[t(2164)](c);return{height:c,minHeight:o,positionsWall:s,minimumHeights:_,maximumHeights:r}}setUpHeight(e){const t={_0x5c51f4:4241,_0xaf94ee:4335},i=_0x3a2b68,s=this._minHeight-this.style[i(1882)],r=s+e,o=[],c=[];for(let _=0,l=this._wallHeights.length;_<l;_++){const d=this._wallHeights[_];c.push(d+e),o.push(r)}this._entity&&(this._entity.polygon[i(t._0x5c51f4)]=s,this._entity.wall.minimumHeights=o,this[i(t._0xaf94ee)].wall[i(2872)]=c)}}register$4("pitEntity",PitEntity);class AlgorithmUtil{constructor(){const e={_0xc62943:2364},t=_0x3a2b68;this.HALF_PI=Math.PI/2,this[t(e._0xc62943)]=1e-4}[_0x3a2b68(1185)](e){return e*Math.PI/180}[_0x3a2b68(3046)](e,t,i,s,r){const o=this.getAzimuth(e,t),c=r?o+i:o-i,_=s*Math.cos(c),l=s*Math.sin(c);return[t[0]+_,t[1]+l]}getAzimuth(e,t){const i=_0x3a2b68;let s=0;const r=Math.asin(Math.abs(t[1]-e[1])/this[i(2846)](e,t));return t[1]>=e[1]&&t[0]>=e[0]?s=r+Math.PI:t[1]>=e[1]&&t[0]<e[0]?s=Math.PI*2-r:t[1]<e[1]&&t[0]<e[0]?s=r:t[1]<e[1]&&t[0]>=e[0]&&(s=Math.PI-r),s}MathDistance(e,t){return Math[_0x3a2b68(2789)](Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}isClockWise(e,t,i){return i?(i[1]-e[1])*(t[0]-e[0])>(t[1]-e[1])*(i[0]-e[0]):![]}getBisectorNormals(e,t,i,s){const r={_0x489a49:415,_0x309fc2:2846},o=_0x3a2b68,c=this[o(r._0x489a49)](t,i,s);let _=null,l=null,d=null,f=null,g=null;const b=Math[o(2789)](c[0]*c[0]+c[1]*c[1]),C=c[0]/b,P=c[1]/b,S=this.MathDistance(t,i),L=this[o(r._0x309fc2)](i,s);return b>this[o(2364)]?this.isClockWise(t,i,s)?(d=e*S,f=i[0]-d*P,g=i[1]+d*C,_=[f,g],d=e*L,f=i[0]+d*P,g=i[1]-d*C,l=[f,g]):(d=e*S,f=i[0]+d*P,g=i[1]-d*C,_=[f,g],d=e*L,f=i[0]-d*P,g=i[1]+d*C,l=[f,g]):(f=i[0]+e*(t[0]-i[0]),g=i[1]+e*(t[1]-i[1]),_=[f,g],f=i[0]+e*(s[0]-i[0]),g=i[1]+e*(s[1]-i[1]),l=[f,g]),[_,l]}getCubicValue(e,t,i,s,r){e=Math.max(Math.min(e,1),0);const o=1-e,c=e*e,_=c*e,l=o*o,d=l*o,f=d*t[0]+3*l*e*i[0]+3*o*c*s[0]+_*r[0],g=d*t[1]+3*l*e*i[1]+3*o*c*s[1]+_*r[1];return[f,g]}getNormal(e,t,i){let s=e[0]-t[0],r=e[1]-t[1];const o=Math.sqrt(s*s+r*r);s/=o,r/=o;let c=i[0]-t[0],_=i[1]-t[1];const l=Math.sqrt(c*c+_*_);c/=l,_/=l;const d=s+c,f=r+_;return[d,f]}getArcPoints(e,t,i,s){let r=null,o=null;const c=[];let _=s-i;_=_<0?_+Math.PI*2:_;for(let l=0;l<=100;l++){const d=i+_*l/100;r=e[0]+t*Math.cos(d),o=e[1]+t*Math.sin(d),c.push([r,o])}return c}getPointByAngleAndLen(e,t,i){const s=e[0]+t*Math.cos(i),r=e[1]+t*Math.sin(i);return[s,r]}[_0x3a2b68(2455)](e){return Math.pow(this.wholeDistance(e),.99)}wholeDistance(e){const t={_0x374dd6:2846},i=_0x3a2b68;let s=0;const r=this;return e&&Array[i(391)](e)&&e.length>0&&e.forEach(function(o,c){const _=i;c<e.length-1&&(s+=r[_(t._0x374dd6)](o,e[c+1]))}),s}getArrowHeadPoints(e){const t={_0x1bc339:2188,_0x5138dd:3046},i=_0x3a2b68;if(!e)return[];const s=e.points;if(s.length<2)return[];const r=e.tailLeft,o=e.tailRight,c=e.headTailFactor,_=e[i(t._0x1bc339)],l=e.neckHeightFactor,d=e[i(3108)],f=e.headHeightFactor;let g=this.getBaseLength(s),b=g*f;const C=s[s.length-1];g=this.MathDistance(C,s[s.length-2]);const P=this.MathDistance(r,o);b>P*c&&(b=P*c);const S=b*d,L=b*_;b=b>g?g:b;const E=b*l,M=this.getThirdPoint(s[s.length-2],C,0,b,!![]),D=this[i(t._0x5138dd)](s[s.length-2],C,0,E,!![]),R=this[i(3046)](C,M,this.HALF_PI,S,![]),k=this[i(3046)](C,M,this.HALF_PI,S,!![]),N=this.getThirdPoint(C,D,this.HALF_PI,L,![]),$=this.getThirdPoint(C,D,this.HALF_PI,L,!![]);return[N,R,C,k,$]}getTailPoints(e){const t=_0x3a2b68;if(!e)return;const i=e.points,s=e.tailWidthFactor,r=e.swallowTailFactor,o=this.getBaseLength(i),c=o*s,_=this.getThirdPoint(i[1],i[0],this[t(755)],c,![]),l=this[t(3046)](i[1],i[0],this.HALF_PI,c,!![]),d=c*r,f=this[t(3046)](i[1],i[0],0,d,!![]);return[_,f,l]}[_0x3a2b68(1650)](e,t,i,s){const r=this.wholeDistance(e),o=this.getBaseLength(e),c=o*s,_=this.MathDistance(t,i),l=(c-_)/2;let d=0;const f=[],g=[];for(let b=1;b<e.length-1;b++){const C=this.getAngleOfThreePoints(e[b-1],e[b],e[b+1])/2;d+=this.MathDistance(e[b-1],e[b]);const P=(c/2-d/r*l)/Math.sin(C),S=this.getThirdPoint(e[b-1],e[b],Math.PI-C,P,!![]),L=this.getThirdPoint(e[b-1],e[b],C,P,![]);f.push(S),g.push(L)}return f.concat(g)}getAngleOfThreePoints(e,t,i){const s=_0x3a2b68,r=this[s(2403)](t,e)-this.getAzimuth(t,i);return r<0?r+Math.PI*2:r}getQBSplinePoints(e){if(e[_0x3a2b68({_0x5b8a21:400}._0x5b8a21)]<=2)return e;{const r=[],o=e.length-2-1;r.push(e[0]);for(let c=0;c<=o;c++)for(let _=0;_<=1;_+=.05){let l=0,d=0;for(let f=0;f<=2;f++){const g=this.getQuadricBSplineFactor(f,_);l+=g*e[c+f][0],d+=g*e[c+f][1]}r.push([l,d])}return r.push(e[e.length-1]),r}}getQuadricBSplineFactor(e,t){const i={_0x1bcf96:392},s=_0x3a2b68;let r=0;return e===0?r=Math[s(i._0x1bcf96)](t-1,2)/2:e===1?r=(-2*Math.pow(t,2)+2*t+1)/2:e===2&&(r=Math.pow(t,2)/2),r}[_0x3a2b68(1136)](e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2,(e[2]||0+t[2]||0)/2]}getCircleCenterOfThreePoints(e,t,i){const s={_0x29f8c8:2735},r=_0x3a2b68,o=e[2]||0,c=[(e[0]+t[0])/2,(e[1]+t[1])/2,o],_=[c[0]-e[1]+t[1],c[1]+e[0]-t[0],o],l=[(e[0]+i[0])/2,(e[1]+i[1])/2,o],d=[l[0]-e[1]+i[1],l[1]+e[0]-i[0],o];return this[r(s._0x29f8c8)](c,_,l,d)}[_0x3a2b68(2735)](e,t,i,s){if(e[1]===t[1]){const l=(s[0]-i[0])/(s[1]-i[1]),d=l*(e[1]-i[1])+i[0],f=e[1];return[d,f]}if(i[1]===s[1]){const l=(t[0]-e[0])/(t[1]-e[1]),d=l*(i[1]-e[1])+e[0],f=i[1];return[d,f]}const r=(t[0]-e[0])/(t[1]-e[1]),o=(s[0]-i[0])/(s[1]-i[1]),c=(r*e[1]-e[0]-o*i[1]+i[0])/(r-o);return[r*c-r*e[1]+e[0],c,e[2]||0]}getBezierPoints(e){if(e.length<=2)return e;{const t=[],i=e.length-1;for(let s=0;s<=1;s+=.01){let r=0,o=0;for(let c=0;c<=i;c++){const _=this.getBinomialFactor(i,c),l=Math.pow(s,c),d=Math.pow(1-s,i-c);r+=_*l*d*e[c][0],o+=_*l*d*e[c][1]}t.push([r,o])}return t}}getFactorial(e){let t=1;switch(e){case e<=1:t=1;break;case e===2:t=2;break;case e===3:t=6;break;case e===24:t=24;break;case e===5:t=120;break;default:for(let i=1;i<=e;i++)t*=i;break}return t}[_0x3a2b68(4311)](e,t){return this.getFactorial(e)/(this.getFactorial(t)*this.getFactorial(e-t))}}const algorithmUtil=new AlgorithmUtil,minAnalge=algorithmUtil.toRadians(20),maxAnalge=algorithmUtil.toRadians(160);class ArrowParentUtil{constructor(){this.algorithmUtil=algorithmUtil}getMaxHeight(e){const t=_0x3a2b68;let i=e[0][2]||0;for(let s=0;s<e[t(400)];s++)e[2]>i&&(i=e[2]);return i}getArrowHeadPoints(e,t,i){const s={_0x484b75:400,_0x412cf7:2455,_0x50c453:3548,_0x126078:3697,_0x1e0109:4394,_0xfc67b2:2188,_0xb98e62:3697,_0x64abb8:3697,_0xc5e8c5:3046},r=_0x3a2b68;if(!e||e[r(s._0x484b75)]<2)return null;let o=this.algorithmUtil[r(s._0x412cf7)](e)*this[r(s._0x50c453)];const c=this[r(s._0x126078)].MathDistance(t,i);o>c*this[r(4394)]&&(o=c*this[r(s._0x1e0109)]);const _=e[e.length-1],l=e[e.length-2],d=this[r(s._0x126078)][r(2846)](_,l);o=o>d?d:o;const f=o*this.headWidthFactor,g=o*this[r(s._0xfc67b2)],b=o*this.neckHeightFactor,C=this[r(s._0xb98e62)].getThirdPoint(l,_,0,o,!![]),P=this[r(s._0x64abb8)][r(3046)](l,_,0,b,!![]),S=this[r(3697)][r(3046)](_,C,Math.PI/2,f,![]),L=this.algorithmUtil.getThirdPoint(_,C,Math.PI/2,f,!![]),E=this[r(3697)][r(s._0xc5e8c5)](_,P,Math.PI/2,g,![]),M=this.algorithmUtil.getThirdPoint(_,P,Math.PI/2,g,!![]);return[E,S,_,L,M]}getArrowBodyPoints(e,t,i,s){const r={_0xdeb07e:3697},o=_0x3a2b68,c=this.algorithmUtil.wholeDistance(e),_=this.algorithmUtil.getBaseLength(e),l=_*s,d=this.algorithmUtil[o(2846)](t,i),f=(l-d)/2;let g=0;const b=[],C=[];for(let P=1;P<e.length-1;P++){let S=this.algorithmUtil.getAngleOfThreePoints(e[P-1],e[P],e[P+1])/2;S<minAnalge?S=minAnalge:S>maxAnalge&&(S=maxAnalge),g+=this[o(3697)][o(2846)](e[P-1],e[P]);const L=(l/2-g/c*f)/Math[o(3492)](S),E=this.algorithmUtil.getThirdPoint(e[P-1],e[P],Math.PI-S,L,!![]),M=this[o(r._0xdeb07e)][o(3046)](e[P-1],e[P],S,L,![]);b.push(E),C[o(1754)](M)}return b.concat(C)}}class AttackArrowUtil extends ArrowParentUtil{[_0x3a2b68(3483)](e={}){const t=_0x3a2b68;this[t(3548)]=e.headHeightFactor||.18,this.headWidthFactor=e[t(3108)]||.3,this.neckHeightFactor=e.neckHeightFactor||.85,this.neckWidthFactor=e.neckWidthFactor||.15,this.headTailFactor=e.headTailFactor||.8}[_0x3a2b68(3242)](e,t){const i={_0x1071ae:3697},s=_0x3a2b68;if(!e||e.length===0)return e;this.positions=e,this[s(3483)](t);const r=cartesians2mercators(e),o=(t==null?void 0:t.maxHeight)??this[s(3320)](r),c=r[r.length-1],_=r[r.length-2];this[s(3697)].MathDistance(c,_)<1&&r.length>2&&r.splice(r.length-2,1);let d=r[0],f=r[1];this[s(i._0x1071ae)].isClockWise(r[0],r[1],r[2])&&(d=r[1],f=r[0]);const g=this.algorithmUtil.Mid(d,f),b=[g].concat(r.slice(2)),C=this.getArrowHeadPoints(b,d,f);if(!C||C.length<4)return e;const P=C[0],S=C[4],L=this[s(3697)].MathDistance(d,f)/this[s(3697)].getBaseLength(b),E=this.getArrowBodyPoints(b,P,S,L),M=E.length;let D=[d].concat(E.slice(0,M/2));D.push(P);let R=[f].concat(E.slice(M/2,M));R.push(S),D=this.algorithmUtil.getQBSplinePoints(D),R=this.algorithmUtil.getQBSplinePoints(R);const k=D.concat(C,R[s(1178)]());return mercators2cartesians(k,o)}}const attackArrowUtil$1=new AttackArrowUtil;class AttackArrow extends PolygonEntity{get hasClosure(){return![]}getShowPositions(e){return!e||e.length<2?e:(this.style.maxHeight=this.getMaxHeight(),attackArrowUtil$1.startCompute(e,this.style))}[_0x3a2b68(1830)](e){const t={_0x42dce7:2627},i=_0x3a2b68;return setPositionsHeight(e,this[i(2748)][i(t._0x42dce7)])}}register$4("attackArrow",AttackArrow);class AttackArrowPWUtil extends ArrowParentUtil{setOptions(e={}){const t=_0x3a2b68;this.headHeightFactor=e.headHeightFactor||.18,this.headWidthFactor=e.headWidthFactor||.3,this[t(1206)]=e.neckHeightFactor||.85,this.neckWidthFactor=e[t(2188)]||.15,this.tailWidthFactor=e.tailWidthFactor||.1}startCompute(e,t){const i={_0x32385e:2082,_0x17b6b8:3697},s=_0x3a2b68;if(!e||e.length===0)return e;this.positions=e,this[s(3483)](t);const r=cartesians2mercators(e),o=(t==null?void 0:t.maxHeight)??this.getMaxHeight(r),c=this.getTailPoints(r),_=this.getArrowHeadPoints(r,c[0],c[1]);if(!_||_.length<4)return e;const l=_[0],d=_[4],f=this.getArrowBodyPoints(r,l,d,this[s(822)]),g=f.length;let b=[c[0]].concat(f[s(i._0x32385e)](0,g/2));b.push(l);let C=[c[1]].concat(f[s(i._0x32385e)](g/2,g));C.push(d),b=this.algorithmUtil.getQBSplinePoints(b),C=this[s(i._0x17b6b8)].getQBSplinePoints(C);const P=b[s(4083)](_,C.reverse());return mercators2cartesians(P,o)}getTailPoints(e){const t={_0x5784b7:3697},i=_0x3a2b68,s=this.algorithmUtil[i(2455)](e),r=s*this[i(822)],o=this[i(t._0x5784b7)].getThirdPoint(e[1],e[0],Math.PI/2,r,![]),c=this.algorithmUtil.getThirdPoint(e[1],e[0],Math.PI/2,r,!![]);return[o,c]}}const attackArrowPWUtil=new AttackArrowPWUtil;class AttackArrowPW extends PolygonEntity{get hasClosure(){return![]}getShowPositions(e){const t=_0x3a2b68;return!e||e.length<2?e:(this.style.maxHeight=this[t(3320)](),attackArrowPWUtil[t(3242)](e,this[t(2748)]))}[_0x3a2b68(1830)](e){const t=_0x3a2b68;return setPositionsHeight(e,this[t(2748)][t(2627)])}static[_0x3a2b68(2491)](e,t){return!e||e[_0x3a2b68({_0x362966:400}._0x362966)]<2?e:(e=LngLatArray.toCartesians(e),attackArrowPWUtil.startCompute(e,t))}}register$4(_0x3a2b68(4084),AttackArrowPW);class AttackArrowYWUtil extends ArrowParentUtil{setOptions(e={}){const t={_0xc39f5e:3108,_0x1e03ba:2188},i=_0x3a2b68;this.headHeightFactor=e.headHeightFactor||.18,this[i(t._0xc39f5e)]=e[i(3108)]||.3,this.neckHeightFactor=e.neckHeightFactor||.85,this[i(t._0x1e03ba)]=e.neckWidthFactor||.15,this.tailWidthFactor=e.tailWidthFactor||.1,this.headTailFactor=e.headTailFactor||.8,this.swallowTailFactor=e.swallowTailFactor||1}startCompute(e,t){const i={_0x10b2eb:2082,_0x5d8bfd:2664,_0x235d30:4083,_0x1ffd85:3697},s=_0x3a2b68;if(!e||e.length===0)return e;this.positions=e,this.setOptions(t);const r=cartesians2mercators(e),o=(t==null?void 0:t.maxHeight)??this.getMaxHeight(r),c=[r[0],r[1]];let _=c[0],l=c[1];this.algorithmUtil[s(3716)](r[0],r[1],r[2])&&(_=r[1],l=r[0]);const d=this.algorithmUtil.Mid(_,l),f=[d].concat(r[s(i._0x10b2eb)](2)),g=this.getArrowHeadPoints(f,_,l);if(!g||g.length<4)return e;const b=[g[0],g[4]],C=b[0],P=b[1],S=this.algorithmUtil.MathDistance(_,l),L=this.algorithmUtil.getBaseLength(f),E=L*this.tailWidthFactor*this[s(i._0x5d8bfd)],M=this.algorithmUtil.getThirdPoint(f[1],f[0],0,E,!![]),D=S/L,R=this.getArrowBodyPoints(f,C,P,D),k=R.length;let N=[_].concat(R.slice(0,k/2));N.push(C);let $=[l][s(i._0x235d30)](R.slice(k/2,k));$.push(P),N=this.algorithmUtil.getQBSplinePoints(N),$=this[s(i._0x1ffd85)].getQBSplinePoints($);const B=N.concat(g,$.reverse(),[M,N[0]]);return mercators2cartesians(B,o)}}const attackArrowUtil=new AttackArrowYWUtil;class AttackArrowYW extends PolygonEntity{get[_0x3a2b68(2611)](){return![]}getShowPositions(e){const t={_0x5f69c:2627},i=_0x3a2b68;return!e||e.length<3?e:(this.style[i(t._0x5f69c)]=this[i(3320)](),attackArrowUtil[i(3242)](e,this.style))}_updateEditDraggerPositionHeight(e){return setPositionsHeight(e,this.style.maxHeight)}static getOutlinePositions(e,t){const i={_0x1a4a58:2249},s=_0x3a2b68;return!e||e.length<3?e:(e=LngLatArray[s(i._0x1a4a58)](e),attackArrowUtil[s(3242)](e,t))}}register$4(_0x3a2b68(4340),AttackArrowYW);class CloseCurveUtil{constructor(){this.algorithmUtil=algorithmUtil}startCompute(e,t){const i={_0x2789b7:2694,_0x37a2ac:3320,_0x379966:3697,_0x4cdc22:1436},s=_0x3a2b68;if(!e||e.length===0)return e;this[s(i._0x2789b7)]=e;const r=cartesians2mercators(e),o=(t==null?void 0:t.maxHeight)??this[s(i._0x37a2ac)](r);r.push(r[0],r[1]);let c=[];const _=[];for(let f=0;f<r.length-2;f++){const g=this[s(i._0x379966)].getBisectorNormals(.3,r[f],r[f+1],r[f+2]);c=c.concat(g)}const l=c.length;c=[c[l-1]][s(4083)](c[s(2082)](0,l-1));for(let f=0;f<r.length-2;f++){const g=r[f],b=r[f+1];_.push(g);for(let C=0;C<=100;C++){const P=this.algorithmUtil[s(i._0x4cdc22)](C/100,g,c[f*2],c[f*2+1],b);_.push(P)}_.push(b)}return mercators2cartesians(_,o)}getMaxHeight(e){const t={_0x4c77fc:400},i=_0x3a2b68;let s=e[0][2]||0;for(let r=0;r<e[i(t._0x4c77fc)];r++)e[2]>s&&(s=e[2]);return s}}const closeCurveUtil=new CloseCurveUtil;class CloseVurve extends PolygonEntity{[_0x3a2b68(2495)](e){const t={_0x498e82:400,_0x1ada04:3242},i=_0x3a2b68;return!e||e[i(t._0x498e82)]<2?e:(this.style[i(2627)]=this.getMaxHeight(),closeCurveUtil[i(t._0x1ada04)](e,this.style))}_updateEditDraggerPositionHeight(e){return setPositionsHeight(e,this[_0x3a2b68(2748)].maxHeight)}static getOutlinePositions(e,t){const i={_0x1e802f:3242},s=_0x3a2b68;return!e||e.length<2?e:(e=LngLatArray.toCartesians(e),closeCurveUtil[s(i._0x1e802f)](e,t))}}register$4(_0x3a2b68(3350),CloseVurve);class DoubleArrowUtil{constructor(){this.algorithmUtil=algorithmUtil}setOptions(e={}){const t={_0x34c4e1:1206},i=_0x3a2b68;this.headHeightFactor=e.headHeightFactor||.25,this.headWidthFactor=e.headWidthFactor||.3,this[i(t._0x34c4e1)]=e.neckHeightFactor||.85,this.neckWidthFactor=e.neckWidthFactor||.15}startCompute(e,t){const i={_0x31d0e8:1107,_0x1299c4:3697,_0x560405:1346,_0x3f359a:3697,_0x3a980e:1064,_0x134c67:4083},s=_0x3a2b68;if(!e||e[s(400)]<3)return e;this.positions=e,this.setOptions(t);const r=cartesians2mercators(e),o=(t==null?void 0:t.maxHeight)??this.getMaxHeight(r),c=[r[0],r[1],r[2]],_=c[0],l=c[1],d=c[2],f=this.positions.length;let g,b;if(f===3)g=this[s(i._0x31d0e8)](_,l,d),b=this.algorithmUtil[s(1136)](_,l);else if(f===4)g=r[3],b=this[s(i._0x1299c4)].Mid(_,l);else{const z=this.algorithmUtil.MathDistance(r[3],r[4]),Y=this.algorithmUtil[s(2846)](r[2],r[3]);z<Y*.1?(g=r[3],b=this[s(i._0x1299c4)][s(1136)](_,l)):(g=r[3],b=r[4])}let C,P;this.algorithmUtil.isClockWise(_,l,d)?(C=this.getArrowPoints(_,b,g,![]),P=this.getArrowPoints(b,l,d,!![])):(C=this[s(i._0x560405)](l,b,d,![]),P=this[s(1346)](b,_,g,!![]));const S=C.length,L=(S-5)/2,E=C.slice(0,L),M=C.slice(L,L+5);let D=C.slice(L+5,S),R=P.slice(0,L);const k=P[s(2082)](L,L+5),N=P.slice(L+5,S);R=this.algorithmUtil.getBezierPoints(R);const $=this[s(i._0x3f359a)][s(1064)](N.concat(E.slice(1)));D=this.algorithmUtil[s(i._0x3a980e)](D);const B=R[s(i._0x134c67)](k,$,M,D);return mercators2cartesians(B,o)}getTempPoint4(e,t,i){const s={_0x13b751:3697},r=_0x3a2b68,o=this[r(3697)][r(1136)](e,t),c=this.algorithmUtil.MathDistance(o,i),_=this.algorithmUtil.getAngleOfThreePoints(e,o,i);let l,d,f,g;return _<Math.PI/2?(d=c*Math.sin(_),f=c*Math[r(2519)](_),g=this.algorithmUtil.getThirdPoint(e,o,Math.PI/2,d,![]),l=this.algorithmUtil.getThirdPoint(o,g,Math.PI/2,f,!![])):_>=Math.PI/2&&_<Math.PI?(d=c*Math.sin(Math.PI-_),f=c*Math.cos(Math.PI-_),g=this[r(s._0x13b751)].getThirdPoint(e,o,Math.PI/2,d,![]),l=this.algorithmUtil[r(3046)](o,g,Math.PI/2,f,![])):_>=Math.PI&&_<Math.PI*1.5?(d=c*Math.sin(_-Math.PI),f=c*Math.cos(_-Math.PI),g=this.algorithmUtil.getThirdPoint(e,o,Math.PI/2,d,!![]),l=this[r(s._0x13b751)].getThirdPoint(o,g,Math.PI/2,f,!![])):(d=c*Math.sin(Math.PI*2-_),f=c*Math.cos(Math.PI*2-_),g=this.algorithmUtil.getThirdPoint(e,o,Math.PI/2,d,!![]),l=this.algorithmUtil.getThirdPoint(o,g,Math.PI/2,f,![])),l}getArrowPoints(e,t,i,s){const r={_0x298660:3697,_0x521d82:400,_0x3d6489:1754,_0x546acc:4025},o=_0x3a2b68,c=this.algorithmUtil.Mid(e,t),_=this.algorithmUtil.MathDistance(c,i);let l=this[o(r._0x298660)].getThirdPoint(i,c,0,_*.3,!![]),d=this.algorithmUtil.getThirdPoint(i,c,0,_*.5,!![]);l=this[o(3697)].getThirdPoint(c,l,Math.PI/2,_/5,s),d=this[o(3697)].getThirdPoint(c,d,Math.PI/2,_/4,s);const f=[c,l,d,i],g=this[o(3668)](f);if(g&&Array.isArray(g)&&g[o(r._0x521d82)]>3){const b=[g[0],g[4]],C=b[0],P=b[1],S=this[o(3697)].MathDistance(e,t)/this[o(r._0x298660)].getBaseLength(f)/2,L=this[o(1650)](f,C,P,S);if(L){const E=L[o(400)];let M=L.slice(0,E/2),D=L.slice(E/2,E);return M.push(C),D.push(P),M=M[o(1178)](),M[o(r._0x3d6489)](t),D=D.reverse(),D.push(e),M[o(1178)]().concat(g,D)}}else console.log(o(r._0x546acc),g)}getArrowHeadPoints(e){const t={_0x139a91:400,_0x302b8b:3697,_0x266eb8:3046},i=_0x3a2b68;if(!e||e.length<2)return[];const s=this[i(3697)][i(2455)](e),r=s*this.headHeightFactor,o=e[e[i(t._0x139a91)]-1],c=r*this.headWidthFactor,_=r*this.neckWidthFactor,l=r*this.neckHeightFactor,d=this.algorithmUtil.getThirdPoint(e[e.length-2],o,0,r,!![]),f=this[i(t._0x302b8b)].getThirdPoint(e[e.length-2],o,0,l,!![]),g=this.algorithmUtil[i(t._0x266eb8)](o,d,Math.PI/2,c,![]),b=this.algorithmUtil.getThirdPoint(o,d,Math.PI/2,c,!![]),C=this.algorithmUtil.getThirdPoint(o,f,Math.PI/2,_,![]),P=this[i(3697)].getThirdPoint(o,f,Math.PI/2,_,!![]);return[C,g,o,b,P]}getArrowBodyPoints(e,t,i,s){const r={_0x324291:2846,_0x84e2c9:400,_0x124e11:3046},o=_0x3a2b68,c=this.algorithmUtil.wholeDistance(e),_=this.algorithmUtil[o(2455)](e),l=_*s,d=this[o(3697)][o(r._0x324291)](t,i),f=(l-d)/2;let g=0;const b=[],C=[];for(let P=1;P<e[o(r._0x84e2c9)]-1;P++){const S=this.algorithmUtil.getAngleOfThreePoints(e[P-1],e[P],e[P+1])/2;g+=this[o(3697)].MathDistance(e[P-1],e[P]);const L=(l/2-g/c*f)/Math.sin(S),E=this.algorithmUtil[o(r._0x124e11)](e[P-1],e[P],Math.PI-S,L,!![]),M=this.algorithmUtil.getThirdPoint(e[P-1],e[P],S,L,![]);b.push(E),C.push(M)}return b.concat(C)}getMaxHeight(e){let t=e[0][2]||0;for(let i=0;i<e.length;i++)e[2]>t&&(t=e[2]);return t}}const doubleArrowUtil=new DoubleArrowUtil;class DoubleArrow extends PolygonEntity{constructor(e={}){super(e),this._minPointNum=3,this._maxPointNum=5}[_0x3a2b68(2495)](e){const t={_0x4ada07:3320},i=_0x3a2b68;return!e||e.length<this._minPointNum?e:(this.style.maxHeight=this[i(t._0x4ada07)](),doubleArrowUtil.startCompute(e,this.style))}_updateEditDraggerPositionHeight(e){return setPositionsHeight(e,this.style.maxHeight)}static getOutlinePositions(e,t){const i=_0x3a2b68;return!e||e.length<3?e:(e=LngLatArray.toCartesians(e),doubleArrowUtil[i(3242)](e,t))}}register$4("doubleArrow",DoubleArrow);class FineArrowUtil{constructor(){this.algorithmUtil=algorithmUtil}[_0x3a2b68(3483)](e={}){const t={_0x58a2cc:822,_0x29d535:2188,_0x28665f:1206},i=_0x3a2b68;this.headAngle=e.headAngle||Math.PI/8.5,this.neckAngle=e.neckAngle||Math.PI/13,this.tailWidthFactor=e[i(t._0x58a2cc)]||.1,this.neckWidthFactor=e[i(t._0x29d535)]||.2,this.headWidthFactor=e.headWidthFactor||.25,this.neckHeightFactor=e[i(t._0x28665f)]||.85}startCompute(e,t){const i={_0x4d262b:597},s=_0x3a2b68;if(!e||e.length===0)return e;this.positions=e,this.setOptions(t);const r=cartesians2mercators(e),o=(t==null?void 0:t.maxHeight)??this.getMaxHeight(r),c=[r[0],r[1]],_=c[0],l=c[1],d=this[s(3697)].getBaseLength(r),f=d*this[s(822)],g=d*this.neckWidthFactor,b=d*this.headWidthFactor,C=this.algorithmUtil.getThirdPoint(l,_,Math.PI/2,f,!![]),P=this.algorithmUtil.getThirdPoint(l,_,Math.PI/2,f,![]),S=this.algorithmUtil[s(3046)](_,l,this[s(i._0x4d262b)],b,![]),L=this.algorithmUtil.getThirdPoint(_,l,this.headAngle,b,!![]),E=this.algorithmUtil.getThirdPoint(_,l,this.neckAngle,g,![]),M=this.algorithmUtil.getThirdPoint(_,l,this.neckAngle,g,!![]);return mercators2cartesians([C,E,S,l,L,M,P],o)}[_0x3a2b68(3320)](e){const t={_0x5e2ae0:400},i=_0x3a2b68;let s=e[0][2]||0;for(let r=0;r<e[i(t._0x5e2ae0)];r++)e[2]>s&&(s=e[2]);return s}}const fineArrowUtil=new FineArrowUtil;class FineArrow extends PolygonEntity{constructor(e={}){super(e),this._minPointNum=2,this._maxPointNum=2}[_0x3a2b68(2495)](e){const t=_0x3a2b68;return!e||e[t(400)]<2?e:(this.style.maxHeight=this.getMaxHeight(),fineArrowUtil[t(3242)](e,this.style))}[_0x3a2b68(1830)](e){const t={_0x18cca2:2627},i=_0x3a2b68;return setPositionsHeight(e,this[i(2748)][i(t._0x18cca2)])}static getOutlinePositions(e,t){return!e||e[_0x3a2b68(400)]<2?e:(e=LngLatArray.toCartesians(e),fineArrowUtil.startCompute(e,t))}}register$4("fineArrow",FineArrow);class FineArrowYWUtil extends ArrowParentUtil{setOptions(e={}){const t={_0x62717a:3548,_0x2b681b:3108,_0x2b202b:822},i=_0x3a2b68;this[i(t._0x62717a)]=e.headHeightFactor||.18,this[i(t._0x2b681b)]=e.headWidthFactor||.3,this.neckHeightFactor=e.neckHeightFactor||.85,this.neckWidthFactor=e.neckWidthFactor||.15,this.tailWidthFactor=e[i(t._0x2b202b)]||.1,this.swallowTailFactor=e.swallowTailFactor||1}startCompute(e,t){const i={_0x54d75c:2627,_0x420146:822,_0x53df07:3697,_0x5772df:1178},s=_0x3a2b68;if(!e||e.length===0)return e;this.positions=e,this.setOptions(t);const r=cartesians2mercators(e),o=(t==null?void 0:t[s(i._0x54d75c)])??this.getMaxHeight(r),c=this.getTailPoints(r),_=this.getArrowHeadPoints(r,c[0],c[2]);if(!_||_.length<4)return e;const l=_[0],d=_[4],f=this.getArrowBodyPoints(r,l,d,this[s(i._0x420146)]),g=f[s(400)];let b=[c[0]].concat(f.slice(0,g/2));b.push(l);let C=[c[2]][s(4083)](f[s(2082)](g/2,g));C.push(d),b=this[s(i._0x53df07)].getQBSplinePoints(b),C=this.algorithmUtil.getQBSplinePoints(C);const P=b[s(4083)](_,C[s(i._0x5772df)](),[c[1],b[0]]);return mercators2cartesians(P,o)}getTailPoints(e){const t=this.algorithmUtil.getBaseLength(e),i=t*this.tailWidthFactor,s=this.algorithmUtil.getThirdPoint(e[1],e[0],Math.PI/2,i,![]),r=this.algorithmUtil.getThirdPoint(e[1],e[0],Math.PI/2,i,!![]),o=i*this.swallowTailFactor,c=this.algorithmUtil.getThirdPoint(e[1],e[0],0,o,!![]);return[s,c,r]}}const fineArrowYWUtil=new FineArrowYWUtil;class FineArrowYW extends PolygonEntity{constructor(e={}){super(e),this._minPointNum=2,this._maxPointNum=2}[_0x3a2b68(2495)](e){const t=_0x3a2b68;return!e||e.length<2?e:(this.style.maxHeight=this[t(3320)](),fineArrowYWUtil.startCompute(e,this.style))}[_0x3a2b68(1830)](e){return setPositionsHeight(e,this.style.maxHeight)}static getOutlinePositions(e,t){return!e||e.length<2?e:(e=LngLatArray.toCartesians(e),fineArrowYWUtil.startCompute(e,t))}}register$4("fineArrowYW",FineArrowYW);class GatheringPlaceUtil{constructor(){this.algorithmUtil=algorithmUtil}startCompute(e,t){const i={_0x32feec:3697,_0x204a25:4083,_0x60c30c:400,_0x281907:1754},s=_0x3a2b68;if(!e||e.length===0)return e;this.positions=e;const r=cartesians2mercators(e),o=(t==null?void 0:t.maxHeight)??this.getMaxHeight(r),c=this.algorithmUtil.Mid(r[0],r[2]);r[s(1754)](c,r[0],r[1]);let _=[],l,d,f;const g=[];for(let P=0;P<r[s(400)]-2;P++){l=r[P],d=r[P+1],f=r[P+2];const S=this[s(i._0x32feec)].getBisectorNormals(.4,l,d,f);_=_[s(i._0x204a25)](S)}const b=_.length;_=[_[b-1]].concat(_.slice(0,b-1));for(let P=0;P<r[s(i._0x60c30c)]-2;P++){l=r[P],d=r[P+1],g[s(i._0x281907)](l);for(let S=0;S<=100;S++){const L=this.algorithmUtil.getCubicValue(S/100,l,_[P*2],_[P*2+1],d);g[s(1754)](L)}g.push(d)}return mercators2cartesians(g,o)}getMaxHeight(e){const t=_0x3a2b68;let i=e[0][2]||0;for(let s=0;s<e[t(400)];s++)e[2]>i&&(i=e[2]);return i}}const gatheringPlaceUtil=new GatheringPlaceUtil;class GatheringPlace extends PolygonEntity{constructor(e={}){const t=_0x3a2b68;super(e),this[t(3100)]=3,this._maxPointNum=3}[_0x3a2b68(2495)](e){const t={_0x3ed546:3320,_0x1a98ef:3242},i=_0x3a2b68;return!e||e.length<this._minPointNum?e:(this.style.maxHeight=this[i(t._0x3ed546)](),gatheringPlaceUtil[i(t._0x1a98ef)](e,this.style))}[_0x3a2b68(1830)](e){return setPositionsHeight(e,this[_0x3a2b68({_0x4528d8:2748}._0x4528d8)].maxHeight)}static[_0x3a2b68(2491)](e,t){const i={_0x23226b:400,_0x70cc31:2249},s=_0x3a2b68;return!e||e[s(i._0x23226b)]<2?e:(e=LngLatArray[s(i._0x70cc31)](e),gatheringPlaceUtil.startCompute(e,t))}}register$4("gatheringPlace",GatheringPlace);class IsosTriangle extends PolygonEntity{constructor(e={}){const t=_0x3a2b68;super(e),this._minPointNum=3,this[t(1678)]=3}getShowPositions(e){return!e||e[_0x3a2b68({_0x14f17e:400}._0x14f17e)]<this._minPointNum?e:IsosTriangle.getOutlinePositions(e,this.style)}static getOutlinePositions(e,t){const i={_0x1c321a:2978},s=_0x3a2b68;if(!e||e.length<3)return e;const r=e[0],o=e[1],c=e[2],_=Cesium__namespace[s(i._0x1c321a)].midpoint(r,o,new Cesium__namespace.Cartesian3),l=getAngle(_,o),d=getAngle(_,c),f=l-d-90,g=getRotateCenterPoint(_,c,f);return[r,o,g]}}register$4("isosTriangle",IsosTriangle);class LuneUtil{constructor(){this.algorithmUtil=algorithmUtil}[_0x3a2b68(3242)](e,t){const i={_0x5feb94:1597,_0x1d43e6:3282},s=_0x3a2b68;if(!e||e.length===0)return e;this.positions=e;let r=cartesians2mercators(e);const o=(t==null?void 0:t.maxHeight)??this.getMaxHeight(r),c=[r[0],r[1],r[2],void 0,void 0],_=c[0],l=c[1],d=c[2];let f=c[3],g=c[4];const b=this[s(3697)][s(i._0x5feb94)](_,l,d),C=this[s(3697)].MathDistance(_,b),P=this.algorithmUtil.getAzimuth(_,b),S=this.algorithmUtil.getAzimuth(l,b);return this.algorithmUtil.isClockWise(_,l,d)?(f=S,g=P):(f=P,g=S),r=this[s(3697)][s(i._0x1d43e6)](b,C,f,g),r.push(r[0]),mercators2cartesians(r,o)}[_0x3a2b68(3320)](e){let t=e[0][2]||0;for(let i=0;i<e.length;i++)e[2]>t&&(t=e[2]);return t}}const luneUtil=new LuneUtil;class Lune extends PolygonEntity{constructor(e={}){super(e),this._minPointNum=3,this._maxPointNum=3}getShowPositions(e){const t={_0x23d353:2627},i=_0x3a2b68;return!e||e.length<this._minPointNum?e:(this.style[i(t._0x23d353)]=this.getMaxHeight(),luneUtil.startCompute(e,this[i(2748)]))}_updateEditDraggerPositionHeight(e){return setPositionsHeight(e,this.style.maxHeight)}static getOutlinePositions(e,t){return!e||e[_0x3a2b68({_0x2a85af:400}._0x2a85af)]<3?e:(e=LngLatArray.toCartesians(e),luneUtil.startCompute(e,t))}}register$4("lune",Lune);class EditRegular extends EditPolygon{bindDraggers(){const e={_0x387503:3486,_0x345ae8:1191,_0x116c7a:4320,_0x247214:1754},t={_0x365ec0:4320},i={_0x559477:2748,_0x2f077b:2978},s={_0x1693e2:400,_0x4c081f:4320,_0x52afea:2978},r={_0x549dd6:2978},o=_0x3a2b68,c=this.positions;let _=this.updatePositionsHeightByAttr(c[0]);const l=this.createDragger({position:_,type:PointType[o(e._0x387503)],tooltip:this._map[o(3600)]("_整体平移"),onDrag:(g,b)=>{const C=o;b=this.updatePositionsHeightByAttr(b),g[C(4076)]=b;const P=Cesium__namespace.Cartesian3.subtract(b,_,new Cesium__namespace.Cartesian3);_=b,this.positions.forEach((S,L,E)=>{const M=C,D=Cesium__namespace.Cartesian3.add(S,P,new Cesium__namespace[M(r._0x549dd6)]);this[M(2694)][L]=D});for(let S=0,L=this.draggers[C(s._0x1693e2)];S<L;S++)this[C(s._0x4c081f)][S].position=Cesium__namespace[C(s._0x52afea)].add(this.draggers[S].position,P,new Cesium__namespace.Cartesian3)}});l.index=0,this.draggers.push(l);const d=getPositionByDirectionAndLen(_,this[o(2748)].startAngle,this[o(2748)].radius);c[1]=d;const f=this.createDragger({position:this.updatePositionsHeightByAttr(d),onDrag:(g,b)=>{const C=o;b=this.updatePositionsHeightByAttr(b),g.position=b,this.positions[g.index]=b,this[C(i._0x559477)].radius=Cesium__namespace[C(i._0x2f077b)].distance(c[0],b),this.style.startAngle=formatNum$1(getAngle(c[0],b),2)},onDragStart:(g,b)=>{const C=o;for(let P=0,S=this.draggers.length;P<S;P++)this[C(t._0x365ec0)][P][C(442)]=![]},onDragEnd:(g,b)=>{this.updateDraggers()}});f[o(e._0x345ae8)]=1,this[o(e._0x116c7a)][o(e._0x247214)](f),this.entityGraphic.extrudedHeight&&this._bindHeightDraggers()}_updateHeight(e){const t={_0x4f5bef:1410},i=_0x3a2b68;this.entityGraphic.height=e,this[i(2748)].height=this.formatNum(e,2);const s=this.positions;for(let r=0,o=s.length;r<o;r++)s[r]=setPositionsHeight(s[r],e);this.fire(EventType[i(t._0x4f5bef)])}}class Regular extends PolygonEntity{constructor(e={}){const t={_0x25e961:2404,_0x182e28:2404,_0x154553:4076,_0x596ddf:2694},i=_0x3a2b68;super(e),this._minPointNum=2,this[i(1678)]=2,this[i(2748)].radius=this.style.radius??1e3,this.style[i(t._0x25e961)]=this.style[i(t._0x182e28)]??0,e[i(t._0x154553)]&&(this[i(t._0x596ddf)]=[e.position])}get[_0x3a2b68(1746)](){return EditRegular}[_0x3a2b68(2e3)](e){const t={_0x4467cd:3481},i=_0x3a2b68;var s;if(!e&&((s=this._positions_draw)===null||s===void 0?void 0:s.length)>1){const r=this[i(2206)][0];this.style.radius=Cesium__namespace.Cartesian3[i(t._0x4467cd)](r,this._positions_draw[1]),this[i(2748)].startAngle=formatNum$1(getAngle(r,this._positions_draw[1]),2)}super.updateAttrForDrawing(e)}[_0x3a2b68(2495)](e){const t=_0x3a2b68;return!e||e.length<1?e:Regular[t(2491)](e[0],this.style)}_getGeoJsonGeometry(e){const t={_0x13b9de:1910},i=_0x3a2b68,s=this.getCoordinates(e==null?void 0:e.noAlt);return{type:i(t._0x13b9de),coordinates:s[0]}}static getOutlinePositions(e,t){const i={_0x23b3f9:2404},s=_0x3a2b68,r=t[s(959)]||3,o=t.radius||1e3,c=t[s(i._0x23b3f9)]||0,_=360/r,l=[];for(let d=0;d<=r;d++){const f=c+_*d;l.push(getPositionByDirectionAndLen(e,f,o))}return l}}register$4("regular",Regular,!![]);class EditSector extends EditPolygon{bindDraggers(){const e={_0x2a0fd4:4220,_0x26a58b:3486,_0x1e043c:3600,_0x407749:1191,_0x11ffec:2748,_0x13db82:1191,_0x3e18b9:2748,_0x299a35:4220,_0x3f6916:4320},t={_0x5f5dea:4320,_0x48289d:442},i={_0x523392:2978},s={_0x19eeb5:400,_0x3120d6:442},r={_0x46a7bd:2694,_0x22f4dc:2748},o={_0x52a5fe:2978,_0x4ce96e:3420,_0x273bde:4320},c=_0x3a2b68,_=this.positions;let l=this[c(1317)](_[0]);const d=this[c(e._0x2a0fd4)]({position:l,type:PointType[c(e._0x26a58b)],tooltip:this._map[c(e._0x1e043c)]("_整体平移"),onDrag:(P,S)=>{const L=c;S=this[L(1317)](S),P.position=S;const E=Cesium__namespace[L(o._0x52a5fe)][L(o._0x4ce96e)](S,l,new Cesium__namespace.Cartesian3);l=S,this.positions[L(3782)]((M,D,R)=>{const k=Cesium__namespace.Cartesian3.add(M,E,new Cesium__namespace.Cartesian3);this.positions[D]=k});for(let M=0,D=this[L(o._0x273bde)][L(400)];M<D;M++)this[L(4320)][M].position=Cesium__namespace.Cartesian3.add(this.draggers[M].position,E,new Cesium__namespace[L(o._0x52a5fe)])}});d[c(e._0x407749)]=0,this[c(4320)].push(d);const f=getPositionByDirectionAndLen(l,this[c(e._0x11ffec)].startAngle,this.style.radius);_[1]=f;const g=this.createDragger({position:this.updatePositionsHeightByAttr(f),onDrag:(P,S)=>{const L=c;S=this.updatePositionsHeightByAttr(S),P.position=S,this[L(r._0x46a7bd)][P.index]=S,this.style.radius=Cesium__namespace.Cartesian3[L(3481)](_[0],S),this[L(2748)].startAngle=formatNum$1(getAngle(_[0],S),2),_[2]=getPositionByDirectionAndLen(_[0],this.style[L(2217)],this[L(r._0x22f4dc)].radius)},onDragStart:(P,S)=>{const L=c;for(let E=0,M=this.draggers[L(s._0x19eeb5)];E<M;E++)this.draggers[E][L(s._0x3120d6)]=![]},onDragEnd:(P,S)=>{this.updateDraggers()}});g[c(e._0x13db82)]=1,this[c(4320)].push(g);const b=getPositionByDirectionAndLen(l,this.style.endAngle,this[c(e._0x3e18b9)].radius);_[2]=b;const C=this[c(e._0x299a35)]({position:this[c(1317)](b),onDrag:(P,S)=>{const L=c;S=this.updatePositionsHeightByAttr(S),P[L(4076)]=S,this.positions[P.index]=S,this.style.radius=Cesium__namespace[L(i._0x523392)].distance(_[0],S),this.style.endAngle=getAngle(_[0],S),_[1]=getPositionByDirectionAndLen(_[0],this[L(2748)].startAngle,this.style.radius)},onDragStart:(P,S)=>{const L=c;for(let E=0,M=this[L(t._0x5f5dea)].length;E<M;E++)this.draggers[E][L(t._0x48289d)]=![]},onDragEnd:(P,S)=>{this.updateDraggers()}});C.index=2,this[c(e._0x3f6916)].push(C),this[c(3511)].extrudedHeight&&this._bindHeightDraggers()}_updateHeight(e){const t={_0x4adbdf:2748},i=_0x3a2b68;this.entityGraphic.height=e,this[i(t._0x4adbdf)].height=this.formatNum(e,2);const s=this.positions;for(let r=0,o=s.length;r<o;r++)s[r]=setPositionsHeight(s[r],e);this.fire(EventType.editStyle)}}class Sector extends PolygonEntity{constructor(e={}){const t={_0x580721:1678,_0x568d2a:3878,_0x1c525d:2404,_0x4f590c:2217},i=_0x3a2b68;super(e),this[i(3100)]=2,this[i(t._0x580721)]=3,this.style[i(t._0x568d2a)]=this.style.radius??1e3,this.style[i(t._0x1c525d)]=this[i(2748)][i(2404)]??0,this.style[i(t._0x4f590c)]=this.style[i(2217)]??0,e.position&&(this.positions=[e.position])}get EditClass(){return EditSector}updateAttrForDrawing(e){const t={_0x41c6a3:2748},i=_0x3a2b68;var s;if(!e&&((s=this._positions_draw)===null||s===void 0?void 0:s.length)>1){var r;const o=this[i(2206)][0];this[i(2748)].radius=formatNum$1(Cesium__namespace.Cartesian3[i(3481)](o,this._positions_draw[1]),2),this[i(2748)].startAngle=formatNum$1(getAngle(o,this[i(2206)][1]),2),((r=this._positions_draw)===null||r===void 0?void 0:r[i(400)])>2?this[i(t._0x41c6a3)].endAngle=formatNum$1(getAngle(o,this._positions_draw[2]),2):this[i(2748)][i(2217)]=this.style.startAngle}super.updateAttrForDrawing(e)}[_0x3a2b68(2495)](e){return!e||e[_0x3a2b68(400)]<1?e:Sector.getOutlinePositions(e[0],this.style)}[_0x3a2b68(2019)](e,t){const i=_0x3a2b68;super._updateStyleHook(e,t),(Cesium__namespace.defined(t[i(3878)])||Cesium__namespace.defined(t.startAngle)||Cesium__namespace.defined(t.endAngle)||Cesium__namespace[i(407)](t.noCenter))&&this._updatePositionsHook()}[_0x3a2b68(3037)](e={}){const t={_0x46a5cf:1575,_0x118d64:2694,_0x2a3c25:3361,_0x3e06a4:4389},i={_0x48c429:4076},s=_0x3a2b68;return getSurfaceHeight(this[s(t._0x46a5cf)].scene,this[s(t._0x118d64)][0],{objectsToExclude:this._layer[s(t._0x2a3c25)],...e})[s(t._0x3e06a4)](r=>{const o=s;r[o(4076)]&&(this[o(2694)]=[r[o(i._0x48c429)]])})}_getGeoJsonGeometry(e){return{type:"Point",coordinates:this.getCoordinates(e==null?void 0:e.noAlt)[0]}}static getOutlinePositions(e,t){const i={_0x4d6eba:2217,_0x5b7760:1754},s=_0x3a2b68,r=t.radius,o=t.startAngle;let c=t[s(i._0x4d6eba)];c<=o&&(c+=360);const _=[];!t.noCenter&&_.push(e);for(let l=o;l<=c;l++)_.push(getPositionByDirectionAndLen(e,l,r));return!t.noCenter&&_[s(i._0x5b7760)](e),_}}register$4("sector",Sector,!![]);class StraightArrowUtil{constructor(){const e={_0x558f04:3697},t=_0x3a2b68;this[t(e._0x558f04)]=algorithmUtil}[_0x3a2b68(3483)](e={}){const t={_0x4ffb72:822,_0x3f9603:2188,_0x5db808:3108,_0x2122ba:597},i=_0x3a2b68;this[i(t._0x4ffb72)]=e.tailWidthFactor||.05,this[i(t._0x3f9603)]=e.neckWidthFactor||.1,this.headWidthFactor=e[i(t._0x5db808)]||.15,this[i(t._0x2122ba)]=Math.PI/4,this.neckAngle=Math.PI*.17741}startCompute(e,t){const i={_0x1ac5b5:400,_0x5df352:3046,_0x1fe85a:3697,_0x2b44f2:3046,_0x4d9c44:4211},s=_0x3a2b68;if(!e||e[s(i._0x1ac5b5)]===0)return e;this[s(2694)]=e,this.setOptions(t);const r=cartesians2mercators(e),o=(t==null?void 0:t.maxHeight)??this.getMaxHeight(r),c=[r[0],r[1]],_=c[0],l=c[1],d=this.algorithmUtil.getBaseLength(r),f=d*this.tailWidthFactor,g=d*this.neckWidthFactor,b=d*this.headWidthFactor,C=this.algorithmUtil.getThirdPoint(l,_,Math.PI/2,f,!![]),P=this.algorithmUtil.getThirdPoint(l,_,Math.PI/2,f,![]),S=this.algorithmUtil[s(i._0x5df352)](_,l,this.headAngle,b,![]),L=this[s(i._0x1fe85a)].getThirdPoint(_,l,this[s(597)],b,!![]),E=this.algorithmUtil[s(i._0x2b44f2)](_,l,this[s(i._0x4d9c44)],g,![]),M=this.algorithmUtil.getThirdPoint(_,l,this.neckAngle,g,!![]);return mercators2cartesians([C,E,S,l,L,M,P],o)}getMaxHeight(e){let t=e[0][2]||0;for(let i=0;i<e.length;i++)e[2]>t&&(t=e[2]);return t}}const straightArrowUtil=new StraightArrowUtil;class StraightArrow extends PolygonEntity{constructor(e={}){const t={_0x2bc447:3100},i=_0x3a2b68;super(e),this[i(t._0x2bc447)]=2,this._maxPointNum=2}[_0x3a2b68(2495)](e){const t={_0x105248:2748},i=_0x3a2b68;return!e||e.length<2?e:(this[i(t._0x105248)][i(2627)]=this.getMaxHeight(),straightArrowUtil.startCompute(e,this.style))}_updateEditDraggerPositionHeight(e){return setPositionsHeight(e,this.style.maxHeight)}static[_0x3a2b68(2491)](e,t){return!e||e.length<2?e:(e=LngLatArray.toCartesians(e),straightArrowUtil.startCompute(e,t))}}register$4("straightArrow",StraightArrow);const DEF_STYLE$q={color:"#3388ff",pixelSize:8,outlineColor:"#ffffff",outlineWidth:2,visibleDepth:![]};class PointMeasure extends PointEntity{constructor(e={}){const t=_0x3a2b68;e[t(2748)]={...DEF_STYLE$q,...e[t(2748)]},super(e)}_addedHook(e){const t={_0x4893f6:2679,_0x2ca8b1:1781,_0x28aabe:2748,_0x2b547c:905,_0x5cde9d:465,_0x1a06e8:3314},i={_0x5279dd:2879,_0x973112:4079,_0x405ad2:924,_0x397453:3265,_0x39d44e:1343,_0x23cc49:3600},s=_0x3a2b68;super[s(t._0x4893f6)](e);const r=this._map;this[s(t._0x2ca8b1)](o=>{const c=s,_=this[c(i._0x5279dd)];_.format();const l=degree2dms(_[c(i._0x973112)]).str,d=degree2dms(_.lat).str;let f="";if(this.options[c(3663)]!==![]){const g=proj4Trans([_[c(i._0x973112)],_.lat],"EPSG:4326",this[c(1941)].crs??CRS.CGCS2000_GK_Zone_3);g[0]!==_.lng&&g[1]!==_.lat&&(f=c(i._0x405ad2)+g[0].toFixed(1)+`</div>
                   <div title="大地2000坐标"><label>纵坐标</label>`+g[1][c(i._0x397453)](1)+c(i._0x39d44e))}return'<div class="mars3d-template-titile">'+r.getLangText("_位置信息")+`</div>
                <div class="mars3d-template-content">
                    <div><label>`+r.getLangText("_经度")+c(3800)+_.lng+c(2981)+l+`</div>
                    <div><label>`+r.getLangText("_纬度")+"</label>"+_.lat+"&nbsp;&nbsp;&nbsp;&nbsp;"+d+`</div>
                     `+f+c(1448)+r.getLangText(c(565))+"</label>"+_.alt+r[c(i._0x23cc49)]("_米")+`</div>
                </div>`},{autoClose:this[s(t._0x28aabe)][s(t._0x2b547c)]??![],closeOnClick:this.style.closeOnClick??![]}),this.on(EventType.drawMouseMove,this[s(1169)],this),this.once(EventType[s(t._0x5cde9d)],this._drawCreatedHandler,this),this.on(EventType[s(t._0x1a06e8)],this._editPointHandler,this),this.on(EventType.editRemovePoint,this[s(1602)],this),this[s(4076)]&&this.openPopup()}_updatePositionsHook(){super._updatePositionsHook(),this.openPopup()}[_0x3a2b68(3916)](){const e={_0x49aed0:1602,_0xde5e1a:3916},t=_0x3a2b68;this.off(EventType.drawMouseMove,this._drawMouseMoveHandler,this),this.off(EventType.drawCreated,this._drawCreatedHandler,this),this.off(EventType.editMovePoint,this[t(e._0x49aed0)],this),this[t(2971)](EventType[t(3949)],this._editPointHandler,this),super[t(e._0xde5e1a)]()}_drawMouseMoveHandler(e){this[_0x3a2b68(2697)]()}_drawCreatedHandler(e){const t=_0x3a2b68;this.openPopup(),this.fire(EventType.end,{mtype:this[t(1603)],graphic:this},!![])}_editPointHandler(e){this[_0x3a2b68(2697)]()}}register$4(_0x3a2b68(964),PointMeasure,!![]);const DEF_STYLE$p={materialType:_0x3a2b68(462),glowPower:.1,color:"#ebe12c",width:9,clampToGround:![]};class DistanceMeasure extends PolylineEntity{constructor(e={}){const t={_0xb050d:453,_0x520b01:1395},i=_0x3a2b68;e.hasMoveEdit=![],e[i(t._0xb050d)]=e.showAddText??!![],e[i(t._0x520b01)]=e.decimal??2,e.style={...DEF_STYLE$p,...e[i(2748)]},super(e),this._measured={}}get measured(){return this._measured}_addedHook(e){const t={_0x2d496e:939,_0x3a957a:4053,_0x4f8b1f:2211},i=_0x3a2b68;var s,r;super._addedHook(e),this[i(t._0x2d496e)]=[],this._measureLable=this._createLabel(this.options.label||((s=this[i(t._0x3a957a)])===null||s===void 0||(r=s[i(1941)])===null||r===void 0?void 0:r.label)),this._measureLable.show=![],this.on(EventType.drawAddPoint,this[i(t._0x4f8b1f)],this),this.on(EventType.drawRemovePoint,this._drawRemovePointHandler,this),this.on(EventType.drawMouseMove,this._drawMouseMoveHandler,this),this.once(EventType.drawCreated,this._drawCreatedHandler,this),this.on(EventType.editMovePoint,this._editPointHandler,this),this.on(EventType[i(3949)],this._editPointHandler,this),this[i(1941)].positions&&(this._measureLable.show=!![],this._editPointHandler())}[_0x3a2b68(4145)](){const e={_0x2c80a7:442,_0x2c4648:1602},t=_0x3a2b68;super[t(4145)](),this[t(3986)][t(e._0x2c80a7)]=!![],this[t(e._0x2c4648)]()}[_0x3a2b68(3916)](){const e={_0x47bc3b:2971,_0x36ded7:2559,_0x3a74ab:3949,_0x526fcb:1602,_0x35023b:407,_0x4d77a0:939},t=_0x3a2b68;if(this.off(EventType[t(4064)],this[t(2211)],this),this.off(EventType[t(3429)],this._drawMouseMoveHandler,this),this[t(e._0x47bc3b)](EventType.drawRemovePoint,this[t(e._0x36ded7)],this),this.off(EventType[t(465)],this._drawCreatedHandler,this),this.off(EventType.editMovePoint,this._editPointHandler,this),this.off(EventType[t(e._0x3a74ab)],this[t(e._0x526fcb)],this),Cesium__namespace.defined(this[t(3986)])&&(this._removeLabel(this._measureLable),delete this._measureLable),Cesium__namespace[t(e._0x35023b)](this._arrPartMeasureLable)&&this._arrPartMeasureLable.length>0){const i=this[t(e._0x4d77a0)];if(i&&i.length>0)for(let s=0,r=i.length;s<r;s++)this._removeLabel(i[s]);delete this._arrPartMeasureLable}super._removedHook()}_toJSON_Ex(e){const t={_0x405ec2:2774},i=_0x3a2b68;e[i(2774)]=getAttrVal(this[i(t._0x405ec2)],{onlySimpleType:!![]})}updateText(e){const t={_0x128826:3481,_0x40acac:3734,_0x4fb7f6:2203,_0x466920:1941,_0x47cf01:3640,_0x571934:3551,_0x558476:400},i=_0x3a2b68;e&&(this[i(1941)].unit=e);const s={unit:this.options[i(1733)],lang:this._map.lang,decimal:this.options.decimal};if(this[i(3734)][i(3551)]=formatDistance(this._measured[i(t._0x128826)],s),this._measured.distance!==this[i(t._0x40acac)].distanceLastFd){if(this._measureLable.text=this._map.getLangText(i(t._0x4fb7f6))+":"+this._measured[i(3551)],this[i(t._0x466920)].showAddText){const r=formatDistance(this._measured.distanceLastFd,s);this[i(3734)].distanceLastFdStr=r,this[i(3986)][i(t._0x47cf01)]+=`
(+`+r+")"}}else this[i(3986)].text=this._map.getLangText(i(2203))+":"+this._measured[i(t._0x571934)];if(e)for(let r=1,o=this._arrPartMeasureLable[i(t._0x558476)];r<o;r++){const c=this._arrPartMeasureLable[r];c.showText&&c.showText()}}_drawAddPointHandler(e){const t={_0x236dc1:2976,_0x115c83:4374,_0x340e47:3208,_0x23d060:1122,_0xaf08b6:3734},i={_0x3f74de:2251,_0x3271ef:3640},s=_0x3a2b68;var r,o;const c=this,_=this[s(t._0x236dc1)],l=this._createLabel(this.options.label||((r=this._layer)===null||r===void 0||(o=r.options)===null||o===void 0?void 0:o.label),_[_[s(400)]-1]);if(this._arrPartMeasureLable.push(l),_.length===1)l.text=this._map.getLangText(s(t._0x115c83));else{const d=getSurfaceDistance(_),f=getSurfaceDistance([_[_.length-2],_[_.length-1]]);l[s(t._0x340e47)]={},l[s(t._0x340e47)].value=d,l.attr.valueFD=f,l[s(t._0x23d060)]=function(){const g=s,b={unit:c[g(1941)].unit,lang:c._map.lang,decimal:c.options[g(1395)]},C=formatDistance(this.attr[g(i._0x3f74de)],b);if(this.attr.value!==this.attr.valueFD){if(this.text=C,c.options.showAddText){const P=formatDistance(this.attr.valueFD,b);this[g(i._0x3271ef)]+=g(490)+P+")"}}else this[g(i._0x3271ef)]=C},l.showText(),this._measured[s(3481)]=d,this[s(t._0xaf08b6)].distanceLastFd=f,this._measured.distanceStr=formatDistance(this._measured.distance,{unit:this.options.unit,lang:this._map[s(3857)],decimal:this[s(1941)].decimal})}}_drawRemovePointHandler(e){const t={_0x571bf0:3986,_0x2bb743:3628},i=_0x3a2b68,s=this._arrPartMeasureLable.pop();this._removeLabel(s),this._drawMouseMoveHandler(e),this[i(t._0x571bf0)].position=e[i(t._0x2bb743)]}[_0x3a2b68(1169)](e){const t={_0x4d5db6:400,_0x160f61:3481,_0x36a50a:4098},i=_0x3a2b68,s=this.positionsShow;if(!s||s.length<2){this._measureLable.show=![];return}const r=getSurfaceDistance(s);let o=getSurfaceDistance([s[s.length-2],s[s[i(t._0x4d5db6)]-1]]);o===0&&s.length>2&&(o=getSurfaceDistance([s[s.length-3],s[s.length-2]])),this._measured[i(t._0x160f61)]=r,this._measured[i(t._0x36a50a)]=o,this.updateText(),this._measureLable.position=s[s.length-1],this[i(1109)](EventType[i(866)],{mtype:this.type,value:this._measured.distance,label:this._measured.distanceStr},!![])}_drawCreatedHandler(e,t=!![]){const i={_0xf5e92c:2976,_0x1f623c:400,_0x119aa4:3986,_0x42d1c9:442},s=_0x3a2b68,r=this[s(i._0xf5e92c)],o=this._arrPartMeasureLable.length-r.length;if(o>=0){for(let c=this._arrPartMeasureLable[s(i._0x1f623c)]-1;c>=r.length-1;c--)this._removeLabel(this._arrPartMeasureLable[c]);this._arrPartMeasureLable.splice(r.length-1,o+1)}this[s(1969)](),this[s(i._0x119aa4)].position=r[r.length-1],this._measureLable[s(i._0x42d1c9)]=!![],t&&this.fire(EventType.end,{mtype:this.type,value:this[s(3734)][s(3481)],label:this[s(3734)].distanceStr},!![])}_editPointHandler(e,t=!![]){const i={_0x4e00c9:400,_0x4fe507:400,_0x43cb46:3600,_0x28c4e6:4374,_0x529998:1941,_0x41ce9d:1754,_0x1ec203:3208,_0x47a041:2251,_0x3df61e:3734,_0x221868:1109},s={_0x56bab2:1575,_0x388302:3841,_0x577669:3640},r=_0x3a2b68,o=this,c=this.positionsShow;if(!c||c[r(i._0x4e00c9)]<2)return;let _=this._arrPartMeasureLable;if(_&&_.length>0)for(let S=1,L=_[r(i._0x4fe507)];S<L;S++)this._removeLabel(_[S]);else{var l,d;const S=this[r(2966)](this.options.label||((l=this[r(4053)])===null||l===void 0||(d=l.options)===null||d===void 0?void 0:d.label),c[0]);S.text=this._map[r(i._0x43cb46)](r(i._0x28c4e6)),_=[S]}const f=_[0];f.position=c[0],this._arrPartMeasureLable=[f];let g=0;for(let S=1,L=c.length-1;S<L;S++){var b,C;const E=getSurfaceDistance([c[S-1],c[S]]);g+=E;const M=this._createLabel(this[r(i._0x529998)].label||((b=this._layer)===null||b===void 0||(C=b.options)===null||C===void 0?void 0:C.label),c[S]);this[r(939)][r(i._0x41ce9d)](M),M.attr={},M[r(i._0x1ec203)][r(i._0x47a041)]=g,M.attr.valueFD=E,M.showText=function(){const D=r,R={unit:o.options[D(1733)],lang:o[D(s._0x56bab2)].lang,decimal:o.options.decimal},k=formatDistance(this.attr[D(2251)],R);if(this[D(3208)].value!==this.attr[D(s._0x388302)]){const N=formatDistance(this[D(3208)][D(3841)],R);this.text=k,o.options.showAddText&&(this.text+=`
(+`+N+")")}else this[D(s._0x577669)]=k},M[r(1122)]()}const P=getSurfaceDistance([c[c.length-2],c[c.length-1]]);g+=P,this._measured.distance=g,this[r(i._0x3df61e)][r(4098)]=P,this.updateText(),this._measureLable.position=c[c.length-1],this._measureLable.show=!![],t&&this[r(i._0x221868)](EventType.change,{mtype:this.type,value:this[r(3734)].distance,label:this._measured.distanceStr},!![])}}register$4("distanceMeasure",DistanceMeasure);class DistanceSurfaceMeasure extends DistanceMeasure{constructor(e={}){super(e),e._promise&&(this._promise=e._promise,delete e._promise),e.style.clampToGround=!![],e.splitNum=e.splitNum??200,this.disTerrainScale=1.2}_drawCreatedHandler(e){const t=_0x3a2b68;super[t(4327)](e,![]),this.updateLengthForTerrain(e)}_editPointHandler(e){super._editPointHandler(e,![]),this.updateLengthForTerrain(e)}updateLengthForTerrain(e){const t={_0x383642:1941,_0x5d77c1:1941,_0x3afcf4:3845},i={_0x347ee9:1191,_0x2316b0:3481,_0x30c057:4098,_0x3c55fe:1969},s=_0x3a2b68,r=this.positionsShow;!r||r.length<2||(this.fire(EventType.start,{mtype:this.type,graphic:this},!![]),getClampDistance(r,{scene:this._map.scene,splitNum:this[s(1941)].splitNum,has3dtiles:this[s(t._0x383642)].has3dtiles,exact:this[s(t._0x5d77c1)][s(t._0x3afcf4)],disTerrainScale:this.disTerrainScale,endItem:o=>{const c=s;if(!this._map||!this._measureLable)return;let _=o[c(i._0x347ee9)];const l=o.all_distance,d=o[c(i._0x2316b0)];_++;const f=this._arrPartMeasureLable[_];f?(f.attr.value=l,f[c(3208)].valueFD=d,f.showText()):_===r.length-1&&this._measureLable&&(this._measured.distance=l,this._measured[c(i._0x30c057)]=d,this[c(i._0x3c55fe)]())},end:o=>{const c=s;var _;if(!this._map||!this._measureLable)return;this._measured.distance=o;const l={mtype:this.type,graphic:this,value:this._measured.distance,label:this[c(3734)].distanceStr};this.fire(EventType.change,l,!![]),this.fire(EventType.end,l,!![]),(_=this._promise)!==null&&_!==void 0&&_.resolve&&this._promise.resolve(this)}}))}}register$4("distanceSurfaceMeasure",DistanceSurfaceMeasure);class SectionMeasure extends DistanceMeasure{constructor(e={}){const t=_0x3a2b68;super(e),e._promise&&(this._promise=e._promise,delete e._promise),e[t(2748)].clampToGround=!![],e.splitNum=e.splitNum??200}_drawCreatedHandler(e){super._drawCreatedHandler(e,![]),this.updateSectionForTerrain(e)}[_0x3a2b68(1602)](e){super._editPointHandler(e,![]),this.updateSectionForTerrain(e)}updateSectionForTerrain(e){const t={_0xbd8985:1109},i={_0x3223c6:3734,_0x1e6be1:3734,_0x462cac:2602,_0x44b140:3531,_0x5c3425:3531},s={_0x3c0c2f:2228,_0x404bfd:3265,_0x5d55fb:1879,_0x5b652c:939,_0x4b4d6e:3208,_0x590905:1122,_0x1a39b3:3481},r=_0x3a2b68,o=this.positionsShow;if(!o||o[r(400)]<2)return;this[r(t._0xbd8985)](EventType.start,{mtype:this.type,graphic:this},!![]);let c=0;const _=[],l=[],d=[],f=[];computeStepSurfaceLine({map:this._map,positions:o,splitNum:this.options.splitNum,has3dtiles:this.options.has3dtiles,exact:this.options.exact,endItem:(g,b,C)=>{const P=r;var S,L;if(!this._map||!this._measureLable)return;const E=(S=Cesium__namespace.Cartographic[P(2101)](o[C]))===null||S===void 0?void 0:S.height,M=(L=Cesium__namespace[P(s._0x3c0c2f)].fromCartesian(o[C+1]))===null||L===void 0?void 0:L.height,D=(M-E)/g.length;let R=0;for(let N=0;N<g.length;N++){if(N!==0){const F=Cesium__namespace.Cartesian3.distance(g[N],g[N-1]);c+=F,R+=F}_.push(Number(c[P(s._0x404bfd)](1)));const $=LngLatPoint[P(2101)](g[N]);l[P(1754)]($[P(s._0x5d55fb)]),f.push($);const B=Number((E+D*N).toFixed(1));d[P(1754)](B)}C++;const k=this[P(s._0x5b652c)][C];k?(k[P(s._0x4b4d6e)].value=c,k.attr.valueFD=R,k[P(s._0x590905)]()):C===o.length-1&&this._measureLable&&(this._measured[P(s._0x1a39b3)]=c,this._measured.distanceLastFd=R,this.updateText())},end:()=>{const g=r;var b;if(!this._map||!this._measureLable)return;this.updateText(),this[g(3734)].arrLen=_,this._measured[g(3363)]=d,this[g(3734)].arrHB=l,this._measured.arrPoint=f;const C={mtype:this[g(1603)],graphic:this,value:c,label:this[g(i._0x3223c6)].distanceStr,...this[g(i._0x1e6be1)]};this.fire(EventType.change,C,!![]),this.fire(EventType[g(i._0x462cac)],C,!![]),(b=this[g(i._0x44b140)])!==null&&b!==void 0&&b.resolve&&this[g(i._0x5c3425)].resolve(this)}})}}register$4(_0x3a2b68(2407),SectionMeasure);const DEF_STYLE$o={materialType:"PolylineArrow",color:"#ebe967",width:9,clampToGround:!![]};class AngleMeasure extends PolylineEntity{constructor(e={}){const t={_0x3e4a28:3792,_0x50c293:4331},i=_0x3a2b68;e.hasMoveEdit=![],e[i(t._0x3e4a28)]=2,e.decimal=e.decimal??2,e.angleDecimal=e[i(t._0x50c293)]??1,e.style={...DEF_STYLE$o,...e.style},super(e),this[i(3734)]={}}get[_0x3a2b68(2774)](){return this[_0x3a2b68(3734)]}_addedHook(e){const t={_0x34641d:3203,_0x42e51a:4064,_0x2db27e:780,_0x83d2d:1169,_0x217e75:3805},i=_0x3a2b68;var s,r;super._addedHook(e),this._measureLable=this._createLabel(this.options[i(t._0x34641d)]||((s=this._layer)===null||s===void 0||(r=s.options)===null||r===void 0?void 0:r.label)),this._measureLable.show=![],this.on(EventType[i(t._0x42e51a)],this[i(2211)],this),this.on(EventType[i(t._0x2db27e)],this._drawRemovePointHandler,this),this.on(EventType.drawMouseMove,this[i(t._0x83d2d)],this),this.once(EventType.drawCreated,this._drawCreatedHandler,this),this.on(EventType.editMovePoint,this._drawMouseMoveHandler,this),this.on(EventType.editRemovePoint,this[i(t._0x83d2d)],this),this.on(EventType[i(t._0x217e75)],this._drawMouseMoveHandler,this),this.options.positions&&(this._measureLable.show=!![],this._drawMouseMoveHandler())}_updatePositionsHook(){const e={_0x34031f:1169},t=_0x3a2b68;super._updatePositionsHook(),this._measureLable[t(442)]=!![],this[t(e._0x34031f)]()}_removedHook(){const e={_0x58501e:2211,_0x460055:3429,_0x5aeaaa:2971,_0x5daca8:3986},t=_0x3a2b68;this.off(EventType.drawAddPoint,this[t(e._0x58501e)],this),this.off(EventType[t(e._0x460055)],this._drawMouseMoveHandler,this),this.off(EventType.drawRemovePoint,this[t(2559)],this),this[t(e._0x5aeaaa)](EventType.drawCreated,this._drawCreatedHandler,this),this[t(e._0x5aeaaa)](EventType.editMovePoint,this._drawMouseMoveHandler,this),this.off(EventType.editRemovePoint,this._drawMouseMoveHandler,this),this.off(EventType[t(3805)],this._drawMouseMoveHandler,this),Cesium__namespace.defined(this[t(3986)])&&(this[t(1263)](this[t(e._0x5daca8)]),delete this[t(3986)]),super._removedHook()}_toJSON_Ex(e){e.measured=getAttrVal(this.measured,{onlySimpleType:!![]})}updateText(e){const t={_0x57ea22:1733,_0x4848fb:2580,_0x3dba32:1941},i=_0x3a2b68;e&&(this[i(1941)][i(t._0x57ea22)]=e),this._measured.angleStr=this[i(3734)][i(t._0x4848fb)][i(3265)](this[i(t._0x3dba32)].angleDecimal)+"°",this._measured.distanceStr=formatDistance(this._measured.distance,{unit:this.options.unit,lang:this._map.lang,decimal:this.options.decimal}),this._measureLable.text=this[i(1575)].getLangText("_角度")+":"+this._measured.angleStr+`
`+this._map.getLangText("_距离")+":"+this._measured[i(3551)]}_drawAddPointHandler(e){this[_0x3a2b68(1169)](e)}_drawRemovePointHandler(e){this._measureLable&&(this._measureLable.show=![])}_drawMouseMoveHandler(e){const t={_0x1a34a7:2580,_0x573eb4:442},i=_0x3a2b68,s=this.positionsShow;if(!s||s[i(400)]<2){this._measureLable[i(442)]=![];return}this._measured[i(3481)]=Cesium__namespace[i(2978)].distance(s[0],s[1]),this._measured[i(t._0x1a34a7)]=getAngle(s[0],s[1],!![]),this[i(1969)](),this._measureLable.position=s[1],this._measureLable[i(t._0x573eb4)]=!![],this.fire(EventType.change,{mtype:this.type,value:this._measured.angle,label:this._measured[i(4101)]},!![])}_drawCreatedHandler(e){const t={_0x1183a3:3734},i=_0x3a2b68;this.fire(EventType.end,{mtype:this.type,value:this[i(t._0x1183a3)].angle,label:this._measured.angleStr},!![])}}register$4("angleMeasure",AngleMeasure);const DEF_STYLE$n={materialType:"PolylineGlow",glowPower:.1,color:"#ebe12c",width:9};class HeightMeasure extends PolylineEntity{constructor(e={}){const t={_0x4b2abd:2748},i=_0x3a2b68;e.hasMoveEdit=![],e.maxPointNum=2,e.decimal=e.decimal??2,e[i(t._0x4b2abd)]={...DEF_STYLE$n,...e.style},super(e),this._measured={}}get measured(){return this._measured}_addedHook(e){const t={_0x2638a6:2679,_0xd174fe:465,_0x53117b:4327,_0x1234c3:1941,_0x4b430f:1602},i=_0x3a2b68;super[i(t._0x2638a6)](e),this._initMeasureLable(),this.on(EventType.drawAddPoint,this._drawAddPointHandler,this),this.on(EventType.drawRemovePoint,this._drawRemovePointHandler,this),this.on(EventType.drawMouseMove,this[i(1169)],this),this.once(EventType[i(t._0xd174fe)],this[i(t._0x53117b)],this),this.on(EventType[i(3314)],this._editPointHandler,this),this.on(EventType[i(3949)],this[i(1602)],this),this.on(EventType.editMouseMove,this._editPointHandler,this),this[i(t._0x1234c3)].positions&&(this._measureLable.show=!![],this[i(t._0x4b430f)]())}_updatePositionsHook(){const e={_0x4519be:442},t=_0x3a2b68;super._updatePositionsHook(),this[t(3986)][t(e._0x4519be)]=!![],this._editPointHandler()}[_0x3a2b68(3916)](){const e={_0x559ea8:4064,_0x15a95a:3429,_0x38c3a8:780,_0x792430:3314,_0x273d24:2971},t=_0x3a2b68;this.off(EventType[t(e._0x559ea8)],this._drawAddPointHandler,this),this[t(2971)](EventType[t(e._0x15a95a)],this._drawMouseMoveHandler,this),this.off(EventType[t(e._0x38c3a8)],this._drawRemovePointHandler,this),this[t(2971)](EventType.drawCreated,this._drawCreatedHandler,this),this.off(EventType[t(e._0x792430)],this._editPointHandler,this),this[t(e._0x273d24)](EventType.editRemovePoint,this._editPointHandler,this),this[t(2971)](EventType.editMouseMove,this._editPointHandler,this),this._removeMeasureLabelAndEx(),super._removedHook()}_toJSON_Ex(e){e.measured=getAttrVal(this.measured,{onlySimpleType:!![]})}_initMeasureLable(){const e={_0x14441b:3986,_0x23774e:4053},t=_0x3a2b68;var i,s;this[t(e._0x14441b)]=this[t(2966)](this.options.label||((i=this[t(e._0x23774e)])===null||i===void 0||(s=i.options)===null||s===void 0?void 0:s.label)),this._measureLable.show=![]}_removeMeasureLabelAndEx(){Cesium__namespace.defined(this._measureLable)&&(this._removeLabel(this._measureLable),delete this._measureLable)}[_0x3a2b68(1969)](e){const t={_0x4eef20:3734,_0xe067de:1941},i=_0x3a2b68;e&&(this.options.unit=e),this._measured.heightStr=formatDistance(this[i(t._0x4eef20)].height,{unit:this.options[i(1733)],lang:this._map.lang,decimal:this[i(t._0xe067de)].decimal}),this[i(3986)].text=this._map.getLangText("_高度差")+":"+this[i(3734)].heightStr}[_0x3a2b68(2211)](e){this._drawMouseMoveHandler(e)}[_0x3a2b68(2559)](e){const t={_0x2cbd95:3986},i=_0x3a2b68;this._measureLable&&(this[i(t._0x2cbd95)].show=![])}_drawMouseMoveHandler(e){const t={_0x1bafe0:400,_0x3802ec:3986,_0x4ee555:442,_0x28a825:2101},i=_0x3a2b68,s=this.positionsShow;if(!s||s[i(t._0x1bafe0)]<2){this[i(t._0x3802ec)][i(t._0x4ee555)]=![];return}const r=Cesium__namespace[i(2228)][i(t._0x28a825)](s[0]),o=Cesium__namespace.Cartographic[i(2101)](s[1]);this._measured[i(4241)]=this._map.getRealAlt(Math.abs(o.height-r.height)),this[i(1969)](),this[i(t._0x3802ec)].position=Cesium__namespace.Cartesian3.midpoint(s[0],s[1],new Cesium__namespace[i(2978)]),this._measureLable.show=!![],this.fire(EventType.change,{mtype:this.type,value:this._measured.height,label:this._measured.heightStr},!![])}[_0x3a2b68(4327)](e){const t={_0x47c33c:3734},i=_0x3a2b68;this.fire(EventType[i(2602)],{mtype:this.type,value:this[i(t._0x47c33c)].height,label:this._measured.heightStr},!![])}_editPointHandler(e){this._drawMouseMoveHandler(e)}}register$4("heightMeasure",HeightMeasure);class HeightTriangleMeasure extends HeightMeasure{_initMeasureLable(){const e={_0xc9a0b8:1941,_0x14593b:3082},t=_0x3a2b68;var i,s,r,o;super._initMeasureLable(),this._measureDistanceLable=this._createLabel(this[t(e._0xc9a0b8)].label||((i=this._layer)===null||i===void 0||(s=i.options)===null||s===void 0?void 0:s.label)),this._measureDistanceLable[t(e._0x14593b)]=new Cesium__namespace[t(3532)](0,0),this._measureHorLable=this._createLabel(this[t(e._0xc9a0b8)].label||((r=this._layer)===null||r===void 0||(o=r.options)===null||o===void 0?void 0:o[t(3203)])),this._measureHorLable.pixelOffset=new Cesium__namespace.Cartesian2(0,0)}_removeMeasureLabelAndEx(){const e={_0x4fa87f:4015,_0x14432f:4343,_0x164c35:2848},t=_0x3a2b68;super._removeMeasureLabelAndEx(),this._measureDistanceLable!=null&&(this._removeLabel(this[t(599)]),delete this._measureDistanceLable),this._measureHorLable!=null&&(this._removeLabel(this[t(e._0x4fa87f)]),delete this[t(e._0x4fa87f)]),this[t(e._0x14432f)]!=null&&(this[t(e._0x164c35)].entities.remove(this[t(4343)]),delete this._measureExLine)}updateText(e){const t={_0x352f19:3551,_0x257755:3481,_0x5a70a3:3600},i=_0x3a2b68;super.updateText(e);const s={unit:this.options.unit,lang:this._map[i(3857)],decimal:this.options.decimal};this._measured[i(t._0x352f19)]=formatDistance(this._measured[i(t._0x257755)],s),this._measureDistanceLable.text=this._map[i(t._0x5a70a3)]("_空间距离")+":"+this._measured.distanceStr,this._measured.distanceHorStr=formatDistance(this._measured.distanceHor,s),this._measureHorLable.text=this[i(1575)].getLangText(i(1659))+":"+this._measured.distanceHorStr}_drawRemovePointHandler(e){const t={_0xc2bcb8:599,_0x1d84f5:4343,_0x15d424:1867},i=_0x3a2b68;this[i(3986)]&&(this._measureLable.show=![]),this._measureHorLable&&(this._measureHorLable.show=![]),this[i(599)]&&(this[i(t._0xc2bcb8)].show=![]),this[i(t._0x1d84f5)]&&(this[i(t._0x15d424)]=null)}_drawMouseMoveHandler(e){const t={_0xf590b0:3986,_0x16d218:2101,_0x51bce9:4015,_0x135311:1109,_0x2d49c3:4241},i=_0x3a2b68,s=this.positionsShow;if(!s||s.length<2){this[i(t._0xf590b0)][i(442)]=![];return}const r=Cesium__namespace.Cartographic.fromCartesian(s[0]),o=r[i(4241)],c=Cesium__namespace.Cartographic[i(t._0x16d218)](s[1]),_=c.height;let l,d,f;o>_?(d=Cesium__namespace.Cartesian3.fromRadians(c.longitude,c.latitude,o),f=s[0],l=s[1]):(d=Cesium__namespace.Cartesian3[i(1339)](r.longitude,r.latitude,_),f=s[1],l=s[0]),this._measured.height=this._map.getRealAlt(Math.abs(_-o)),this._measureLable.position=Cesium__namespace.Cartesian3.midpoint(d,l,new Cesium__namespace.Cartesian3),this[i(3986)].show=!![],this._measured.distance=Cesium__namespace.Cartesian3.distance(f,l),this._measureDistanceLable.position=Cesium__namespace.Cartesian3[i(1028)](f,l,new Cesium__namespace.Cartesian3),this._measureDistanceLable.show=!![],this._measured[i(3969)]=Cesium__namespace.Cartesian3.distance(d,f),this._measureHorLable.position=Cesium__namespace.Cartesian3.midpoint(d,f,new Cesium__namespace.Cartesian3),this[i(t._0x51bce9)][i(442)]=!![],this.updateText(),this.updateExLine([l,d,f]),this[i(t._0x135311)](EventType[i(866)],{mtype:this.type,value:this._measured[i(t._0x2d49c3)],label:this._measured.heightStr},!![])}updateExLine(e){const t={_0x3c741a:4343,_0xe0a4cb:4024,_0x3bec58:2848},i=_0x3a2b68;if(this._measureExLine_positions=e,!this[i(t._0x3c741a)]){const s={id:this.id+i(t._0xe0a4cb),polyline:PolylineStyleConver.toCesiumVal(this[i(1941)].style,{},!![])};s[i(553)].positions=new Cesium__namespace.CallbackProperty(r=>this._measureExLine_positions,![]),this._measureExLine=this._createEntity(s),this[i(t._0x3bec58)].entities.add(this[i(t._0x3c741a)]),this.bindPickId(this._measureExLine)}}_editPointHandler(e){this[_0x3a2b68(1169)](e)}}register$4("heightTriangleMeasure",HeightTriangleMeasure);const DEF_STYLE$m={color:"#00fff2",outline:!![],outlineColor:"#fafa5a",outlineWidth:1,opacity:.4,clampToGround:![]};class AreaMeasure extends PolygonEntity{constructor(e={}){const t={_0x917103:2748},i=_0x3a2b68;e.hasMoveEdit=![],e.decimal=e[i(1395)]??2,e.style={...DEF_STYLE$m,...e[i(t._0x917103)]},e.label&&(e[i(3203)]={horizontalOrigin:Cesium__namespace.HorizontalOrigin.CENTER,...e[i(3203)]}),super(e),this[i(3734)]={}}get measured(){return this._measured}_addedHook(e){const t={_0x5060c7:2679,_0xbaf9db:3429,_0x1bc271:4327,_0x11cb89:3949},i=_0x3a2b68;var s,r;super[i(t._0x5060c7)](e),this[i(3986)]=this._createLabel(this.options.label||((s=this._layer)===null||s===void 0||(r=s.options)===null||r===void 0?void 0:r[i(3203)])),this[i(3986)].show=![],this.on(EventType[i(4064)],this[i(2211)],this),this.on(EventType[i(780)],this._drawRemovePointHandler,this),this.on(EventType[i(t._0xbaf9db)],this._drawMouseMoveHandler,this),this.once(EventType.drawCreated,this[i(t._0x1bc271)],this),this.on(EventType.editMovePoint,this._editPointHandler,this),this.on(EventType[i(t._0x11cb89)],this._editPointHandler,this),this.options.positions&&(this._measureLable.show=!![],this._editPointHandler())}_updatePositionsHook(){const e=_0x3a2b68;super._updatePositionsHook(),this._measureLable&&(this._measureLable.show=!![],this[e(1602)]())}_removedHook(){const e={_0x1bdf59:1169,_0x23b7ed:3314,_0x57f0f3:3916},t=_0x3a2b68;this.off(EventType.drawAddPoint,this._drawAddPointHandler,this),this.off(EventType[t(3429)],this[t(e._0x1bdf59)],this),this.off(EventType.drawRemovePoint,this._drawRemovePointHandler,this),this.off(EventType.drawCreated,this._drawCreatedHandler,this),this[t(2971)](EventType[t(e._0x23b7ed)],this._editPointHandler,this),this.off(EventType.editRemovePoint,this[t(1602)],this),this._removeMeasureLabelAndEx(),super[t(e._0x57f0f3)]()}_toJSON_Ex(e){e.measured=getAttrVal(this.measured,{onlySimpleType:!![],noArray:!![]})}_removeMeasureLabelAndEx(){const e={_0x48492a:3986},t=_0x3a2b68;Cesium__namespace.defined(this[t(3986)])&&(this._removeLabel(this[t(e._0x48492a)]),delete this._measureLable)}updateText(e){const t={_0x526fdd:1733,_0x4319ad:3734,_0x259ba4:1575},i=_0x3a2b68;e&&(this.options[i(t._0x526fdd)]=e),this._measured.areaStr=formatArea(this[i(t._0x4319ad)].area,{unit:this.options.unit,lang:this[i(t._0x259ba4)].lang,decimal:this.options.decimal}),this._measureLable.text=this._map.getLangText("_面积")+":"+this._measured.areaStr}startDraw(e){const t={_0x40c0c9:1169,_0x453fc4:1941,_0x8fcfc0:400},i=_0x3a2b68;var s;super.startDraw(e),this[i(t._0x40c0c9)](),((s=this[i(t._0x453fc4)].positions)===null||s===void 0?void 0:s[i(t._0x8fcfc0)])>2&&this.stopDraw()}_drawAddPointHandler(e){this._drawMouseMoveHandler(e)}_drawRemovePointHandler(e){const t=_0x3a2b68,i=this.positionsShow;(i==null?void 0:i.length)<3&&(this[t(3986)][t(442)]=![])}[_0x3a2b68(1169)](e){const t={_0x2ef25b:4076,_0xa0d709:442,_0x26550f:1109,_0x5423b8:3254},i=_0x3a2b68,s=this[i(2976)];if(s.length<3){this._measureLable&&(this._measureLable.show=![]);return}this._measured.area=getArea(s),this.updateText();const r=centerOfMass(s);this._measureLable[i(t._0x2ef25b)]=r,this._measureLable[i(t._0xa0d709)]=!![],this[i(t._0x26550f)](EventType.change,{mtype:this.type,value:this._measured[i(t._0x5423b8)],label:this[i(3734)].areaStr},!![])}[_0x3a2b68(4327)](e){const t=_0x3a2b68;this.fire(EventType[t(2602)],{mtype:this.type,value:this._measured.area,label:this._measured.areaStr},!![])}_editPointHandler(e){const t={_0x315e59:1969,_0x5df380:4076,_0x2f19e8:1109,_0xdbeb69:2964},i=_0x3a2b68,s=this[i(2976)];!s||s.length<3||(this._measured.area=getArea(s),this[i(t._0x315e59)](),this._measureLable[i(t._0x5df380)]=centerOfMass(s),this[i(t._0x2f19e8)](EventType.change,{mtype:this.type,value:this._measured.area,label:this[i(3734)][i(t._0xdbeb69)]},!![]))}}register$4("areaMeasure",AreaMeasure);class AreaSurfaceMeasure extends AreaMeasure{constructor(e={}){super(e),e._promise&&(this._promise=e._promise,delete e._promise),e.style.clampToGround=!![]}[_0x3a2b68(4327)](e){this[_0x3a2b68(1902)](e)}_editPointHandler(e){super._editPointHandler(e),this.updateAreaForTerrain(e)}updateAreaForTerrain(e){const t={_0x3784f4:1941,_0x6bc0dd:1319},i={_0x221b19:1575,_0x46b57a:2627,_0x3d57e9:3734},s=_0x3a2b68,r=this.positionsShow;!r||r[s(400)]<3||(this.fire(EventType.start,{mtype:this.type,graphic:this},!![]),getClampArea(r,{scene:this._map.scene,splitNum:this.options.splitNum,has3dtiles:this[s(t._0x3784f4)][s(t._0x6bc0dd)],exact:this.options.exact}).then(o=>{const c=s;var _,l;if(!this._map||!this._measureLable)return;const d=getPositionValue(this._measureLable.position,(_=this[c(i._0x221b19)])===null||_===void 0?void 0:_[c(2257)].currentTime);d&&o!==null&&o!==void 0&&o[c(i._0x46b57a)]&&(this._measureLable.position=setPositionsHeight(d,o.maxHeight)),this._measured.area=o.area,this[c(1969)]();const f={...o,mtype:this.type,value:this._measured[c(3254)],label:this[c(i._0x3d57e9)].areaStr};this[c(1109)](EventType[c(866)],f,!![]),this.fire(EventType.end,f,!![]),(l=this._promise)!==null&&l!==void 0&&l.resolve&&this._promise[c(583)](this)}))}}register$4("areaSurfaceMeasure",AreaSurfaceMeasure);class VolumeMeasure extends AreaMeasure{constructor(e={}){const t={_0x2d6c94:3165,_0x2a8061:3203,_0x35c619:1055,_0x49ec3c:2191,_0x3d4107:3622,_0x37e39d:484,_0x5cfd29:3577,_0x1e9ebe:2498},i=_0x3a2b68;super(e),e._promise&&(this._promise=e._promise,delete e._promise),this[i(t._0x2d6c94)]={...this.options[i(t._0x2a8061)],font_size:15,background:![]},Cesium__namespace.defined(e.labelHeight)&&(this[i(3165)]={...this[i(3165)],...e[i(t._0x35c619)]}),this.polygonWallStyle={color:"#00ff00",opacity:.3,closeTop:![],closeBottom:!![],perPositionHeight:![],height:new Cesium__namespace[i(t._0x49ec3c)](s=>this.minHeight,![]),extrudedHeight:new Cesium__namespace[i(2191)](s=>this.maxHeight,![])},Cesium__namespace.defined(e[i(2141)])&&(this.polygonWallStyle={...this.polygonWallStyle,...e.polygonWall}),this.heightLabel=e.heightLabel??!![],this.offsetLabel=e.offsetLabel??![],this.showArea=e[i(t._0x3d4107)]??!![],this.showFillVolume=e[i(t._0x37e39d)]??!![],this.showDigVolume=e[i(t._0x5cfd29)]??!![],this[i(t._0x1e9ebe)]=![]}get hasEdit(){return![]}get polygonMaxHeight(){const e={_0x202ddb:586,_0x4b679a:2627},t=_0x3a2b68;return this[t(e._0x202ddb)]?this.interPolygonObj[t(e._0x4b679a)]:this[t(2627)]}get height(){return this._jzmHeight}set height(e){const t={_0x3f8d84:1966,_0x212b54:2498},i=_0x3a2b68;if(this[i(t._0x3f8d84)]=e,e>this.maxHeight&&(this[i(2627)]=e),e<this.minHeight&&(this.minHeight=e),!this[i(t._0x212b54)])return;const s=updateVolume(this[i(586)],this.height);for(const o in s)this._measured[o]=s[o];if(this[i(1969)](),this._arrPartMeasureLable)for(let o=0;o<this[i(939)][i(400)];o++)this._arrPartMeasureLable[o].showText();const r={...s,sourceTarget:this,mtype:this.type,graphic:this};this.fire(EventType[i(866)],r,!![])}get minHeight(){return this._minHeight||0}set minHeight(e){const t={_0x4d4f10:586,_0x478954:866},i=_0x3a2b68;if(this._minHeight=e,!this._hasFX)return;this.interPolygonObj&&(this.interPolygonObj.minHeight=e,this.interPolygonObj=updateVolumeByMinHeight(this.interPolygonObj));const s=updateVolume(this[i(t._0x4d4f10)],this.height);for(const o in s)this._measured[o]=s[o];this.updateText();const r={...s,sourceTarget:this,mtype:this[i(1603)],graphic:this};this.fire(EventType[i(t._0x478954)],r,!![])}get[_0x3a2b68(2627)](){return this._maxHeight||0}set[_0x3a2b68(2627)](e){this._maxHeight=e}[_0x3a2b68(840)](e){const t={_0x4df3c8:939},i=_0x3a2b68;if(this[i(2473)]&&(this._wallEntity[i(442)]=e),this._measureLable&&(this._measureLable.show=e),this[i(t._0x4df3c8)])for(let s=0;s<this._arrPartMeasureLable[i(400)];s++)this._arrPartMeasureLable[s].show=e}[_0x3a2b68(3916)](){const e={_0x294a75:3916},t=_0x3a2b68;this._depthTestAgainstTerrain_reset&&(this._map.scene.globe.depthTestAgainstTerrain=![],delete this._depthTestAgainstTerrain_reset),super[t(e._0x294a75)]()}_removeMeasureLabelAndEx(){const e={_0x76161:400,_0x29d434:407,_0x6a8faa:2473},t=_0x3a2b68;if(super._removeMeasureLabelAndEx(),Cesium__namespace.defined(this[t(939)])&&this._arrPartMeasureLable[t(e._0x76161)]>0){const i=this._arrPartMeasureLable;if(i&&i[t(400)]>0)for(let s=0,r=i.length;s<r;s++)this._removeLabel(i[s]);delete this._arrPartMeasureLable}Cesium__namespace[t(e._0x29d434)](this[t(2473)])&&(this.dataSource.entities.remove(this[t(e._0x6a8faa)]),delete this._wallEntity)}_drawCreatedHandler(e){const t={_0x12f0aa:2976},i=_0x3a2b68;this._measureLable.text=this._map[i(3600)]("_正在计算体积")+"…";const s=this[i(t._0x12f0aa)];setTimeout(()=>{this.calcVolume(s)},100)}[_0x3a2b68(1602)](e){this._drawCreatedHandler(e)}updateText(e){const t={_0x361e52:1733,_0x3f8ce3:3734,_0x1175ac:1986,_0x3c30ba:1941,_0x4b8fd7:1532,_0x346095:3577,_0x539744:3734,_0x1d9d28:3734,_0x4463bc:3897,_0x452aad:1575},i=_0x3a2b68;e&&(this.options[i(t._0x361e52)]=e);const s={unit:this.options[i(1733)],lang:this._map.lang,decimal:this.options.decimal};let r="";this.showFillVolume&&this[i(t._0x3f8ce3)][i(t._0x1175ac)]>0&&(this._measured.fillVolumeStr=formatVolume(this._measured.fillVolume,s),r+=(this[i(t._0x3c30ba)][i(t._0x4b8fd7)]||this[i(1575)].getLangText(i(4247)))+"："+this._measured.fillVolumeStr+`
`),this[i(t._0x346095)]&&this._measured.digVolume>0&&(this._measured.digVolumeStr=formatVolume(this[i(t._0x539744)].digVolume,s),r+=(this.options.digVolumeName||this._map.getLangText("_挖方体积"))+"："+this._measured.digVolumeStr+`
`),this.showArea&&this[i(t._0x1d9d28)].totalArea>0&&(this[i(t._0x3f8ce3)].totalAreaStr=formatArea(this[i(3734)][i(t._0x4463bc)],s),r+=(this[i(1941)].areaName||this[i(t._0x452aad)].getLangText(i(3632)))+"："+this._measured[i(1567)]),this[i(3986)][i(3640)]=r}[_0x3a2b68(1677)](e){const t={_0x40c719:3702},i={_0x6e1798:1575},s=_0x3a2b68;!this[s(1575)]||!e||e.length<3||(this[s(1109)](EventType[s(t._0x40c719)],{mtype:this.type,sourceTarget:this,positions:e},!![]),this._hasFX=!![],interPolygon({positions:e,scene:this[s(1575)].scene,exact:!![],...this.options}).then(r=>{const o=s;!this._map||!this._hasFX||(r.has3dtiles?this._map.scene[o(1462)].depthTestAgainstTerrain=![]:!this[o(1575)].scene.globe.depthTestAgainstTerrain&&(this[o(i._0x6e1798)].scene.globe.depthTestAgainstTerrain=!![],this._depthTestAgainstTerrain_reset=!![]),this.showVolume(e,r))}))}showVolume(e,t){const i={_0x5ad451:1966,_0x18a35d:2309,_0x5d7206:3932,_0x248b5b:586,_0x237b6e:2059,_0x5beb5d:866},s=_0x3a2b68;var r;this._jzmHeight=this.options[s(4241)]??t.minHeight,this._jzmHeight<t.minHeight&&(t.minHeight=this[s(i._0x5ad451)]),this.interPolygonObj=updateVolumeByMinHeight(t),this._minHeight=this.options.minHeight??this.interPolygonObj.minHeight,this[s(i._0x18a35d)]=this.options.maxHeight??this.interPolygonObj[s(2627)];const o=Math.floor(.3*Cesium__namespace[s(2806)].chordLength(t[s(i._0x5d7206)],this[s(1575)].scene.globe.ellipsoid.maximumRadius));this._maxHeight-this._minHeight<o&&(this._maxHeight=this[s(1962)]+o);const c=updateVolume(this[s(i._0x248b5b)],this[s(4241)]);for(const d in c)this._measured[d]=c[d];this.updateText(),this._measureLable.position=centerOfMass(e,this.interPolygonObj.maxHeight),this.heightLabel&&this.showPointHeightLabel(e,this[s(i._0x248b5b)][s(1890)]),this[s(4335)]._noMousePick=!![],this.entityGraphic.perPositionHeight=![],this.entityGraphic.hierarchy=new Cesium__namespace[s(2004)](e),this[s(3511)].height=new Cesium__namespace.CallbackProperty(d=>this.height,![]);const _=PolygonStyleConver.toCesiumVal(this.polygonWallStyle,{},!![]);_[s(i._0x237b6e)]=new Cesium__namespace.PolygonHierarchy(e),Cesium__namespace.defined(this._wallEntity)&&this[s(2848)].entities.remove(this[s(2473)]),this._wallEntity=this.dataSource[s(2931)].add({polygon:_,show:this[s(442)]}),this._wallEntity._noMousePick=!![],this.bindPickId(this._wallEntity);const l={...c,sourceTarget:this,mtype:this[s(1603)],graphic:this};this.fire(EventType[s(i._0x5beb5d)],l,!![]),this.fire(EventType.end,l,!![]),(r=this._promise)!==null&&r!==void 0&&r.resolve&&this[s(3531)].resolve(this)}showPointHeightLabel(e,t){const i={_0x4bc7f4:3198,_0x56ce3a:1575,_0x5f2eba:3165},s={_0x279b00:2251,_0x5f30af:3600,_0x33b876:3600,_0x18f9b1:3349,_0x19ba61:1575,_0x407e02:3600},r=_0x3a2b68,o=this;if(Cesium__namespace.defined(this._arrPartMeasureLable)&&this._arrPartMeasureLable.length>0){const _=this._arrPartMeasureLable;if(_&&_[r(400)]>0)for(let l=0,d=_.length;l<d;l++)this._removeLabel(_[l]);delete this._arrPartMeasureLable}const c=[];for(let _=0;_<e.length;_++){const l=Math[r(i._0x4bc7f4)](getHeight(this[r(i._0x56ce3a)].scene,e[_]),t),d=Cesium__namespace.Cartographic.fromCartesian(e[_]),f=Cesium__namespace.Cartesian3.fromRadians(d.longitude,d.latitude,l),g=this._createLabel(this[r(i._0x5f2eba)],f);g.attr={value:l},c.push(g),g.showText=function(){const b=r,C=this.attr[b(s._0x279b00)];let P=o[b(1575)][b(3600)]("_海拔")+"："+C.toFixed(2)+o._map[b(s._0x5f30af)]("_米");if(o.offsetLabel){const S=C-o.height;S>0?P+=`
`+o._map.getLangText("_高度")+"："+S.toFixed(2)+o[b(1575)].getLangText("_米")+"("+o._map[b(s._0x33b876)](b(3040))+")":P+=`
`+o._map.getLangText(b(s._0x18f9b1))+"："+Math.abs(S).toFixed(2)+o[b(s._0x19ba61)][b(3600)]("_米")+"("+o._map[b(s._0x407e02)]("_面下")+")"}return this.text=P,P},g.showText()}this[r(939)]=c}}register$4(_0x3a2b68(1743),VolumeMeasure);class VolumeDepthMeasure extends AreaMeasure{constructor(e={}){const t={_0x17625e:3531,_0x5c0d55:3450,_0x5f5786:484,_0x5198bd:2450},i=_0x3a2b68;super(e),e[i(t._0x17625e)]&&(this._promise=e._promise,delete e._promise),this.labelHeightStyle={...this.options.label,font_size:15,background:![]},Cesium__namespace[i(407)](e.labelHeight)&&(this[i(3165)]={...this[i(3165)],...e.labelHeight}),this[i(t._0x5c0d55)]=Cesium__namespace[i(1393)].fromColor(getCesiumColor(e.cutColor,Cesium__namespace.Color.RED.withAlpha(.5))),this._fillColor=Cesium__namespace.ColorGeometryInstanceAttribute.fromColor(getCesiumColor(e.fillColor,Cesium__namespace.Color.YELLOW.withAlpha(.5))),this.options.offsetHeight=this.options.offsetHeight??0,this.polygonWallStyle={color:"#00ff00",opacity:.3,closeTop:![],closeBottom:!![],perPositionHeight:![],height:new Cesium__namespace.CallbackProperty(s=>this.minHeight,![]),extrudedHeight:new Cesium__namespace.CallbackProperty(s=>this.maxHeight,![])},Cesium__namespace.defined(e.polygonWall)&&(this.polygonWallStyle={...this.polygonWallStyle,...e.polygonWall}),this.heightLabel=e.heightLabel??!![],this.offsetLabel=e.offsetLabel??![],this.showArea=e.showArea??!![],this[i(t._0x5f5786)]=e[i(484)]??!![],this.showDigVolume=e.showDigVolume??!![],this._showBox=e.showBox??!![],this._showPoly=e.showPoly??!![],this[i(t._0x5198bd)]=e.showWall??![],this[i(2498)]=![]}get hasEdit(){return![]}get polygonMaxHeight(){const e={_0x4c04c2:3734,_0x2fde6f:2627},t=_0x3a2b68;return this[t(e._0x4c04c2)]?this._measured.maxHeight:this[t(e._0x2fde6f)]}get height(){return this._jzmHeight}set height(e){const t={_0x34ddc3:1890,_0x3a3b53:1969,_0x742491:1122,_0x54509f:3734,_0x51a1da:1603},i=_0x3a2b68;if(this._jzmHeight=e,e>this.maxHeight&&(this.maxHeight=e),e<this.minHeight&&(this[i(t._0x34ddc3)]=e),!this._hasFX)return;if(this.updateVolume(),this[i(t._0x3a3b53)](),this._arrPartMeasureLable)for(let r=0;r<this._arrPartMeasureLable[i(400)];r++)this._arrPartMeasureLable[r][i(t._0x742491)]();const s={...this[i(t._0x54509f)],sourceTarget:this,mtype:this[i(t._0x51a1da)],graphic:this};this.fire(EventType.change,s,!![])}get minHeight(){return this[_0x3a2b68({_0x3aef66:1962}._0x3aef66)]||0}set[_0x3a2b68(1890)](e){const t={_0x90b3f2:1962,_0x311c82:2498,_0x43ad27:3566},i=_0x3a2b68;if(this[i(t._0x90b3f2)]=e,!this[i(t._0x311c82)])return;this._measured&&(this._measured.minHeight=e,this[i(t._0x43ad27)]()),this.updateText();const s={...this._measured,sourceTarget:this,mtype:this[i(1603)],graphic:this};this.fire(EventType.change,s,!![])}get maxHeight(){return this._maxHeight||0}set maxHeight(e){this._maxHeight=e}get showBox(){return this._showBox}set showBox(e){this._showBox=e,this.updateVolume()}_removeMeasureLabelAndEx(){const e={_0x5c94c9:1263,_0xd8b82f:2473,_0x3b763f:2473},t=_0x3a2b68;if(super._removeMeasureLabelAndEx(),Cesium__namespace.defined(this._arrPartMeasureLable)&&this._arrPartMeasureLable.length>0){const i=this._arrPartMeasureLable;if(i&&i.length>0)for(let s=0,r=i.length;s<r;s++)this[t(e._0x5c94c9)](i[s]);delete this._arrPartMeasureLable}Cesium__namespace.defined(this._wallEntity)&&(this.dataSource.entities[t(1361)](this[t(e._0xd8b82f)]),delete this[t(e._0x3b763f)])}_drawCreatedHandler(e){const t={_0x87c220:1987},i=_0x3a2b68;this[i(3986)].text=this._map.getLangText(i(t._0x87c220))+"…";const s=this.positionsShow;(s==null?void 0:s.length)>3&&setTimeout(()=>{this[i(1677)](s)},100)}_editPointHandler(e){this._drawCreatedHandler(e)}updateText(e){const t={_0x2a47ad:1733,_0x7e69cf:1941,_0x253f68:1395,_0x503722:1986,_0x2b0777:1871,_0x4b4ecd:1795},i=_0x3a2b68;e&&(this.options.unit=e);const s={unit:this.options[i(t._0x2a47ad)],lang:this[i(1575)][i(3857)],decimal:this[i(t._0x7e69cf)][i(t._0x253f68)]};let r="";this.showFillVolume&&this._measured.fillVolume>0&&(this._measured[i(3178)]=formatVolume(this._measured[i(t._0x503722)],s),r+=(this.options.fillVolumeName||this._map.getLangText("_填方体积"))+"："+this[i(3734)][i(3178)]+`
`),this.showDigVolume&&this[i(3734)].digVolume>0&&(this._measured.digVolumeStr=formatVolume(this._measured[i(t._0x2b0777)],s),r+=(this.options.digVolumeName||this._map.getLangText("_挖方体积"))+"："+this._measured[i(t._0x4b4ecd)]+`
`),this.showArea&&this._measured.totalArea>0&&(this._measured.totalAreaStr=formatArea(this._measured.totalArea,s),r+=(this.options.areaName||this._map.getLangText("_横切面积"))+"："+this._measured[i(1567)]),this._measureLable.text=r}calcVolume(e){const t={_0x4017ac:358,_0x1a8355:358,_0x3a4374:1575},i={_0x1d6262:1966,_0x12a9b0:1890,_0x43f9c7:1962,_0x2cf2b2:2627,_0xcb7e3f:3986,_0x14e0f0:442,_0x241618:2059,_0xecc14b:2004,_0x220f24:4241,_0x292fff:2602,_0x3cae9b:583},s=_0x3a2b68;if(this._map){if(this.fire(EventType.start,{mtype:this.type,sourceTarget:this,positions:e},!![]),this._hasFX=!![],this._measureLable.show=![],this._entity.show=![],this[s(t._0x4017ac)])for(let r=0,o=this[s(t._0x1a8355)].length;r<o;r++){const c=this._entity_outlines[r].polyline;c.show=![]}interPolygonByDepth({scene:this[s(t._0x3a4374)].scene,positions:e,splitNum:this.options.splitNum,cameraHeight:this.options.cameraHeight}).then(r=>{const o=s;var c;if(this.isDestroy)return;if(this._measured=r,this._jzmHeight=this.options[o(4241)]??r.minHeight,this[o(i._0x1d6262)]<r.minHeight&&(r[o(i._0x12a9b0)]=this._jzmHeight),this[o(3734)]=this.updateVolume(r),this[o(i._0x43f9c7)]=this[o(1941)].minHeight??this._measured.minHeight,this._maxHeight=this.options.maxHeight??this[o(3734)][o(i._0x2cf2b2)],this.updateText(),this[o(i._0xcb7e3f)].position=centerOfMass(e,this._maxHeight),this._measureLable.show=!![],this.heightLabel&&this.showPointHeightLabel(e,this._minHeight),this[o(1265)]){if(this._entity[o(i._0x14e0f0)]=!![],this._entity_outlines)for(let l=0,d=this._entity_outlines.length;l<d;l++){const f=this._entity_outlines[l][o(553)];f.show=!![]}this._entity._noMousePick=!![],this.entityGraphic.perPositionHeight=![],this.entityGraphic[o(i._0x241618)]=new Cesium__namespace[o(i._0xecc14b)](e),this.entityGraphic[o(i._0x220f24)]=new Cesium__namespace.CallbackProperty(l=>this.height,![])}if(this[o(2450)]){const l=PolygonStyleConver.toCesiumVal(this[o(2254)],{},!![]);l[o(2059)]=new Cesium__namespace.PolygonHierarchy(e),this._wallEntity=this.dataSource.entities[o(3674)]({polygon:l}),this._wallEntity._noMousePick=!![],this.bindPickId(this._wallEntity)}const _={...this._measured,sourceTarget:this,mtype:this.type,graphic:this};this.fire(EventType.change,_,!![]),this[o(1109)](EventType[o(i._0x292fff)],_,!![]),(c=this._promise)!==null&&c!==void 0&&c[o(583)]&&this._promise[o(i._0x3cae9b)](this)})}}updateVolume(e){const t={_0x457dde:1890,_0x840384:4241,_0x2738fc:3493,_0x15c817:1754,_0x3249c6:3450,_0x12f3dc:1871,_0x103b63:1361,_0x41afc9:2618,_0x34d34e:3674,_0x177117:3184,_0x59f34c:1472,_0x52f97b:3184},i=_0x3a2b68;!e&&(e=this._measured);const s=e[i(t._0x457dde)],r=this[i(4241)],o=e.box.area,c=[],_=this.options.offsetHeight;let l=0,d=0;for(let f=0,g=e.count;f<g;f++){const b=e[i(2694)][f];let C=b[i(t._0x840384)];if(C<s&&(C=s),C>r){if(l+=o*(C-r),this[i(2709)]){const P=b[i(t._0x2738fc)]();c[i(t._0x15c817)](new Cesium__namespace.GeometryInstance({geometry:new Cesium__namespace.PolygonOutlineGeometry({polygonHierarchy:new Cesium__namespace.PolygonHierarchy(P),extrudedHeight:C+_,height:r+_}),attributes:{color:this[i(t._0x3249c6)]}}))}}else if(C<r&&(d+=o*(r-C),this.showBox)){const P=b.getOutline();c[i(1754)](new Cesium__namespace.GeometryInstance({geometry:new Cesium__namespace.PolygonOutlineGeometry({polygonHierarchy:new Cesium__namespace.PolygonHierarchy(P),extrudedHeight:r+_,height:C+_}),attributes:{color:this._fillColor}}))}}return e[i(t._0x12f3dc)]=l,e[i(1986)]=d,this._primitive_boxs&&(this._layer.primitiveCollection[i(t._0x103b63)](this._primitive_boxs),delete this._primitive_boxs),this.showBox&&c.length>0&&(this._primitive_boxs=new Cesium__namespace[i(t._0x41afc9)]({geometryInstances:c,appearance:new Cesium__namespace[i(2146)]({flat:!![],renderState:{lineWidth:1}}),asynchronous:!![]}),this._layer.primitiveCollection[i(t._0x34d34e)](this[i(t._0x177117)]),this._primitive_boxs[i(1711)]=!![],this[i(t._0x59f34c)](this[i(t._0x52f97b)])),e}showPointHeightLabel(e,t){const i={_0x2bf657:3198,_0x3d2bf8:1575,_0x31bbe4:768},s={_0x1ee7b2:3208,_0x247151:2251,_0x3a8d14:1575,_0x4769d4:3600,_0x3de8c2:3349,_0x197792:3265,_0x252242:3600,_0x282933:1575},r=_0x3a2b68,o=this,c=[];for(let _=0;_<e.length;_++){const l=Math[r(i._0x2bf657)](getHeight(this[r(i._0x3d2bf8)].scene,e[_]),t),d=Cesium__namespace.Cartographic.fromCartesian(e[_]),f=Cesium__namespace.Cartesian3.fromRadians(d[r(i._0x31bbe4)],d[r(3664)],l),g=this._createLabel(this.labelHeightStyle,f);g[r(3208)]={value:l},c.push(g),g.showText=function(){const b=r,C=this[b(s._0x1ee7b2)][b(s._0x247151)];let P=o._map.getLangText("_海拔")+"："+C.toFixed(2)+o[b(s._0x3a8d14)][b(3600)]("_米");if(o[b(752)]){const S=C-o[b(4241)];S>0?P+=`
`+o._map[b(s._0x4769d4)](b(s._0x3de8c2))+"："+S[b(s._0x197792)](2)+o._map.getLangText("_米")+"("+o._map[b(s._0x252242)]("_面上")+")":P+=`
`+o[b(s._0x282933)][b(3600)]("_高度")+"："+Math.abs(S)[b(3265)](2)+o._map.getLangText("_米")+"("+o._map.getLangText("_面下")+")"}return this.text=P,P},g.showText()}this[r(939)]=c}}register$4("volumeDepthMeasure",VolumeDepthMeasure);class BillboardPrimitive extends BasePointPrimitive{get primitiveCollection(){const e={_0x51fd90:4249},t=_0x3a2b68;var i,s;return(i=this._layer)!==null&&i!==void 0&&i[t(e._0x51fd90)]?this[t(4053)][t(e._0x51fd90)]._billboardCollection:(s=this[t(4053)])===null||s===void 0?void 0:s.billboardCollection}get[_0x3a2b68(1793)](){return this[_0x3a2b68(2748)].image}set image(e){const t=_0x3a2b68;this.style[t(1793)]=e,this._primitive&&(this._primitive.image=e)}_showHook(e){const t={_0x545113:703},i=_0x3a2b68;this[i(t._0x545113)]?this[i(703)][i(442)]=e:e&&super[i(840)](e)}_addedHook(e){const t={_0x6f357:3674,_0xcbdd79:3203},i=_0x3a2b68;if(!this.show)return;this._forPositionProperty(this.options.position);const s=BillboardStyleConver.toCesiumVal(e,{show:this.show,position:this.position});this._primitive=this.primitiveCollection[i(t._0x6f357)](s),this.style[i(t._0xcbdd79)]&&this._addLabel()}[_0x3a2b68(2019)](e,t){const i={_0x916486:2362},s=_0x3a2b68;BillboardStyleConver[s(1304)](e,this[s(i._0x916486)])}_style2Json(e,t){return BillboardStyleConver.toJSON(e,t)}_updatePositionsHook(){const e={_0x1aecc7:4076,_0x46fd58:2877,_0x2da878:2978},t=_0x3a2b68;this[t(703)]._billboardCollection&&(this._primitive[t(e._0x1aecc7)]=this.position,Cesium__namespace[t(407)](this.style[t(2877)])&&(this._primitive[t(e._0x46fd58)]=getCesiumValue(this.style.alignedAxis,Cesium__namespace[t(e._0x2da878)])))}[_0x3a2b68(1744)](e){const t={_0x28ff51:2551},i=_0x3a2b68;this.style.globalAlpha=e,this._primitive&&(this._primitive.color=Cesium__namespace[i(2092)][i(1948)].withAlpha(e)),this[i(t._0x28ff51)](e)}_getDrawEntityClass(e,t){return create$4("billboard",e)}}register$4("billboardP",BillboardPrimitive,!![]);class CloudPrimitive extends BasePointPrimitive{get primitiveCollection(){var e;return(e=this._layer)===null||e===void 0?void 0:e.cloudCollection}get maximumSize(){const e={_0x14099a:3832},t=_0x3a2b68;return this.style[t(e._0x14099a)]}set[_0x3a2b68(3832)](e){const t={_0xa5cc19:3832},i=_0x3a2b68;this.style[i(t._0xa5cc19)]=e,this._primitive&&(this._primitive.maximumSize=e)}get scale(){return this[_0x3a2b68(2748)].scale}set scale(e){const t={_0x53c3e4:826},i=_0x3a2b68;this.style[i(826)]=e,this._primitive&&(this._primitive[i(t._0x53c3e4)]=e)}get slice(){const e={_0x569c1b:2082},t=_0x3a2b68;return this[t(2748)][t(e._0x569c1b)]}set slice(e){const t={_0x3ce898:2082,_0x23e9ad:2082},i=_0x3a2b68;this.style[i(t._0x3ce898)]=e,this._primitive&&(this._primitive[i(t._0x23e9ad)]=e)}get brightness(){return this[_0x3a2b68({_0x21ea37:2748}._0x21ea37)].brightness}set[_0x3a2b68(2071)](e){const t=_0x3a2b68;this.style.brightness=e,this._primitive&&(this[t(703)].brightness=e)}get hasOpacity(){return![]}_addedHook(e){const t={_0x1ab10f:442,_0x8ceb2c:1304},i=_0x3a2b68;if(!this[i(t._0x1ab10f)])return;this._forPositionProperty(this.options[i(4076)]);const s=CloudStyleConver[i(t._0x8ceb2c)](e,{show:this.show,position:this.position});this._primitive=this.primitiveCollection[i(3674)](s),this.style[i(3203)]&&this._addLabel()}_showHook(e){this[_0x3a2b68({_0x46136b:703}._0x46136b)]?this._primitive.show=e:super._showHook(e)}_updateStyleHook(e,t){CloudStyleConver.toCesiumVal(e,this.primitive)}_style2Json(e,t){return CloudStyleConver.toJSON(e,t)}_updatePositionsHook(){const e=_0x3a2b68;this._primitive[e(4076)]=this.position}[_0x3a2b68(4347)](e,t){return this._getDrawPointEntityClass(e,t)}}register$4("cloud",CloudPrimitive,!![]);class LabelPrimitive extends BasePointPrimitive{get primitiveCollection(){const e={_0x2dc424:4053},t=_0x3a2b68;var i,s;return(i=this[t(e._0x2dc424)])!==null&&i!==void 0&&i._primitiveCluster?this._layer[t(4249)]._labelCollection:(s=this[t(4053)])===null||s===void 0?void 0:s.labelCollection}get text(){const e=_0x3a2b68;return this.style[e(3640)]}set text(e){const t={_0x3723fc:703},i=_0x3a2b68;this.style.text=e,this[i(t._0x3723fc)]&&(this._primitive.text=e)}_showHook(e){const t={_0x905775:442},i=_0x3a2b68;this._primitive?this._primitive[i(t._0x905775)]=e:e&&super._showHook(e)}_addedHook(e){const t={_0x9faa30:442,_0x291020:2808},i=_0x3a2b68;if(!this[i(t._0x9faa30)])return;const s=LabelStyleConver.toCesiumVal(this[i(2748)],{show:this.show,position:this.position},{},this.attr);this._primitive=this.primitiveCollection.add(s),this[i(t._0x291020)]()}_removedHook(){const e=_0x3a2b68;super._removedHook(),this[e(3881)]()}_bindMorphComplete(){const e=_0x3a2b68;this._unbindMorphComplete(),this.style[e(3542)]&&this[e(1575)].on(EventType.morphComplete,this[e(2594)],this)}_unbindMorphComplete(){const e=_0x3a2b68;this._map.off(EventType.morphComplete,this[e(2594)],this)}_map_morphCompleteHandler(e){const t={_0x329a7f:3676},i=_0x3a2b68;this._map.scene.mode===Cesium__namespace.SceneMode[i(t._0x329a7f)]?this._primitive.heightReference=Cesium__namespace.HeightReference.NONE:this._primitive.heightReference=this.style.clampToGround?Cesium__namespace.HeightReference.CLAMP_TO_GROUND:Cesium__namespace[i(808)].NONE}_updateStyleHook(e,t){const i=_0x3a2b68;LabelStyleConver.toCesiumVal(e,this[i(2362)],this.attr),Cesium__namespace.defined(t.clampToGround)&&(this._bindMorphComplete(),this._map_morphCompleteHandler())}_style2Json(e,t){return LabelStyleConver.toJSON(e,t)}_updatePositionsHook(){const e=_0x3a2b68;this._primitive.position=this[e(4076)]}[_0x3a2b68(4347)](e,t){return create$4(_0x3a2b68({_0x34971a:3203}._0x34971a),e)}setOpacity(e){const t={_0x503048:703},i=_0x3a2b68;this.style.globalAlpha=e,this[i(t._0x503048)]&&this[i(442)]&&LabelStyleConver.setOpacity(this._primitive,e)}}register$4("labelP",LabelPrimitive,!![]);class ModelPrimitive extends BasePointPrimitive{constructor(e={}){super(e),this._readyPromise=Cesium__namespace.defer()}get[_0x3a2b68(1637)](){const e={_0x4ec4e1:3487,_0x4a0ad9:1190},t=_0x3a2b68,i=[];return this[t(e._0x4ec4e1)]&&i.push(this._primitive_label),this[t(e._0x4a0ad9)]&&i[t(1754)](this._primitive_point),this[t(2758)]&&i.push(this[t(2758)]),i}get[_0x3a2b68(826)](){return this[_0x3a2b68({_0x31aeb5:2748}._0x31aeb5)].scale??1}set scale(e){const t={_0x452a32:2748},i=_0x3a2b68;this.style.scale=e,this._updateStyleHook(this[i(t._0x452a32)],{scale:e})}get scaleX(){return this.style.scaleX??1}set[_0x3a2b68(1683)](e){const t={_0xe5e184:1683},i=_0x3a2b68;this.style[i(t._0xe5e184)]=e,this.updateModelMatrix()}get scaleY(){return this.style.scaleY??1}set scaleY(e){this.style.scaleY=e,this.updateModelMatrix()}get[_0x3a2b68(2425)](){return this.style.scaleZ??1}set[_0x3a2b68(2425)](e){const t={_0x262e87:2425},i=_0x3a2b68;this.style[i(t._0x262e87)]=e,this.updateModelMatrix()}get readyPromise(){const e={_0x38bd50:1900,_0x3cb461:1264},t=_0x3a2b68;return this[t(e._0x38bd50)][t(e._0x3cb461)]}_showHook(e){const t={_0x1a7581:442},i=_0x3a2b68;this[i(703)]?this._primitive[i(t._0x1a7581)]=e:e&&super._showHook(e)}_addedHook(e){const t={_0x296aa8:1941,_0x1691e5:4238,_0x31142e:3556,_0x446d33:4389,_0x4767c2:2748,_0x365869:1304,_0x31ca77:442,_0x1ecdad:3674,_0x5e8f25:2169,_0x55476b:1135},i={_0x412ef7:1472},s={_0x1077ac:2906,_0x3b8b6c:4125,_0x4dd9be:1603},r=_0x3a2b68;if(!this[r(442)]||!this[r(1575)])return;this._forPositionProperty(this[r(t._0x296aa8)][r(4076)]);const o=ModelStyleConver.toCesiumVal(this.style);if(o[r(4023)]&&(Cesium__namespace.Model.fromGltfAsync({modelMatrix:this[r(t._0x1691e5)],scene:this._map.scene,marsOptions:{occlusion:this.style[r(t._0x31142e)]},...o})[r(t._0x446d33)](l=>{const d=r;this[d(i._0x412ef7)](l),this._primitive=this.primitiveCollection.add(l),this._primitive.readyEvent.addEventListener(()=>{const f=d;var g;(this.style[f(3036)]??!![])&&(g=l.activeAnimations)!==null&&g!==void 0&&g.addAll&&l.activeAnimations.addAll({loop:Cesium__namespace[f(s._0x1077ac)][f(s._0x3b8b6c)],...this[f(2748)]}),this.fire(EventType.load,{drawtype:this[f(s._0x4dd9be)],model:l,graphic:this},!![]),this[f(1900)].resolve(this)})}),this[r(t._0x4767c2)][r(3203)]&&this[r(1286)](),this.style.distanceDisplayCondition)){if(this.style[r(3523)]){var c;const l=PointStyleConver[r(t._0x365869)](this.style[r(3523)],{show:this[r(t._0x31ca77)],position:this[r(4076)]});l.distanceDisplayCondition=this._getTargetDistanceDisplayCondition(this.style.distanceDisplayPoint),this._primitive_point=(c=this._layer)===null||c===void 0?void 0:c.pointCollection[r(t._0x1ecdad)](l)}else if(this.style.distanceDisplayBillboard){var _;const l=BillboardStyleConver[r(t._0x365869)](this.style.distanceDisplayBillboard,{show:this.show,position:this.position});l[r(t._0x5e8f25)]=this[r(t._0x55476b)](this[r(t._0x4767c2)][r(4246)]),this._primitive_billboard=(_=this[r(4053)])===null||_===void 0?void 0:_.billboardCollection.add(l)}}}_removedHook(){const e={_0x4a8a35:1190,_0x4b1c72:1190,_0x4fe9f3:1190,_0x787892:4053},t=_0x3a2b68;if(super._removedHook(),this[t(e._0x4a8a35)]){var i;(i=this._layer)===null||i===void 0||i[t(4325)].remove(this[t(e._0x4b1c72)]),delete this[t(e._0x4fe9f3)]}if(this[t(2758)]){var s;(s=this[t(e._0x787892)])===null||s===void 0||s.billboardCollection.remove(this._primitive_billboard),delete this._primitive_billboard}}_updateStyleHook(e,t){const i={_0x51b322:572,_0x4f3f19:1630,_0x2c25ec:407,_0x1bf403:826,_0x1498b3:1683},s=_0x3a2b68;if(t.url){this[s(i._0x51b322)](e);return}ModelStyleConver[s(1304)](e,this.primitive),(Cesium__namespace.defined(t.heading)||Cesium__namespace[s(407)](t[s(i._0x4f3f19)])||Cesium__namespace.defined(t.roll)||Cesium__namespace[s(i._0x2c25ec)](t[s(i._0x1bf403)])||Cesium__namespace[s(i._0x2c25ec)](t[s(i._0x1498b3)])||Cesium__namespace.defined(t.scaleY)||Cesium__namespace[s(407)](t.scaleZ))&&(this._primitive.modelMatrix=this.modelMatrix)}[_0x3a2b68(1338)](e,t){return ModelStyleConver[_0x3a2b68({_0x161ed3:1909}._0x161ed3)](e,t)}_updatePositionsHook(){const e={_0x43ec23:4076,_0x240c50:2758},t=_0x3a2b68;this[t(703)].modelMatrix=this.modelMatrix,this[t(1190)]&&(this._primitive_point[t(e._0x43ec23)]=this.position),this[t(e._0x240c50)]&&(this[t(e._0x240c50)][t(4076)]=this.position)}_getTargetDistanceDisplayCondition(e){const t={_0x26b74d:2169,_0x15c727:2091},i=_0x3a2b68;let s;return this.style[i(t._0x26b74d)]instanceof Cesium__namespace.DistanceDisplayCondition?s=this[i(2748)].distanceDisplayCondition.far:this[i(2748)][i(3029)]&&(s=this.style.distanceDisplayCondition_far),new Cesium__namespace[i(t._0x15c727)](e[i(2230)]??s,e.distanceDisplayCondition_far??Number.MAX_VALUE)}setOpacity(e){const t={_0x46d1e2:1744},i=_0x3a2b68;this.style.globalAlpha=e,this._primitive&&ModelStyleConver[i(t._0x46d1e2)](this._primitive,e),this._updateLabelOpacity(e)}[_0x3a2b68(4347)](e,t){return create$4(_0x3a2b68(3992),e)}}register$4("modelP",ModelPrimitive,!![]);class CirclePrimitive extends BasePointPrimitive{get distance(){const e={_0x51774b:3878},t=_0x3a2b68;return Math.PI*2*this[t(e._0x51774b)]}get area(){const e=this.radius;return Math.PI*e*e}get radius(){return this.style.radius}set[_0x3a2b68(3878)](e){this.style.radius=e,this._updateStyleHook(this.style,{radius:e})}get outlinePositions(){return this.getOutlinePositions()}[_0x3a2b68(3931)](e){return CircleStyleConver[_0x3a2b68(1304)](e)}_style2Json(e,t){return CircleStyleConver.toJSON(e,t)}_createGeometryInstance(e,t){const i={_0x1dffdc:2748,_0x46cb87:360,_0x1afe59:4223,_0x2e59a2:3286,_0xadfd5e:1941},s=_0x3a2b68;var r;e[s(3747)]=this[s(4076)],e.height=e.height??((r=this.point)===null||r===void 0?void 0:r.alt)??0,Cesium__namespace.defined(this[s(i._0x1dffdc)].diffHeight)&&(e[s(i._0x46cb87)]=e.height+this[s(i._0x1dffdc)][s(1882)]);const o=t?Cesium__namespace[s(i._0x1afe59)]:Cesium__namespace[s(3772)];return new Cesium__namespace[s(i._0x2e59a2)]({id:this.id,geometry:new o(e),attributes:this[s(i._0xadfd5e)][s(1571)]})}_getPolylineOutlinePositions(){return[this.getOutlinePositions(![])]}[_0x3a2b68(2181)](e,t,i){return cartesians2lonlats(this.getOutlinePositions(e,t),i)}getOutlinePositions(e=!![],t){const i={_0xe14951:2748,_0x25e8b7:601,_0x4bfdd7:2748,_0x422a12:1641},s=_0x3a2b68,r=getEllipseOuterPositions({position:this.position,radius:this.radius,granularity:this[s(i._0xe14951)][s(3932)],count:t});if(e&&r){var o;r[s(1754)](r[0]),(this.style[s(i._0x25e8b7)]>4||((o=this[s(i._0x4bfdd7)][s(i._0x422a12)])===null||o===void 0?void 0:o.width)>4)&&r.push(r[1])}return r}flyTo(e={}){const t=_0x3a2b68;return this._map?(e.radius=this[t(3878)]*(e[t(826)]||1.8),this._map[t(2258)](this.position,e)):Promise[t(583)](![])}getRectangle(e){const t=_0x3a2b68,i=this[t(2491)](![],1);return!i||i.length===0?void 0:getRectangle(i,e==null?void 0:e.isFormat)}isInPoly(e){const t={_0x48128a:2978},i=_0x3a2b68;return e=LngLatPoint.parse(e).toCartesian(),e=setPositionsHeight(e,this.height),Cesium__namespace[i(t._0x48128a)].distance(this.position,e)<=this.radius}[_0x3a2b68(4347)](e,t){return create$4("circle",e)}}register$4("circleP",CirclePrimitive,!![]);class PlanePrimitive extends BasePointPrimitive{get modelMatrix(){const e={_0x38da96:3709,_0x1a2852:2698,_0x18457f:2698,_0x57e510:434,_0x1d0a18:2806,_0x4d38a6:1185,_0x1c1166:4071,_0x5ad6ae:1168,_0x2eef9a:1376,_0x1f67a4:1144},t=_0x3a2b68;var i,s,r;if(this.options[t(4238)])return this.options.modelMatrix;const o=super.modelMatrix;if(!this.position)return Cesium__namespace.Matrix4[t(e._0x38da96)];const c=PlaneStyleConver.toCesiumVal(this.style),_=this.style.plane_normal||((i=c.plane)===null||i===void 0?void 0:i.normal),l=new Cesium__namespace.Cartesian3(((s=c[t(e._0x1a2852)])===null||s===void 0?void 0:s.x)??1,((r=c[t(e._0x18457f)])===null||r===void 0?void 0:r.y)??1,1);if(_===Cesium__namespace.Cartesian3[t(e._0x57e510)]||_==="x"){var d,f;const b=Cesium__namespace[t(2478)][t(3654)](Cesium__namespace.Matrix3[t(791)](Cesium__namespace[t(e._0x1d0a18)][t(e._0x4d38a6)](90)));Cesium__namespace.Matrix4.multiply(o,b,o),l.x=((d=c[t(2698)])===null||d===void 0?void 0:d.y)??1,l.y=((f=c.dimensions)===null||f===void 0?void 0:f.x)??1,l.z=1}else if(_===Cesium__namespace.Cartesian3[t(e._0x1c1166)]||_==="y"){const b=Cesium__namespace[t(2478)].fromRotationTranslation(Cesium__namespace[t(e._0x5ad6ae)].fromRotationX(Cesium__namespace.Math.toRadians(90)));Cesium__namespace.Matrix4.multiply(o,b,o)}const g=Cesium__namespace.Matrix4[t(e._0x2eef9a)](l);return Cesium__namespace[t(2478)][t(e._0x1f67a4)](o,g,o),o}_conversionStyle(e){return PlaneStyleConver[_0x3a2b68({_0x19e46d:1304}._0x19e46d)](e)}[_0x3a2b68(1338)](e,t){return PlaneStyleConver.toJSON(e,t)}[_0x3a2b68(445)](e,t){const i={_0x4c8789:1941},s=_0x3a2b68,r=t?Cesium__namespace[s(3301)]:Cesium__namespace[s(3106)];return new Cesium__namespace.GeometryInstance({id:this.id,geometry:new r(e),modelMatrix:this.modelMatrix,attributes:this[s(i._0x4c8789)].attributes})}_getDrawEntityClass(e,t){return create$4(_0x3a2b68(1068),e)}}register$4("planeP",PlanePrimitive,!![]);class BoxPrimitive extends BasePointPrimitive{constructor(e={}){const t={_0x1763f9:2748},i=_0x3a2b68;super(e),this[i(t._0x1763f9)].closed=this.style.closed??!![]}_conversionStyle(e){return BoxStyleConver.toCesiumVal(e)}_style2Json(e,t){return BoxStyleConver.toJSON(e,t)}_createGeometryInstance(e,t){const i=t?Cesium__namespace.BoxOutlineGeometry:Cesium__namespace.BoxGeometry;return new Cesium__namespace.GeometryInstance({id:this.id,geometry:i.fromDimensions(e),modelMatrix:this.modelMatrix,attributes:this.options.attributes})}_getDrawEntityClass(e,t){return create$4(_0x3a2b68(3983),e)}}register$4("boxP",BoxPrimitive,!![]);class CylinderPrimitive extends BasePointPrimitive{constructor(e={}){const t={_0x4a1e11:3086},i=_0x3a2b68;super(e),this.style.closed=this.style[i(t._0x4a1e11)]??!![]}_conversionStyle(e){return CylinderStyleConver.toCesiumVal(e)}_style2Json(e,t){return CylinderStyleConver.toJSON(e,t)}_createGeometryInstance(e,t){const i={_0x1bab40:1571},s=_0x3a2b68,r=t?Cesium__namespace.CylinderOutlineGeometry:Cesium__namespace.CylinderGeometry;return new Cesium__namespace.GeometryInstance({id:this.id,geometry:new r(e),modelMatrix:e.modelMatrix||this[s(4238)],attributes:this.options[s(i._0x1bab40)]})}_getDrawEntityClass(e,t){return create$4("cylinder",e)}}register$4("cylinderP",CylinderPrimitive,!![]);class ConeTrackPrimitive extends CylinderPrimitive{constructor(e={}){const t={_0x5524f5:497},i=_0x3a2b68;super(e),e.targetPosition&&(this[i(t._0x5524f5)]=e.targetPosition)}get hasEdit(){return![]}get targetPosition(){return this[_0x3a2b68(968)]}set targetPosition(e){const t={_0x1c9f70:4375,_0x1a4cb6:4145},i=_0x3a2b68;this._targetPoint=LngLatPoint.parse(e),this._targetPosition=this[i(t._0x1c9f70)][i(1378)](),this.czmObject&&this[i(t._0x1a4cb6)]()}get targetPoint(){return this._targetPoint}get[_0x3a2b68(2580)](){return this[_0x3a2b68(2748)].angle}set[_0x3a2b68(2580)](e){this.style.angle=e}_createGeometryInstance(e,t){const i={_0x3d8349:4076,_0x1dd92e:1575,_0x10eb74:3481,_0x2933b2:2978,_0x4d72a7:2806,_0x56b0b0:400,_0x2719f7:1185},s=_0x3a2b68,r=this[s(i._0x3d8349)],o=getPositionValue(this.targetPosition,this[s(i._0x1dd92e)].clock.currentTime);let c,_;return o?(e[s(400)]=Cesium__namespace.Cartesian3[s(i._0x10eb74)](r,o),_=Cesium__namespace[s(i._0x2933b2)].midpoint(r,o,new Cesium__namespace.Cartesian3),c=getHeadingPitchRollForLine(o,r)):(e.length=this.style.length,c=new Cesium__namespace.HeadingPitchRoll(Cesium__namespace[s(i._0x4d72a7)][s(1185)](this.heading),Cesium__namespace.Math.toRadians(this.pitch),Cesium__namespace.Math.toRadians(this.roll)),_=getPositionByHprAndLen(r,c,e[s(400)]/2)),e.modelMatrix=Cesium__namespace.Transforms.headingPitchRollToFixedFrame(_,c),Cesium__namespace.defined(this[s(2748)].angle)&&(e.bottomRadius=e[s(i._0x56b0b0)]*Math[s(2519)](Cesium__namespace[s(i._0x4d72a7)][s(i._0x2719f7)](90-this.angle))),super._createGeometryInstance(e,t)}}register$4("coneTrackP",ConeTrackPrimitive,!![]);class EllipsoidPrimitive extends BasePointPrimitive{constructor(e={}){const t={_0x40f92c:3086},i=_0x3a2b68;super(e),this[i(2748)][i(t._0x40f92c)]=this.style.closed??!![]}[_0x3a2b68(3931)](e){return EllipsoidStyleConver[_0x3a2b68(1304)](e)}_style2Json(e,t){return EllipsoidStyleConver[_0x3a2b68({_0x489a70:1909}._0x489a70)](e,t)}_createGeometryInstance(e,t){const i=_0x3a2b68,s=t?Cesium__namespace.EllipsoidOutlineGeometry:Cesium__namespace.EllipsoidGeometry;return new Cesium__namespace.GeometryInstance({id:this.id,geometry:new s(e),modelMatrix:this[i(4238)],attributes:this.options.attributes})}_getDrawEntityClass(e,t){return create$4("ellipsoid",e)}}register$4("ellipsoidP",EllipsoidPrimitive,!![]);class WallPrimitive extends BasePolyPrimitive{_createGeometryInstance(e,t){const i={_0x28c8bb:2748,_0x344bca:1571},s=_0x3a2b68;var r;let o=this[s(2694)];const c=this.points,_=c.length;let l=new Array(_),d=new Array(_);for(let g=0;g<_;g++){const b=c[g].alt;l[g]=b,d[g]=b+Number(this.style[s(1882)]||100)}this[s(i._0x28c8bb)].closure&&((r=o)===null||r===void 0?void 0:r.length)>0&&(o=o.concat(o[0]),l=l.concat(l[0]),d=d.concat(d[0]));const f=t?Cesium__namespace[s(525)]:Cesium__namespace.WallGeometry;return new Cesium__namespace.GeometryInstance({id:this.id,geometry:new f({...e,positions:o,maximumHeights:d,minimumHeights:l}),attributes:this[s(1941)][s(i._0x344bca)]})}_conversionStyle(e){return WallStyleConver.toCesiumVal(e)}[_0x3a2b68(1338)](e,t){return WallStyleConver.toJSON(e,t)}_getDrawEntityClass(e,t){return create$4("wall",e)}}register$4("wallP",WallPrimitive);class CorridorPrimitive extends BasePolyPrimitive{[_0x3a2b68(445)](e,t){const i={_0x4e381f:3286,_0x23aafb:1941},s=_0x3a2b68;this._updateDiffHeight(e),e.positions=this.positions;const r=t?Cesium__namespace[s(2833)]:Cesium__namespace.CorridorGeometry;return new Cesium__namespace[s(i._0x4e381f)]({id:this.id,geometry:new r(e),attributes:this[s(i._0x23aafb)].attributes})}_conversionStyle(e){return CorridorStyleConver.toCesiumVal(e)}_style2Json(e,t){return CorridorStyleConver.toJSON(e,t)}[_0x3a2b68(4347)](e,t){return create$4(_0x3a2b68({_0x2d45e7:1031}._0x2d45e7),e)}}register$4("corridorP",CorridorPrimitive);class PolylineVolumePrimitive extends BasePolyPrimitive{constructor(e={}){const t={_0x2ff25f:2748,_0x56fe11:3086},i=_0x3a2b68;super(e),this[i(t._0x2ff25f)].closed=this.style[i(t._0x56fe11)]??!![]}[_0x3a2b68(445)](e,t){const i={_0xd4f00b:3286,_0x5ef0c4:2694},s=_0x3a2b68,r=t?Cesium__namespace.PolylineVolumeOutlineGeometry:Cesium__namespace.PolylineVolumeGeometry;return new Cesium__namespace[s(i._0xd4f00b)]({id:this.id,geometry:new r({...e,polylinePositions:this[s(i._0x5ef0c4)],shapePositions:e.shape}),attributes:this.options.attributes})}[_0x3a2b68(3931)](e){return PolylineVolumeStyleConver[_0x3a2b68(1304)](e)}[_0x3a2b68(1338)](e,t){return PolylineVolumeStyleConver.toJSON(e,t)}_getDrawEntityClass(e,t){return create$4("polylineVolume",e)}}register$4(_0x3a2b68(576),PolylineVolumePrimitive);class RectanglePrimitive extends BasePolyPrimitive{constructor(e={}){const t=_0x3a2b68;super(e),e[t(1531)]&&(this[t(1531)]=e[t(1531)])}get rectangle(){const e=_0x3a2b68;return!this._rectangle&&this.positions&&(this._rectangle=Cesium__namespace.Rectangle[e(2022)](this.positions)),this._rectangle}set rectangle(e){const t={_0x56509c:3417},i=_0x3a2b68;this[i(t._0x56509c)]=e}get outlinePositions(){const e=_0x3a2b68;let t;return Cesium__namespace.defined(this.style.rotationDegree)?t=Cesium__namespace.Math.toRadians(this.style.rotationDegree):Cesium__namespace.defined(this.style.rotation)&&(t=this.style[e(1344)]),getRectangleOuterPositions({rectangle:this.rectangle,rotation:t,height:this.style.height})}get[_0x3a2b68(3481)](){return getDistance(this.outlinePositions,!![])}get area(){return getSurfaceArea(this[_0x3a2b68({_0x43df76:719}._0x43df76)])}get center(){const e={_0x896653:3747},t=_0x3a2b68,i=this.rectangle;return this.rectangle?Cesium__namespace.Cartographic[t(1378)](Cesium__namespace[t(1983)][t(e._0x896653)](i)):null}_updatePositionsHook(){const e={_0x132966:1531,_0x1b559c:1983,_0x2c704d:4145},t=_0x3a2b68;return this[t(e._0x132966)]=Cesium__namespace[t(e._0x1b559c)].fromCartesianArray(this.positions),super[t(e._0x2c704d)]()}_createGeometryInstance(e,t){const i={_0x367a9c:1531},s=_0x3a2b68;this._updateDiffHeight(e,!![]),e.rectangle=this[s(i._0x367a9c)];const r=t?Cesium__namespace[s(1494)]:Cesium__namespace.RectangleGeometry;return new Cesium__namespace.GeometryInstance({id:this.id,geometry:new r(e),attributes:this.options.attributes})}_conversionStyle(e){return RectangleStyleConver.toCesiumVal(e)}_style2Json(e,t){return RectangleStyleConver.toJSON(e,t)}[_0x3a2b68(3089)](e){return{type:"Polygon",coordinates:[this.getCoordinates(e==null?void 0:e.noAlt)]}}_getPolylineOutlinePositions(){return[this[_0x3a2b68(719)]]}getRectangle(e){const t=_0x3a2b68,i=this[t(1531)];return e!=null&&e.isFormat?formatRectangle(i):i}isInPoly(e){const t={_0x45410c:1536},i=_0x3a2b68;return Cesium__namespace.Rectangle.contains(this.rectangle,LngLatPoint.parse(e)[i(t._0x45410c)]())}_getDrawEntityClass(e,t){return create$4("rectangle",e)}_updateDrawEntityToThis(){const e=_0x3a2b68;super._updateDrawEntityToThis(),this[e(4145)]()}}register$4(_0x3a2b68(2844),RectanglePrimitive);const nullColor=new Cesium__namespace[_0x3a2b68(2092)](0,0,0,.01);class PolygonPrimitive extends BasePolyPrimitive{get center(){return this.centerOfMass}get distance(){return getDistance(this._positions,!![])}get[_0x3a2b68(2694)](){return this[_0x3a2b68(3965)]}set positions(e){const t={_0x5c0303:2748,_0x52b4cd:1475,_0x2a458d:2694},i=_0x3a2b68;if(e){if(e[i(400)]>0&&Array.isArray(e[0])&&e[0].length>0){const s=e[0][0];Array[i(391)](s)&&isNumber(s[0])?(this._hierarchy=getPolygonHierarchy(e,this[i(t._0x5c0303)].height||this[i(2748)][i(3798)]||this.style[i(t._0x52b4cd)]),e=this._hierarchy[i(t._0x2a458d)]):s instanceof Cesium__namespace.Cartesian3&&(this._hierarchy=getPolygonHierarchy2(e),e=this[i(3952)].positions)}super.positions=e,this._hierarchy&&this._positions&&(this._hierarchy.positions=this._positions)}}_createGeometryInstance(e,t){const i={_0x21901c:2004},s=_0x3a2b68;this._updateDiffHeight(e),this._hierarchy?e[s(1952)]=this[s(3952)]:e.polygonHierarchy=new Cesium__namespace[s(i._0x21901c)](this.positions);const r=t?Cesium__namespace.PolygonOutlineGeometry:Cesium__namespace.PolygonGeometry;return new Cesium__namespace[s(3286)]({id:this.id,geometry:new r(e),attributes:this.options.attributes})}_conversionStyle(e){const t={_0x420012:1304,_0x182f4c:810},i=_0x3a2b68;let s=PolygonStyleConver[i(t._0x420012)](e);return s=this[i(t._0x182f4c)](s),s}_bindExType(e){const t={_0x37c057:2436,_0x5d36f4:4241,_0x4445b2:1941,_0x4ee45a:3333,_0x30a34e:4053,_0xb97df6:1212},i=_0x3a2b68,s=this.options.buildings||this[i(4053)].options[i(t._0x37c057)];if(s&&(s.enabled??!![])){if(s[i(2070)]){let l;isNumber(s.bottomHeight)?l=s[i(2070)]:isString(s.bottomHeight)&&(l=Number(this.attr[s[i(2070)]]||0)),e.height=l}const o=Number(this.attr[s.cloumn]||1);let c;isNumber(s.height)?c=s.height:isString(s.height)?c=this.attr[s[i(t._0x5d36f4)]]||c:c=3.5;const _=e.height||0;e.extrudedHeight=_+o*c}if(this[i(t._0x4445b2)][i(t._0x4ee45a)]||this[i(t._0x30a34e)][i(1941)].dth){const o=this[i(4194)](e,![]);!Cesium__namespace.defined(o)&&(e.color=nullColor),e[i(t._0xb97df6)]=!![],!Cesium__namespace.defined(this.style.height)&&(e[i(1856)]=![]),e.zIndex=99}return e}[_0x3a2b68(1850)](e){const t={_0x1407a0:756,_0x1e4d43:4241},i=_0x3a2b68,s=6378137;for(let r=0,o=this[i(t._0x1407a0)].length;r<o;r++){const c=this.primitiveCollection.get(r),_=(s+e)/(s+this.style[i(t._0x1e4d43)]),l=Cesium__namespace.Matrix4.fromScale(new Cesium__namespace[i(2978)](_,_,_));c.modelMatrix=l}}[_0x3a2b68(1338)](e,t){return PolygonStyleConver.toJSON(e,t)}_getGeoJsonGeometry(e){return{type:"Polygon",coordinates:[this.getCoordinates(e==null?void 0:e.noAlt)]}}[_0x3a2b68(2492)](){return this._hierarchy?getHierarchyVal(this._hierarchy):[this.positions]}_getDrawEntityClass(e,t){return create$4(_0x3a2b68(4383),e)}[_0x3a2b68(900)](e){this[_0x3a2b68({_0x4df7df:3952}._0x4df7df)]&&(e._hierarchy=this._hierarchy)}}register$4("polygonP",PolygonPrimitive);class FrustumPrimitive extends BasePointPrimitive{constructor(e={}){const t={_0x6cb92e:3086,_0x2c3cb3:497},i=_0x3a2b68;super(e),this.style[i(3086)]=this.style[i(t._0x6cb92e)]??!![],e[i(t._0x2c3cb3)]&&(this[i(497)]=e[i(497)])}get targetPosition(){return this._targetPosition}set[_0x3a2b68(497)](e){const t={_0x1fa7a7:2748},i=_0x3a2b68;this[i(4375)]=LngLatPoint.parse(e),this._targetPosition=this._targetPoint.toCartesian(),this.isAdded&&this.show&&(this._removedHook(),this._addedHook(this[i(t._0x1fa7a7)]))}get targetPoint(){return this._targetPoint}get angle(){return this.style.angle}set[_0x3a2b68(2580)](e){const t=_0x3a2b68;this[t(2748)].angle=e}get angle2(){return this.style.angle2??this.style.angle}set angle2(e){const t=_0x3a2b68;this.style[t(3433)]=e}get groundPosition(){const e=_0x3a2b68;return getRayEarthPosition(this.position,this[e(1272)])}get defaultVertexFormat(){return Cesium__namespace.VertexFormat.POSITION_ONLY}updateModelMatrix(){}_conversionStyle(e){return CylinderStyleConver[_0x3a2b68(1304)](e)}[_0x3a2b68(1338)](e,t){return CylinderStyleConver[_0x3a2b68({_0x2b2bbe:1909}._0x2b2bbe)](e,t)}_createGeometryInstance(e,t){const i={_0x542882:2915,_0x57e13f:3286,_0x421dd9:1571},s=_0x3a2b68;this[s(i._0x542882)]();const r=t?Cesium__namespace[s(3457)]:Cesium__namespace.FrustumGeometry;return new Cesium__namespace[s(i._0x57e13f)]({id:this.id,geometry:new r({...e,origin:this.position,orientation:this._orientation,frustum:this._frustum}),attributes:this.options[s(i._0x421dd9)]})}_update(e){const t={_0x1fe39b:3137,_0x311b4c:2978,_0x54b362:1168,_0xab824a:1272,_0x57ba7a:3569,_0x4b425f:2782,_0x3439dc:1630,_0x5ed191:3501,_0x4f80b9:400,_0x3c0c19:2610},i=_0x3a2b68,s=getPositionValue(this.position,e);if(!s){this[i(2737)]=void 0;return}if(this[i(1941)].camera){const o=this[i(1941)].camera,c=new Cesium__namespace.Cartesian3,_=new Cesium__namespace.Matrix3,l=new Cesium__namespace.Quaternion,d=o.directionWC,f=o[i(t._0x1fe39b)],g=Cesium__namespace[i(t._0x311b4c)].negate(o.rightWC,c);Cesium__namespace[i(1168)][i(3185)](_,0,g,_),Cesium__namespace.Matrix3.setColumn(_,1,f,_),Cesium__namespace[i(t._0x54b362)].setColumn(_,2,d,_),this[i(t._0xab824a)]=Cesium__namespace[i(931)].fromRotationMatrix(_,l),this._frustum=o[i(t._0x57ba7a)],this[i(t._0x4b425f)]=Cesium__namespace.Math.toDegrees(o.heading),this[i(t._0x3439dc)]=Cesium__namespace[i(2806)].toDegrees(o.pitch),this.roll=Cesium__namespace.Math[i(3501)](o.roll);return}const r=getPositionValue(this.targetPosition,e);if(r){this._frustumFar=Cesium__namespace.Cartesian3.distance(s,r);const o=getHeadingPitchRollForLine(s,r);this.heading=Cesium__namespace.Math.toDegrees(o[i(2782)]),this.pitch=Cesium__namespace[i(2806)].toDegrees(o.pitch),this.roll=Cesium__namespace.Math[i(t._0x5ed191)](o.roll),this[i(1272)]=Cesium__namespace.Transforms[i(1623)](s,o)}else{this._frustumFar=-this.style[i(t._0x4f80b9)];const o=Cesium__namespace.HeadingPitchRoll.fromDegrees(this.heading,this[i(t._0x3439dc)],this[i(2341)]);this._orientation=Cesium__namespace.Transforms.headingPitchRollQuaternion(s,o)}this[i(2466)]=new Cesium__namespace[i(t._0x3c0c19)]({fov:Cesium__namespace.Math.toRadians(this.angle*2||.01),aspectRatio:this.angle2/this.angle,near:.01,far:this._frustumFar})}[_0x3a2b68(1526)](e){const t={_0x9eed41:1185,_0x47a78e:3433},i=_0x3a2b68,s=getPositionValue(this[i(4076)],e),r=Cesium__namespace.Math[i(1185)](this[i(2782)]),o=Cesium__namespace.Math[i(t._0x9eed41)](this.pitch+this[i(t._0x47a78e)]),c=Cesium__namespace.Math.toRadians(this.pitch-this.angle2),_=Cesium__namespace.Math.toRadians(this.roll+this.angle),l=Cesium__namespace.Math[i(1185)](this.roll-this.angle),d=getRayEarthPosition(s,new Cesium__namespace.HeadingPitchRoll(r,o,_),!![]),f=getRayEarthPosition(s,new Cesium__namespace.HeadingPitchRoll(r,o,l),!![]),g=getRayEarthPosition(s,new Cesium__namespace.HeadingPitchRoll(r,c,l),!![]),b=getRayEarthPosition(s,new Cesium__namespace.HeadingPitchRoll(r,c,_),!![]);return[d,f,g,b]}_getDrawEntityClass(e,t){return this._getDrawPointEntityClass(e,t)}}register$4("frustum",FrustumPrimitive,!![]);var ConeGlowCircleOuterMaterial=`uniform vec4 u_color;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  float time = fract(czm_frameNumber / 90.);
  vec2 new_st = fract(st - vec2(time, time));
  vec4 color = texture(image, new_st);

  vec3 diffuse = color.rgb;
  float alpha = color.a;
  diffuse *= u_color.rgb;
  alpha *= u_color.a;
  alpha *= u_color.a;
  material.diffuse = diffuse;
  material.alpha = alpha * pow(1. - st.t, u_color.a) * globalAlpha;
  return material;
}
`,ConeGlowCylinderGaussMaterial=`uniform vec4 u_color;
uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  float powerRatio = 1. / (fract(czm_frameNumber / 30.0) + 1.);
  float alpha = pow(1. - st.t, powerRatio);
  vec4 color = vec4(u_color.rgb, alpha * u_color.a);
  material.diffuse = color.rgb;
  material.alpha = color.a * globalAlpha;
  return material;
}
`,ConeGlowGradientMaterial=`uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec4 tColor = u_color;
  vec2 st = materialInput.st;
  vec2 center = st - vec2(0.5, 0.5);
  float length = length(center) / 0.5;
  float time = 1. - abs(czm_frameNumber / 360. - 0.5);

  float param = 1. - step(length, 0.6);//大于0.6模糊，rate = 0.6
  float scale = param * length;// 0.6< length 返回0，反之返回1.
  float alpha = param * (1.0 - abs(scale - 0.8) / 0.2);// 0.8 < length 返回0，反之返回1.

  float param1 = step(length, 0.7);//小于0.5模糊
  float scale1 = param1 * length;// 0.6< length 返回0，反之返回1.
  alpha += param1 * (1.0 - abs(scale1 - 0.35) / 0.35);// 0.8 < length 返回0，反之返回1.

  material.diffuse = u_color.rgb * vec3(u_color.a);
  material.alpha = pow(alpha, 4.0) * globalAlpha;
  return material;
}
`,ConeGlowRingScanMaterial=_0x3a2b68(2979);const DEF_STYLE$l={height:1e3,radius:100,color:"#00ffff"},particleImage=new Image;particleImage[_0x3a2b68(3379)]="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAEACAYAAADSoXR2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjExQTg0NDEyMDEzQjExRUFBNDhBRjhGMUMzOUUyNTU0IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjExQTg0NDEzMDEzQjExRUFBNDhBRjhGMUMzOUUyNTU0Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTFBODQ0MTAwMTNCMTFFQUE0OEFGOEYxQzM5RTI1NTQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MTFBODQ0MTEwMTNCMTFFQUE0OEFGOEYxQzM5RTI1NTQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz41vRwAAAAE90lEQVR42uydyW4UMRCG3T2dgYSAEGs4sp44cCJBcGUJbwCvALwWPAI8ABwAiUVwgLBdkEikJEiAGMhkZqhfU1aa1sy0g+yaJPyWSupOpPjz0uVyucrJer2eG2fJ3ZgLAQhAgC0PgN8XIlkqgGLE75oih0WmRVZEvop0rHog18rnRe6IzInsthyCXFt+TuSKyGmRXZZDgK5eFrkv8l7kiUhrxN/JSo3pigSvcNmI1bCh3b5LK2+NqHyvyEF9x3z5HgqRRViOAXhW5JrCoNdei/y20gMYxhmRSyIXRY6JTMT4DENLW+SdyD19x/NajDmwmYIW79Hnn+MA4GJEAAIQgABJbMJB+n5Sl9zWZvR9DABUfkJkVt8fi3zUldAEoKl24Y2S1fPZEmBdZFHkkb4vxTLRQ5djbyUf0ncYrD/UADUB8MZno2Q19yx7gIqIAAQgAAEIQIAtYZT+85LvRnjQCoPKR3rQUgN4Y3ZeK30g8qps0qeeAzDn4TWD9+ySG+BBS90DaGnVg9a2tgnR4il9/jkOACoiAhCAAASIZpAAFl6yulO0JACo/IDrn6CedP1zxOciv6wAYNnAP3RVBeWtJQCWzG8iL/X9g4vkqNzMctzUXtintt2KM/aS+bmQaY90rb8CF6tSKiICEIAABCAAAQiwbfcFIWVCbUcc9bZDLKiYAKj4uOv7Bb+ILLj+8W7PCgC7Jhzv44Qdh9yrru8V61jPgd645gD2io+15RiC5ZA5ENNPmGmDmtrta9YAVEQE2FlrQUM/J6efU8cSAD87ojodBaccS6kgiiErGiq/qe93XT+3oGU5BJnbyKrIUs6BQZoQUEcrQ7CYagiGqeKiMgnXLXsg5uJUm/RQJKy8fGS7PMw6SgVQPrJFGZr0kCfUL/7IFjIzrLGpemBQ0kPbehL6I9vMjUh6oEVEAAIQgAAEIAABdpyj0qcK71YrqGUJANNrv+sHOcAiRpDDM1cTY1BEHk7kqyP/2Ac5vLEEQEG8aDnIoTb5ObZRWg5ywG5o1dX4ClNYxT7IISgJPsXGpLut9MCWU0S5bqkmdAa3LQEwcZDAfkZ3tthQfkwNkVeeD6kiuaUabcp6DpS9YyalrAdQ8bT1EFQVUabarND9fNuyB2gREYAABCAAAQhAAAIQoM770UgBXARCIr/koDogVlzgrWuxemBKd0m4JnBed0+5ZQ9gn3BK5LK+P4y5ewoB8DFiKO91COLFfwVuTCZV1hSoYw1APZCsFIkbN1Haaa87wwiKQe6eT27AEX6esPVVd8/kOOdAz/oz9FE0p+uGIKUeqE5C8xgSKiICEIAABCAAAQhAAAIQgAAEIAABCECA6AA+sbkREyDUUYlKD6ggZwzRkr8tewBhusisv+0in5qE/hFchoZTE0TL4p8sTbtIpyahQ4Ag5fKpSVBmfdDECvQTZjoM0U9N6KgkwH9xY7PXpPiCmq5yuaLVldHIO7jgNi5XfOEhCqNh9udHV/RnC5YAUDTftdV4/ivvwEoRVS9XXPWa1FIT5ird8jpSB+BDN3rO8AaGMnGy0I0QRYTvdk6NkOsucuhGCMAgI8Q0isaHbmAevNMhiD4P6iZhstANGiQE2PEGCRo2NcgAsQDwKnxWFdlT17/duWU1BJmuHz6A5bwbEsCScgh+qAHit3Jr1oooOPExdRBLbeJjSpuwuy30AAH+CDAAPH5ltESNYl4AAAAASUVORK5CYII=",particleImage.onload=function(){};class LightCone extends BasePointPrimitive{constructor(e={}){const t={_0x29d1aa:2748,_0x4c3a88:4054},i=_0x3a2b68;e.style={...DEF_STYLE$l,...e[i(t._0x29d1aa)]},super(e),this._primitive1=null,this._primitive2=null,this[i(t._0x4c3a88)]=null,this._primitive4=null}get czmObject(){return this[_0x3a2b68(4277)]}get czmObjectEx(){const e={_0x40b57b:4054},t=_0x3a2b68;return this[t(2005)]?[this._primitive2,this[t(e._0x40b57b)],this._primitive4]:[]}get[_0x3a2b68(2540)](){return this._color}set[_0x3a2b68(2540)](e){const t={_0x5dce78:2748},i=_0x3a2b68;this[i(t._0x5dce78)].color=e}_addedHook(e){const t={_0x113b85:2748,_0x331bb5:407},i=_0x3a2b68;if(!this.show||!this.position)return;let s=this.position;if(Cesium__namespace.defined(e.setHeight)){let o=this[i(t._0x113b85)].setHeight;Cesium__namespace[i(t._0x331bb5)](o)&&(isString(o)&&(o=Number(template(o,this.attr,!![])),isNaN(o)&&(o=0)),s=setPositionsHeight(s,o));const c=this.getAddHeight();c!==0&&(s=addPositionsHeight(s,c))}const r=e.radius;this.topRadius=r/100,this.topRadius=this.topRadius>1?1:this[i(4100)],this[i(3318)]=getCirclePosition(s,r*.7),this.outer_controlPoints=getCirclePosition(s,r),this[i(4130)]=getCirclePosition(s,this.topRadius),this.circlePoints_2=getCirclePosition(s,r*2),this.ringCanvas=this.drawRingCanvas(),this[i(2832)]=this.cirdrawGradientCircleCanvas(),this.image=this.drawCanvas(particleImage),this._color=getColorByStyle(e),this.addInner(e),this.addOuter(e),this.addCircle(e),this.addRing(e)}_removedHook(){const e={_0x355f02:756,_0x120a33:1361,_0x3f47c0:1361,_0x16e901:2113},t=_0x3a2b68;this._primitive1&&(this[t(e._0x355f02)][t(e._0x120a33)](this._primitive1),delete this[t(4277)]),this._primitive2&&(this.primitiveCollection.remove(this._primitive2),delete this._primitive2),this[t(4054)]&&(this.primitiveCollection[t(e._0x3f47c0)](this._primitive3),delete this._primitive3),this._primitive4&&(this[t(e._0x355f02)][t(1361)](this[t(e._0x16e901)]),delete this[t(2113)])}[_0x3a2b68(2342)](e){const t={_0x43dbc8:4208,_0x3e3285:756,_0x20db87:3674,_0x3f0925:4277},i=_0x3a2b68,s=createCylinderInstance(this.inner_controlPoints,this.circular_clone_topPoints,{height:e.height,color:this[i(2540)],distanceDisplayCondition:e.distanceDisplayCondition}),r=new Cesium__namespace[i(2608)]({material:new Cesium__namespace[i(t._0x43dbc8)]({fabric:{uniforms:{u_color:this[i(1596)],globalAlpha:1},source:ConeGlowCylinderGaussMaterial},translucent:function(o){const c=i;return o.uniforms[c(844)].alpha<1}})});this._primitive1=new Cesium__namespace.Primitive({geometryInstances:s,appearance:r,asynchronous:![],show:this.show}),this[i(t._0x3e3285)][i(t._0x20db87)](this[i(t._0x3f0925)])}[_0x3a2b68(642)](e){const t={_0x286c0b:1793},i=_0x3a2b68,s=createCylinderInstance(this.outer_controlPoints,this.circular_clone_topPoints,{height:e.height,distanceDisplayCondition:e.distanceDisplayCondition,color:new Cesium__namespace.Color(.5,.8,1,2)});this._primitive2=new Cesium__namespace.Primitive({geometryInstances:s,appearance:new Cesium__namespace.EllipsoidSurfaceAppearance({material:new Cesium__namespace.Material({fabric:{uniforms:{u_color:this._color,image:this[i(t._0x286c0b)],globalAlpha:1},source:ConeGlowCircleOuterMaterial},translucent:!![]})}),asynchronous:![],show:this.show}),this.primitiveCollection.add(this._primitive2)}[_0x3a2b68(1021)](e){const t={_0x1003c1:4208},i=_0x3a2b68,s=Cesium__namespace.Cartographic.fromCartesian(this.position),r=createCircleInstance(this.circlePoints_2,{perPositionHeight:s.height>=1,distanceDisplayCondition:e.distanceDisplayCondition});this._primitive3=new Cesium__namespace.Primitive({geometryInstances:r,appearance:new Cesium__namespace.EllipsoidSurfaceAppearance({material:new Cesium__namespace[i(t._0x1003c1)]({fabric:{uniforms:{u_color:this[i(1596)],image:this.gradientCircleCanvas,globalAlpha:1},source:ConeGlowGradientMaterial},translucent:!![]})}),asynchronous:![],show:this.show}),this.primitiveCollection[i(3674)](this._primitive3)}addRing(e){const t={_0xd5a689:2113,_0x31012e:2855,_0x3f4f88:3674},i=_0x3a2b68,s=createCircleInstance(this.circlePoints_2,{perPositionHeight:this.point.alt>=1,distanceDisplayCondition:e.distanceDisplayCondition});this[i(t._0xd5a689)]=new Cesium__namespace.Primitive({geometryInstances:s,appearance:new Cesium__namespace.EllipsoidSurfaceAppearance({material:new Cesium__namespace.Material({fabric:{uniforms:{u_color:this[i(1596)],image:this[i(t._0x31012e)],globalAlpha:1},source:ConeGlowRingScanMaterial},translucent:!![]})}),asynchronous:![],show:this.show}),this.primitiveCollection[i(t._0x3f4f88)](this._primitive4)}getParticleImage(e){const t=_0x3a2b68,i=new Image;i.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAEACAYAAADSoXR2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjExQTg0NDEyMDEzQjExRUFBNDhBRjhGMUMzOUUyNTU0IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjExQTg0NDEzMDEzQjExRUFBNDhBRjhGMUMzOUUyNTU0Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTFBODQ0MTAwMTNCMTFFQUE0OEFGOEYxQzM5RTI1NTQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MTFBODQ0MTEwMTNCMTFFQUE0OEFGOEYxQzM5RTI1NTQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz41vRwAAAAE90lEQVR42uydyW4UMRCG3T2dgYSAEGs4sp44cCJBcGUJbwCvALwWPAI8ABwAiUVwgLBdkEikJEiAGMhkZqhfU1aa1sy0g+yaJPyWSupOpPjz0uVyucrJer2eG2fJ3ZgLAQhAgC0PgN8XIlkqgGLE75oih0WmRVZEvop0rHog18rnRe6IzInsthyCXFt+TuSKyGmRXZZDgK5eFrkv8l7kiUhrxN/JSo3pigSvcNmI1bCh3b5LK2+NqHyvyEF9x3z5HgqRRViOAXhW5JrCoNdei/y20gMYxhmRSyIXRY6JTMT4DENLW+SdyD19x/NajDmwmYIW79Hnn+MA4GJEAAIQgABJbMJB+n5Sl9zWZvR9DABUfkJkVt8fi3zUldAEoKl24Y2S1fPZEmBdZFHkkb4vxTLRQ5djbyUf0ncYrD/UADUB8MZno2Q19yx7gIqIAAQgAAEIQIAtYZT+85LvRnjQCoPKR3rQUgN4Y3ZeK30g8qps0qeeAzDn4TWD9+ySG+BBS90DaGnVg9a2tgnR4il9/jkOACoiAhCAAASIZpAAFl6yulO0JACo/IDrn6CedP1zxOciv6wAYNnAP3RVBeWtJQCWzG8iL/X9g4vkqNzMctzUXtintt2KM/aS+bmQaY90rb8CF6tSKiICEIAABCAAAQiwbfcFIWVCbUcc9bZDLKiYAKj4uOv7Bb+ILLj+8W7PCgC7Jhzv44Qdh9yrru8V61jPgd645gD2io+15RiC5ZA5ENNPmGmDmtrta9YAVEQE2FlrQUM/J6efU8cSAD87ojodBaccS6kgiiErGiq/qe93XT+3oGU5BJnbyKrIUs6BQZoQUEcrQ7CYagiGqeKiMgnXLXsg5uJUm/RQJKy8fGS7PMw6SgVQPrJFGZr0kCfUL/7IFjIzrLGpemBQ0kPbehL6I9vMjUh6oEVEAAIQgAAEIAABdpyj0qcK71YrqGUJANNrv+sHOcAiRpDDM1cTY1BEHk7kqyP/2Ac5vLEEQEG8aDnIoTb5ObZRWg5ywG5o1dX4ClNYxT7IISgJPsXGpLut9MCWU0S5bqkmdAa3LQEwcZDAfkZ3tthQfkwNkVeeD6kiuaUabcp6DpS9YyalrAdQ8bT1EFQVUabarND9fNuyB2gREYAABCAAAQhAAAIQoM770UgBXARCIr/koDogVlzgrWuxemBKd0m4JnBed0+5ZQ9gn3BK5LK+P4y5ewoB8DFiKO91COLFfwVuTCZV1hSoYw1APZCsFIkbN1Haaa87wwiKQe6eT27AEX6esPVVd8/kOOdAz/oz9FE0p+uGIKUeqE5C8xgSKiICEIAABCAAAQhAAAIQgAAEIAABCECA6AA+sbkREyDUUYlKD6ggZwzRkr8tewBhusisv+0in5qE/hFchoZTE0TL4p8sTbtIpyahQ4Ag5fKpSVBmfdDECvQTZjoM0U9N6KgkwH9xY7PXpPiCmq5yuaLVldHIO7jgNi5XfOEhCqNh9udHV/RnC5YAUDTftdV4/ivvwEoRVS9XXPWa1FIT5ird8jpSB+BDN3rO8AaGMnGy0I0QRYTvdk6NkOsucuhGCMAgI8Q0isaHbmAevNMhiD4P6iZhstANGiQE2PEGCRo2NcgAsQDwKnxWFdlT17/duWU1BJmuHz6A5bwbEsCScgh+qAHit3Jr1oooOPExdRBLbeJjSpuwuy30AAH+CDAAPH5ltESNYl4AAAAASUVORK5CYII=",i[t(1016)]=function(){e&&e()}}drawCanvas(e){const t={_0x2d2659:4095,_0x5350b0:679},i=_0x3a2b68,s=document[i(t._0x2d2659)](i(t._0x5350b0));s.width=64,s.height=256;const r=s.getContext("2d",{willReadFrequently:!![]});return r.clearRect(0,0,64,256),r.drawImage(e,0,0),r[i(3678)](e,33,0),s}drawRingCanvas(){const e={_0x6045a:2985,_0x1a9d7a:2951},t=_0x3a2b68,i=document.createElement("canvas");i.width=512,i.height=512;const s=i[t(e._0x6045a)]("2d",{willReadFrequently:!![]});return s.fillStyle="rgba(255,255,255,0)",s[t(e._0x1a9d7a)]="rgba(255, 255, 255,255)",s.setLineDash([50,50]),s.lineWidth=30,s.beginPath(),s[t(2379)](256,256,150,0,Math.PI*2,!![]),s.stroke(),s.restore(),i}cirdrawGradientCircleCanvas(){const e={_0x3b46e9:4241,_0x15a8df:4088,_0x145607:2164,_0x18cd68:3088},t=_0x3a2b68,i=document.createElement(t(679));i.width=512,i[t(e._0x3b46e9)]=512;const s=i.getContext("2d",{willReadFrequently:!![]}),r=s.createRadialGradient(256,256,0,256,256,256);return r.addColorStop(.1,"rgba(255, 255, 255, 1.0)"),r.addColorStop(.2,"rgba(255, 255, 255, 0.0)"),r.addColorStop(.3,"rgba(255, 255, 255, 0.9)"),r.addColorStop(.5,"rgba(255, 255, 255, 0.0)"),r[t(e._0x15a8df)](.9,"rgba(255, 255, 255, 0.2)"),r.addColorStop(1,"rgba(255, 255, 255, 1.0)"),s.clearRect(0,0,512,512),s.beginPath(),s.arc(256,256,256,0,Math.PI*2,!![]),s[t(1040)]=r,s[t(e._0x145607)](),s[t(e._0x18cd68)](),i}setOpacity(e){const t=_0x3a2b68;this.style.globalAlpha=e,this._primitive1&&(this[t(4277)].appearance.material.uniforms.globalAlpha=e,this._primitive2[t(1438)].material.uniforms.globalAlpha=e,this._primitive3.appearance.material[t(2949)][t(749)]=e,this._primitive4[t(1438)].material.uniforms.globalAlpha=e)}_getDrawEntityClass(e,t){return this._getDrawPointEntityClass(e,t)}}register$4("lightCone",LightCone,!![]);function createCircleInstance(n,e){const t={_0x151c6c:2169},i=_0x3a2b68,s=new Cesium__namespace[i(3618)]({polygonHierarchy:new Cesium__namespace.PolygonHierarchy(n),perPositionHeight:e.perPositionHeight});return new Cesium__namespace.GeometryInstance({geometry:s,attributes:{distanceDisplayCondition:e[i(t._0x151c6c)]||new Cesium__namespace.DistanceDisplayConditionGeometryInstanceAttribute}})}function createCylinderInstance(n,e,t){const i={_0x30cb2c:1754,_0x419a54:3618},s=_0x3a2b68,r=t.height,o=t[s(2540)],c=n[s(2082)](),_=n[s(400)],l=2*_,d=[],f=1/(_-1),g=[],b=[];for(let P=0;P<_;P++){b.push(addPositionsHeight(e[P],r)),d.push(P*f),d[s(1754)](0);const S=P+1,L=(P+1)%_,E=l-S;g.push(E-1,E,P),g[s(1754)](P,L,E-1)}for(let P=0;P<b.length;P++)c.push(b[_-P-1]),d.push(1-P*f),d[s(i._0x30cb2c)](1);let C=new Cesium__namespace.PolygonGeometry({polygonHierarchy:new Cesium__namespace.PolygonHierarchy(c),perPositionHeight:!![]});return C=Cesium__namespace[s(i._0x419a54)][s(1926)](C),C.indices=g,C.attributes.st.values=d,new Cesium__namespace.GeometryInstance({geometry:C,attributes:{color:Cesium__namespace.ColorGeometryInstanceAttribute.fromColor(o),distanceDisplayCondition:t.distanceDisplayCondition||new Cesium__namespace.DistanceDisplayConditionGeometryInstanceAttribute}})}function getCirclePosition(n,e,t=120){const i=_0x3a2b68,s=[],r=Cesium__namespace.Transforms.eastNorthUpToFixedFrame(n),o=2*Math.PI/t,c=2*Math.PI*270/360;for(let _=0;_<t;_++){const l=c-o*_,d=new Cesium__namespace.Cartesian3(Math.sin(l)*e,Math.cos(l)*e,0);s.push(Cesium__namespace.Matrix4.multiplyByPoint(r,d,new Cesium__namespace.Cartesian3))}return s[i(1754)](s[0]),s}var WaterFS=`in vec3 v_positionMC;
in vec3 v_positionEC;
in vec2 v_st;

void main() {
  czm_materialInput materialInput;
  vec3 normalEC = normalize(czm_normal3D * czm_geodeticSurfaceNormal(v_positionMC, vec3(0.0), vec3(1.0)));
    #ifdef FACE_FORWARD
  normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);
    #endif
  materialInput.s = v_st.s;
  materialInput.st = v_st;
  materialInput.str = vec3(v_st, 0.0);
  materialInput.normalEC = normalEC;
  materialInput.tangentToEyeMatrix = czm_eastNorthUpToEyeCoordinates(v_positionMC, materialInput.normalEC);

  vec3 positionToEyeEC = -v_positionEC;
  materialInput.positionToEyeEC = positionToEyeEC;
  czm_material material = czm_getMaterial(materialInput);

    #ifdef FLAT
  out_FragColor = vec4(material.diffuse + material.emission, material.alpha);
    #else
  out_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);
    #endif
}
`;class Water extends PolygonPrimitive{_addedHook(e){const t={_0x3fe0d0:2608,_0x141f09:749,_0x56126f:4208,_0x4fcc9b:747,_0x520faa:3674,_0x317034:3968,_0x1549af:1286},i=_0x3a2b68;if(!this[i(442)]||!this.positions||this.positions.length===0)return;const s=this._conversionStyle(e);s.vertexFormat=Cesium__namespace[i(t._0x3fe0d0)][i(4266)],e.opacity=e.opacity??.8;const r=e.opacity*(e[i(t._0x141f09)]??1),o={geometryInstances:this._createGeometryInstance(s),appearance:new Cesium__namespace.EllipsoidSurfaceAppearance({aboveGround:![],material:new Cesium__namespace.Material({fabric:{type:i(4013),uniforms:{specularMap:s.specularMap||Cesium__namespace.Material.DefaultImageId,normalMap:s.normalMap||Cesium__namespace[i(t._0x56126f)][i(3953)],frequency:s.frequency||8e3,animationSpeed:s.animationSpeed||.03,amplitude:s.amplitude||5,specularIntensity:e[i(3225)]||.8,baseWaterColor:getCesiumColor(e.baseWaterColor||"#123e59")[i(t._0x4fcc9b)](e.opacity),blendColor:getCesiumColor(e.blendColor||"#123e59").withAlpha(e.opacity)}}}),fragmentShaderSource:WaterFS,translucent:r!==1}),show:this.show};if(e[i(3542)]?(o.classificationType=e.classificationType??Cesium__namespace[i(4061)].TERRAIN,this[i(703)]=this[i(756)][i(t._0x520faa)](new Cesium__namespace.GroundPrimitive(o))):this._primitive=this.primitiveCollection.add(new Cesium__namespace.Primitive(o)),this[i(3968)]&&(this.primitiveCollection.remove(this._primitive_outline),delete this._primitive_outline),e.outline){const c=this._getOutlineStyle(e);this[i(t._0x317034)]=this._createPolylineOutline(c)}e.label&&this[i(t._0x1549af)]()}[_0x3a2b68(4347)](e,t){const i={_0x70be30:4089},s=_0x3a2b68;return e.style[s(i._0x70be30)]="Water",create$4("polygon",e)}}register$4(_0x3a2b68(1656),Water);var DiffuseWallGlowVS=`in vec3 position3DHigh;
in vec3 position3DLow;
in vec3 normal;
in vec2 st;
in float batchId;
out vec2 v_st;
out vec3 v_normalEC;
out vec3 v_positionEC;

void main() {
  vec4 p = czm_translateRelativeToEye(position3DHigh, position3DLow);
  v_positionEC = (czm_modelViewRelativeToEye * p).xyz;
  v_normalEC = czm_normal * normal;
  v_st = st;
  gl_Position = czm_modelViewProjectionRelativeToEye * p;
}
`,DiffuseWallGlowFS=`in vec3 v_positionEC;
in vec3 v_normalEC;
in vec2 v_st;

void main() {
  out_FragColor = xh_getMaterial(v_st);
}
`;const DEF_STYLE$k={diffHeight:1e3,speed:10,maxScale:1};class DiffuseWall extends BasePolyPrimitive{constructor(e={}){const t={_0x119b2a:2748,_0x5dbe89:2694,_0x2108db:3315,_0x3eb864:3220},i=_0x3a2b68;e[i(t._0x119b2a)]={...DEF_STYLE$k,...e[i(2748)]},super(e),e[i(t._0x5dbe89)]?this[i(3747)]=this.centerOfMass:e.position&&(this.position=e.position,this[i(t._0x2108db)]=!![]),this[i(2454)]=Cesium__namespace.Matrix4[i(2054)](1),this._maxScale=e.style[i(t._0x3eb864)]||1}get[_0x3a2b68(3409)](){return this._primitive}get center(){return this._center}set[_0x3a2b68(3747)](e){this._center=e}get[_0x3a2b68(4076)](){return this[_0x3a2b68({_0x3071a5:4286}._0x3071a5)]}set[_0x3a2b68(4076)](e){const t={_0x37cc75:4302},i=_0x3a2b68;this._center=LngLatPoint.parse(e).toCartesian(),this[i(t._0x37cc75)]()}get radius(){const e={_0x1e323a:3878},t=_0x3a2b68;return this.style[t(e._0x1e323a)]}set radius(e){const t={_0x4d77dc:4302},i=_0x3a2b68;this.style.radius=e,this[i(t._0x4d77dc)]()}_addedHook(e){const t={_0xeab30b:1451,_0x3b1986:1754,_0x15f9cc:1075,_0x4eebfe:1075,_0x5a49af:3633},i=_0x3a2b68,s=this.positions;if(!this.show||!s||s.length===0)return;const r=addPositionsHeight(this[i(2694)],e.diffHeight);this.center=this[i(t._0xeab30b)];const o=[],c=[],_=[],l=[];for(let b=0,C=s.length;b<C;b++){const P=(b+1)%C;o.push(s[b].x,s[b].y,s[b].z),o.push(s[P].x,s[P].y,s[P].z),o.push(r[P].x,r[P].y,r[P].z),o.push(r[b].x,r[b].y,r[b].z),l[i(1754)](0,0,1),l.push(0,0,1),l[i(t._0x3b1986)](0,0,1),l.push(0,0,1),c[i(t._0x3b1986)](0,0,1,0,1,1,0,1);const S=b*4,L=S+1,E=S+2,M=S+3;_.push(E,M,S,S,L,E)}const d=new Float64Array(o),f=new Cesium__namespace.GeometryInstance({id:this.id,geometry:new Cesium__namespace.Geometry({attributes:{position:new Cesium__namespace[i(3746)]({componentDatatype:Cesium__namespace.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:d}),normal:new Cesium__namespace.GeometryAttribute({componentDatatype:Cesium__namespace[i(t._0x15f9cc)].FLOAT,componentsPerAttribute:3,values:new Float32Array(l)}),st:new Cesium__namespace.GeometryAttribute({componentDatatype:Cesium__namespace[i(t._0x4eebfe)].FLOAT,componentsPerAttribute:2,values:new Float32Array(c)})},indices:new Uint16Array(_),primitiveType:Cesium__namespace.PrimitiveType.TRIANGLES,boundingSphere:Cesium__namespace.BoundingSphere.fromVertices(d)})}),g=getColorByStyle(e);this[i(703)]=new Cesium__namespace.Primitive({geometryInstances:f,appearance:new Cesium__namespace[i(t._0x5a49af)]({material:new Cesium__namespace.Material({translucent:!![],fabric:{uniforms:{color:g,globalAlpha:1},source:`
              uniform vec4 color;
              uniform float globalAlpha;

              vec4 xh_getMaterial(vec2 st){
                float alpha = pow(1. - st.t, 1.5);
                vec4 colorNew = vec4(color.rgb * color.a, alpha*globalAlpha);
                return colorNew;
              }`}}),vertexShaderSource:DiffuseWallGlowVS,fragmentShaderSource:DiffuseWallGlowFS}),asynchronous:![],shadows:this.style.shadows,show:this.show}),this.primitiveCollection.add(this._primitive),this.bindUpdateEvent()}[_0x3a2b68(3916)](){this[_0x3a2b68({_0x17e092:703}._0x17e092)]&&(this.primitiveCollection.remove(this._primitive),delete this._primitive)}update(e){const t=_0x3a2b68;if(this._primitive&&this._show){const i=e.frameNumber/1e3*this.style.speed;let s=i-Math.floor(i);s=s<.01?.01:s,this._mScale[0]=this._mScale[5]=s*this._maxScale,this._mScale[10]=1.1-s,this._primitive.modelMatrix=scaleXYZ(this[t(3747)],this._mScale)}}_updatePositionsByCircleCenter(){const e=_0x3a2b68;this.positions=getEllipseOuterPositions({position:this[e(4286)],radius:this.style.radius??100,count:this[e(2748)][e(2969)]??50})}_getDrawEntityClass(e,t){const i={_0x2efff1:3811},s=_0x3a2b68;return this[s(3315)]?create$4(s(i._0x2efff1),e):(e.style.closure=!![],create$4("wall",e))}_updateStyleByEdit(e){const t={_0x2b97a0:407},i=_0x3a2b68;this._isCircle&&Cesium__namespace[i(t._0x2b97a0)](e.radius)&&(this.radius=e[i(3878)]),Cesium__namespace.defined(e.diffHeight)&&(this.style.diffHeight=e.diffHeight)}}register$4("diffuseWall",DiffuseWall);function scaleXYZ(n,e){const t={_0x3ef4bb:2478},i=_0x3a2b68,s=Cesium__namespace.Transforms.eastNorthUpToFixedFrame(n),r=Cesium__namespace[i(t._0x3ef4bb)].inverse(s,new Cesium__namespace.Matrix4),o=Cesium__namespace.Matrix4.multiply(e,r,new Cesium__namespace.Matrix4);return Cesium__namespace.Matrix4.multiply(s,o,new Cesium__namespace[i(2478)])}var ScrollWallGlowVS=_0x3a2b68(1799),ScrollWallGlowFS=`in vec3 v_positionEC;
in vec3 v_normalEC;
in vec2 v_st;

void main() {
  vec3 positionToEyeEC = -v_positionEC;
  vec3 normalEC = normalize(v_normalEC);
    #ifdef FACE_FORWARD
  normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);
    #endif

  czm_materialInput materialInput;
  materialInput.normalEC = normalEC;
  materialInput.positionToEyeEC = positionToEyeEC;
  materialInput.st = v_st;

  czm_material material = czm_getMaterial(materialInput);
  out_FragColor = vec4(material.diffuse + material.emission, material.alpha);
}
`,ScrollWallGlowMaterial=_0x3a2b68(1255),ScrollWallGlowMaterial2=`uniform float globalAlpha;

czm_material czm_getMaterial(czm_materialInput cmi) {
  czm_material material = czm_getDefaultMaterial(cmi);
  vec2 st = cmi.st;
  float t = fract(speed * czm_frameNumber / 1000.0) * direction;
  vec2 st1 = vec2(fract(st.s - t), st.t);
  vec4 color = vec4(0., 0., 0., 0.);
  float alpha = 1. - st.t;
  float value = fract(st1.s / 0.25);
  alpha *= sin(value * 3.1415926);
  color = vec4(u_color.rgb * u_color.a, alpha * 1.2);
  material.diffuse = color.rgb;
  material.alpha = color.a * globalAlpha;
  return material;
}
`;const DEF_STYLE$j={diffHeight:100,speed:10,style:1};class ScrollWall extends BasePolyPrimitive{constructor(e={}){e.style={...DEF_STYLE$j,...e.style},super(e)}get czmObject(){return this._primitive}[_0x3a2b68(2679)](e){const t={_0xdd07d9:1882,_0xe63136:1754,_0x362a84:703,_0x4b3efd:4385},i=_0x3a2b68,s=this.positions;if(!this.show||!s||s.length===0)return;const r=addPositionsHeight(s,e[i(t._0xdd07d9)]),o=[],c=[],_=[],l=[];for(let C=0,P=s.length;C<P;C++){let S=C+1;S===P&&(S=0),o.push(s[C].x,s[C].y,s[C].z),o.push(s[S].x,s[S].y,s[S].z),o.push(r[S].x,r[S].y,r[S].z),o[i(t._0xe63136)](r[C].x,r[C].y,r[C].z),l[i(1754)](0,0,1),l.push(0,0,1),l.push(0,0,1),l.push(0,0,1),c.push(0,0,1,0,1,1,0,1);const L=C*4,E=L+1,M=L+2,D=L+3;_.push(L,E,M,M,D,L)}const d=new Float64Array(o),f=new Cesium__namespace.GeometryInstance({id:this.id,geometry:new Cesium__namespace[i(1492)]({attributes:{position:new Cesium__namespace.GeometryAttribute({componentDatatype:Cesium__namespace.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:d}),normal:new Cesium__namespace.GeometryAttribute({componentDatatype:Cesium__namespace.ComponentDatatype[i(1248)],componentsPerAttribute:3,values:new Float32Array(l)}),st:new Cesium__namespace.GeometryAttribute({componentDatatype:Cesium__namespace.ComponentDatatype[i(1248)],componentsPerAttribute:2,values:new Float32Array(c)})},indices:new Uint16Array(_),primitiveType:Cesium__namespace[i(2641)].TRIANGLES,boundingSphere:Cesium__namespace[i(3353)][i(2866)](d)})}),g=getColorByStyle(e),b=!![];this[i(t._0x362a84)]=new Cesium__namespace.Primitive({geometryInstances:f,appearance:new Cesium__namespace.MaterialAppearance({material:new Cesium__namespace.Material({translucent:b,fabric:{uniforms:{u_color:g,speed:e[i(t._0x4b3efd)],direction:e.reverse?1:-1,globalAlpha:1},source:this.createShader()}}),vertexShaderSource:ScrollWallGlowVS,fragmentShaderSource:ScrollWallGlowFS}),asynchronous:![],shadows:e.shadows,show:this.show}),this.primitiveCollection.add(this._primitive)}_removedHook(){const e={_0x3b358a:703,_0x358080:756},t=_0x3a2b68;this[t(e._0x3b358a)]&&(this[t(e._0x358080)].remove(this._primitive),delete this._primitive)}createShader(){const e=_0x3a2b68;return this.style[e(2748)]===1?ScrollWallGlowMaterial:ScrollWallGlowMaterial2}_getDrawEntityClass(e,t){const i={_0xdbebf:2748},s=_0x3a2b68;return e[s(i._0xdbebf)].closure=!![],create$4("wall",e)}}register$4("scrollWall",ScrollWall);const Cartesian3$2=Cesium__namespace.Cartesian3,defined$2=Cesium__namespace[_0x3a2b68(407)],CesiumMath$1=Cesium__namespace[_0x3a2b68(2806)],Matrix3=Cesium__namespace[_0x3a2b68(1168)],PolylineVolumeGeometryLibrary=Cesium__namespace.PolylineVolumeGeometryLibrary,Quaternion=Cesium__namespace[_0x3a2b68(931)],ThickWallGeometryLibrary={},scratch1=new Cartesian3$2,scratch2=new Cartesian3$2,scratch3=new Cartesian3$2,scratch4=new Cartesian3$2,scaleArray2=[new Cartesian3$2,new Cartesian3$2],cartesian1=new Cartesian3$2,cartesian2=new Cartesian3$2,cartesian3=new Cartesian3$2,cartesian4=new Cartesian3$2,cartesian5=new Cartesian3$2,cartesian6=new Cartesian3$2,cartesian7=new Cartesian3$2,cartesian8=new Cartesian3$2,cartesian9=new Cartesian3$2,cartesian10$1=new Cartesian3$2,quaterion=new Quaternion,rotMatrix=new Matrix3;function cartesian3ToArray(n){const e={_0x319c99:1754},t=[];return n.forEach(i=>{t[_0x20dc(e._0x319c99)](i.x),t.push(i.y),t.push(i.z)}),t}function computeRoundCorner(n,e,t,i){const s={_0x567368:1936,_0x36d789:1702},r=_0x3a2b68,o=Cartesian3$2[r(971)](Cartesian3$2.subtract(e,n,scratch1),Cartesian3$2.subtract(t,n,scratch2)),c=1,_=c*3,l=new Array(_);l[_-3]=t.x,l[_-2]=t.y,l[_-1]=t.z;let d;i?d=Matrix3[r(s._0x567368)](Quaternion[r(1702)](Cartesian3$2[r(2220)](n,scratch1),o/c,quaterion),rotMatrix):d=Matrix3.fromQuaternion(Quaternion[r(s._0x36d789)](n,o/c,quaterion),rotMatrix);let f=0;e=Cartesian3$2.clone(e,scratch1);for(let g=0;g<c;g++)e=Matrix3.multiplyByVector(d,e,e),l[f++]=e.x,l[f++]=e.y,l[f++]=e.z;return l}function addShiftedPositions(n,e,t,i){const s={_0x2a665e:2080,_0x1912a3:2220,_0x473efa:1125},r=_0x3a2b68,o=new Array(n.length),c=new Array(n.length),_=Cartesian3$2[r(s._0x2a665e)](e,t,scratch1),l=Cartesian3$2[r(s._0x1912a3)](_,scratch2);let d=0,f=n[r(400)]-1;for(let g=0;g<n.length;g+=3){const b=Cartesian3$2[r(s._0x473efa)](n,g,scratch3),C=Cartesian3$2.add(b,l,scratch4);o[d++]=C.x,o[d++]=C.y,o[d++]=C.z;const P=Cartesian3$2.add(b,_,scratch4);c[f--]=P.z,c[f--]=P.y,c[f--]=P.x}return i.push(o,c),i}ThickWallGeometryLibrary.addAttribute=function(n,e,t,i){const s=e.x,r=e.y,o=e.z;defined$2(t)&&(n[t]=s,n[t+1]=r,n[t+2]=o),defined$2(i)&&(n[i]=o,n[i-1]=r,n[i-2]=s)};const scratchForwardProjection=new Cartesian3$2,scratchBackwardProjection=new Cartesian3$2;ThickWallGeometryLibrary[_0x3a2b68(2750)]=function(n){const e={_0x485362:3404,_0x36a547:2778,_0x59edd0:1085,_0x2e1002:3420,_0x212929:3674,_0x1b0dca:2729,_0x4927dd:2080,_0x437aa2:2220,_0x8d3d7d:2957},t=_0x3a2b68,i=n[t(2694)],s=n[t(e._0x485362)],r=n.width/2;let o=cartesian1,c=cartesian2,_=cartesian3,l=cartesian4,d=cartesian5,f=cartesian6,g=cartesian7,b=cartesian8,C=cartesian9,P=cartesian10$1,S=[],L=i[0],E=i[1];c=Cartesian3$2.normalize(Cartesian3$2.subtract(E,L,c),c),o=s[t(e._0x36a547)](L,o),l=Cartesian3$2[t(e._0x59edd0)](Cartesian3$2.cross(o,c,l),l),g=Cartesian3$2.clone(L,g),L=E,_=Cartesian3$2.negate(c,_);let M;const D=[];let R;const k=i[t(400)];for(R=1;R<k-1;R++){o=s[t(2778)](L,o),E=i[R+1],c=Cartesian3$2.normalize(Cartesian3$2[t(e._0x2e1002)](E,L,c),c),d=Cartesian3$2.normalize(Cartesian3$2[t(e._0x212929)](c,_,d),d);const N=Cartesian3$2.multiplyByScalar(o,Cartesian3$2.dot(c,o),scratchForwardProjection);Cartesian3$2.subtract(c,N,N),Cartesian3$2[t(e._0x59edd0)](N,N);const $=Cartesian3$2.multiplyByScalar(o,Cartesian3$2.dot(_,o),scratchBackwardProjection);if(Cartesian3$2.subtract(_,$,$),Cartesian3$2[t(1085)]($,$),!CesiumMath$1[t(2991)](Math.abs(Cartesian3$2.dot(N,$)),1,CesiumMath$1.EPSILON7)){d=Cartesian3$2[t(e._0x1b0dca)](d,o,d),d=Cartesian3$2[t(e._0x1b0dca)](o,d,d),d=Cartesian3$2.normalize(d,d);const F=r/Math.max(.25,Cartesian3$2.magnitude(Cartesian3$2[t(2729)](d,_,scratch1))),z=PolylineVolumeGeometryLibrary.angleIsGreaterThanPi(c,_,L,s);d=Cartesian3$2.multiplyByScalar(d,F,d),z?(b=Cartesian3$2.add(L,d,b),P=Cartesian3$2.add(b,Cartesian3$2.multiplyByScalar(l,r,P),P),C=Cartesian3$2.add(b,Cartesian3$2.multiplyByScalar(l,r*2,C),C),scaleArray2[0]=Cartesian3$2.clone(g,scaleArray2[0]),scaleArray2[1]=Cartesian3$2.clone(P,scaleArray2[1]),M=cartesian3ToArray(scaleArray2),S=addShiftedPositions(M,l,r,S),f=Cartesian3$2.clone(C,f),l=Cartesian3$2.normalize(Cartesian3$2.cross(o,c,l),l),C=Cartesian3$2[t(3674)](b,Cartesian3$2[t(e._0x4927dd)](l,r*2,C),C),g=Cartesian3$2[t(e._0x212929)](b,Cartesian3$2.multiplyByScalar(l,r,g),g),D[t(1754)]({leftPositions:computeRoundCorner(b,f,C,z)})):(C=Cartesian3$2.add(L,d,C),P=Cartesian3$2.add(C,Cartesian3$2.negate(Cartesian3$2.multiplyByScalar(l,r,P),P),P),b=Cartesian3$2.add(C,Cartesian3$2.negate(Cartesian3$2.multiplyByScalar(l,r*2,b),b),b),scaleArray2[0]=Cartesian3$2.clone(g,scaleArray2[0]),scaleArray2[1]=Cartesian3$2.clone(P,scaleArray2[1]),M=cartesian3ToArray(scaleArray2),S=addShiftedPositions(M,l,r,S),f=Cartesian3$2.clone(b,f),l=Cartesian3$2[t(e._0x59edd0)](Cartesian3$2.cross(o,c,l),l),b=Cartesian3$2[t(3674)](C,Cartesian3$2.negate(Cartesian3$2.multiplyByScalar(l,r*2,b),b),b),g=Cartesian3$2[t(3674)](C,Cartesian3$2[t(e._0x437aa2)](Cartesian3$2.multiplyByScalar(l,r,g),g),g),D.push({rightPositions:computeRoundCorner(C,f,b,z)})),_=Cartesian3$2.negate(c,_)}L=E}return o=s[t(2778)](L,o),scaleArray2[0]=Cartesian3$2.clone(g,scaleArray2[0]),scaleArray2[1]=Cartesian3$2[t(e._0x8d3d7d)](L,scaleArray2[1]),M=cartesian3ToArray(scaleArray2),S=addShiftedPositions(M,l,r,S),{positions:S,corners:D}};const BoundingSphere=Cesium__namespace.BoundingSphere,Cartesian3$1=Cesium__namespace.Cartesian3,Cartographic=Cesium__namespace.Cartographic,Check=Cesium__namespace.Check,ComponentDatatype=Cesium__namespace[_0x3a2b68(1075)],defaultValue$1=Cesium__namespace[_0x3a2b68(2623)],defined$1=Cesium__namespace.defined,Ellipsoid=Cesium__namespace[_0x3a2b68(1245)],Geometry=Cesium__namespace.Geometry,GeometryAttribute=Cesium__namespace.GeometryAttribute,GeometryAttributes=Cesium__namespace.GeometryAttributes,IndexDatatype=Cesium__namespace.IndexDatatype,CesiumMath=Cesium__namespace.Math,PrimitiveType=Cesium__namespace.PrimitiveType,VertexFormat=Cesium__namespace.VertexFormat,CornerType=Cesium__namespace.CornerType,cartesian10=new Cartesian3$1,cartesian20=new Cartesian3$1,cartesian30=new Cartesian3$1;function combine(n,e){const t={_0x1a1220:400,_0x175a3b:400,_0x37e4a7:850,_0x4c4236:400,_0x167899:1125,_0x13be0a:507,_0x26abbc:1025},i=_0x3a2b68,s=n[i(2694)],r=n.corners,o=new GeometryAttributes;let c,_=0,l=0,d,f=0,g;for(d=0;d<s[i(t._0x1a1220)];d+=2)g=s[d].length-3,_+=g,f+=g*2,l+=s[d+1][i(t._0x175a3b)]-3;for(_+=3,l+=3,d=0;d<r.length;d++){c=r[d];const F=r[d].leftPositions;defined$1(F)?(g=F.length,_+=g,f+=g):(g=r[d].rightPositions[i(t._0x175a3b)],l+=g,f+=g)}const b=_+l,C=new Float64Array(b);let P=0,S=b-1,L,E,M,D;const R=IndexDatatype[i(t._0x37e4a7)](b/3,f);let k=0,N=0,$=s[N++],B=s[N++];for(C.set($,P),C.set(B,S-B.length+1),g=B.length-3,d=0;d<g;d+=3)E=P/3,D=E+1,L=(S-2)/3,M=L-1,R[k++]=L,R[k++]=E,R[k++]=M,R[k++]=M,R[k++]=E,R[k++]=D,P+=3,S-=3;for(d=0;d<r.length;d++){let F;c=r[d];const z=c.leftPositions,Y=c.rightPositions;let J,q,le=cartesian30,j=cartesian10,ie=cartesian20;if(defined$1(z)){for(S-=3,J=D,q=M,F=0;F<z[i(t._0x4c4236)]/3;F++)le=Cartesian3$1[i(t._0x167899)](z,F*3,le),R[k++]=J,R[k++]=q-F-1,R[k++]=q-F,ThickWallGeometryLibrary.addAttribute(C,le,void 0,S),j=Cartesian3$1.fromArray(C,(q-F-1)*3,j),ie=Cartesian3$1.fromArray(C,J*3,ie),S-=3;le=Cartesian3$1[i(t._0x167899)](C,J*3,le),j=Cartesian3$1[i(3420)](Cartesian3$1[i(1125)](C,q*3,j),le,j),ie=Cartesian3$1.subtract(Cartesian3$1.fromArray(C,(q-F)*3,ie),le,ie),P+=3}else{for(P+=3,J=M,q=D,F=0;F<Y.length/3;F++)le=Cartesian3$1.fromArray(Y,F*3,le),R[k++]=J,R[k++]=q+F,R[k++]=q+F+1,ThickWallGeometryLibrary.addAttribute(C,le,P),j=Cartesian3$1.fromArray(C,J*3,j),ie=Cartesian3$1[i(1125)](C,(q+F)*3,ie),P+=3;le=Cartesian3$1[i(t._0x167899)](C,J*3,le),j=Cartesian3$1.subtract(Cartesian3$1.fromArray(C,(q+F)*3,j),le,j),ie=Cartesian3$1.subtract(Cartesian3$1.fromArray(C,q*3,ie),le,ie),S-=3}for($=s[N++],B=s[N++],$.splice(0,3),B.splice(B[i(400)]-3,3),C[i(t._0x13be0a)]($,P),C.set(B,S-B[i(400)]+1),g=B[i(400)]-3,F=0;F<B.length;F+=3)D=P/3,E=D-1,M=(S-2)/3,L=M+1,R[k++]=L,R[k++]=E,R[k++]=M,R[k++]=M,R[k++]=E,R[k++]=D,P+=3,S-=3;P-=3,S+=3}if(o.position=new GeometryAttribute({componentDatatype:ComponentDatatype[i(t._0x26abbc)],componentsPerAttribute:3,values:C}),e.st){const F=new Float32Array(b/3*2);let z=0;_/=3,l/=3;const Y=1/(_-1),J=1/(l-1);for(d=0;d<l;d++)F[z++]=d*J,F[z++]=0;for(d=_;d>0;d--)F[z++]=(d-1)*Y,F[z++]=1;o.st=new GeometryAttribute({componentDatatype:ComponentDatatype.FLOAT,componentsPerAttribute:2,values:F})}return{attributes:o,indices:R}}function ThickWallGeometry(n){const e={_0x4aef0c:1041,_0x16dc18:3965,_0x3c3352:1356,_0x5c7e56:3932,_0x21fde6:831},t=_0x3a2b68;n=defaultValue$1(n,defaultValue$1.EMPTY_OBJECT);const i=n.positions,s=n.width;Check.defined(t(e._0x4aef0c),i),Check.defined("options.width",s),this[t(e._0x16dc18)]=i,this._ellipsoid=Ellipsoid.clone(defaultValue$1(n.ellipsoid,Ellipsoid.WGS84)),this._vertexFormat=VertexFormat.clone(defaultValue$1(n.vertexFormat,VertexFormat[t(e._0x3c3352)])),this._width=s,this._granularity=defaultValue$1(n[t(e._0x5c7e56)],CesiumMath[t(e._0x21fde6)])}ThickWallGeometry.createGeometry=function(n){const e={_0x2c4490:3965,_0x20c952:4346,_0x2990d2:4241,_0x121677:1339,_0x1e845b:768,_0x1b6b19:2586,_0x49af7f:1862},t=_0x3a2b68,i=n[t(e._0x2c4490)],s=n._width,r=n[t(e._0x20c952)],o=i.map(E=>Cartographic.fromCartesian(E)),c=i[t(3244)](E=>r.scaleToGeodeticSurface(E)),_=n._vertexFormat,l={ellipsoid:r,positions:c,width:s,cornerType:CornerType[t(3313)],granularity:n._granularity,saveAttributes:![]},d=ThickWallGeometryLibrary.computePositions(l),f=[];let g=[];const b=d.positions,C=b.length/2;for(let E=0;E<C;E++){const M=o[E],D=o[E+1],R=b[E*2],k=b[E*2+1],N=R.length/3,$=k.length/3;for(let F=0;F<N;F++){const z=new Cesium__namespace.Cartesian3(R[F*3],R[F*3+1],R[F*3+2]),Y=Cartographic[t(2101)](z);let J;F===0?J=Cartesian3$1.fromRadians(Y.longitude,Y.latitude,M.height):J=Cartesian3$1[t(1339)](Y[t(768)],Y[t(3664)],D[t(e._0x2990d2)]),f.push(J),R[F*3]=J.x,R[F*3+1]=J.y,R[F*3+2]=J.z}const B=[];for(let F=0;F<$;F++){const z=new Cesium__namespace.Cartesian3(k[F*3],k[F*3+1],k[F*3+2]),Y=Cartographic.fromCartesian(z);let J;F===0?J=Cartesian3$1.fromRadians(Y[t(768)],Y.latitude,D.height):J=Cartesian3$1[t(e._0x121677)](Y[t(e._0x1e845b)],Y.latitude,M.height),B.push(J),k[F*3]=J.x,k[F*3+1]=J.y,k[F*3+2]=J.z}g.push(...B.reverse())}d[t(e._0x1b6b19)].forEach((E,M)=>{const D=t;let R;defined$1(E.rightPositions)?R=E.rightPositions:R=E[D(2769)];const k=new Cesium__namespace.Cartesian3(R[0],R[1],R[2]),N=Cartographic.fromCartesian(k),$=i[M+1],B=Cartographic[D(2101)]($),F=Cartesian3$1.fromRadians(N.longitude,N.latitude,B[D(4241)]);R[0]=F.x,R[1]=F.y,R[2]=F.z});const P=combine(d,_),S=P.attributes,L=BoundingSphere[t(2866)](S.position.values,void 0,3);return g=Cesium__namespace.arrayRemoveDuplicates(g,Cartesian3$1.equalsEpsilon),{geometry:new Geometry({attributes:S,indices:P.indices,primitiveType:PrimitiveType[t(e._0x49af7f)],boundingSphere:L}),rightPoints:g,leftPoints:f}};const DEF_STYLE$i={diffHeight:100,bottomHeight:0,width:10,flat:!![]};class ThickWall extends BasePolyPrimitive{constructor(e={}){const t={_0x21a758:2748},i=_0x3a2b68;e.style={...DEF_STYLE$i,...e[i(t._0x21a758)]},super(e)}get czmObject(){return this._primitive}_createGeometryInstance(e,t){const i={_0x3a1a38:2152,_0x2ba4e6:1754,_0x1edb84:3286,_0x5b1e3d:1047,_0xd884fe:3633,_0x1810a9:3980,_0x31c1d1:1754,_0x4260e2:3019,_0x12532e:400,_0x4a739e:400,_0x316d84:1595},s={_0x597729:2228},r={_0x1b5ede:4241},o={_0x2753ca:2978,_0x374210:4241},c=_0x3a2b68,_=[],l=[],d=[];this.positions.forEach(M=>{const D=_0x20dc,R=Cesium__namespace.Cartographic.fromCartesian(M);l.push(Cesium__namespace.Cartesian3.fromRadians(R.longitude,R.latitude,R.height+e.diffHeight)),d.push(Cesium__namespace[D(o._0x2753ca)].fromRadians(R.longitude,R.latitude,R[D(o._0x374210)]-e.bottomHeight))}),e.closure&&(l.push(l[0]),d.push(d[0]));const f=ThickWallGeometry.createGeometry(new ThickWallGeometry({positions:l,width:e.width})),g=ThickWallGeometry.createGeometry(new ThickWallGeometry({positions:d,width:e.width})),b=new Cesium__namespace.GeometryInstance({geometry:f.geometry}),C=new Cesium__namespace.GeometryInstance({geometry:g[c(i._0x3a1a38)]});_[c(i._0x2ba4e6)](b),_.push(C);const P=[],S=[];g[c(3019)][c(3782)](M=>{const D=c,R=Cesium__namespace.Cartographic[D(2101)](M);P[D(1754)](R[D(r._0x1b5ede)])}),g[c(1047)].forEach(M=>{const D=c,R=Cesium__namespace[D(s._0x597729)].fromCartesian(M);S.push(R.height)});const L=new Cesium__namespace[c(i._0x1edb84)]({geometry:new Cesium__namespace.WallGeometry({positions:f.leftPoints,minimumHeights:P,vertexFormat:Cesium__namespace.MaterialAppearance[c(1595)][c(886)].vertexFormat})}),E=new Cesium__namespace.GeometryInstance({geometry:new Cesium__namespace.WallGeometry({positions:f[c(i._0x5b1e3d)],minimumHeights:S,vertexFormat:Cesium__namespace[c(i._0xd884fe)].MaterialSupport.TEXTURED[c(i._0x1810a9)]})});if(_[c(i._0x31c1d1)](L),_[c(1754)](E),!e[c(4121)]){const M=Cesium__namespace.Cartographic.fromCartesian(g[c(i._0x4260e2)][0]).height,D=new Cesium__namespace.GeometryInstance({geometry:new Cesium__namespace.WallGeometry({positions:[f.leftPoints[0],f.rightPoints[0]],minimumHeights:[M,M],vertexFormat:Cesium__namespace.MaterialAppearance.MaterialSupport.TEXTURED.vertexFormat})}),R=Cesium__namespace.Cartographic.fromCartesian(g[c(3019)][g.leftPoints[c(i._0x12532e)]-1]).height,k=new Cesium__namespace.GeometryInstance({geometry:new Cesium__namespace.WallGeometry({positions:[f.leftPoints[f.leftPoints.length-1],f[c(1047)][f.rightPoints[c(i._0x4a739e)]-1]],minimumHeights:[R,R],vertexFormat:Cesium__namespace.MaterialAppearance[c(i._0x316d84)].TEXTURED[c(3980)]})});_.push(D),_[c(1754)](k)}return _}_createAppearance(e,t,i){return new Cesium__namespace.MaterialAppearance({...e})}_conversionStyle(e){return WallStyleConver.toCesiumVal(e)}_style2Json(e,t){return WallStyleConver.toJSON(e,t)}_updateStyleByEdit(e){const t={_0x385bc8:3878,_0x1f742e:1882},i=_0x3a2b68;this._isCircle&&Cesium__namespace.defined(e[i(t._0x385bc8)])&&(this[i(3878)]=e[i(3878)]),Cesium__namespace.defined(e.diffHeight)&&(this.style.diffHeight=e[i(t._0x1f742e)])}_getDrawEntityClass(e,t){return create$4(_0x3a2b68(1691),e)}}register$4("thickWall",ThickWall);var DynamicRiverFS=_0x3a2b68(4138),DynamicRiverVS=_0x3a2b68(2046),DynamicRiverMaterial=`uniform float globalAlpha;
uniform float opacity;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  if(move) {
    float r = sqrt((st.x - 0.8) * (st.x - 0.8) + (st.y - 0.8) * (st.y - 0.8));
    float r2 = sqrt((st.x - 0.2) * (st.x - 0.2) + (st.y - 0.2) * (st.y - 0.2));
    float z = cos(moveVar.x * r + czm_frameNumber / 100.0 * moveVar.y) / moveVar.z;
    float z2 = cos(moveVar.x * r2 + czm_frameNumber / 100.0 * moveVar.y) / moveVar.z;
    st += sqrt(z * z + z2 * z2);
    st.s += direction * czm_frameNumber / 1000.0 * speed;
    st.s = mod(st.s, 1.0);
  }
  if(axisY) {
    st = vec2(st.t, st.s);
  }
  vec4 colorImage = texture(image, st);
  material.alpha = opacity * globalAlpha;
  material.diffuse = colorImage.rgb;
  return material;
}
`;const DEF_STYLE$h={opacity:.5,width:10,height:0,speed:10,axisY:![],move:!![],direction:!![],moveVar:new Cesium__namespace.Cartesian3(50,1,100)};class DynamicRiver extends BasePolyPrimitive{constructor(e={}){const t={_0x27cd3e:2748},i=_0x3a2b68;e[i(2748)]={...DEF_STYLE$h,...e[i(t._0x27cd3e)]},super(e)}get czmObject(){return this[_0x3a2b68({_0x968d54:703}._0x968d54)]}get[_0x3a2b68(1793)](){return this.style.image}set image(e){const t={_0x10ae0e:1793},i=_0x3a2b68;this.style[i(1793)]=e,this._material[i(2949)][i(t._0x10ae0e)]=e}get width(){return this.style.width}set width(e){e=Number(e)||1,this.style.width=e,this.redraw(this.style)}get height(){const e={_0x2040c8:4241},t=_0x3a2b68;return this.style[t(e._0x2040c8)]}set height(e){const t={_0x5eb75e:2748},i=_0x3a2b68;this[i(t._0x5eb75e)].height=e,this.redraw(this.style)}get opacity(){return this.style.opacity}set opacity(e){this.style.opacity=Number(e),this._material.uniforms.opacity=e}get direction(){return this.style.direction}set[_0x3a2b68(3763)](e){const t={_0x288197:2748},i=_0x3a2b68;e=!!e,this[i(t._0x288197)].direction=e,this._material.uniforms.direction=e?-1:1}get[_0x3a2b68(4385)](){return this[_0x3a2b68({_0x49a9c7:2748}._0x49a9c7)].speed}set[_0x3a2b68(4385)](e){const t={_0x393527:3094},i=_0x3a2b68;e=Number(e)||1,this.style.speed=e,this[i(t._0x393527)][i(2949)].speed=e}get move(){const e={_0x158e8a:538},t=_0x3a2b68;return this.style[t(e._0x158e8a)]}set[_0x3a2b68(538)](e){e=!!e,this.style.move=e,this._material.uniforms.move=e}get axisY(){return this[_0x3a2b68(2748)].axisY}set axisY(e){e=!!e,this.style.axisY=e,this._material.uniforms.axisY=e}get moveVar(){return this[_0x3a2b68({_0x7ea4b6:2748}._0x7ea4b6)].moveVar}set moveVar(e){const t={_0x3ac3fa:3094,_0xad25ca:2949},i=_0x3a2b68;this.style.moveVar=e,this[i(t._0x3ac3fa)][i(t._0xad25ca)].moveVar=e}[_0x3a2b68(2679)](e){const t={_0x1d25e5:442,_0x510b94:3300},i=_0x3a2b68;!this[i(t._0x1d25e5)]||!this.positions||this.positions.length===0||(this[i(1440)]=Lines2Plane(this.positions,this[i(517)],this.height),this._sideRes&&(this._primitive=this[i(t._0x510b94)](),this.primitiveCollection[i(3674)](this[i(703)])))}_removedHook(){const e={_0xdf8633:4273,_0x50dcfd:2619},t=_0x3a2b68;this[t(3634)]&&(this._map.off(EventType[t(e._0xdf8633)],this[t(3634)],this),delete this.dhEvent),this[t(703)]&&(this.primitiveCollection[t(1361)](this._primitive),delete this._primitive),this._material&&(this._material[t(e._0x50dcfd)](),delete this._material)}[_0x3a2b68(2019)](e,t){const i={_0x4e7c8f:2949},s=_0x3a2b68;let r=![];for(const o in t)switch(o){case"image":case"opacity":case"moveVar":case s(3763):case"speed":case s(1034):case"globalAlpha":this._material[s(i._0x4e7c8f)][o]=t[o];break;default:r=!![];break}r&&this.redraw(e)}createPrimitive(){const e={_0x158a23:4076,_0x3fe9db:1492,_0x3a78e7:2866,_0x2e7b6a:1793},t=_0x3a2b68,i=this._sideRes,s=new Float64Array(i.vertexs),r=new Cesium__namespace[t(4289)];r[t(e._0x158a23)]=new Cesium__namespace.GeometryAttribute({componentDatatype:Cesium__namespace.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:s}),r.st=new Cesium__namespace.GeometryAttribute({componentDatatype:Cesium__namespace[t(1075)].FLOAT,componentsPerAttribute:2,values:i.uvs});const o=new Cesium__namespace[t(e._0x3fe9db)]({attributes:r,indices:i[t(3909)],primitiveType:Cesium__namespace.PrimitiveType.TRIANGLES,boundingSphere:Cesium__namespace.BoundingSphere[t(e._0x3a78e7)](s)}),c=new Cesium__namespace.GeometryInstance({id:this.id,geometry:o}),_=new Cesium__namespace.RenderState;return _.depthTest.enabled=!![],this._material=createMaterial(MaterialType,{image:this[t(e._0x2e7b6a)],opacity:this.opacity,moveVar:this.moveVar,direction:this[t(3763)]?-1:1,speed:this.speed,move:this.move,axisY:this.axisY,globalAlpha:1}),new Cesium__namespace.Primitive({geometryInstances:c,appearance:new Cesium__namespace.Appearance({material:this._material,renderState:_,vertexShaderSource:DynamicRiverVS,fragmentShaderSource:DynamicRiverFS})})}offsetHeight(e,t){const i={_0x13fd7f:703,_0x10f586:400,_0x5147e:2978,_0x5bd7e6:3634,_0x177d06:3634},s={_0x4f928c:1575,_0x2582e0:2376,_0x28f42f:2376,_0x37e7d8:2080,_0x3a9a49:4238,_0x103370:3634},r=_0x3a2b68;if(!e||!t||!this[r(i._0x13fd7f)])return;let o=0;const c=20,_=e/(t*c),l=this._sideRes.self,d=new Cesium__namespace.Cartesian3;for(let g=0,b=l[r(i._0x10f586)];g<b;g++){const C=Cesium__namespace.Cartesian3[r(1085)](l[g],new Cesium__namespace.Cartesian3);Cesium__namespace[r(i._0x5147e)].add(d,C,d)}Cesium__namespace.Cartesian3.normalize(d,d);const f=Cesium__namespace.clone(this._primitive.modelMatrix);this[r(i._0x5bd7e6)]=function(){const g=r;if(!(!this._primitive||!this[g(s._0x4f928c)])){if(Math[g(s._0x2582e0)](o)<=Math[g(s._0x28f42f)](e)){const b=Cesium__namespace.Cartesian3[g(s._0x37e7d8)](d,o,new Cesium__namespace.Cartesian3);this._primitive[g(s._0x3a9a49)]=Cesium__namespace.Matrix4.multiplyByTranslation(f,b,new Cesium__namespace.Matrix4)}else this.dhEvent&&(this[g(1575)].off(EventType[g(4273)],this.dhEvent,this),delete this[g(s._0x103370)]);o+=_}},this._map.on(EventType.clockTick,this[r(i._0x177d06)],this)}[_0x3a2b68(1744)](e){const t={_0xc1a94d:2748},i=_0x3a2b68;this[i(t._0xc1a94d)].globalAlpha=e,this[i(3094)]&&(this._material[i(2949)].globalAlpha=e)}_getDrawEntityClass(e,t){const i=_0x3a2b68;return e.style[i(517)]=5,create$4("polyline",e)}}register$4("dynamicRiver",DynamicRiver);const MaterialType="DynamicRiver";register$3(MaterialType,{fabric:{uniforms:{image:Cesium__namespace.Material[_0x3a2b68(3953)],opacity:1,moveVar:new Cesium__namespace.Cartesian3(50,1,100),direction:1,speed:1,move:!![],axisY:![],globalAlpha:1},source:DynamicRiverMaterial},translucent:!![]});function Lines2Plane(n,e,t){const i={_0x5e546d:2101,_0x1cd9b8:1754,_0x489ba4:1754,_0x5948f5:1754,_0x8be872:1754,_0x739bfc:922,_0x3861d7:1754,_0x5f7ad4:1754,_0x2d4e9c:1405,_0x143b4b:1754,_0x3a2030:1754},s=_0x3a2b68;if(!n||n.length<=1||!e||e===0){logError$1("请确认参数符合规则：数组长度大于1，宽高不能为0！",n);return}const r=n[s(400)],o=[],c=[],_=e/2;for(let S=0;S<r;S++){let L,E,M,D,R;if(S===0?(L=n[S],E=n[S],M=n[S+1]):S===r-1?(L=n[S-1],E=n[S],M=n[S-1]):(L=n[S-1],E=n[S],M=n[S+1]),t!==0&&(L=RaisePoint(L,t),E=RaisePoint(E,t),M=RaisePoint(M,t)),L&&E&&M){const k=GetSide2(L,E,M,_);D=k.left,R=k.right,o.push(R),c.push(D)}}const l=o,d=c,f=[],g=[],b=[],C=[],P=[];for(let S=0;S<r;S++){const L=Cesium__namespace.EncodedCartesian3[s(i._0x5e546d)](d[S]);g.push(d[S].x),g[s(i._0x1cd9b8)](d[S].y),g.push(d[S].z),b.push(L.high.x),b[s(i._0x489ba4)](L.high.y),b.push(L.high.z),C.push(L[s(1405)].x),C[s(i._0x489ba4)](L.low.y),C.push(L[s(1405)].z),f[s(i._0x5948f5)](1,1),S<r-1&&(P.push(S+r*2),P.push(S+1),P[s(1754)](S+1+r),P[s(i._0x489ba4)](S+r*2),P.push(S+1+r),P.push(r+S+r*2))}for(let S=0;S<r;S++){const L=Cesium__namespace.EncodedCartesian3.fromCartesian(l[S]);g[s(1754)](l[S].x),g.push(l[S].y),g.push(l[S].z),b[s(i._0x8be872)](L.high.x),b.push(L.high.y),b[s(1754)](L.high.z),C.push(L.low.x),C.push(L.low.y),C.push(L.low.z),f.push(1,0)}for(let S=0;S<r;S++){const L=Cesium__namespace.EncodedCartesian3.fromCartesian(d[S]);g[s(1754)](d[S].x),g.push(d[S].y),g.push(d[S].z),b.push(L[s(i._0x739bfc)].x),b[s(i._0x489ba4)](L.high.y),b.push(L.high.z),C[s(i._0x3861d7)](L.low.x),C.push(L.low.y),C[s(i._0x5f7ad4)](L[s(i._0x2d4e9c)].z),f[s(1754)](0,1)}for(let S=0;S<r;S++){const L=Cesium__namespace.EncodedCartesian3.fromCartesian(l[S]);g.push(l[S].x),g[s(i._0x143b4b)](l[S].y),g[s(1754)](l[S].z),b[s(1754)](L[s(922)].x),b.push(L.high.y),b.push(L.high.z),C.push(L[s(1405)].x),C.push(L[s(1405)].y),C.push(L.low.z),f[s(i._0x3a2030)](0,0)}return{left:l,right:d,self:n,vertexs:new Float32Array(g),vertexsH:new Float32Array(b),vertexsL:new Float32Array(C),indexs:new Uint16Array(P),uvs:new Float32Array(f)}}function RaisePoint(n,e){const t={_0x23477b:2978,_0x35de4f:3458},i=_0x3a2b68;if(!(n instanceof Cesium__namespace[i(2978)])){logError$1("请确认点是Cartesian3类型！");return}if(!e||e===0){logError$1("请确认高度是非零数值！");return}const s=Cesium__namespace.Cartesian3[i(1085)](n,new Cesium__namespace[i(t._0x23477b)]),r=new Cesium__namespace.Ray(n,s);return Cesium__namespace[i(t._0x35de4f)].getPoint(r,e)}function GetSide2(n,e,t,i){const s={_0x6cf691:2978,_0x2e67ce:3420,_0x3006d9:3458,_0x5d3c36:1085,_0x47aa70:2978,_0x2f0da6:2729,_0x53f290:1544,_0x7c8762:2978,_0x51620b:494,_0xfcd5bf:2978,_0x3f9d90:3458,_0x4ba5ec:3458,_0x4e1ce1:3458,_0x4ece07:2978,_0x55f2a2:2546,_0x47d277:2978},r=_0x3a2b68;let o,c;if(Cesium__namespace[r(s._0x6cf691)].equals(n,e)){const _=Cesium__namespace.Cartesian3.normalize(Cesium__namespace.Cartesian3[r(s._0x2e67ce)](t,e,new Cesium__namespace.Cartesian3),new Cesium__namespace.Cartesian3),l=Cesium__namespace.Cartesian3.normalize(e,new Cesium__namespace[r(2978)]),d=Cesium__namespace.Cartesian3.cross(l,_,new Cesium__namespace[r(2978)]),f=Cesium__namespace.Cartesian3[r(2729)](_,l,new Cesium__namespace.Cartesian3),g=new Cesium__namespace.Ray(e,d),b=new Cesium__namespace[r(3458)](e,f);o=Cesium__namespace[r(s._0x3006d9)].getPoint(g,i),c=Cesium__namespace.Ray.getPoint(b,i)}else if(Cesium__namespace.Cartesian3.equals(t,e)){const _=Cesium__namespace.Cartesian3[r(s._0x5d3c36)](Cesium__namespace[r(s._0x6cf691)].subtract(e,n,new Cesium__namespace.Cartesian3),new Cesium__namespace.Cartesian3),l=Cesium__namespace[r(s._0x47aa70)][r(1085)](e,new Cesium__namespace.Cartesian3),d=Cesium__namespace.Cartesian3.cross(l,_,new Cesium__namespace[r(s._0x47aa70)]),f=Cesium__namespace[r(s._0x47aa70)][r(s._0x2f0da6)](_,l,new Cesium__namespace[r(s._0x6cf691)]),g=new Cesium__namespace.Ray(e,d),b=new Cesium__namespace.Ray(e,f);o=Cesium__namespace.Ray[r(s._0x53f290)](g,i),c=Cesium__namespace.Ray[r(s._0x53f290)](b,i)}else{const _=Cesium__namespace.Cartesian3.normalize(Cesium__namespace.Cartesian3.subtract(e,n,new Cesium__namespace.Cartesian3),new Cesium__namespace.Cartesian3),l=Cesium__namespace[r(2978)].normalize(Cesium__namespace.Cartesian3[r(3420)](t,e,new Cesium__namespace.Cartesian3),new Cesium__namespace.Cartesian3),d=Cesium__namespace[r(2978)].add(_,l,new Cesium__namespace[r(s._0x7c8762)]);if(Cesium__namespace.Cartesian3[r(s._0x51620b)](d,new Cesium__namespace.Cartesian3)){const f=Cesium__namespace.Cartesian3.normalize(Cesium__namespace.Cartesian3.subtract(e,n,new Cesium__namespace[r(2978)]),new Cesium__namespace.Cartesian3),g=Cesium__namespace[r(s._0xfcd5bf)].normalize(e,new Cesium__namespace.Cartesian3),b=Cesium__namespace.Cartesian3[r(2729)](g,f,new Cesium__namespace.Cartesian3),C=Cesium__namespace[r(2978)].cross(f,g,new Cesium__namespace.Cartesian3),P=new Cesium__namespace.Ray(e,b),S=new Cesium__namespace[r(s._0x3f9d90)](e,C);o=Cesium__namespace.Ray.getPoint(P,i),c=Cesium__namespace[r(s._0x4ba5ec)].getPoint(S,i)}else{const f=Cesium__namespace.Cartesian3.normalize(d,new Cesium__namespace.Cartesian3),g=Cesium__namespace.Cartesian3[r(s._0x5d3c36)](e,new Cesium__namespace.Cartesian3),b=Cesium__namespace[r(2978)][r(s._0x2f0da6)](g,f,new Cesium__namespace.Cartesian3),C=Cesium__namespace.Cartesian3.cross(f,g,new Cesium__namespace.Cartesian3),P=new Cesium__namespace.Ray(e,b),S=new Cesium__namespace[r(s._0x4e1ce1)](e,C),L=Cesium__namespace[r(s._0x4ece07)][r(s._0x55f2a2)](_,l),E=Cesium__namespace[r(s._0x47d277)].magnitude(_),M=Cesium__namespace[r(2978)].magnitude(l),D=L/E/M,R=Cesium__namespace.Math[r(3501)](Math.acos(D)),k=R/2,N=Math[r(2519)](Cesium__namespace[r(2806)].toRadians(k)),$=i*2/N;o=Cesium__namespace.Ray.getPoint(P,$/2),c=Cesium__namespace[r(s._0x4e1ce1)][r(1544)](S,$/2)}}return{left:o,right:c}}const DEF_STYLE$g={opacity:1,move:![],axisY:!![]};class Road extends DynamicRiver{constructor(e={}){e.style={...DEF_STYLE$g,...e.style},super(e)}}register$4("road",Road);class Pit extends BasePolyPrimitive{constructor(e={}){const t={_0x55712d:2748,_0x590623:3384},i=_0x3a2b68;super(e),this.style.diffHeight=this[i(2748)].diffHeight??10,this[i(t._0x55712d)][i(t._0x590623)]=this.style[i(3384)]??50}get czmObjectEx(){const e=_0x3a2b68,t=[];return this._bottomPrimitive&&t[e(1754)](this._bottomPrimitive),this._primitive_label&&t.push(this._primitive_label),t}get center(){return this.centerOfMass}get diffHeight(){return this.style.diffHeight}set diffHeight(e){const t={_0x2bc382:1882,_0x38c448:400,_0x444622:1339,_0x5c32a0:909,_0x41ec1c:1605},i=_0x3a2b68;this.style[i(t._0x2bc382)]=e;const s=[],r=this[i(1962)]-e,o=this.wellData.cartoList,c=new Array(o.length);for(let _=0,l=o[i(t._0x38c448)];_<l;_++){const d=o[_];s[i(1754)](Cesium__namespace.Cartesian3[i(t._0x444622)](d[i(768)],d.latitude,r)),c[_]=r}this[i(t._0x5c32a0)].bottomPositions=s,this.wellData.minimumHeights=c,this[i(t._0x41ec1c)](),this._createPit(this.wellData)}_getWellData(){const e={_0x12c519:3664,_0x4a2cb1:1754},t=_0x3a2b68;if(this[t(2694)].length===0)return;this._minHeight=getMinHeight(this.positions);const i=this._minHeight-this[t(1882)],s=[],r=[],o=interPolyline({scene:this._map.scene,positions:this.positions.concat(this.positions[0]),splitNum:this.style.splitNum}),c=o[t(400)],_=new Array(c),l=new Array(c);for(let d=0;d<c;d++){const f=Cesium__namespace.Cartographic.fromCartesian(o[d]);r.push(new Cesium__namespace.Cartographic(f.longitude,f[t(e._0x12c519)])),_[d]=i,l[d]=0,s[t(e._0x4a2cb1)](Cesium__namespace.Cartesian3.fromRadians(f.longitude,f.latitude,i))}return{cartoList:r,bottomPositions:s,minimumHeights:_,maximumHeights:l}}_addedHook(e){const t=_0x3a2b68;if(!this[t(442)]||!this.positions||this.positions[t(400)]===0)return;const i=this._getWellData();this.wellData=i,this._createPit(i),this.style.label&&this[t(1286)]()}_removedHook(){super._removedHook(),this._removePit()}_removePit(){const e=_0x3a2b68;this._primitive&&(this[e(756)].remove(this[e(703)]),delete this[e(703)]),this._bottomPrimitive&&(this.primitiveCollection.remove(this._bottomPrimitive),delete this._bottomPrimitive)}[_0x3a2b68(3587)](e){const t={_0xd3a726:4389},i={_0x152553:4326,_0xe50bc:2872},s=_0x3a2b68;if(this._createBottomSurface(e.bottomPositions),this._map.scene._terrainProviderPromise){this._map[s(744)]._terrainProviderPromise[s(t._0xd3a726)](()=>{this[s(3587)](e)});return}this[s(1575)].hasTerrain?Cesium__namespace.sampleTerrainMostDetailed(this._map.scene.terrainProvider,e[s(1758)]).then(r=>{const o=s;if(!this[o(i._0x152553)])return;const c=[];for(let _=0,l=r.length;_<l;_++){const d=r[_];c.push(d.height)}e[o(i._0xe50bc)]=c,this._createWellWall(e)}):this._createWellWall(e)}_createWellWall(e){const t={_0x1e0aeb:1361,_0x3c32aa:703,_0x4f9d16:2618,_0x10fe74:2748,_0x163ae7:1793},i=_0x3a2b68,s=this.style.opacity??1;this._primitive&&this.primitiveCollection[i(t._0x1e0aeb)](this._primitive),this[i(t._0x3c32aa)]=new Cesium__namespace[i(t._0x4f9d16)]({geometryInstances:new Cesium__namespace.GeometryInstance({id:this.id,geometry:new Cesium__namespace[i(2982)]({positions:e.bottomPositions,maximumHeights:e.maximumHeights,minimumHeights:e.minimumHeights})}),appearance:new Cesium__namespace.MaterialAppearance({material:Cesium__namespace.Material.fromType(Cesium__namespace[i(4208)][i(784)],{image:this[i(t._0x10fe74)][i(t._0x163ae7)],color:Cesium__namespace[i(2092)].WHITE[i(747)](s)}),translucent:s!==1})}),this.primitiveCollection.add(this._primitive),this.bindPickId(this._primitive)}_createBottomSurface(e){const t={_0x48f8ab:3279,_0x52432b:3633,_0xbdeb40:784,_0xa46498:1773},i=_0x3a2b68;if(!e.length)return;const s=this.style.opacity??1;this._bottomPrimitive&&this.primitiveCollection.remove(this[i(3279)]),this[i(t._0x48f8ab)]=new Cesium__namespace.Primitive({geometryInstances:new Cesium__namespace[i(3286)]({id:this.id,geometry:Cesium__namespace.PolygonGeometry.fromPositions({vertexFormat:Cesium__namespace.VertexFormat.ALL,positions:e,perPositionHeight:!![]})}),appearance:new Cesium__namespace[i(t._0x52432b)]({material:Cesium__namespace.Material.fromType(Cesium__namespace.Material[i(t._0xbdeb40)],{image:this.style[i(t._0xa46498)],color:Cesium__namespace.Color.WHITE.withAlpha(s)}),translucent:s!==1,faceForward:!![],flat:!![]})}),this.primitiveCollection[i(3674)](this._bottomPrimitive),this.bindPickId(this._bottomPrimitive)}_updateExOpacity(e){this[_0x3a2b68({_0x10dd8b:1633}._0x10dd8b)](this._bottomPrimitive,e)}_getDrawEntityClass(e,t){const i={_0xe89c3d:2748},s=_0x3a2b68;return e[s(2748)].image=e[s(i._0xe89c3d)].imageBottom,delete e.style[s(1882)],create$4("polygon",e)}}register$4(_0x3a2b68(3851),Pit);const DEF_STYLE$f={dimensions_x:100,dimensions_y:100};class DoubleSidedPlane extends BasePointPrimitive{constructor(e={}){const t=_0x3a2b68;e.style={...DEF_STYLE$f,...e[t(2748)]},super(e)}_addedHook(e){const t={_0xf64206:442,_0x528e64:3746,_0x5b4427:2641,_0x25f95a:3203},i=_0x3a2b68;if(!this[i(t._0xf64206)])return;const s=[0,-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0,.5,-.5,0,-.5,-.5,0,-.5,.5,0,.5,.5],r=[0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1],o=[0,1,2,0,2,3,4,5,6,4,6,7],c=new Cesium__namespace.Geometry({attributes:{position:new Cesium__namespace[i(3746)]({componentDatatype:Cesium__namespace[i(1075)].DOUBLE,componentsPerAttribute:3,values:new Float64Array(s)}),st:new Cesium__namespace[i(t._0x528e64)]({componentDatatype:Cesium__namespace.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:new Float32Array(r)})},indices:new Uint16Array(o),primitiveType:Cesium__namespace[i(t._0x5b4427)].TRIANGLES,boundingSphere:Cesium__namespace[i(3353)].fromVertices(s)}),_=new Cesium__namespace.Material({fabric:{type:i(1906),uniforms:{image:e.image,opacity:e.opacity??1,color:Cesium__namespace[i(2092)].WHITE,speed:e.speed||0,flipx:e.flipx??![],flipy:e.flipy??![],noWhite:e.noWhite??!![],globalAlpha:1},source:ImageMaterial}});this._primitive=new Cesium__namespace.Primitive({geometryInstances:new Cesium__namespace.GeometryInstance({geometry:c}),appearance:new Cesium__namespace.MaterialAppearance({translucent:!![],closed:!![],flat:!![],...this.style,material:_}),modelMatrix:this[i(4238)],show:this[i(442)]}),this.primitiveCollection.add(this._primitive),e[i(t._0x25f95a)]&&this._addLabel()}[_0x3a2b68(2699)](e,t){const i={_0x231adf:2806,_0x3ac17b:4175,_0x44082a:4008,_0x5864b6:3737,_0x97deb8:1245},s=_0x3a2b68;if(!e)return Cesium__namespace.Matrix4[s(3709)];const r=Cesium__namespace[s(2806)].toRadians(this[s(2748)].heading||0),o=Cesium__namespace.Math[s(1185)](this.style.pitch||0),c=Cesium__namespace[s(i._0x231adf)].toRadians(this.style[s(2341)]||0);this[s(i._0x3ac17b)]=r,this._pitch_reality=o,this[s(i._0x44082a)]=c;const _=Cesium__namespace[s(i._0x5864b6)][s(364)](e,new Cesium__namespace.HeadingPitchRoll(r,o,c),Cesium__namespace[s(i._0x97deb8)].WGS84,this.options.fixedFrameTransform),l=Cesium__namespace.Matrix4.fromScale(new Cesium__namespace[s(2978)](1,this.style[s(1736)],this[s(2748)].dimensions_y));return Cesium__namespace.Matrix4.multiply(_,l,new Cesium__namespace[s(2478)])}_getDrawEntityClass(e,t){return create$4("point",e)}}register$4("doubleSidedPlane",DoubleSidedPlane,!![]);var ReflectionWaterFS=`uniform sampler2D reflexTexture; // 反射贴图
uniform sampler2D normalTexture; // 法线贴图
uniform float time;

uniform mat4 fixedFrameToEastNorthUpTransform; // 水面的东北天矩阵的逆矩阵

// 从顶点着色器传来的
in vec4 v_worldPosition; // 当前像素的世界坐标
in vec4 v_uv; // 原本的纹理坐标乘以贴图矩阵

// 可配置的参数
uniform float ripple; // 波纹大小（数值越大波纹越密集）
uniform vec4 waterColor; // 水面颜色
uniform float waterAlpha; // 水面透明度
uniform float reflectivity; // 水面反射率
uniform vec3 lightDirection; // 光照方向
uniform float shiny; // 光照强度
uniform float distortion; // 倒影的扭曲程度
uniform float globalAlpha;

const vec3 sunColor = vec3(1.0);

// 获取噪声
// vec4 czm_getWaterNoise(sampler2D normalMap, vec2 uv, float time, float angleInRadians)
vec4 mars3d_getNoise(sampler2D normalMap, vec2 uv) {
  vec2 uv0 = (uv / 103.0) + vec2(time / 17.0, time / 29.0);
  vec2 uv1 = uv / 107.0 - vec2(time / -19.0, time / 31.0);
  vec2 uv2 = uv / vec2(8907.0, 9803.0) + vec2(time / 101.0, time / 97.0);
  vec2 uv3 = uv / vec2(1091.0, 1027.0) - vec2(time / 109.0, time / -113.0);
  vec4 noise = texture(normalMap, uv0) +
    texture(normalMap, uv1) +
    texture(normalMap, uv2) +
    texture(normalMap, uv3);
  return noise * 0.5 - 1.0;
}

void mars3d_sunLight(const vec3 surfaceNormal, const vec3 eyeDirection, float shiny, float spec, float diffuse, inout vec3 diffuseColor, inout vec3 specularColor) {
  vec3 sunDirection = normalize(lightDirection);
  vec3 reflection = normalize(reflect(-sunDirection, surfaceNormal));  // 获得太阳对表面法线的反射向量
  float direction = max(0.0, dot(eyeDirection, reflection));  // 当太阳反射方向和眼睛的方向一致时，direction 最大，为 1，当角度大于 90度时最小，最小为 0
  specularColor += pow(direction, shiny) * sunColor * spec;
  diffuseColor += max(dot(sunDirection, surfaceNormal), 0.0) * sunColor * diffuse;
}

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);

    // 通过法线贴图计算新的表面法线
  vec2 transformedSt = materialInput.st * 2.0 - 1.0;  // [0, 1] => [-1, 1]
  vec4 noise = mars3d_getNoise(normalTexture, transformedSt * ripple);
  vec3 surfaceNormal = normalize(noise.xzy);  // [0, +1]，Y up

    // 漫反射光
  vec3 diffuseLight = vec3(0.0);
    // 高光
  vec3 specularLight = vec3(0.0);

    // 获取视线方向（世界坐标）
  vec3 eye = (czm_inverseView * vec4(vec3(0.0), 1.0)).xyz;
    // 获取视线方向（水面的本地坐标）
  eye = (fixedFrameToEastNorthUpTransform * vec4(eye, 1.0)).xyz;
    // 当前像素的本地坐标
  vec3 world = (fixedFrameToEastNorthUpTransform * vec4(v_worldPosition.xyz, 1.0)).xyz;

  vec3 worldToEye = eye - world;  // east, north, up
  worldToEye = vec3(worldToEye.x, worldToEye.z, -worldToEye.y);  // Y up
  vec3 eyeDirection = normalize(worldToEye);

  float spec = 2.0;
  float diffuse = 0.5;
  mars3d_sunLight(surfaceNormal, eyeDirection, shiny, spec, diffuse, diffuseLight, specularLight);

  float distance = length(worldToEye);
  vec2 distortion = surfaceNormal.xz * (0.001 + 1.0 / distance) * distortion;
  vec3 reflectionSample = vec3(texture(reflexTexture, (v_uv.xy / v_uv.w) * 0.5 + 0.5 + distortion));

  float theta = max(dot(eyeDirection, surfaceNormal), 0.0);
  float reflectivity = reflectivity;
  float reflectance = mix(reflectivity, 1.0, pow(1.0 - theta, 5.0));

    // surfaceNormal 是以反射平面为 X-Y 平面的，
    // 所以 eyeDirection 也得是以反射平面为 X-Y 平面。
  vec3 scatter = max(0.0, dot(surfaceNormal, eyeDirection)) * waterColor.rgb;
  vec3 albedo = mix(sunColor * diffuseLight * 0.3 + scatter, vec3(0.1) + reflectionSample * 0.9 + reflectionSample * specularLight, reflectance);
  material.diffuse = albedo.rgb;
  material.alpha = waterAlpha* globalAlpha;

  return material;
}
`,ReflectionWaterVS=`in vec3 position3DHigh;
in vec3 position3DLow;
in vec3 normal;
in vec2 st;
in float batchId;

out vec3 v_positionEC;
out vec3 v_normalEC;
out vec2 v_st;

uniform mat4 reflectorProjectionMatrix;
uniform mat4 reflectorViewMatrix;
uniform mat4 reflectMatrix;
out vec4 v_worldPosition;  // 世界坐标
out vec4 v_uv;             // 纹理坐标

void main() {
  vec4 p = czm_computePosition();

  v_positionEC = (czm_modelViewRelativeToEye * p).xyz;      // position in eye coordinates
  v_normalEC = czm_normal * normal;                         // normal in eye coordinates
  v_st = st;

  mat4 modelView = reflectorViewMatrix * reflectMatrix * czm_model;
  modelView[3][0] = 0.0;
  modelView[3][1] = 0.0;
  modelView[3][2] = 0.0;
  v_uv = reflectorProjectionMatrix * modelView * p;
  vec4 positionMC = vec4(position3DHigh + position3DLow, 1.0);
  v_worldPosition = czm_model * positionMC;

  gl_Position = czm_modelViewProjectionRelativeToEye * p;
}
`;class ReflectionWater extends PolygonPrimitive{get height(){return this._height}set height(e){const t={_0x876148:2101,_0xd480f7:768,_0x5a175e:2514,_0x30768b:4238,_0x45deb0:1245,_0x3dcbff:2940,_0x299477:2484,_0x348666:1829,_0x7e828b:2484,_0x85646d:1829,_0x494798:2484,_0x233706:2484},i=_0x3a2b68;this._height=e;const s=Cesium__namespace.Cartographic[i(t._0x876148)](this._originalreflectorWorldPosition),r=Cesium__namespace[i(2978)].fromRadians(s[i(t._0xd480f7)],s.latitude,this[i(t._0x5a175e)]),o=Cesium__namespace.Cartesian3.subtract(r,this._originalreflectorWorldPosition,new Cesium__namespace.Cartesian3),c=Cesium__namespace.Matrix4.fromTranslation(o);this._primitive[i(t._0x30768b)]=c,this._reflectorWorldPosition=r,this[i(2545)]=Cesium__namespace[i(t._0x45deb0)].WGS84.geodeticSurfaceNormal(this._reflectorWorldPosition),this._waterPlane=Cesium__namespace.Plane[i(t._0x3dcbff)](this._reflectorWorldPosition,this[i(2545)]),this._reflectMatrix=new Cesium__namespace[i(2478)](-2*this[i(2484)][i(1829)].x*this._waterPlane[i(1829)].x+1,-2*this[i(t._0x299477)][i(t._0x348666)].x*this._waterPlane[i(t._0x348666)].y,-2*this._waterPlane.normal.x*this[i(t._0x7e828b)].normal.z,-2*this._waterPlane.normal.x*this._waterPlane.distance,-2*this[i(2484)].normal.y*this._waterPlane[i(t._0x85646d)].x,-2*this._waterPlane.normal.y*this._waterPlane.normal.y+1,-2*this[i(t._0x494798)].normal.y*this._waterPlane[i(1829)].z,-2*this._waterPlane.normal.y*this[i(t._0x299477)].distance,-2*this[i(2484)].normal.z*this[i(2484)][i(t._0x85646d)].x,-2*this._waterPlane.normal.z*this[i(t._0x233706)].normal.y,-2*this._waterPlane.normal.z*this._waterPlane.normal.z+1,-2*this[i(2484)].normal.z*this[i(2484)].distance,0,0,0,1)}_updateStyleHook(e,t){const i={_0x27d90d:2949,_0x3ac7b4:2092,_0x4286be:2849,_0x2542bc:3248,_0x380063:2461},s=_0x3a2b68;Cesium__namespace.defined(t.color)&&(this._material[s(i._0x27d90d)][s(677)]=getCesiumColor(e[s(2540)],Cesium__namespace[s(i._0x3ac7b4)][s(i._0x4286be)]("#001e0f"))),Cesium__namespace.defined(t.opacity)&&(this._material[s(2949)].waterAlpha=e[s(i._0x2542bc)]),Cesium__namespace.defined(t.reflectivity)&&(this._material.uniforms.reflectivity=e.reflectivity),Cesium__namespace.defined(t.lightDirection)&&(this._material.uniforms.lightDirection=e[s(3743)]),Cesium__namespace.defined(t.shiny)&&(this._material.uniforms.shiny=e.shiny),Cesium__namespace.defined(t[s(i._0x380063)])&&(this._material[s(2949)][s(2461)]=e.distortion),Cesium__namespace.defined(t.height)&&(this[s(4241)]=t.height)}_addedHook(e){const t={_0x159940:2694,_0x304406:2694,_0x414a3f:400},i=_0x3a2b68;!this.show||!this[i(t._0x159940)]||this[i(t._0x304406)][i(t._0x414a3f)]===0||(this._bindFun(),this._createPrimitive(e),this.bindUpdateEvent())}[_0x3a2b68(3916)](){const e={_0x2d9afc:1992,_0x38acf7:756},t=_0x3a2b68;this[t(e._0x2d9afc)](),this._primitive&&(this[t(e._0x38acf7)].remove(this._primitive),delete this._primitive),this._destroyResource(),this[t(2638)]()}[_0x3a2b68(3891)](e){const t={_0x29655d:4241,_0x4bce9b:1859,_0x5112aa:2304,_0x20dae8:4135,_0x1e084f:2304,_0x26c202:1829,_0x214be8:3481,_0x1c1de0:2484,_0x48be4f:2484,_0x3a8a04:2484,_0x48ba75:2484,_0x517ab3:3481,_0x157ff0:1575,_0x49acaf:744,_0x507866:3068,_0xfbad7b:1603,_0x103cde:2382,_0x167b11:1626,_0x2355c9:4208,_0x2438be:2540,_0x4a0c15:2092,_0x28790c:4205,_0x4d5666:2949,_0x31d04e:652,_0x1df118:4341,_0x1e7e8a:2949,_0x34b7a4:2478,_0x32bd6b:442,_0x4453a5:703},i=_0x3a2b68,s=this._conversionStyle(e);s.vertexFormat=Cesium__namespace.EllipsoidSurfaceAppearance.POSITION_NORMAL_AND_ST;let r=0;Cesium__namespace.defined(this[i(2748)].height)?r=this.style[i(t._0x29655d)]:r=getMaxHeight(this.positions),this._height=r,this._reflectorWorldPosition=this.center,this._originalreflectorWorldPosition=this._reflectorWorldPosition.clone(),this._normal=Cesium__namespace.Ellipsoid[i(t._0x4bce9b)].geodeticSurfaceNormal(this[i(t._0x5112aa)]),this._waterPlane=Cesium__namespace[i(t._0x20dae8)].fromPointNormal(this[i(t._0x1e084f)],this._normal),this._reflectMatrix=new Cesium__namespace.Matrix4(-2*this._waterPlane.normal.x*this._waterPlane[i(t._0x26c202)].x+1,-2*this[i(2484)].normal.x*this._waterPlane.normal.y,-2*this._waterPlane.normal.x*this._waterPlane[i(1829)].z,-2*this._waterPlane.normal.x*this._waterPlane[i(t._0x214be8)],-2*this[i(2484)].normal.y*this._waterPlane.normal.x,-2*this._waterPlane.normal.y*this._waterPlane.normal.y+1,-2*this._waterPlane[i(1829)].y*this[i(t._0x1c1de0)].normal.z,-2*this._waterPlane.normal.y*this._waterPlane[i(3481)],-2*this[i(2484)].normal.z*this._waterPlane.normal.x,-2*this[i(t._0x48be4f)].normal.z*this[i(2484)].normal.y,-2*this._waterPlane.normal.z*this[i(t._0x3a8a04)].normal.z+1,-2*this[i(t._0x48ba75)].normal.z*this._waterPlane[i(t._0x517ab3)],0,0,0,1),this._reflectorViewMatrix=Cesium__namespace.Matrix4.IDENTITY.clone(),this._reflectorProjectionMatrix=Cesium__namespace.Matrix4.IDENTITY[i(2957)]();const o=this[i(t._0x157ff0)].scene.context;this._createFramebuffer(o,o.drawingBufferWidth,o.drawingBufferHeight,this[i(t._0x157ff0)][i(t._0x49acaf)].highDynamicRange);const c=new Cesium__namespace.Texture({context:o,source:{width:1,height:1,arrayBufferView:new Uint8Array([255,0,0,255])},sampler:new Cesium__namespace.Sampler({wrapS:Cesium__namespace.TextureWrap[i(4125)],wrapT:Cesium__namespace.TextureWrap.REPEAT,minificationFilter:Cesium__namespace.TextureMinificationFilter[i(t._0x507866)],magnificationFilter:Cesium__namespace.TextureMinificationFilter.LINEAR})});c[i(t._0xfbad7b)]=i(t._0x103cde);const _=Cesium__namespace[i(t._0x167b11)].fromFramebuffer({context:o,framebuffer:this._colorFramebuffer});_.type="sampler2D";const l=new Cesium__namespace[i(t._0x2355c9)]({fabric:{type:"ReflectionWater",uniforms:{waterColor:getCesiumColor(e[i(t._0x2438be)],Cesium__namespace[i(t._0x4a0c15)].fromCssColorString("#001e0f")),waterAlpha:e.opacity??.9,globalAlpha:1,ripple:e[i(4239)]??50,reflectivity:e.reflectivity??.5,lightDirection:e.lightDirection??new Cesium__namespace[i(2978)](0,0,1),shiny:e.shiny??100,distortion:e.distortion??3.7,normalTexture:c,reflexTexture:_,time:0,fixedFrameToEastNorthUpTransform:Cesium__namespace[i(2478)][i(t._0x28790c)](this._getFixedFrameToEastNorthUpTransformFromWorldMatrix())},source:ReflectionWaterFS},translucent:![],minificationFilter:Cesium__namespace.TextureMinificationFilter[i(t._0x507866)],magnificationFilter:Cesium__namespace.TextureMagnificationFilter[i(3068)]});addTextureUniform({material:l,context:o,uniformName:"normalTexture",image:e.normalMap??"/img/textures/waterNormals.jpg"}),this._material=l;const d=new Cesium__namespace.MaterialAppearance({material:l,vertexShaderSource:ReflectionWaterVS,translucent:!![]});d[i(t._0x4d5666)]={},d[i(2949)].reflectMatrix=Cesium__namespace.Matrix4.toArray(this[i(t._0x31d04e)]),d[i(2949)][i(t._0x1df118)]=Cesium__namespace.Matrix4.toArray(this[i(2433)]),d[i(t._0x1e7e8a)].reflectorViewMatrix=Cesium__namespace[i(t._0x34b7a4)].toArray(this._reflectorViewMatrix);const f={geometryInstances:this._createGeometryInstance(s),appearance:d,asynchronous:![],show:this[i(t._0x32bd6b)]};this[i(t._0x4453a5)]=this[i(756)][i(3674)](new Cesium__namespace.Primitive(f))}update(e){const t={_0x371d81:744,_0x4642c2:4233,_0x316f13:1462,_0x218874:3681,_0x2a2924:3776,_0x1361d6:1847,_0x4f64c1:2949,_0x25783a:2478,_0x5c564e:4205,_0x349b2b:4205,_0x1ad457:4308,_0x163db0:703,_0x376c9a:442},i=_0x3a2b68,s=this._map[i(t._0x371d81)],r=s._defaultView[i(t._0x4642c2)],o=s.shadowMap,c=s[i(t._0x316f13)].show,_=s.globe[i(1768)],l=s.logarithmicDepthBuffer;if(!this[i(1425)](s._defaultView.camera)){this._primitive[i(442)]=![];return}this[i(703)][i(442)]=![],s._defaultView.camera=this[i(t._0x218874)],s.shadowMap=void 0,s.globe.show=![],s.globe.showSkirts=![],s.logarithmicDepthBuffer=![];const d=s.context,f=d.drawingBufferWidth,g=d[i(t._0x2a2924)],b=s.highDynamicRange;this._createFramebuffer(d,f,g,b),render(s,this[i(t._0x1361d6)]);const C=this[i(703)].appearance,P=Cesium__namespace.Texture.fromFramebuffer({context:d,framebuffer:this._colorFramebuffer});P.type="sampler2D",this._material[i(t._0x4f64c1)].reflexTexture=P,this[i(3094)].uniforms.time=performance.now()/1e3,this[i(3094)].uniforms.fixedFrameToEastNorthUpTransform=Cesium__namespace[i(t._0x25783a)].toArray(this[i(3750)]()),C.uniforms.reflectMatrix=Cesium__namespace.Matrix4[i(t._0x5c564e)](this._reflectMatrix),C.uniforms[i(4341)]=Cesium__namespace.Matrix4.toArray(this._reflectorProjectionMatrix),C.uniforms.reflectorViewMatrix=Cesium__namespace.Matrix4[i(t._0x349b2b)](this[i(t._0x1ad457)]),this[i(t._0x163db0)][i(t._0x376c9a)]=!![],s[i(4292)].camera=r,s.shadowMap=o,s.globe.show=c,s.globe[i(1768)]=_,s.logarithmicDepthBuffer=l}_updateVirtualCamera(e){const t={_0x1556d1:3681,_0x3386de:440,_0x382bf4:2545,_0x175d38:2220,_0x32f013:2978,_0x4a451c:2304,_0x27d7e3:3763,_0x258097:2978,_0x4c68ea:4135,_0x154bd1:1829,_0x42bc2e:2546},i=_0x3a2b68,s=new Cesium__namespace.Cartesian3(0,0,-1);let r=new Cesium__namespace.Cartesian3;this[i(3681)]=Cesium__namespace.Camera.clone(e,this[i(t._0x1556d1)]);const o=e[i(t._0x3386de)].clone();let c=Cesium__namespace.Cartesian3.subtract(this._reflectorWorldPosition,o,new Cesium__namespace.Cartesian3);if(Cesium__namespace.Cartesian3.dot(c,this._normal)>0)return![];c=getReflectVector(c,this[i(t._0x382bf4)]),Cesium__namespace.Cartesian3[i(t._0x175d38)](c,c),Cesium__namespace.Cartesian3.add(c,this[i(2304)],c),this._virtualCamera.position=c.clone(),Cesium__namespace.Cartesian3[i(3674)](e[i(2522)],o,s),Cesium__namespace[i(2978)].subtract(this._reflectorWorldPosition,s,r),r=getReflectVector(r,this[i(2545)]),Cesium__namespace.Cartesian3.negate(r,r),Cesium__namespace[i(t._0x32f013)].add(r,this[i(t._0x4a451c)],r),this._virtualCamera[i(t._0x27d7e3)]=Cesium__namespace.Cartesian3.subtract(r,this._virtualCamera.position,new Cesium__namespace.Cartesian3),Cesium__namespace.Cartesian3.normalize(this._virtualCamera.direction,this[i(t._0x1556d1)][i(3763)]),Cesium__namespace.Cartesian3.add(e.upWC,o,s),Cesium__namespace.Cartesian3.subtract(this._reflectorWorldPosition,s,r),r=getReflectVector(r,this._normal),Cesium__namespace.Cartesian3[i(t._0x175d38)](r,r),Cesium__namespace[i(t._0x258097)].add(r,this._reflectorWorldPosition,r),this[i(t._0x1556d1)].up=Cesium__namespace.Cartesian3.subtract(r,this[i(3681)].position,new Cesium__namespace.Cartesian3),Cesium__namespace.Cartesian3.normalize(this[i(3681)].up,this._virtualCamera.up),this._reflectorProjectionMatrix=this._virtualCamera.frustum.projectionMatrix,this._reflectorViewMatrix=this._virtualCamera.viewMatrix;const _=Cesium__namespace[i(t._0x4c68ea)].fromPointNormal(this._reflectorWorldPosition,this._normal);Cesium__namespace.Plane.transform(_,this._virtualCamera.viewMatrix,_);const l=new Cesium__namespace.Cartesian4(_.normal.x,_[i(t._0x154bd1)].y,_[i(1829)].z,_.distance),d=Cesium__namespace.Matrix4.clone(this[i(3681)].frustum[i(2039)]),f=new Cesium__namespace.Cartesian4((Math.sign(l.x)+d[8])/d[0],(Math.sign(l.y)+d[9])/d[5],-1,(1+d[10])/d[14]);Cesium__namespace.Cartesian4.multiplyByScalar(l,2/Cesium__namespace.Cartesian4[i(t._0x42bc2e)](l,f),l);const g=0;return d[2]=l.x,d[6]=l.y,d[10]=l.z+1-g,d[14]=l.w,this._virtualCamera.frustum.customProjectionMatrix=Cesium__namespace.Matrix4.clone(d),!![]}[_0x3a2b68(3750)](){const e=Cesium__namespace.Transforms.eastNorthUpToFixedFrame(this._reflectorWorldPosition);return Cesium__namespace.Matrix4.inverse(e,new Cesium__namespace.Matrix4)}_createFramebuffer(e,t,i,s){const r={_0x20884c:384,_0x1f8e08:3068,_0x456ddf:2691,_0x11f559:3784,_0x5a4ad4:904},o=_0x3a2b68,c=this._colorTexture;if(Cesium__namespace.defined(c)&&c.width===t&&c.height===i&&this._hdr===s)return;this._destroyResource(),this._hdr=s;let _;s?_=e.halfFloatingPointTexture?Cesium__namespace.PixelDatatype.HALF_FLOAT:Cesium__namespace.PixelDatatype.FLOAT:_=Cesium__namespace.PixelDatatype.UNSIGNED_BYTE,this._colorTexture=new Cesium__namespace[o(1626)]({context:e,width:t,height:i,pixelFormat:Cesium__namespace.PixelFormat.RGBA,pixelDatatype:_,sampler:new Cesium__namespace.Sampler({wrapS:Cesium__namespace.TextureWrap[o(r._0x20884c)],wrapT:Cesium__namespace.TextureWrap.CLAMP_TO_EDGE,minificationFilter:Cesium__namespace.TextureMinificationFilter.LINEAR,magnificationFilter:Cesium__namespace.TextureMagnificationFilter[o(r._0x1f8e08)]})}),this._depthStencilTexture=new Cesium__namespace.Texture({context:e,width:t,height:i,pixelFormat:Cesium__namespace[o(r._0x456ddf)].DEPTH_STENCIL,pixelDatatype:Cesium__namespace[o(r._0x11f559)][o(r._0x5a4ad4)]}),this._colorFramebuffer=new Cesium__namespace.Framebuffer({context:e,colorTextures:[this._colorTexture],depthStencilTexture:this._depthStencilTexture,destroyAttachments:![]})}_destroyResource(){const e=_0x3a2b68;this._colorTexture&&this._colorTexture.destroy(),this[e(3430)]=void 0,this._depthStencilTexture&&this._depthStencilTexture.destroy(),this._depthStencilTexture=void 0,this[e(1847)]&&this._colorFramebuffer.destroy(),this[e(1847)]=void 0}_bindFun(){const e={_0x52c26c:2610},t={_0x2f09da:623},i={_0x1dc714:623,_0x3f56a2:1391,_0x16d922:2885,_0xebc604:1550,_0x564424:407,_0x320226:2154,_0x5b2fd1:2154,_0x3b1f92:2154,_0x5eb7e0:595},s=_0x3a2b68;this._UniformState_updateFrustum_old=Cesium__namespace.UniformState.prototype.updateFrustum,Cesium__namespace.UniformState.prototype.updateFrustum=function(o){const c=_0x20dc;Cesium__namespace.Matrix4.clone(Cesium__namespace.defaultValue(o[c(i._0x1dc714)],o[c(2039)]),this._projection),this._inverseProjectionDirty=!![],this._viewProjectionDirty=!![],this[c(i._0x3f56a2)]=!![],this._modelViewProjectionDirty=!![],this._modelViewProjectionRelativeToEyeDirty=!![],Cesium__namespace.defined(o.infiniteProjectionMatrix)&&(Cesium__namespace.Matrix4.clone(o.infiniteProjectionMatrix,this._infiniteProjection),this._modelViewInfiniteProjectionDirty=!![]),this._currentFrustum.x=o.near,this[c(i._0x16d922)].y=o.far,this._farDepthFromNearPlusOne=o[c(i._0xebc604)]-o.near+1,this._log2FarDepthFromNearPlusOne=Cesium__namespace.Math.log2(this[c(761)]),this._oneOverLog2FarDepthFromNearPlusOne=1/this._log2FarDepthFromNearPlusOne,Cesium__namespace[c(i._0x564424)](o._offCenterFrustum)&&(o=o._offCenterFrustum),this[c(i._0x320226)].x=o.top,this[c(i._0x5b2fd1)].y=o.bottom,this[c(i._0x3b1f92)].z=o.left,this._frustumPlanes.w=o[c(i._0x5eb7e0)]};const r=Cesium__namespace.PerspectiveFrustum.prototype.clone;Cesium__namespace[s(e._0x52c26c)].prototype.clone=function(o){const c=s;return o=r.bind(this)(o),o[c(623)]=this[c(t._0x2f09da)],o},this[s(2730)]=r}_unbindFun(){Cesium__namespace.UniformState.prototype.updateFrustum=this._UniformState_updateFrustum_old,Cesium__namespace.PerspectiveFrustum.prototype.clone=this._PerspectiveFrustum_clone_old}_getDrawEntityClass(e,t){const i={_0x38e9ad:2748},s=_0x3a2b68;return e[s(i._0x38e9ad)].materialType="Water",create$4("polygon",e)}}register$4("reflectionWater",ReflectionWater);const scratchBackgroundColor=new Cesium__namespace.Color,renderTilesetPassState=new Cesium__namespace.Cesium3DTilePassState({pass:Cesium__namespace[_0x3a2b68(3852)].RENDER});function render(n,e){const t={_0x1f1a4a:1210,_0x102f65:647,_0x2f17fe:560,_0x3ccbb8:3396,_0x1b8774:3237,_0x174c22:2978,_0xa9f09d:3763,_0x310155:400,_0x46f674:517,_0x3cf8fe:2041,_0x4b2e05:655,_0x1a0909:1462},i=_0x3a2b68,s=n._frameState,r=n.context,o=r[i(2899)],c=n._defaultView;n._view=c,n.updateFrameState(),s.passes.render=!![],s.passes[i(3913)]=n.postProcessStages[i(t._0x1f1a4a)],s[i(t._0x102f65)]=renderTilesetPassState;let _=n[i(536)]??Cesium__namespace.Color.BLACK;n._hdr&&(_=Cesium__namespace.Color.clone(_,scratchBackgroundColor),_[i(2150)]=Math.pow(_.red,n.gamma),_[i(1974)]=Math.pow(_.green,n.gamma),_.blue=Math[i(392)](_[i(t._0x2f17fe)],n[i(1622)])),s.backgroundColor=_,n.fog.update(s),o[i(t._0x3ccbb8)](s);const l=n.shadowMap;Cesium__namespace.defined(l)&&l[i(3174)]&&(!Cesium__namespace.defined(n.light)||n.light instanceof Cesium__namespace.SunLight?Cesium__namespace.Cartesian3[i(2220)](o[i(t._0x1b8774)],n._shadowMapCamera.direction):Cesium__namespace[i(t._0x174c22)].clone(n.light.direction,n._shadowMapCamera[i(t._0xa9f09d)]),s.shadowMaps.push(l)),n._computeCommandList.length=0,n._overlayCommandList[i(t._0x310155)]=0;const d=c.viewport;d.x=0,d.y=0,d[i(t._0x46f674)]=r.drawingBufferWidth,d.height=r.drawingBufferHeight;const f=c[i(t._0x3cf8fe)];f.framebuffer=e,f.blendingEnabled=void 0,f.scissorTest=void 0,f[i(2062)]=Cesium__namespace[i(t._0x4b2e05)][i(2957)](d,f.viewport),Cesium__namespace.defined(n.globe)&&n.globe.beginFrame(s),n.updateEnvironment(),n.updateAndExecuteCommands(f,_),n.resolveFramebuffers(f),Cesium__namespace.defined(n.globe)&&(n[i(t._0x1a0909)].endFrame(s),!n.globe.tilesLoaded&&(n._renderRequested=!![])),r.endFrame()}class EditPolygonGrid extends EditPoly{get[_0x3a2b68(2611)](){const e={_0x32157c:2611},t=_0x3a2b68;return this._graphic[t(e._0x32157c)]??!![]}get[_0x3a2b68(3542)](){return![]}bindDraggers(){const e={_0x4243b9:2694,_0x41e028:400},t={_0x9a29d3:4076},i=_0x3a2b68,s=this.getGridPositions(this[i(e._0x4243b9)]);for(let r=0,o=s[i(e._0x41e028)];r<o;r++){const c=this.updatePositionsHeightByAttr(s[r]),_=this.createDragger({position:c,onDrag:(l,d)=>{const f=i;d=this.updatePositionsHeightByAttr(d),l[f(t._0x9a29d3)]=d,s[l.index]=d,this.updateGridPositions(d,l.index)}});_[i(1191)]=r,this[i(4320)][i(1754)](_)}}}const DEF_STYLE$e={opacity:1,globalAlpha:1};class VideoPrimitive extends BasePolyPrimitive{constructor(e={}){const t={_0x77fd43:3792},i=_0x3a2b68;e.style={...DEF_STYLE$e,...e.style},super(e),this.minPointNum=4,this[i(t._0x77fd43)]=4,this._grids=e.grids??4,this._useROI=![],this._reverseROI=![],this[i(834)]=[[0,1],[1,1],[1,0],[0,0]]}get[_0x3a2b68(3409)](){return this._primitive}get[_0x3a2b68(2590)](){return this[_0x3a2b68(1941)].rois}set rois(e){const t={_0x2838c0:3396},i=_0x3a2b68;if(this.options.rois=e,(e==null?void 0:e.length)>0){let s=[];e[i(3782)](r=>{s=s.concat([r[0],r[1],0,0])}),this._roiUV=s,this._useROI=!![]}else this._roiUV=[[0,1],[1,1],[1,0],[0,0]],this._useROI=![];this[i(t._0x2838c0)]()}[_0x3a2b68(2679)](e){const t={_0x2f9488:703,_0x5f263e:703,_0x81839d:703},i=_0x3a2b68,s=this.positions;if(!this.show||!s||s.length===0)return;this.updateVideoContainer();const{positions:r,uv:o,indice:c}=getGridPositions(s,this._grids);this._positions_grid=r,this._uv=o,this._indice=c,this._primitive&&(this.primitiveCollection.remove(this[i(t._0x2f9488)]),delete this[i(t._0x5f263e)]),this[i(t._0x81839d)]=this._createVideoPrimitive(),this.bindPickId(this._primitive),this.primitiveCollection.add(this._primitive)}_removedHook(){this[_0x3a2b68(2544)](),this._primitive&&(this.primitiveCollection.remove(this._primitive),delete this._primitive)}redraw(e){const t=_0x3a2b68;return this.isAdded&&this[t(442)]&&this._addedHook(e||this.style),this}update(){const e=_0x3a2b68;this._primitive&&this.primitiveCollection.remove(this._primitive),this._primitive=this[e(1950)](),this.primitiveCollection.add(this._primitive)}[_0x3a2b68(1950)](){const e={_0x2a0c45:2641,_0x106887:394,_0x4c482d:2949,_0x3cf0fb:2571,_0x339bae:3439,_0x2e882d:3633,_0x5c28f0:2618},t={_0x3ed104:749},i={_0x3352d6:2949,_0x399416:2571},s=_0x3a2b68,r=this._positions_grid.length,o=new Float64Array(r*3);for(let C=0;C<r;++C)o[C*3]=this._positions_grid[C].x,o[C*3+1]=this._positions_grid[C].y,o[C*3+2]=this._positions_grid[C].z;const c=new Cesium__namespace.Geometry({attributes:{position:new Cesium__namespace.GeometryAttribute({componentDatatype:Cesium__namespace.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:o}),st:new Cesium__namespace.GeometryAttribute({componentDatatype:Cesium__namespace.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:new Float32Array(this._uv)})},indices:new Uint16Array(this._indice),primitiveType:Cesium__namespace[s(e._0x2a0c45)].TRIANGLES,boundingSphere:Cesium__namespace.BoundingSphere.fromVertices(o)}),_=new Cesium__namespace.GeometryInstance({id:this.id,geometry:c,attributes:{show:new Cesium__namespace.ShowGeometryInstanceAttribute(this.show),distanceDisplayCondition:new Cesium__namespace[s(e._0x106887)](Number(this.style[s(2230)]??0),Number(this[s(2748)][s(3029)]??Number.MAX_VALUE))}}),l=Cesium__namespace.Material.fromType("Image");l[s(e._0x4c482d)].image=this[s(659)];const d=new Float32Array(this[s(834)]),f=d.length/4;l.uniforms[s(e._0x3cf0fb)]=new Cesium__namespace.Texture({context:this[s(1575)].scene.context,source:{width:f,height:1,arrayBufferView:d},pixelDatatype:Cesium__namespace.PixelDatatype.FLOAT}),l[s(3439)][s(1454)]=()=>{const C=s;return l[C(i._0x3352d6)][C(i._0x399416)]},l[s(3439)].useROI=()=>this._useROI,l._uniforms.reverseROI=()=>this._reverseROI,l._uniforms[s(3248)]=()=>this.style.opacity,l[s(e._0x339bae)].globalAlpha=()=>{const C=s;return this.style[C(t._0x3ed104)]??1},l.shaderSource=`
      const int WIDTH = `+f+`;
      uniform sampler2D image_0;
      uniform sampler2D roiUV0;
      uniform bool useROI;
      uniform bool reverseROI;
      uniform float opacity;
      uniform float globalAlpha;

      // 获取指定的由UV坐标定义的poi边界点
      vec2 getROIuv(sampler2D roi, int index){
        vec2 poiuv = texture(roi, vec2((float(index) + 0.5) / float(WIDTH), 0)).xy;
        return poiuv;
      }

      // 判断UV坐标在不在范围内
      bool isInside(vec2 uv, sampler2D roi){
          bool ifInside = false;
          float u = uv.x;
          float v = uv.y;
          vec2 sP = getROIuv(roi, 0);
          for (int i = 0; i < 100000; i++){
              if(i >= WIDTH) break;
              int nextIndex = i + 1;
              nextIndex = nextIndex == WIDTH ? 0 : nextIndex;
              vec2 eP = getROIuv(roi, nextIndex);
              if((sP.x == u && sP.y == v) || (eP.x == u && eP.y == v)){
                  return true;
              } else if((sP.y < v && eP.y >= v) || (sP.y >= v && eP.y < v)) {
                  float x = sP.x + (v - sP.y) * (eP.x - sP.x) / (eP.y - sP.y);
                  if(x == u){
                    return true;
                  } else if(x > u) {
                    ifInside = !ifInside;
                  }
              }
            sP = eP;
          }
          return ifInside;
      }

      czm_material getMaterial(czm_materialInput materialInput){
        czm_material material = czm_getDefaultMaterial(materialInput);
        vec2 uv = materialInput.st;
        vec4 imageColor = texture(image_0, uv);
        material.diffuse = imageColor.rgb;
        material.alpha = imageColor.a * opacity * globalAlpha;
        return material;
      }

      czm_material czm_getMaterial(czm_materialInput materialInput) {
        if(useROI){
          vec2 uv = materialInput.st;
          bool inside = isInside(uv, roiUV0);
          if(inside != reverseROI) {
            return getMaterial(materialInput);
          } else {
            discard;
          }
        } else {
          return getMaterial(materialInput);
        }
      }
      `;const g={geometryInstances:_,asynchronous:![],appearance:new Cesium__namespace[s(e._0x2e882d)]({...this.style,material:l})},b=new Cesium__namespace[s(e._0x5c28f0)](g);return this.bindPickId(b),b}updateVideoContainer(){const e={_0x2b5e83:659,_0x570fdb:3594,_0x515620:4023,_0x2c51b1:3418,_0x11898c:3210,_0xf648a5:527,_0x3166a3:659},t=_0x3a2b68;var i;this._hasRemoveElement&&(i=this._videoContainer)!==null&&i!==void 0&&i.parentNode&&(this[t(e._0x2b5e83)][t(e._0x570fdb)].removeChild(this._videoContainer),delete this._hasRemoveElement,delete this._videoContainer),this[t(2748)][t(4023)]?(this._videoContainer=createVideo(this.style[t(e._0x515620)],this.style.fileType,"",document[t(e._0x2c51b1)]),this._videoContainer.style.display="none",this[t(e._0x11898c)]=!![]):this.style[t(e._0xf648a5)]&&(this[t(e._0x3166a3)]=this.style.container)}_getDrawEntityClass(e,t){const i={_0x2b4cd6:1906},s=_0x3a2b68;return e.minPointNum=4,e.maxPointNum=4,e[s(2748)][s(4089)]=s(i._0x2b4cd6),e[s(2748)].materialOptions={url:this[s(659)]},create$4("polygon",e)}[_0x3a2b68(900)](e){this._hierarchy&&(e._hierarchy=this._hierarchy)}get isEditingGrid(){return this._enabledEditGrid}[_0x3a2b68(1819)](){const e={_0x262d2f:3459,_0x16c9ca:3459,_0x694b8:1374,_0x27668c:4335,_0x57fcd8:1575,_0x3fdd0c:952,_0x51ede6:1294},t={_0x4cf911:3396},i=_0x3a2b68;if(this[i(e._0x262d2f)])return this;if(this[i(e._0x16c9ca)]=!![],!this._map)throw new Error("编辑时_map不能为空,请将对象添加到图层，并且图层已添加到Map");this.stopEditing(),this._map[i(e._0x694b8)].noPickEntity=this[i(e._0x27668c)],this[i(e._0x57fcd8)].mouseEvent[i(e._0x3fdd0c)]=![],!this.editingGrid&&(this[i(e._0x51ede6)]=new EditPolygonGrid(this),this.editingGrid.getGridPositions=s=>this._positions_grid,this.editingGrid[i(2845)]=(s,r)=>{const o=i;this[o(2731)][r]=s,this[o(t._0x4cf911)]()}),this.editingGrid.activate&&this.editingGrid.activate()}stopEditingGrid(){const e={_0x3567d8:3459,_0x435a66:1575,_0x1268fe:1374,_0x2f6817:952},t=_0x3a2b68;var i;if(!this[t(e._0x3567d8)]||!this.isAdded)return this;(i=this[t(1294)])!==null&&i!==void 0&&i.disable&&this[t(1294)].disable(),this[t(e._0x435a66)]&&(this._map.closeSmallTooltip(),this._map.mouseEvent.noPickEntity=null,this._map[t(e._0x1268fe)][t(e._0x2f6817)]=!![]),this._enabledEditGrid=![]}}register$4(_0x3a2b68(3880),VideoPrimitive);function getGridPositions(n,e){const t={_0x11ec2e:2978,_0x255fca:3674,_0x10239d:2080,_0x204238:1754},i=_0x3a2b68,s=[],r=[],o=[],c=n[0],_=n[1],l=n[2],d=n[3],f=Cesium__namespace[i(2978)].distance(c,d),g=Cesium__namespace.Cartesian3.distance(_,l),b=f/e,C=g/e,P=Cesium__namespace.Cartesian3.normalize(Cesium__namespace.Cartesian3.subtract(d,c,new Cesium__namespace.Cartesian3),new Cesium__namespace[i(t._0x11ec2e)]),S=Cesium__namespace.Cartesian3.normalize(Cesium__namespace[i(2978)].subtract(l,_,new Cesium__namespace.Cartesian3),new Cesium__namespace.Cartesian3),L=1/e;for(let E=0;E<=e;E++)for(let M=0;M<=e;M++){const D=Cesium__namespace.Cartesian3[i(t._0x255fca)](Cesium__namespace[i(2978)][i(t._0x10239d)](P,E*b,new Cesium__namespace.Cartesian3),c,new Cesium__namespace[i(2978)]),R=Cesium__namespace.Cartesian3.add(Cesium__namespace[i(t._0x11ec2e)][i(2080)](S,E*C,new Cesium__namespace.Cartesian3),_,new Cesium__namespace.Cartesian3),k=Cesium__namespace.Cartesian3.normalize(Cesium__namespace.Cartesian3.subtract(R,D,new Cesium__namespace.Cartesian3),new Cesium__namespace[i(t._0x11ec2e)]),N=Cesium__namespace.Cartesian3.distance(R,D),$=N/e,B=Cesium__namespace.Cartesian3.add(Cesium__namespace.Cartesian3.multiplyByScalar(k,M*$,new Cesium__namespace.Cartesian3),D,new Cesium__namespace.Cartesian3);s.push(M*L),s.push(1-E*L),r.push(B)}for(let E=0;E<e;E++)for(let M=0;M<e;M++){const D=E*(e+1)+M,R=(E+1)*(e+1)+M;o.push(D),o[i(1754)](D+1),o[i(t._0x204238)](R+1),o.push(R+1),o[i(t._0x204238)](R),o[i(t._0x204238)](D)}return{uv:s,indice:o,positions:r}}class BaseCombine extends BasePrimitive{get[_0x3a2b68(1727)](){return this.options.instances||[]}set[_0x3a2b68(1727)](e){this.options.instances=e,this._rectangle=null,this.redraw()}_addedHook(e){const t=_0x3a2b68;this.show&&(super._addedHook(e),this[t(4053)].on(EventType.show,this._layer_showHandler,this))}_removedHook(){const e=_0x3a2b68;this[e(4053)].off(EventType[e(442)],this._layer_showHandler,this),super._removedHook()}_layer_showHandler(){this[_0x3a2b68({_0x4831fe:572}._0x4831fe)]()}getPickedObject(e){const t={_0x56ebf5:1727},i=_0x3a2b68,s=e.split("#");if(s.length!==2)return null;const r=Number(s[1]);return this[i(t._0x56ebf5)][r]}[_0x3a2b68(2918)](e){return this.id+"#"+e}[_0x3a2b68(445)](e,t){const i={_0x230fc9:1754},s=_0x3a2b68;if(this[s(1941)][s(3327)])return this.options.geometryInstances;const r=[],o=this.instances;for(let c=0;c<o.length;c++){const _=o[c];_.id=this.createPickId(c),r[s(i._0x230fc9)](_)}return r}getRectangle(e){const t={_0x5ca513:3417,_0x3c5c44:400,_0x53e137:2694},i=_0x3a2b68;if(!this[i(t._0x5ca513)]){const s=this.options[i(1727)]||[];for(let r=0;r<s[i(t._0x3c5c44)];r++){const o=s[r];o.position&&(o.position=LngLatPoint.parse(o.position).toCartesian(),this[i(3416)]([o.position])),o.positions&&(o[i(t._0x53e137)]=LngLatArray[i(2249)](o[i(2694)]),this._unionRectangle(o.positions))}}return e!=null&&e.isFormat?formatRectangle(this._rectangle):this._rectangle}_unionRectangle(e){const t={_0x474348:3417},i=_0x3a2b68,s=Cesium__namespace.Rectangle.fromCartesianArray(e);Cesium__namespace.defined(s)&&(Cesium__namespace.defined(this._rectangle)?this._rectangle=Cesium__namespace[i(1983)].union(s,this[i(t._0x474348)]):this._rectangle=s)}[_0x3a2b68(1909)](){const e={_0x4cae4a:1727,_0x3832a3:1203,_0x2a82a5:4076,_0x790580:4205},t=_0x3a2b68,i={...getAttrVal(this.options,{onlySimpleType:!![]}),type:this.type};this.options.style&&(i.style=this[t(1203)](this.options.style,![]));const s=[];for(let r=0;r<this[t(e._0x4cae4a)].length;r++){const o=this.instances[r],c={attr:o.attr,style:this[t(e._0x3832a3)](o[t(2748)],![])};o.position?c[t(e._0x2a82a5)]=LngLatPoint[t(e._0x790580)](o[t(e._0x2a82a5)]):o.positions&&(c.positions=LngLatArray.toArray(o[t(2694)])),s.push(c)}return i.instances=s,this[t(1355)]&&this._toJSON_Ex(i),i}[_0x3a2b68(458)](e){const t={_0x128c1a:1727,_0x3ad600:1603,_0x4f71c4:4076},i=_0x3a2b68,s=[];for(let r=0;r<this.instances.length;r++){const o=this[i(t._0x128c1a)][r],c={type:"Feature",properties:{...o.attr,type:this[i(t._0x3ad600)],style:this._style2JsonBase(o.style,!![])}};this._getGeoJsonGeometry?c.geometry=this._getGeoJsonGeometry(o,e):o[i(t._0x4f71c4)]?c.geometry={type:i(1910),coordinates:LngLatPoint[i(4205)](o.position,e==null?void 0:e.noAlt)}:o[i(2694)]&&(c.geometry={type:"LineString",coordinates:LngLatArray[i(4205)](o[i(2694)],e==null?void 0:e[i(1528)])}),s.push(c)}return s}flyTo(e){const t={_0x2fb44a:1737},i=_0x3a2b68,s=this[i(t._0x2fb44a)]();return this[i(1575)]&&s?this._map.flyToExtent(s,e):Promise.resolve(![])}setColorStyle(e,t){const i={_0x3abdc7:1727,_0x144136:1174},s=_0x3a2b68;if(Cesium__namespace.defined(t))this._setColorStyleItem(t,e);else for(let r=0;r<this.options[s(i._0x3abdc7)].length;r++)this[s(i._0x144136)](r,e)}_setColorStyleItem(e,t){const i={_0x571d54:1393},s=_0x3a2b68,r=this.options.instances[e]||{};r.style?r.style={...r.style,...t}:r.style=t;const o=this.getGeometryInstanceAttributes(this.createPickId(e));if(o){const c=getColorByStyle({...this.style,...r[s(2748)]});o.color=Cesium__namespace[s(i._0x571d54)].toValue(c)}}}BaseCombine[_0x3a2b68(3390)]=!![];var FlatBillboardFS=`#ifdef GL_ES
precision mediump float;
#endif
uniform sampler2D mars_image;
uniform vec2 mars_distanceDisplayCondition;
uniform vec3 mars_positionWC;
in vec3 v_worldPos;
in vec2 v_st;
uniform float globalAlpha;

void main() {
  float dis = distance(mars_positionWC, v_worldPos);
  if(dis < mars_distanceDisplayCondition.x || dis > mars_distanceDisplayCondition.y) {
    discard;
  } else {
    vec4 color = texture(mars_image, v_st);
    color.a *= globalAlpha;

    // Fully transparent parts of the billboard are not pickable.
    #if !defined(OPAQUE) && !defined(TRANSLUCENT)
    if(color.a < 0.005)   // matches 0/255 and 1/255
    {
      discard;
    }
    #else
    // The billboard is rendered twice. The opaque pass discards translucent fragments
    // and the translucent pass discards opaque fragments.
    #ifdef OPAQUE
    if(color.a < 0.995)   // matches < 254/255
    {
      discard;
    }
    #else
    if(color.a >= 0.995)  // matches 254/255 and 255/255
    {
      discard;
    }
    #endif
    #endif

    out_FragColor = color;

  }
}
`,FlatBillboardVS=_0x3a2b68(2601);const DEF_STYLE$d={angle:0,width:50};class FlatBillboard extends BaseCombine{constructor(e={}){const t=_0x3a2b68;e[t(2748)]={...DEF_STYLE$d,...e.style},super(e),this.distanceDisplayCondition=e.distanceDisplayCondition??new Cesium__namespace[t(2091)](0,5e6),this._globalAlpha=1}get[_0x3a2b68(1817)](){var e;return(e=this._layer)===null||e===void 0?void 0:e.billboardCollection}get distanceDisplayCondition(){return this._distanceDisplayCondition}set distanceDisplayCondition(e){const t=_0x3a2b68;this[t(3741)]=e,this._distanceDisplayConditionCartesian2=new Cesium__namespace.Cartesian2(e.near,e.far)}_addedHook(e){const t={_0x51643a:1575,_0x1c8570:3586,_0x4e8550:1941,_0x47e20b:1727,_0x3bf77f:2748,_0x1e4e25:1256,_0x29497d:572,_0x20c0bf:2318},i=_0x3a2b68;if(!this.show)return;const s=(this.options.scale3d??1)*this[i(t._0x51643a)][i(t._0x1c8570)].resolutionScale;this[i(t._0x4e8550)][i(t._0x47e20b)].length>0&&this[i(1941)][i(1727)][0].style.width?this._pointSize=s*this[i(1941)][i(1727)][0][i(t._0x3bf77f)].width:this._pointSize=s*this.options.style[i(517)],this[i(t._0x1e4e25)]={},this.textureDef=new Cesium__namespace.Texture({context:this[i(t._0x51643a)].scene.context,width:500,height:500}),this.options.instances&&this[i(t._0x29497d)](),this[i(1575)].on(EventType[i(t._0x20c0bf)],this._onMorphComplete,this),this.primitiveCollection.add(this)}_removedHook(){const e={_0x1e849d:2318,_0x2e6957:3624},t=_0x3a2b68;this[t(1575)].off(EventType[t(e._0x1e849d)],this[t(e._0x2e6957)],this),this.clear(),this.textureDef.destroy(),delete this.textureDef,this._noDestroy=!![],this[t(756)].remove(this),this._noDestroy=![]}clear(){this._removeCollectionBy2D(),this._removeCollectionBy3D()}redraw(){const e={_0x20ffa4:1378,_0x41b095:3915},t=_0x3a2b68;if(!this._map)return;this.clear();const i=this.instances;if(i)for(let s=0,r=i.length;s<r;s++){const o=i[s];o.position=LngLatPoint[t(e._0x20ffa4)](o.position)}this._map.scene.mode===Cesium__namespace[t(e._0x41b095)].SCENE3D?this._initCollectionBy3D():this._initCollectionBy2D()}[_0x3a2b68(3624)](e){this.redraw()}update(e){const t=_0x3a2b68;if(this[t(1575)]){if(!this.show){this._removeCollectionBy2D();return}e.mode===Cesium__namespace.SceneMode[t(1250)]?e.passes.render?this._drawCommands&&e.commandList.push(...this._drawCommands):this._pickCommands&&e.commandList.push(...this._pickCommands):!this.billboardCollection&&this._initCollectionBy2D()}}_initCollectionBy2D(){const e={_0x337474:1793,_0x474305:4241,_0x2aab1c:517,_0x329299:1472},t=_0x3a2b68,i=this.instances;if(i){this._billboard2DList=[];for(let s=0,r=i.length;s<r;s++){const o=i[s],c={...this.options.style,...o.style},_=this.billboardCollection.add({id:this[t(2918)](s),position:o.position,image:c[t(e._0x337474)],scale:1,rotation:Cesium__namespace[t(2806)].toRadians(c.angle||0),width:c.width,height:c[t(e._0x474305)]||c[t(e._0x2aab1c)]});this[t(e._0x329299)](_),this._billboard2DList.push(_)}}}_removeCollectionBy2D(){if(!(!this.billboardCollection||!this._billboard2DList)){for(let e=this._billboard2DList.length-1;e>=0;e--){const t=this._billboard2DList[e];this.billboardCollection.remove(t)}this._billboard2DList=[]}}_initCollectionBy3D(){const e={_0x49b825:1191,_0x1d7616:1754},t=_0x3a2b68,i=this.instances;if(!i)return;const s={};for(let c=0,_=i.length;c<_;c++){var r;const l=i[c];l[t(e._0x49b825)]=c;const d=(r=l.style)===null||r===void 0?void 0:r.image;d&&(!s[d]&&(s[d]=[]),s[d].push(l))}const o=[];for(const c in s){const _=s[c],l=c;this.prepareTexture(l);for(const d of _){const f=this.createDrawCommand(l,d);o[t(e._0x1d7616)](f)}}this._drawCommands=o}_removeCollectionBy3D(){const e={_0xb1db2:2714,_0x6eb689:2714,_0x2964a1:1256},t={_0x3d76fe:2619,_0x10f903:4187},i=_0x3a2b68;this._drawCommands&&this._drawCommands.length>0&&(this._drawCommands.forEach(function(s){const r=_0x20dc;s.vertexArray&&s.vertexArray[r(t._0x3d76fe)](),s[r(t._0x10f903)]&&s.shaderProgram.destroy()}),delete this._drawCommands),this._pickCommands&&this[i(e._0xb1db2)][i(400)]>0&&(this[i(e._0x6eb689)].forEach(function(s){const r=i;s.vertexArray&&s[r(3698)].destroy(),s.shaderProgram&&s.shaderProgram.destroy()}),delete this._pickCommands);for(const s in this.textures)this[i(e._0x2964a1)][s]&&this.textures[s].destroy();this.textures={}}prepareTexture(e){const t={_0x4138d0:1016},i={_0x44256b:744},s=_0x3a2b68,r=new Image;r[s(t._0x4138d0)]=o=>{const c=s,_=new Cesium__namespace.Texture({context:this._map[c(i._0x44256b)][c(3041)],source:r});this.textures[e]=_},r[s(3379)]=e}prepareVAO(e){const t={_0x5ce6bf:2748,_0x264a30:1754,_0x18b925:1754,_0x30fed5:1754,_0x4423e6:1754,_0x17a6ac:1754,_0x5c479e:1144,_0x268db8:2978,_0x335f9f:1085,_0x2c04a1:1754,_0xd67bb1:3193,_0x70945:2978,_0x1297fd:1085,_0x490fdf:1248},i=_0x3a2b68,s=[],r=[],o=[],c=[],_=[];for(let l=0,d=e.length;l<d;l++){const f=e[l],g=f.position,b={...this.options.style,...f[i(t._0x5ce6bf)]};o.push(l*4+0),o[i(1754)](l*4+2),o.push(l*4+1),o.push(l*4+0),o.push(l*4+3),o.push(l*4+2);const C=new Float32Array(6);C[0]=g.x,C[1]=g.x-C[0],C[2]=g.y,C[3]=g.y-C[2],C[4]=g.z,C[5]=g.z-C[4],s.push(C[0]),s[i(1754)](C[2]),s[i(t._0x264a30)](C[4]),r[i(t._0x18b925)](C[1]),r.push(C[3]),r.push(C[5]),s[i(t._0x18b925)](C[0]),s.push(C[2]),s.push(C[4]),r[i(t._0x30fed5)](C[1]),r.push(C[3]),r.push(C[5]),s.push(C[0]),s.push(C[2]),s[i(1754)](C[4]),r.push(C[1]),r.push(C[3]),r[i(1754)](C[5]),s.push(C[0]),s.push(C[2]),s[i(t._0x4423e6)](C[4]),r.push(C[1]),r.push(C[3]),r.push(C[5]),c.push(0,0),c[i(t._0x17a6ac)](0,1),c.push(1,1),c.push(1,0);const P=Cesium__namespace.Transforms.eastNorthUpToFixedFrame(g),S=b.angle||0,L=Cesium__namespace.Matrix3.fromRotationZ(Cesium__namespace.Math.toRadians(S)),E=Cesium__namespace[i(2478)][i(3654)](L),M=Cesium__namespace.Matrix4[i(t._0x5c479e)](P,E,new Cesium__namespace.Matrix4),D=1,R=(b.height||b.width)/b[i(517)],k=new Cesium__namespace.Cartesian3(-D,-R,0);Cesium__namespace.Matrix4.multiplyByPointAsVector(M,k,k),Cesium__namespace.Cartesian3.normalize(k,k),_.push(k.x,k.y,k.z);const N=new Cesium__namespace[i(t._0x268db8)](-D,R,0);Cesium__namespace.Matrix4.multiplyByPointAsVector(M,N,N),Cesium__namespace.Cartesian3[i(t._0x335f9f)](N,N),_[i(t._0x2c04a1)](N.x,N.y,N.z);const $=new Cesium__namespace.Cartesian3(D,R,0);Cesium__namespace.Matrix4[i(t._0xd67bb1)](M,$,$),Cesium__namespace[i(t._0x70945)].normalize($,$),_.push($.x,$.y,$.z);const B=new Cesium__namespace.Cartesian3(D,-R,0);Cesium__namespace.Matrix4.multiplyByPointAsVector(M,B,B),Cesium__namespace.Cartesian3[i(t._0x1297fd)](B,B),_[i(1754)](B.x,B.y,B.z)}return{index:new Uint16Array(o),vertex_H:{values:new Float32Array(s),componentDatatype:i(1025),componentsPerAttribute:3},vertex_L:{values:new Float32Array(r),componentDatatype:"DOUBLE",componentsPerAttribute:3},uv:{values:new Float32Array(c),componentDatatype:"FLOAT",componentsPerAttribute:2},color:{values:new Float32Array(_),componentDatatype:i(t._0x490fdf),componentsPerAttribute:3}}}createDrawCommand(e,t){const i={_0x3a8242:3432,_0x1de9ff:657,_0x1e726f:1945,_0x142f2e:3781,_0x3a77a3:1201,_0x458db4:1179,_0x1bbb84:1834,_0xf2209d:3826,_0x1e0639:3353,_0x3b0f00:2918,_0x22d7b7:2918,_0x2842b9:1862,_0xe92e97:3722},s=_0x3a2b68,r=this._map.scene.context,o=this[s(1941)][s(3943)]??![],c=Cesium__namespace[s(i._0x3a8242)].fromCache({depthTest:{enabled:!![],func:o?Cesium__namespace[s(657)].LEQUAL:Cesium__namespace[s(i._0x1de9ff)].LESS},depthMask:o,blending:Cesium__namespace.BlendingState.ALPHA_BLEND}),_={position3DHigh:0,position3DLow:1,color:2,st:3},l=Cesium__namespace.ShaderProgram[s(i._0x1e726f)]({context:r,vertexShaderSource:FlatBillboardVS,fragmentShaderSource:FlatBillboardFS,attributeLocations:_}),d=this.prepareVAO([t]),f=Cesium__namespace[s(2261)][s(i._0x142f2e)]({context:r,typedArray:d[s(1191)],usage:Cesium__namespace.BufferUsage.STATIC_DRAW,indexDatatype:Cesium__namespace[s(i._0x3a77a3)].UNSIGNED_SHORT}),g=new Cesium__namespace.VertexArray({context:r,attributes:[{index:0,vertexBuffer:Cesium__namespace.Buffer.createVertexBuffer({context:r,typedArray:d.vertex_H.values,usage:Cesium__namespace.BufferUsage.STATIC_DRAW}),componentsPerAttribute:3},{index:1,vertexBuffer:Cesium__namespace.Buffer.createVertexBuffer({context:r,typedArray:d.vertex_L.values,usage:Cesium__namespace.BufferUsage[s(i._0x458db4)]}),componentsPerAttribute:3},{index:2,vertexBuffer:Cesium__namespace.Buffer.createVertexBuffer({context:r,typedArray:d.color.values,usage:Cesium__namespace[s(2635)][s(1179)]}),componentsPerAttribute:3},{index:3,vertexBuffer:Cesium__namespace.Buffer[s(i._0x1bbb84)]({context:r,typedArray:d.uv[s(i._0xf2209d)],usage:Cesium__namespace.BufferUsage.STATIC_DRAW}),componentsPerAttribute:2}],indexBuffer:f}),b=this._map[s(744)].camera,C=r.drawingBufferWidth,P=r.drawingBufferHeight,S=new Cesium__namespace.Cartesian2(C,P),L=Cesium__namespace[s(i._0x1e0639)].fromVertices(d[s(4028)][s(i._0xf2209d)]);L.radius=1e4;const E=new Cesium__namespace.DrawCommand({primitiveType:Cesium__namespace.PrimitiveType.TRIANGLES,shaderProgram:l,vertexArray:g,modelMatrix:Cesium__namespace.Matrix4[s(3709)],renderState:c,boundingVolume:L,uniformMap:{mars_orthographicMatrix:()=>{if(b.frustum._offCenterFrustum){var R;return(R=b.frustum._offCenterFrustum)===null||R===void 0?void 0:R._perspectiveMatrix}else return b.frustum._orthographicMatrix},mars_viewMatrix:()=>b._viewMatrix,mars_resolution:()=>S,mars_pointSize:()=>this._pointSize,mars_image:()=>this[s(1256)][e]||this.textureDef,mars_distanceDisplayCondition:()=>this._distanceDisplayConditionCartesian2,mars_positionWC:()=>b.positionWC,globalAlpha:()=>this[s(1309)]},castShadows:![],receiveShadows:![],pass:o?Cesium__namespace.Pass.TRANSLUCENT:Cesium__namespace.Pass[s(513)],pickOnly:!![],pickCommand:new Cesium__namespace.DrawCommand({owner:this,pickOnly:!![]})});this.bindPickId(E),E.pickId=r[s(i._0x3b0f00)]({primitive:E,id:this[s(i._0x22d7b7)](t.index)});const M=new Cesium__namespace.DrawCommand({owner:E,primitiveType:Cesium__namespace.PrimitiveType[s(i._0x2842b9)],pickOnly:!![]});M.vertexArray=g,M.renderState=c;const D=Cesium__namespace.ShaderProgram[s(1945)]({context:r,vertexShaderSource:FlatBillboardVS,fragmentShaderSource:Cesium__namespace.ShaderSource[s(2371)](FlatBillboardFS,s(i._0xe92e97)),attributeLocations:_});return M.shaderProgram=D,M.uniformMap=E.uniformMap,M.uniformMap.czm_pickColor=()=>E.pickId.color,M.pass=o?Cesium__namespace.Pass.TRANSLUCENT:Cesium__namespace.Pass.OPAQUE,M.boundingVolume=L,M.modelMatrix=Cesium__namespace[s(2478)].IDENTITY,!this._pickCommands&&(this[s(2714)]=[]),this._pickCommands[s(1754)](M),E}setOpacity(e){this._globalAlpha=e}}register$4("flatBillboard",FlatBillboard,!![]);class BasePolyCombine extends BaseCombine{get[_0x3a2b68(2748)](){const e={_0x2019af:2748},t=_0x3a2b68;var i,s;return((i=this.options.instances)===null||i===void 0?void 0:i.length)>0&&this.options.instances[0][t(e._0x2019af)]?{...this.options.style,...this.options[t(1727)][0].style}:(s=this.options)===null||s===void 0?void 0:s[t(e._0x2019af)]}set[_0x3a2b68(2748)](e){this.setStyle(e)}[_0x3a2b68(445)](e,t){const i=_0x3a2b68;this._rectangle=null,this.translucent=![];const s=this.instances,r=[];for(let o=0;o<s.length;o++){const c=s[o];if(c instanceof Cesium__namespace.GeometryInstance)c.id=this.createPickId(o),r[i(1754)](c);else{const _=this._createGeometryInstanceItem(e,t,c);_&&(_.id=this.createPickId(o),r.push(_))}}return r}[_0x3a2b68(1214)](e,t,i){}_getPolylineOutlinePositions(e){const t={_0x1b9318:2249},i=_0x3a2b68;return e[i(2694)]?[LngLatArray[i(t._0x1b9318)](e.positions)]:null}_createPolylineOutline(e){const t={_0x268568:2748,_0x28f251:3559,_0x13fccd:1091,_0x3654f4:2748,_0x5270ed:601,_0x4be0ba:3793,_0x46e03d:4241,_0x5a990a:3286,_0x169bd0:1175,_0x182ce5:1438},i=_0x3a2b68,s=this.instances,r=[];let o;for(let l=0;l<s[i(400)];l++){const d=s[l];let f;if(d.style&&(Cesium__namespace.defined(d.style.outline)||Cesium__namespace.defined(d[i(t._0x268568)].outlineStyle)||Cesium__namespace.defined(d.style[i(t._0x28f251)])||Cesium__namespace.defined(d.style[i(t._0x13fccd)])||Cesium__namespace[i(407)](d[i(t._0x3654f4)][i(t._0x5270ed)]))){const P=this[i(1079)](d.style);if(!P.show)continue;f={...e,...P}}else f=e;o=PolylineStyleConver.toCesiumVal(f),!o[i(t._0x4be0ba)]&&(o.vertexFormat=Cesium__namespace.PolylineColorAppearance[i(4266)]);const g=f[i(3542)]?Cesium__namespace.GroundPolylineGeometry:Cesium__namespace.PolylineGeometry,b=o.color??Cesium__namespace.Color.YELLOW.withAlpha(.5),C=this._getPolylineOutlinePositions(d);if(!C)return;for(let P=0,S=C.length;P<S;P++){let L=C[P];Cesium__namespace.defined(d.style[i(t._0x46e03d)])&&(L=setPositionsHeight(L,d.style.height)),L.length>0&&(L=L.concat(L[0]));const E=new Cesium__namespace[i(t._0x5a990a)]({geometry:new g({...o,positions:L}),attributes:{color:Cesium__namespace.ColorGeometryInstanceAttribute.fromColor(b),distanceDisplayCondition:o.distanceDisplayCondition}});r.push(E)}}const c={...this.options,geometryInstances:r,show:this.show};delete c.style,delete c.attr,this._isColorMaterial(e,o)?c.appearance=new Cesium__namespace[i(t._0x169bd0)]({...o}):c[i(t._0x182ce5)]=new Cesium__namespace.PolylineMaterialAppearance({...o});let _;return o[i(3542)]?_=this.primitiveCollection[i(3674)](new Cesium__namespace[i(3742)](c)):_=this.primitiveCollection.add(new Cesium__namespace.Primitive(c)),this.bindPickId(_),_}[_0x3a2b68(3224)](e){const t={_0x3d6f1b:3519,_0x42cccf:1575},i=_0x3a2b68;this._map.closeHighlight();const s=e[i(t._0x3d6f1b)];s&&(this._last_pickedObject=s,this[i(t._0x42cccf)].openHighlight(this,this._highlightOptions,e))}openHighlight(e,t=!![],i){const s={_0x31c7a1:1575,_0x508a56:2962,_0xc20126:3017,_0x1e880a:1393},r=_0x3a2b68;t&&(this[r(s._0x31c7a1)][r(s._0x508a56)](),this._map.last_highlighGraphic=this),i&&(this._last_pickedObject=i);const o=e||this[r(s._0xc20126)];if(this._last_pickedObject&&o){var c;const _=PolygonStyleConver[r(1304)]({...(c=this._last_pickedObject.data)===null||c===void 0?void 0:c.style,...o}),l=this._getColorByColorMaterial(_,![]);if(l){const d=this.getGeometryInstanceAttributes(this._last_pickedObject.id);d.color=Cesium__namespace[r(s._0x1e880a)][r(2397)](l),this.fire(EventType.highlightOpen,{},!![])}}}[_0x3a2b68(2962)](){const e={_0x31585a:1924,_0x512592:4194},t=_0x3a2b68;var i;if(this._last_pickedObject&&this._primitive){var s;const r=PolygonStyleConver[t(1304)](((s=this[t(602)][t(e._0x31585a)])===null||s===void 0?void 0:s[t(2748)])||{}),o=this[t(e._0x512592)](r,![]);if(o){const c=this.getGeometryInstanceAttributes(this._last_pickedObject.id);c&&(c.color=Cesium__namespace.ColorGeometryInstanceAttribute.toValue(o),this.fire(EventType.highlightClose,{},!![]))}delete this[t(602)]}((i=this._map)===null||i===void 0?void 0:i.last_highlighGraphic)===this&&this._map._clearLastHighlight()}setStyle(e){const t={_0x3d8856:1941},i=_0x3a2b68,s=this[i(t._0x3d8856)].instances||[];for(let r=0;r<s.length;r++){const o=s[r];o.style&&(o.style=merge(o.style,e))}return super.setStyle(e)}}class BasePointCombine extends BasePolyCombine{[_0x3a2b68(2699)](e,t){const i=_0x3a2b68;if(e[i(4238)])return e.modelMatrix;const s=LngLatPoint.toCartesian(e[i(4076)]);return Cesium__namespace[i(3737)].headingPitchRollToFixedFrame(s,Cesium__namespace.HeadingPitchRoll.fromDegrees(t.heading||0,t.pitch||0,t.roll||0))}}class PlaneCombine extends BasePointCombine{[_0x3a2b68(3931)](e){return PlaneStyleConver[_0x3a2b68(1304)](e)}[_0x3a2b68(1338)](e,t){return PlaneStyleConver[_0x3a2b68(1909)](e,t)}_createGeometryInstanceItem(e,t,i){const s={_0x1f1c8a:3980,_0x4342e5:3301,_0x2d92a7:1393},r=_0x3a2b68,o=PlaneStyleConver.toCesiumVal({...this.options.style,...i.style});o.vertexFormat=o[r(s._0x1f1c8a)]||e.vertexFormat;let c=this._getColorByColorMaterial(o);t&&o.outlineColor&&(c=o.outlineColor),c.alpha!==1&&(this.translucent=!![]);const _=this._getModelMatrix(i,o),l=t?Cesium__namespace[r(s._0x4342e5)]:Cesium__namespace.PlaneGeometry;return new Cesium__namespace.GeometryInstance({geometry:new l(o),modelMatrix:_,attributes:{color:Cesium__namespace[r(s._0x2d92a7)].fromColor(c),distanceDisplayCondition:o.distanceDisplayCondition}})}[_0x3a2b68(2699)](e,t){const i={_0x2a4d5b:2806,_0x377eb2:2478,_0x4c3166:1144,_0x28829d:2978,_0x421f2a:3654,_0x5da818:791},s=_0x3a2b68;var r,o;if(e[s(4238)])return e.modelMatrix;const c=super._getModelMatrix(e,t);if(t.plane_normal===Cesium__namespace.Cartesian3.UNIT_X){const l=Cesium__namespace.Matrix4.fromRotationTranslation(Cesium__namespace.Matrix3.fromRotationX(Cesium__namespace[s(i._0x2a4d5b)].toRadians(90)));Cesium__namespace[s(i._0x377eb2)][s(i._0x4c3166)](c,l,c)}else if(t.plane_normal===Cesium__namespace[s(i._0x28829d)].UNIT_Y){const l=Cesium__namespace.Matrix4[s(i._0x421f2a)](Cesium__namespace.Matrix3[s(i._0x5da818)](Cesium__namespace.Math[s(1185)](90)));Cesium__namespace.Matrix4.multiply(c,l,c)}const _=Cesium__namespace.Matrix4.fromScale(new Cesium__namespace.Cartesian3(((r=t.dimensions)===null||r===void 0?void 0:r.x)??1,((o=t.dimensions)===null||o===void 0?void 0:o.y)??1,1));return Cesium__namespace.Matrix4.multiply(c,_,c),c}}register$4("planeC",PlaneCombine,!![]);class BoxCombine extends BasePointCombine{[_0x3a2b68(3931)](e){const t={_0x4b79c7:3086},i=_0x3a2b68;return e[i(3086)]=e[i(t._0x4b79c7)]??!![],BoxStyleConver.toCesiumVal(e)}_style2Json(e,t){return BoxStyleConver[_0x3a2b68(1909)](e,t)}_createGeometryInstanceItem(e,t,i){const s={_0x1b55aa:3980,_0x5c65e3:3980,_0x33be89:838,_0x515f29:2699,_0x2c62fb:1393},r=_0x3a2b68,o=BoxStyleConver.toCesiumVal({...this.options.style,...i[r(2748)]});o[r(s._0x1b55aa)]=o[r(s._0x5c65e3)]||e.vertexFormat;let c=this._getColorByColorMaterial(o);t&&o.outlineColor&&(c=o.outlineColor),c[r(s._0x33be89)]!==1&&(this.translucent=!![]);const _=this[r(s._0x515f29)](i,o),l=t?Cesium__namespace[r(574)]:Cesium__namespace.BoxGeometry;return new Cesium__namespace[r(3286)]({geometry:l[r(1863)](o),modelMatrix:_,attributes:{color:Cesium__namespace[r(s._0x2c62fb)].fromColor(c),distanceDisplayCondition:o[r(2169)]}})}}register$4("boxC",BoxCombine,!![]);class CircleCombine extends BasePointCombine{_conversionStyle(e){return CircleStyleConver[_0x3a2b68(1304)](e)}_style2Json(e,t){return CircleStyleConver.toJSON(e,t)}_createGeometryInstanceItem(e,t,i){const s={_0x16a707:2748,_0x7ca714:3559,_0x12932a:3747,_0x322777:3772,_0x57d267:3286},r=_0x3a2b68,o=CircleStyleConver.toCesiumVal({...this.options[r(s._0x16a707)],...i.style});o.vertexFormat=o.vertexFormat||e.vertexFormat;let c=this._getColorByColorMaterial(o);t&&o[r(s._0x7ca714)]&&(c=o.outlineColor),c.alpha!==1&&(this.translucent=!![]),i.position=LngLatPoint.parse(i[r(4076)]).toCartesian(),o[r(s._0x12932a)]=i.position;const _=t?Cesium__namespace.CircleOutlineGeometry:Cesium__namespace[r(s._0x322777)];return new Cesium__namespace[r(s._0x57d267)]({geometry:new _(o),attributes:{color:Cesium__namespace.ColorGeometryInstanceAttribute.fromColor(c),distanceDisplayCondition:o[r(2169)]}})}[_0x3a2b68(2492)](e){const t=_0x3a2b68;return[getEllipseOuterPositions({position:e.position,radius:e.style[t(3878)],granularity:e.style.granularity})]}}register$4("circleC",CircleCombine,!![]);class CylinderCombine extends BasePointCombine{_conversionStyle(e){return e.closed=e.closed??!![],CylinderStyleConver.toCesiumVal(e)}_style2Json(e,t){return CylinderStyleConver.toJSON(e,t)}_createGeometryInstanceItem(e,t,i){const s={_0x4b2855:4194,_0x3547f9:3286,_0x33bc7e:1393,_0x27d7f0:2169},r=_0x3a2b68,o=CylinderStyleConver.toCesiumVal({...this.options.style,...i.style});o.vertexFormat=o[r(3980)]||e.vertexFormat;let c=this[r(s._0x4b2855)](o);t&&o.outlineColor&&(c=o.outlineColor),c[r(838)]!==1&&(this.translucent=!![]);const _=this._getModelMatrix(i,o),l=t?Cesium__namespace.CylinderOutlineGeometry:Cesium__namespace.CylinderGeometry;return new Cesium__namespace[r(s._0x3547f9)]({geometry:new l(o),modelMatrix:_,attributes:{color:Cesium__namespace[r(s._0x33bc7e)].fromColor(c),distanceDisplayCondition:o[r(s._0x27d7f0)]}})}}register$4(_0x3a2b68(610),CylinderCombine,!![]);class FrustumCombine extends BasePointCombine{_conversionStyle(e){const t=_0x3a2b68;return e.closed=e[t(3086)]??!![],CylinderStyleConver.toCesiumVal(e)}_style2Json(e,t){return CylinderStyleConver.toJSON(e,t)}_createGeometryInstanceItem(e,t,i){const s={_0x1200a0:838,_0x2ec9f9:779,_0x328a17:3481,_0x522709:3977,_0x24e6c0:1185},r=_0x3a2b68,o=CylinderStyleConver[r(1304)]({...this.options[r(2748)],...i[r(2748)]});o[r(3980)]=o.vertexFormat||e.vertexFormat;let c=this[r(4194)](o);t&&o.outlineColor&&(c=o.outlineColor),c[r(s._0x1200a0)]!==1&&(this.translucent=!![]);const _=i.position=LngLatPoint.parse(i.position).toCartesian();let l,d;if(i[r(s._0x2ec9f9)]){const C=LngLatPoint.parse(i.targetPosition).toCartesian();l=Cesium__namespace.Cartesian3[r(s._0x328a17)](_,C);const P=getHeadingPitchRollForLine(_,C);d=Cesium__namespace.Transforms.headingPitchRollQuaternion(_,P)}else{l=-o.length;const C=Cesium__namespace[r(s._0x522709)].fromDegrees(o.heading||0,o.pitch||0,o.roll||0);d=Cesium__namespace.Transforms.headingPitchRollQuaternion(_,C)}const f=new Cesium__namespace.PerspectiveFrustum({fov:Cesium__namespace[r(2806)][r(s._0x24e6c0)](o.angle*2||.01),aspectRatio:o.angle2/o.angle,near:.01,far:l}),g=t?Cesium__namespace[r(3457)]:Cesium__namespace.FrustumGeometry;return new Cesium__namespace.GeometryInstance({geometry:new g({...o,origin:_,orientation:d,frustum:f}),attributes:{color:Cesium__namespace.ColorGeometryInstanceAttribute.fromColor(c),distanceDisplayCondition:o.distanceDisplayCondition}})}}register$4("frustumC",FrustumCombine,!![]);class EllipsoidCombine extends BasePointCombine{_conversionStyle(e){return e.closed=e.closed??!![],EllipsoidStyleConver.toCesiumVal(e)}_style2Json(e,t){return EllipsoidStyleConver[_0x3a2b68({_0x27a059:1909}._0x27a059)](e,t)}[_0x3a2b68(1214)](e,t,i){const s={_0x1b3b22:3980,_0x4f0cc4:2699},r=_0x3a2b68,o=EllipsoidStyleConver.toCesiumVal({...this.options[r(2748)],...i.style});o.vertexFormat=o[r(3980)]||e[r(s._0x1b3b22)];let c=this._getColorByColorMaterial(o);t&&o.outlineColor&&(c=o[r(3559)]),c.alpha!==1&&(this.translucent=!![]);const _=this[r(s._0x4f0cc4)](i,o),l=t?Cesium__namespace.EllipsoidOutlineGeometry:Cesium__namespace.EllipsoidGeometry;return new Cesium__namespace.GeometryInstance({geometry:new l(o),modelMatrix:_,attributes:{color:Cesium__namespace.ColorGeometryInstanceAttribute.fromColor(c),distanceDisplayCondition:o.distanceDisplayCondition}})}}register$4("ellipsoidC",EllipsoidCombine,!![]);class PolylineCombine extends BasePolyCombine{_conversionStyle(e){return PolylineStyleConver.toCesiumVal(e)}[_0x3a2b68(1338)](e,t){return PolylineStyleConver.toJSON(e,t)}_createGeometryInstanceItem(e,t,i){const s={_0x7fe087:1175},r=_0x3a2b68,o=PolylineStyleConver.toCesiumVal({...this[r(1941)].style,...i.style});e._isColorMaterial&&(o.vertexFormat=Cesium__namespace[r(s._0x7fe087)].VERTEX_FORMAT);const c=this._getColorByColorMaterial(o),_=i.positions=LngLatArray.toCartesians(i.positions);o.positions=_;const l=o.clampToGround?Cesium__namespace.GroundPolylineGeometry:Cesium__namespace[r(3822)];return new Cesium__namespace.GeometryInstance({geometry:new l(o),attributes:{color:Cesium__namespace.ColorGeometryInstanceAttribute[r(1382)](c),distanceDisplayCondition:o.distanceDisplayCondition}})}_createAppearance(e,t){const i={_0x5e223c:3516},s=_0x3a2b68;return e._isColorMaterial?new Cesium__namespace.PolylineColorAppearance({...e}):new Cesium__namespace[s(i._0x5e223c)]({...e})}}register$4("polylineCombine",PolylineCombine),register$4("polylineC",PolylineCombine);class PolylineVolumeCombine extends BasePolyCombine{_conversionStyle(e){const t=_0x3a2b68;return e.closed=e.closed??!![],PolylineVolumeStyleConver[t(1304)](e)}_style2Json(e,t){return PolylineVolumeStyleConver.toJSON(e,t)}[_0x3a2b68(1214)](e,t,i){const s={_0x4b98f8:3559,_0x4afa6e:3426,_0x41f629:3286,_0x40e5e2:2169},r=_0x3a2b68,o=PolylineVolumeStyleConver.toCesiumVal({...this.options.style,...i.style});o.vertexFormat=o[r(3980)]||e.vertexFormat;let c=this._getColorByColorMaterial(o);t&&o.outlineColor&&(c=o[r(s._0x4b98f8)]),c.alpha!==1&&(this.translucent=!![]);const _=i.positions=LngLatArray.toCartesians(i.positions),l=t?Cesium__namespace.PolylineVolumeOutlineGeometry:Cesium__namespace[r(s._0x4afa6e)];return new Cesium__namespace[r(s._0x41f629)]({geometry:new l({...o,polylinePositions:_,shapePositions:o.shape}),attributes:{color:Cesium__namespace.ColorGeometryInstanceAttribute[r(1382)](c),distanceDisplayCondition:o[r(s._0x40e5e2)]}})}}register$4(_0x3a2b68(1129),PolylineVolumeCombine);class CorridorCombine extends BasePolyCombine{_conversionStyle(e){return CorridorStyleConver[_0x3a2b68(1304)](e)}[_0x3a2b68(1338)](e,t){return CorridorStyleConver[_0x3a2b68(1909)](e,t)}_createGeometryInstanceItem(e,t,i){const s={_0x15faf5:1941,_0x27840d:3559,_0x17697e:2694,_0x5ade16:2229,_0x205b53:3286},r=_0x3a2b68,o=CorridorStyleConver.toCesiumVal({...this[r(s._0x15faf5)].style,...i.style});o.vertexFormat=o.vertexFormat||e.vertexFormat;let c=this[r(4194)](o);t&&o.outlineColor&&(c=o[r(s._0x27840d)]),c.alpha!==1&&(this.translucent=!![]),i[r(s._0x17697e)]=LngLatArray.toCartesians(i.positions),o.positions=i.positions;const _=t?Cesium__namespace.CorridorOutlineGeometry:Cesium__namespace[r(s._0x5ade16)];return new Cesium__namespace[r(s._0x205b53)]({geometry:new _(o),attributes:{color:Cesium__namespace.ColorGeometryInstanceAttribute.fromColor(c),distanceDisplayCondition:o.distanceDisplayCondition}})}}register$4("corridorC",CorridorCombine);class WallCombine extends BasePolyCombine{_conversionStyle(e){return WallStyleConver.toCesiumVal(e)}_style2Json(e,t){return WallStyleConver[_0x3a2b68({_0x5cd2dc:1909}._0x5cd2dc)](e,t)}_createGeometryInstanceItem(e,t,i){const s={_0x5c2377:3980},r={_0x517f44:2532,_0x49a9d1:1754,_0x3ff368:1882},o=_0x3a2b68;var c;const _=WallStyleConver.toCesiumVal({...this.options.style,...i.style});_[o(s._0x5c2377)]=_.vertexFormat||e[o(3980)];let l=this[o(4194)](_);t&&_.outlineColor&&(l=_.outlineColor),l.alpha!==1&&(this.translucent=!![]);const d=[];let f=[];const g=i.positions;let b=new Array(g),C=new Array(g);i[o(2694)].forEach(function(L,E){const M=o,D=LngLatPoint.parse(L);if(!D||!D[M(r._0x517f44)]())return;d[M(1754)](D),f[M(r._0x49a9d1)](D.toCartesian());const R=d[E].alt;b[E]=R,C[E]=R+Number(_[M(r._0x3ff368)]||100)}),_[o(4121)]&&((c=f)===null||c===void 0?void 0:c.length)>0&&(f=f.concat(f[0]),b=b.concat(b[0]),C=C.concat(C[0]));const P=t?Cesium__namespace.WallOutlineGeometry:Cesium__namespace.WallGeometry;return new Cesium__namespace[o(3286)]({geometry:new P({..._,positions:f,maximumHeights:C,minimumHeights:b}),attributes:{color:Cesium__namespace.ColorGeometryInstanceAttribute[o(1382)](l),distanceDisplayCondition:_.distanceDisplayCondition}})}}register$4("wallC",WallCombine);class PolygonCombine extends BasePolyCombine{[_0x3a2b68(3931)](e){return PolygonStyleConver.toCesiumVal(e)}_style2Json(e,t){return PolygonStyleConver[_0x3a2b68(1909)](e,t)}_createGeometryInstanceItem(e,t,i){const s={_0x379231:1304,_0xc536fa:3980,_0x5aabc3:3559,_0x4fa6b4:2694,_0x597c6c:3286},r=_0x3a2b68,o=PolygonStyleConver[r(s._0x379231)]({...this.options.style,...i.style});o[r(s._0xc536fa)]=o.vertexFormat||e.vertexFormat;let c=this._getColorByColorMaterial(o);t&&o[r(s._0x5aabc3)]&&(c=o.outlineColor),c[r(838)]!==1&&(this.translucent=!![]);let _,l;i.positions.length>0&&Array.isArray(i.positions[0])&&i.positions[0].length>0&&Array.isArray(i.positions[0][0])&&isNumber(i[r(s._0x4fa6b4)][0][0][0])?(_=getPolygonHierarchy(i[r(2694)]),l=_.positions):(l=i.positions=LngLatArray.toCartesians(i.positions),_=new Cesium__namespace[r(2004)](l)),i._hierarchy=_,o.polygonHierarchy=_;const d=t?Cesium__namespace.PolygonOutlineGeometry:Cesium__namespace[r(3618)];return new Cesium__namespace[r(s._0x597c6c)]({geometry:new d(o),attributes:{color:Cesium__namespace.ColorGeometryInstanceAttribute.fromColor(c),distanceDisplayCondition:o.distanceDisplayCondition}})}[_0x3a2b68(2492)](e){if(e._hierarchy)return getHierarchyVal(e._hierarchy);if(e.positions)return getHierarchyVal(LngLatArray.toCartesians(e.positions))}updateHeight(e){var t;const s=((t=this.style)===null||t===void 0?void 0:t.height)||0;for(let r=0,o=this.primitiveCollection.length;r<o;r++){const c=this.primitiveCollection.get(r),_=(6378137+e)/(6378137+s),l=Cesium__namespace.Matrix4.fromScale(new Cesium__namespace.Cartesian3(_,_,_));c.modelMatrix=l}}_getGeoJsonGeometry(e,t){const i=_0x3a2b68;return{type:"Polygon",coordinates:[LngLatArray.toArray(e[i(2694)],t==null?void 0:t.noAlt)]}}}register$4(_0x3a2b68(3372),PolygonCombine),register$4(_0x3a2b68(3964),PolygonCombine);class WaterCombine extends PolygonCombine{[_0x3a2b68(2679)](e){const t={_0x4df77f:3931,_0x27a717:3248,_0x514cce:2608,_0x57bda8:4208,_0x332974:3225,_0x5269d3:735,_0x3debb8:747,_0x27ca6d:1268,_0x154a8e:2303,_0x4b32f5:2465},i=_0x3a2b68;if(!this.show)return;const s=this[i(t._0x4df77f)](e);e[i(t._0x27a717)]=e.opacity??.8;const r={geometryInstances:this._createGeometryInstance(s),appearance:new Cesium__namespace[i(t._0x514cce)]({aboveGround:![],material:new Cesium__namespace.Material({fabric:{type:"Water",uniforms:{specularMap:s.specularMap||Cesium__namespace[i(4208)].DefaultImageId,normalMap:s.normalMap||Cesium__namespace[i(t._0x57bda8)].DefaultImageId,frequency:s.frequency||8e3,animationSpeed:s.animationSpeed||.03,amplitude:s.amplitude||5,specularIntensity:e[i(t._0x332974)]||.8,baseWaterColor:getCesiumColor(e.baseWaterColor||i(t._0x5269d3))[i(t._0x3debb8)](e.opacity),blendColor:getCesiumColor(e[i(3703)]||"#123e59").withAlpha(e.opacity)}}}),fragmentShaderSource:WaterFS,translucent:e[i(3248)]!==1}),show:this.show};if(e[i(3542)]?(r.classificationType=e[i(t._0x27ca6d)]??Cesium__namespace.ClassificationType.TERRAIN,this._primitive=this.primitiveCollection.add(new Cesium__namespace[i(t._0x154a8e)](r))):this._primitive=this[i(756)][i(3674)](new Cesium__namespace.Primitive(r)),this._primitive_outline&&(this.primitiveCollection.remove(this._primitive_outline),delete this._primitive_outline),e.outline){const o=this._getOutlineStyle(e);this[i(3968)]=this[i(t._0x4b32f5)](o)}}}register$4("waterCombine",WaterCombine),register$4("waterC",WaterCombine);class RectangleCombine extends BasePolyCombine{_conversionStyle(e){return RectangleStyleConver[_0x3a2b68(1304)](e)}_style2Json(e,t){return RectangleStyleConver[_0x3a2b68(1909)](e,t)}_createGeometryInstanceItem(e,t,i){const s={_0x3c6da9:2249,_0x5d0bb5:1983,_0x269d38:3417,_0x12518a:1382},r=_0x3a2b68,o=RectangleStyleConver.toCesiumVal({...this.options.style,...i.style});o.vertexFormat=o.vertexFormat||e.vertexFormat;let c=this._getColorByColorMaterial(o);t&&o.outlineColor&&(c=o.outlineColor),c.alpha!==1&&(this[r(3943)]=!![]);const _=i.positions=LngLatArray[r(s._0x3c6da9)](i.positions);o.rectangle=Cesium__namespace.Rectangle.fromCartesianArray(_),Cesium__namespace.defined(o.rectangle)&&(Cesium__namespace.defined(this._rectangle)?this._rectangle=Cesium__namespace[r(s._0x5d0bb5)].union(o.rectangle,this._rectangle):this[r(s._0x269d38)]=o.rectangle);const l=t?Cesium__namespace.RectangleOutlineGeometry:Cesium__namespace.RectangleGeometry;return new Cesium__namespace[r(3286)]({geometry:new l(o),attributes:{color:Cesium__namespace.ColorGeometryInstanceAttribute[r(s._0x12518a)](c),distanceDisplayCondition:o.distanceDisplayCondition}})}}register$4("rectangleC",RectangleCombine);class EditDivGraphic extends EditBase{get container(){return this._graphic._container}activate(){const e={_0x22a532:4090,_0x57cd82:1844,_0x3d9ce1:1854,_0x50f1cf:698,_0xf80091:1844,_0x16dcc4:698,_0x505116:3929,_0x55978d:1575,_0x4836bf:1755,_0x53f89a:4227},t={_0x52791a:1109},i=_0x3a2b68;return this[i(e._0x22a532)]?this:(this[i(4090)]=!![],this.container[i(e._0x57cd82)]("mousemove",this[i(e._0x3d9ce1)][i(e._0x50f1cf)](this)),this.container[i(e._0xf80091)]("mouseout",this[i(3879)][i(e._0x16dcc4)](this)),this[i(527)].addEventListener(i(e._0x505116),this._onMarkerDragStart[i(e._0x50f1cf)](this)),addClass(this.container,this._graphic[i(2748)].editClassName||"mars3d-divGraphic-edit"),this[i(4227)]._draw_tooltip=this[i(1575)].getLangText("_拖动对象后")+"<br/>"+this[i(e._0x55978d)].getLangText("_修改位置")+"<br/>"+this._map[i(3600)]("_更多功能请右击"),this._graphic.onDragEnd=(s,r,o)=>{const c=i;this._graphic.position=r,this[c(t._0x52791a)](EventType.editMovePoint,{mouseEvent:o,cartesian:r})},this[i(e._0x4836bf)]=this._graphic._contextmenuConfig,this[i(4227)].bindContextMenu(this.getDraggerContextMenu(this[i(e._0x53f89a)])),this.fire(EventType.editStart),this)}disable(){const e={_0x29608c:2642,_0x4dffd2:527,_0x3b4c9f:2748,_0x3312e8:1109,_0x7b6ce1:2585},t=_0x3a2b68;return this._enabled?(this._enabled=![],this.stopMoveMatrix(),delete this._graphic.onDragEnd,delete this._graphic._draw_tooltip,this[t(4227)].unbindContextMenu(),this._last_contextmenuConfig&&(this._graphic[t(e._0x29608c)]=this._last_contextmenuConfig,delete this._last_contextmenuConfig),this[t(527)].removeEventListener("mousemove",this._onMouseMove),this[t(e._0x4dffd2)].removeEventListener("mouseout",this._onMouseOut),this.container.removeEventListener("mousedown",this._onMarkerDragStart),this.unbindEvent(),removeClass(this.container,this._graphic[t(e._0x3b4c9f)].editClassName||t(1811)),this[t(e._0x3312e8)](EventType[t(e._0x7b6ce1)]),this):this}unbindEvent(){const e={_0x21ca68:1575},t=_0x3a2b68;this._mouseMoveHandle&&document.removeEventListener("mousemove",this._mouseMoveHandle,![]),this._mouseUpHandle&&document.removeEventListener("mouseup",this[t(852)],![]),this[t(e._0x21ca68)].setCursor(![])}_onMouseMove(e){if(this._graphic._draw_tooltip){const t=this._graphic._getWindowPosition(e);this._map.openSmallTooltip(t,this._graphic._draw_tooltip)}}[_0x3a2b68(3879)](e){this[_0x3a2b68(1575)].closeSmallTooltip()}_onMarkerDragStart(e){const t={_0x596d20:4259},i=_0x3a2b68;!this[i(4090)]||e.which!==1||(e.preventDefault(),this._map[i(t._0x596d20)](!![]),this.fire(EventType.editMouseDown,{mouseEvent:e}),this.unbindEvent(),!this._mouseMoveHandle&&(this._mouseMoveHandle=s=>{this._onMarkerDrag(s)},this._mouseUpHandle=s=>{this._onMarkerDragEnd(s)}),document.addEventListener("mousemove",this._mouseMoveHandle,![]),document.addEventListener("mouseup",this._mouseUpHandle,![]))}[_0x3a2b68(3843)](e){const t={_0x1a1b47:1575,_0x57900d:4227},i=_0x3a2b68;if(!this._enabled)return;e.preventDefault();const s=this._graphic[i(1662)](e),r=getCurrentMousePosition(this[i(t._0x1a1b47)].scene,s);r&&(this[i(t._0x57900d)].position=r,this[i(1575)].openSmallTooltip(s,this._map.getLangText("_释放后完成修改")),this.fire(EventType.editMouseMove,{mouseEvent:e,cartesian:r,windowPosition:s}))}_onMarkerDragEnd(e){const t={_0x26c20d:3985,_0x34bb36:2780,_0x4c1320:1937,_0x3f2df7:1109,_0x8a684b:4227},i=_0x3a2b68;if(!this._enabled)return;e[i(t._0x26c20d)](),this[i(t._0x34bb36)](),this._map[i(t._0x4c1320)]();const s=this[i(4227)]._getWindowPosition(e);this[i(t._0x3f2df7)](EventType[i(3314)],{mouseEvent:e,cartesian:this[i(t._0x8a684b)].position,windowPosition:s})}_updateMatrixMovePosition(e){!this._matrixMove||!e.position||(this._matrixMove.position=e.position)}}const isFirefox=window[_0x3a2b68(3411)].userAgent.toLowerCase()[_0x3a2b68(2051)]("firefox")>=0;class DivGraphic extends BaseGraphic{constructor(e={}){const t={_0x1ed8b2:638,_0xc59a11:2169,_0x68fcab:2748},i=_0x3a2b68;super(e),this[i(611)]=this.options.hasEdit??this.style.hasEdit??!![],this._depthTest=this.options[i(474)]??this[i(2748)].depthTest??!![],this[i(t._0x1ed8b2)]=this.options[i(4005)]??this.style.hasCache??!![],this._hasZIndex=this[i(1941)].hasZIndex??this[i(2748)].hasZIndex??![],this._css_transform_origin=this.style.css_transform_origin??"left bottom 0",this[i(1941)].frameRate=this.options.frameRate??1,this.options.testPoint=merge({name:i(777),color:"#ff0000",pixelSize:8,distanceDisplayCondition:this.style[i(t._0xc59a11)],scaleByDistance:this[i(t._0x68fcab)].scaleByDistance,clampToGround:this.style.clampToGround,heightReference:this[i(2748)].heightReference},this.options[i(2870)]),e.position&&(this.position=e[i(4076)])}get position(){return this._position}set position(e){const t={_0xab987f:738,_0x2ba292:3601},i=_0x3a2b68;var s;if(this._point=LngLatPoint[i(t._0xab987f)](e),this._point){let r=this.style.setHeight;Cesium__namespace[i(407)](r)&&(isString(r)&&(r=Number(template(r,this.attr,!![])),isNaN(r)&&(r=0)),this._point.alt=r);const o=this.getAddHeight();o!==0&&(this._point.alt=this[i(t._0x2ba292)].alt+o)}this._position=(s=this._point)===null||s===void 0?void 0:s[i(1378)](),this.debuggerPointEntity&&(this.debuggerPointEntity.position=this._position),this._updateDivPosition(),this.fire(EventType.updatePosition,{position:this._position})}get point(){return this._point}get coordinate(){return this[_0x3a2b68(2632)]()}get[_0x3a2b68(3747)](){return this._position}get[_0x3a2b68(4136)](){return this._position_show}get testPoint(){return this.debuggerPointEntity!=null}set testPoint(e){const t={_0x2c4d10:2931,_0x3c1a67:2275,_0x256e70:3674},i=_0x3a2b68;this[i(2275)]&&(this._layer.dataSource[i(t._0x2c4d10)].remove(this.debuggerPointEntity),delete this[i(t._0x3c1a67)]),e&&(this[i(t._0x3c1a67)]=this[i(4053)].dataSource.entities[i(t._0x256e70)]({name:this.options.testPoint[i(3307)],position:this.position,point:PointStyleConver.toCesiumVal(this.options[i(2870)])}))}get pointerEvents(){const e=_0x3a2b68;return this.options[e(1022)]}set pointerEvents(e){this.options.pointerEvents=e,this._updatePointerEvents(e)}get isEditing(){return this._enabledEdit}get EditClass(){return EditDivGraphic}get depthTest(){return this[_0x3a2b68({_0x2589cb:1484}._0x2589cb)]}set depthTest(e){const t=_0x3a2b68;this._depthTest=e,this[t(2493)]=null}get[_0x3a2b68(3542)](){const e={_0x5073a7:3542},t=_0x3a2b68;return this[t(2748)][t(e._0x5073a7)]}set[_0x3a2b68(3542)](e){const t=_0x3a2b68;this[t(2748)].clampToGround=e,this._calculateAsynSurfacePosition()}get parentContainer(){const e={_0x159295:1941},t=_0x3a2b68;return this.options.parentContainer?this[t(e._0x159295)][t(3490)]:this._layer.container}get[_0x3a2b68(1396)](){var e;return(e=this.parentContainer)===null||e===void 0?void 0:e.id}get container(){return this._container}get[_0x3a2b68(2543)](){return this._container.id}get html(){return this[_0x3a2b68({_0x4484d6:2094}._0x4484d6)].innerHTML}set html(e){const t={_0x1a6343:4389,_0x561108:2748,_0x28719a:3208,_0x44b417:2094,_0x138910:2094,_0x44b2ae:400,_0x56515f:4209},i=_0x3a2b68;if(this.style.html=e,!(!this._container||!e)){if(typeof e===i(1782)&&(e=e(this.eventTarget)),e instanceof Promise){e[i(t._0x1a6343)](r=>{this.options&&(this._camera_cache=null,this.html=r)});return}if(isString(e)){if(this.attr instanceof Promise){this.attr.then(r=>{this.options&&(this._camera_cache=null,this.attr=r,this.html=e)});return}this[i(t._0x561108)][i(2612)]&&(e=this.style.template.replace("{content}",e)),this._container[i(416)]=template(e,this[i(t._0x28719a)],this.style.templateEmptyStr??!![]),this.fire(EventType.load)}else(e instanceof Element||e instanceof HTMLDivElement)&&(empty(this[i(t._0x44b417)]),e[i(2748)].display!=="block"&&(e.style.display=i(1305)),this._container[i(688)](e),this.fire(EventType[i(432)]));if(this.style.className){var s;if(((s=this[i(2094)].children)===null||s===void 0?void 0:s.length)>0)for(let r=0,o=this[i(t._0x138910)].children[i(t._0x44b2ae)];r<o;r++){const c=this._container[i(3994)][r];addClass(c,this[i(2748)].className)}else addClass(this._container,this.style.className)}this[i(t._0x56515f)]&&this[i(4209)](),this._camera_cache=null}}get divWidth(){var e;return(e=this._container)===null||e===void 0?void 0:e.offsetWidth}get divHeight(){const e={_0x1ebe2e:2094},t=_0x3a2b68;var i;return(i=this[t(e._0x1ebe2e)])===null||i===void 0?void 0:i.offsetHeight}get eventTarget(){return this}_showHook(e){const t=_0x3a2b68;this._container&&(e?(this._camera_cache=null,this._container.style.display=t(1305)):this[t(2222)](),this[t(2275)]&&(this.debuggerPointEntity.show=e))}[_0x3a2b68(2944)](e){const t=_0x3a2b68;this[t(2094)]&&(e?this._container.style[t(2031)]="all":this._container.style["pointer-events"]="none")}setOpacity(e){const t=_0x3a2b68;this[t(2748)].globalAlpha=e,this[t(2094)]&&(this[t(2094)].style[t(3248)]=e)}hasBindEvent(){const e={_0x48ab22:1643,_0x293426:407},t=_0x3a2b68;var i,s,r;return this[t(1643)](EventType.click)?!![]:this.listens(EventType.mouseOver)?!![]:this[t(e._0x48ab22)](EventType.mouseOut)?!![]:this.hasPopup(![])?!![]:this.hasTooltip(![])?!![]:Cesium__namespace[t(e._0x293426)](this.options.pointerEvents)?this.options.pointerEvents:(i=this._layer)!==null&&i!==void 0&&i[t(1643)](EventType.click)?!![]:(s=this[t(4053)])!==null&&s!==void 0&&s.listens(EventType.mouseOver)?!![]:(r=this._layer)!==null&&r!==void 0&&r.listens(EventType[t(2987)])?!![]:this.hasPopup(!![])?!![]:this.hasTooltip(!![])?!![]:![]}_onEventHook(){this._updatePointerEvents(this.hasBindEvent())}_mountedHook(){const e={_0x4a4138:1304,_0xbed74e:2748,_0x20ef58:3206,_0x50372e:749},t=_0x3a2b68;DivGraphicStyleConver[t(e._0x4a4138)](this[t(e._0xbed74e)],this),this._container=create$3(t(e._0x20ef58),"mars3d-divGraphic ",this[t(3490)]),this[t(2094)].id=this.id,this._container.style.opacity=this.style[t(e._0x50372e)],this.style.html&&(this.html=this.style.html),this._updatePointerEvents(this.hasBindEvent())}[_0x3a2b68(2679)](e){const t={_0x1bb790:4053,_0xa2ea27:527,_0x1b6bd7:383,_0x271e0c:2094,_0xcdbb4e:1947,_0x499b33:1708,_0x190c81:2318},i=_0x3a2b68;this[i(t._0x1bb790)][i(t._0xa2ea27)].appendChild(this._container),this.hide(),this._container.addEventListener(i(t._0x1b6bd7),this._container_onClickHandler[i(698)](this)),this[i(t._0x271e0c)].addEventListener(i(3929),this[i(t._0xcdbb4e)].bind(this)),this._container.addEventListener(i(1044),this._container_onMouseMoveHandler[i(698)](this)),this._container.addEventListener("mouseout",this._container_onMouseoutHandler.bind(this)),this[i(t._0x499b33)](),this.bindUpdateEvent(),this._map.on(EventType[i(t._0x190c81)],this._morphCompleteHandler,this)}_removedHook(){const e={_0x3d6b2b:1575,_0x39275f:2971,_0x17c465:3689,_0x59b6dc:383,_0x4c1e1c:1728,_0x407142:2094},t=_0x3a2b68;this.stopDraw(),this._map.off(EventType.morphComplete,this[t(1188)],this),this[t(e._0x3d6b2b)][t(e._0x39275f)](EventType[t(1062)],this[t(e._0x17c465)],this),this.testPoint=![],this[t(2094)].removeEventListener(t(e._0x59b6dc),this._container_onClickHandler),this._container.removeEventListener("mousedown",this._container_onMousedownHandler),this._container[t(1680)](t(1044),this._container_onMouseMoveHandler),this._container[t(1680)](t(e._0x4c1e1c),this._container_onMouseoutHandler),remove(this[t(e._0x407142)])}[_0x3a2b68(1188)](e){setTimeout(()=>{const t=_0x20dc;this.isAdded&&this[t(4072)]()},30)}_calculateAsynSurfacePosition(){const e={_0x4b8773:2978,_0x46c9cf:744,_0x572b43:1575,_0x174d0f:3689},t={_0x21efcd:3868},i=_0x3a2b68;this._camera_cache=null,this._hasAsynSurfacePosition=![];const s=this.position;s instanceof Cesium__namespace[i(e._0x4b8773)]&&(this.style.clampToGround||this.style.heightReference===Cesium__namespace.HeightReference.CLAMP_TO_GROUND||this.style.heightReference===Cesium__namespace.HeightReference.RELATIVE_TO_GROUND)&&(getSurfaceHeight(this[i(1575)][i(e._0x46c9cf)],s,this.options)[i(4389)](r=>{const o=i;this.isDestroy||(this[o(2748)][o(t._0x21efcd)]===Cesium__namespace.HeightReference.RELATIVE_TO_GROUND&&(r.point.alt+=r.height_original),this.position=r.point,this._hasAsynSurfacePosition=!![])}),this[i(e._0x572b43)].off(EventType.terrainChange,this._onTerrainChangeHandler,this),this._map.on(EventType.terrainChange,this[i(e._0x174d0f)],this))}_onTerrainChangeHandler(e){const t={_0xae08f1:1708},i=_0x3a2b68;this._map&&this[i(t._0xae08f1)]()}_updateStyleBaseHook(e){const t={_0x2a2a1e:1475,_0x4d9681:3601},i=_0x3a2b68;return e.html&&(this[i(3330)]=e.html),DivGraphicStyleConver.toCesiumVal(this.style,this),(Cesium__namespace.defined(e.setHeight)||Cesium__namespace.defined(e[i(t._0x2a2a1e)]))&&(this.position=this[i(t._0x4d9681)]),this._camera_cache=null,this._updateDivPosition(),this}updateDivPosition(){const e={_0x19fe02:2493,_0xc4c18c:3875},t=_0x3a2b68;return this[t(e._0x19fe02)]=null,this[t(e._0xc4c18c)](),this}[_0x3a2b68(3396)](e){const t={_0x545a6a:2015,_0x297912:3330},i=_0x3a2b68;this._map&&(this.style[i(t._0x545a6a)]&&this.style.html&&(this.html=this.style[i(t._0x297912)]),this._updateDivPosition(),this.fire(EventType.postRender,{container:this.container},![]),this.fireTarget&&this.fireTarget(EventType.postRender,{container:this.container},![]))}_updateDivPosition(){const e={_0x519a1c:442,_0xea899b:4233,_0x1351ff:1575,_0x246585:440,_0x5d3254:2493,_0xa9db50:2748,_0x1d5985:808,_0x515e79:2169,_0x439c80:3915,_0x36104f:1250,_0x2bdc4b:2094,_0x2ad7e2:2085,_0x558052:2014,_0x2a91ef:1408,_0x2fb154:1333,_0x30e3a5:1351,_0x3e9039:4150,_0x5c7c6e:1266,_0x414009:867},t=_0x3a2b68;var i;if(!this[t(e._0x519a1c)]||!this._map)return![];const s=this._map.scene,r=this._map[t(e._0xea899b)];let o=getPositionValue(this.position,(i=this[t(e._0x1351ff)])===null||i===void 0?void 0:i.clock.currentTime);if(!Cesium__namespace.defined(o))return this.hide(),![];if(this._hasCache){const M={x:o.x,y:o.y,z:o.z,p1:this._map.container.clientWidth,p2:this._map.container.clientHeight,p3:r[t(e._0x246585)].x,p4:r.positionWC.y,p5:r.positionWC.z,p6:r.heading,p7:r.pitch,p8:r[t(2341)]};if(this[t(2493)]&&M.x===this[t(2493)].x&&M.x===this._camera_cache.x&&M.y===this[t(2493)].y&&M.z===this._camera_cache.z&&M.p1===this[t(e._0x5d3254)].p1&&M.p2===this._camera_cache.p2&&M.p3===this._camera_cache.p3&&M.p4===this[t(2493)].p4&&M.p5===this[t(2493)].p5&&M.p6===this._camera_cache.p6&&M.p7===this._camera_cache.p7&&M.p8===this._camera_cache.p8)return!![];this._camera_cache=M}this._hasAsynSurfacePosition||(this.style[t(3542)]||this[t(e._0xa9db50)].heightReference===Cesium__namespace[t(e._0x1d5985)].CLAMP_TO_GROUND?o=getSurfacePosition(this._map.scene,o,this.options):this.style.heightReference===Cesium__namespace.HeightReference.RELATIVE_TO_GROUND&&(o=getSurfacePosition(this._map.scene,o,{...this.options,relativeHeight:!![]}))),this._position_show=o;const c=Cesium__namespace.SceneTransforms.wgs84ToWindowCoordinates(s,o),_=this[t(e._0x515e79)],l=this.scaleByDistance;let d=r.positionCartographic.height;if((this._hasZIndex||_||l)&&s.mode===Cesium__namespace[t(e._0x439c80)][t(e._0x36104f)]&&(d=Cesium__namespace.Cartesian3.distance(o,r[t(440)])),!c||_&&(_.near>d||_.far<d))return this._container[t(2748)].display==="block"&&this.hide(),![];if(this[t(474)]&&s[t(1640)]===Cesium__namespace.SceneMode.SCENE3D&&!new Cesium__namespace[t(1367)](s.globe[t(3404)],s.camera.positionWC)[t(3069)](o))return this[t(e._0x2bdc4b)][t(2748)][t(e._0x2ad7e2)]==="block"&&this.hide(),![];this._container.style[t(e._0x2ad7e2)]!=="block"&&(this._camera_cache=null,this[t(2094)][t(2748)].display="block");const f=this[t(2871)],g=this.divWidth;let b,C;switch(this.horizontalOrigin){case"CENTER":case Cesium__namespace[t(e._0x558052)][t(1333)]:b=c.x-g/2;break;case"RIGHT":case Cesium__namespace.HorizontalOrigin.RIGHT:b=c.x-g;break;case t(1408):case Cesium__namespace.HorizontalOrigin[t(e._0x2a91ef)]:default:b=c.x;break}switch(this.verticalOrigin){case"TOP":case Cesium__namespace.VerticalOrigin[t(2245)]:C=c.y;break;case t(1333):case Cesium__namespace.VerticalOrigin[t(e._0x2fb154)]:C=c.y-f/2;break;case"BOTTOM":case Cesium__namespace[t(e._0x30e3a5)][t(3795)]:default:C=c.y-f;break}this.style.anchor?(b+=this.style.anchor[0],C+=this.style.anchor[1]):(this[t(e._0xa9db50)][t(2771)]&&(b+=this.style.offsetX),this.style.offsetY&&(C+=this.style.offsetY));let P=1;l&&(d<=l.near?P=l.nearValue:d>l.near&&d<l.far?P=l.nearValue+(l[t(e._0x3e9039)]-l.nearValue)*(d-l.near)/(l[t(1550)]-l.near):P=l.farValue);const S="matrix("+P+",0,0,"+P+","+b+","+C+")",L=this._css_transform_origin;let E=this.options[t(e._0x5c7c6e)]||t(e._0x414009);this[t(3873)]&&(E=Math.round(9999999-d),E<=0&&(E=9999999)),merge(this._container[t(2748)],{transform:S,"transform-origin":L,"-ms-transform":S,"-ms-transform-origin":L,"-webkit-transform":S,"-webkit-transform-origin":L,"-moz-transform":S,"-moz-transform-origin":L,"-o-transform":S,"-o-transform-origin":L,"z-index":E}),this[t(1109)](EventType.change,{position:o,windowPosition:c,distance:d,x:b,y:C,height:f,width:g,scale:P},!![])}hide(){const e={_0x4af75d:2085},t=_0x3a2b68;this._container.style[t(e._0x4af75d)]=t(3662),this._camera_cache=null}[_0x3a2b68(3089)](e){return{type:_0x3a2b68({_0x5c1db7:1910}._0x5c1db7),coordinates:this.getCoordinate(e==null?void 0:e.noAlt)}}[_0x3a2b68(1976)](e,t){const i={_0x2587f9:4332,_0x52501a:4379,_0x4021eb:1558,_0x9e369:2452,_0x4ae491:1941,_0x10a67a:4076,_0x3e5d06:3954,_0x1af4b8:557,_0x25eff3:467,_0x2f2f63:738,_0x138bfd:1187,_0x55f798:4218},s=_0x3a2b68;var r,o,c,_;if(this[s(i._0x2587f9)])this.property!==this.position&&(this.position=this.property);else{const g=new Cesium__namespace.SampledPositionProperty(this.options[s(609)],this.options.numberOfDerivatives);g.forwardExtrapolationType=this.options.forwardExtrapolationType??Cesium__namespace[s(i._0x52501a)].HOLD,g[s(1558)]=this.options[s(i._0x4021eb)]??Cesium__namespace[s(4379)][s(i._0x9e369)],!this[s(i._0x4ae491)].orientation&&(this[s(i._0x4ae491)].orientation=new Cesium__namespace.VelocityOrientationProperty(g),this._entity&&(this._entity.orientation=this.getOrientation())),this[s(4332)]=g,this[s(i._0x10a67a)]=g,this._maxCacheCount=this[s(i._0x4ae491)].maxCacheCount??50}this[s(i._0x3e5d06)]();const l=((r=this._map)===null||r===void 0||(o=r.clock)===null||o===void 0?void 0:o[s(545)])||Cesium__namespace[s(i._0x1af4b8)][s(i._0x25eff3)]();t?isNumber(t)?t=Cesium__namespace.JulianDate[s(1482)](l,t,new Cesium__namespace.JulianDate):isString(t)?t.indexOf("Z")===-1?t=Cesium__namespace.JulianDate.fromDate(new Date(t)):t=Cesium__namespace[s(i._0x1af4b8)].fromIso8601(t):t instanceof Date&&(t=Cesium__namespace.JulianDate.fromDate(t)):t=l,e=LngLatPoint[s(i._0x2f2f63)](e);const d=(c=this[s(3927)])===null||c===void 0||(_=c._property)===null||_===void 0?void 0:_._times;if(this[s(i._0x4ae491)].autoMiddleDynamicPosition&&(d==null?void 0:d.length)>0&&this._position){const g=d[d[s(400)]-1];if(Cesium__namespace.JulianDate.secondsDifference(l,g)>.3){let b=this[s(i._0x138bfd)];this._lastDynamicPosition&&(b=getOnLinePointByLen(this[s(i._0x55f798)],this[s(1187)],.01,!![])),b=setPositionsHeight(b,e.alt||0),this._sampledPositionProperty.addSample(l,b)}}const f=e.toCartesian();return this.position.addSample(t,f),this}_removeDynamicPosition(){const e={_0x4f8020:2566,_0x1bc1e1:400,_0x4eee93:978},t=_0x3a2b68;var i,s;if(this._maxCacheCount<1)return;const r=(i=this.property)===null||i===void 0||(s=i._property)===null||s===void 0?void 0:s[t(e._0x4f8020)];if(!r||r[t(e._0x1bc1e1)]===0)return;const o=r.length-this[t(e._0x4eee93)]-1;o>0&&this[t(4332)].removeSamples(new Cesium__namespace[t(632)]({start:r[0],stop:r[o]}))}[_0x3a2b68(2632)](e){const t=_0x3a2b68;return this[t(2879)]?this.point[t(4205)](e):[]}openHighlight(e,t=!![]){const i={_0x459e39:2359,_0x4defe8:4053,_0x391af4:3994,_0x460791:2094,_0x13bdda:3994},s=_0x3a2b68;var r;t&&(this._map[s(2962)](),this[s(1575)][s(i._0x459e39)]=this);const o=e||this[s(3017)]||((r=this[s(i._0x4defe8)])===null||r===void 0?void 0:r._highlightOptions);if(o&&o.className){for(let c=0,_=this._container[s(i._0x391af4)].length;c<_;c++){const l=this[s(i._0x460791)][s(i._0x13bdda)][c];addClass(l,o.className)}this._highlightOptions=o,this.fire(EventType.highlightOpen,{},!![])}}closeHighlight(){const e={_0x7b7b48:3017},t=_0x3a2b68;var i;if(!this.isAdded||((i=this._map)===null||i===void 0?void 0:i[t(2359)])!==this)return;this._map._clearLastHighlight();const s=this[t(e._0x7b7b48)];if(s&&s[t(997)]){for(let r=0,o=this[t(2094)].children.length;r<o;r++){const c=this[t(2094)].children[r];removeClass(c,s.className)}this.fire(EventType.highlightClose,{},!![])}}_getWindowPosition(e){const t={_0xb1d70:527,_0xac83f2:2689},i=_0x3a2b68;if(isFirefox){const s=this._map[i(t._0xb1d70)].getBoundingClientRect();return new Cesium__namespace.Cartesian2(e[i(t._0xac83f2)]-s.left,e.clientY-s.top)}return new Cesium__namespace.Cartesian2(e.layerX,e.layerY)}_getEventTarget(e){const t={_0x439f35:4053},i=_0x3a2b68;e.stopPropagation&&e.stopPropagation();const s=this._getWindowPosition(e),r={mouseEvent:e,cartesian:this.position,windowPosition:s,sourceTarget:this,graphic:this,layer:this._layer};return this[i(t._0x439f35)]&&(this[i(4053)][i(4397)]||this._layer._hasEdit&&this.hasEdit)&&(r.cartesian=getCurrentMousePosition(this._map.scene,s)),r}_container_onClickHandler(e){const t={_0x7131e7:4076},i=_0x3a2b68;if(this._enabledEdit)return;const s=this._getEventTarget(e);s[i(t._0x7131e7)]=s.windowPosition,this.fire(EventType.click,s,!![])}_container_onMousedownHandler(e){const t=_0x3a2b68;if(e.button!==2)return;const i=this._getEventTarget(e);i[t(4076)]=i.windowPosition,this.fire(EventType.rightClick,i,!![])}_container_onMouseMoveHandler(e){const t={_0x2b91c1:1575},i=_0x3a2b68;if(this._enabledEdit)return;this._map.mouseEvent.clearMoveTargetDelay();const s=this._getEventTarget(e);s.endPosition=s.windowPosition,this[i(t._0x2b91c1)].fire(EventType.mouseMove,s),this[i(1575)].fire(EventType.mouseMoveTarget,s),!this[i(551)]&&this.fire(EventType.mouseOver,s,!![]),this._hasMouseOver=!![]}_container_onMouseoutHandler(e){const t={_0x292de5:551},i=_0x3a2b68;if(this._enabledEdit)return;this[i(t._0x292de5)]=![];const s=this._getEventTarget(e);this.fire(EventType.mouseOut,s,!![])}autoSurfaceHeight(e){const t={_0x41b99f:4076,_0x2c2edf:4389},i=_0x3a2b68;return getSurfaceHeight(this[i(1575)][i(744)],this[i(t._0x41b99f)],e??this.options)[i(t._0x2c2edf)](s=>{s[i(4076)]&&(this.position=s.position)})}_style2Json(e,t){return DivGraphicStyleConver.toJSON(e,t,!![])}getRectangle(e){const t=_0x3a2b68,i=this[t(4136)];return i?getRectangle([i],e==null?void 0:e.isFormat):void 0}startDraw(e){const t={_0x48c881:1803},i=_0x3a2b68;if(this._enabledDraw)return this;if(this[i(1832)]=!![],e&&this[i(t._0x48c881)](e),!this._map)throw new Error("绘制时_map不能为空,请将对象添加到图层，并且图层已添加到Map");this._map._setEditCursor(!![]),this.enableControl(![]),this[i(2741)](),this.fire(EventType.drawStart,{drawtype:this.type,graphic:this},!![])}stopDraw(){const e={_0x27d6a7:2880,_0x1affb7:1512},t=_0x3a2b68;var i,s,r;if(!this._enabledDraw)return this;this[t(e._0x27d6a7)](),this._map[t(621)](![]),this.enableControl(!![]),this._map.closeSmallTooltip(),this._enabledDraw=![],this.fire(EventType.drawCreated,{drawtype:this.type,graphic:this},!![]),(i=this.options)!==null&&i!==void 0&&i[t(e._0x1affb7)]&&this.options.success(this),(s=this.options)!==null&&s!==void 0&&(r=s._promise)!==null&&r!==void 0&&r.resolve&&this[t(1941)]._promise.resolve(this)}_startDrawHook(){const e=_0x3a2b68;this._updatePointerEvents(![]),this[e(1575)].on(EventType[e(1840)],this._onMouseMoveHandler_point,this),this._map.on(EventType.click,this._onClickHandler_point,this)}_stopDrawHook(){const e={_0x35dbcc:383,_0x392c43:2944},t=_0x3a2b68;this[t(1575)].off(EventType[t(1840)],this[t(3016)],this),this._map.off(EventType[t(e._0x35dbcc)],this._onClickHandler_point,this),this[t(e._0x392c43)](this.hasBindEvent())}_onMouseMoveHandler_point(e){const t={_0x559b30:540},i=_0x3a2b68,s=e.cartesian;s&&(this.position=s),this._map.openSmallTooltip(e[i(1127)],this[i(t._0x559b30)]||this._map[i(3600)]("_单击完成绘制")),this.fire(EventType.drawMouseMove,{...e,drawtype:this[i(1603)],graphic:this},!![])}[_0x3a2b68(3816)](e){const t={_0x12d06a:3628},i=_0x3a2b68,s=e[i(t._0x12d06a)];s&&(this.position=s),this.stopDraw()}_setPositionsToCallback(){}_cancelPositionsCallback(){}endDraw(){const e={_0x45e624:1832},t=_0x3a2b68;if(!this[t(e._0x45e624)])return this;this[t(2206)][t(400)]<this._minPointNum||(this.updateAttrForDrawing(![]),this.stopDraw())}[_0x3a2b68(2e3)](e){}[_0x3a2b68(4356)](e){const t={_0x2eaaa0:1374},i=_0x3a2b68;this._map[i(t._0x2eaaa0)].enabledMoveTarget=e,this._map.popup&&(this[i(1575)].popup[i(3174)]=e),this._map.tooltip&&(this._map[i(951)].enabled=e)}[_0x3a2b68(907)](){const e={_0x4080eb:1669},t=_0x3a2b68;if(this._enabledEdit)return this;if(this._enabledEdit=!![],!this[t(1575)])throw new Error("编辑时_map不能为空,请将对象添加到图层，并且图层已添加到Map");this._draw_tooltip=this._map[t(3600)]("_释放后完成修改"),this.enableControl(![]),!this.editing&&(this.editing=new this.EditClass(this)),this[t(770)][t(e._0x4080eb)]&&this.editing.activate()}stopEditing(){const e={_0xaadafc:2279},t=_0x3a2b68;var i;if(!this._enabledEdit)return this;(i=this.editing)!==null&&i!==void 0&&i.disable&&this.editing[t(e._0xaadafc)](),this.enableControl(!![]),this._map.closeSmallTooltip(),this._enabledEdit=![]}}register$4("div",DivGraphic,!![]);const DEF_STYLE$c={font_size:15,font_family:"楷体",color:_0x3a2b68(4231),boderColor:_0x3a2b68(3470),horizontalOrigin:Cesium__namespace.HorizontalOrigin.CENTER,verticalOrigin:Cesium__namespace.VerticalOrigin[_0x3a2b68(1333)]};class DivBoderLabel extends DivGraphic{constructor(e={}){const t={_0x4e2aec:3330,_0x5c38dc:1076},i=_0x3a2b68;e.style={...DEF_STYLE$c,...e.style},e.style[i(t._0x4e2aec)]=getHtmlByStyle$2(e.style,e.attr),super(e);const s=e.style.font_size,r=e[i(2748)].width||getStrLength(e.style.text)*s*.6,o=e.style.height||s*2;this[i(4010)]=r,this[i(t._0x5c38dc)]=o}get divWidth(){return this._divWidth}get divHeight(){return this[_0x3a2b68(1076)]}_updateStyleBaseHook(e){const t={_0x169599:407,_0x5ecc63:1855,_0x34f3ea:407,_0x3f6d00:3208},i=_0x3a2b68;return(Cesium__namespace[i(t._0x169599)](e.color)||Cesium__namespace[i(407)](e[i(t._0x5ecc63)])||Cesium__namespace[i(t._0x34f3ea)](e.font_size)||Cesium__namespace[i(t._0x169599)](e[i(3338)])||Cesium__namespace[i(407)](e.text))&&(this.html=getHtmlByStyle$2(this.style,this[i(t._0x3f6d00)])),super._updateStyleBaseHook(e),this}}register$4("divBoderLabel",DivBoderLabel,!![]);function getHtmlByStyle$2(n,e){const t={_0x12646b:1420},i=_0x3a2b68,s=n.color,r=n.boderColor,o=Cesium__namespace.Color.fromCssColorString(r).withAlpha(.5).toCssColorString(),c=n.font_size,_=n.width||getStrLength(n.text)*c*.6,l=n.height||c*2;return`
  <div class="mars3d-divBoderLabel" style="
  --text-font-size: `+c+i(t._0x12646b)+_+`px;
  --clip-width-1: `+(_+c)+`px;
  --clip-width-2: `+(_+c-2)+`px;
  --boder-height: `+l+`px;
  --clip-height-1: `+(l+10)+`px;
  --clip-height-2: `+(l+8)+`px;
  --text-color: `+s+`;
  --border-color: `+r+`;
  --box-shadow-color: `+o+`;">
     <div class="mars3d-divBoderLabel-boder">
       <span class="mars3d-divBoderLabel-text" style="font-family:`+n.font_family+';">'+template(n[i(3640)],e,n.templateEmptyStr??!![])+`</span>
     </div>
  </div> `}const DEF_STYLE$b={color:"#f33349",horizontalOrigin:Cesium__namespace.HorizontalOrigin.CENTER,verticalOrigin:Cesium__namespace.VerticalOrigin.CENTER};class DivLightPoint extends DivGraphic{constructor(e={}){const t={_0x5bca0b:2748},i=_0x3a2b68;e[i(2748)]={...DEF_STYLE$b,...e.style},e.style.html=getHtmlByStyle$1(e[i(t._0x5bca0b)],e[i(3208)]),super(e)}_updateStyleBaseHook(e){const t={_0x173e8c:2748,_0x38ce1c:3208},i=_0x3a2b68;return(Cesium__namespace.defined(e.color)||Cesium__namespace.defined(e.size)||Cesium__namespace.defined(e[i(3203)]))&&(this.html=getHtmlByStyle$1(this[i(t._0x173e8c)],this[i(t._0x38ce1c)])),super[i(3319)](e),this}}register$4(_0x3a2b68(3855),DivLightPoint,!![]);function getHtmlByStyle$1(n,e){const t={_0x1859a2:2486,_0x521428:3121,_0x1ec873:3874,_0x5a93e7:3203,_0x2779d5:3203,_0x1bc7ac:3640,_0x5259b1:3203},i=_0x3a2b68;return`
  <div class="mars3d-animation-point" style="color:`+n.color+";width: "+n[i(3121)]+i(t._0x1859a2)+n[i(t._0x521428)]+i(t._0x1ec873)+(n.label?'<div class="mars3d-animation-point-lbl" style="color:'+(n[i(t._0x5a93e7)].color||n.color)+';">'+template(n[i(t._0x2779d5)][i(t._0x1bc7ac)],e,n[i(t._0x5259b1)][i(4148)]??!![])+"</div>":"")+`
  </div>`}const DEF_STYLE$a={color:"white",font_family:"楷体",font_size:15,lineHeight:100,circleSize:10,horizontalOrigin:Cesium__namespace[_0x3a2b68(2014)].CENTER,verticalOrigin:Cesium__namespace.VerticalOrigin.BOTTOM};class DivUpLabel extends DivGraphic{constructor(e={}){const t={_0x19c1d6:2748,_0x5377d4:3208},i=_0x3a2b68;e.style={...DEF_STYLE$a,...e.style},e[i(t._0x19c1d6)][i(3330)]=getHtmlByStyle(e.style,e[i(t._0x5377d4)]),super(e)}_updateStyleBaseHook(e){const t={_0xa7bc8d:407,_0x5ce113:2650},i=_0x3a2b68;return(Cesium__namespace.defined(e.color)||Cesium__namespace.defined(e.circleSize)||Cesium__namespace.defined(e.font_size)||Cesium__namespace[i(t._0xa7bc8d)](e.font_family)||Cesium__namespace[i(407)](e[i(t._0x5ce113)])||Cesium__namespace.defined(e.text))&&(this.html=getHtmlByStyle(this.style,this.attr)),super._updateStyleBaseHook(e),this}}register$4(_0x3a2b68(2265),DivUpLabel,!![]);function getHtmlByStyle(n,e){const t={_0x3c54de:3141,_0xef253b:873,_0x54d970:1681},i=_0x3a2b68,s=n.color,r=n[i(t._0x3c54de)];return`
  <div class="mars3d-divUpLabel" style="color: `+s+`;">
    <div class="mars3d-divUpLabel-text" style="font-family:`+n.font_family+i(1345)+n[i(t._0xef253b)]+'px;">'+template(n.text,e,!![])+`</div>
    <div class="mars3d-divUpLabel-line"  style="
        height: `+n.lineHeight+`px;
        background-color: `+s+i(3316)+r+`px;
        height: `+r+`px;
        margin-left: calc(50% - `+r/2+i(t._0x54d970)+s+`;"></div>
  </div> `}class Popup extends DivGraphic{constructor(e={}){const t={_0xd19586:3031,_0x2b7278:2346,_0x56c405:2346,_0x57394b:2748,_0x4c1523:3763,_0x2d17be:1351,_0x54ac6c:2772,_0x1d9ef5:474,_0x1ad2b4:3192},i={_0x314fea:1568},s=_0x3a2b68;e.eventParent=e.eventParent??![],e.hasEdit=e[s(t._0xd19586)]??![],e[s(t._0x2b7278)]=e[s(t._0x56c405)]??!![],e.zIndex=e.zIndex??1e7,e[s(t._0x57394b)]=e.style||{},e[s(2748)][s(t._0x4c1523)]=e.style.direction??"top";const r={};switch(e.style.direction){case"top":r.offsetY=-8,r.horizontalOrigin=Cesium__namespace.HorizontalOrigin.CENTER,r.verticalOrigin=Cesium__namespace.VerticalOrigin[s(3795)];break;case"bottom":r.offsetY=8,r.horizontalOrigin=Cesium__namespace.HorizontalOrigin.CENTER,r.verticalOrigin=Cesium__namespace[s(t._0x2d17be)][s(2245)];break;case"center":r.horizontalOrigin=Cesium__namespace.HorizontalOrigin.CENTER,r.verticalOrigin=Cesium__namespace.VerticalOrigin.CENTER;break;case s(595):r.offsetX=8,r.horizontalOrigin=Cesium__namespace.HorizontalOrigin.LEFT,r.verticalOrigin=Cesium__namespace.VerticalOrigin.CENTER;break;case s(t._0x54ac6c):r.offsetX=-8,r.horizontalOrigin=Cesium__namespace[s(2014)].RIGHT,r.verticalOrigin=Cesium__namespace.VerticalOrigin[s(1333)];break}e.style={...r,...e.style},super(e),this._depthTest=this[s(1941)][s(t._0x1d9ef5)]??this.style[s(t._0x1d9ef5)]??![],!Cesium__namespace.defined(this[s(t._0x57394b)].template)&&this[s(t._0x57394b)].template!==![]&&(this.style.template=this[s(2820)]()),this[s(t._0x1ad2b4)](EventType.load,()=>{this[s(i._0x314fea)]()})}get target(){const e=_0x3a2b68;var t;return(t=this[e(1941)])===null||t===void 0?void 0:t[e(446)]}get eventTarget(){const e={_0x322980:1941},t=_0x3a2b68;var i,s;return(i=this[t(e._0x322980)])!==null&&i!==void 0&&i.event?this.options.event:(s=this.options)!==null&&s!==void 0&&s.target?this.options.target:this}_getDefaultTemplate(){const e={_0x334741:3951,_0x23b92f:2748,_0x33c921:3468,_0x11da4b:2702},t=_0x3a2b68;let i;this[t(2748)].closeButton??!![]?i=t(e._0x334741):i="";let s="";return this[t(2748)][t(2537)]&&(s+="max-width: "+this.style.maxWidth+"px;"),this[t(e._0x23b92f)].minWidth&&(s+="min-width: "+this.style[t(967)]+"px;"),this.style[t(2627)]&&(s+=t(3677)+this.style.maxHeight+t(e._0x33c921)),`
      <div class="mars3d-popup `+(!this.style.timeRender&&this.options.animation?"mars3d-popup-animation":"")+`">
        `+i+`
        <div class="mars3d-popup-content-wrapper mars3d-popup-background">
          <div id="popup-`+this.id+t(e._0x11da4b)+s+`">{content}</div>
        </div>
        <div class="mars3d-popup-tip-container">
          <div class="mars3d-popup-tip mars3d-popup-background"></div>
        </div>
      </div>`}_appendHtmlHook(){const e={_0x54564c:1844},t={_0x38195f:446,_0x5b1943:446},i=_0x3a2b68,s=this._container.querySelector(".closeButton");s&&s[i(e._0x54564c)]("click",r=>{const o=i;this.target&&this[o(t._0x38195f)].closeHighlight&&this[o(t._0x5b1943)].closeHighlight(),this.remove(!![])})}[_0x3a2b68(1059)](e,t={},i=!![]){const s={_0x42fc8d:2365,_0x27277f:3208,_0x5d8458:527,_0x16d943:2475},r=_0x3a2b68,o=this.target||this._map;if(o){if(this.options.event)for(const c in this.options.event)c==="options"||c==="content"||(t[c]=this.options[r(s._0x42fc8d)][c]);t.sourceTarget=o,t[r(s._0x27277f)]=this.attr,t[r(s._0x5d8458)]=this[r(527)],this[r(s._0x16d943)](t),o.fire(e,t,i)}}_fireBindDataEx(e){const t={_0x33aec1:676},i=_0x3a2b68;e[i(t._0x33aec1)]=this}_addedHook(e){const t={_0x43b4aa:1560,_0x54295b:4269},i={_0x5cd451:1575,_0x5eb1a6:4233,_0x597a84:3229,_0x35b6c6:744},s=_0x3a2b68;super._addedHook(e),this.once(EventType.change,r=>{const o=_0x20dc;if(this.options.autoCenter&&this._map&&(r.y<0||r.x<0||r.x>this._map.scene[o(679)].clientWidth-r.width||r.y>this[o(1575)].scene.canvas.clientHeight-r.height)){const c=r.width/2+r.x,_=r.height/2+r.y,l=new Cesium__namespace[o(3532)](c,_),d=this[o(i._0x5cd451)].scene[o(i._0x5eb1a6)][o(i._0x597a84)](l);let f=this._map.scene.globe.pick(d,this._map[o(i._0x35b6c6)]);!f&&(f=this._map.scene[o(4233)][o(409)](l)),this._map[o(2258)](f)}}),this.target&&this.target.on(EventType[s(t._0x43b4aa)],this[s(t._0x54295b)],this)}_removedHook(){const e={_0x1cdf87:4269,_0x373ef4:3916},t=_0x3a2b68;this.target&&this.target[t(2971)](EventType[t(1560)],this[t(e._0x1cdf87)],this),this._fireTarget_close(),super[t(e._0x373ef4)]()}_graphic_updatePosition(e){const t=_0x3a2b68;var i;(i=e.graphic)!==null&&i!==void 0&&i._getPopupPosition&&(this.position=e.graphic[t(396)]())}_fireTarget_open(){this[_0x3a2b68({_0xd6f852:1059}._0xd6f852)](EventType.popupOpen)}_fireTarget_close(){this.fireTarget(EventType.popupClose)}[_0x3a2b68(4371)](){}_container_onClickHandler(){}_container_onMousedownHandler(){}_container_onMouseMoveHandler(){}[_0x3a2b68(3590)](){}hasBindEvent(){const e=_0x3a2b68;return this.options[e(1022)]??!![]}}register$4("popup",Popup);class Tooltip extends Popup{_getDefaultTemplate(){const e={_0x4f4c94:3787,_0x47c942:2748},t=_0x3a2b68;return t(e._0x4f4c94)+this.id+'"  class="mars3d-tooltip mars3d-tooltip-'+this[t(e._0x47c942)].direction+'">{content}</div>'}_fireBindDataEx(e){e.tooltip=this}_fireTarget_open(){this.fireTarget(EventType.tooltipOpen)}_fireTarget_close(){this[_0x3a2b68(1059)](EventType.tooltipClose)}}register$4(_0x3a2b68(951),Tooltip);const DEF_STYLE$9={startColor:Cesium__namespace.Color[_0x3a2b68(773)].withAlpha(.3),endColor:Cesium__namespace.Color[_0x3a2b68(1948)][_0x3a2b68(747)](0),startScale:2,endScale:4,minimumParticleLife:3,maximumParticleLife:6,minimumSpeed:1,maximumSpeed:2,emissionRate:100};class ParticleSystem extends BasePointPrimitive{constructor(e={}){const t=_0x3a2b68;e[t(2748)]={...DEF_STYLE$9,emitter:new Cesium__namespace.CircleEmitter(1),...e[t(2748)]},super(e),this.emitterModelMatrix=new Cesium__namespace.Matrix4,this.translation=new Cesium__namespace.Cartesian3,this.rotation=new Cesium__namespace[t(931)],this.hpr=new Cesium__namespace.HeadingPitchRoll,this.trs=new Cesium__namespace.TranslationRotationScale}get czmObject(){return this._primitive}get[_0x3a2b68(2627)](){return this[_0x3a2b68(2748)].maxHeight}set[_0x3a2b68(2627)](e){this.style.maxHeight=e}get gravity(){const e={_0x40ff92:2748},t=_0x3a2b68;return this[t(e._0x40ff92)][t(3724)]||0}set[_0x3a2b68(3724)](e){const t={_0x495729:3724},i=_0x3a2b68;this.style[i(t._0x495729)]=e}get[_0x3a2b68(3093)](){return this.style.transX||0}set transX(e){this.style.transX=e}get transY(){return this.style.transY||0}set transY(e){this.style.transY=e}get transZ(){return this[_0x3a2b68({_0x275051:2748}._0x275051)].transZ||0}set[_0x3a2b68(2578)](e){this.style.transZ=e}get particleSize(){const e={_0x2b0c19:2184},t=_0x3a2b68;return this[t(2748)][t(e._0x2b0c19)]||25}set particleSize(e){const t={_0x21464e:2748,_0x42dc69:2184},i=_0x3a2b68;this[i(t._0x21464e)][i(t._0x42dc69)]=e,this._primitive&&(this._primitive[i(2715)].x=e,this[i(703)].minimumImageSize.y=e,this[i(703)].maximumImageSize.x=e,this._primitive.maximumImageSize.y=e)}get[_0x3a2b68(361)](){return![]}_addedHook(e){const t={_0x4ad859:2257,_0x45b978:1941,_0x3c76a0:4076,_0x22c4e0:468,_0xa65240:1630,_0x5851e1:521},i={_0x1b9f5e:1036},s=_0x3a2b68;if(!this.show)return;const r=this._map[s(t._0x4ad859)].currentTime,o={imageSize:new Cesium__namespace.Cartesian2(this[s(2184)],this[s(2184)]),modelMatrix:this[s(2884)](r),emitterModelMatrix:this._computeEmitterModelMatrix(r),...this.style,show:this.show};this[s(703)]=new Cesium__namespace[s(399)](o),this.primitiveCollection.add(this[s(703)]),this[s(t._0x45b978)].position&&(this.options[s(t._0x3c76a0)]instanceof Cesium__namespace.CallbackProperty||this.options.position instanceof Cesium__namespace[s(t._0x22c4e0)])&&(this._orientation=this[s(1941)].orientation||new Cesium__namespace.VelocityOrientationProperty(this.options[s(4076)]),this.property=this[s(1941)][s(4076)]),this._bindUpdateCallback(),this._hasUpdate_modelMatrix=isFunction(this.options.modelMatrix)||this.property,this._hasUpdate_emitterModelMatrix=isFunction(this.options.emitterModelMatrix)||this.heading||this[s(t._0xa65240)]||this.roll||this.transX||this[s(t._0x5851e1)]||this.transZ;const c=this._primitive.update,_=this;this._primitive[s(3396)]=function(l){const d=s;_._update(l),this._previousTime&&Cesium__namespace[d(557)].secondsDifference(l.time,this._previousTime)>10&&(this[d(736)]=Cesium__namespace.JulianDate.clone(l[d(i._0x1b9f5e)],this._previousTime)),c.bind(this)(l)}}_removedHook(){this._map&&this.primitiveCollection.remove(this._primitive)}_update(e){const t={_0x4700a1:1556,_0xb9bcec:3555,_0x148f49:1036,_0x539410:4233,_0x282b99:4241,_0x47cebd:703,_0x273446:442,_0x28a943:703},i=_0x3a2b68;!this.show||!this._primitive||!this._map||(this.property&&(this._position=getPositionValue(this.property,e.time)),this._hasUpdate_modelMatrix&&(this._primitive.modelMatrix=this._computeModelMatrix(e.time)),this[i(t._0x4700a1)]&&(this._primitive.emitterModelMatrix=this[i(t._0xb9bcec)](e[i(t._0x148f49)])),Cesium__namespace.defined(this.maxHeight)&&e.frameNumber%10===0&&(this._map[i(t._0x539410)].positionCartographic[i(t._0x282b99)]<this.maxHeight?this._primitive[i(442)]!==this.show&&(this._primitive[i(442)]=this[i(442)]):this[i(t._0x47cebd)].show&&(this._primitive[i(t._0x273446)]=![])),this[i(t._0x28a943)]._isComplete&&this.fire("complete"))}_computeModelMatrix(e){const t=_0x3a2b68;return this.options[t(4238)]?isFunction(this.options.modelMatrix)?this[t(1941)].modelMatrix(e):this[t(1941)].modelMatrix:this._position?Cesium__namespace.Transforms[t(778)](this._position):new Cesium__namespace[t(2478)]}_computeEmitterModelMatrix(e){const t={_0x1f20ee:992,_0x5f4f80:1941,_0x4e615b:2782,_0x1ae7d3:992},i=_0x3a2b68;if(this.options[i(t._0x1f20ee)])return isFunction(this[i(1941)].emitterModelMatrix)?this[i(t._0x5f4f80)][i(992)](e):this.options.emitterModelMatrix;const s=this[i(t._0x4e615b)],r=this.pitch,o=this.roll;return this.hpr=Cesium__namespace[i(3977)].fromDegrees(s,r,o,this.hpr),this.trs.translation=Cesium__namespace.Cartesian3.fromElements(this.transX,this.transY,this.transZ,this.translation),this.trs[i(1344)]=Cesium__namespace.Quaternion.fromHeadingPitchRoll(this.hpr,this.rotation),Cesium__namespace.Matrix4.fromTranslationRotationScale(this.trs,this.emitterModelMatrix),this[i(t._0x1ae7d3)]}_bindUpdateCallback(){const e={_0x93592:703,_0x3e46c0:3754},t={_0x30808:1085,_0x5a9d5e:4338},i=_0x3a2b68;if(this.options.updateCallback){this._primitive[i(3754)]=this.options.updateCallback;return}if(this.gravity===0)this._primitive.updateCallback=void 0;else if(!this[i(e._0x93592)][i(e._0x3e46c0)]){const s=this,r=new Cesium__namespace.Cartesian3;this._primitive.updateCallback=function(o,c){const _=i,l=o.position;Cesium__namespace[_(2978)][_(t._0x30808)](l,r),Cesium__namespace[_(2978)].multiplyByScalar(r,s.gravity*c,r),o.velocity=Cesium__namespace.Cartesian3.add(o[_(t._0x5a9d5e)],r,o.velocity)}}}_updateStyleHook(e,t){const i={_0x377bf8:703,_0x4aab33:3724,_0x1d8325:4075,_0x2851d7:1556,_0x4a60d4:992,_0x2ce204:521},s=_0x3a2b68;if(this[s(i._0x377bf8)]){for(const r in t)this._primitive[r]=t[r];t[s(2184)]&&(this.particleSize=t.particleSize),t[s(i._0x4aab33)]&&this[s(i._0x1d8325)]()}this[s(i._0x2851d7)]=isFunction(this.options[s(i._0x4a60d4)])||this.heading||this[s(1630)]||this.roll||this.transX||this[s(i._0x2ce204)]||this.transZ}[_0x3a2b68(4347)](e,t){return this._getDrawPointEntityClass(e,t)}}register$4("particleSystem",ParticleSystem,!![]);var ArcFrustumFS=`uniform vec4 color;

void main() {
  out_FragColor = color;
}
`,ArcFrustumVS=_0x3a2b68(2917);const DEF_STYLE$8={color:Cesium__namespace.Color.WHITE};class ArcFrustum extends BasePointPrimitive{constructor(e={}){const t={_0x10a0e7:2540},i=_0x3a2b68;e.style={...DEF_STYLE$8,...e.style},super(e),delete this._position,delete this._point,this._boundingSphere=new Cesium__namespace.BoundingSphere,this._color=getCesiumColor(this.style[i(t._0x10a0e7)])}get czmObject(){return this}get color(){return this._color}set color(e){const t=_0x3a2b68;this[t(1596)]=e}get angle(){return this.style.angle}set angle(e){const t=_0x3a2b68;this.style[t(2580)]=e,this.destroyCommands()}get[_0x3a2b68(3433)](){const e=_0x3a2b68;return this.style.angle2??this[e(2748)].angle}set[_0x3a2b68(3433)](e){this.style.angle2=e,this.destroyCommands()}get modelMatrix(){const e={_0x4d6101:1133,_0x4ab729:1185},t=_0x3a2b68;if(this.options.modelMatrix)return this.options[t(4238)];const i=this.position,s=Cesium__namespace.HeadingPitchRoll.fromDegrees(this.heading,this.pitch,this.roll),r=new Cesium__namespace[t(e._0x4d6101)](this._map[t(744)]);return r.position=i,r.frustum.fov=Cesium__namespace[t(2806)][t(e._0x4ab729)](this.angle*2),r.frustum.aspectRatio=this.angle/this.angle2,r.frustum.near=.01,r.frustum[t(1550)]=this.style[t(3481)],r[t(2336)]({destination:i,orientation:{heading:s.heading,pitch:s.pitch,roll:s.roll}}),r.inverseViewMatrix}updateModelMatrix(){this.destroyCommands()}_addedHook(e){this.show&&this.primitiveCollection.add(this)}[_0x3a2b68(3916)](){const e=_0x3a2b68;this.primitiveCollection.contains(this)&&(this._noDestroy=!![],this.primitiveCollection[e(1361)](this),this._noDestroy=![])}update(e){const t={_0x256a27:442},i=_0x3a2b68;this[i(t._0x256a27)]&&(!Cesium__namespace.defined(this._command)&&(this._command=this.createCommand(e[i(3041)])),e.passes[i(4359)]&&Cesium__namespace.defined(this._command)&&e.commandList.push(this._command))}destroyCommands(){const e=_0x3a2b68;Cesium__namespace.defined(this._command)&&(this._command[e(4187)]&&this._command.shaderProgram.destroy(),this._command.vertexArray&&this[e(2762)][e(3698)][e(2619)](),delete this._command)}createCommand(e){const t={_0x76dc97:1834,_0x3259a4:2796,_0x3ba8cc:4238,_0x2a9fdd:1543,_0xb42207:2036,_0x2aee0b:1945,_0x5df8a1:513},i=_0x3a2b68;this[i(1287)]();const s=this.createVertices(),r={aPosition:0},o=Cesium__namespace.Buffer[i(t._0x76dc97)]({context:e,typedArray:s.vertices,usage:Cesium__namespace.BufferUsage[i(1179)]}),c=[{index:r.aPosition,vertexBuffer:o,componentsPerAttribute:3,componentDatatype:Cesium__namespace.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:12,normalize:![]}],_=Cesium__namespace[i(2261)].createIndexBuffer({context:e,typedArray:s[i(t._0x3259a4)],usage:Cesium__namespace.BufferUsage[i(1179)],indexDatatype:Cesium__namespace.IndexDatatype[i(969)]}),l=new Cesium__namespace.VertexArray({context:e,attributes:c,indexBuffer:_}),d=this[i(t._0x3ba8cc)];this._boundingSphere.radius=this.style.distance,this.position?this._boundingSphere.position=this.position:(Cesium__namespace.Cartesian3[i(2957)](Cesium__namespace.Cartesian3.ZERO,this[i(t._0x2a9fdd)].center),Cesium__namespace.BoundingSphere.transform(this._boundingSphere,d,this[i(t._0x2a9fdd)]));const f=new Cesium__namespace[i(2338)]({primitiveType:Cesium__namespace.PrimitiveType.LINES,shaderProgram:Cesium__namespace[i(t._0xb42207)][i(t._0x2aee0b)]({context:e,vertexShaderSource:ArcFrustumVS,fragmentShaderSource:ArcFrustumFS,attributeLocations:r}),vertexArray:l,modelMatrix:d,boundingVolume:this._boundingSphere,uniformMap:{color:()=>this.color},pass:Cesium__namespace.Pass[i(t._0x5df8a1)],owner:this,cull:!![],renderState:Cesium__namespace.RenderState.fromCache({cull:{enabled:!![]},depthTest:{enabled:!![]}})});return this[i(1472)](f),f}createVertices(){const e={_0x57769f:1075,_0x339ed1:2806,_0x1224a7:969},t=_0x3a2b68,i=this[t(2748)].distance,s=20,r=(s+1)*(s+1)+1,o=Cesium__namespace[t(e._0x57769f)].createTypedArray(Cesium__namespace.ComponentDatatype.FLOAT,3*r);let c=3;const _=Cesium__namespace[t(e._0x339ed1)][t(1185)](this.angle*2),l=Cesium__namespace.Math.toRadians(this.angle2*2),d=Math.tan(.5*l),f=i*d,g=Math.PI-.5*_;let b=0,C=0;const P=_/s;for(let k=0;k<s+1;k++){b=g+k*P;const N=f/(i/Math.cos(b)),$=Math.atan(N),B=-$,F=2*$/s;for(let z=0;z<s+1;z++)C=B+z*F,o[c++]=i*Math.cos(C)*Math.sin(b),o[c++]=i*Math.sin(C),o[c++]=i*Math.cos(C)*Math.cos(b)}const S=2*(4+5*s+2*s*3),L=Cesium__namespace[t(1075)].createTypedArray(Cesium__namespace.ComponentDatatype[t(e._0x1224a7)],S);let E=0;L[E++]=0,L[E++]=1,L[E++]=0,L[E++]=s+1,L[E++]=0,L[E++]=s*(s+1)+1,L[E++]=0,L[E++]=(s+1)*(s+1);for(let k=0;k<5;k++)for(let N=0;N<s;N++)L[E++]=1+N+5*(s+1)*k,L[E++]=1+(N+1)+5*(s+1)*k;for(let k=0;k<5;k++)for(let N=0;N<s;N++)L[E++]=1+(s+1)*N+5*k,L[E++]=1+(s+1)*(N+1)+5*k;const M=s*s*3*2+3*s*4,D=Cesium__namespace.ComponentDatatype.createTypedArray(Cesium__namespace.ComponentDatatype.SHORT,M),R=1;for(let k=0;k<s;k++)for(let N=0;N<s;N++)D[E++]=R+k+N*(s+1),D[E++]=R+k+1+N*(s+1),D[E++]=R+k+(N+1)*(s+1),D[E++]=R+k+1+N*(s+1),D[E++]=R+k+1+(N+1)*(s+1),D[E++]=R+k+(N+1)*(s+1);for(let k=0;k<s;k++)D[E++]=k+1+R,D[E++]=k+R,D[E++]=0,D[E++]=0,D[E++]=k+s*(s+1)+R,D[E++]=k+1+s*(s+1)+R;for(let k=0;k<s;k++)D[E++]=0,D[E++]=k*(s+1)+R,D[E++]=(k+1)*(s+1)+R,D[E++]=s+(k+1)*(s+1)+R,D[E++]=s+k*(s+1)+R,D[E++]=0;return{vertices:o,indices:L}}}register$4("arcFrustum",ArcFrustum,!![]);var TetrahedronFS=`in vec3 v_positionEC;
in vec3 v_normalEC;
in vec2 v_st;
uniform vec4 color;
uniform float globalAlpha;

void main() {
  vec3 positionToEyeEC = -v_positionEC;
  vec3 normalEC = normalize(v_normalEC);
  #ifdef FACE_FORWARD
  normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);
  #endif
  czm_materialInput materialInput;
  materialInput.normalEC = normalEC;
  materialInput.positionToEyeEC = positionToEyeEC;
  materialInput.st = v_st;

  vec2 st = materialInput.st;
  czm_material material = czm_getDefaultMaterial(materialInput);

  material.alpha = (mix(0.1, 1.0, clamp((1.0 - st.t) * color.a, 0.0, 1.0)) + (1.0 - sign(st.t - czm_frameNumber * 0.001)) * 0.2 + 0.4) * globalAlpha;
  material.diffuse = color.rgb;

  #ifdef FLAT
  out_FragColor = vec4(material.diffuse + material.emission, material.alpha);
  #else
  out_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);
  #endif
}
`,TetrahedronVS=`in vec3 position;
in vec3 normal;
in vec2 st;
in float batchId;
out vec3 v_positionEC;
out vec3 v_normalEC;
out vec2 v_st;

void main() {
  v_positionEC = (czm_modelView * vec4(position, 1.0)).xyz;       // position in eye coordinates
  v_normalEC = czm_normal * normal;                               // normal in eye coordinates
  v_st = st;
  gl_Position = czm_modelViewProjection * vec4(position, 1.0);
}
`;const DEF_STYLE$7={width:20,height:30,color:new Cesium__namespace[_0x3a2b68(2092)](.8,.8,0,.8),animation:!![],moveHeight:30,moveDuration:2,rotationAngle:1};class Tetrahedron extends BasePointPrimitive{constructor(e={}){const t=_0x3a2b68;e.style={...DEF_STYLE$7,...e[t(2748)]},super(e),this._globalAlpha=1}get czmObject(){return this}get color(){return this[_0x3a2b68(1596)]}set color(e){this._color=getCesiumColor(e)}get[_0x3a2b68(4238)](){const e={_0x18d5cf:1941,_0x43412b:778,_0x2fadba:1376,_0x11c091:2978,_0x963b6b:2748,_0x2e009f:4241,_0x4a17ca:2478,_0x21fa45:1144},t=_0x3a2b68;if(this[t(1941)][t(4238)])return this[t(e._0x18d5cf)].modelMatrix;if(!this.position)return Cesium__namespace.Matrix4.IDENTITY;const i=Cesium__namespace.Transforms[t(e._0x43412b)](this.position),s=Cesium__namespace.Matrix4[t(e._0x2fadba)](new Cesium__namespace[t(e._0x11c091)](this.style.width,this[t(e._0x963b6b)].width,this[t(e._0x963b6b)][t(e._0x2e009f)]));return Cesium__namespace[t(e._0x4a17ca)][t(e._0x21fa45)](i,s,new Cesium__namespace.Matrix4)}_addedHook(e){const t=_0x3a2b68;!this[t(442)]||!this[t(4076)]||(this._updateStyleHook(e,e),this[t(756)].add(this))}_removedHook(){const e={_0x404609:756},t=_0x3a2b68;this.primitiveCollection&&this[t(e._0x404609)].contains(this)&&(this._noDestroy=!![],this.primitiveCollection.remove(this),this[t(2027)]=![]),delete this._modelMatrix}_updatePositionsHook(){const e={_0x35bd40:4238},t=_0x3a2b68;this._modelMatrix=this[t(e._0x35bd40)],this._clearDrawCommand()}_updateStyleHook(e,t){const i={_0x188a29:2540,_0x2ec088:4241},s=_0x3a2b68;(t.width||t.height)&&this[s(4145)](),this[s(i._0x188a29)]=e.color,this._rotationAngle=Cesium__namespace.Math.toRadians(e.rotationAngle),this._moveMaxHeight=e.moveHeight/this.style[s(i._0x2ec088)],this._moveMaxHeight!==0&&(this._moveDistanceStep=this._moveMaxHeight/(e.moveDuration*60),this._moveDistanceSum=0)}[_0x3a2b68(3396)](e){const t={_0x5145ed:3041,_0x5f040d:2515,_0x163613:1754,_0x1db3cb:1490},i=_0x3a2b68;if(this.show){if(this.style.animation){if(this[i(1209)]!==0){this._moveDistanceSum+=this._moveDistanceStep,(this[i(3925)]>=this._moveMaxHeight||this._moveDistanceSum<=0)&&(this._moveDistanceStep=-this._moveDistanceStep);const s=new Cesium__namespace.Cartesian3(0,0,this._moveDistanceStep);Cesium__namespace.Matrix4.multiplyByTranslation(this._modelMatrix,s,this._modelMatrix)}if(this._rotationAngle!==0){const s=Cesium__namespace.Matrix4.fromRotationTranslation(Cesium__namespace.Matrix3.fromRotationZ(this._rotationAngle));Cesium__namespace.Matrix4.multiply(this._modelMatrix,s,this._modelMatrix)}}!Cesium__namespace.defined(this._drawCommand)&&(this[i(4298)]=this.createDrawCommand(e[i(t._0x5145ed)])),e.passes.render?Cesium__namespace.defined(this[i(4298)])&&e[i(t._0x5f040d)].push(this._drawCommand):Cesium__namespace.defined(this._pickCommand)&&e.commandList[i(t._0x163613)](this[i(t._0x1db3cb)])}}_clearDrawCommand(){const e={_0x1b05b8:4298,_0x377228:4298,_0x1abdc8:1490,_0xa85302:1490,_0x23a2eb:1490},t=_0x3a2b68;Cesium__namespace.defined(this._drawCommand)&&(this._drawCommand.vertexArray&&this[t(4298)].vertexArray.destroy(),this._drawCommand.shaderProgram&&this[t(e._0x1b05b8)].shaderProgram.destroy(),delete this[t(e._0x377228)]),Cesium__namespace.defined(this[t(e._0x1abdc8)])&&(this._pickCommand.vertexArray&&this[t(e._0xa85302)].vertexArray.destroy(),this[t(e._0x23a2eb)].shaderProgram&&this._pickCommand.shaderProgram.destroy(),delete this._pickCommand)}createDrawCommand(e){const t={_0x20de4b:2748,_0x319401:517,_0x2a49c3:2170,_0x4140e6:3285,_0x455fd9:4238,_0x8d3e1b:3140,_0x5af484:1490},i=_0x3a2b68,s=this.style.translucent??![],r=this.style.closed??!![],o=Cesium__namespace[i(2012)].getDefaultRenderState(s,r,this.options.renderState),c=Cesium__namespace.RenderState.fromCache(o),_={position:0,textureCoordinates:1},l=Cesium__namespace.ShaderProgram.fromCache({context:e,vertexShaderSource:TetrahedronVS,fragmentShaderSource:TetrahedronFS,attributeLocations:_}),d=this.createVertexArray(e),f=new Cesium__namespace.BoundingSphere(this[i(4076)],Math.max(this[i(t._0x20de4b)][i(t._0x319401)],this.style.height)),g=new Cesium__namespace[i(2338)]({primitiveType:Cesium__namespace.PrimitiveType.TRIANGLES,shaderProgram:l,vertexArray:d,modelMatrix:this._modelMatrix,renderState:c,boundingVolume:f,uniformMap:{color:()=>this[i(2540)],globalAlpha:()=>this._globalAlpha},castShadows:![],receiveShadows:![],pass:Cesium__namespace[i(t._0x2a49c3)].TRANSLUCENT,owner:this,pickOnly:!![],pickCommand:new Cesium__namespace.DrawCommand({owner:this,pickOnly:!![]})});this.bindPickId(g),g[i(2219)]=e[i(2918)]({primitive:g,id:this.id});const b=new Cesium__namespace.DrawCommand({owner:g,primitiveType:Cesium__namespace[i(2641)][i(1862)],pickOnly:!![]});b[i(3698)]=d,b.renderState=c;const C=Cesium__namespace[i(2036)].fromCache({context:e,vertexShaderSource:TetrahedronVS,fragmentShaderSource:Cesium__namespace.ShaderSource.createPickFragmentShaderSource(TetrahedronFS,"uniform"),attributeLocations:_});return b.shaderProgram=C,b.uniformMap=g[i(2299)],b.uniformMap[i(t._0x4140e6)]=()=>g.pickId.color,b.pass=Cesium__namespace.Pass.TRANSLUCENT,b.boundingVolume=f,b[i(t._0x455fd9)]=this[i(t._0x8d3e1b)],this[i(t._0x5af484)]=b,g}createVertexArray(e){const t={_0xc60f8f:1862,_0x434199:4177,_0x90dca5:489},i=_0x3a2b68,s={position:0,textureCoordinates:1},r=this[i(2248)](),o=new Cesium__namespace[i(1492)]({attributes:{position:new Cesium__namespace.GeometryAttribute({componentDatatype:Cesium__namespace.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:r.positions}),textureCoordinates:new Cesium__namespace.GeometryAttribute({componentDatatype:Cesium__namespace[i(1075)].FLOAT,componentsPerAttribute:2,values:r.sts})},indices:r.indices,primitiveType:Cesium__namespace.PrimitiveType[i(t._0xc60f8f)],boundingSphere:Cesium__namespace.BoundingSphere[i(2866)](r.positions)}),c=Cesium__namespace.GeometryPipeline[i(t._0x434199)](o);return Cesium__namespace[i(t._0x90dca5)].fromGeometry({context:e,geometry:c,attributeLocations:s,bufferUsage:Cesium__namespace[i(2635)].STATIC_DRAW})}[_0x3a2b68(2248)](){const e=new Float64Array(15);e[0]=0,e[1]=1,e[2]=0,e[3]=-1,e[4]=0,e[5]=0,e[6]=0,e[7]=-1,e[8]=0,e[9]=1,e[10]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=-1;const t=new Uint16Array(6*3);t[0]=4,t[1]=2,t[2]=3,t[3]=4,t[4]=3,t[5]=0,t[6]=4,t[7]=0,t[8]=1,t[9]=4,t[10]=1,t[11]=2,t[12]=1,t[13]=2,t[14]=3,t[15]=1,t[16]=3,t[17]=0;const i=new Float32Array([0,0,1,0,1,1,0,1,.5,.5]);return{indices:t,positions:e,sts:i}}setOpacity(e){this._globalAlpha=e}_getDrawEntityClass(e,t){return this._getDrawPointEntityClass(e,t)}}register$4("tetrahedron",Tetrahedron,!![]);var ViewShedFS=_0x3a2b68(4381);const DEF_STYLE$6={angle:60,angle2:45,distance:1e3,opacity:.6,addHeight:0,showFrustum:![]};class ViewShed extends BasePointPrimitive{constructor(e={},t=!![]){const i={_0x5e1841:3810},s=_0x3a2b68;t&&(e.style={...DEF_STYLE$6,...e.style}),super(e),this._visibleAreaColor=getCesiumColor(this.style.visibleAreaColor,new Cesium__namespace.Color(0,1,0)),this._hiddenAreaColor=getCesiumColor(this.style.hiddenAreaColor,new Cesium__namespace[s(2092)](1,0,0)),this[s(i._0x5e1841)]=this.options[s(3109)]??!![],this._maximumDistance=this.style.maximumDistance??5e3}get czmObject(){return this[_0x3a2b68({_0x3745b3:2490}._0x3745b3)]}get[_0x3a2b68(2580)](){return this.style.angle}set angle(e){this.style.angle=e,this._updateDraw()}get angle2(){const e=_0x3a2b68;return this.style.angle2??this[e(2748)][e(2580)]}set[_0x3a2b68(3433)](e){const t=_0x3a2b68;this.style[t(3433)]=e,this._updateDraw()}get visibleAreaColor(){return this[_0x3a2b68({_0x4decfb:1709}._0x4decfb)]}set visibleAreaColor(e){this._visibleAreaColor=getCesiumColor(e)}get[_0x3a2b68(1267)](){return this[_0x3a2b68({_0x5b60b0:1030}._0x5b60b0)]}set hiddenAreaColor(e){const t=_0x3a2b68;this[t(1030)]=getCesiumColor(e)}get opacity(){return this[_0x3a2b68(2748)].opacity}set[_0x3a2b68(3248)](e){this.style.opacity=e}get[_0x3a2b68(685)](){const e=_0x3a2b68;return this.style[e(685)]}set showFrustum(e){const t={_0x45c723:685},i=_0x3a2b68;this.style[i(t._0x45c723)]=e,this._frustumPrimitive[i(442)]=e}get distance(){return this.style.distance}set distance(e){this.style.distance=e,this._updateDraw()}get shadowMap(){return this._shadowMap}get camera(){var e;return(e=this._shadowMap)===null||e===void 0?void 0:e._lightCamera}get targetPosition(){return this.options.targetPosition}set[_0x3a2b68(497)](e){const t={_0x26f96e:1941,_0x39ec9f:497,_0x4ca08e:1575,_0x4de025:2978,_0x2c0248:1085,_0x4dda75:2748,_0xbb638a:3501},i=_0x3a2b68;var s;if(this[i(t._0x26f96e)][i(t._0x39ec9f)]=e,!this._map)return;const r=this[i(4076)];if(!r)return;const o=LngLatPoint[i(1378)](e,(s=this[i(t._0x4ca08e)])===null||s===void 0?void 0:s.currentTime);this.distance=Cesium__namespace[i(t._0x4de025)].distance(r,o);const c=Cesium__namespace[i(t._0x4de025)][i(t._0x2c0248)](Cesium__namespace.Cartesian3.subtract(o,r,new Cesium__namespace.Cartesian3),new Cesium__namespace[i(2978)]),_=Cesium__namespace.Cartesian3.normalize(r,new Cesium__namespace.Cartesian3),l=new Cesium__namespace.Camera(this._map.scene);l.position=r,l[i(3763)]=c,l.up=_,this.style.heading=Cesium__namespace.Math.toDegrees(l.heading),this[i(t._0x4dda75)].pitch=Cesium__namespace.Math[i(t._0xbb638a)](l.pitch),this[i(3456)]()}_showHook(){this.show?this._updateDraw():this._clearDraw()}_updatePositionsHook(){this._updateDraw()}[_0x3a2b68(585)](){const e={_0x4da444:1941,_0x2fefc6:744},t=_0x3a2b68;this[t(e._0x4da444)].targetPosition&&(this[t(497)]=this.options.targetPosition),this._defaultColorTexture=new Cesium__namespace.Texture({context:this._map[t(e._0x2fefc6)].context,source:{width:1,height:1,arrayBufferView:new Uint8Array([0,0,0,0])},flipY:![]})}_addedHook(e){const t={_0x7a7fbf:3456},i=_0x3a2b68;this._hasTerrainShadows&&(this._map[i(3586)].terrainShadows=Cesium__namespace.ShadowMode.ENABLED),this[i(t._0x7a7fbf)](),this[i(756)].add(this)}_removedHook(){const e={_0x45294a:1575,_0x2399d4:4156,_0x15d95c:887,_0x4b3c50:1273,_0x4e9754:2027},t=_0x3a2b68;this[t(3810)]&&(this[t(e._0x45294a)][t(e._0x2399d4)]=Cesium__namespace[t(e._0x15d95c)][t(e._0x4b3c50)]),this._clearDraw(),this.primitiveCollection.contains(this)&&(this[t(e._0x4e9754)]=!![],this.primitiveCollection.remove(this),this._noDestroy=![])}bindUpdateEvent(){}unbindUpdateEvent(){}[_0x3a2b68(1029)](){this[_0x3a2b68(3456)]()}_updateDraw(){const e={_0x5c7d89:1185,_0x5a3fd5:1630,_0x478d07:4076,_0x55594a:3569,_0x318b26:1005},t=_0x3a2b68;if(this._clearDraw(),!this[t(1575)]||!this.show)return;const i=this.position;if(!i)return;const s=new Cesium__namespace.HeadingPitchRoll(Cesium__namespace.Math.toRadians(this.heading),Cesium__namespace.Math[t(e._0x5c7d89)](this[t(e._0x5a3fd5)]),Cesium__namespace.Math.toRadians(this.roll)),r=new Cesium__namespace.Camera(this[t(1575)].scene);r[t(e._0x478d07)]=i,r.frustum.fov=Cesium__namespace.Math.toRadians(this[t(2580)]*2),r.frustum.aspectRatio=this.angle/this[t(3433)],r.frustum[t(2657)]=.01,r[t(e._0x55594a)].far=this.distance,r.setView({destination:i,orientation:{heading:s.heading,pitch:s.pitch,roll:s.roll}}),this[t(2020)](r),this[t(e._0x318b26)]=new Cesium__namespace.ShadowMap({lightCamera:r,context:this._map.scene.context,maximumDistance:this[t(3825)],isSpotLight:!![],cascadesEnabled:![],enabled:![],depthBiasStep:this.options[t(1443)]}),this._createPostProcessStage()}_clearDraw(){const e={_0xd30dae:1575,_0x5e6216:1155},t=_0x3a2b68;this._map&&(this._postProcessStage&&(this[t(e._0xd30dae)].scene.postProcessStages[t(1361)](this._postProcessStage),delete this._postProcessStage),this._shadowMap&&(this[t(1005)].destroy(),delete this._shadowMap),this._frustumPrimitive&&(this._layer[t(e._0x5e6216)](this._frustumPrimitive,!![]),delete this._frustumPrimitive))}update(e){const t={_0xf1219c:3456,_0x5b4ac6:1754},i=_0x3a2b68;this[i(4332)]&&this[i(t._0xf1219c)](),this[i(1005)]&&e[i(3325)][i(t._0x5b4ac6)](this._shadowMap)}[_0x3a2b68(2020)](e){const t={_0x2c5afe:4053},i=_0x3a2b68;this._frustumPrimitive&&this[i(4053)].removeGraphic(this._frustumPrimitive,!![]);const s=this.distance+1;this._frustumPrimitive=new ArcFrustum({modelMatrix:e[i(3572)],style:{angle:this.angle,angle2:this.angle2,distance:s},show:this[i(685)]&&this[i(442)],private:!![]}),this[i(t._0x2c5afe)].addGraphic(this._frustumPrimitive)}[_0x3a2b68(616)](){const e={_0x1f5398:2490},t={_0x22328a:3871,_0x4f21fe:3847},i={_0x2b743c:3621},s={_0x1944cc:3763},r={_0x317f13:1383},o=_0x3a2b68;this._postProcessStage&&(this._map.scene.postProcessStages.remove(this[o(2490)]),delete this[o(e._0x1f5398)]);const c=new Cesium__namespace.Cartesian2,_=new Cesium__namespace.Cartesian4,l=new Cesium__namespace[o(654)],d=this._shadowMap._primitiveBias;this._postProcessStage=new Cesium__namespace.PostProcessStage({fragmentShader:ViewShedFS,uniforms:{mars3d_opacity:()=>this.opacity,mars3d_visibleAreaColor:()=>this.visibleAreaColor,mars3d_hiddenAreaColor:()=>this.hiddenAreaColor,mars3d_distance:()=>this[o(3481)],mars3d_xAngle:()=>this[o(2580)],mars3d_yAngle:()=>this.angle2,shadowMap_texture:()=>this._shadowMap._shadowMapTexture||this._defaultColorTexture,shadowMap_matrix:()=>{const f=o;return this[f(1005)][f(r._0x317f13)]},shadowMap_lightPositionEC:()=>this._shadowMap._lightPositionEC,shadowMap_lightDirectionEC:()=>this._shadowMap._lightDirectionEC,shadowMap_lightUp:()=>this[o(1005)]._lightCamera.up,shadowMap_lightDir:()=>{const f=o;return this[f(1005)]._lightCamera[f(s._0x1944cc)]},shadowMap_lightRight:()=>this._shadowMap._lightCamera.right,shadowMap_texelSizeDepthBias:()=>{const f=o;return c.x=1/this._shadowMap[f(3621)].x,c.y=1/this._shadowMap[f(i._0x2b743c)].y,Cesium__namespace.Cartesian4.fromElements(c.x,c.y,d.depthBias,d.normalShadingSmooth,_)},shadowMap_normalOffsetScale:()=>{const f=o;return Cesium__namespace.Cartesian4.fromElements(d[f(t._0x22328a)],this._shadowMap[f(t._0x4f21fe)],this._shadowMap.maximumDistance,this._shadowMap._darkness,l)}}}),this._map.scene.postProcessStages.add(this._postProcessStage)}[_0x3a2b68(1203)](e,t){const i={_0x154e42:1630,_0xa236f0:3481},s=_0x3a2b68;return e.heading=formatNum$1(this.heading,1),e[s(i._0x154e42)]=formatNum$1(this[s(i._0x154e42)],1),e[s(i._0xa236f0)]=formatNum$1(this.distance,2),getAttrVal(e,{onlySimpleType:!![]})}setView(){const e={_0x259788:4076,_0x2c7929:4233,_0xabe2d3:2957,_0x30eeb2:595},t=_0x3a2b68;if(!this._map)return;const i=this.camera;i&&(this._map.camera[t(e._0x259788)]=Cesium__namespace[t(2957)](this.position),this[t(1575)][t(e._0x2c7929)].direction=Cesium__namespace[t(e._0xabe2d3)](i.direction),this._map.camera[t(e._0x30eeb2)]=Cesium__namespace.clone(i.right),this._map.camera.up=Cesium__namespace.clone(i.up))}setOpacity(e){const t={_0x1240c6:2748},i=_0x3a2b68;this[i(t._0x1240c6)].opacity=e}startDraw(e){const t={_0x3edf5b:2296},i=_0x3a2b68;if(this._enabledDraw)return this;if(this._enabledDraw=!![],e&&this.addTo(e),!this._map)throw new Error(i(t._0x3edf5b));this._map._setEditCursor(!![]),this.enableControl(![]),this._startDrawHook(),this.fire(EventType.drawStart,{drawtype:this[i(1603)],graphic:this},!![])}[_0x3a2b68(608)](){const e=_0x3a2b68;var t,i,s;if(!this._enabledDraw)return this;if(this._stopDrawHook(),this._map._setEditCursor(![]),this.enableControl(!![]),this._map.closeSmallTooltip(),this._enabledDraw=![],!this.position||!this.distance){this.remove(!![]);return}this.fire(EventType.drawCreated,{drawtype:this.type,graphic:this},!![]),(t=this[e(1941)])!==null&&t!==void 0&&t.success&&this.options.success(this),(i=this.options)!==null&&i!==void 0&&(s=i[e(3531)])!==null&&s!==void 0&&s.resolve&&this.options._promise[e(583)](this)}[_0x3a2b68(2741)](){const e={_0x2cb52e:1575,_0x5d432d:383},t=_0x3a2b68;this[t(e._0x2cb52e)].on(EventType[t(e._0x5d432d)],this._onClickHandler,this),this._map.on(EventType.mouseMove,this._onMouseMoveHandler,this)}[_0x3a2b68(2880)](){const e={_0x3bc60f:383},t=_0x3a2b68;this._map.off(EventType[t(e._0x3bc60f)],this._onClickHandler,this),this._map.off(EventType.mouseMove,this._onMouseMoveHandler,this)}[_0x3a2b68(1518)](e){const t={_0x4bdcf4:1109,_0x2e6c69:608},i=_0x3a2b68;let s=e.cartesian;if(!s)return;if(this[i(t._0x4bdcf4)](EventType.drawAddPoint,{...e,drawtype:this.type,graphic:this},!![]),!this[i(4076)]){this.position=addPositionsHeight(s,this[i(2748)].addHeight);return}Cesium__namespace.Cartesian3.distance(this.position,s)>this._maximumDistance&&(s=getOnLinePointByLen(this.position,s,this._maximumDistance)),this.targetPosition=s,this[i(t._0x2e6c69)](),this.fire(EventType.drawCreated,e)}_onMouseMoveHandler(e){const t={_0x24e5f2:1109,_0x45e750:2236},i=_0x3a2b68;let s=e.cartesian;if(!s)return;const r=this[i(4076)];r?(Cesium__namespace.Cartesian3.distance(r,s)>this._maximumDistance&&(s=getOnLinePointByLen(r,s,this._maximumDistance)),this.targetPosition=s,this[i(t._0x24e5f2)](EventType.drawMouseMove,{...e,drawtype:this[i(1603)],graphic:this},!![]),this._map.openSmallTooltip(e.endPosition,this._map.getLangText(i(t._0x45e750)))):this._map[i(1379)](e.endPosition,this._map.getLangText("_单击开始绘制"))}}register$4(_0x3a2b68(3124),ViewShed,!![]);var ViewVideoFS=`uniform float mars3d_opacity;

uniform sampler2D mars3d_videoTexture;
uniform sampler2D mars3d_maskTexture;
uniform vec4 mars3d_hiddenAreaColor;

uniform sampler2D shadowMap_texture;
uniform mat4 shadowMap_matrix;
uniform vec4 shadowMap_lightPositionEC;
uniform vec4 shadowMap_texelSizeDepthBias;
uniform vec4 shadowMap_normalOffsetScale;
uniform bool mars3d_flipx;
uniform bool mars3d_flipy;

uniform sampler2D colorTexture;
uniform sampler2D depthTexture;
in vec2 v_textureCoordinates;

vec4 toEye(in vec2 uv, in float depth) {
  vec2 xy = vec2((uv.x * 2.0 - 1.0), (uv.y * 2.0 - 1.0));
  vec4 posInCamera = czm_inverseProjection * vec4(xy, depth, 1.0);
  posInCamera = posInCamera / posInCamera.w;
  return posInCamera;
}

float getDepth(in vec4 depth) {
  float z_window = czm_unpackDepth(depth);
  z_window = czm_reverseLogDepth(z_window);
  float n_range = czm_depthRange.near;
  float f_range = czm_depthRange.far;
  return (2.0 * z_window - n_range - f_range) / (f_range - n_range);
}
float _czm_sampleShadowMap(sampler2D shadowMap, vec2 uv) {
  return texture(shadowMap, uv).r;
}
float _czm_shadowDepthCompare(sampler2D shadowMap, vec2 uv, float depth) {
  return step(depth, _czm_sampleShadowMap(shadowMap, uv));
}
float _czm_shadowVisibility(sampler2D shadowMap, czm_shadowParameters shadowParameters) {
  float depthBias = shadowParameters.depthBias;
  float depth = shadowParameters.depth;
  float nDotL = shadowParameters.nDotL;
  float normalShadingSmooth = shadowParameters.normalShadingSmooth;
  float darkness = shadowParameters.darkness;
  vec2 uv = shadowParameters.texCoords;
  depth -= depthBias;
  vec2 texelStepSize = shadowParameters.texelStepSize;
  float radius = 1.0;
  float dx0 = -texelStepSize.x * radius;
  float dy0 = -texelStepSize.y * radius;
  float dx1 = texelStepSize.x * radius;
  float dy1 = texelStepSize.y * radius;
  float visibility = (_czm_shadowDepthCompare(shadowMap, uv, depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, dy0), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(0.0, dy0), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, dy0), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, 0.0), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, 0.0), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, dy1), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(0.0, dy1), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, dy1), depth)) * (1.0 / 9.0);
  return visibility;
}

vec3 pointProjectOnPlane(in vec3 planeNormal, in vec3 planeOrigin, in vec3 point) {
  vec3 v01 = point - planeOrigin;
  float d = dot(planeNormal, v01);
  return (point - planeNormal * d);
}
float ptm(vec3 pt) {
  return sqrt(pt.x * pt.x + pt.y * pt.y + pt.z * pt.z);
}

void main() {
  const float PI = 3.141592653589793;
  vec4 color = texture(colorTexture, v_textureCoordinates);
  vec4 currD = texture(depthTexture, v_textureCoordinates);
  if(currD.r >= 1.0) {
    out_FragColor = color;
    return;
  }
  float depth = getDepth(currD);
  vec4 positionEC = toEye(v_textureCoordinates, depth);
  vec3 normalEC = vec3(1.0);
  czm_shadowParameters shadowParameters;
  shadowParameters.texelStepSize = shadowMap_texelSizeDepthBias.xy;
  shadowParameters.depthBias = shadowMap_texelSizeDepthBias.z;
  shadowParameters.normalShadingSmooth = shadowMap_texelSizeDepthBias.w;
  shadowParameters.darkness = shadowMap_normalOffsetScale.w;
  shadowParameters.depthBias *= max(depth * 0.01, 1.0);

  vec3 directionEC = normalize(positionEC.xyz - shadowMap_lightPositionEC.xyz);
  float nDotL = clamp(dot(normalEC, -directionEC), 0.0, 1.0);
  vec4 shadowPosition = shadowMap_matrix * positionEC;
  shadowPosition /= shadowPosition.w;
  if(any(lessThan(shadowPosition.xyz, vec3(0.0))) || any(greaterThan(shadowPosition.xyz, vec3(1.0)))) {
    out_FragColor = color;
    return;
  }

  shadowParameters.texCoords = shadowPosition.xy;
  shadowParameters.depth = shadowPosition.z;
  shadowParameters.nDotL = nDotL;
  float visibility = _czm_shadowVisibility(shadowMap_texture, shadowParameters);

  //视频投射
  if(visibility == 1.0) {
    if(mars3d_flipx){
      shadowPosition.x = shadowPosition.x + (0.5 - shadowPosition.x) * 2.0;
    }
    if(mars3d_flipy){
      shadowPosition.y = shadowPosition.y + (0.5 - shadowPosition.y) * 2.0;
    }

    vec4 videoColor = texture(mars3d_videoTexture, shadowPosition.xy);
    vec4 maskColor = texture(mars3d_maskTexture, shadowPosition.xy);
    videoColor *= maskColor;
    out_FragColor = mix(color, vec4(videoColor.xyz, 1.0), mars3d_opacity * videoColor.a);
  } else {
    if(abs(shadowPosition.z - 0.0) < 0.01) {
      return;
    }
    out_FragColor = vec4(mix(color.rgb, mars3d_hiddenAreaColor.rgb, mars3d_hiddenAreaColor.a), mars3d_hiddenAreaColor.a);
  }
}
`;const DEF_STYLE$5={angle:60,angle2:45,distance:1e3,opacity:1,showFrustum:![],hiddenAreaColor:new Cesium__namespace[_0x3a2b68(2092)](0,0,0,.5),flipx:![],flipy:![]};class Video3D extends ViewShed{constructor(e={}){const t={_0xa5927:2748},i=_0x3a2b68;e[i(t._0xa5927)]={...DEF_STYLE$5,...e.style},e.terrain=![],super(e,![]),this._videoPlay=!![]}get container(){return this[_0x3a2b68(659)]}get distance(){return this.style.distance}set distance(e){this.style.distance=e,this._updateDraw()}get flipx(){return this.style.flipx}set flipx(e){this.style.flipx=e}get play(){return this._videoPlay}set play(e){const t={_0x3ef013:659},i=_0x3a2b68;if(this._videoPlay=!!e,this[i(t._0x3ef013)])try{this.videoPlay?this[i(659)].play():this[i(659)][i(3145)]()}catch{}}[_0x3a2b68(585)](){const e={_0x584332:744},t={_0x5c3aa1:3041},i=_0x3a2b68;super[i(585)]();const s=this[i(2748)].maskImage;if(s){const r=new Image;r.onload=o=>{const c=i;this._maskTexture=new Cesium__namespace.Texture({context:this._map.scene[c(t._0x5c3aa1)],source:r})},r[i(423)]=o=>{logError$1(i(2534)+s,o)},r.src=s}else this._maskTexture=new Cesium__namespace.Texture({context:this._map[i(e._0x584332)].context,source:{width:1,height:1,arrayBufferView:new Uint8Array([255,255,255,255])},flipY:![]});this.style.container?this._videoContainer=this.style.container:this.style[i(4023)]&&(this._videoContainer=createVideo(this[i(2748)].url,this.style[i(3711)],"",document.body),this._videoContainer.style.display="none",this._hasRemoveElement=!![]),this._videoContainer&&this._map.on(EventType.clockTick,this[i(3143)],this)}_removedHook(){const e={_0x2ec808:4273},t=_0x3a2b68;var i;this._map.off(EventType[t(e._0x2ec808)],this._onClockTickHandler,this),this[t(3210)]&&(i=this[t(659)])!==null&&i!==void 0&&i.parentNode&&(this._videoContainer.parentNode.removeChild(this[t(659)]),delete this._hasRemoveElement,delete this._videoContainer),super._removedHook()}[_0x3a2b68(3143)](){const e={_0xfcb933:744,_0x207826:659,_0x862c64:849},t=_0x3a2b68;try{this._videoPlay&&this._videoContainer.paused&&this[t(659)].play()}catch{}!this._videoContainer||!this._map||(this._videoTexture&&this._videoTexture.destroy(),this._videoTexture=new Cesium__namespace.Texture({context:this._map[t(e._0xfcb933)].context,source:this[t(e._0x207826)],pixelFormat:Cesium__namespace.PixelFormat[t(e._0x862c64)],pixelDatatype:Cesium__namespace.PixelDatatype.UNSIGNED_BYTE}))}_clearDraw(){this._frustumPrimitive&&(this.primitiveCollection.remove(this._frustumPrimitive),delete this._frustumPrimitive),super._clearDraw()}_createFrustumPrimitive(e){const t={_0x4a6928:681,_0x1ff0a4:2978,_0x8a3d2d:3185,_0x3e0e37:1330,_0x33dcc6:756,_0x35966e:3286,_0x444201:685},i=_0x3a2b68,s=e.directionWC,r=e.upWC;let o=e[i(t._0x4a6928)];o=Cesium__namespace[i(2978)].negate(o,new Cesium__namespace[i(t._0x1ff0a4)]);const c=new Cesium__namespace.Matrix3;Cesium__namespace.Matrix3.setColumn(c,0,o,c),Cesium__namespace.Matrix3.setColumn(c,1,r,c),Cesium__namespace.Matrix3[i(t._0x8a3d2d)](c,2,s,c);const _=Cesium__namespace[i(931)][i(t._0x3e0e37)](c,new Cesium__namespace[i(931)]);this._frustumPrimitive&&this[i(t._0x33dcc6)].remove(this._frustumPrimitive),this[i(1872)]=new Cesium__namespace.Primitive({geometryInstances:new Cesium__namespace[i(t._0x35966e)]({id:this.id,geometry:new Cesium__namespace.FrustumOutlineGeometry({origin:e.position,orientation:_,frustum:e.frustum,_drawNearPlane:!![]}),attributes:{color:Cesium__namespace.ColorGeometryInstanceAttribute.fromColor(Cesium__namespace.Color[i(3465)])}}),appearance:new Cesium__namespace.PerInstanceColorAppearance({translucent:![],flat:!![]}),asynchronous:![],show:this[i(t._0x444201)]&&this.show}),this.primitiveCollection[i(3674)](this[i(1872)]),this[i(1472)](this._frustumPrimitive)}_createPostProcessStage(){const e={_0x1833f8:2490,_0x2594a9:744,_0x58691d:1361,_0x1e783:654,_0x4a58bf:2490},t={_0x5c3615:2153},i={_0x1f0e94:2748},s={_0x4e7b60:654},r={_0x349d65:1383},o=_0x3a2b68;this[o(e._0x1833f8)]&&(this._map[o(e._0x2594a9)].postProcessStages[o(e._0x58691d)](this._postProcessStage),delete this[o(2490)]);const c=new Cesium__namespace.Cartesian2,_=new Cesium__namespace[o(654)],l=new Cesium__namespace[o(e._0x1e783)],d=this._shadowMap._primitiveBias;this[o(e._0x4a58bf)]=new Cesium__namespace.PostProcessStage({fragmentShader:ViewVideoFS,uniforms:{mars3d_videoTexture:()=>this._videoTexture||this._defaultColorTexture,mars3d_maskTexture:()=>this._maskTexture,mars3d_opacity:()=>this.opacity,mars3d_hiddenAreaColor:()=>this.hiddenAreaColor,shadowMap_texture:()=>this._shadowMap._shadowMapTexture||this._defaultColorTexture,shadowMap_matrix:()=>{const f=o;return this._shadowMap[f(r._0x349d65)]},shadowMap_lightPositionEC:()=>{const f=o;return this._shadowMap[f(2310)]},shadowMap_texelSizeDepthBias:()=>{const f=o;return c.x=1/this._shadowMap._textureSize.x,c.y=1/this._shadowMap._textureSize.y,Cesium__namespace[f(s._0x4e7b60)].fromElements(c.x,c.y,d.depthBias,d[f(3620)],_)},shadowMap_normalOffsetScale:()=>{const f=o;return Cesium__namespace[f(654)][f(3958)](d.normalOffsetScale,this._shadowMap._distance,this._shadowMap.maximumDistance,this._shadowMap._darkness,l)},mars3d_flipx:()=>this[o(i._0x1f0e94)].flipx,mars3d_flipy:()=>{const f=o;return this[f(2748)][f(t._0x5c3615)]}}}),this._map.scene.postProcessStages.add(this._postProcessStage)}}register$4("video3D",Video3D,!![]);let globeLastRoam;class Route extends BasePointPrimitive{constructor(e={}){const t={_0x490f14:4387,_0x406234:2748,_0x2b034a:468,_0x3e9d7f:3910,_0x1c5912:4282,_0x594b42:1558,_0x2c689f:2924},i=_0x3a2b68;super(e),this[i(1941)].frameRate=this.options[i(2162)]??1,this[i(978)]=this[i(1941)].maxCacheCount??100,this._clampToTilesetFrame=-1,this._frameRateHeight=this.options.frameRateHeight??30,this[i(t._0x490f14)](this[i(1941)][i(t._0x406234)]),this._child={},this._position_result=new Cesium__namespace.Cartesian3,this[i(4332)]=this.options.position||new Cesium__namespace[i(t._0x2b034a)](this.options.referenceFrame,this.options[i(t._0x3e9d7f)]),this.property[i(t._0x1c5912)]=this.options.forwardExtrapolationType??Cesium__namespace.ExtrapolationType[i(2452)],this.property.backwardExtrapolationType=this[i(1941)][i(t._0x594b42)]??Cesium__namespace[i(4379)].HOLD,this[i(1272)]=this.options.orientation||new Cesium__namespace.VelocityOrientationProperty(this.property),this._readyPromise=Cesium__namespace[i(t._0x2c689f)]()}get label(){return this._child.label}set label(e){const t=_0x3a2b68;this.options[t(3203)]=e,this._initChildGraphic("label",LabelPrimitive)}get billboard(){const e=_0x3a2b68;return this._child[e(2009)]}set billboard(e){const t={_0x48b31c:1941},i=_0x3a2b68;this[i(t._0x48b31c)][i(2009)]=e,this._initChildGraphic("billboard",BillboardPrimitive)}get point(){const e={_0x6139e5:2879},t=_0x3a2b68;return this._child[t(e._0x6139e5)]}set point(e){const t={_0x5270fd:2879},i=_0x3a2b68;this.options[i(2879)]=e,this._initChildGraphic(i(t._0x5270fd),PointPrimitive)}get model(){return this[_0x3a2b68(606)].model}set model(e){const t=_0x3a2b68;this[t(1941)].model=e,this._initChildGraphic("model",ModelPrimitive)}get readyPromise(){const e={_0x5b832c:1900},t=_0x3a2b68;return this[t(e._0x5b832c)][t(1264)]}get[_0x3a2b68(3811)](){const e=_0x3a2b68;return this[e(606)][e(3811)]}set circle(e){const t={_0x4ca15e:1941,_0x4de5b3:3811},i=_0x3a2b68;this[i(t._0x4ca15e)].circle=e,this[i(990)](i(t._0x4de5b3),CircleEntity)}get[_0x3a2b68(3499)](){return this._child.coneTrack}set coneTrack(e){const t={_0x3b26ce:1941},i=_0x3a2b68;this[i(t._0x3b26ce)].coneTrack=e,this._initChildGraphic("coneTrack",ConeTrack)}get path(){const e={_0x65cd02:1699},t=_0x3a2b68;return this._child[t(e._0x65cd02)]}set path(e){const t={_0x1533ae:990},i=_0x3a2b68;this.options[i(1699)]=e,this[i(t._0x1533ae)]("path",PathEntity)}get polyline(){return this._child.polyline}set polyline(e){const t={_0xca525e:1941},i=_0x3a2b68;this[i(t._0xca525e)].polyline=e,this._initChildGraphic("polyline",PolylineEntity)}get wall(){const e={_0x53759a:606,_0x249166:1691},t=_0x3a2b68;return this[t(e._0x53759a)][t(e._0x249166)]}set wall(e){const t=_0x3a2b68;this.options[t(1691)]=e,this._initChildGraphic("wall",WallEntity)}get modelMatrix(){const e={_0x434cd3:3140,_0x50e7e1:1187},t=_0x3a2b68;return this[t(e._0x434cd3)]?this._modelMatrix:this._getModelMatrix(this[t(e._0x50e7e1)],this._orientation_show)}get groundPosition(){return getRayEarthPosition(this._position,this._orientation_show)}get alt(){const e=_0x3a2b68;return this[e(682)]?this._clampToTilesetHeight:this[e(1187)]?Cesium__namespace[e(2228)].fromCartesian(this._position).height:0}get[_0x3a2b68(1431)](){const e=_0x3a2b68;var t,i;const s=(t=this[e(4332)])===null||t===void 0||(i=t._property)===null||i===void 0?void 0:i._times;return s[e(400)]>0?s[0]:null}get stopTime(){const e={_0x17177b:400},t=_0x3a2b68;var i,s;const r=(i=this.property)===null||i===void 0||(s=i._property)===null||s===void 0?void 0:s._times;return r[t(e._0x17177b)]>0?r[r[t(400)]-1]:null}get currIndex(){return this._flyok_index}get[_0x3a2b68(4199)](){const e={_0x86e498:1575},t=_0x3a2b68;var i;return(i=this[t(e._0x86e498)])===null||i===void 0?void 0:i[t(2257)].multiplier}set multiplier(e){const t={_0x5db943:2257},i=_0x3a2b68;this._map&&(this._map[i(t._0x5db943)].multiplier=e)}get isPause(){const e=_0x3a2b68;var t;return!((t=this._map)!==null&&t!==void 0&&t[e(2257)].shouldAnimate)}set isPause(e){this._map&&(e?this.pause():this.proceed())}get objectsToExclude(){if(this.options.objectsToExclude)return this.options.objectsToExclude;if(this._objectsToExcludee)return this._objectsToExclude;const e=[];if(this.eachChildGraphic(t=>{const i=_0x20dc;t[i(3409)]&&e.push(t[i(3409)])}),e.length>0)return e}set objectsToExclude(e){this._objectsToExclude=e}get style(){const e={_0x3d8ba0:3203,_0x1d2094:3834},t=_0x3a2b68,i=getAttrVal(this.options,{onlySimpleType:!![]});return this[t(3834)](i,"model"),this._splitOptionsToStyle(i,t(e._0x3d8ba0)),this._splitOptionsToStyle(i,"billboard"),this._splitOptionsToStyle(i,"point"),this[t(e._0x1d2094)](i,"circle"),this._splitOptionsToStyle(i,"coneTrack"),this._splitOptionsToStyle(i,"polyline"),this._splitOptionsToStyle(i,"wall"),this._splitOptionsToStyle(i,"path"),delete i._promise,delete i[t(2748)],delete i.attr,i}set[_0x3a2b68(2748)](e){this.setStyle(e)}setStyle(e){const t=_0x3a2b68;return e={...e},this[t(4387)](e),this._setOptionsHook(this.options,e),this}_initSampledPositionProperty(){const e=_0x3a2b68;this._sampledPositionProperty=this.property,this[e(3864)]()}_mountedHook(){const e={_0x426c91:990,_0x3567b1:990,_0x46eefc:2879,_0x420b16:990},t=_0x3a2b68;this[t(e._0x426c91)]("label",LabelPrimitive),this[t(e._0x3567b1)](t(2009),BillboardPrimitive),this._initChildGraphic(t(e._0x46eefc),PointPrimitive),this._initChildGraphic("model",ModelPrimitive),this._initChildGraphic(t(3811),CircleEntity),this._initChildGraphic("coneTrack",ConeTrack),this._initChildGraphic("path",PathEntity),this._initChildGraphic("polyline",PolylineEntity),this[t(e._0x420b16)]("wall",WallEntity)}_addedHook(e){const t={_0x6a318e:1941,_0x5b5378:1941,_0x2082d5:2694},i=_0x3a2b68;var s;if(this.show&&(this._addChildGraphic(),(s=this.model)!==null&&s!==void 0&&s.readyPromise&&this[i(3992)][i(2449)].then(()=>{this._readyPromise.resolve(this)}),this[i(t._0x6a318e)].position&&this[i(1976)](this.options.position),this[i(t._0x5b5378)][i(t._0x2082d5)]))for(let r=0;r<this[i(1941)].positions.length;r++){const o=this.options.positions[r];this.addDynamicPosition(o,o.time)}}[_0x3a2b68(3916)](e){this._removeChildGraphic(),super._removedHook(e)}_getJsonPositions(e){const t={_0x341a7f:2990,_0x35dbb8:400,_0x49d128:2101,_0x4df23e:2978},i=_0x3a2b68;var s,r,o,c;const _=(s=this[i(4332)])===null||s===void 0||(r=s._property)===null||r===void 0?void 0:r[i(2566)],l=(o=this.property)===null||o===void 0||(c=o._property)===null||c===void 0?void 0:c[i(t._0x341a7f)];if(!_||_.length===0)return;const d=[];for(let f=0,g=_[i(t._0x35dbb8)];f<g;f++){const b=LngLatPoint[i(t._0x49d128)](new Cesium__namespace[i(t._0x4df23e)](l[f*3],l[f*3+1],l[f*3+2])),C=Cesium__namespace.JulianDate.toDate(_[f]);d.push({lat:b[i(671)],lng:b.lng,alt:b.alt,time:formatDate(C,"yyyy-MM-dd HH:mm:ss")})}e.positions=d}_showHook(e){const t={_0x2df7be:1837},i={_0x4cda08:442},s=_0x3a2b68;e?this[s(t._0x2df7be)](r=>{const o=s;r[o(i._0x4cda08)]=r._lastShow,delete r._lastShow}):this[s(t._0x2df7be)](r=>{const o=s;r[o(1828)]=r.show,r.show=![]})}_setOptionsHook(e,t){const i={_0x14447e:2009,_0x21c8b0:990,_0x37284b:1699,_0x3cf965:990,_0x2ddfaf:1691},s=_0x3a2b68;this._zhStyle(t.style);for(const r in t)switch(r){case"label":this._initChildGraphic("label",LabelPrimitive);break;case s(i._0x14447e):this._initChildGraphic("billboard",BillboardPrimitive);break;case"point":this[s(990)]("point",PointPrimitive);break;case"model":this._initChildGraphic("model",ModelPrimitive);break;case"circle":this._initChildGraphic("circle",CircleEntity);break;case"coneTrack":this._initChildGraphic("coneTrack",ConeTrack);break;case"path":this[s(i._0x21c8b0)](s(i._0x37284b),PathEntity);break;case"polyline":this[s(i._0x3cf965)]("polyline",PolylineEntity);break;case"wall":this._initChildGraphic(s(i._0x2ddfaf),WallEntity);break}}_splitOptionsToStyle(e,t){const i=e[t];if(i){delete e[t];for(const s in i)e[t+"_"+s]=i[s]}}_mergeStyleToOptions(e,t){const i=_0x3a2b68,s=t+"_";for(const r in e){const o=e[r];r[i(433)](s)&&(!e[t]&&(e[t]={}),e[t][r.substring(s.length)]=o,delete e[r])}}[_0x3a2b68(4387)](e){const t={_0x5e57c7:3153,_0x1e79f0:1941},i=_0x3a2b68;if(!(!e||Object.keys(e)[i(400)]===0)){this._mergeStyleToOptions(e,i(3992)),this._mergeStyleToOptions(e,"label"),this._mergeStyleToOptions(e,"billboard"),this._mergeStyleToOptions(e,i(2879)),this._mergeStyleToOptions(e,"circle"),this._mergeStyleToOptions(e,"coneTrack"),this[i(t._0x5e57c7)](e,"polyline"),this._mergeStyleToOptions(e,"wall"),this._mergeStyleToOptions(e,"path");for(const s in e){const r=e[s];switch(s){default:{isObject(r)?this[i(t._0x1e79f0)][s]=merge(this.options[s],r):this.options[s]=r;break}}}}}_initChildGraphic(e,t){const i={_0x2aa025:606,_0x171bd9:3208,_0x17f4d0:1586,_0x240c02:4053,_0x470de8:1472,_0x5600cf:606,_0x1d7394:2009,_0x1b55f5:2398,_0x5d2832:4332,_0x1d9563:4076,_0x31c14b:2191,_0x3f9277:3499,_0x56beab:1699,_0x1dfe5d:1866,_0x4390d3:553,_0x3edddd:1647,_0x38849f:606,_0x4477cb:1691},s={_0x1a9b68:3614},r={_0x493ccc:1866},o=_0x3a2b68,c=this.options[e];let _=this._child[e];if(!c){_&&(_[o(1361)](!![]),delete this[o(i._0x2aa025)][e]);return}if(_)_.setStyle(c),_.show=c.show??!![];else switch(_=new t({id:this.id+"-"+e,style:clone(c,["show"]),attr:this[o(i._0x171bd9)],private:!![],eventParent:this,show:c.show??!![]}),_[o(4152)](this[o(4053)]),_[o(i._0x17f4d0)](this),this.isAdded&&this[o(i._0x240c02)].addGraphic(_),_.czmObject&&this[o(i._0x470de8)](_.czmObject),_[o(1637)]&&_.czmObjectEx.forEach(l=>{this[o(1472)](l)}),this[o(i._0x5600cf)][e]=_,e){case o(i._0x1d7394):{c.alignedAxis===!![]&&(this[o(606)].billboard.style.alignedAxis=new Cesium__namespace[o(i._0x1b55f5)](this[o(i._0x5d2832)],!![]));break}case"circle":{this._child.circle[o(i._0x1d9563)]=new Cesium__namespace[o(i._0x31c14b)](l=>this[o(1187)],![]);break}case o(i._0x3f9277):{this[o(606)].coneTrack[o(i._0x1d9563)]=new Cesium__namespace.CallbackProperty(l=>this._position,![]);break}case o(i._0x56beab):{this[o(606)][o(1699)].position=this.property;break}case"polyline":{this[o(i._0x1dfe5d)]=[],this._child[o(i._0x4390d3)].positions=new Cesium__namespace.CallbackProperty(l=>this[o(r._0x493ccc)],![]);break}case o(1691):{this._wall_positions=[],this._child.wall.positions=new Cesium__namespace[o(2191)](l=>this[o(618)],![]),this[o(3614)]=[],this[o(i._0x2aa025)][o(1691)].style.minimumHeights=new Cesium__namespace.CallbackProperty(l=>this[o(s._0x1a9b68)],![]),this[o(i._0x3edddd)]=[],this[o(i._0x38849f)].wall.style.maximumHeights=new Cesium__namespace.CallbackProperty(l=>this[o(1647)],![]),this._child[o(i._0x4477cb)]._heights_cache={};break}}}[_0x3a2b68(3549)](){this.eachChildGraphic(e=>{this._layer.addGraphic(e),e.czmObject&&this.bindPickId(e.czmObject),e.czmObjectEx&&e.czmObjectEx.forEach(t=>{this.bindPickId(t)})})}_removeChildGraphic(){this.eachChildGraphic(e=>{this[_0x20dc(4053)].removeGraphic(e)})}eachChildGraphic(e,t){const i={_0x183ed0:606,_0x3c610d:3782},s=_0x3a2b68;if(this[s(i._0x183ed0)])return Object[s(2953)](this._child)[s(i._0x3c610d)]((r,o)=>{e&&e[s(4350)](t||this,this._child[r],o)}),this}update(e){const t={_0x4965dc:442,_0x177d97:4332,_0x506254:1187,_0x2e9e6b:3911,_0x22b2bf:2345,_0xf3d13c:1941,_0x5c46cc:407,_0x75142c:1339,_0x1238ee:910},i=_0x3a2b68;if(this[i(t._0x4965dc)]){if(this._position=this.getPropertyValue(e.time,this._position_result),!this[i(1187)]){this._last_hasNull?this._updatePosition():(this[i(3263)](),this._updateForEvent(),this._last_hasNull=!![]);return}if(this._last_hasNull=![],this[i(t._0x177d97)].referenceFrame===Cesium__namespace.ReferenceFrame.INERTIAL&&(this._position_inertial=this[i(t._0x506254)].clone(),Cesium__namespace.PositionProperty[i(t._0x2e9e6b)](e.time,this._position,this.property.referenceFrame,Cesium__namespace.ReferenceFrame[i(2288)],this._position)),this.options.clampToTileset){if(this._clampToTilesetFrame++,!this._clampToTilesetHeight||this._clampToTilesetFrame%this[i(t._0x22b2bf)]===0){let s=getHeight(this._map.scene,this._position,{objectsToExclude:this._layer.objectsToExclude,has3dtiles:!![]});s&&(Cesium__namespace.defined(this[i(t._0xf3d13c)][i(1890)])&&s<this.options[i(1890)]&&(s=this.options.minHeight),Cesium__namespace[i(t._0x5c46cc)](this.options.maxHeight)&&s>this[i(t._0xf3d13c)].maxHeight&&(s=this[i(t._0xf3d13c)].maxHeight),this._clampToTilesetHeight=s)}if(this._clampToTilesetHeight){const s=Cesium__namespace[i(2228)].fromCartesian(this._position);this._position=Cesium__namespace.Cartesian3[i(t._0x75142c)](s.longitude,s.latitude,this._clampToTilesetHeight)}}this[i(t._0x1238ee)]=this._orientation.getValue(e.time),this[i(3263)](),this._updateCamera(),this._updateForEvent()}}_clearShowPositions(){const e={_0x246219:1699},t=_0x3a2b68;var i;this._polyline_positions=[],this._wall_positions=[],this._wall_minimumHeights=[],this._wall_maximumHeights=[],(i=this._child)!==null&&i!==void 0&&i[t(e._0x246219)]&&(this._child[t(1699)].availability=void 0)}[_0x3a2b68(3263)](){const e={_0x450d3f:2009,_0x472b6e:442,_0x451eab:606,_0x259a18:4076,_0x4df5cd:4076,_0x3438eb:2699,_0x2c84ff:3992,_0x3a16be:1187,_0xfdc800:1691,_0x3f15f9:1187,_0x435208:1866,_0x53ff53:1754,_0x1fd4c1:1941,_0x30ab40:1575,_0x449b12:1921},t=_0x3a2b68;var i,s,r,o,c,_,l;if((i=this._child.label)!==null&&i!==void 0&&i.show&&(this._child.label.position=this._position),(s=this._child[t(e._0x450d3f)])!==null&&s!==void 0&&s[t(e._0x472b6e)]&&(this[t(e._0x451eab)].billboard[t(e._0x259a18)]=this._position),(r=this._child.point)!==null&&r!==void 0&&r.show&&(this[t(606)].point[t(e._0x4df5cd)]=this._position),(o=this._child.model)!==null&&o!==void 0&&o.show){var d;this._modelMatrix=this._child.model[t(e._0x3438eb)](this._position,this._orientation_show),this._heading_reality=this._child.model[t(4175)],this[t(2894)]=this[t(e._0x451eab)].model._pitch_reality,this._roll_reality=this[t(606)].model._roll_reality,(d=this._child[t(e._0x2c84ff)])!==null&&d!==void 0&&d._primitive&&(this._child.model._primitive.modelMatrix=this._modelMatrix),this._child.model[t(e._0x3a16be)]=this._position}let f=![];if((c=this._child.polyline)!==null&&c!==void 0&&c[t(442)]&&!((_=this.options.polyline)!==null&&_!==void 0&&_.showAll)&&(this._flyok_index>=0&&this._position?(this[t(1866)]=this._getPositionsShow(),f=!![]):this._polyline_positions=[]),(l=this._child[t(e._0xfdc800)])!==null&&l!==void 0&&l.show)if(this._flyok_index>=0&&this[t(e._0x3f15f9)]){!f&&(this[t(1866)]=this._getPositionsShow());const b=[],C=[],P=this[t(e._0x435208)];for(let S=0;S<P.length;S++){const L=P[S],E=Cesium__namespace.Cartographic.fromCartesian(L);if(C[t(e._0x53ff53)](E.height),this[t(e._0x1fd4c1)].wall[t(1377)]){var g;P[S].hbgd=P[S].hbgd??getHeight((g=this[t(e._0x30ab40)])===null||g===void 0?void 0:g.scene,L,{has3dtiles:![]}),b.push(P[S][t(e._0x449b12)])}else b.push(0)}this._wall_positions=P,this._wall_minimumHeights=b,this._wall_maximumHeights=C}else this._wall_positions=[],this._wall_minimumHeights=[],this._wall_maximumHeights=[]}_getPositionsShow(){const e={_0x396cab:3354,_0x5eef0f:1187,_0x1b0d96:400,_0x4650fd:1754},t=_0x3a2b68;var i,s,r,o;let c=[];const _=(i=this.property)===null||i===void 0||(s=i[t(e._0x396cab)])===null||s===void 0?void 0:s._values;for(let l=0;l<=this._flyok_index;l++){const d=new Cesium__namespace.Cartesian3(_[l*3],_[l*3+1],_[l*3+2]);l>0&&Cesium__namespace[t(2978)].distance(c[c.length-1],d)<.01||c[t(1754)](d)}return this[t(e._0x5eef0f)]&&c[t(e._0x1b0d96)]>0&&Cesium__namespace.Cartesian3[t(3481)](c[c.length-1],this._position)>.01&&c[t(e._0x4650fd)](this[t(1187)]),(r=this.options)!==null&&r!==void 0&&(o=r.polyline)!==null&&o!==void 0&&o.maxDistance&&c[t(400)]>0&&(c=sliceByMaxDistance(c,this[t(1941)].polyline[t(2231)]),this._maxCacheCount>0&&(this._maxCacheCount=Math.max(this._maxCacheCount,c.length*2))),c}[_0x3a2b68(1940)](){const e={_0x8c2b3:3428,_0x2c8c88:3586,_0x1cf57e:1941,_0xbf61bd:4233,_0x2ce25b:2771,_0xfbcc25:2572,_0x267289:482,_0x2c1262:744,_0xdf13c6:3428},t=_0x3a2b68;if(this.options.camera)switch(this.options.camera[t(1603)]){case"gs":{const i=this.trackedEntity;this._map.clock.shouldAnimate&&this._map.trackedEntity!==i&&(this[t(1575)][t(e._0x8c2b3)]=i,i._needFlyToPoint=!![]),i._needFlyToPoint&&!this._map[t(e._0x2c8c88)]._needTrackedEntityUpdate&&(i._needFlyToPoint=![],this.flyToPoint({...this.options.camera,lock:!![],duration:0}));break}case"dy":{const i=this.trackedEntity;this._map[t(3428)]!==i&&(this._map.trackedEntity=i);let s=this[t(e._0x1cf57e)].camera.followedX||0;const r=this[t(1941)].camera.followedZ||0;s===0&&r===0&&(s=.1);let o;this.options.camera.offsetX&&(o=o||{},o.x=this.options[t(e._0xbf61bd)][t(e._0x2ce25b)]),this.options.camera[t(e._0xfbcc25)]&&(o=o||{},o.y=this[t(1941)].camera[t(2572)]),this.options[t(4233)][t(e._0x267289)]&&(o=o||{},o.z=this.options[t(4233)][t(482)]),this._map[t(e._0x2c1262)].camera.lookAtTransform(this.computeModelMatrix(o),new Cesium__namespace.Cartesian3(-s,0,r));break}case"sd":{const i=this.trackedEntity;this._map.trackedEntity!==i&&(this._map[t(e._0xdf13c6)]=i),this._map.scene[t(4233)].lookAtTransform(this.computeModelMatrix(),new Cesium__namespace[t(2978)](-1,0,this.options.camera.followedZ));break}default:{this._trackedEntity&&this._map.trackedEntity===this._trackedEntity&&(this._map.trackedEntity=void 0);break}}}computeModelMatrix(e){const t={_0x5de566:910},i=_0x3a2b68;!this._matrix4&&(this._matrix4=new Cesium__namespace[i(2478)],this._matrix3Scratch=new Cesium__namespace[i(1168)]);let s=this._position;if(!(!Cesium__namespace.defined(s)||!this._orientation_show)){if(e){const r=new Cesium__namespace.HeadingPitchRoll(this._heading,this._pitch,this[i(3649)]);s=getPositionByHprAndOffset(s,new Cesium__namespace.Cartesian3(e.x||0,e.y||0,e.z||0),r)}return this._matrix4=Cesium__namespace.Matrix4.fromRotationTranslation(Cesium__namespace.Matrix3.fromQuaternion(this[i(t._0x5de566)],this._matrix3Scratch),s,this._matrix4),this._matrix4}}_updateForEvent(){const e={_0x518795:1187,_0x59671c:3467,_0x11c51f:407,_0x368720:782},t=_0x3a2b68,i=this[t(1058)];if(Cesium__namespace.defined(i)&&(this[t(e._0x518795)]&&!this._position.equals(this[t(e._0x59671c)])&&(this.fire(EventType.change,{index:i,counts:this._counts,position:this._position,orientation:this._orientation_show}),this[t(e._0x59671c)]=this[t(e._0x518795)]?this._position[t(2957)]():void 0),i!==this[t(2225)])){if(Cesium__namespace[t(e._0x11c51f)](this._last_fireIndex)&&this._last_fireIndex+1!==i)for(;++this[t(2225)]<i;)this.fire(EventType.endItem,{counts:this._counts,index:this._last_fireIndex});this.fire(EventType[t(e._0x368720)],{counts:this._counts,index:i}),i===this._counts-1&&this.fire(EventType.end),this._last_fireIndex=i}}[_0x3a2b68(472)](e,t){const i={_0x4d989b:400,_0x445a09:2247,_0x5234f6:4379,_0xe75e84:3804,_0x4c1f12:3236,_0x454764:4224,_0x5a2bf3:2501,_0x5b26d3:3730,_0x55316c:3345,_0x131599:407,_0x4faf02:1911,_0x583f9d:2654,_0x220e09:1899},s=_0x3a2b68;var r;const o=(r=this.property)===null||r===void 0?void 0:r[s(3354)],c=o==null?void 0:o._times,_=c[s(i._0x4d989b)];if(_===0)return;this[s(i._0x445a09)]=_;let l;const d=Cesium__namespace.Cartesian3,f=o._values;if(this._flyok_index=Cesium__namespace.binarySearch(c,e,Cesium__namespace[s(557)].compare),this._flyok_index<0){if(this._flyok_index=~this._flyok_index,this._flyok_index===0){const $=c[this._flyok_index];if(l=o._backwardExtrapolationDuration,o._backwardExtrapolationType===Cesium__namespace.ExtrapolationType.NONE||l!==0&&Cesium__namespace.JulianDate.secondsDifference($,e)>l)return;if(o._backwardExtrapolationType===Cesium__namespace[s(i._0x5234f6)][s(2452)])return d.unpack(f,0,t)}if(this[s(1058)]>=_){this._flyok_index=_-1;const $=c[this._flyok_index];if(l=o[s(i._0xe75e84)],o[s(651)]===Cesium__namespace.ExtrapolationType.NONE||l!==0&&Cesium__namespace.JulianDate.secondsDifference(e,$)>l)return;if(o[s(651)]===Cesium__namespace.ExtrapolationType[s(2452)])return this._flyok_index=_-1,d[s(i._0x4c1f12)](f,this._flyok_index*d.packedLength,t)}const g=o._xTable,b=o[s(3381)],C=o._interpolationAlgorithm,P=o[s(i._0x454764)],S=o._inputOrder;if(o._updateTableLength){o._updateTableLength=![];const $=Math[s(i._0x5a2bf3)](C[s(i._0x5b26d3)](o._interpolationDegree,S),_);$!==o._numberOfPoints&&(o._numberOfPoints=$,g.length=$,b.length=$*P)}const L=o._numberOfPoints-1;if(L<1)return this._flyok_index=0,void 0;let E=0,M=_-1;if(M-E+1>=L+1){let $=this._flyok_index-(L/2|0)-1;$<E&&($=E);let B=$+L;B>M&&(B=M,$=B-L,$<E&&($=E)),E=$,M=B}const R=M-E+1;for(let $=0;$<R;++$)g[$]=Cesium__namespace.JulianDate[s(i._0x55316c)](c[E+$],c[M]);if(Cesium__namespace[s(i._0x131599)](d[s(i._0x4faf02)]))d.convertPackedArrayForInterpolation(f,E,M,b);else{let $=0;const B=o._packedLength;let F=E*B;const z=(M+1)*B;for(;F<z;)b[$]=f[F],F++,$++}const k=Cesium__namespace.JulianDate[s(3345)](e,c[M]);let N;if(S===0||!Cesium__namespace.defined(C.interpolate))N=C.interpolateOrderZero(k,g,b,P,o._interpolationResult);else{const $=Math[s(i._0x583f9d)](P/(S+1));N=C.interpolate(k,g,b,$,S,S,o._interpolationResult)}return this._flyok_index=E,Cesium__namespace.defined(d.unpackInterpolationResult)?d[s(i._0x220e09)](N,f,E,M,t):d.unpack(N,0,t)}return d.unpack(f,this._flyok_index*o._packedLength,t)}[_0x3a2b68(2176)](){var e,t;const i=(e=this.property)===null||e===void 0||(t=e._property)===null||t===void 0?void 0:t._times;!i||i.length===0||this.property.removeSamples(new Cesium__namespace.TimeInterval({start:i[0],stop:i[i.length-1]}))}[_0x3a2b68(1737)](e){const t=_0x3a2b68;var i,s,r,o;const c=(i=this[t(4332)])===null||i===void 0||(s=i._property)===null||s===void 0?void 0:s._times,_=(r=this.property)===null||r===void 0||(o=r._property)===null||o===void 0?void 0:o._values;if(!c||c.length===0)return;const l=[];for(let f=0,g=c.length;f<g;f++)l.push(new Cesium__namespace[t(2978)](_[f*3],_[f*3+1],_[f*3+2]));return getRectangle(l,e==null?void 0:e[t(4041)])}getCoordinates(e){const t={_0x114916:3354,_0x86a497:2566,_0x3c2ed3:2978,_0x3323cd:1754},i=_0x3a2b68;var s,r,o,c;const _=(s=this.property)===null||s===void 0||(r=s[i(t._0x114916)])===null||r===void 0?void 0:r[i(t._0x86a497)],l=(o=this.property)===null||o===void 0||(c=o._property)===null||c===void 0?void 0:c[i(2990)];if(!_||_.length===0)return[];const d=[];for(let f=0,g=_.length;f<g;f++){const b=LngLatPoint.fromCartesian(new Cesium__namespace[i(t._0x3c2ed3)](l[f*3],l[f*3+1],l[f*3+2])),C=b.toArray(e);C.push(Cesium__namespace[i(557)].toDate(_[f]).getTime()),d[i(t._0x3323cd)](C)}return d}[_0x3a2b68(2258)](e={}){const t=_0x3a2b68;if(!this._map)return;const i=this._position;if(!i)return;let s;if(Cesium__namespace.defined(e.heading)){var r;s=e.heading+Cesium__namespace.Math.toDegrees(((r=this[t(417)])===null||r===void 0?void 0:r.heading)||0)}this._map.flyToPoint(i,{...e,heading:s})}static[_0x3a2b68(1667)](){const e={_0x4c4c3c:1941,_0x4c61ea:4233},t=_0x3a2b68;var i,s,r;(i=globeLastRoam)!==null&&i!==void 0&&(s=i[t(e._0x4c4c3c)])!==null&&s!==void 0&&(r=s.camera)!==null&&r!==void 0&&r.type&&(globeLastRoam[t(1941)][t(e._0x4c61ea)].type=""),globeLastRoam=null}setCameraOptions(e){const t={_0x22dc61:4233,_0x382387:1941},i=_0x3a2b68;var s;Route[i(1667)](),this.options[i(4233)]?this.options.camera=merge(this.options.camera,e):e?this.options[i(t._0x22dc61)]=e:this[i(t._0x382387)].camera={type:""},((s=this.options[i(4233)])===null||s===void 0?void 0:s.type)!==""&&(globeLastRoam=this),e&&e.type==="gs"&&e[i(3878)]&&this.flyToPoint({...e,duration:0})}[_0x3a2b68(3037)](){logWarn("Route 类不支持autoSurfaceHeight方法 ！")}pause(){const e={_0x464f26:3190},t=_0x3a2b68;this[t(1575)]&&(this._map.clock.shouldAnimate=![],this._trackedEntity&&this._map.trackedEntity===this[t(e._0x464f26)]&&(this._map.trackedEntity=void 0))}proceed(){this._map&&(this._map.clock.shouldAnimate=!![])}[_0x3a2b68(396)](){const e={_0x2249c9:3377},t={_0x5ceb36:1187},i=_0x3a2b68;return!this[i(3377)]&&(this._popupPosition=new Cesium__namespace.CallbackProperty(s=>this[i(t._0x5ceb36)],![])),this[i(e._0x2249c9)]}destroy(e){const t=_0x3a2b68;this.eachChildGraphic(i=>{i.destroy(e)}),super[t(2619)](e)}}register$4("route",Route);class FixedRoute extends Route{constructor(e={}){const t=_0x3a2b68;super(e),this[t(1941)][t(4321)]=this.options.showStop??!![],this[t(1941)][t(3751)]=this.options.updateClock??!![]}get startTime(){return this._startTime}get stopTime(){return this._stopTime}get points(){return this._points}set points(e){const t=_0x3a2b68;this[t(2694)]=e}get[_0x3a2b68(2694)](){const e=_0x3a2b68;return this[e(2967)].map(t=>t[e(1187)])}set[_0x3a2b68(2694)](e){const t={_0x51be2b:1941,_0x5639bb:1941,_0x1f93d2:557,_0x5a3150:545,_0x541aab:1941,_0x4d1cc6:3367,_0x18a8a3:2978,_0x52fecc:1731,_0x58eabf:4245,_0x43ce43:2806,_0x5706ae:1185,_0x15eaa7:2756,_0x1260b4:3737,_0x54d135:2978,_0x2a1ab7:1941,_0x2c7697:3345,_0x490359:557,_0x37c72b:1272,_0x813394:1187,_0x4d0d05:2074,_0x418b28:371,_0x392b29:1742,_0x39b8d4:2708,_0x39653c:606,_0x42c9fc:2694},i={_0x1d415d:4275,_0x19b86b:2978,_0x134912:1879,_0x26a1c6:3481},s=_0x3a2b68;if(!this._map||!e||!Array.isArray(e)||e.length===0)return;const r=LngLatArray.toPoints(e);this.clearPosition();let o;if(this[s(t._0x51be2b)].startTime)isString(this[s(t._0x5639bb)].startTime)?this.options.startTime.indexOf("Z")===-1?o=Cesium__namespace[s(t._0x1f93d2)].fromDate(new Date(this[s(t._0x5639bb)].startTime)):o=Cesium__namespace.JulianDate.fromIso8601(this.options.startTime):this.options[s(1431)]instanceof Date?o=Cesium__namespace.JulianDate[s(673)](this.options.startTime):o=this.options.startTime;else if(this.options.timeField){const k=r[0][this.options.timeField];o=Cesium__namespace.JulianDate.fromDate(new Date(k))}else o=this._map.clock[s(t._0x5a3150)];const c=this[s(t._0x541aab)].speed,_=c&&Array.isArray(c),l=100;function d(k,N){return N.speed?N.speed:N._speed?N._speed:_?(c[k]||l)/3.6:(c||l)/3.6}const f=this[s(1941)][s(t._0x4d1cc6)]??0;let g=0,b=0,C,P;const S=[];let L=![];const E=.001;function M(k,N){const $=s;for(let B=k-1;B>=0;B--){const F=r[B],z=F._position||Cesium__namespace[$(2978)][$(i._0x1d415d)](F.lng,F.lat,F[$(1879)]+f);if(F._position=z,Cesium__namespace.Cartesian3.distance(N,z)!==0)return getOnLinePointByLen(z,N,E,!![])}for(let B=k-1,F=r.length;B<F;B++){const z=r[B],Y=z[$(1187)]||Cesium__namespace[$(i._0x19b86b)].fromDegrees(z.lng,z.lat,z[$(i._0x134912)]+f);if(z._position=Y,Cesium__namespace[$(i._0x19b86b)][$(i._0x26a1c6)](N,Y)!==0)return getOnLinePointByLen(N,Y,E,![])}return null}this._pauseTimeCounts=0;for(let k=0,N=r.length;k<N;k++){let $=r[k];if($._pausePoint)continue;let B=$._position||Cesium__namespace[s(t._0x18a8a3)].fromDegrees($.lng,$.lat,$.alt+f);if(k===0){if(P=o.clone(),this[s(4332)].addSample(P,B),$[s(1187)]=B,$[s(t._0x52fecc)]=P,$._distance=b,$[s(t._0x58eabf)]=g,$[s(371)]=0,$._index=k,S[s(1754)]($),Cesium__namespace.defined($[s(2782)])){this._orientation=new Cesium__namespace.SampledProperty(Cesium__namespace.Quaternion),L=!![];const F=new Cesium__namespace.HeadingPitchRoll(Cesium__namespace[s(t._0x43ce43)].toRadians($.heading||0),Cesium__namespace.Math.toRadians($.pitch||0),Cesium__namespace.Math[s(t._0x5706ae)]($.roll||0));this._orientation[s(t._0x15eaa7)](P,Cesium__namespace[s(t._0x1260b4)].headingPitchRollQuaternion(B,F))}}else{let F=Cesium__namespace[s(t._0x54d135)][s(3481)](B,C);if(F===0&&(F=E,B=M(k,B),!B))continue;let z,Y;if(this.options.timeField){const J=new Date($[this[s(t._0x2a1ab7)][s(972)]]),q=Cesium__namespace.JulianDate[s(673)](J);z=Cesium__namespace.JulianDate[s(t._0x2c7697)](q,P)||.01,P=q,Y=F/z,g+=z}else Y=d(k-1,$),z=F/Y,z<.01&&(z=.01),g+=z,P=Cesium__namespace[s(t._0x490359)].addSeconds(o,g,new Cesium__namespace[s(t._0x1f93d2)]);if(b+=F,this[s(4332)][s(t._0x15eaa7)](P,B),L){const J=new Cesium__namespace.HeadingPitchRoll(Cesium__namespace[s(2806)].toRadians($[s(2782)]||0),Cesium__namespace.Math.toRadians($.pitch||0),Cesium__namespace.Math.toRadians($.roll||0));this[s(t._0x37c72b)][s(t._0x15eaa7)](P,Cesium__namespace[s(3737)][s(1623)](B,J))}if($[s(t._0x813394)]=B,$._time=P,$._distance=b,$._second=g,$._speed=Y,$[s(t._0x4d0d05)]=k,S.push($),this[s(1941)].pauseTime){const J=M(k,B);if(!J)continue;let q;typeof this[s(1941)].pauseTime=="function"?q=this.options.pauseTime(k,J):q=this.options.pauseTime,q>0&&(g+=q,P=Cesium__namespace[s(t._0x490359)].addSeconds(o,g,new Cesium__namespace[s(557)]),this[s(4332)].addSample(P,J),b+=E,$=clone($),$._pausePoint=!![],$._position=J,$._time=P,$._distance=b,$[s(4245)]=g,$[s(t._0x418b28)]=0,$._index=k,S.push($),this._pauseTimeCounts++)}}C=B}if(this._points=S,this[s(1269)]=o,this._stopTime=P.clone(),this.second_all=g,this[s(t._0x392b29)]=b,this.options[s(t._0x39b8d4)]&&this.property.setInterpolationOptions({interpolationDegree:this.options.interpolationDegree??2,interpolationAlgorithm:this[s(1941)][s(1555)]??Cesium__namespace.HermitePolynomialApproximation}),this[s(t._0x2a1ab7)].showStop){var D,R;this.backToFirst(),(D=this.options)!==null&&D!==void 0&&(R=D.polyline)!==null&&R!==void 0&&R.showAll&&(this[s(t._0x39653c)].polyline[s(t._0x42c9fc)]=this.positions)}this.fire(EventType.updatePosition,{position:this.property})}get[_0x3a2b68(2199)](){return this._isStart}get info(){return this[_0x3a2b68({_0x4056d4:3643}._0x4056d4)]}_addedHook(e){const t={_0x2f4127:3992,_0x2d85c3:2449,_0x412437:2694},i={_0x4add16:583},s=_0x3a2b68;var r;this.show&&(this._addChildGraphic(),(r=this[s(t._0x2f4127)])!==null&&r!==void 0&&r[s(t._0x2d85c3)]&&this.model.readyPromise.then(()=>{const o=s;this._readyPromise[o(i._0x4add16)](this)}),this[s(2694)]=this[s(1941)][s(t._0x412437)],this._clearShowPositions())}[_0x3a2b68(1651)](e,t){const i={_0x1cd2e1:2694},s=_0x3a2b68;for(const r in t)switch(r){case s(4385):case"startTime":this[s(i._0x1cd2e1)]=this[s(1941)].positions;break;default:super._setOptionsHook(e,t);break}}[_0x3a2b68(3702)](){const e={_0x33aee6:1575},t={_0x50920a:3505},i=_0x3a2b68;var s;if(!(!this._map||this._isStart)){if(!Cesium__namespace.defined(this[i(2967)])||this._points.length===0){logError$1("没有坐标数据，漫游路线启动失败",this._points);return}this._isStart=!![],this.positions=this._points,(s=this._child[i(3992)])!==null&&s!==void 0&&s.show&&this.options.updateClock?(this[i(e._0x33aee6)].clock[i(3356)]=![],this._map.clock.currentTime=this.startTime.clone(),this._child.model.readyPromise.then(()=>{this[i(t._0x50920a)]()})):this._start()}}_start(){const e={_0x490f9f:3356,_0x5bbdca:2573,_0x164781:2257,_0x282889:1439,_0x5b24fa:974,_0x4c4387:3764,_0x60f20a:3702},t=_0x3a2b68;var i;if(this.options.updateClock&&(this._map.clock[t(e._0x490f9f)]=!![],this._map.clock.currentTime=this[t(1431)].clone(),!this[t(1941)][t(e._0x5bbdca)]&&this[t(1941)].clockRange&&(this._bak_clockRange=this._map[t(2257)].clockRange,this._bak_startTime=this._map[t(e._0x164781)].startTime,this._bak_stopTime=this._map.clock.stopTime,this[t(1575)].clock.clockRange=this.options.clockRange??Cesium__namespace.ClockRange[t(4380)],this._map.clock.startTime=this.startTime[t(2957)](),this._map.clock[t(e._0x282889)]=this.stopTime.clone(),this._map.controls.timeline&&this._map.controls[t(e._0x5b24fa)].zoomTo(this.startTime,this.stopTime))),(i=this._child[t(1699)])!==null&&i!==void 0&&i[t(e._0x4c4387)]){var s;let r=this._stopTime;((s=this.property)===null||s===void 0?void 0:s.forwardExtrapolationType)===Cesium__namespace.ExtrapolationType.HOLD&&(r=Cesium__namespace.JulianDate[t(4160)](r,365,new Cesium__namespace.JulianDate)),this._child.path.availability=new Cesium__namespace[t(1636)]([new Cesium__namespace[t(632)]({start:this._startTime,stop:r})])}this.fire(EventType[t(e._0x60f20a)]),this[t(3864)]()}stop(){const e={_0x43f268:1575,_0x104139:1575,_0x252d92:1941},t=_0x3a2b68;!this._isStart||!this[t(e._0x43f268)]||(this[t(e._0x104139)].trackedEntity=void 0,this[t(1992)](),this[t(e._0x252d92)].showStop?this.backToFirst():(this._position=void 0,this[t(3263)]()),this[t(3507)](),this[t(3967)]=![],this[t(1109)](EventType.end),this.fire(EventType.updatePosition,{position:this._position}))}backToFirst(){const e={_0x4947d8:1272},t=_0x3a2b68;this._flyok_index=0,this._position=this._points[0]._position,this._orientation_show=this[t(e._0x4947d8)][t(3479)](this.startTime),this._updatePosition(),this._updateForEvent(![])}_updatePositionEx(){const e={_0x51c49f:606},t=_0x3a2b68;var i,s;(i=this.options)!==null&&i!==void 0&&(s=i.polyline)!==null&&s!==void 0&&s.showAll&&(this[t(e._0x51c49f)].polyline.positions=this.positions)}_updateForEvent(e=!![]){const t={_0x5c0113:2967,_0x5b13ea:400,_0x3e4b3e:3138,_0x469802:2101,_0x14da53:3847,_0x183b8b:557,_0x108af9:545,_0x478ba2:4245,_0x17405d:3643,_0x358574:1187,_0x401451:782,_0x595151:2247,_0x102ff9:2602,_0xa8b354:1941,_0x176640:972,_0x5b1410:673,_0x2d9f10:3345,_0x4d0413:1575,_0x2da273:2967,_0x5bc706:2967,_0x300935:4282,_0x3995a5:632,_0x31b454:1269,_0x367199:3935},i=_0x3a2b68;if(!this._points)return;let s=this._flyok_index;const r=this._points[this[i(t._0x5c0113)].length-1],o=this[i(t._0x5c0113)][s];if(!o)return;let c=this._counts??this[i(2967)][i(t._0x5b13ea)];this[i(t._0x3e4b3e)]>0&&(s=o._index,c-=this._pauseTimeCounts);const _=LngLatPoint[i(t._0x469802)](this._position);let l=o[i(t._0x14da53)]+(this._position?Cesium__namespace.Cartesian3.distance(this._position,o._position):0);l>r._distance&&(l=r._distance);let d=0;if(s>0&&(d=Cesium__namespace[i(t._0x183b8b)].secondsDifference(this._map.clock[i(t._0x108af9)],this[i(1431)]),d>r[i(4245)]&&(d=r[i(t._0x478ba2)])),this[i(t._0x17405d)]={index:s,counts:c,point:_,position:this._position,orientation:this._orientation_show,second:d,second_all:r._second,distance:l,distance_all:r._distance,speed:o._speed},!!e){if(this._position&&!this._position.equals(this._last_firePosition)&&(this.fire(EventType.change,this._timeinfo),this[i(3467)]=this._position?this[i(t._0x358574)].clone():void 0),s!==this[i(2225)]){if(Cesium__namespace.defined(this._last_fireIndex)&&this._last_fireIndex+1!==s)for(;++this._last_fireIndex<s;)this.fire(EventType[i(782)],{counts:c,index:this[i(2225)],point:this._points[this._last_fireIndex]});this.fire(EventType[i(t._0x401451)],{counts:c,index:s,point:o}),s>=this[i(t._0x595151)]-1&&this.fire(EventType[i(t._0x102ff9)]),this._last_fireIndex=s}if(d>=r._second){if(this[i(t._0xa8b354)].clockLoop&&!this.options.clockRange){if(this.unbindUpdateEvent(),this.options.startTime)delete this.options.startTime;else if(this.options.timeField){const g=this._points[0][this.options[i(t._0x176640)]],b=Cesium__namespace[i(t._0x183b8b)][i(t._0x5b1410)](new Date(g)),C=Cesium__namespace[i(557)][i(t._0x2d9f10)](this[i(t._0x4d0413)].clock.currentTime,b);for(let P=0;P<this._points[i(t._0x5b13ea)];P++){const S=Cesium__namespace[i(t._0x183b8b)][i(673)](new Date(this[i(t._0x2da273)][P][this.options[i(t._0x176640)]]));this[i(t._0x5bc706)][P][this.options.timeField]=Cesium__namespace[i(t._0x183b8b)].toDate(Cesium__namespace.JulianDate.addSeconds(S,C,new Cesium__namespace.JulianDate))}}if(this.positions=this._points,this[i(606)].path){var f;let g=this[i(635)];((f=this[i(4332)])===null||f===void 0?void 0:f[i(t._0x300935)])===Cesium__namespace[i(4379)].HOLD&&(g=Cesium__namespace.JulianDate.addDays(g,365,new Cesium__namespace.JulianDate)),this._child.path.availability=new Cesium__namespace.TimeIntervalCollection([new Cesium__namespace[i(t._0x3995a5)]({start:this[i(t._0x31b454)],stop:g})])}this.bindUpdateEvent();return}this.options[i(t._0x367199)]&&this.stop()}}}autoSurfaceHeight(e={}){const t={_0x50f946:744},i=this._points;let s=0;const r=[],o=[],c=[],_=[],l=[];return new Promise((d,f)=>{const g={_0xc540ed:2694},b={_0x40cdce:371,_0x59c15e:1754,_0x12c687:3265,_0x4b989f:2101},C=_0x20dc,P=[];i.forEach(S=>{const L=_0x20dc;P.push(S[L(1187)])}),computeStepSurfaceLine({objectsToExclude:this._layer.objectsToExclude,...e,exact:!![],scene:this._map[C(t._0x50f946)],positions:P,endItem:(S,L,E)=>{const M=C;var D,R;if(!this._map)return;const k=i[E];if(L)l.push(k);else for(let F=0;F<S.length;F++){const z=LngLatPoint.fromCartesian(S[F]);z._speed=k[M(b._0x40cdce)],l[M(b._0x59c15e)](z)}const N=((D=i[E])===null||D===void 0?void 0:D.alt)||0,$=((R=i[E+1])===null||R===void 0?void 0:R.alt)||0,B=($-N)/S.length;for(let F=0;F<S.length;F++){F!==0&&(s+=Cesium__namespace.Cartesian3[M(3481)](S[F],S[F-1])),r.push(Number(s[M(b._0x12c687)](1)));const z=LngLatPoint[M(b._0x4b989f)](S[F]);_[M(1754)](z);const Y=L?0:z.alt;o.push(Y);const J=Number((N+B*F).toFixed(1));c[M(1754)](J)}},end:()=>{const S=C;this._map&&(this._terrainHeight={arrLength:r,arrFxgd:c,arrHbgd:o,arrPoint:_},this[S(g._0xc540ed)]=l,d(l))}})})}clampToGround(e){return this[_0x3a2b68(3037)](e)}getTerrainHeight(e={}){const t={_0x549dfd:1790},i=this._points;return new Promise((s,r)=>{const o={_0x406c34:400,_0x404d6e:1879},c=_0x20dc;if(this._terrainHeight){s(this[c(4234)]);return}this._getTerrainHeight_ing=!![];let _=0;const l=[],d=[],f=[],g=[];computeStepSurfaceLine({objectsToExclude:this._layer.objectsToExclude,...e,exact:!![],scene:this._map.scene,positions:i,endItem:(b,C,P)=>{const S=c,L=i[P].alt,E=i[P+1].alt,M=(E-L)/b[S(o._0x406c34)];for(let D=0;D<b.length;D++){D!==0&&(_+=Cesium__namespace.Cartesian3.distance(b[D],b[D-1])),l.push(Number(_.toFixed(1)));const R=LngLatPoint.fromCartesian(b[D]);g.push(R);const k=C?0:R[S(o._0x404d6e)];d.push(k);const N=Number((L+M*D).toFixed(1));f[S(1754)](N)}},end:()=>{const b=c;this[b(t._0x549dfd)]=![],this._terrainHeight={arrLength:l,arrFxgd:f,arrHbgd:d,arrPoint:g},s(this._terrainHeight)}})})}}register$4("fixedRoute",FixedRoute);var MultipleLightShader=`uniform sampler2D colorTexture;
uniform sampler2D depthTexture;

const int LightNum = Mars3D_LightNumValue;
uniform vec4 lightPositionEC[LightNum];
uniform float intensity[LightNum];
uniform vec3 lightColor[LightNum];
uniform vec3 direction[LightNum];
uniform float outerConeCos[LightNum];
uniform float innerConeCos[LightNum];
uniform mat4 shadowMapMatrix[LightNum];
uniform vec4 shadowMapTexelSizeDepthBiasAndNormalShadingSmooth[LightNum];
uniform vec2 shadowMapDarknessType[LightNum];

Mars3D_LightShadowMapsShader in vec2 v_textureCoordinates;

const float M_PI = 3.141592653589793;

vec3 getEyeCoordinate3FromWindowCoordinateMars3D(vec2 fragCoord, float logDepthOrDepth) {
vec4 eyeCoordinate = czm_windowToEyeCoordinates(fragCoord, logDepthOrDepth);
return eyeCoordinate.xyz / eyeCoordinate.w;
}

vec3 vectorFromOffsetMars3D(vec4 eyeCoordinate, vec2 positiveOffset) {
vec2 glFragCoordXY = v_textureCoordinates.xy * czm_viewport.zw;
float upOrRightLogDepth = czm_unpackDepth(texture(depthTexture, (glFragCoordXY + positiveOffset) / czm_viewport.zw));
float downOrLeftLogDepth = czm_unpackDepth(texture(depthTexture, (glFragCoordXY - positiveOffset) / czm_viewport.zw));

bvec2 upOrRightInBounds = lessThan(glFragCoordXY + positiveOffset, czm_viewport.zw);
float useUpOrRight = float(upOrRightLogDepth > 0.0 && upOrRightInBounds.x && upOrRightInBounds.y);
float useDownOrLeft = float(useUpOrRight == 0.0);
vec3 upOrRightEC = getEyeCoordinate3FromWindowCoordinateMars3D(glFragCoordXY + positiveOffset, upOrRightLogDepth);
vec3 downOrLeftEC = getEyeCoordinate3FromWindowCoordinateMars3D(glFragCoordXY - positiveOffset, downOrLeftLogDepth);
return (upOrRightEC - (eyeCoordinate.xyz / eyeCoordinate.w)) * useUpOrRight + ((eyeCoordinate.xyz / eyeCoordinate.w) - downOrLeftEC) * useDownOrLeft;
}

float getRangeAttenuationMars3D(float range, float d) {
if(range <= 0.0) {
return 1.0 / pow(d, 2.0);
}
return max(min(1.0 - pow(d / range, 4.0), 1.0), 0.0) / pow(d, 2.0);
}

float getSpotAttenuationMars3D(vec3 pointToLight, vec3 direction, float outerConeCos, float innerConeCos) {
float actualCos = dot(normalize(direction), normalize(- pointToLight));
if(actualCos > outerConeCos) {
if(actualCos < innerConeCos) {
return smoothstep(outerConeCos, innerConeCos, actualCos);
}
return 1.0;
}
return 0.0;
}

vec3 getLightIntensityMars3D(vec3 color, float intensity, float type, float range, vec3 pointToLight, vec3 direction, float outerConeCos, float innerConeCos) {
float rangeAttenuation = 1.0;
float spotAttenuation = 1.0;
rangeAttenuation = getRangeAttenuationMars3D(range, length(pointToLight));
if(type == 2.0) {
spotAttenuation = getSpotAttenuationMars3D(pointToLight, direction, outerConeCos, innerConeCos);
}
return rangeAttenuation * spotAttenuation * intensity * color;
}

float czm_private_shadowVisibility(float visibility, float nDotL, float normalShadingSmooth, float darkness) {
float strength = clamp(nDotL / normalShadingSmooth, 0.0, 1.0);
visibility *= strength;
visibility = max(visibility, darkness);
return visibility;
}

struct my_shadowParameters {
vec3 texCoordsCube;
vec2 texCoords;
float depthBias;
float depth;
float nDotL;
vec2 texelStepSize;
float normalShadingSmooth;
float darkness;
};

float shadowVisibilityCubeMars3D(samplerCube shadowMap, my_shadowParameters shadowParameters) {
float depthBias = shadowParameters.depthBias;
float depth = shadowParameters.depth;
float nDotL = shadowParameters.nDotL;
float normalShadingSmooth = shadowParameters.normalShadingSmooth;
float darkness = shadowParameters.darkness;
vec3 uvw = shadowParameters.texCoordsCube;

depth -= depthBias;
return czm_shadowDepthCompare(shadowMap, uvw, depth);
}
float shadowVisibility2D(sampler2D shadowMap, my_shadowParameters shadowParameters) {
float depthBias = shadowParameters.depthBias;
float depth = shadowParameters.depth;
float nDotL = shadowParameters.nDotL;
float normalShadingSmooth = shadowParameters.normalShadingSmooth;
float darkness = shadowParameters.darkness;
vec2 uv = shadowParameters.texCoords;

depth -= depthBias;
return czm_shadowDepthCompare(shadowMap, uv, depth);
}

vec3 getPointLightTotalColorMars3D(vec3 normalEC, vec3 positionEC, int i, samplerCube lightShadowMapCube) {
vec4 lightPEC = lightPositionEC[i];
vec2 shadowMapDT = shadowMapDarknessType[i];
vec3 pointToLightEC = positionEC - lightPEC.xyz;
float pointToLightECLength = length(pointToLightEC);
vec3 l = normalize(pointToLightEC);
float NdotL = clamp(dot(- normalEC, l), 0.0, 1.0);

float visibility = 0.0;
float radius = lightPEC.w;
float type = shadowMapDT.y;

if(pointToLightECLength <= radius) {
vec4 shadowMapTSDBANSS = shadowMapTexelSizeDepthBiasAndNormalShadingSmooth[i];

my_shadowParameters shadowParameters;
shadowParameters.texelStepSize = shadowMapTSDBANSS.xy;
shadowParameters.depthBias = shadowMapTSDBANSS.z;
shadowParameters.normalShadingSmooth = shadowMapTSDBANSS.w;
shadowParameters.darkness = shadowMapDT.x;
shadowParameters.depth = pointToLightECLength / radius;
shadowParameters.nDotL = NdotL;
shadowParameters.texCoordsCube = czm_inverseViewRotation * l;
visibility = shadowVisibilityCubeMars3D(lightShadowMapCube, shadowParameters);
}

if(visibility == 1.0) {
vec3 colorIntensity = getLightIntensityMars3D(lightColor[i], intensity[i], type, lightPEC.w, pointToLightEC, direction[i], outerConeCos[i], innerConeCos[i]);
return NdotL * colorIntensity;
}
return vec3(0.0);
}

vec3 getSpotLightTotalColorMars3D(vec3 normalEC, vec3 positionEC, int i, sampler2D lightShadowMap2D) {
vec4 lightPEC = lightPositionEC[i];
vec2 shadowMapDT = shadowMapDarknessType[i];
vec3 pointToLightEC = positionEC - lightPEC.xyz;
vec3 l = normalize(pointToLightEC);
float NdotL = clamp(dot(- normalEC, l), 0.0, 1.0);

float visibility = 0.0;
float type = shadowMapDT.y;

vec4 shadowPosition = shadowMapMatrix[i] * vec4(positionEC, 1.0);
shadowPosition /= shadowPosition.w;
if(! (any(lessThan(shadowPosition.xyz, vec3(0.0))) || any(greaterThan(shadowPosition.xyz, vec3(1.0))))) {
vec4 shadowMapTSDBANSS = shadowMapTexelSizeDepthBiasAndNormalShadingSmooth[i];
my_shadowParameters shadowParameters;
shadowParameters.texelStepSize = shadowMapTSDBANSS.xy;
shadowParameters.depthBias = shadowMapTSDBANSS.z;
shadowParameters.normalShadingSmooth = shadowMapTSDBANSS.w;
shadowParameters.darkness = shadowMapDT.x;
shadowParameters.texCoords = shadowPosition.xy;
shadowParameters.depth = shadowPosition.z;
shadowParameters.nDotL = NdotL;
visibility = shadowVisibility2D(lightShadowMap2D, shadowParameters);
}

if(visibility == 1.0) {
vec3 colorIntensity = getLightIntensityMars3D(lightColor[i], intensity[i], type, lightPEC.w, pointToLightEC, direction[i], outerConeCos[i], innerConeCos[i]);
return NdotL * colorIntensity;
}
return vec3(0.0);
}

void main() {
  vec4 color = texture(colorTexture, v_textureCoordinates);
  float logDepthOrDepth = czm_unpackDepth(texture(depthTexture, v_textureCoordinates));
  if(logDepthOrDepth >= 1.0) {
    out_FragColor = color;
    return;
  }

  vec4 eyeCoordinate = czm_windowToEyeCoordinates(v_textureCoordinates.xy * czm_viewport.zw, logDepthOrDepth);
  vec3 downUp = vectorFromOffsetMars3D(eyeCoordinate, vec2(0.0, 1.0));
  vec3 leftRight = vectorFromOffsetMars3D(eyeCoordinate, vec2(1.0, 0.0));
  vec3 normalEC = normalize(cross(leftRight, downUp));
  vec3 positionEC = eyeCoordinate.xyz / eyeCoordinate.w;

  vec3 totalColor = vec3(0.0);

  Mars3D_ShadowVisibilityShader out_FragColor = vec4(color.xyz + totalColor, 1.0);
}
`,MultipleLightNoShadowShader=`uniform sampler2D colorTexture;
uniform sampler2D depthTexture;

const int LightNum = Mars3D_LightNumValue;
uniform vec4 lightPositionEC[LightNum];
uniform float intensity[LightNum];
uniform vec3 lightColor[LightNum];
uniform vec3 direction[LightNum];
uniform float outerConeCos[LightNum];
uniform float innerConeCos[LightNum];
uniform vec2 shadowMapDarknessType[LightNum];

in vec2 v_textureCoordinates;

const float M_PI = 3.141592653589793;

vec3 getEyeCoordinate3FromWindowCoordinateMars3D(vec2 fragCoord, float logDepthOrDepth) {
  vec4 eyeCoordinate = czm_windowToEyeCoordinates(fragCoord, logDepthOrDepth);
  return eyeCoordinate.xyz / eyeCoordinate.w;
}

vec3 vectorFromOffsetMars3D(vec4 eyeCoordinate, vec2 positiveOffset) {
  vec2 glFragCoordXY = v_textureCoordinates.xy * czm_viewport.zw;
  float upOrRightLogDepth = czm_unpackDepth(texture(depthTexture, (glFragCoordXY + positiveOffset) / czm_viewport.zw));
  float downOrLeftLogDepth = czm_unpackDepth(texture(depthTexture, (glFragCoordXY - positiveOffset) / czm_viewport.zw));

  bvec2 upOrRightInBounds = lessThan(glFragCoordXY + positiveOffset, czm_viewport.zw);
  float useUpOrRight = float(upOrRightLogDepth > 0.0 && upOrRightInBounds.x && upOrRightInBounds.y);
  float useDownOrLeft = float(useUpOrRight == 0.0);
  vec3 upOrRightEC = getEyeCoordinate3FromWindowCoordinateMars3D(glFragCoordXY + positiveOffset, upOrRightLogDepth);
  vec3 downOrLeftEC = getEyeCoordinate3FromWindowCoordinateMars3D(glFragCoordXY - positiveOffset, downOrLeftLogDepth);
  return (upOrRightEC - (eyeCoordinate.xyz / eyeCoordinate.w)) * useUpOrRight + ((eyeCoordinate.xyz / eyeCoordinate.w) - downOrLeftEC) * useDownOrLeft;
}

float getRangeAttenuationMars3D(float range, float d) {
  if(range <= 0.0) {
    return 1.0 / pow(d, 2.0);
  }
  return max(min(1.0 - pow(d / range, 4.0), 1.0), 0.0) / pow(d, 2.0);
}

float getSpotAttenuationMars3D(vec3 pointToLight, vec3 direction, float outerConeCos, float innerConeCos) {
  float actualCos = dot(normalize(direction), normalize(-pointToLight));
  if(actualCos > outerConeCos) {
    if(actualCos < innerConeCos) {
      return smoothstep(outerConeCos, innerConeCos, actualCos);
    }
    return 1.0;
  }
  return 0.0;
}

vec3 getLightIntensityMars3D(vec3 color, float intensity, float type, float range, vec3 pointToLight, vec3 direction, float outerConeCos, float innerConeCos) {
  float rangeAttenuation = 1.0;
  float spotAttenuation = 1.0;
  rangeAttenuation = getRangeAttenuationMars3D(range, length(pointToLight));
  if(type == 2.0) {
    spotAttenuation = getSpotAttenuationMars3D(pointToLight, direction, outerConeCos, innerConeCos);
  }
  return rangeAttenuation * spotAttenuation * intensity * color;
}

void main() {
  vec4 color = texture(colorTexture, v_textureCoordinates);
  float logDepthOrDepth = czm_unpackDepth(texture(depthTexture, v_textureCoordinates));
  if(logDepthOrDepth >= 1.0) {
    out_FragColor = color;
    return;
  }

  vec4 eyeCoordinate = czm_windowToEyeCoordinates(v_textureCoordinates.xy * czm_viewport.zw, logDepthOrDepth);
  vec3 downUp = vectorFromOffsetMars3D(eyeCoordinate, vec2(0.0, 1.0));
  vec3 leftRight = vectorFromOffsetMars3D(eyeCoordinate, vec2(1.0, 0.0));
  vec3 normalEC = normalize(cross(leftRight, downUp));
  vec3 positionEC = eyeCoordinate.xyz / eyeCoordinate.w;

  vec3 totalColor = vec3(0.0);

  for(int i = 0; i < 10000; i++) {
    if(i >= LightNum)
      break;
    vec4 lightPEC = lightPositionEC[i];
    vec2 shadowMapDT = shadowMapDarknessType[i];

    vec3 pointToLightEC = positionEC - lightPEC.xyz;
    float pointToLightECLength = length(pointToLightEC);
    vec3 l = normalize(pointToLightEC);
    float NdotL = clamp(dot(-normalEC, l), 0.0, 1.0);

    float type = shadowMapDT.y;
    vec3 colorIntensity = getLightIntensityMars3D(lightColor[i], intensity[i], type, lightPEC.w, pointToLightEC, direction[i], outerConeCos[i], innerConeCos[i]);
    totalColor += NdotL * colorIntensity;
  }

  out_FragColor = vec4(color.xyz + totalColor, 1.0);
}
`;const DEF_STYLE$4={color:Cesium__namespace.Color.WHITE,intensity:10,radius:1e3};class PointLight extends BasePointPrimitive{constructor(e={},t=!![]){const i={_0x56468b:2748},s=_0x3a2b68;t&&(e.style={...DEF_STYLE$4,...e.style||{}}),super(e),this._light_type=1,this._color=getCesiumColor(this[s(i._0x56468b)].color,Cesium__namespace.Color[s(1948)])}get czmObject(){return this._camera}get hasOpacity(){return![]}get[_0x3a2b68(3611)](){var e;return(e=this._layer)===null||e===void 0?void 0:e.lights}get intensity(){return this.style.intensity}set intensity(e){this.style.intensity=e}get color(){return this._color}set[_0x3a2b68(2540)](e){const t={_0x6da829:1596},i=_0x3a2b68;this[i(t._0x6da829)]=getCesiumColor(e,Cesium__namespace.Color.WHITE)}get[_0x3a2b68(4057)](){return this._shadowMap}get camera(){return this[_0x3a2b68({_0x3ad1a2:3796}._0x3ad1a2)]}_updatePositionsHook(){const e={_0x567e99:3796},t=_0x3a2b68;let i=this._position;if(this[t(e._0x567e99)]&&i){const s=this[t(3496)]();s!==0&&(i=addPositionsHeight(i,s)),this._camera.position=i,this[t(3796)].up=Cesium__namespace.Cartesian3.normalize(i,new Cesium__namespace.Cartesian3)}}_addedHook(e){const t={_0x8b61fa:3611},i=_0x3a2b68;this[i(1005)]=this._createShadowMap(),this._position&&this._updatePositionsHook(),this.primitiveCollection.add(this),this.lights[i(507)](this.id,this),this[i(t._0x8b61fa)]._showHook=()=>{this._updateDraw()},this._updateDraw()}[_0x3a2b68(3328)](){const e={_0x66c635:3158},t=_0x3a2b68;return this._shadowMap&&(this._shadowMap.destroy(),delete this._shadowMap),this._camera=new Cesium__namespace.Camera(this._map.scene),new Cesium__namespace[t(e._0x66c635)]({lightCamera:this._camera,enable:![],darkness:1,isPointLight:!![],isSpotLight:![],cascadesEnabled:![],context:this._map.scene.context,pointLightRadius:this.style.radius,fromLightSource:![]})}_removedHook(){const e=_0x3a2b68;this._shadowMap&&(this._shadowMap[e(2619)](),delete this[e(1005)]),this.primitiveCollection&&this.primitiveCollection.contains(this)&&(this._noDestroy=!![],this.primitiveCollection.remove(this),this._noDestroy=![]),this.lights.remove(this.id),this._updateDraw()}update(e){const t=_0x3a2b68;this._shadowMap&&e.shadowMaps.push(this[t(1005)])}_updateStyleHook(e,t){const i={_0x2a6277:1630,_0xf700f0:3328},s=_0x3a2b68;Cesium__namespace.defined(t.color)&&(this[s(1596)]=getCesiumColor(t.color,Cesium__namespace.Color.WHITE)),(Cesium__namespace.defined(t.addHeight)||Cesium__namespace.defined(t.heading)||Cesium__namespace.defined(t[s(i._0x2a6277)])||Cesium__namespace.defined(t.roll))&&this._updatePositionsHook(),Cesium__namespace.defined(t.radius)&&this._shadowMap&&(this._shadowMap=this[s(i._0xf700f0)](),this._position&&this._updatePositionsHook())}_clearDraw(){const e=_0x3a2b68;this._map&&clearAllLights(this[e(1575)],this.lights)}[_0x3a2b68(3456)](){if(!this._map)return;const e=this.lights;clearAllLights(this._map,e),e.show&&e.length>0&&drawAllLights(this._map,e)}_getDrawEntityClass(e,t){return this._getDrawPointEntityClass(e,t)}}register$4("pointLight",PointLight,!![]);function drawAllLights(n,e){const t=_0x3a2b68,i=[],s=e.splitArr(14);for(let r=0,o=s.length;r<o;r++){const c=getPostProcessStage$1(s[r],n.hasShadow);n[t(744)][t(1505)].add(c),i.push(c)}e._postProcessStages=i}function clearAllLights(n,e){const t=e._postProcessStages;if(t){for(let i=0,s=t.length;i<s;i++)n.scene.postProcessStages.remove(t[i]);delete e._postProcessStages}}function getPostProcessStage$1(n,e=!![]){const t={_0x4af057:2787,_0x289ec5:4262},i=_0x3a2b68;let s,r,o,c,_,l,d,f,g,b,C;function P(){const L={_0x2d284d:1754,_0x31df7c:1383,_0x446dd2:3958,_0x5b2831:2519,_0x3b73ed:1754,_0x468496:3646};o=[],c=[],_=[],l=[],d=[],f=[],g=[],b=[],C=[],n.forEach(function(E){const M=_0x20dc,D=E.shadowMap;if(!D)return;c.push(E.intensity),_[M(1754)](E.color),o[M(L._0x2d284d)](D[M(2310)]),l.push(D[M(L._0x31df7c)]);const R=D._isPointLight?D._pointBias:D._primitiveBias;d[M(1754)](Cesium__namespace.Cartesian4[M(L._0x446dd2)](1/D._textureSize.x,1/D[M(3621)].y,R.depthBias,R.normalShadingSmooth)),f[M(1754)](new Cesium__namespace.Cartesian2(D._darkness,E._light_type)),E._light_type===2?(g.push(D[M(2607)]),b.push(Math[M(L._0x5b2831)](Cesium__namespace[M(2806)].toRadians(E[M(2945)]))),C[M(L._0x3b73ed)](Math.cos(Cesium__namespace.Math.toRadians(E[M(L._0x468496)])))):(g[M(L._0x3b73ed)](Cesium__namespace.Cartesian3.ZERO),b[M(1754)](0),C.push(0))})}if(P(),e){s={lightPositionEC:()=>(P(),o),intensity:()=>c,lightColor:()=>_,shadowMapMatrix:()=>l,shadowMapTexelSizeDepthBiasAndNormalShadingSmooth:()=>d,shadowMapDarknessType:()=>f,direction:()=>g,outerConeCos:()=>b,innerConeCos:()=>C};const{uniformShader:L,shadowVisibilityShader:E}=getLightShadowMaps(n,s);r=MultipleLightShader.replace("Mars3D_LightNumValue",n.length),r=r.replace("Mars3D_LightShadowMapsShader",L),r=r.replace(i(t._0x4af057),E)}else s={lightPositionEC:()=>(P(),o),intensity:()=>c,lightColor:()=>_,shadowMapDarknessType:()=>f,direction:()=>g,outerConeCos:()=>b,innerConeCos:()=>C},r=MultipleLightNoShadowShader[i(t._0x289ec5)]("Mars3D_LightNumValue",n.length);return new Cesium__namespace.PostProcessStage({sampleMode:Cesium__namespace.PostProcessStageSampleMode.NEAREST,fragmentShader:r,uniforms:s})}function getLightShadowMaps(n,e){const t=_0x3a2b68;let i="",s="";return n[t(3782)]((r,o)=>{const c=t;switch(r._light_type){case 1:i+="uniform samplerCube lightShadowMapCube"+o+`;
`,s+="totalColor += getPointLightTotalColorMars3D(normalEC, positionEC, "+o+", lightShadowMapCube"+o+`);
`,e["lightShadowMapCube"+o]=()=>{const _=_0x20dc;return r.shadowMap[_(2659)]};break;case 2:i+="uniform sampler2D lightShadowMap2D"+o+`;
`,s+="totalColor += getSpotLightTotalColorMars3D(normalEC, positionEC, "+o+", lightShadowMap2D"+o+`);
`,e[c(693)+o]=()=>r[c(4057)]._shadowMapTexture;break}}),{uniformShader:i,shadowVisibilityShader:s}}const DEF_STYLE$3={color:Cesium__namespace.Color[_0x3a2b68(1948)],intensity:10,radius:1e3,innerCone:10,outerCone:45};class SpotLight extends PointLight{constructor(e={},t=!![]){const i={_0x440251:3340},s=_0x3a2b68;t&&(e.style={...DEF_STYLE$3,...e[s(2748)]||{}}),super(e),this[s(i._0x440251)]=2}get[_0x3a2b68(2945)](){const e=_0x3a2b68;return this.style[e(2945)]}set[_0x3a2b68(2945)](e){const t=_0x3a2b68;this.style.outerCone=e,this._camera.frustum.fov=Cesium__namespace.Math.toRadians(this.style[t(2945)]*2),this._camera[t(3569)].far=this.range}get innerCone(){return this[_0x3a2b68(2748)].innerCone}set innerCone(e){const t=_0x3a2b68;this.style[t(3646)]=e}_updatePositionsHook(){const e={_0x4aea96:2782,_0x4831e1:2341},t=_0x3a2b68;let i=this._position;if(this._camera&&i){const s=this.getAddHeight();s!==0&&(i=addPositionsHeight(i,s)),this._camera.position=i;const r=Cesium__namespace.HeadingPitchRoll.fromDegrees(this[t(e._0x4aea96)],this.pitch,this.roll);this._camera.setView({destination:i,orientation:{heading:r[t(e._0x4aea96)],pitch:r[t(1630)],roll:r[t(e._0x4831e1)]}})}}_createShadowMap(){const e={_0x3c8468:3796,_0x1b9787:1133,_0x5f004f:3083,_0x3df619:2657,_0x2c29f0:3158},t=_0x3a2b68;return this[t(e._0x3c8468)]=new Cesium__namespace[t(e._0x1b9787)](this[t(1575)].scene),this._camera.frustum[t(e._0x5f004f)]=1,this[t(3796)].frustum.fov=Cesium__namespace.Math[t(1185)](this[t(2748)].outerCone*2),this[t(3796)].frustum[t(e._0x3df619)]=.1,this._camera[t(3569)].far=this[t(2748)].radius,new Cesium__namespace[t(e._0x2c29f0)]({lightCamera:this._camera,enable:![],darkness:1,isPointLight:![],isSpotLight:!![],cascadesEnabled:![],context:this._map.scene.context,pointLightRadius:this.style.radius,fromLightSource:![]})}}register$4("spotLight",SpotLight,!![]);var VolumeCloudFS=`precision highp float;
precision highp sampler3D;

uniform sampler3D map;
uniform float threshold;
uniform float steps;
uniform float xCut;
uniform float yCut;
uniform float zCut;
uniform vec4 colors[Mars3D_TotalColors];
uniform float colorsKey[Mars3D_TotalColors];

in vec3 vOrigin;
in vec3 vDirection;

vec2 hitBoxMars3D(vec3 orig, vec3 dir) {
  const vec3 box_min = vec3(-0.5);
  const vec3 box_max = vec3(0.5);
  vec3 inv_dir = 1.0 / dir;
  vec3 tmin_tmp = (box_min - orig) * inv_dir;
  vec3 tmax_tmp = (box_max - orig) * inv_dir;
  vec3 tmin = min(tmin_tmp, tmax_tmp);
  vec3 tmax = max(tmin_tmp, tmax_tmp);
  float t0 = max(tmin.x, max(tmin.y, tmin.z));
  float t1 = min(tmax.x, min(tmax.y, tmax.z));
  return vec2(t0, t1);
}

float sampleMars3D(vec3 p) {
  return texture(map, p).a;
}

// 获取颜色的方法
vec4 getColorMars3D(float value) {

  float originalValue = value * 255.0;

  vec4 color1 = vec4(0.0);
  vec4 color2 = vec4(0.0);
  float key1 = 0.0;
  float key2 = 0.0;

  // 计算当前值在哪一个区间
  for(int i = 0; i < Mars3D_TotalColors; i++) {
   // 获取到最小的大于当前值的位置
    if(originalValue < colorsKey[i]) {
      // 如果是第一位，则无法插值
      if(i == 0) {
        break;
      }

      key1 = colorsKey[i - 1];
      key2 = colorsKey[i];
      color1 = colors[i - 1];
      color2 = colors[i];
      break;
    }
  }

  // 确定两个颜色区间之间的混合程度
  float mixValue = (originalValue - key1) / (key2 - key1);

  // 计算当前颜色
  vec4 finalColor = mix(color1, color2, mixValue);

  return finalColor;
}

vec4 alphaBlendingMars3D(vec4 color1, vec4 color2) {
  float a1 = color1.a;
  float a2 = color2.a;
  float a = 1.0 - (1.0 - a1) * (1.0 - a2);

  float R = (a1 * color1.r + (1.0 - a1) * a2 * color2.r) / a;
  float G = (a1 * color1.g + (1.0 - a1) * a2 * color2.g) / a;
  float B = (a1 * color1.b + (1.0 - a1) * a2 * color2.b) / a;

  return vec4(R, G, B, a);
}

void main() {
  // 初始化色带
  vec4 color = vec4(0.0);
  vec3 rayDir = normalize(vDirection);
  vec2 bounds = hitBoxMars3D(vOrigin, rayDir);

  if(bounds.x > bounds.y)
    discard;

  bounds.x = max(bounds.x, 0.0);
  vec3 p = vOrigin + bounds.x * rayDir;
  vec3 inc = 1.0 / abs(rayDir);
  float delta = min(inc.x, min(inc.y, inc.z));
  delta /= steps;

  for(float t = bounds.x; t < bounds.y; t += delta) {
    if(p.x > xCut && p.y > yCut && p.z < zCut) {
      float value = sampleMars3D(p + 0.5);
      if(value < threshold) {
        if(color.a >= 1.0) {
          break;
        }
        color = alphaBlendingMars3D(color, getColorMars3D(value));
      }
    }

    p += rayDir * delta;
  }
  out_FragColor = color;
}
`,VolumeCloudVS=`in vec3 position;
in vec2 st;

out vec3 vOrigin;
out vec3 vDirection;

void main() {
  vOrigin = czm_encodedCameraPositionMCHigh + czm_encodedCameraPositionMCLow;
  vDirection = position - vOrigin;
  gl_Position = czm_modelViewProjection * vec4(position, 1.0);
}
`;class VolumeCloud extends BasePrimitive{constructor(e={}){const t={_0x4fe6f5:493,_0x5702d9:1538},i=_0x3a2b68;super(e),this.threshold=this.options.threshold??65/255,this[i(4395)]=this.options.steps??600,this[i(t._0x4fe6f5)]=this[i(1941)][i(493)]??-.5,this[i(t._0x5702d9)]=this.options.yCut??-.5,this.zCut=this.options.zCut??.5}get[_0x3a2b68(3409)](){return this._shadowMap}updateData(e){const t=_0x3a2b68;this.texture3D&&(this.texture3D[t(2619)](),delete this.texture3D);for(let i=0,s=e.values[t(400)];i<s;i++)e.values[i]=Math.abs(e.values[i]);this.texture3D=new Texture3({context:this._map.scene.context,source:{width:e.rows,height:e.cols,depth:e.heights,arrayBufferView:new Uint8Array(e.values)},pixelFormat:Cesium__namespace.PixelFormat.ALPHA,pixelDatatype:Cesium__namespace.PixelDatatype.UNSIGNED_BYTE})}_mountedHook(){const e={_0x456c95:2300,_0x4f0b80:4275,_0x18299a:941,_0x500715:2269,_0x1eaac4:3664,_0x289206:1983,_0x12b143:2228,_0x53b2ad:4115},t=_0x3a2b68,i=this.options.data;this.texture3D=new Texture3({context:this._map.scene[t(3041)],source:{width:i.rows,height:i.cols,depth:i.heights,arrayBufferView:new Uint8Array(i.values)},pixelFormat:Cesium__namespace[t(2691)].ALPHA,pixelDatatype:Cesium__namespace.PixelDatatype.UNSIGNED_BYTE});const s=this.options.colors,r=[];s[t(3782)](D=>{r[t(1754)](getCesiumColor(D))}),this.colors=r,this[t(e._0x456c95)]=this[t(1941)][t(2300)];const o=Cesium__namespace.Cartographic[t(e._0x4f0b80)](i.xmin,i[t(e._0x18299a)],i[t(2728)]),c=Cesium__namespace.Cartographic[t(4275)](i.xmax,i[t(e._0x500715)],i[t(2908)]),_=Cesium__namespace.Rectangle[t(1339)](o.longitude,o[t(e._0x1eaac4)],c[t(768)],c.latitude);this._rectangle=_;const l=Cesium__namespace[t(e._0x289206)].center(_),d=Cesium__namespace[t(2228)][t(1378)](Cesium__namespace.Rectangle.northeast(_)),f=Cesium__namespace[t(e._0x12b143)].toCartesian(Cesium__namespace.Rectangle[t(e._0x53b2ad)](_)),g=Cesium__namespace[t(2228)][t(1378)](Cesium__namespace.Rectangle[t(512)](_)),b=Cesium__namespace.Cartesian3[t(3481)](d,f),C=Cesium__namespace.Cartesian3.distance(d,g),P=(c.height+o[t(4241)])/2,S=Cesium__namespace.Cartesian3.fromRadians(l.longitude,l[t(3664)],P);let L=b>C?b:C;L=L>P?L:P;const E=Cesium__namespace.Transforms.eastNorthUpToFixedFrame(S),M=Cesium__namespace.Matrix4.fromScale(new Cesium__namespace.Cartesian3(b,C,P*2));this.boundingSphere=new Cesium__namespace.BoundingSphere(S,L),this._modelMatrix=Cesium__namespace.Matrix4.multiply(E,M,E)}_addedHook(e){this.primitiveCollection.add(this)}[_0x3a2b68(3916)](){const e=_0x3a2b68;this.primitiveCollection.contains(this)&&(this._noDestroy=!![],this.primitiveCollection.remove(this),this._noDestroy=![]),this.texture3D&&(this.texture3D[e(2619)](),delete this.texture3D),this._clearDrawCommand()}[_0x3a2b68(3396)](e){!this._drawCommands&&this.createDrawCommand(e.context),e.commandList.push(this._drawCommands)}createDrawCommand(e){const t={_0x5860a8:1810,_0x7b531:4279,_0x3475ba:3140,_0x7e661f:2170},i=_0x3a2b68;this[i(t._0x5860a8)]();const s=Cesium__namespace.BoxGeometry[i(1926)](Cesium__namespace.BoxGeometry.fromDimensions({vertexFormat:Cesium__namespace.VertexFormat.POSITION_AND_ST,dimensions:new Cesium__namespace.Cartesian3(1,1,1)})),r=Cesium__namespace.RenderState[i(1945)]({depthTest:{enabled:!![]},cull:{enabled:![]}}),o=Cesium__namespace.GeometryPipeline[i(864)](s),c=Cesium__namespace.VertexArray[i(t._0x7b531)]({context:e,geometry:s,attributes:o}),_=Cesium__namespace.ShaderProgram.fromCache({boundingSphere:s.boundingSphere,context:e,vertexShaderSource:VolumeCloudVS,fragmentShaderSource:VolumeCloudFS.replaceAll("Mars3D_TotalColors",this.colors.length),attributeLocations:o});this._drawCommands=new Cesium__namespace.DrawCommand({boundingVolume:this.boundingSphere,modelMatrix:this[i(t._0x3475ba)],pass:Cesium__namespace[i(t._0x7e661f)].TRANSLUCENT,shaderProgram:_,renderState:r,vertexArray:c,uniformMap:{map:()=>this.texture3D,threshold:()=>this[i(3277)],steps:()=>this.steps,xCut:()=>this.xCut,yCut:()=>this.yCut,zCut:()=>this.zCut,colors:()=>this.colors,colorsKey:()=>this.colorsKey}})}[_0x3a2b68(1810)](){const e={_0x373177:3900},t=_0x3a2b68;this._drawCommands&&(this[t(3900)].vertexArray&&this._drawCommands.vertexArray.destroy(),this[t(e._0x373177)].shaderProgram&&this._drawCommands.shaderProgram.destroy(),delete this[t(e._0x373177)])}}register$4("volumeCloud",VolumeCloud,!![]);var MultipleVisibilityShader=_0x3a2b68(3858);const visibleAreaColor=Cesium__namespace.Color.LIME,hiddenAreaColor=Cesium__namespace.Color[_0x3a2b68(523)];let areaOpacity=.6;const DEF_STYLE$2={radius:1,showFrustum:![]};class PointVisibility extends BasePointPrimitive{constructor(e={},t=!![]){const i={_0x935d94:2748,_0x39ec36:3109},s=_0x3a2b68;t&&(e[s(i._0x935d94)]={...DEF_STYLE$2,...e.style||{}}),super(e),this._visibility_type=1,areaOpacity=this.style.opacity,this[s(3810)]=this.options[s(i._0x39ec36)]??!![],this._maximumDistance=this.style.maximumDistance??5e3}get czmObject(){return this._camera}get hasOpacity(){return![]}get visibilitys(){var e;return(e=this._layer)===null||e===void 0?void 0:e.visibilitys}get[_0x3a2b68(3248)](){const e=_0x3a2b68;var t;return(t=this.style)===null||t===void 0?void 0:t[e(3248)]}set opacity(e){this.style.opacity=e}get shadowMap(){return this._shadowMap}get camera(){return this[_0x3a2b68({_0x2f0ad9:3796}._0x2f0ad9)]}_updatePositionsHook(){const e={_0x5da98d:3796},t=_0x3a2b68;let i=this._position;if(this._camera&&i){const s=this.getAddHeight();s!==0&&(i=addPositionsHeight(i,s)),this[t(e._0x5da98d)][t(4076)]=i,this._camera.up=Cesium__namespace.Cartesian3[t(1085)](i,new Cesium__namespace.Cartesian3)}}[_0x3a2b68(2679)](e){const t={_0x18cda6:3078,_0x4746c1:3456},i=_0x3a2b68;this._hasTerrainShadows&&(this._map.viewer.terrainShadows=Cesium__namespace.ShadowMode.ENABLED),this._shadowMap=this._createShadowMap(),this._position&&this[i(4145)](),this[i(756)].add(this),this.visibilitys.set(this.id,this),this[i(t._0x18cda6)]._showHook=()=>{this._updateDraw()},this[i(t._0x4746c1)](),this._updateOutlineFrustum()}[_0x3a2b68(3328)](){const e={_0x2e367c:1005,_0x370637:744,_0x55e342:1575,_0x2fef98:3041},t=_0x3a2b68;return this._shadowMap&&(this._shadowMap.destroy(),delete this[t(e._0x2e367c)]),this._camera=new Cesium__namespace.Camera(this._map[t(e._0x370637)]),new Cesium__namespace.ShadowMap({lightCamera:this._camera,enable:![],darkness:1,isPointLight:!![],isSpotLight:![],cascadesEnabled:![],context:this[t(e._0x55e342)].scene[t(e._0x2fef98)],pointLightRadius:this.style.radius,fromLightSource:![]})}[_0x3a2b68(3916)](){const e={_0x1528f2:3810,_0x34bfac:1575,_0x4c8525:1005,_0x1a13dd:3529,_0x5e93f5:756,_0x53b789:2027,_0x4eb755:1361},t=_0x3a2b68;this[t(e._0x1528f2)]&&(this[t(e._0x34bfac)].terrainShadows=Cesium__namespace[t(887)].DISABLED),this[t(e._0x4c8525)]&&(this[t(1005)][t(2619)](),delete this._shadowMap),this._outlineFrustumGraphic&&(this._layer.removeGraphic(this._outlineFrustumGraphic,!![]),delete this._outlineFrustumGraphic),this._outlineFrustum&&(this._layer[t(756)].remove(this[t(e._0x1a13dd)]),delete this._outlineFrustum),this[t(e._0x5e93f5)]&&this.primitiveCollection.contains(this)&&(this[t(e._0x53b789)]=!![],this.primitiveCollection[t(e._0x4eb755)](this),this[t(e._0x53b789)]=![]),this.visibilitys.remove(this.id),this._updateDraw()}update(e){const t={_0x56f528:1005},i=_0x3a2b68;this._shadowMap&&e.shadowMaps[i(1754)](this[i(t._0x56f528)])}_updateStyleHook(e,t){const i={_0x4cd1e2:407,_0x97462b:1630,_0x1068f7:1005},s=_0x3a2b68;Cesium__namespace.defined(t.showFrustum)&&this._updateOutlineFrustum(),(Cesium__namespace.defined(t.angle)||Cesium__namespace[s(i._0x4cd1e2)](t.angle2))&&this._updateDraw(),(Cesium__namespace.defined(t.addHeight)||Cesium__namespace.defined(t.heading)||Cesium__namespace.defined(t[s(i._0x97462b)])||Cesium__namespace.defined(t.roll))&&this[s(4145)](),Cesium__namespace[s(i._0x4cd1e2)](t.radius)&&this._shadowMap&&(this[s(i._0x1068f7)]=this._createShadowMap(),this._position&&this._updatePositionsHook(),this._updateOutlineFrustum())}_clearDraw(){this[_0x3a2b68({_0x398c34:1575}._0x398c34)]&&clearAllVisibility(this._map,this.visibilitys)}_updateDraw(){if(!this._map)return;const e=this.visibilitys;clearAllVisibility(this._map,e),e.show&&e.length>0&&drawAllVisibility(this._map,e)}_updateOutlineFrustum(){const e={_0x2bbf41:778,_0x30d48a:4396},t=_0x3a2b68;if(this[t(3529)]&&(this._layer.primitiveCollection.remove(this._outlineFrustum),delete this._outlineFrustum),!this.position||!this[t(2748)].showFrustum)return;const i=Cesium__namespace.Transforms[t(e._0x2bbf41)](this.position),s=new Cesium__namespace.GeometryInstance({geometry:new Cesium__namespace[t(e._0x30d48a)]({radius:this.style.radius}),modelMatrix:i,attributes:{color:Cesium__namespace.ColorGeometryInstanceAttribute[t(1382)](Cesium__namespace.Color.WHITE)}});this._outlineFrustum=this._layer.primitiveCollection.add(new Cesium__namespace[t(2618)]({geometryInstances:s,asynchronous:![],appearance:new Cesium__namespace.PerInstanceColorAppearance({flat:!![],renderState:{lineWidth:1}})}))}[_0x3a2b68(3194)](e){const t={_0x29ff18:4356},i=_0x3a2b68;if(this._enabledDraw)return this;if(this._enabledDraw=!![],e&&this.addTo(e),!this._map)throw new Error(i(2296));this._map._setEditCursor(!![]),this[i(t._0x29ff18)](![]),this[i(2741)](),this.fire(EventType.drawStart,{drawtype:this[i(1603)],graphic:this},!![])}[_0x3a2b68(608)](){const e={_0x38d765:1832,_0x41ae6a:621,_0x3098dc:4356,_0x67516d:1575,_0x430ea1:1937,_0x3134e1:1941,_0x16b373:3531},t=_0x3a2b68;var i,s,r;if(!this[t(e._0x38d765)])return this;if(this._stopDrawHook(),this[t(1575)][t(e._0x41ae6a)](![]),this[t(e._0x3098dc)](!![]),this[t(e._0x67516d)][t(e._0x430ea1)](),this._enabledDraw=![],!this.position||!this.style.radius){this.remove(!![]);return}this.fire(EventType.drawCreated,{drawtype:this.type,graphic:this},!![]),(i=this[t(e._0x3134e1)])!==null&&i!==void 0&&i.success&&this[t(1941)].success(this),(s=this.options)!==null&&s!==void 0&&(r=s[t(e._0x16b373)])!==null&&r!==void 0&&r.resolve&&this[t(1941)]._promise.resolve(this)}[_0x3a2b68(2741)](){this._map.on(EventType.click,this._onClickHandler,this),this._map.on(EventType.mouseMove,this._onMouseMoveHandler,this)}_stopDrawHook(){const e=_0x3a2b68;this._map[e(2971)](EventType.click,this._onClickHandler,this),this._map.off(EventType.mouseMove,this._onMouseMoveHandler,this)}_onClickHandler(e){const t=e.cartesian;if(t){if(this.fire(EventType.drawAddPoint,{...e,drawtype:this.type,graphic:this},!![]),!this.position){this.position=t;return}this._updateMouseDraw(t),this.stopDraw(),this.fire(EventType.drawCreated,e)}}_onMouseMoveHandler(e){const t={_0x13e472:1575,_0x4547f7:1379,_0xce2f99:1575},i=_0x3a2b68,s=e.cartesian;if(!s)return;this.position?(this._updateMouseDraw(s),this.fire(EventType.drawMouseMove,{...e,drawtype:this.type,graphic:this},!![]),this[i(t._0x13e472)][i(t._0x4547f7)](e.endPosition,this[i(1575)].getLangText("_单击完成绘制"))):this._map.openSmallTooltip(e.endPosition,this[i(t._0xce2f99)].getLangText("_单击开始绘制"))}[_0x3a2b68(2255)](e){const t={_0x51fd8b:3481,_0x2889ff:1187},i=_0x3a2b68;this[i(2748)][i(3878)]=Cesium__namespace.Cartesian3[i(t._0x51fd8b)](this.position,e),this._shadowMap=this[i(3328)](),this[i(t._0x2889ff)]&&this[i(4145)]()}}register$4(_0x3a2b68(1905),PointVisibility,!![]);function drawAllVisibility(n,e){const t={_0x4cd195:1505},i=_0x3a2b68,s=[],r=e.splitArr(14);for(let o=0,c=r.length;o<c;o++){const _=getPostProcessStage(r[o]);n.scene[i(t._0x4cd195)].add(_),s[i(1754)](_)}e[i(2723)]=s}function clearAllVisibility(n,e){const t=_0x3a2b68,i=e._postProcessStages;if(i){for(let s=0,r=i[t(400)];s<r;s++)n.scene.postProcessStages.remove(i[s]);delete e._postProcessStages}}function getPostProcessStage(n){const e={_0x32463d:2401,_0x493ace:1565,_0x2fa666:637},t={_0xfb702a:3621},i=_0x3a2b68;if(n.length===0)return;let s,r,o,c,_;function l(){s=[],r=[],o=[],c=[],_=[],n.forEach(function(P){const S=_0x20dc,L=P.shadowMap;if(!L)return;s.push(L._lightPositionEC),r[S(1754)](L._shadowMapMatrix);const E=L[S(4165)]?L._pointBias:L._primitiveBias;o.push(Cesium__namespace[S(654)][S(3958)](1/L[S(t._0xfb702a)].x,1/L._textureSize.y,E[S(3080)],E.normalShadingSmooth)),c.push(new Cesium__namespace.Cartesian2(L._darkness,P[S(2817)])),_.push(P.style.radius)})}l();const d={lightPositionEC:()=>(l(),s),shadowMapMatrix:()=>r,shadowMapTexelSizeDepthBiasAndNormalShadingSmooth:()=>o,shadowMapDarknessType:()=>c,mars3d_distance:()=>_,mars3d_opacity:()=>areaOpacity,mars3d_visibleAreaColor:()=>visibleAreaColor,mars3d_hiddenAreaColor:()=>hiddenAreaColor},{uniformShader:f,shadowVisibilityShader:g}=getVisibilityShadowMaps(n,d);let b=MultipleVisibilityShader.replace("LightNumVlaue",n.length);return b=b.replace(i(e._0x32463d),f),b=b.replace(i(e._0x493ace),g),new Cesium__namespace[i(590)]({sampleMode:Cesium__namespace[i(e._0x2fa666)].NEAREST,fragmentShader:b,uniforms:d})}function getVisibilityShadowMaps(n,e){const t={_0x34fd60:700},i={_0x4b7d12:4057};let s="",r="";return n.forEach((o,c)=>{const _=_0x20dc;switch(o._visibility_type){case 1:s+="uniform samplerCube lightShadowMapCube"+c+`;
`,r+=`
        int pointLightVisibility`+c+" = getPointVisibility(normalEC, positionEC, "+c+", lightShadowMapCube"+c+`);
        if(pointLightVisibility`+c+_(3312)+c+` == 0) {
          visibility += 1;
        }
        `,e["lightShadowMapCube"+c]=()=>o[_(i._0x4b7d12)]._shadowMapTexture;break;case 2:s+=_(t._0x34fd60)+c+`;
`,r+=`
        int frustumVisibility`+c+" = getFrustumVisibility(normalEC, positionEC, "+c+", lightShadowMap2D"+c+`);
        if(frustumVisibility`+c+` == 1) {
          inside += 1;
        } else if (frustumVisibility`+c+` == 0) {
          visibility += 1;
        }
        `,e["lightShadowMap2D"+c]=()=>o.shadowMap._shadowMapTexture;break}}),{uniformShader:s,shadowVisibilityShader:r}}const DEF_STYLE$1={angle:60,angle2:45,radius:1,showFrustum:![]};class ConeVisibility extends PointVisibility{constructor(e={},t=!![]){const i=_0x3a2b68;t&&(e.style={...DEF_STYLE$1,...e.style||{}}),super(e),this[i(2817)]=2}get angle(){const e={_0x3e86a8:2748,_0x5a2ab2:2580},t=_0x3a2b68;return this[t(e._0x3e86a8)][t(e._0x5a2ab2)]}set[_0x3a2b68(2580)](e){this.style.angle=e,this._updateDraw()}get angle2(){return this[_0x3a2b68({_0x5a93b9:2748}._0x5a93b9)].angle2??this.style.angle}set[_0x3a2b68(3433)](e){this.style.angle2=e,this._updateDraw()}get targetPosition(){const e={_0x585140:497},t=_0x3a2b68;return this.options[t(e._0x585140)]}set targetPosition(e){const t={_0x4998c5:3481,_0x233d78:2978,_0x5aa247:3763,_0x4d7634:3328},i=_0x3a2b68;var s;if(this.options.targetPosition=e,!this._map)return;const r=this.position;if(!r)return;const o=LngLatPoint.toCartesian(e,(s=this._map)===null||s===void 0?void 0:s.currentTime);this[i(2748)][i(3878)]=Cesium__namespace.Cartesian3[i(t._0x4998c5)](r,o);const c=Cesium__namespace.Cartesian3.normalize(Cesium__namespace.Cartesian3.subtract(o,r,new Cesium__namespace.Cartesian3),new Cesium__namespace.Cartesian3),_=Cesium__namespace[i(t._0x233d78)].normalize(r,new Cesium__namespace.Cartesian3),l=new Cesium__namespace.Camera(this._map.scene);l.position=r,l[i(t._0x5aa247)]=c,l.up=_,this.style.heading=Cesium__namespace[i(2806)].toDegrees(l.heading),this[i(2748)].pitch=Cesium__namespace.Math.toDegrees(l.pitch),this._shadowMap=this[i(t._0x4d7634)](),this._position&&this._updatePositionsHook(),this._updateDraw()}_mountedHook(){const e=_0x3a2b68;this[e(1941)].targetPosition&&(this.targetPosition=this.options[e(497)]),super._mountedHook()}_updatePositionsHook(){const e={_0x385268:3796,_0x4dd900:3569,_0x3f3d32:2748,_0x5c75ba:4275,_0x2faef2:2341},t=_0x3a2b68;let i=this._position;if(this._camera&&i){const s=this.getAddHeight();s!==0&&(i=addPositionsHeight(i,s)),this[t(e._0x385268)].position=i,this[t(e._0x385268)][t(e._0x4dd900)].fov=Cesium__namespace.Math.toRadians(this.angle*2),this._camera.frustum.aspectRatio=this.angle/this.angle2,this._camera.frustum.far=this[t(e._0x3f3d32)][t(3878)];const r=Cesium__namespace.HeadingPitchRoll[t(e._0x5c75ba)](this[t(2782)],this.pitch,this[t(e._0x2faef2)]);this._camera.setView({destination:i,orientation:{heading:r[t(2782)],pitch:r.pitch,roll:r[t(2341)]}})}}_createShadowMap(){const e={_0x5e56e9:3796,_0x31fe2b:1941},t=_0x3a2b68;return this._camera=new Cesium__namespace.Camera(this._map.scene),this[t(3796)].frustum.aspectRatio=this.angle/this.angle2,this._camera.frustum[t(2073)]=Cesium__namespace[t(2806)].toRadians(this.angle*2),this._camera.frustum.near=.01,this[t(3796)].frustum.far=this[t(2748)].radius,new Cesium__namespace.ShadowMap({lightCamera:this[t(e._0x5e56e9)],enable:![],darkness:1,isPointLight:![],isSpotLight:!![],cascadesEnabled:![],context:this._map.scene.context,pointLightRadius:this.style[t(3878)],fromLightSource:![],depthBiasStep:this[t(e._0x31fe2b)].depthBiasStep??100})}_updateOutlineFrustum(){const e={_0x2a3cd4:4053,_0x271d2d:2748,_0x5cec32:3572,_0xccf1f3:442},t=_0x3a2b68;this._outlineFrustumGraphic&&(this[t(e._0x2a3cd4)].removeGraphic(this[t(750)],!![]),delete this._outlineFrustumGraphic),!(!this.position||!this[t(e._0x271d2d)].showFrustum)&&(this[t(750)]=new ArcFrustum({modelMatrix:this._camera[t(e._0x5cec32)],style:{angle:this.angle,angle2:this[t(3433)],distance:this.style.radius+1},show:this.style.showFrustum&&this[t(e._0xccf1f3)],private:!![]}),this._layer.addGraphic(this._outlineFrustumGraphic))}_updateMouseDraw(e){const t={_0x4dd26f:3825,_0x5b6f7d:3328,_0x5d3f15:4145},i=_0x3a2b68;Cesium__namespace.Cartesian3.distance(this.position,e)>this._maximumDistance&&(e=getOnLinePointByLen(this.position,e,this[i(t._0x4dd26f)])),this.targetPosition=e,this._shadowMap=this[i(t._0x5b6f7d)](),this[i(1187)]&&this[i(t._0x5d3f15)]()}}register$4("coneVisibility",ConeVisibility,!![]);class SkylineBody extends PolygonPrimitive{get position(){const e={_0x2d8b49:545},t=_0x3a2b68;if(this[t(1187)])return this[t(1187)];if(this.property){var i,s;return this.property.getValue((i=this._map)===null||i===void 0||(s=i[t(2257)])===null||s===void 0?void 0:s[t(e._0x2d8b49)])}}set[_0x3a2b68(4076)](e){const t=_0x3a2b68;var i;if(this._forPositionProperty(e))return this._position;this[t(3601)]=LngLatPoint.parse(e),this._position=(i=this._point)===null||i===void 0?void 0:i.toCartesian(),this.fire(EventType.updatePosition,{position:this._position})}_addedHook(e){const t=_0x3a2b68;return this[t(2748)].extrudedHeight=this.style.extrudedHeight??0,this._positions=this[t(2713)](),super._addedHook(e)}_getPositions(){const e={_0x1dcb2d:3384,_0x5ed5d2:1575},t=_0x3a2b68,i=this.options[t(e._0x1dcb2d)]??512,s=getRayIntersectingPositions$1({scene:this[t(e._0x5ed5d2)].scene,splitNum:i}),r=this.position??this._map[t(744)].camera.position,o=[r];for(let c=i-1;c>=0;c--)for(let _=i-1;_>=0;_--){const l=s[c][_];if(l){o.push(l);break}}return o.push(r),o}}register$4("skylineBody",SkylineBody);var ViewDomeMaterial=_0x3a2b68(2804),ViewDomeVS=`in vec3 position3DHigh;
in vec3 position3DLow;
in float batchId;

out vec3 v_positionEC;

void main() {
  vec4 p = czm_computePosition();
  v_positionEC = (czm_modelViewRelativeToEye * p).xyz;
  gl_Position = czm_modelViewProjectionRelativeToEye * p;
}
`,ViewDomeFS=_0x3a2b68(531);const DEF_STYLE={radius:20,visibleColor:"rgba(0,183,239, 0.5)",hiddenColor:_0x3a2b68(2550)};class ViewDome extends BasePointPrimitive{constructor(e={}){e.style={...DEF_STYLE,...e.style},super(e),this._globalAlpha=1}get radius(){return this[_0x3a2b68({_0x4c03dc:1005}._0x4c03dc)]._pointLightRadius}set radius(e){const t=_0x3a2b68;this._shadowMap._pointLightRadius=e,this._appearance.material[t(2949)].u_radius=e,this._createPrimitive()}get[_0x3a2b68(787)](){const e=_0x3a2b68;return this._appearance[e(3793)].uniforms.u_visibleColor}set[_0x3a2b68(787)](e){this._appearance.material.uniforms.u_visibleColor=getCesiumColor(e)}get hiddenColor(){const e={_0x573824:3793},t=_0x3a2b68;return this._appearance[t(e._0x573824)][t(2949)][t(1763)]}set hiddenColor(e){const t=_0x3a2b68;this._appearance.material.uniforms[t(1763)]=getCesiumColor(e)}[_0x3a2b68(4145)](){const e=this.position;this._camera.position=LngLatPoint.toCartesian(e),this._camera.up=Cesium__namespace.Cartesian3.normalize(e,new Cesium__namespace.Cartesian3),this._createPrimitive()}[_0x3a2b68(2679)](e){const t={_0x1dd95a:2748,_0x22b63a:3439,_0x54ed8d:1858},i={_0x5d14a1:1005},s=_0x3a2b68;if(!this.show||!this.position)return;const r=this[s(1575)][s(744)],o=this.position;this._camera=new Cesium__namespace.Camera(r),this._camera.position=o,this._camera.up=Cesium__namespace.Cartesian3.normalize(o,new Cesium__namespace.Cartesian3),this._shadowMap=new Cesium__namespace.ShadowMap({lightCamera:this._camera,enable:![],darkness:1,isPointLight:!![],isSpotLight:![],cascadesEnabled:![],context:r[s(3041)],pointLightRadius:this.style.radius,fromLightSource:![]});const c=new Cesium__namespace.Material({fabric:{type:"ViewDomeMaterial",uniforms:{u_visibleColor:getCesiumColor(this[s(2748)].visibleColor),u_hiddenColor:getCesiumColor(this.style[s(3560)]),u_radius:this[s(t._0x1dd95a)][s(3878)]},source:ViewDomeMaterial}});c._uniforms.u_shadowMapCube=()=>this._shadowMap._shadowMapTexture?this._shadowMap._shadowMapTexture:r.context.defaultTexture,c[s(t._0x22b63a)][s(2110)]=()=>{const _=s;return Cesium__namespace.Cartesian4.fromElements(1/this._shadowMap._textureSize.x,1/this[_(1005)]._textureSize.y,this._shadowMap._pointBias[_(3080)],this[_(1005)][_(2274)].normalShadingSmooth)},c[s(t._0x22b63a)].u_shadowMapDarkness=()=>this[s(i._0x5d14a1)]._darkness,c[s(t._0x22b63a)][s(t._0x54ed8d)]=()=>this._shadowMap._lightPositionEC,c._uniforms.globalAlpha=()=>this._globalAlpha,this._appearance=new Cesium__namespace.MaterialAppearance({flat:!![],material:c,vertexShaderSource:ViewDomeVS,fragmentShaderSource:ViewDomeFS}),this._createPrimitive(),this.primitiveCollection.add(this)}_createPrimitive(){const e={_0x38a07b:3737},t=_0x3a2b68;this._primitive=new Cesium__namespace.Primitive({geometryInstances:new Cesium__namespace.GeometryInstance({geometry:new Cesium__namespace.SphereGeometry({vertexFormat:Cesium__namespace.PerInstanceColorAppearance.VERTEX_FORMAT,radius:this.style.radius}),modelMatrix:Cesium__namespace[t(e._0x38a07b)].eastNorthUpToFixedFrame(this.position)}),appearance:this[t(1833)],asynchronous:![]})}[_0x3a2b68(3916)](){const e={_0x9bd3e6:756,_0x4a54ae:3140},t=_0x3a2b68;this[t(e._0x9bd3e6)]&&this.primitiveCollection.contains(this)&&(this._noDestroy=!![],this.primitiveCollection.remove(this),this._noDestroy=![]),delete this[t(e._0x4a54ae)]}update(e){const t={_0x57f2b9:442,_0x2d9fa5:1754},i=_0x3a2b68;this[i(t._0x57f2b9)]&&(e.shadowMaps[i(t._0x2d9fa5)](this._shadowMap),this._primitive.update(e))}setOpacity(e){this._globalAlpha=e}_getDrawEntityClass(e,t){return this._getDrawPointEntityClass(e,t)}}register$4("viewDome",ViewDome,!![]);var index$6={__proto__:null,BaseGraphic,BaseEntity,BasePointEntity,BasePolyEntity,BasePrimitive,BasePointPrimitive,BasePolyPrimitive,PointEntity,BillboardEntity,FontBillboardEntity,DivBillboardEntity,LabelEntity,CanvasLabelEntity,ModelEntity,BoxEntity,PlaneEntity,CircleEntity,CylinderEntity,ConeTrack,EllipsoidEntity,PolylineEntity,CurveEntity,PolylineVolumeEntity,PathEntity,CorridorEntity,WallEntity,RectangleEntity,PolygonEntity,EllipseEntity,RectangularSensor,Video2D,PitEntity,AttackArrow,AttackArrowPW,AttackArrowYW,CloseVurve,DoubleArrow,FineArrow,FineArrowYW,GatheringPlace,IsosTriangle,Lune,Regular,Sector,StraightArrow,PointMeasure,DistanceMeasure,DistanceSurfaceMeasure,SectionMeasure,AngleMeasure,HeightMeasure,HeightTriangleMeasure,AreaMeasure,AreaSurfaceMeasure,VolumeMeasure,VolumeDepthMeasure,PointPrimitive,BillboardPrimitive,CloudPrimitive,LabelPrimitive,ModelPrimitive,CirclePrimitive,PlanePrimitive,BoxPrimitive,CylinderPrimitive,ConeTrackPrimitive,EllipsoidPrimitive,PolylinePrimitive,WallPrimitive,CorridorPrimitive,PolylineVolumePrimitive,RectanglePrimitive,PolygonPrimitive,FrustumPrimitive,LightCone,Water,DiffuseWall,ScrollWall,ThickWall,DynamicRiver,Road,Pit,DoubleSidedPlane,ReflectionWater,VideoPrimitive,BaseCombine,FlatBillboard,PlaneCombine,BoxCombine,CircleCombine,CylinderCombine,FrustumCombine,EllipsoidCombine,PolylineCombine,PolylineVolumeCombine,CorridorCombine,WallCombine,PolygonCombine,WaterCombine,RectangleCombine,DivGraphic,DivBoderLabel,DivLightPoint,DivUpLabel,Popup,Tooltip,ParticleSystem,ArcFrustum,Tetrahedron,ViewShed,Video3D,Route,FixedRoute,PointLight,SpotLight,VolumeCloud,PointVisibility,ConeVisibility,SkylineBody,ViewDome};class XyzImageryProvider$1 extends Cesium__namespace.UrlTemplateImageryProvider{constructor(e={}){const t={_0x2a0c69:1301,_0x5a310c:1941},i=_0x3a2b68;e[i(1301)]=e.customTags||{},e[i(t._0x2a0c69)].host=function(s,r,o,c){return location.host},e.customTags.hostname=function(s,r,o,c){return location.hostname},e.customTags[i(1502)]=function(s,r,o,c){return c+1},super(e),this[i(t._0x5a310c)]=e}}class TdtImageryProvider extends Cesium__namespace.WebMapTileServiceImageryProvider{constructor(e={}){const t={_0x199138:2273,_0x2056ef:3567,_0x52c428:2891,_0x5cf817:643,_0x5c1cd2:1624,_0x5b8c7b:400,_0x1818be:1995,_0x5b44e6:1712,_0x55f351:4262,_0x2b3524:1712,_0x1116b7:3244,_0x1f0f4e:1930,_0x413eaa:1380,_0x534c69:1941},i=_0x3a2b68;let s,r=18;switch(e.layer){case i(t._0x199138):s="vec";break;case"vec_z":s=i(t._0x2056ef);break;case"vec_e":s=i(1419);break;case"img_d":s=i(t._0x52c428);break;case"img_z":s="cia";break;case"img_e":s=i(1860);break;case"ter_d":s="ter",r=14;break;case i(t._0x5cf817):s="cta",r=14;break;case"xzqh":case"ibo":s="ibo",r=10;break;default:s=i(405);break}(e[i(t._0x5c1cd2)]==null||e.key[i(t._0x5b8c7b)]===0)&&(e.key=tiandituArr);const o=getArrayRandomOne(e.key);let c;!e.crs||e.crs===CRS[i(4270)]?(c="https://t{s}.tianditu.gov.cn/"+s+i(t._0x1818be)+s+"&style={style}&tilerow={TileRow}&tilecol={TileCol}&tilematrixset={TileMatrixSet}&format=tiles&tk="+o,(e.proxy||e.headers||e[i(t._0x5b44e6)])&&(c=getUrlResource({url:c[i(t._0x55f351)]("{s}","0"),proxy:e.proxy,headers:e[i(2497)],queryParameters:e[i(t._0x2b3524)]})),e={subdomains:["0","1","2","3","4","5","6","7"],maximumLevel:e.maximumLevel??r,...e,url:c,layer:s,style:"default",format:"tiles",tileMatrixSetID:"w",tileMatrixLabels:[...Array(20).keys()][i(t._0x1116b7)](_=>_.toString()),tilingScheme:new Cesium__namespace.WebMercatorTilingScheme}):(c="https://t{s}.tianditu.gov.cn/"+s+"_c/wmts?service=WMTS&version=1.0.0&request=GetTile&tilematrix={TileMatrix}&layer="+s+i(3636)+o,r=17,(e.proxy||e.headers||e.queryParameters)&&(c=getUrlResource({url:c.replace("{s}","0"),proxy:e[i(1631)],headers:e.headers,queryParameters:e.queryParameters})),e={subdomains:["0","1","2","3","4","5","6","7"],maximumLevel:e[i(t._0x1f0f4e)]??r,...e,url:c,layer:s,style:"default",format:i(t._0x413eaa),tileMatrixSetID:"c",tileMatrixLabels:[...Array(20).keys()].map(_=>(_+1).toString()),tilingScheme:new Cesium__namespace.GeographicTilingScheme}),super(e),this[i(t._0x534c69)]=e}}class GaodeImageryProvider extends XyzImageryProvider$1{constructor(e={}){const t={_0x149095:3627,_0x43d4ce:1658,_0x17a3ea:4023,_0x3d0983:2474},i=_0x3a2b68;let s;switch(e.layer){case"vec":s="https://"+(e[i(t._0x149095)]?"wprd":i(t._0x43d4ce))+"0{s}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}";break;case"img_d":s=i(3009);break;case"img_z":s="https://webst0{s}.is.autonavi.com/appmaptile?x={x}&y={y}&z={z}&lang=zh_cn&size=1&scale=1&style=8";break;case"time":{s="https://tm.amap.com/trafficengine/mapabc/traffictile?v=1.0&t=1&x={x}&y={y}&z={z}&&t="+new Date().getTime();break}default:s=e[i(t._0x17a3ea)];break}(e.proxy||e[i(2497)]||e.queryParameters)&&(s=getUrlResource({url:s.replace(i(t._0x3d0983),"1"),proxy:e[i(1631)],headers:e.headers,queryParameters:e.queryParameters})),super({subdomains:["1","2","3","4"],maximumLevel:18,...e,url:s})}}const EARTH_RADIUS=637099681e-2,MC_BAND=[1289059486e-2,836237787e-2,5591021,348198983e-2,167804312e-2,0],LL_BAND=[75,60,45,30,15,0],MC2LL=[[1410526172116255e-23,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,173379812e-1],[-7435856389565537e-24,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,1026014486e-2],[-3030883460898826e-23,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,685681737e-2],[-1981981304930552e-23,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,448277706e-2],[309191371068437e-23,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,25551644e-1],[2890871144776878e-24,8983055095805407e-21,-3068298e-14,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]],LL2MC=[[-.0015702102444,111320.7020616939,0x60e374c3105a3,-0x24bb4115e2e164,0x5cc55543bb0ae8,-0x7ce070193f3784,0x5e7ca61ddf8150,-0x261a578d8b24d0,0x665d60f3742ca,82.5],[.0008277824516172526,111320.7020463578,6477955746671607e-7,-4082003173641316e-6,1077490566351142e-5,-1517187553151559e-5,1205306533862167e-5,-5124939663577472e-6,9133119359512032e-7,67.5],[.00337398766765,111320.7020202162,4481351045890365e-9,-2339375119931662e-8,7968221547186455e-8,-1159649932797253e-7,9723671115602145e-8,-4366194633752821e-8,8477230501135234e-9,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837749470245e-9,992013.7397791013,-122195221711287e-8,1340652697009075e-9,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758690035394e-9,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]];class BaiduMercatorProjection{constructor(){this.isWgs84=![]}getDistanceByMC(e,t){const i={_0x1b7b2f:1185},s=_0x3a2b68;if(!e||!t||(e=this.convertMC2LL(e),!e))return 0;const r=this.toRadians(e[s(4079)]),o=this.toRadians(e.lat);if(t=this.convertMC2LL(t),!t)return 0;const c=this.toRadians(t[s(4079)]),_=this[s(i._0x1b7b2f)](t.lat);return this.getDistance(r,c,o,_)}[_0x3a2b68(2640)](e,t){const i={_0x42b717:671,_0x1c12bd:1779},s=_0x3a2b68;if(!e||!t)return 0;e.lng=this.getLoop(e.lng,-180,180),e[s(i._0x42b717)]=this.getRange(e.lat,-74,74),t.lng=this[s(i._0x1c12bd)](t[s(4079)],-180,180),t[s(671)]=this[s(3717)](t.lat,-74,74);const r=this[s(1185)](e.lng),o=this.toRadians(e.lat),c=this.toRadians(t.lng),_=this.toRadians(t.lat);return this.getDistance(r,c,o,_)}convertMC2LL(e){const t={_0x3f9555:4079,_0x2872a6:400},i=_0x3a2b68;if(!e)return{lng:0,lat:0};let s={};if(this.isWgs84){s[i(4079)]=e[i(4079)]/2003750834e-2*180;const c=e.lat/2003750834e-2*180;return s.lat=180/Math.PI*(2*Math.atan(Math[i(2665)](c*Math.PI/180))-Math.PI/2),{lng:s[i(t._0x3f9555)].toFixed(6),lat:s[i(671)].toFixed(6)}}const r={lng:Math.abs(e.lng),lat:Math[i(2376)](e.lat)};let o;for(let c=0;c<MC_BAND[i(t._0x2872a6)];c++)if(r.lat>=MC_BAND[c]){o=MC2LL[c];break}return s=this.convertor(e,o),{lng:s[i(4079)].toFixed(6),lat:s[i(671)].toFixed(6)}}convertLL2MC(e){const t={_0x50bb1b:1798,_0x58d713:671,_0x5b7377:4079,_0xc182b7:3168,_0x2685f3:4079},i=_0x3a2b68;if(!e)return{lng:0,lat:0};if(e.lng>180||e.lng<-180||e.lat>90||e.lat<-90)return e;if(this.isWgs84){const c={};c.lng=e.lng*Math.PI/180*6378137;const l=e.lat*Math.PI/180;return c.lat=6378137/2*Math[i(t._0x50bb1b)]((1+Math[i(3492)](l))/(1-Math.sin(l))),{lng:parseFloat(c.lng.toFixed(2)),lat:parseFloat(c[i(t._0x58d713)].toFixed(2))}}e.lng=this.getLoop(e.lng,-180,180),e.lat=this.getRange(e.lat,-74,74);const s={lng:e[i(t._0x5b7377)],lat:e.lat};let r;for(let c=0;c<LL_BAND.length;c++)if(s.lat>=LL_BAND[c]){r=LL2MC[c];break}if(!r){for(let c=0;c<LL_BAND.length;c++)if(s.lat<=-LL_BAND[c]){r=LL2MC[c];break}}const o=this[i(t._0xc182b7)](e,r);return{lng:parseFloat(o[i(t._0x2685f3)][i(3265)](2)),lat:parseFloat(o[i(t._0x58d713)][i(3265)](2))}}[_0x3a2b68(3168)](e,t){if(!e||!t)return{lng:0,lat:0};let i=t[0]+t[1]*Math.abs(e.lng);const s=Math.abs(e.lat)/t[9];let r=t[2]+t[3]*s+t[4]*s*s+t[5]*s*s*s+t[6]*s*s*s*s+t[7]*s*s*s*s*s+t[8]*s*s*s*s*s*s;return i*=e.lng<0?-1:1,r*=e.lat<0?-1:1,{lng:i,lat:r}}getDistance(e,t,i,s){const r={_0x2006a8:3492},o=_0x3a2b68;return EARTH_RADIUS*Math.acos(Math[o(r._0x2006a8)](i)*Math.sin(s)+Math[o(2519)](i)*Math.cos(s)*Math.cos(t-e))}toRadians(e){return Math.PI*e/180}[_0x3a2b68(3501)](e){return 180*e/Math.PI}[_0x3a2b68(3717)](e,t,i){const s={_0x205c5f:3198},r=_0x3a2b68;return t!=null&&(e=Math[r(s._0x205c5f)](e,t)),i!=null&&(e=Math.min(e,i)),e}getLoop(e,t,i){for(;e>i;)e-=i-t;for(;e<t;)e+=i-t;return e}[_0x3a2b68(3064)](e){return this.convertLL2MC(e)}lngLatToPoint(e){const t=this.convertLL2MC(e);return{x:t.lng,y:t.lat}}mercatorToLngLat(e){return this.convertMC2LL(e)}pointToLngLat(e){const t={lng:e.x,lat:e.y};return this.convertMC2LL(t)}[_0x3a2b68(879)](e,t,i,s){const r={_0x4465f7:517,_0x8fbe87:4241},o=_0x3a2b68;if(!e)return{x:0,y:0};e=this[o(3064)](e);const c=this.getZoomUnits(t),_=Math.round((e.lng-i.lng)/c+s[o(r._0x4465f7)]/2),l=Math.round((i.lat-e.lat)/c+s[o(r._0x8fbe87)]/2);return{x:_,y:l}}pixelToPoint(e,t,i,s){const r={_0xa7ba80:389,_0x2a27ad:1679},o=_0x3a2b68;if(!e)return{lng:0,lat:0};const c=this[o(r._0xa7ba80)](t),_=i[o(4079)]+c*(e.x-s.width/2),l=i.lat-c*(e.y-s.height/2),d={lng:_,lat:l};return this[o(r._0x2a27ad)](d)}getZoomUnits(e){return Math[_0x3a2b68(392)](2,18-e)}}class BaiduMercatorTilingScheme extends Cesium__namespace.WebMercatorTilingScheme{constructor(e){const t={_0x83ebaf:1679,_0x4c9468:2806},i={_0x23444c:3501},s=_0x3a2b68;super(e);const r=e.mapChinaCRS||ChinaCRS.WGS84,o=ChinaCRS[s(1243)],c=getTransFun(r,o),_=getTransFun(o,r),l=new BaiduMercatorProjection;this[s(1845)].project=function(d,f){const g=s;return f=[Cesium__namespace.Math[g(i._0x23444c)](d.longitude),Cesium__namespace.Math.toDegrees(d.latitude)],c&&(f=c(f)),f[0]=Math.min(f[0],180),f[0]=Math.max(f[0],-180),f[1]=Math[g(2501)](f[1],85.05112877980659),f[1]=Math.max(f[1],-85.05112877980659),f=l[g(4107)]({lng:f[0],lat:f[1]}),new Cesium__namespace.Cartesian2(f.x,f.y)},this._projection[s(2246)]=function(d,f){const g=s;return f=l[g(t._0x83ebaf)]({lng:d.x,lat:d.y}),f=[f.lng,f.lat],_&&(f=_(f)),new Cesium__namespace[g(2228)](Cesium__namespace.Math.toRadians(f[0]),Cesium__namespace[g(t._0x4c9468)][g(1185)](f[1]))},this.resolutions=e.resolutions||[]}[_0x3a2b68(2970)](e,t,i,s){const r=_0x3a2b68,o=this.resolutions[i],c=e*o,_=(e+1)*o,l=((t=-t)+1)*o,d=t*o;return Cesium__namespace.defined(s)?(s.west=c,s.south=d,s[r(962)]=_,s.north=l,s):new Cesium__namespace.Rectangle(c,d,_,l)}[_0x3a2b68(4222)](e,t,i){const s={_0x52f295:1845},r=_0x3a2b68,o=this._rectangle;if(!Cesium__namespace.Rectangle.contains(o,e))return;const c=this[r(s._0x52f295)],_=c.project(e);if(!Cesium__namespace.defined(_))return;const l=this[r(3731)][t],d=Math.floor(_.x/l),f=-Math.floor(_.y/l);return Cesium__namespace.defined(i)?(i.x=d,i.y=f,i):new Cesium__namespace.Cartesian2(d,f)}}class BaiduImageryProvider{constructor(e={}){const t={_0x4e894f:607,_0x76a132:2506,_0x2d3926:2360,_0x30bf5f:3627,_0x1a23e7:3971,_0x47a91a:3532,_0x4984f2:3791,_0x134b16:2924},i=_0x3a2b68;let s;switch(e[i(t._0x4e894f)]){case"vec":s="https://maponline{s}.bdimg.com/tile/?qt=vtile&x={x}&y={y}&z={z}&styles="+(e.bigfont?"ph":"pl")+i(t._0x76a132);break;case"img_d":s="https://maponline{s}.bdimg.com/starpic/{s}?u={mars3d_u}",e.customTags=e.customTags||{},e.customTags.mars3d_u=(o,c,_,l)=>{const d=i;return"x="+c+";y="+-_+d(2083)+l+";v=009;type=sate"},e.queryParameters={...e.queryParameters,qt:"satepc",app:"webearth2",udt:"20210830",fm:"46",v:"009"};break;case"img_z":s=i(t._0x2d3926)+(e[i(t._0x30bf5f)]?"sh":"sl")+"&v=020";break;case i(2174):e.style=e.style||"midnight",s="http://api{s}.map.bdimg.com/customimage/tile?&x={x}&y={y}&z={z}&scale=1&customid="+e.style;break;case i(1036):s="http://its.map.baidu.com:8002/traffic/TrafficTileService?x={x}&y={y}&level={z}&time="+new Date().getTime()+"&label="+(e.label||"web2D")+"&v=017";break;case"streetview":s=i(t._0x1a23e7);break;default:s=e.url;break}this.options=e,this._resource=getUrlResource({...e,url:s}),this._tags=Cesium__namespace.combine(tags,this.options.customTags),this._subdomains=["0","1","2","3"],this._tileWidth=256,this._tileHeight=256,this._maximumLevel=18;const r=[];for(let o=0;o<19;o++)r[o]=256*Math.pow(2,18-o);this._tilingScheme=new BaiduMercatorTilingScheme({resolutions:r,rectangleSouthwestInMeters:new Cesium__namespace.Cartesian2(-2003772637e-2,-1247410417e-2),rectangleNortheastInMeters:new Cesium__namespace[i(t._0x47a91a)](2003772637e-2,1247410417e-2),mapChinaCRS:e[i(t._0x4984f2)]}),this._rectangle=this._tilingScheme.rectangle,this._readyPromise=Cesium__namespace[i(t._0x134b16)](),this._errorEvent=new Cesium__namespace.Event,this._ready=!![],this._readyPromise.resolve(!![])}get url(){const e={_0x2304ab:4023},t=_0x3a2b68;var i;return(i=this._resource)===null||i===void 0?void 0:i[t(e._0x2304ab)]}get[_0x3a2b68(4370)](){return this[_0x3a2b68(421)]}get tileHeight(){return this._tileHeight}get[_0x3a2b68(1930)](){return this[_0x3a2b68({_0x42eb3e:373}._0x42eb3e)]}get minimumLevel(){return 0}get tilingScheme(){return this[_0x3a2b68(3758)]}get rectangle(){return this._rectangle}get ready(){return this._ready}get readyPromise(){return this._readyPromise.promise}get[_0x3a2b68(3984)](){return this[_0x3a2b68({_0x480546:960}._0x480546)]}get credit(){return this._credit}get hasAlphaChannel(){return!![]}getTileCredits(e,t,i){}[_0x3a2b68(2167)](e,t,i,s){const r={_0x23bef8:754,_0x264de3:4012,_0x320038:3782},o={_0x1fda80:400},c=_0x3a2b68,_=this._resource,l=_.getUrlComponent(!![]),d=this[c(r._0x23bef8)],f={},g=l[c(r._0x264de3)](templateRegex);return Cesium__namespace.defined(g)&&g[c(r._0x320038)](b=>{const C=c,P=b.substring(1,b[C(o._0x1fda80)]-1);Cesium__namespace.defined(d[P])&&(f[P]=d[P](this,e,t,i))}),_.getDerivedResource({request:s,templateValues:f}).fetchImage({preferImageBitmap:!![],flipY:!![]})}}const templateRegex=/{[^}]+}/g,tags={x:xTag,y:yTag,reverseY:reverseYTag,z:zTag,s:sTag};function xTag(n,e,t,i){return e}function yTag(n,e,t,i){return-t}function reverseYTag(n,e,t,i){const s=_0x3a2b68;return n[s(1004)][s(4372)](i)-t-1}function zTag(n,e,t,i){return i}function sTag(n,e,t,i){const s=_0x3a2b68,r=(e+t+i)%n[s(914)].length;return n._subdomains[r]}class TencentImageryProvider extends XyzImageryProvider$1{constructor(e={}){const t=_0x3a2b68;switch(e.layer){case t(405):e.url=t(3615);break;case"img_d":e.url="https://p{s}.map.gtimg.com/sateTiles/{z}/{sx}/{sy}/{x}_{reverseY}.jpg?version=400",e.customTags={sx:(i,s,r,o)=>s>>4,sy:(i,s,r,o)=>(1<<o)-r>>4};break;case"img_z":e.url="https://rt{s}.map.gtimg.com/tile?z={z}&x={x}&y={reverseY}&styleid=2&scene=0";break;case"custom":e.style=e.style||"4",e.url=t(2557)+e.style+t(2676);break}e.subdomains=e.subdomains??["0","1","2"],super(e)}}class GoogleImageryProvider extends XyzImageryProvider$1{constructor(e={}){const t={_0x29d325:4023,_0x34df68:607,_0x31f82a:3382,_0x267334:716,_0x2d85d1:4006,_0x45b825:3008,_0x543624:1164,_0x2eeae0:2474},i=_0x3a2b68;let s;if(e.chinaCRS===ChinaCRS.WGS84)s=e[i(t._0x29d325)]||"https://gac-geo.googlecnapps.cn/maps/vt?lyrs=s&gl=us&x={x}&y={y}&z={z}";else switch(e[i(t._0x34df68)]){case"vec":s=i(t._0x31f82a);break;case"img_d":s=i(t._0x267334);break;case i(t._0x2d85d1):s="https://gac-geo.googlecnapps.cn/maps/vt?lyrs=h&gl=CN&x={x}&y={y}&z={z}";break;case i(t._0x45b825):s=i(t._0x543624);break;default:s=e.url;break}(e.proxy||e.headers||e.queryParameters)&&(s=getUrlResource({url:s[i(4262)](i(t._0x2eeae0),"1"),proxy:e.proxy,headers:e.headers,queryParameters:e[i(1712)]})),super({subdomains:["1","2","3"],maximumLevel:20,...e,url:s})}}class OsmImageryProvider extends XyzImageryProvider$1{constructor(e={}){const t={_0x3a3ca4:2497,_0x2ce59:1712},i=_0x3a2b68;let s="https://tile.openstreetmap.org/{z}/{x}/{y}.png";(e.proxy||e.headers||e[i(1712)])&&(s=getUrlResource({url:s,proxy:e.proxy,headers:e[i(t._0x3a3ca4)],queryParameters:e[i(t._0x2ce59)]})),super({maximumLevel:18,...e,url:s})}}class EmptyImageryProvider extends Cesium__namespace.TileCoordinatesImageryProvider{constructor(e={}){const t={_0x110cf8:3404},i=_0x3a2b68;super(e),this.options=e,this._minimumLevel=e[i(3406)]??0,this._maximumLevel=e[i(1930)],this._tilingScheme=e.tilingScheme??new Cesium__namespace.GeographicTilingScheme({ellipsoid:e[i(t._0x110cf8)]}),e.rectangle?this._rectangle=Cesium__namespace.Rectangle.intersection(e.rectangle,this._tilingScheme.rectangle):this._rectangle=this._tilingScheme.rectangle,this[i(1941)]=e}[_0x3a2b68(2167)](e,t,i){const s={_0x226bc2:1040,_0x109e30:3463};return new Promise((r,o)=>{const c=_0x20dc,_=document.createElement("canvas");if(_[c(517)]=256,_.height=256,i<this._minimumLevel||Cesium__namespace.defined(this._maximumLevel)&&i>this._maximumLevel)return _;if(this.options.debuggerTileInfo){const l=_.getContext("2d",{willReadFrequently:!![]});l.strokeStyle="#ffff00",l.lineWidth=2,l[c(580)](1,1,255,255);const d="L"+i+"X"+e+"Y"+t;l.font="bold 25px Arial",l.textAlign="center",l[c(s._0x226bc2)]=c(s._0x109e30),l.fillText(d,127,127),l.fillStyle="#ffff00",l.fillText(d,124,124)}r(_)})}}var index$5={__proto__:null,XyzImageryProvider:XyzImageryProvider$1,TdtImageryProvider,GaodeImageryProvider,BaiduImageryProvider,TencentImageryProvider,GoogleImageryProvider,OsmImageryProvider,EmptyImageryProvider};class GroupLayer extends BaseGraphicLayer{constructor(e={}){const t=_0x3a2b68;super(e),this[t(1086)]=[]}get[_0x3a2b68(607)](){return this._arrLayer}get arrLayer(){return this[_0x3a2b68({_0x1608d4:1086}._0x1608d4)]}get[_0x3a2b68(832)](){return this.length===0}get[_0x3a2b68(1007)](){return this.length>0}get length(){const e={_0x1f644a:2864,_0x561631:1086},t=_0x3a2b68;var i,s;if(((i=this[t(1941)])===null||i===void 0||(s=i.layers)===null||s===void 0?void 0:s.length)>0)return this.options[t(e._0x1f644a)].length;var r;return((r=this[t(e._0x561631)])===null||r===void 0?void 0:r.length)||0}get[_0x3a2b68(361)](){const e=_0x3a2b68;return this._arrLayer.length===0?![]:this._arrLayer[0][e(361)]}get[_0x3a2b68(2850)](){return this._arrLayer.length===0?![]:this._arrLayer[0].hasZIndex}get zIndex(){const e={_0x262861:1941},t=_0x3a2b68;return this[t(e._0x262861)][t(1266)]}set zIndex(e){const t={_0x30d5a2:1266},i=_0x3a2b68;this.options[i(t._0x30d5a2)]=e,this.eachLayer(s=>{s.hasZIndex&&(s.zIndex=e)},this)}[_0x3a2b68(840)](e){this.eachLayer(t=>{t.show=e},this)}_mountedHook(){const e={_0x3f2620:509},t=_0x3a2b68;super._mountedHook();const i=this.options.layers;if(i&&i.length>0)for(let s=0;s<i.length;s++){const r=i[s];r[t(e._0x3f2620)]=this,r.private=this.isPrivate;const o=create$2(r,this.options.templateValues);o&&this[t(4243)](o)}}_addedHook(){const e={_0x1f1c99:1588},t={_0x4003ab:1900},i={_0x23d65c:1575},s=_0x3a2b68,r=[];this.eachLayer(o=>{const c=_0x20dc;o.eventParent=this,this[c(i._0x23d65c)].addLayer(o),r.push(o.readyPromise)},this),Promise[s(e._0x1f1c99)](r).then(o=>{this[s(t._0x4003ab)].resolve(this)})}_removedHook(){this.removeMapChilds()}[_0x3a2b68(1053)](){this.eachLayer(e=>{this._map.addLayer(e)},this)}removeMapChilds(){const e={_0x2a8cbd:1575},t=_0x3a2b68;this[t(1065)](i=>{this[t(e._0x2a8cbd)].removeLayer(i)},this)}addLayer(e){const t={_0xbff1d7:4243},i=_0x3a2b68;return e.parent&&(e.removeEventParent(e.parent),e.parent=null),e.pid=this.id,e.parent=this,e.options.eventParent=this,this._arrLayer.push(e),this.isAdded&&!e.isAdded?this._map[i(t._0xbff1d7)](e):(e.removeEventParent(this._map),e.addEventParent(this)),this}[_0x3a2b68(2033)](e){const t={_0x4e8d7b:3591,_0xe9622e:4326},i=_0x3a2b68;return e[i(t._0x4e8d7b)]=null,e.removeEventParent(this),removeArrayItem(this._arrLayer,e),this._map&&e[i(t._0xe9622e)]&&this._map.removeLayer(e),this}[_0x3a2b68(916)](){for(let e=this._arrLayer.length-1;e>=0;e--){const t=this._arrLayer[e];this.removeLayer(t)}this._arrLayer=[]}[_0x3a2b68(1065)](e,t){const i=_0x3a2b68;if(this[i(1086)])return this[i(1086)].forEach(s=>{e.call(t,s)}),this}getLayers(){return this[_0x3a2b68(1086)]}getInMapChilds(){const e={_0x25aa17:1065},t={_0x112122:1466,_0x31afad:2051},i=_0x3a2b68,s=this._arrLayer||[];return this._map[i(e._0x25aa17)](r=>{const o=i;r[o(t._0x112122)]===this.id&&this._arrLayer[o(t._0x31afad)](r)===-1&&s.push(r)},this),s}getLayerById(e){const t={_0x192de4:1086},i=_0x3a2b68,s=this[i(t._0x192de4)];if(!(!this._arrLayer||this._arrLayer.length===0))for(let r=0,o=s.length;r<o;r++){const c=s[r];if(c.id===e)return c}}[_0x3a2b68(3894)](e){const t={_0x121ba5:1086,_0x355162:400},i=_0x3a2b68;if(!(!this[i(t._0x121ba5)]||this[i(1086)][i(t._0x355162)]===0))for(let s=0;s<this[i(t._0x121ba5)].length;s++){const r=this[i(1086)][s];if(r.name===e||r.id===e)return r}}hasLayer(e,t){const i={_0x435390:1086},s=_0x3a2b68;for(let r=0;r<this._arrLayer.length;r++){const o=this[s(i._0x435390)][r];if(!(t&&o===t)&&(o.name===e||o.id===e))return!![]}return![]}_toJsonEx(e){const t=[];this.eachLayer(i=>{t.push(i.toJSON())},this),t.length>0&&(e.layers=t)}getRectangle(e){const t=_0x3a2b68;let i;return this[t(3886)]().forEach(r=>{if(!r.getRectangle)return;const o=r.getRectangle();Cesium__namespace.defined(o)&&(i?i=Cesium__namespace.Rectangle.union(o,i):i=o)},this),e?formatRectangle(i):i}setOpacity(e){const t={_0x2cf01d:3248};this.eachLayer(i=>{const s=_0x20dc;i[s(t._0x2cf01d)]=e},this)}[_0x3a2b68(346)](){this.eachLayer(e=>{e[_0x20dc(346)]()},this)}[_0x3a2b68(766)](){const e={_0x830d06:766},t=_0x3a2b68,i=this[t(1086)];for(let s=i[t(400)]-1;s>=0;s--)i[s][t(e._0x830d06)]()}[_0x3a2b68(2619)](e){const t={_0x5b2932:2619},i=_0x3a2b68;this.eachLayer(s=>{const r=_0x20dc;s!=null&&s.destroy&&s[r(2619)](e)},this),super[i(t._0x5b2932)](e)}}register$2("group",GroupLayer);class BaseTileLayer extends BaseLayer{constructor(e={}){const t={_0x41169f:4140},i=_0x3a2b68;super(e),this[i(t._0x41169f)](e),this.isTile=!![]}get[_0x3a2b68(607)](){return this[_0x3a2b68({_0x408b9f:3526}._0x408b9f)]}get imageryProvider(){const e={_0x33d9db:3526},t=_0x3a2b68;var i;return(i=this[t(e._0x33d9db)])===null||i===void 0?void 0:i.imageryProvider}get[_0x3a2b68(3663)](){const e={_0x1b6268:3663},t=_0x3a2b68;return this.options[t(e._0x1b6268)]||CRS.EPSG3857}get alpha(){return this[_0x3a2b68(3248)]}set alpha(e){this.opacity=e}get brightness(){const e={_0x293362:2071},t=_0x3a2b68;var i;return this.options.brightness||((i=this._imageryLayer)===null||i===void 0?void 0:i[t(e._0x293362)])}set brightness(e){const t=_0x3a2b68;this.options[t(2071)]=e,this._imageryLayer!=null&&(this._imageryLayer.brightness=e)}get contrast(){const e={_0x1a33da:3243,_0x9b4646:3526},t=_0x3a2b68;var i;return this[t(1941)][t(e._0x1a33da)]||((i=this[t(e._0x9b4646)])===null||i===void 0?void 0:i.contrast)}set contrast(e){const t=_0x3a2b68;this.options.contrast=e,this._imageryLayer!=null&&(this._imageryLayer[t(3243)]=e)}get hue(){const e=_0x3a2b68;var t;return this.options.hue||((t=this[e(3526)])===null||t===void 0?void 0:t.hue)}set hue(e){const t=_0x3a2b68;this.options.hue=e,this._imageryLayer!=null&&(this._imageryLayer[t(1949)]=e)}get saturation(){const e=_0x3a2b68;var t;return this.options.saturation||((t=this._imageryLayer)===null||t===void 0?void 0:t[e(2705)])}set[_0x3a2b68(2705)](e){const t={_0x4d4116:2705},i=_0x3a2b68;this.options.saturation=e,this._imageryLayer!=null&&(this._imageryLayer[i(t._0x4d4116)]=e)}get gamma(){const e={_0x42edae:1941},t=_0x3a2b68;var i;return this[t(e._0x42edae)].gamma||((i=this._imageryLayer)===null||i===void 0?void 0:i[t(1622)])}set[_0x3a2b68(1622)](e){const t=_0x3a2b68;this[t(1941)][t(1622)]=e,this._imageryLayer!=null&&(this[t(3526)].gamma=e)}get hasZIndex(){return!![]}get zIndex(){const e={_0x8a4888:1941,_0x16b8d3:1266},t=_0x3a2b68;return this[t(e._0x8a4888)][t(e._0x16b8d3)]}set zIndex(e){const t={_0x381ad8:1266,_0x1e09a4:3526},i=_0x3a2b68;if(this.options[i(t._0x381ad8)]=e,this._imageryLayer==null||e==null)return;this._map.imageryLayers[i(2350)](this._imageryLayer);const s=this._map.imageryLayers._layers;for(let r=s[i(400)]-1;r>=0;r--){const o=s[r];if(o===this._imageryLayer)continue;const c=o._mars3d_config;c&&c[i(1266)]&&e<c.zIndex&&this._map.imageryLayers.lower(this[i(t._0x1e09a4)])}}get rectangle(){const e={_0x3c8b9b:3417,_0x213666:2560},t=_0x3a2b68;var i,s;return this[t(e._0x3c8b9b)]?this._rectangle:(i=this._imageryLayer)!==null&&i!==void 0&&(s=i.imageryProvider)!==null&&s!==void 0&&s.rectangle?this._imageryLayer[t(e._0x213666)][t(1531)]:null}set rectangle(e){const t={_0x432d4a:1531},i=_0x3a2b68;if(e){if(e instanceof Cesium__namespace.Rectangle){var s,r;this._rectangle=e,this[i(1941)][i(1531)]=formatRectangle(this._rectangle),(s=this._imageryLayer)!==null&&s!==void 0&&(r=s.imageryProvider)!==null&&r!==void 0&&r[i(t._0x432d4a)]&&(this._imageryLayer.imageryProvider[i(3417)]=this._rectangle)}}else this._rectangle=void 0,delete this.options.rectangle,this[i(2128)]()}_setRectangleByOptions(e){const t={_0x4a1308:407,_0x465588:528,_0x57335f:4353,_0x53a280:3474,_0x526f15:3417},i=_0x3a2b68;Cesium__namespace.defined(e.rectangle)?Cesium__namespace[i(t._0x4a1308)](e.rectangle[i(t._0x465588)])&&Cesium__namespace.defined(e.rectangle[i(t._0x57335f)])&&Cesium__namespace.defined(e.rectangle.ymin)&&Cesium__namespace.defined(e.rectangle.ymax)?this._rectangle=Cesium__namespace.Rectangle.fromDegrees(e.rectangle.xmin,e.rectangle.ymin,e[i(1531)].xmax,e.rectangle.ymax):e.rectangle instanceof Cesium__namespace.Rectangle?this._rectangle=e.rectangle:delete e.rectangle:Cesium__namespace[i(407)](e.bbox)&&e[i(t._0x53a280)].length&&e.bbox.length===4?this[i(t._0x526f15)]=Cesium__namespace.Rectangle.fromDegrees(e.bbox[0],e.bbox[1],e.bbox[2],e.bbox[3]):this._rectangle=void 0}_setOptionsHook(e,t){this[_0x3a2b68({_0x264175:4140}._0x264175)](e),this.reload()}async _createImageryProvider(e){return new Cesium__namespace.UrlTemplateImageryProvider(e)}_addedHook(){const e={_0x572351:1941,_0x27e9cc:730,_0x34561a:1074,_0x450314:1941,_0x15c479:1575,_0x3a3590:3674,_0xd22481:1941,_0x14621d:1941,_0x485edd:1126,_0x535a93:583},t={_0x4e6ce8:1580},i=_0x3a2b68;var s,r,o;this[i(e._0x572351)].highlight&&(this.options.enablePickFeatures=!![]);const c=this[i(e._0x27e9cc)]({...this.options,rectangle:this.rectangle,mapChinaCRS:this._map.chinaCRS});if(!Cesium__namespace.defined(c))return;const _=this.options,l={show:this[i(442)],alpha:this.opacity,..._,rectangle:this[i(1531)],marsOptions:{onAddTile:d=>{const f=this._getTileEventParams(d);this.fire(EventType.addTile,f)},onAddTileSuccess:d=>{const f=this._getTileEventParams(d);this.fire(EventType.addTileSuccess,f)},onAddTileError:d=>{const f=this._getTileEventParams(d);this.fire(EventType.addTileError,f)},onRemoveTile:d=>{const f=i,g=this._getTileEventParams(d);this.fire(EventType[f(t._0x4e6ce8)],g)}}};this._imageryLayer=Cesium__namespace[i(e._0x34561a)].fromProviderAsync(c,l),this._imageryLayer._mars3d_layerId=this.id,this._imageryLayer._mars3d_config=this.options,this[i(e._0x450314)][i(1432)]&&this._map[i(3262)]&&l.crs!==CRS.EPSG3857?(this._imageryLayer._clampToTileset=!![],this._map.imageryLayersForClamp.add(this._imageryLayer)):this[i(e._0x15c479)][i(3011)][i(e._0x3a3590)](this._imageryLayer),this.options.zIndex&&(this.zIndex=this.options[i(1266)]),this.options.highlight?(this[i(e._0xd22481)][i(2868)]=!![],this[i(906)](this.options.highlight)):(s=this.options.symbol)!==null&&s!==void 0&&(r=s[i(511)])!==null&&r!==void 0&&r.highlight&&this.bindHighlight(this[i(e._0x14621d)][i(e._0x485edd)].styleOptions.highlight),(o=this.options)!==null&&o!==void 0&&o.flyTo&&this.flyToByAnimationEnd(),this._readyPromise[i(e._0x535a93)](this),this.fire(EventType[i(432)],{},!![])}[_0x3a2b68(1240)](e){return{x:e.x,y:e.y,level:e.level,extent:formatRectangle(e.rectangle)}}_removedHook(){const e={_0x36766c:3011,_0x584d11:1361,_0x1ba5e0:3526},t=_0x3a2b68;var i,s,r;this.unbindHighlight(),(i=this[t(3526)])!==null&&i!==void 0&&(s=i.imageryProvider)!==null&&s!==void 0&&s.destroy&&this._imageryLayer[t(2560)].destroy(),(r=this._imageryLayer)!==null&&r!==void 0&&r._clampToTileset?this[t(1575)].imageryLayersForClamp.remove(this._imageryLayer):this[t(1575)][t(e._0x36766c)][t(e._0x584d11)](this[t(3526)],!![]),this[t(e._0x1ba5e0)]=null}reload(){const e={_0x3e323f:1941},t=_0x3a2b68,i=this[t(1941)].flyTo??![];this._imageryLayer&&this._removedHook(),this.isAdded&&(this.options.flyTo=![],this[t(3192)](EventType.load,()=>{const s=t;this[s(e._0x3e323f)][s(2961)]=i}),this._addedHook())}setOpacity(e){this[_0x3a2b68({_0x28f83a:3526}._0x28f83a)]&&(this._imageryLayer.alpha=e)}toTop(){const e={_0x50f7d9:2350,_0xb0c34e:3526},t=_0x3a2b68;if(this._map)return this._map.imageryLayers[t(e._0x50f7d9)](this[t(e._0xb0c34e)])}toBottom(){const e={_0x22e2e8:3336},t=_0x3a2b68;if(this._map)return this._map.imageryLayers[t(e._0x22e2e8)](this._imageryLayer)}[_0x3a2b68(2961)](e={}){const t={_0x120712:1575,_0x365d79:2268,_0x5dd949:1941,_0x567057:1878},i=_0x3a2b68;if(!this._map||!this._imageryLayer)return Promise[i(583)](![]);if(this[i(t._0x120712)][i(t._0x365d79)](),this[i(t._0x5dd949)][i(1553)]&&(e={...this.options.flyToOptions,...e}),this[i(1941)].center)return this._map.setCameraView(this.options.center,e);if(this[i(t._0x5dd949)].extent)return this[i(t._0x120712)].flyToExtent(this.options[i(4087)],e);{const s=this[i(1531)];if(Cesium__namespace.defined(s)&&s.equals&&!s.equals(Cesium__namespace.Rectangle.MAX_VALUE)&&s[i(t._0x567057)]>0&&s.south>0&&s.east>0&&s.north>0)return this._map.camera[i(2961)]({...e,destination:s})}return Promise[i(583)](![])}bindHighlight(e){const t={_0x53cacf:3017,_0x31befd:383},i=_0x3a2b68;this.unbindHighlight(),this[i(t._0x53cacf)]=e,this.on(EventType[i(t._0x31befd)],this._highlight_mouseEventHandler,this)}unbindHighlight(){const e={_0x24037d:3017,_0xb201a7:1575,_0x2133c8:2962},t=_0x3a2b68;this[t(e._0x24037d)]&&(this.off(EventType.click,this._highlight_mouseEventHandler,this),this[t(e._0xb201a7)][t(e._0x2133c8)](),this._highlightOptions=null)}_highlight_mouseEventHandler(e){const t={_0x393eb0:1575},i=_0x3a2b68;this._map.closeHighlight();const s=e[i(1929)];s&&(this._last_graphicsOptions=s,this[i(t._0x393eb0)].openHighlight(this,this._highlightOptions,e))}_highlight_mouseOutHandler(e){const t={_0x2d802d:2962},i=_0x3a2b68;this._map[i(t._0x2d802d)]()}openHighlight(e,t=!![]){const i={_0x19c411:1575,_0x5a0208:2505},s=_0x3a2b68;t&&(this[s(i._0x19c411)].closeHighlight(),this._map.last_highlighGraphic=this);const r=e||this[s(3017)];this._last_graphicsOptions&&r&&(!this._graphicLayer&&(this[s(i._0x5a0208)]=new GraphicLayer({name:s(3930),private:!![]}),this._map.addLayer(this._graphicLayer)),this._graphicLayer[s(2847)](this[s(989)]),this[s(1109)](EventType.highlightOpen,{},!![]))}closeHighlight(){var e;!this._graphicLayer||((e=this._map)===null||e===void 0?void 0:e.last_highlighGraphic)!==this||(this._graphicLayer.clear(),this._map._clearLastHighlight(),this.fire(EventType.highlightClose,{},!![]))}}class TerrainLayer extends BaseLayer{[_0x3a2b68(840)](e){e?this._addedHook():this[_0x3a2b68({_0x272d12:3916}._0x272d12)]()}_mountedHook(){this._terrainProviderPromise=createTerrainProvider(this._getTerrainOptions())}_getTerrainOptions(){return{templateValues:this[_0x3a2b68({_0x16210b:1941}._0x16210b)].templateValues,...this.options.terrain}}[_0x3a2b68(2679)](){const e={_0x596957:943},t=_0x3a2b68;this.show&&this[t(e._0x596957)]()}_removedHook(){const e=_0x3a2b68;this[e(1575)].terrainProvider=getNoTerrainProvider()}_setOptionsHook(e,t){const i=_0x3a2b68;this._terrainProviderPromise=createTerrainProvider(this[i(2779)]()),this._updateTerrainProvider()}_updateTerrainProvider(){const e={_0x4dda64:4193},t=_0x3a2b68;this._terrainProviderPromise.then(i=>{this._readyPromise.resolve(this),this.fire(EventType.load,{terrain:this._map.terrainProvider})}),this._map.terrainProvider=this[t(e._0x4dda64)]}}register$2("terrain",TerrainLayer);class ArcGisCacheLayer extends BaseTileLayer{async _createImageryProvider(e){return await createImageryProvider$j(e)}}async function createImageryProvider$j(n){const e={_0x1b15a2:4262,_0x4742a4:3947},t=_0x3a2b68;n.url=n.url.replace("{x}","C{arc_x}")[t(e._0x1b15a2)]("{y}",t(1808))[t(e._0x1b15a2)](t(e._0x4742a4),"L{arc_z}");const i=n.upperCase;return n.customTags=n.customTags||{},n.customTags.arc_x=function(s,r,o,c){return i?padLeft0(r.toString(16),8).toUpperCase():padLeft0(r[t(956)](16),8)},n.customTags.arc_y=function(s,r,o,c){return i?padLeft0(o.toString(16),8).toUpperCase():padLeft0(o.toString(16),8)},n[t(1301)].arc_z=function(s,r,o,c){return i?padLeft0(c.toString(),2).toUpperCase():padLeft0(c.toString(),2)},n[t(1301)].arc_z4490=function(s,r,o,c){return i?padLeft0((c+1).toString(),2).toUpperCase():padLeft0((c+1).toString(),2)},n=converOptions(n),new XyzImageryProvider$1(n)}ArcGisCacheLayer.createImageryProvider=createImageryProvider$j;const layerType$k=_0x3a2b68(2889);register$2(layerType$k,ArcGisCacheLayer),registerImageryProvider(layerType$k,createImageryProvider$j);class ArcGisTileLayer extends BaseTileLayer{async _createImageryProvider(e){return await createImageryProvider$i(e)}}async function createImageryProvider$i(n){const e={_0x2744ec:4023,_0x4554ae:4357},t=_0x3a2b68;return n=converOptions(n),isString(n.url)?n.url=n[t(e._0x2744ec)]+"/tile/{z}/{y}/{x}":n.url instanceof Cesium__namespace[t(e._0x4554ae)]&&(n.url.url=n.url[t(e._0x2744ec)]+"/tile/{z}/{y}/{x}"),new XyzImageryProvider$1(n)}ArcGisTileLayer.createImageryProvider=createImageryProvider$i;const layerType$j="arcgis_tile";register$2(layerType$j,ArcGisTileLayer),registerImageryProvider(layerType$j,createImageryProvider$i);class ArcGisImageryProvider{constructor(e={}){const t={_0x3a6ae9:1415,_0x4b3a43:407,_0x31711e:1193,_0x17a727:1900},i=_0x3a2b68;this.options=e;const s=Cesium__namespace.Resource.createIfNeeded(e.url);s[i(t._0x3a6ae9)](),Cesium__namespace[i(t._0x4b3a43)](e.token)&&s.setQueryParameters({token:e[i(4207)]}),this._resource=s,this._tileDiscardPolicy=e.tileDiscardPolicy,this._tileWidth=e.tileWidth??256,this._tileHeight=e.tileHeight??256,this._maximumLevel=e[i(1930)],this._maxTileLevel=e.maxTileLevel,this._crs=e.crs,this[i(2868)]=e.enablePickFeatures??!![],this._useTiles=e.usePreCachedTilesIfAvailable??!![],this._initTilingSchemeByCrs(e.crs||CRS[i(t._0x31711e)]),this._errorEvent=new Cesium__namespace.Event,this._ready=![],this._readyPromise=Cesium__namespace.defer(),this._useTiles?this[i(1371)]():(this._ready=!![],this[i(t._0x17a727)].resolve(!![]))}get url(){const e={_0x48537e:2625},t=_0x3a2b68;return this._resource[t(e._0x48537e)]}get token(){return this[_0x3a2b68({_0x4e1d8f:4355}._0x4e1d8f)].queryParameters.token}get proxy(){return this[_0x3a2b68(4355)].proxy}get tileWidth(){return this._tileWidth}get tileHeight(){return this._tileHeight}get[_0x3a2b68(1930)](){return this[_0x3a2b68({_0x5d37db:373}._0x5d37db)]}get[_0x3a2b68(3406)](){return 0}get[_0x3a2b68(1004)](){return this._tilingScheme}get rectangle(){return this[_0x3a2b68(3417)]}get tileDiscardPolicy(){return this[_0x3a2b68({_0x1216c6:2323}._0x1216c6)]}get[_0x3a2b68(3984)](){return this[_0x3a2b68(960)]}get ready(){return this._ready}get[_0x3a2b68(2449)](){return this._readyPromise.promise}get[_0x3a2b68(1281)](){return this._credit}get[_0x3a2b68(1578)](){return this._useTiles}get hasAlphaChannel(){return!![]}get layers(){return this[_0x3a2b68({_0x599eb9:1941}._0x599eb9)].layers}get[_0x3a2b68(1968)](){return this[_0x3a2b68({_0x2fbacd:1941}._0x2fbacd)].layerDefs}_initTilingSchemeByCrs(e){const t={_0xce27e5:3758},i=_0x3a2b68;return e===CRS.EPSG3857?(this._tilingScheme=this.options.tilingScheme||new Cesium__namespace.WebMercatorTilingScheme({ellipsoid:this.options.ellipsoid}),this._rectangle=this[i(1941)].rectangle??this._tilingScheme.rectangle,!![]):e===CRS[i(1193)]||e===CRS.EPSG4490?(this[i(t._0xce27e5)]=this.options.tilingScheme||new Cesium__namespace.GeographicTilingScheme({ellipsoid:this.options.ellipsoid}),this._rectangle=this.options.rectangle??this._tilingScheme.rectangle,!![]):![]}[_0x3a2b68(1371)](){const e={_0x412723:4124},t=_0x3a2b68;this._resource[t(4119)]({queryParameters:{f:"json"}}).fetchJsonp().then(s=>{this._metadataSuccess(s)}).catch(s=>{this[t(e._0x412723)](s)})}_metadataSuccess(e){const t={_0x160f0e:751,_0x438799:683,_0xd8b413:2388,_0x13debc:751,_0x319d1b:3663,_0x4709ad:767,_0x1f29cd:3532,_0x5c3885:3532,_0x21ea50:3532,_0xc7ce76:1941,_0x2b0d99:528,_0x36a922:2269,_0x44d97c:1983,_0x5c1976:941,_0x5993f9:2405,_0x1ae395:583,_0x186953:1638,_0x2e5f7e:622},i=_0x3a2b68;if(this.capabilities=e,Cesium__namespace.defined(e.tileInfo)){this[i(t._0x13debc)]=!![];const l=e.tileInfo;if(this._tileWidth=l.rows,this._tileHeight=l.cols,!this._maximumLevel&&(this._maximumLevel=l.lods.length-1),!this.options[i(t._0x319d1b)]){var r;this[i(t._0x4709ad)]=getCRSByWkid((r=l.spatialReference)===null||r===void 0?void 0:r.wkid),this[i(t._0x13debc)]=this._initTilingSchemeByCrs(this._crs)}this[i(t._0x160f0e)]&&!Cesium__namespace.defined(this._tileDiscardPolicy)&&(this._tileDiscardPolicy=new Cesium__namespace.DiscardMissingTileImagePolicy({missingImageUrl:this._buildImageResource(0,0,this._maximumLevel).url,pixelsToCheck:[new Cesium__namespace[i(t._0x1f29cd)](0,0),new Cesium__namespace[i(t._0x5c3885)](200,20),new Cesium__namespace.Cartesian2(20,200),new Cesium__namespace[i(t._0x21ea50)](80,110),new Cesium__namespace.Cartesian2(160,130)],disableCheckIfAllPixelsAreTransparent:!![]}))}else if(this[i(t._0x160f0e)]=![],!this.options.crs){var s;this._crs=getCRSByWkid((s=e[i(t._0x438799)])===null||s===void 0?void 0:s[i(t._0xd8b413)]),this._initTilingSchemeByCrs(this[i(767)])}let o=e[i(1275)]||e.extent;if(!this[i(t._0xc7ce76)].rectangle&&o){var c,_;let l=this._crs;if((c=o)!==null&&c!==void 0&&(_=c.spatialReference)!==null&&_!==void 0&&_[i(2388)]&&(l=getCRSByWkid(o[i(683)][i(2388)])),l){if(l!==CRS.EPSG4326&&l!==CRS[i(3034)]){const d=proj4Trans([o[i(t._0x2b0d99)],o.ymin],l),f=proj4Trans([o.xmax,o[i(t._0x36a922)]],l);o={xmin:d[0],ymin:d[1],xmax:f[0],ymax:f[1]}}this._extent=o,o.xmin>0&&o.xmax<179&&o.ymin>0&&o.ymax<85&&(this[i(3417)]=Cesium__namespace[i(t._0x44d97c)].fromDegrees(o.xmin,o[i(t._0x5c1976)],o.xmax,o.ymax))}}this[i(t._0x5993f9)]=!![],this._readyPromise[i(t._0x1ae395)](!![]),Cesium__namespace[i(1638)].reportSuccess?Cesium__namespace[i(t._0x186953)][i(3907)](this._metadataError):Cesium__namespace.TileProviderError.handleSuccess&&Cesium__namespace.TileProviderError.handleSuccess(this[i(t._0x2e5f7e)])}_metadataFailure(e){const t={_0x40c424:960,_0x21b412:3398},i=_0x3a2b68;var s;const r="An error occurred while accessing "+this[i(4355)].url+".";Cesium__namespace.TileProviderError.reportError?this._metadataError=Cesium__namespace.TileProviderError[i(1646)](this._metadataError,this,this[i(t._0x40c424)],r,void 0,void 0,void 0,this._requestMetadata):Cesium__namespace.TileProviderError.handleError&&(this._metadataError=Cesium__namespace.TileProviderError.handleError(this._metadataError,this,this._errorEvent,r,void 0,void 0,void 0,this._requestMetadata)),(s=this._readyPromise)!==null&&s!==void 0&&s[i(t._0x21b412)]&&this._readyPromise[i(3398)](new Cesium__namespace.RuntimeError(r))}getTileCredits(e,t,i){}requestImage(e,t,i,s){return Cesium__namespace.ImageryProvider.loadImage(this,this._buildImageResource(e,t,i,s))}[_0x3a2b68(2742)](e,t,i,s){const r={_0x2c6c9b:4049,_0x5a40c1:4049,_0x39035f:767,_0x70b9d0:1442,_0x550e8b:3758,_0x134550:1054,_0x5ed4db:2864},o=_0x3a2b68;let c=this._useTiles;if(c&&Cesium__namespace.defined(this[o(r._0x2c6c9b)])&&(c=i<this[o(r._0x5a40c1)]),c)return this[o(r._0x39035f)]===CRS.EPSG4490&&(i=i+1),this._resource.getDerivedResource({url:"tile/"+i+"/"+t+"/"+e,request:s});{const _=this._tilingScheme.tileXYToNativeRectangle(e,t,i),l=_.west+","+_.south+","+_.east+","+_.north,d={bbox:l,size:this._tileWidth+","+this._tileHeight,format:o(r._0x70b9d0),transparent:!![],f:"image"};return this[o(r._0x550e8b)].projection instanceof Cesium__namespace.GeographicProjection?(d.bboxSR=this._wkid||4326,d[o(r._0x134550)]=this._wkid||4326):(d.bboxSR=this._wkid||3857,d.imageSR=this._wkid||3857),this[o(r._0x5ed4db)]&&(d.layers="show:"+this.layers),this.layerDefs&&(d.layerDefs=this.layerDefs),this._resource.getDerivedResource({url:"export",request:s,queryParameters:d})}}[_0x3a2b68(3226)](e,t,i,s,r){const o={_0x2e3298:2970,_0x1f3ceb:4146,_0x15afc6:407,_0xa0fe8f:421,_0x11ae4c:1843},c={_0x4248cf:407},_=_0x3a2b68;if(!this.enablePickFeatures)return;const l=this[_(3758)][_(o._0x2e3298)](e,t,i);let d,f,g;if(this._tilingScheme[_(1409)]instanceof Cesium__namespace.GeographicProjection)d=Cesium__namespace[_(2806)].toDegrees(s),f=Cesium__namespace.Math.toDegrees(r),g="4326";else{const S=this[_(3758)].projection[_(o._0x1f3ceb)](new Cesium__namespace.Cartographic(s,r,0));d=S.x,f=S.y,g="3857"}let b="visible";Cesium__namespace[_(o._0x15afc6)](this.layers)&&(b+=":"+this.layers);const C={f:"json",tolerance:2,geometryType:"esriGeometryPoint",geometry:d+","+f,mapExtent:l.west+","+l.south+","+l.east+","+l.north,imageDisplay:this[_(o._0xa0fe8f)]+","+this._tileHeight+",96",sr:g,layers:b};return Cesium__namespace.defined(this.layerDefs)&&(C[_(1968)]=this.layerDefs),this._resource.getDerivedResource({url:_(o._0x11ae4c),queryParameters:C}).fetchJson().then(function(S){const L=_,E=[],M=S.results;if(!Cesium__namespace[L(c._0x4248cf)](M))return E;const D="EPSG:"+g;for(let R=0;R<M.length;++R){const k=M[R],N=new Cesium__namespace[L(2138)];N.data=k,N.crs=D,N.name=k[L(2251)],N[L(3211)]=k.attributes,N.configureDescriptionFromProperties(k.attributes),E.push(N)}return E})}}function getCRSByWkid(n){const e={_0x1c8eb:542},t=_0x3a2b68;switch(n){case 4326:case 4283:return CRS[t(1193)];case 4490:return CRS.EPSG4490;case 102100:case 900913:case 3857:return CRS.EPSG3857;default:return isNumber(n)?t(e._0x1c8eb)+n:void 0}}class ArcGisLayer extends BaseTileLayer{get crs(){const e={_0x383d6:1941},t=_0x3a2b68;var i;return((i=this.imageryProvider)===null||i===void 0?void 0:i[t(767)])||this[t(e._0x383d6)].crs||CRS[t(1193)]}get[_0x3a2b68(4103)](){const e=_0x3a2b68;var t;return(t=this[e(2560)])===null||t===void 0?void 0:t.capabilities}async _createImageryProvider(e){return await createImageryProvider$h(e)}[_0x3a2b68(1197)](){return this._popupConfig?!![]:![]}bindPopup(e,t){const i=_0x3a2b68;return this[i(2876)]={content:e,options:t,layer:this},this._bindControl(),this}unbindPopup(){const e={_0x587385:2876},t=_0x3a2b68;return this.closePopup(),this[t(e._0x587385)]=null,this}[_0x3a2b68(2792)](){const e=_0x3a2b68;return this._map&&this[e(1197)]()&&this._map.popup.close(null,this),this}}async function createImageryProvider$h(n){const e={_0x180b5b:4023,_0x449541:3291},t=_0x3a2b68;if(Cesium__namespace.defined(n.layer)&&!Cesium__namespace.defined(n.url))switch(n.layer){case"vec":n[t(4023)]=t(2224);break;case t(2052):n[t(e._0x180b5b)]=t(2286);break}return n=converOptions(n),n[t(e._0x449541)]?new Cesium__namespace.ArcGisMapServerImageryProvider(n):new ArcGisImageryProvider(n)}ArcGisLayer[_0x3a2b68(1760)]=createImageryProvider$h;const layerType$i="arcgis";register$2(layerType$i,ArcGisLayer),registerImageryProvider(layerType$i,createImageryProvider$h);class BaiduLayer extends BaseTileLayer{async _createImageryProvider(e){return await createImageryProvider$g(e)}}async function createImageryProvider$g(n){return n=converOptions(n),new BaiduImageryProvider(n)}BaiduLayer.createImageryProvider=createImageryProvider$g;const layerType$h="baidu";register$2(layerType$h,BaiduLayer),registerImageryProvider(layerType$h,createImageryProvider$g);class BingLayer extends BaseTileLayer{async[_0x3a2b68(730)](e){return await createImageryProvider$f(e)}}async function createImageryProvider$f(n){const e={_0x3dcb10:2459,_0x1d88c6:851,_0x65ae68:607,_0x35698b:1752},t=_0x3a2b68,i=n.url??t(1970);return n[t(e._0x3dcb10)]=n.culture??t(e._0x1d88c6),n.key=n.key??bing,n[t(e._0x65ae68)]=n[t(607)]??Cesium__namespace.BingMapsStyle[t(e._0x35698b)],n=converOptions(n),await Cesium__namespace[t(2704)][t(4313)](i,{mapStyle:n.layer,...n})}BingLayer.createImageryProvider=createImageryProvider$f;const layerType$g="bing";register$2(layerType$g,BingLayer),registerImageryProvider(layerType$g,createImageryProvider$f);class GaodeLayer extends BaseTileLayer{async _createImageryProvider(e){return await createImageryProvider$e(e)}}async function createImageryProvider$e(n){const e={_0x2150a8:764},t=_0x3a2b68;return n.chinaCRS=n.chinaCRS||ChinaCRS[t(e._0x2150a8)],n=converOptions(n),new GaodeImageryProvider(n)}GaodeLayer.createImageryProvider=createImageryProvider$e;const layerType$f=_0x3a2b68(1151);register$2(layerType$f,GaodeLayer),registerImageryProvider(layerType$f,createImageryProvider$e);class GeeLayer extends BaseTileLayer{async _createImageryProvider(e){return await createImageryProvider$d(e)}}async function createImageryProvider$d(n){const e={_0x4c9c7e:1295},t=_0x3a2b68;n=converOptions(n);const i=await Cesium__namespace[t(e._0x4c9c7e)].fromUrl(n.url);return new Cesium__namespace.GoogleEarthEnterpriseImageryProvider.fromMetadata(i,n)}GeeLayer[_0x3a2b68(1760)]=createImageryProvider$d;const layerType$e="gee";register$2(layerType$e,GeeLayer),registerImageryProvider(layerType$e,createImageryProvider$d);class GoogleLayer extends BaseTileLayer{async _createImageryProvider(e){return await createImageryProvider$c(e)}}async function createImageryProvider$c(n){return n.chinaCRS=n.chinaCRS||ChinaCRS.GCJ02,n=converOptions(n),new GoogleImageryProvider(n)}GoogleLayer.createImageryProvider=createImageryProvider$c;const layerType$d=_0x3a2b68(3835);register$2(layerType$d,GoogleLayer),registerImageryProvider(layerType$d,createImageryProvider$c);class ImageLayer extends BaseTileLayer{get url(){return this.options.url}set url(e){const t=_0x3a2b68;this.options[t(4023)]=e,this.reload()}async[_0x3a2b68(730)](e){return await createImageryProvider$b(e)}}async function createImageryProvider$b(n){const e={_0x1482db:4023,_0x5d6e04:1531,_0x57cef1:1531},t=_0x3a2b68;if(!n[t(e._0x1482db)])return null;n=converOptions(n);const i=new Cesium__namespace.SingleTileImageryProvider(n);if(n[t(3663)]===CRS.EPSG3857){let s,r;if(n[t(e._0x5d6e04)]){const o=LngLatPoint[t(2860)](new Cesium__namespace[t(2228)](n.rectangle.west,n[t(e._0x57cef1)].south)).toMercator(),c=LngLatPoint.fromCartographic(new Cesium__namespace.Cartographic(n.rectangle.east,n.rectangle.north))[t(1520)]();s=new Cesium__namespace.Cartesian2(o[0],o[1]),r=new Cesium__namespace.Cartesian2(c[0],c[1])}i[t(3758)]=new Cesium__namespace.WebMercatorTilingScheme({numberOfLevelZeroTilesX:n.numberOfLevelZeroTilesX||1,numberOfLevelZeroTilesY:n[t(1914)]||1,rectangleSouthwestInMeters:s,rectangleNortheastInMeters:r})}return i}ImageLayer.createImageryProvider=createImageryProvider$b;const layerType$c=_0x3a2b68(1793);register$2(layerType$c,ImageLayer),registerImageryProvider(layerType$c,createImageryProvider$b);class IonLayer extends BaseTileLayer{async _createImageryProvider(e){return await createImageryProvider$a(e)}}async function createImageryProvider$a(n){const e=_0x3a2b68;return n[e(1111)]=n.accessToken??ion,n=converOptions(n),await Cesium__namespace.IonImageryProvider.fromAssetId(n.assetId,n)}IonLayer[_0x3a2b68(1760)]=createImageryProvider$a;const layerType$b="ion";register$2(layerType$b,IonLayer),registerImageryProvider(layerType$b,createImageryProvider$a);class MapboxLayer extends BaseTileLayer{async _createImageryProvider(e){return await createImageryProvider$9(e)}}async function createImageryProvider$9(n){const e={_0x2c1c05:3758,_0x1c48e3:1004},t=_0x3a2b68;n.url=n.url??"https://api.mapbox.com/styles/v1",n.username=n[t(624)]??t(3862),n.accessToken=n.token??n[t(1111)]??mapbox,n[t(2605)]=n.scaleFactor??!![],n=converOptions(n);const i=new Cesium__namespace.MapboxStyleImageryProvider(n);return Promise.resolve(n).then(function(s){const r=t;n.tilingScheme&&(i._imageryProvider[r(e._0x2c1c05)]=n[r(e._0x1c48e3)])}),i}MapboxLayer.createImageryProvider=createImageryProvider$9;const layerType$a="mapbox";register$2(layerType$a,MapboxLayer),registerImageryProvider(layerType$a,createImageryProvider$9);class OsmLayer extends BaseTileLayer{async[_0x3a2b68(730)](e){return await createImageryProvider$8(e)}}async function createImageryProvider$8(n){return n=converOptions(n),new OsmImageryProvider(n)}OsmLayer.createImageryProvider=createImageryProvider$8;const layerType$9="osm";register$2(layerType$9,OsmLayer),registerImageryProvider(layerType$9,createImageryProvider$8);class XyzImageryProvider extends Cesium__namespace[_0x3a2b68(707)]{constructor(e={}){const t={_0xe76b0f:789};e.customTags=e.customTags||{},e.customTags.host=function(i,s,r,o){return location[_0x20dc(4351)]},e.customTags.hostname=function(i,s,r,o){return location[_0x20dc(t._0xe76b0f)]},e.customTags.z4490=function(i,s,r,o){return o+1},super(e),this.options=e}}class TdtLayer extends BaseTileLayer{async[_0x3a2b68(730)](e){return await createImageryProvider$7(e)}}async function createImageryProvider$7(n){const e=_0x3a2b68;return n=converOptions(n),n[e(4023)]?(n.subdomains=n.subdomains||"01234567",n.url+="&tk="+(n.key||tianditu),new XyzImageryProvider(n)):new TdtImageryProvider(n)}TdtLayer.createImageryProvider=createImageryProvider$7;const layerType$8="tdt";register$2(layerType$8,TdtLayer),registerImageryProvider(layerType$8,createImageryProvider$7);class TencentLayer extends BaseTileLayer{async _createImageryProvider(e){return await createImageryProvider$6(e)}}async function createImageryProvider$6(n){return n.chinaCRS=n.chinaCRS||ChinaCRS.GCJ02,n=converOptions(n),new TencentImageryProvider(n)}TencentLayer[_0x3a2b68(1760)]=createImageryProvider$6;const layerType$7="tencent";register$2(layerType$7,TencentLayer),registerImageryProvider(layerType$7,createImageryProvider$6);class TmsLayer extends BaseTileLayer{async _createImageryProvider(e){return await createImageryProvider$5(e)}}async function createImageryProvider$5(n){const e={_0x9b486f:4023},t=_0x3a2b68;return n=converOptions(n),!n.url&&(n[t(e._0x9b486f)]=Cesium__namespace[t(3608)]("Assets/Textures/NaturalEarthII")),await Cesium__namespace.TileMapServiceImageryProvider.fromUrl(n.url,n)}TmsLayer[_0x3a2b68(1760)]=createImageryProvider$5;const layerType$6=_0x3a2b68(3682);register$2(layerType$6,TmsLayer),registerImageryProvider(layerType$6,createImageryProvider$5);class WmsLayer extends BaseTileLayer{[_0x3a2b68(2679)](){const e={_0x290283:3749},t=_0x3a2b68;this.options.getCapabilities??!![]?this[t(e._0x290283)]().then(()=>{super._addedHook()}):super._addedHook()}async[_0x3a2b68(730)](e){return await createImageryProvider$4(e)}getMetadata(){const e={_0x672498:2171,_0x2881e4:706};return new Promise((t,i)=>{const s={_0x59e083:3087},r=_0x20dc;var o;if(this.capabilities){t(this.capabilities);return}const c={service:"WMS",request:r(e._0x672498),version:((o=this.options.parameters)===null||o===void 0?void 0:o.version)??"1.3.0"};let _=this.options.url;this.options.templateValues&&(_=template(_,this.options.templateValues)),Cesium__namespace.Resource[r(e._0x2881e4)]({...this.options,url:_,queryParameters:c,proxy:this._proxy}).then(l=>{if(!this.isDestroy){if(l){this.capabilities=l;try{this._initByMetaData(l)}catch(d){logInfo("WMS 解析GetCapabilities有误",d)}}t(l),this.fire(EventType.loadConfig,{capabilities:l})}})[r(3596)](l=>{logInfo(r(s._0x59e083),l),t(l)})})}_initByMetaData(e){const t={_0x3015f1:2864,_0x21a065:2051,_0x57feed:2807,_0x93856b:1332,_0x349de3:2029,_0xd65e42:1531,_0x1f14aa:3306},i=_0x3a2b68;let s=this.options[i(t._0x3015f1)];s[i(t._0x21a065)](":")!==-1&&(s=s[i(821)](":")[1]);const r=this[i(2029)](e,"Layer");if(!r)return;const o=this[i(438)](r,"Layer");if(o)for(let c=0,_=o[i(400)];c<_;c++){const l=o[c],d=this._readChildNodeVal(l,i(t._0x57feed)),f=this._readChildNodeVal(l,i(t._0x93856b));if(d===s||f===s){const g=this._readChildNodeVal(l,i(1705));!this.options.crs&&g&&(this.options.crs=g);const b=this[i(t._0x349de3)](l,i(1990));if(!this.options[i(t._0xd65e42)]&&b){const C=Math.max(Number(b.getAttribute("minx")),-180),P=Math.min(Number(b.getAttribute(i(4378))),180),S=Math.max(Number(b.getAttribute("miny")),-85),L=Math.min(Number(b[i(t._0x1f14aa)]("maxy")),85);if(isNaN(C)||isNaN(P)||isNaN(S)||isNaN(L))break;const E={xmin:C,ymin:S,xmax:P,ymax:L};console[i(1798)]("wms extent:",E),this.options.extent=E,this._rectangle=Cesium__namespace[i(1983)].fromDegrees(E.xmin,E.ymin,E[i(4353)],E.ymax)}break}}}_readNode(e,t){const i=_0x3a2b68;if(!e)return null;let s=e[i(2030)](t);return(!s||s.length===0)&&(s=e.getElementsByTagName("wms:"+t)),s}[_0x3a2b68(2029)](e,t){const i=_0x3a2b68;if(!e)return null;const s=this._readNode(e,t);return s[i(400)]>0?s[0]:null}_readChildNodeVal(e,t){const i={_0x3a14fb:2029},s=_0x3a2b68;var r,o;if(!e)return null;let c=this._readChildNode(e,t);return!c&&(c=this[s(i._0x3a14fb)](e,"wms:"+t)),(r=c)!==null&&r!==void 0&&r.innerHTML?c.innerHTML:(o=c)!==null&&o!==void 0&&o.getInnerHTML?c[s(2385)]():null}hasPopup(){return this._popupConfig?!![]:![]}bindPopup(e,t){const i={_0x4ae75d:2876},s=_0x3a2b68;return this[s(i._0x4ae75d)]={content:e,options:t,layer:this},this._bindControl(),this}unbindPopup(){const e={_0x1b5c9f:2876},t=_0x3a2b68;return this.closePopup(),this[t(e._0x1b5c9f)]=null,this}closePopup(){const e=_0x3a2b68;return this._map&&this.hasPopup()&&this[e(1575)].popup.close(null,this),this}}async function createImageryProvider$4(n){const e={_0x5de2b4:1674},t=_0x3a2b68;return n=converOptions(n),new Cesium__namespace[t(e._0x5de2b4)](n)}WmsLayer[_0x3a2b68(1760)]=createImageryProvider$4;const layerType$5=_0x3a2b68(3370);register$2(layerType$5,WmsLayer),registerImageryProvider(layerType$5,createImageryProvider$4);class WmtsLayer extends BaseTileLayer{_addedHook(){const e={_0x39841f:3200,_0x226680:4389},t=_0x3a2b68;this.options[t(e._0x39841f)]??!![]?this.getMetadata()[t(e._0x226680)](()=>{super._addedHook()}):super._addedHook()}async _createImageryProvider(e){const t=_0x3a2b68,i=await createImageryProvider$3(e);return e.pickFeatures?i.pickFeatures=e[t(3226)]:e.pickFeaturesUrl&&(i.pickFeatures=(s,r,o,c,_)=>this.pickFeatures(s,r,o,c,_)),i}pickFeatures(e,t,i,s,r){const o={_0x1333f7:2560,_0x680f93:1409,_0x468092:669,_0x57ea9d:1941,_0x3c5b80:1941,_0x3af617:1878},c={_0x5a45f4:400,_0x57340b:407,_0x2f43a7:918},_=_0x3a2b68;var l;if(!this.options.enablePickFeatures)return;const d=this[_(o._0x1333f7)],f=new Cesium__namespace.Cartesian3;if(d.tilingScheme.projection instanceof Cesium__namespace.GeographicProjection)f.x=Cesium__namespace.Math.toDegrees(s),f.y=Cesium__namespace.Math.toDegrees(r);else{const P=new Cesium__namespace[_(2228)];P.longitude=s,P.latitude=r,d.tilingScheme[_(o._0x680f93)].project(P,f)}const g=new Cesium__namespace.Cartesian2,b=d.tilingScheme.tileXYToNativeRectangle(e,t,i,new Cesium__namespace.Rectangle);g.x=d.tileWidth*(f.x-b.west)/b.width|0,g.y=d[_(o._0x468092)]*(b.north-f.y)/b.height|0;const C={...this[_(o._0x57ea9d)].getFeatureInfoParameters||{},service:"WMS",version:"1.1.1",request:"GetFeatureInfo",layers:this[_(1941)][_(607)],query_layers:this[_(o._0x3c5b80)].layer,info_format:_(1453),srs:this.options[_(3663)]??(((l=this[_(o._0x3c5b80)].tilingScheme)===null||l===void 0?void 0:l.projection)instanceof Cesium__namespace.WebMercatorProjection?"EPSG:3857":"EPSG:4326"),bbox:b[_(o._0x3af617)]+","+b.south+","+b.east+","+b[_(802)],width:d.tileWidth,height:d.tileHeight,x:g.x,y:g.y};return fetchJson({...this.options,url:this[_(1941)].pickFeaturesUrl,queryParameters:C,proxy:this._proxy}).then(P=>{const S=_,L=[],E=P.features;for(let M=0;M<E[S(c._0x5a45f4)];++M){const D=E[M],R=new Cesium__namespace.ImageryLayerFeatureInfo;if(R[S(1924)]=D,R.properties=D.properties,R.configureNameFromProperties(D.properties),R[S(4229)](D.properties),Cesium__namespace[S(c._0x57340b)](D.geometry)&&D.geometry.type===S(1910)){const k=D.geometry.coordinates[0],N=D.geometry[S(c._0x2f43a7)][1];R[S(4076)]=Cesium__namespace.Cartographic.fromDegrees(k,N)}L.push(R)}return L})}getMetadata(){const e={_0x137642:2023};return new Promise((t,i)=>{const s=_0x20dc;if(this[s(4103)]){t(this.capabilities);return}const r={service:"WMTS",request:"GetCapabilities",version:"1.0.0"};Cesium__namespace.Resource.fetchXML({...this[s(1941)],queryParameters:r,proxy:this[s(e._0x137642)]}).then(o=>{const c=s;if(!this.isDestroy){if(o){this.capabilities=o;try{this._initByMetaData(o)}catch(_){logInfo(c(794),_)}}t(o),this.fire(EventType.loadConfig,{capabilities:o})}}).catch(o=>{logInfo("WMTS GetCapabilities请求出错",o),t(o)})})}_initByMetaData(e){const t={_0x32fbb2:1389,_0x59cf2c:2029,_0x25c83e:448,_0x4d920a:3182,_0x5386d2:821,_0x1334ad:528,_0x457372:4353,_0x4b8fca:1941,_0x294672:2030},i=_0x3a2b68,s=this._readChildNode(e,"Contents");if(!s)return;const r=this._readNode(s,i(t._0x32fbb2));if(r)for(let o=0,c=r.length;o<c;o++){const _=r[o];if(this[i(2399)](_,i(3471))===this.options.layer){const d=this[i(t._0x59cf2c)](_,i(t._0x25c83e));if(!this.options[i(1531)]&&d){let g=this._readChildNodeVal(d,i(3154)),b=this._readChildNodeVal(d,i(t._0x4d920a));if(g&&b){g=g.split(" "),b=b[i(t._0x5386d2)](" ");const C=Math.max(Number(g[0]),-180),P=Math.min(Number(b[0]),180),S=Math.max(Number(g[1]),-85),L=Math.min(Number(b[1]),85),E={xmin:C,ymin:S,xmax:P,ymax:L};this.options.extent=E,this[i(3417)]=Cesium__namespace.Rectangle.fromDegrees(E[i(t._0x1334ad)],E.ymin,E[i(t._0x457372)],E.ymax)}}!Cesium__namespace.defined(this.options.style)&&(this[i(t._0x4b8fca)].style=this._readChildNodeVal(this[i(2029)](_,"Style"),"ows:Identifier"));const f=_[i(t._0x294672)]("TileMatrixSetLink");for(let g=0,b=f.length;g<b;g++){const C=f[g],P=this._readChildNodeVal(C,"TileMatrixSet");if(!Cesium__namespace[i(407)](this.options.tileMatrixSetID)&&(this.options.tileMatrixSetID=P),P===this.options.tileMatrixSetID){if(!this.options[i(1978)]){const S=this[i(t._0x59cf2c)](C,"TileMatrixSetLimits");if(S){const L=S[i(2030)]("TileMatrixLimits"),E=[];for(let M=0,D=L.length;M<D;M++){const R=this._readChildNodeVal(L[M],"TileMatrix");E.push(R)}this.options.tileMatrixLabels=E}}break}}break}}}_readNode(e,t){const i={_0x2e1b26:400},s=_0x3a2b68;if(!e)return null;let r=e.getElementsByTagName(t);return(!r||r[s(i._0x2e1b26)]===0)&&(r=e.getElementsByTagName(s(3147)+t)),r}_readChildNode(e,t){if(!e)return null;const i=this._readNode(e,t);return i.length>0?i[0]:null}_readChildNodeVal(e,t){const i=_0x3a2b68;var s,r;if(!e)return null;let o=this._readChildNode(e,t);return!o&&(o=this[i(2029)](e,"wmts:"+t)),(s=o)!==null&&s!==void 0&&s.innerHTML?o.innerHTML:(r=o)!==null&&r!==void 0&&r.getInnerHTML?o[i(2385)]():null}}async function createImageryProvider$3(n){const e={_0x2559ca:1978},t=_0x3a2b68;return n=converOptions(n),n.crs===CRS[t(3034)]&&(n[t(e._0x2559ca)]=[...Array(20).keys()][t(3244)](i=>(i+1).toString())),new Cesium__namespace.WebMapTileServiceImageryProvider(n)}WmtsLayer[_0x3a2b68(1760)]=createImageryProvider$3;const layerType$4="wmts";register$2(layerType$4,WmtsLayer),registerImageryProvider(layerType$4,createImageryProvider$3);class XyzLayer extends BaseTileLayer{async _createImageryProvider(e){return await createImageryProvider$2(e)}}async function createImageryProvider$2(n){return n=converOptions(n),n.chinaCRS===ChinaCRS.BAIDU?new BaiduImageryProvider(n):new XyzImageryProvider$1(n)}XyzLayer[_0x3a2b68(1760)]=createImageryProvider$2;const layerType$3="xyz";register$2(layerType$3,XyzLayer),registerImageryProvider(layerType$3,createImageryProvider$2);class GridLayer extends BaseTileLayer{async _createImageryProvider(e){return await createImageryProvider$1(e)}}async function createImageryProvider$1(n){const e={_0x2f3a57:2849,_0xcee631:2092,_0x4bdcdf:536,_0x5e3b14:792},t=_0x3a2b68;return n[t(1561)]=n.cells??2,n[t(2540)]=Cesium__namespace.Color[t(e._0x2f3a57)](n.color??"rgba(255,255,255,1)"),n[t(477)]=n.glowWidth??3,n[t(3814)]?n.glowColor=Cesium__namespace[t(e._0xcee631)][t(e._0x2f3a57)](n.glowColor):n[t(3814)]=n.color.withAlpha(.3),n.backgroundColor=Cesium__namespace.Color[t(e._0x2f3a57)](n[t(e._0x4bdcdf)]??"rgba(0,0,0,0)"),n=converOptions(n),new Cesium__namespace[t(e._0x5e3b14)](n)}GridLayer.createImageryProvider=createImageryProvider$1;const layerType$2="grid";register$2(layerType$2,GridLayer),registerImageryProvider(layerType$2,createImageryProvider$1);class TileInfoLayer extends BaseTileLayer{async _createImageryProvider(e){return await createImageryProvider(e)}}async function createImageryProvider(n){const e={_0x2c409c:1465},t=_0x3a2b68;return n.color=Cesium__namespace.Color.fromCssColorString(n.color||"rgba(255,0,0,1)"),n=converOptions(n),new Cesium__namespace[t(e._0x2c409c)](n)}TileInfoLayer.createImageryProvider=createImageryProvider;const layerType$1="tileinfo";register$2(layerType$1,TileInfoLayer),registerImageryProvider(layerType$1,createImageryProvider);class EmptyTileLayer extends BaseTileLayer{constructor(e={}){super(e),this._minimumLevel=e.minimumLevel??0,this._maximumLevel=e.maximumLevel}async[_0x3a2b68(730)](e){return e=converOptions(e),e.minimumTerrainLevel=this._minimumLevel,e.maximumTerrainLevel=this._maximumLevel,new EmptyImageryProvider(e)}[_0x3a2b68(1651)](e,t){const i={_0x5a59e3:4366,_0x24f999:1651},s=_0x3a2b68;this._minimumLevel=this.options.minimumLevel??0,this._maximumLevel=this.options.maximumLevel,this.options[s(1043)]=this[s(i._0x5a59e3)],this[s(1941)].maximumTerrainLevel=this._maximumLevel,super[s(i._0x24f999)](e,t)}isInRange(e){const t=this._map.level;return e<this._minimumLevel||e<t-1||Cesium__namespace.defined(this._maximumLevel)&&e>=this._maximumLevel?![]:!![]}isAllOutRange(e){const t=_0x3a2b68;return this._map[t(1800)]<this._minimumLevel||Cesium__namespace.defined(this._maximumLevel)&&e>=this._maximumLevel}}const layerType="empty";register$2(layerType,EmptyTileLayer),new Cesium__namespace.Color(0,0,0,.01);function config2Entity(n,e,t){const i={_0x574cdf:400},s=_0x3a2b68;for(let r=n[s(i._0x574cdf)]-1;r>=0;r--){const o=n[r],c=e.symbol;c&&(typeof c=="function"?c(o,o._attr):setConfigSymbol(o,e,t))}return n}function getStyleBySymbolConfig(n,e,t){const i={_0x2cb9f3:629,_0x5d738e:1782,_0x5087f5:2767},s=_0x3a2b68;let r=n.styleOptions;if(n[s(i._0x2cb9f3)]&&e){const o=e[n.styleField],c=n.styleFieldOptions[o];c!=null&&(r=clone(r),r={...r,...c})}if(typeof n.callback===s(i._0x5d738e)){r=clone(r);const o=n[s(i._0x5087f5)](e,t,r);o&&(r={...r,...o})}return r=r||{},r}function setConfigSymbol(n,e,t){const i={_0x1bb3b8:1126,_0x311cbf:553,_0x274766:517,_0x6cc30d:1304,_0xbd3509:3674,_0x39f587:3203,_0x2b67c4:3203,_0x5bbb09:4241,_0x105f9b:4076,_0x12df82:4383,_0x477799:1582,_0x3e7f49:3559,_0x299982:1496,_0x20e251:2777,_0x420623:3203,_0x1402b8:3868,_0x25f07e:3472,_0x399d09:662,_0x1777a8:3542,_0x2193a1:808,_0x5b685a:3203,_0x55d64d:407,_0x3f3ae1:3868,_0x6eaa88:3674,_0x1dd865:2879,_0x413c8b:2147,_0x47095e:4076,_0xfcb99f:3868},s={_0x48b4ca:4241},r=_0x3a2b68,o=n._attr,c=n[r(2626)],_=getStyleBySymbolConfig(e[r(i._0x1bb3b8)],o,n);function l(f,g,b){const C=r;return g.text===""?null:(Cesium__namespace.defined(g[C(s._0x48b4ca)])&&(f=setPositionsHeight(f,g.height)),c.add({position:f,label:g,_attr:b}))}if(t=t||l,n[r(i._0x311cbf)]){if(PolylineStyleConver.toCesiumVal(_,n.polyline,!![]),_.corridor){const f={color:_.color,opacity:_.opacity,..._.corridor};if(isString(_.corridor.width)&&(f.width=template(_[r(1031)][r(i._0x274766)],o)),n._corridorEx)CorridorStyleConver.toCesiumVal(f,n._corridorEx.corridor,!![]);else{const g=CorridorStyleConver[r(i._0x6cc30d)](f,{},!![]);g.positions=getCesiumValue(n.polyline.positions);const b=c[r(i._0xbd3509)]({corridor:g,_attr:o});b._mars3d_layerId=e.id,n[r(3534)]=b}}if(_[r(3203)]&&_[r(i._0x39f587)].text)if(n._labelEx)LabelStyleConver.toCesiumVal(_.label,n._labelEx.label,o);else{const f=getCesiumValue(n.polyline.positions);let g=f[Math.floor(f.length/2)];_.label[r(4076)]&&(_.label.position==="center"?g=centerOfMass(f,_[r(i._0x2b67c4)][r(i._0x5bbb09)]):isNumber(_[r(i._0x2b67c4)][r(i._0x105f9b)])&&(g=f[_[r(3203)].position]));const b=LabelStyleConver.toCesiumVal(_.label,{},o);b.heightReference=b.heightReference??Cesium__namespace.HeightReference.CLAMP_TO_GROUND;const C=t(g,b,o);C&&(C._mars3d_layerId=e.id),n._labelEx=C}}if(n[r(4383)]){var d;if(PolygonStyleConver[r(1304)](_,n[r(i._0x12df82)],!![]),_[r(i._0x477799)]&&(_[r(601)]>1||((d=_.outlineStyle)===null||d===void 0?void 0:d[r(i._0x274766)])>1)){n.polygon.outline=![];const f={..._,outline:![],color:_[r(i._0x3e7f49)],width:_.outlineWidth,opacity:_.outlineOpacity,..._[r(1641)]};if(n._outlineEx)for(let g=0,b=n[r(1496)].length;g<b;g++)PolylineStyleConver.toCesiumVal(f,n[r(i._0x299982)][g].polyline,!![]);else{const g=getAllPositions(n);n[r(1496)]=[];for(let b=0,C=g.length;b<C;b++){const P=PolylineStyleConver.toCesiumVal(f,{},!![]);P.positions=g[b];const S=c[r(3674)]({polyline:P,_attr:o});S[r(662)]=e.id,n._outlineEx[r(1754)](S)}}}if(_.label&&_[r(i._0x2b67c4)].text)if(n[r(i._0x20e251)])LabelStyleConver.toCesiumVal(_.label,n._labelEx.label,o);else{const f=centerOfMass(getPositions(n),_[r(i._0x420623)][r(i._0x5bbb09)]),g=LabelStyleConver[r(i._0x6cc30d)](_.label,{},o);g[r(i._0x1402b8)]=g.heightReference??Cesium__namespace.HeightReference[r(i._0x25f07e)];const b=t(f,g,o);b&&(b[r(i._0x399d09)]=e.id),n._labelEx=b}}if(n.label?(_.label=_[r(i._0x2b67c4)]||_||{},!Cesium__namespace.defined(_.label[r(i._0x1777a8)])&&!Cesium__namespace.defined(_.label.heightReference)&&(_.label.heightReference=_.label.heightReference??Cesium__namespace[r(i._0x2193a1)].CLAMP_TO_GROUND),LabelStyleConver[r(1304)](_[r(i._0x5b685a)],n.label,o)):_.label&&typeof _.label=="function"&&_[r(3203)](n,o,function(f,g){const b=r,C=LabelStyleConver.toCesiumVal(g,{},o);C.heightReference=(C[b(3868)],Cesium__namespace.HeightReference.CLAMP_TO_GROUND);const P=t(f,C,o);P&&(P._mars3d_layerId=e.id)}),n.billboard){if(!Cesium__namespace[r(407)](_[r(i._0x1777a8)])&&!Cesium__namespace[r(i._0x55d64d)](_.heightReference)&&(_.heightReference=_[r(3868)]??Cesium__namespace.HeightReference[r(3472)]),_[r(1793)]=template(_.image,o),BillboardStyleConver[r(1304)](_,n.billboard,!![]),_.model)if(n._modelEx)ModelStyleConver.toCesiumVal(_.model,n._modelEx.model,!![]);else{const f=ModelStyleConver.toCesiumVal(_.model,!![]);f.heightReference=(f[r(i._0x3f3ae1)],Cesium__namespace[r(808)].CLAMP_TO_GROUND);const g=c[r(i._0x6eaa88)]({position:n[r(i._0x105f9b)],model:f,_attr:o});g._mars3d_layerId=e.id,n._modelEx=g}if(_[r(i._0x1dd865)])if(n[r(i._0x413c8b)])PointStyleConver.toCesiumVal(_.point,n[r(2147)].point,!![]);else{const f=PointStyleConver.toCesiumVal(_.point,{},!![]);f.heightReference=f.heightReference??Cesium__namespace[r(808)].CLAMP_TO_GROUND;const g=c.add({position:n[r(i._0x47095e)],point:f,_attr:o});g._mars3d_layerId=e.id,n._pointEx=g}if(_.label&&_[r(3203)][r(3640)]&&!n.label)if(n._labelEx)LabelStyleConver.toCesiumVal(_[r(3203)],n._labelEx[r(3203)],o);else{const f=n.position,g=LabelStyleConver[r(i._0x6cc30d)](_.label,{},o);g[r(i._0xfcb99f)]=g.heightReference??Cesium__namespace.HeightReference.CLAMP_TO_GROUND;const b=t(f,g,o);b&&(b._mars3d_layerId=e.id),n._labelEx=b}}n.styleOpt=_}class CzmGeoJsonLayer extends BaseGraphicLayer{constructor(e={}){const t=_0x3a2b68;super(e),this[t(1651)](e,e)}get layer(){return this._dataSource}get entities(){const e=_0x3a2b68;return this._dataSource?this._dataSource[e(2931)]:null}get[_0x3a2b68(3090)](){const e={_0xc7c6f1:3104},t=_0x3a2b68;return!this._labelCollection&&(this._labelCollection=new Cesium__namespace.LabelCollection({scene:this._map.scene}),this._state===State[t(e._0xc7c6f1)]&&this[t(1575)][t(744)].primitives.add(this[t(3976)])),this._labelCollection}get hasZIndex(){return!![]}get zIndex(){return this.options.zIndex}set zIndex(e){const t={_0x42c063:1575,_0x14700d:1426},i=_0x3a2b68;if(this.options.zIndex=e,this._dataSource==null||e==null||!this[i(t._0x42c063)].dataSources[i(1012)](this._dataSource))return;this._dataSource.zIndex=e,this[i(t._0x42c063)].dataSources.raiseToTop(this._dataSource);const s=this._map.dataSources;for(let r=s.length-1;r>=0;r--){const o=s.get(r);o!==this._dataSource&&Cesium__namespace.defined(o.zIndex)&&e<o.zIndex&&this._map.dataSources[i(526)](this[i(t._0x14700d)])}}get clampToGround(){const e=_0x3a2b68;return this.options.clampToGround?!![]:this.options[e(1126)]&&this.options.symbol.styleOptions&&this.options.symbol.styleOptions.clampToGround?!![]:![]}_setOptionsHook(e,t){const i={_0x5a534:3542,_0x545d73:2540,_0x362f5d:1941,_0x12cecb:407},s=_0x3a2b68;var r;if(super._setOptionsHook(e,t),(r=this.options.symbol)!==null&&r!==void 0&&r.styleOptions){const o=this.options.symbol.styleOptions;if(Cesium__namespace.defined(o.clampToGround)&&(this.options[s(i._0x5a534)]=o[s(3542)]),Cesium__namespace.defined(o[s(i._0x545d73)])){const c=Cesium__namespace.Color.fromCssColorString(o.color??"#FFFF00")[s(747)](Number(o.opacity??.5));this[s(i._0x362f5d)].fill=c}if(Cesium__namespace[s(i._0x12cecb)](o[s(3559)])){const c=Cesium__namespace.Color.fromCssColorString(o.outlineColor??o.color??"#FFFFFF").withAlpha(o.outlineOpacity??(o.opacity,1));this.options.stroke=c}Cesium__namespace.defined(o.outlineWidth)&&(this.options.strokeWidth=o.outlineWidth)}}_showHook(e){const t=_0x3a2b68;super[t(840)](e),this._labelCollection&&(this._labelCollection.show=e)}_mountedHook(){const e={_0x5b6545:585},t=_0x3a2b68;super[t(e._0x5b6545)](),this.load()}_addedHook(){const e={_0x86319e:3976},t=_0x3a2b68;super._addedHook(),this._dataSource&&this[t(1575)].dataSources[t(3674)](this._dataSource),this._labelCollection&&this[t(1575)].scene.primitives.add(this[t(e._0x86319e)])}_removedHook(){const e={_0x40cf15:2160},t=_0x3a2b68;super[t(3916)](),this._labelCollection&&(this._map.scene.primitives.remove(this._labelCollection),this._labelCollection=null),this._dataSource&&this._map[t(e._0x40cf15)].remove(this._dataSource)}flyTo(e){const t={_0x5af715:583},i=_0x3a2b68;return this._map?(this._map.cancelFlyTo(),this.options.center?this._map.setCameraView(this.options.center,e):this.options.extent?this[i(1575)].flyToExtent(this.options.extent,e):this._dataSource?this._map.viewer[i(2961)](this._dataSource,e):Promise[i(t._0x5af715)](![])):Promise[i(t._0x5af715)](![])}load(e){const t={_0x57c53a:1941,_0x16c9a6:2023,_0x2d3b71:1924},i={_0x3e5639:3564,_0x5e0e09:3398},s=_0x3a2b68;return e&&((e[s(2126)]??!![])&&(delete this.options.url,delete this[s(t._0x57c53a)].data),this.clear(),this[s(1941)]={...this.options,...e}),this.options.url?fetchJson({...this.options,proxy:this[s(t._0x16c9a6)]}).then(r=>{const o=s;!this._map||!this[o(4326)]||this._load_data(r)})[s(3596)](r=>{const o=s;var c;logError$1(o(i._0x3e5639),r),(c=this._readyPromise)!==null&&c!==void 0&&c.reject&&this._readyPromise[o(i._0x5e0e09)](r)}):this.options[s(t._0x2d3b71)]?this._load_data(this[s(1941)].data):e&&logWarn("CzmGeoJsonLayer：没有传入 url 或 data 参数,请确认是否有误。"),this}_load_data(e){const t={_0x6ec221:4389},i=_0x3a2b68;this[i(1941)][i(1775)]&&(e=this.options.format(e)),Cesium__namespace.GeoJsonDataSource[i(432)](e,this.options)[i(t._0x6ec221)](r=>{this.showResult(r)})}showResult(e){const t={_0x4eff37:1575,_0x1a2fbf:442,_0x20d0b3:1266,_0x4a722c:1951,_0x5b3e7c:1744},i=_0x3a2b68;if(this._dataSource&&(this[i(t._0x4eff37)].dataSources.remove(this[i(1426)]),delete this._dataSource),!e||this._state===State.REMOVED)return;e.show=this[i(t._0x1a2fbf)],this._map.dataSources[i(3674)](e),this[i(1900)].resolve(this),this._dataSource=e,this.options.zIndex&&(this.zIndex=this.options[i(t._0x20d0b3)]);const s=e.entities.values,r=this[i(t._0x4a722c)](s);this.opacity!==1&&this[i(t._0x5b3e7c)](this.opacity),this.options[i(2961)]&&this[i(2330)](),this.fire(EventType.load,{dataSource:e,entities:s,list:r})}bindEntities(e){const t={_0x50a46a:1109,_0x281b6f:1754},i=_0x3a2b68,s=[];for(let r=0,o=e.length;r<o;r++){const c=e[r];c[i(662)]=this.id;const _=this.getEntityAttr(c);c[i(2581)]=_||{},this[i(t._0x50a46a)](EventType[i(2847)],{czmObject:c,attr:_}),s[i(t._0x281b6f)]({..._,_entity:c})}return this.options.id=this.id,config2Entity(e,this.options,(r,o,c)=>this[i(3324)](r,o,c)),s}updateStyle(e){const t={_0x367e5b:1426},i=_0x3a2b68;if(!this._dataSource)return;e&&(this.options.symbol={...this.options.symbol,...e});const s=this[i(t._0x367e5b)][i(2931)][i(3826)];return this.options.id=this.id,config2Entity(s,this.options,(r,o,c)=>this.lblAddFun(r,o,c)),this}[_0x3a2b68(3324)](e,t,i){const s={_0x84b6fc:4241,_0x9836ca:3090,_0x16d689:3090},r=_0x3a2b68;if(t.text==="")return null;Cesium__namespace[r(407)](t.height)&&(e=setPositionsHeight(e,t[r(s._0x84b6fc)])),!this.labelCollection&&(this[r(s._0x9836ca)]=new Cesium__namespace.LabelCollection({scene:this.viewer.scene}),this[r(3586)].scene.primitives.add(this[r(s._0x16d689)])),t.position=getPositionValue(e);const o=this.labelCollection.add(t);return o.properties=i,o._mars3d_layerId=this.id,o}[_0x3a2b68(1744)](e){const t={_0x4f80a4:1426,_0x8f5cf1:4383,_0x529a47:4383,_0x5e849c:3793,_0x33977f:4383,_0x684389:2009,_0x56d72f:747,_0x3ac174:4170,_0x37ec71:2760,_0x4ff976:3559},i=_0x3a2b68;if(this[i(1941)][i(3248)]=e,!this[i(t._0x4f80a4)])return;const s=this._dataSource.entities[i(3826)];for(let r=0,o=s[i(400)];r<o;r++){const c=s[r];if(c[i(t._0x8f5cf1)]&&c.polygon.material&&c[i(t._0x529a47)][i(3793)].color&&(this._updatEntityAlpha(c[i(t._0x8f5cf1)][i(t._0x5e849c)][i(2540)],e),c[i(t._0x33977f)].outlineColor&&this[i(2760)](c.polygon.outlineColor,e)),c[i(553)]&&c.polyline.material&&c.polyline.material.color&&this._updatEntityAlpha(c.polyline.material.color,e),c.billboard&&(c[i(t._0x684389)].color=Cesium__namespace.Color.WHITE.withAlpha(e)),c.model&&(c.model.color=Cesium__namespace.Color.WHITE[i(t._0x56d72f)](e)),c.label){let _=e;c.styleOpt&&c.styleOpt.label&&c[i(t._0x3ac174)].label.opacity&&(_=c.styleOpt.label.opacity),c.label.fillColor&&this[i(t._0x37ec71)](c.label[i(3258)],_),c.label[i(t._0x4ff976)]&&this._updatEntityAlpha(c.label[i(t._0x4ff976)],_),c.label[i(536)]&&this[i(t._0x37ec71)](c.label.backgroundColor,_)}}}[_0x3a2b68(2760)](e,t){const i={_0x365e90:2149},s=_0x3a2b68;if(!e)return;let r=getCesiumValue(e,Cesium__namespace.Color,this._map.clock.currentTime);if(!r||!r.withAlpha)return e;r=r[s(747)](t),e[s(i._0x365e90)](r)}[_0x3a2b68(2017)](e){return getAttrVal(e.properties)}clear(){const e=_0x3a2b68;return this._labelCollection&&this._labelCollection.removeAll(),this._dataSource&&this._dataSource.entities.removeAll(),this[e(4371)](),this}process(e,t){return this.readyPromise.then(i=>this._dataSource.process(e,t).then(r=>{const o=_0x20dc,c=r.entities.values,_=this[o(1951)](c);return{entities:c,list:_}}))}}register$2("czmGeojson",CzmGeoJsonLayer);class KmlLayer extends CzmGeoJsonLayer{load(e={}){const t={_0x3266b4:1941,_0x226891:522,_0x4cb093:1941,_0x23bbee:1924,_0x62dbec:679},i=_0x3a2b68;this.options={...this.options,...e};let s;if(this[i(t._0x3266b4)][i(4023)]){const r=getUrlResource(this.options);s=Cesium__namespace[i(t._0x226891)].load(r,{camera:this._map.scene.camera,canvas:this._map.scene.canvas,clampToGround:this.options[i(3542)]})}else this[i(t._0x4cb093)][i(t._0x23bbee)]&&(s=Cesium__namespace[i(522)].load(this.options[i(t._0x23bbee)],{camera:this._map.scene.camera,canvas:this._map.scene[i(t._0x62dbec)],clampToGround:this.options.clampToGround}),logError$1("KmlLayer：请必须传入 url 或 data 参数"));s.then(r=>{this.showResult(r)})}[_0x3a2b68(2017)](e){const t={_0x111f07:3307,_0xc9dff:2251},i=_0x3a2b68;let s={name:e[i(t._0x111f07)],description:e.description};const r=e._kml.extendedData;for(const o in r)s[o]=r[o][i(t._0xc9dff)];return s=getAttrVal(s),s.description&&(s.description=s.description.replace(/<div[^>]+>/g,"")),s}}register$2("kml",KmlLayer);class CzmlLayer extends CzmGeoJsonLayer{[_0x3a2b68(840)](e){const t=_0x3a2b68;super[t(840)](e),(this.options.updateClock??!![])&&(e?this.setCzmlTime():this[t(3902)]())}setCzmlTime(){const e={_0x54d26f:1806,_0x5536cb:1575,_0x19ae02:2257,_0xd3c9d1:1431,_0x4e31e6:1575},t=_0x3a2b68;var i;(i=this._dataSource)!==null&&i!==void 0&&i.clock&&(this._map.clock[t(1806)]=this._dataSource.clock[t(e._0x54d26f)],this[t(e._0x5536cb)][t(2257)][t(4199)]=this._dataSource.clock.multiplier,this[t(1575)].clock.startTime=this._dataSource[t(e._0x19ae02)][t(e._0xd3c9d1)],this._map.clock[t(1439)]=this._dataSource[t(e._0x19ae02)][t(1439)],this[t(e._0x4e31e6)].clock.currentTime=this[t(1426)][t(2257)].startTime)}setNowTime(){const e={_0x233f29:1575,_0x2d9224:1806,_0x5eaea7:2394,_0x1e4d97:2257,_0x31835d:2957,_0x5e4407:557,_0x14f593:545,_0x30e841:2957},t=_0x3a2b68;this[t(e._0x233f29)][t(2257)][t(e._0x2d9224)]=Cesium__namespace[t(e._0x5eaea7)].UNBOUNDED,this[t(1575)].clock.multiplier=1;const i=Cesium__namespace.JulianDate.fromDate(new Date);this._map[t(e._0x1e4d97)].startTime=i[t(e._0x31835d)](),this._map.clock.stopTime=Cesium__namespace[t(e._0x5e4407)][t(4160)](i,1,new Cesium__namespace.JulianDate),this[t(1575)].clock[t(e._0x14f593)]=i[t(e._0x30e841)]()}[_0x3a2b68(3916)](){super._removedHook(),(this.options.updateClock??!![])&&this.setNowTime()}[_0x3a2b68(432)](e={}){const t={_0x361067:1941,_0x2d75c9:1924},i={_0x1dd38d:3839},s=_0x3a2b68;this.options={...this[s(1941)],...e};let r;if(this.options[s(4023)]){const o=getUrlResource(this.options);r=Cesium__namespace.CzmlDataSource.load(o,this[s(t._0x361067)])}else this.options.data?r=Cesium__namespace.CzmlDataSource.load(this.options[s(t._0x2d75c9)],this.options):logError$1(s(2535));r.then(o=>{this[s(i._0x1dd38d)](o)})}getEntityAttr(e){const t={_0x45aa9d:783},i=_0x3a2b68;if(e.properties)return getAttrVal(e.properties);if(e.description)return{description:getCesiumValue(e[i(t._0x45aa9d)])}}}register$2("czml",CzmlLayer);class GraphicGroupLayer extends GroupLayer{get hasEdit(){return this._hasEdit}set hasEdit(e){const t=_0x3a2b68;this._hasEdit=e,this._selectedLayer&&(e?this._selectedLayer.activateEdit():this[t(2308)].disableEdit())}get isAutoEditing(){return this[_0x3a2b68(1941)].isAutoEditing}set isAutoEditing(e){const t=_0x3a2b68;this.options.isAutoEditing=e,this[t(1065)](i=>{i.isAutoEditing=e},this)}get selectedLayer(){return this._selectedLayer}set selectedLayer(e){const t={_0x25db0a:2308,_0x4d6ae3:2308},i=_0x3a2b68;this._selectedLayer&&(delete this._selectedLayer.isActivate,this._selectedLayer.disableEdit()),!(e instanceof GraphicLayer)&&(e=this[i(3894)](e)),this._selectedLayer=e,this[i(t._0x25db0a)]&&(this[i(t._0x4d6ae3)].isActivate=!![],this._hasEdit&&this._selectedLayer.activateEdit())}isActivate(e){return e.isActivate}_mountedHook(){const e=_0x3a2b68;super._mountedHook(),this.options.geojson&&this.loadGeoJSON(this[e(1941)].geojson)}[_0x3a2b68(2679)](){super._addedHook(),this._processForRemoveLayer()}[_0x3a2b68(587)](e){const t=_0x3a2b68;if(!e)return this[t(1142)];if(isObject(e)){const i=this.getLayer(e.name);if(i)return Cesium__namespace[t(407)](e.id)&&(i.id=e.id),Cesium__namespace.defined(e[t(442)])&&(i[t(442)]=e.show),i}else{const i=this.getLayer(e);if(i)return i}return this.createLayer(e)}createLayer(e){const t={_0xb21193:442,_0x3dcd09:442},i=_0x3a2b68,s=clone(this.options,["id","pid","geojson","data"]);s.pid=this.id,isObject(e)?(s.name=e.name,Cesium__namespace[i(407)](e.id)&&(s.id=e.id),Cesium__namespace.defined(e[i(t._0xb21193)])&&(s.show=e[i(t._0x3dcd09)])):s.name=e;const r=new GraphicLayer(s);return this._events&&(r._events={...this._events}),this._map[i(4243)](r),this.addLayer(r),r}deleteLayer(e){const t=_0x3a2b68;let i;return e instanceof GraphicLayer?i=e:i=this.getLayer(e),i?(this.selectedLayer===i&&(this[t(1142)]=null),removeArrayItem(this[t(1086)],i),this._map.removeLayer(i,!![]),this._processForRemoveLayer(),!![]):![]}deleteEmptyLayer(){const e={_0x293075:1086},t=_0x3a2b68;for(let i=this._arrLayer.length-1;i>=0;i--){const s=this[t(e._0x293075)][i];s.length===0&&(this.selectedLayer===s&&(this.selectedLayer=null),this[t(1086)][t(4256)](i,1),this._map.removeLayer(s,!![]))}return this[t(1676)](),this}_processForRemoveLayer(){const e={_0xa56df1:1086},t=_0x3a2b68;this._arrLayer.length===0&&this.options.defaultLayer&&(this[t(1142)]=this[t(1433)](this.options.defaultLayer)),this.selectedLayer==null&&this._arrLayer.length>0&&(this.selectedLayer=this[t(e._0xa56df1)][0])}[_0x3a2b68(1495)](e,t){!(t instanceof GraphicLayer)&&(t=this.getLayer(t)),e.remove(),t.addGraphic(e)}getGraphics(){const e=[];return this.eachGraphic(t=>{t.isPrivate||e.push(t)},this),e}getGraphicById(e){const t={_0x3d8b49:400},i=_0x3a2b68;if(e)for(let s=this[i(1086)][i(t._0x3d8b49)]-1;s>=0;s--){const r=this._arrLayer[s],o=r[i(2974)](e);if(o)return o}}eachGraphic(e,t){return this.eachLayer(i=>{i.eachGraphic(e,t)},this),this}clear(e){this[_0x3a2b68({_0x134e05:1065}._0x134e05)](s=>{s.clear(e)},this)}toGeoJSON(e){const t={_0x6ea43c:3307};e!=null&&e.stopEdit&&this.stopDraw();const i=[],s=[];return this.eachLayer(r=>{const o=_0x20dc;s.push({id:r.id,name:r[o(t._0x6ea43c)],show:r[o(442)]}),r.eachGraphic(c=>{const _=o;if(c.isPrivate)return;const l=c.toGeoJSON(e);l.properties[_(4053)]=r[_(3307)],i.push(l)},this)},this),{type:"FeatureCollection",layer:{id:this.id,name:this.name,layers:s,selected:this.selectedLayer.id},features:i}}[_0x3a2b68(2797)](e,t={}){const i={_0x39d0c7:400,_0x58c8a0:607,_0x934308:2356,_0x17f32c:1142},s=_0x3a2b68;try{isString(e)&&(e=JSON[s(738)](e))}catch(P){alert(P.name+": "+P.message+` 
请确认json文件格式正确!!!`);return}t.clear&&this[s(2126)](!![]);let r;if(t.layer)r=this.getLayer(t.layer);else{var o,c;const P={},S=(o=e)===null||o===void 0||(c=o.layer)===null||c===void 0?void 0:c.layers;if(S){var _,l;for(let L=0;L<S[s(i._0x39d0c7)];L++){const E=this._getOrCreateLayer(S[L]);P[E.id]=E}if((_=e)!==null&&_!==void 0&&(l=_[s(i._0x58c8a0)])!==null&&l!==void 0&&l[s(i._0x934308)]){var d,f;const L=P[(d=e)===null||d===void 0||(f=d.layer)===null||f===void 0?void 0:f.selected];L&&(this[s(i._0x17f32c)]=L)}}}const g=getGeoJsonFeatures(e);let b=[];for(let P=0,S=g.length;P<S;P++){const L=g[P];let E;if(r)E=r;else{var C;const D=L==null||(C=L.properties)===null||C===void 0?void 0:C._layer;E=D?this[s(3894)](D):null,!E&&(E=this.selectedLayer)}const M=E[s(2797)](L,{...t,clear:![],flyTo:![]});b=b[s(4083)](M)}return t.flyTo&&this._map.flyToGraphic(b),b}_toJsonEx(e){const t={_0x1853e7:458},i=_0x3a2b68;e.geojson=this[i(t._0x1853e7)]()}getRectangle(e){const t={_0x27e18f:1737,_0x4e12b5:1737,_0x37aaaf:1983},i=_0x3a2b68;let s;return this[i(2759)](r=>{const o=i;if(r.isPrivate||!r[o(t._0x27e18f)])return;const c=r[o(t._0x4e12b5)]();Cesium__namespace.defined(c)&&(s?s=Cesium__namespace[o(t._0x37aaaf)][o(567)](c,s):s=c)},this),e?formatRectangle(s):s}[_0x3a2b68(3194)](e){return this[_0x3a2b68(2308)].startDraw(e)}[_0x3a2b68(608)](){return this[_0x3a2b68({_0x82eb6d:2308}._0x82eb6d)].stopDraw()}activateEdit(){const e=_0x3a2b68;return this._selectedLayer[e(562)]()}[_0x3a2b68(3310)](){const e={_0x3212c5:3310},t=_0x3a2b68;return this._selectedLayer[t(e._0x3212c5)]()}}register$2("graphicGroup",GraphicGroupLayer);class GeoJsonLayer extends GraphicLayer{_showHook(e){const t={_0x2f765b:840},i=_0x3a2b68;super[i(t._0x2f765b)](e),e&&this._hasLoad&&(this._hasLoad=![],this.load())}[_0x3a2b68(2679)](){const e={_0x5f4f69:442},t=_0x3a2b68;super._addedHook(),this[t(e._0x5f4f69)]?this.load():this._hasLoad=!![]}[_0x3a2b68(3916)](){super._removedHook(),this.clear()}load(e){const t={_0x1be096:3536},i=_0x3a2b68;e&&(Cesium__namespace.defaultValue(e.clear,!![])&&(delete this.options.url,delete this.options.data),this[i(2126)](),this.options={...this.options,...e}),this.options.url?sendAjax({...this.options,proxy:this._proxy}).then(s=>{const r=i;!this._map||this._state!==State.ADDED||this[r(t._0x1be096)](s)}).catch(s=>{const r=i;var o;logError$1(r(3564),s),(o=this._readyPromise)!==null&&o!==void 0&&o.reject&&this._readyPromise[r(3398)](s)}):this[i(1941)].data?this._load_data(this.options.data):e&&logWarn(i(3861))}_load_data(e){const t={_0x46cc2d:1941},i=_0x3a2b68;this[i(t._0x46cc2d)].format&&(e=this[i(t._0x46cc2d)].format(e)),e=this._formatForMask(e);const s=this.loadGeoJSON(e,{clear:!![],enabledEvent:![]}),r=[];s[i(3782)](o=>{r.push({...o.attr,graphic:o})}),this.fire(EventType.load,{geojson:e,list:r,graphics:s}),this[i(t._0x46cc2d)].flyTo&&this.flyToByAnimationEnd(),this._readyPromise.resolve(this)}_formatForMask(e){const t={_0x2a8e2f:2332,_0x511e33:4353,_0x15ab5d:528,_0x4baf3e:2269,_0x582445:918,_0x4b0b5d:2152,_0x37d4b9:1718,_0x42f08c:1754},i=_0x3a2b68,s=this.options.mask;if(!s||!e[i(2332)]||e[i(2332)].length===0)return e;e=clone(e),e.features.splice(1,e[i(t._0x2a8e2f)].length-1),this._extent=getExtentByGeoJSON(e);let r={xmin:73,xmax:136,ymin:3,ymax:59};isObject(s)&&Cesium__namespace.defined(s.xmin)&&Cesium__namespace.defined(s.xmax)&&Cesium__namespace[i(407)](s.ymin)&&Cesium__namespace.defined(s.ymax)&&(r=s);const o=[[r.xmin,r.ymax],[r[i(528)],r.ymin],[r[i(t._0x511e33)],r[i(941)]],[r[i(t._0x511e33)],r.ymax],[r[i(t._0x15ab5d)],r[i(t._0x4baf3e)]]],c=e.features[0];if(c[i(2152)].type===i(2909))c.geometry={type:"Polygon",coordinates:[o,c.geometry[i(918)][0]]};else if(c.geometry.type==="MultiPolygon"){const _=[o];for(let l=0,d=c.geometry[i(t._0x582445)].length;l<d;l++){const f=c.geometry.coordinates[l];f[i(400)]>0&&_.push(f[0])}c[i(2152)]={type:"Polygon",coordinates:[_]}}else if(c[i(t._0x4b0b5d)].type==="GeometryCollection"){const _=[o];for(let l=0,d=c.geometry.geometries.length;l<d;l++){const f=c.geometry[i(t._0x37d4b9)][l].coordinates;f.length>0&&_[i(t._0x42f08c)](f[0])}c[i(2152)]={type:"Polygon",coordinates:[_]}}return e}_toJsonEx(e){}_setOptionsHook(e,t){const i={_0x21db42:4184},s=_0x3a2b68;var r;super[s(1651)](e,t),this._map&&(t[s(1126)]&&!((r=t.symbol)!==null&&r!==void 0&&r[s(1603)])?this[s(2759)](o=>{const c=s,_=getSymbolStyle(e.symbol,o.attr);delete _[c(i._0x21db42)],o.style=_}):(this.clear(),this.load()))}}register$2(_0x3a2b68(3824),GeoJsonLayer);class BusineDataLayer extends GraphicLayer{_showHook(e){super._showHook(e),e&&this._hasLoad&&(this._hasLoad=![],this.load())}_addedHook(){const e={_0x46007e:432,_0x234fa9:3735},t=_0x3a2b68;super._addedHook(),this.show?this[t(e._0x46007e)]():this[t(e._0x234fa9)]=!![]}_removedHook(){super._removedHook(),this.clear()}[_0x3a2b68(432)](e){const t={_0x5572b0:2023,_0x2741d7:4389,_0x18ab70:1941},i=_0x3a2b68;e&&(Cesium__namespace.defaultValue(e.clear,!![])&&(delete this.options.url,delete this.options[i(1924)]),this.clear(),this.options={...this.options,...e}),this.options.url?fetchJson({...this.options,proxy:this[i(t._0x5572b0)]})[i(t._0x2741d7)](s=>{const r=i;!this._map||!this.isAdded||this[r(3536)](s)}).catch(s=>{const r=i;var o;logError$1("fetchJson出错了",s),(o=this[r(1900)])!==null&&o!==void 0&&o.reject&&this._readyPromise[r(3398)](s)}):this[i(t._0x18ab70)].data?this._load_data(this.options.data):e&&logWarn("GeoJsonLayer：没有传入 url 或 data 参数,请确认是否有误。")}_load_data(e){const t={_0x2d4781:3782,_0x444d15:4076,_0x9d28d:671,_0x5d1846:2694,_0x1e8ebd:2984},i=_0x3a2b68;this[i(1941)].dataColumn&&this.options[i(2204)].split(".")[i(t._0x2d4781)](_=>{e=e[_]}),this.options[i(3005)]&&(e=this.options.formatData(e));const s=[];for(let c=0,_=e.length;c<_;c++){const l=e[c];let d={};l.style&&(d={...l.style});const f=this.options.symbol;let g=l.type&&hasType(l.type)?l.type:"point";if(f)if(isFunction(f))d=f(l,d)||d,d.type&&(g=d.type);else{g=f.type||g;const C=getSymbolStyle(f,l||{});f[i(2496)]?d={...C,...d}:d=C}if(!hasType(g)){logError$1(i(1617),l);continue}const b={type:g,style:d,attr:l};if(isPointType(g)){if(l.position)b[i(t._0x444d15)]=l[i(t._0x444d15)];else if(this.options.formatPosition)b.position=this.options.formatPosition(l,b);else if(this.options[i(3267)]||this.options.lngColumn){const C=l[this.options.latColumn||"lat"],P=l[this.options.lngColumn||"lng"],S=l[this.options.altColumn||i(1879)]||0;b[i(t._0x444d15)]=[P,C,S]}else l.lat&&l.lng&&(b.position=[l.lng,l[i(t._0x9d28d)],l.alt||0]);if(!b.position){logError$1("无法解析数据position坐标位置",l);continue}}else if(l[i(t._0x5d1846)]?b.positions=l[i(2694)]:this.options.formatPosition&&(b.positions=this.options.formatPosition(l,b)),!b.positions){logError$1(i(t._0x1e8ebd),l);continue}s.push(b)}const r=this[i(1925)](s,{enabledEvent:![]}),o=[];r[i(t._0x2d4781)](c=>{o.push({...c.attr,graphic:c})}),this.fire(EventType.load,{jsonData:e,list:o,graphics:r}),this.options.flyTo&&this[i(2330)](),this._readyPromise.resolve(this)}_toJsonEx(e){}_setOptionsHook(e,t){const i={_0x1dbd1c:1651},s=_0x3a2b68;var r;super[s(i._0x1dbd1c)](e,t),this._map&&(t.symbol&&!((r=t.symbol)!==null&&r!==void 0&&r.type)?this.eachGraphic(o=>{const c=s,_=getSymbolStyle(e[c(1126)],o.attr);o.style=_}):(this.clear(),this[s(432)]()))}}register$2(_0x3a2b68(725),BusineDataLayer);var JzwStyleFS=`void fragmentMain(FragmentInput fsInput, inout czm_modelMaterial material) {
  vec4 position = czm_inverseModelView * vec4(fsInput.attributes.positionEC, 1); // 位置

  // 注意shader中写浮点数是，一定要带小数点，否则会报错，比如0需要写成0.0，1要写成1.0
  float _baseHeight = 0.0; // 物体的基础高度，需要修改成一个合适的建筑基础高度
  float _heightRange = 80.0; // 高亮的范围(_baseHeight ~ _baseHeight + _heightRange)
  float _glowRange = 100.0; // 光环的移动范围(高度)

  // 建筑基础色
  float mars_height = (u_mars3d_jzw_upz ? position.z : position.y) - _baseHeight;
  float mars_a11 = fract(czm_frameNumber / 120.0) * 3.14159265 * 2.0;
  float mars_a12 = mars_height / _heightRange + sin(mars_a11) * 0.1;

  material.diffuse = mix(material.diffuse, vec3(0.0, 0.0, 1.0), 0.5); // 颜色
  material.diffuse *= vec3(mars_a12);// 渐变

  // 动态光环
  float time = fract(czm_frameNumber / 360.0);
  time = abs(time - 0.5) * 2.0;
  float mars_h = clamp(mars_height / _glowRange, 0.0, 1.0);
  float mars_diff = step(0.005, abs(mars_h - time));
  material.diffuse += material.diffuse * (1.0 - mars_diff);
}
`;class EditTileset extends EditBase{get[_0x3a2b68(607)](){return this._graphic}get style(){return this[_0x3a2b68(4227)].options}[_0x3a2b68(1320)](){const e={_0x270abc:4220},t=_0x3a2b68;this._contextmenuConfig_bak=this.layer[t(2642)],this[t(e._0x270abc)]({dragger:this._graphic,onDrag:(i,s)=>{const r=t;this[r(4227)][r(4076)]=s}})}[_0x3a2b68(2753)](){const e={_0x168c86:3770},t=_0x3a2b68;delete this._graphic._draw_tooltip,delete this._graphic._isDragger,delete this._graphic._noMousePick,delete this._graphic[t(2517)],delete this._graphic.onDrag,this._graphic.unbindContextMenu(),this._contextmenuConfig_bak&&(this.layer._contextmenuConfig=this[t(e._0x168c86)],delete this._contextmenuConfig_bak)}[_0x3a2b68(1011)](e){const t={_0x16b9a5:1374,_0xa1824c:744,_0x519ea1:3928,_0x5605f9:744,_0x3393e4:4371},i=_0x3a2b68,s=this._map[i(t._0x16b9a5)].getPickTarget(e.position,e);if(s.layer!==this.layer)return;const r=s==null?void 0:s.layer;!r||!r[i(3906)]||(this._map[i(t._0xa1824c)][i(t._0x519ea1)].enableInputs&&(this._map[i(t._0x5605f9)].screenSpaceCameraController.enableInputs=![],this._hasChangeEnableInputs=!![]),this._map._setEditCursor(!![]),r[i(t._0x3393e4)](),this._draggerIng=r,this[i(1109)](EventType.editMouseDown,{...e,...s,index:this._draggerIng[i(1191)]}))}_onMouseMoveDraggerHandler(e){const t={_0x48abcd:1575,_0x30b0f9:1109},i=_0x3a2b68;this._map.openSmallTooltip(e.endPosition,this._map.getLangText("_释放后完成修改"));const s=getCurrentMouseTerrainPosition(this[i(t._0x48abcd)].scene,e.endPosition);s&&this._draggerIng.onDrag&&this._draggerIng.onDrag(this._draggerIng,s),this[i(t._0x30b0f9)](EventType[i(3805)],{...e,index:this._draggerIng.index,cartesian:s,windowPosition:e[i(1127)]})}[_0x3a2b68(4109)](e){const t={_0xac4b25:1575,_0x387c7e:1575},i=_0x3a2b68,s=this._map.mouseEvent.getPickTarget(e[i(1127)],e),r=s==null?void 0:s.layer;if(r==null){this[i(t._0xac4b25)].closeSmallTooltip();return}if(s.layer!==this.layer||!r[i(3906)]||this._map.contextmenu.show&&this._map.contextmenu.target===r)return;const o=r._draw_tooltip;o&&this[i(t._0x387c7e)].openSmallTooltip(e.endPosition,o)}getDraggerContextMenu(e){const t={_0x28454d:3600,_0x11f460:3600,_0x38b07c:3510},i=_0x3a2b68,s=super.getDraggerContextMenu(e);return Cesium__namespace.defaultValue(this.style[i(1421)],!![])&&(s.push({text:this[i(1575)][i(t._0x28454d)](i(1172)),icon:Icon.BloomEffectYes,show:r=>!this._matrixRotate||this._matrixRotate._dragger_index!==e.index,callback:r=>{const o=i;var c;const _=(c=r.graphic)!==null&&c!==void 0&&c.position?r[o(2471)]:r.layer;this.startRotateMatrix(_,r)}}),s.push({text:this._map[i(t._0x11f460)](i(t._0x38b07c)),icon:Icon.BloomEffectNo,show:r=>this[i(2783)]&&this._matrixRotate._dragger_index===e.index,callback:r=>{this.stopRotateMatrix()}})),s}startRotateMatrix(e,t){const i={_0x26a8bc:2783,_0x42b94f:866},s=_0x3a2b68;!e&&(e=this.layer),this[s(3047)](),this.stopRotateMatrix(),this._matrixRotate=new MatrixRotate({map:this._map,position:e.position,roll:e[s(3302)],pitch:e[s(3546)],heading:e.rotation_z}),this._map.addThing(this._matrixRotate),this[s(i._0x26a8bc)].on(EventType[s(i._0x42b94f)],r=>{const o=s;e.rotation={x:formatNum$1(r.roll,2),y:formatNum$1(r.pitch,2),z:formatNum$1(r[o(2782)],2)}}),e.off(EventType.updatePosition,this[s(4174)],this),e.off(EventType.updatePosition,this._updateMatrixRotatePosition,this),e.on(EventType[s(1560)],this._updateMatrixRotatePosition,this)}}class TilesetEditBase extends BaseThing{constructor(e={}){const t=_0x3a2b68;super(e),!isMars3DCesium&&logError$1("该功能需要引入mars3d修改版Cesium库(mars3d-cesium库)才支持!",this),this._rangeNumber=0,this[t(854)]=0,this._areaList=[]}get list(){return this._areaList}get[_0x3a2b68(607)](){return this[_0x3a2b68(4053)]}set[_0x3a2b68(607)](e){const t={_0x4f211f:1941},i={_0x57452f:3766};this._layer=e,e.readyPromise.then(s=>{const r=_0x20dc;this._modelUpAxis=e.upAxis,this._center=e.center.toCartographic(),this._initLayer(e[r(3466)]),this[r(t._0x4f211f)].area&&this.options[r(3254)].forEach(o=>{this[r(i._0x57452f)](o.positions,o)})})}get editHeight(){const e={_0x5e06f8:3146,_0x3c4476:3146},t=_0x3a2b68;var i,s;const r=this.layer;return r!=null&&(i=r.options)!==null&&i!==void 0&&i.editHeight?r[t(1941)].editHeight:this.options.editHeight?this.options.editHeight:r!=null&&(s=r[t(1941)])!==null&&s!==void 0&&s[t(e._0x5e06f8)]?r.options[t(3146)]:this.options[t(3146)]?this.options[t(e._0x3c4476)]:0}get tileset(){return this.tilesetLayer.tileset}get[_0x3a2b68(400)](){const e={_0xc91bcf:2589},t=_0x3a2b68;if(this._areaList){var i;return(i=this[t(e._0xc91bcf)])===null||i===void 0?void 0:i.length}else return 0}[_0x3a2b68(2679)](){const e={_0x2527cb:607},t=_0x3a2b68;this[t(1941)].layer&&(this.layer=this.options[t(e._0x2527cb)])}_removedHook(){const e=_0x3a2b68;this.clear(),this[e(1771)]&&this.cacheMarsOptions()}[_0x3a2b68(2126)](){const e={_0x116277:2619,_0x7ba595:4112},t=_0x3a2b68;this._areaList=[],this._rangeNumber=0,this._maxRangeLength=0,Cesium__namespace.defined(this._texture)&&(this._texture[t(e._0x116277)](),this[t(e._0x7ba595)]=void 0)}addArea(e,t={}){const i={_0x3c2d83:4241},s=_0x3a2b68;if(!e||e.length<3)return;t!=null&&t.simplify&&(e=simplifyPositions(e,t.simplify)),e=LngLatArray.toCartesians(e),this._maxRangeLength=Math.max(this[s(854)],e.length);const r={id:getGlobalId(),show:!![],height:t[s(i._0x3c2d83)]||0,positions:e};return this[s(2589)].push(r),this._hasUpdate=!![],this.fire(EventType[s(4250)],{area:r}),r}getAreaById(e){if(isNumber(e)){for(let t=0;t<this._areaList.length;t++){const i=this._areaList[t];if(i.id===e)return i}return null}}[_0x3a2b68(2706)](e){const t={_0x2b7a11:442},i=_0x3a2b68,s=this.getAreaById(e);s&&(s[i(t._0x2b7a11)]=![],this._hasUpdate=!![])}[_0x3a2b68(3622)](e){const t=this.getAreaById(e);t&&(t.show=!![],this._hasUpdate=!![])}[_0x3a2b68(2026)](e){const t={_0x2931c7:4186},i=_0x3a2b68;isNumber(e)&&(e=this[i(t._0x2931c7)](e)),e&&(removeArrayItem(this._areaList,e),this._hasUpdate=!![],this.fire(EventType.removeItem,{area:e}))}[_0x3a2b68(1224)](e){const t={_0x1d13de:4045},i={_0x536b10:3396},s=_0x3a2b68;var r;const o=e.update,c=this;e.update=function(l){const d=_0x20dc;c._hasUpdate&&c[d(2915)](l),o[d(698)](this)(l)};const _=this._getCustomShader(!this.layer.transform);if((r=Cesium__namespace[s(t._0x1d13de)])!==null&&r!==void 0&&r.getCacheOrAdd){const l=Cesium__namespace.Mars3DEx[s(884)](this.layer.id);l[this[s(2690)]]=_,this.cacheMarsOptions=function(){const d=s;e[d(i._0x536b10)]=o,delete l[c._customShadersKey]}}}_update(e){const t={_0x1ac6ee:2878,_0x332e7f:4112,_0x3fab9c:1626,_0x2e586a:3768},i={_0x1cbada:442,_0x45b57e:4286,_0x1d611a:768,_0x48e514:1085,_0xdfa872:1754,_0x26e468:1754},s={_0x427a84:1754,_0x23c75a:1754},r={_0x4f9e21:442},o=_0x3a2b68;if(Cesium__namespace.defined(this._texture)&&(this[o(4112)].destroy(),this._texture=void 0),this._maxRangeLength=0,this._rangeNumber=this._areaList.length,this[o(t._0x1ac6ee)]===0)return;let c=0;this[o(2589)][o(3782)](l=>{const d=o;l[d(r._0x4f9e21)]&&c<l.positions.length&&(c=l.positions[d(400)])}),this._maxRangeLength=c;const _=[];this._areaList.forEach((l,d)=>{const f=o;if(!l[f(i._0x1cbada)])return;const g=l.positions,b=g.length,C=Cesium__namespace.Cartesian3.fromRadians(this[f(i._0x45b57e)][f(i._0x1d611a)],this[f(4286)].latitude,this[f(4286)].height+l.height+this.editHeight),P=Cesium__namespace.Cartesian3[f(i._0x48e514)](C,new Cesium__namespace.Cartesian3);if(_[f(1754)](b),_[f(1754)](b),_.push(b),_.push(b),_.push(P.x),_.push(P.y),_[f(i._0xdfa872)](P.z),_.push(C.x/P.x),g.forEach(S=>{const L=f,E=S,M=Cesium__namespace.Cartesian3[L(1085)](E,new Cesium__namespace.Cartesian3);_[L(s._0x427a84)](M.x),_[L(1754)](M.y),_.push(M.z),_[L(s._0x23c75a)](E.x/M.x)}),b<c)for(let S=0;S<c-b;S++)_.push(0),_[f(1754)](0),_.push(0),_[f(i._0x26e468)](0)}),this[o(t._0x332e7f)]=new Cesium__namespace[o(t._0x3fab9c)]({context:this._map[o(744)]._context,pixelFormat:Cesium__namespace.PixelFormat.RGBA,pixelDatatype:Cesium__namespace[o(3784)].FLOAT,sampler:new Cesium__namespace.Sampler({wrapS:Cesium__namespace.TextureWrap.CLAMP_TO_EDGE,wrapT:Cesium__namespace[o(3592)].CLAMP_TO_EDGE,minificationFilter:Cesium__namespace.TextureMinificationFilter.NEAREST,magnificationFilter:Cesium__namespace[o(t._0x2e586a)].NEAREST}),flipY:![],source:{width:c+2,height:this._rangeNumber,arrayBufferView:new Float32Array(_)}})}_getCustomShader(e=![]){return null}toJSON(){const e={_0x544dcf:1941},t=_0x3a2b68,i=clone(this[t(e._0x544dcf)],["layer",t(509)]);return i.area=[],this._areaList.forEach(s=>{i.area.push({positions:LngLatArray.toArray(s.positions)})}),i}}var TilesetClipFS=`uniform sampler2D u_mars3d_clip_texture;
uniform int u_mars3d_clip_upAxis;
uniform int u_mars3d_clip_rangeNumber;
uniform int u_mars3d_clip_maxRangeLength;

vec4 restorePoint_mars3d_clip(vec4 point) {
  vec3 outpoint = point.xyz * point.w;
  return czm_inverseModel * vec4(outpoint, 1.0);
}

vec4 getRegions_mars3d_clip(int x, int y) {
  float u = (float(x) + 0.5) / float(u_mars3d_clip_maxRangeLength + 2);
  float v = (float(y) + 0.5) / float(u_mars3d_clip_rangeNumber);
  vec4 point = texture(u_mars3d_clip_texture, vec2(u, v));
  return point;
}

bool inRectangle_mars3d_clip(vec3 textPoint) {
  for(int h = 0; h < 100000; h++) {
    if(h >= u_mars3d_clip_rangeNumber)
      break;

    vec4 first = restorePoint_mars3d_clip(getRegions_mars3d_clip(2, h));
    float currentLength = getRegions_mars3d_clip(0, h).x;
    float counter = 0.0;
    float xinters = 0.0;
    for(int w = 0; w < 100000; w++) {
      if(float(w) >= currentLength)
        break;
      int nextIndex = w + 1;
      nextIndex = float(nextIndex) == currentLength ? 0 : nextIndex;
      vec4 p1 = restorePoint_mars3d_clip(getRegions_mars3d_clip(w + 2, h));
      vec4 p2 = restorePoint_mars3d_clip(getRegions_mars3d_clip(nextIndex + 2, h));

      float p1x = p1.x;
      float p1y = p1.z;
      float p2x = p2.x;
      float p2y = p2.z;
      float textPointx = textPoint.x;
      float textPointy = textPoint.z;

      if(u_mars3d_clip_upAxis == 0) {
        p1x = p1.y;
        p1y = p1.z;
        p2x = p2.y;
        p2y = p2.z;
        textPointx = textPoint.y;
        textPointy = textPoint.z;
      } else if(u_mars3d_clip_upAxis == 1) {
        p1x = p1.x;
        p1y = p1.z;
        p2x = p2.x;
        p2y = p2.z;
        textPointx = textPoint.x;
        textPointy = textPoint.z;
      } else {
        p1x = p1.x;
        p1y = p1.y;
        p2x = p2.x;
        p2y = p2.y;
        textPointx = textPoint.x;
        textPointy = textPoint.y;
      }

      if(textPointx > min(p1x, p2x) && textPointx <= max(p1x, p2x)) {
        if(textPointy <= max(p1y, p2y)) {
          if(p1x != p2x) {
            xinters = ((textPointx - p1x) * (p2y - p1y)) / (p2x - p1x) + p1y;
            if(p1y == p2y || textPointy <= xinters) {
              counter += 1.0;
            }
          }
        }
      }
    }
    if((mod(counter, 2.0) != 0.0)) {
      return true;
    }
  }
  return false;
}

void fragmentMain(FragmentInput fsInput, inout czm_modelMaterial material) {
  vec3 positionMC = fsInput.attributes.positionMC;
  if(inRectangle_mars3d_clip(positionMC)) {
    discard;
  }
}
`;class TilesetClip extends TilesetEditBase{constructor(e={}){const t={_0x54824a:2690},i=_0x3a2b68;super(e),this[i(t._0x54824a)]="clip"}_getCustomShader(e=![]){const t={_0x21f344:2372,_0x151dda:1611},i={_0x591f1b:2878},s=_0x3a2b68,r=new Cesium__namespace.CustomShader({fragmentShaderText:TilesetClipFS}),o=this._map.scene[s(t._0x21f344)].defaultTexture;return r[s(2299)].u_mars3d_clip_texture=()=>Cesium__namespace.defined(this._texture)?this._texture:o,r[s(2299)].u_mars3d_clip_upAxis=()=>this._modelUpAxis,r[s(2299)][s(2068)]=()=>this[s(i._0x591f1b)],r.uniformMap[s(t._0x151dda)]=()=>this._maxRangeLength,r}}var TilesetFlatFS=`uniform sampler2D u_mars3d_flat_texture;
uniform int u_mars3d_flat_upAxis;
uniform int u_mars3d_flat_rangeNumber;
uniform int u_mars3d_flat_maxRangeLength;

vec4 restorePoint_mars3d_flat(vec4 point) {
  vec3 outpoint = point.xyz * point.w;
  return czm_inverseModel * vec4(outpoint, 1.0);
}

vec4 getRegions_mars3d_flat(int x, int y) {
  float u = (float(x) + 0.5) / float(u_mars3d_flat_maxRangeLength + 2);
  float v = (float(y) + 0.5) / float(u_mars3d_flat_rangeNumber);
  vec4 point = texture(u_mars3d_flat_texture, vec2(u, v));
  return point;
}

int inRectangle_mars3d_flat(vec3 textPoint) {
  for(int h = 0; h < 100000; h++) {
    if(h >= u_mars3d_flat_rangeNumber)
      break;

    vec4 first = restorePoint_mars3d_flat(getRegions_mars3d_flat(2, h));
    float currentLength = getRegions_mars3d_flat(0, h).x;
    float counter = 0.0;
    float xinters = 0.0;
    for(int w = 0; w < 100000; w++) {
      if(float(w) >= currentLength)
        break;
      int nextIndex = w + 1;
      nextIndex = float(nextIndex) == currentLength ? 0 : nextIndex;
      vec4 p1 = restorePoint_mars3d_flat(getRegions_mars3d_flat(w + 2, h));
      vec4 p2 = restorePoint_mars3d_flat(getRegions_mars3d_flat(nextIndex + 2, h));

      float p1x = p1.x;
      float p1y = p1.z;
      float p2x = p2.x;
      float p2y = p2.z;
      float textPointx = textPoint.x;
      float textPointy = textPoint.z;

      if(u_mars3d_flat_upAxis == 0) {
        p1x = p1.y;
        p1y = p1.z;
        p2x = p2.y;
        p2y = p2.z;
        textPointx = textPoint.y;
        textPointy = textPoint.z;
      } else if(u_mars3d_flat_upAxis == 1) {
        p1x = p1.x;
        p1y = p1.z;
        p2x = p2.x;
        p2y = p2.z;
        textPointx = textPoint.x;
        textPointy = textPoint.z;
      } else {
        p1x = p1.x;
        p1y = p1.y;
        p2x = p2.x;
        p2y = p2.y;
        textPointx = textPoint.x;
        textPointy = textPoint.y;
      }

      if(textPointx > min(p1x, p2x) && textPointx <= max(p1x, p2x)) {
        if(textPointy <= max(p1y, p2y)) {
          if(p1x != p2x) {
            xinters = ((textPointx - p1x) * (p2y - p1y)) / (p2x - p1x) + p1y;
            if(p1y == p2y || textPointy <= xinters) {
              counter += 1.0;
            }
          }
        }
      }
    }
    if((mod(counter, 2.0) != 0.0)) {
      return h;
    }
  }
  return 99999;
}

void vertexMain(VertexInput vsInput, inout czm_modelVertexOutput vsOutput) {
  vec3 positionMC = vsInput.attributes.positionMC;
  int rectangleIndex = inRectangle_mars3d_flat(positionMC);
  if(rectangleIndex != 99999) {
    vec4 modelDatumPoint = restorePoint_mars3d_flat(getRegions_mars3d_flat(1, rectangleIndex));
    if(u_mars3d_flat_upAxis == 0) {
      vsOutput.positionMC = vec3(modelDatumPoint.x + positionMC.x * 0.0005, positionMC.y, positionMC.z);
    } else if(u_mars3d_flat_upAxis == 1) {
      vsOutput.positionMC = vec3(positionMC.x, modelDatumPoint.y + positionMC.y * 0.0005, positionMC.z);
    } else {
      vsOutput.positionMC = vec3(positionMC.x, positionMC.y, modelDatumPoint.z + positionMC.z * 0.0005);
    }
  }
}
`;class TilesetFlat extends TilesetEditBase{constructor(e={}){super(e),this._customShadersKey="flat"}[_0x3a2b68(2013)](e=![]){const t={_0x12ea3f:2299,_0x4ecf03:3322,_0xed22b6:4176,_0x2d7206:2299},i=_0x3a2b68,s=new Cesium__namespace.CustomShader({vertexShaderText:TilesetFlatFS}),r=this._map.scene._context.defaultTexture;return s[i(t._0x12ea3f)][i(t._0x4ecf03)]=()=>{const o=i;return Cesium__namespace.defined(this._texture)?this[o(4112)]:r},s[i(t._0x12ea3f)].u_mars3d_flat_upAxis=()=>this._modelUpAxis,s.uniformMap[i(t._0xed22b6)]=()=>this._rangeNumber,s[i(t._0x2d7206)].u_mars3d_flat_maxRangeLength=()=>this._maxRangeLength,s}updateHeight(e,t){const i={_0x575e5d:2252},s=_0x3a2b68;if(Cesium__namespace.defined(t)){const r=this.getAreaById(t);r&&(r.height=e,this[s(i._0x575e5d)]=!![])}else{for(let r=0;r<this._areaList.length;r++){const o=this._areaList[r];o.height=e}this._hasUpdate=!![]}}}var TilesetFloodFS=`uniform sampler2D u_mars3d_flood_texture;
uniform int u_mars3d_flood_upAxis;
uniform int u_mars3d_flood_rangeNumber;
uniform int u_mars3d_flood_maxRangeLength;

uniform bool u_mars3d_isStart;
uniform vec4 u_mars3d_flood_color;
uniform bool u_mars3d_flood_floodAll;
uniform float u_mars3d_flood_currentheight;
uniform float u_mars3d_flood_min_height;
uniform bool u_mars3d_flood_limitMin;

vec4 restorePoint_mars3d_flood(vec4 point) {
  vec3 outpoint = point.xyz * point.w;
  return czm_inverseModel * vec4(outpoint, 1.0);
}

vec4 getRegions_mars3d_flood(int x, int y) {
  float u = (float(x) + 0.5) / float(u_mars3d_flood_maxRangeLength + 2);
  float v = (float(y) + 0.5) / float(u_mars3d_flood_rangeNumber);
  vec4 point = texture(u_mars3d_flood_texture, vec2(u, v));
  return point;
}

bool inRectangle_mars3d_flood(vec3 textPoint) {
  for(int h = 0; h < 100000; h++) {
    if(h >= u_mars3d_flood_rangeNumber)
      break;

    vec4 first = restorePoint_mars3d_flood(getRegions_mars3d_flood(2, h));
    float currentLength = getRegions_mars3d_flood(0, h).x;
    float counter = 0.0;
    float xinters = 0.0;
    for(int w = 0; w < 100000; w++) {
      if(float(w) >= currentLength)
        break;
      int nextIndex = w + 1;
      nextIndex = float(nextIndex) == currentLength ? 0 : nextIndex;
      vec4 p1 = restorePoint_mars3d_flood(getRegions_mars3d_flood(w + 2, h));
      vec4 p2 = restorePoint_mars3d_flood(getRegions_mars3d_flood(nextIndex + 2, h));

      float p1x = p1.x;
      float p1y = p1.z;
      float p2x = p2.x;
      float p2y = p2.z;
      float textPointx = textPoint.x;
      float textPointy = textPoint.z;

      if(u_mars3d_flood_upAxis == 0) {
        p1x = p1.y;
        p1y = p1.z;
        p2x = p2.y;
        p2y = p2.z;
        textPointx = textPoint.y;
        textPointy = textPoint.z;
      } else if(u_mars3d_flood_upAxis == 1) {
        p1x = p1.x;
        p1y = p1.z;
        p2x = p2.x;
        p2y = p2.z;
        textPointx = textPoint.x;
        textPointy = textPoint.z;
      } else {
        p1x = p1.x;
        p1y = p1.y;
        p2x = p2.x;
        p2y = p2.y;
        textPointx = textPoint.x;
        textPointy = textPoint.y;
      }

      if(textPointx > min(p1x, p2x) && textPointx <= max(p1x, p2x)) {
        if(textPointy <= max(p1y, p2y)) {
          if(p1x != p2x) {
            xinters = ((textPointx - p1x) * (p2y - p1y)) / (p2x - p1x) + p1y;
            if(p1y == p2y || textPointy <= xinters) {
              counter += 1.0;
            }
          }
        }
      }
    }
    if((mod(counter, 2.0) != 0.0)) {
      return true;
    }
  }
  return false;
}

void fragmentMain(FragmentInput fsInput, inout czm_modelMaterial material) {
  vec3 positionMC = fsInput.attributes.positionMC;
  if(u_mars3d_isStart && (u_mars3d_flood_floodAll || inRectangle_mars3d_flood(positionMC))) {
    float height = positionMC.z;
    if(u_mars3d_flood_upAxis == 0) {
      height = positionMC.x;
    } else if(u_mars3d_flood_upAxis == 1) {
      height = positionMC.y;
    } else {
      height = positionMC.z;
    }

    if(height <= u_mars3d_flood_currentheight && (!u_mars3d_flood_limitMin || u_mars3d_flood_min_height <= height)) {
      material.diffuse = mix(material.diffuse, u_mars3d_flood_color.rgb, u_mars3d_flood_color.a);
    }
  }
}
`;class TilesetFlood extends TilesetEditBase{constructor(e={}){const t={_0x2a6d0a:2092},i=_0x3a2b68;super(e),this._customShadersKey="flood",this[i(1941)].speed=this.options.speed??5,this.color=this[i(1941)].color||new Cesium__namespace[i(t._0x2a6d0a)](.15,.7,.95,.5),this._limitMin=this[i(1941)].limitMin??![]}get speed(){return this[_0x3a2b68({_0x1338ff:1941}._0x1338ff)].speed}set[_0x3a2b68(4385)](e){const t=_0x3a2b68;this.options[t(4385)]=e}get[_0x3a2b68(3473)](){return this.options.floodAll??![]}set[_0x3a2b68(3473)](e){const t={_0x2706a9:1941},i=_0x3a2b68;this[i(t._0x2706a9)].floodAll=e}get height(){return this.options.height}set height(e){this.options.height=e,this._currentHeight=e+this.editHeight}get color(){return this[_0x3a2b68({_0x5be887:1596}._0x5be887)]}set color(e){this._color=getCesiumColor(e,new Cesium__namespace.Color(.15,.7,.95,.5))}start(){const e={_0x234275:407},t=_0x3a2b68;this.stop(),Cesium__namespace[t(e._0x234275)](this[t(1941)][t(1890)])?(this._minHeight=this.options[t(1890)]+this[t(3188)],this[t(4241)]=this.options[t(1890)]):(this._minHeight=-9999,this[t(4241)]=0),this.isStart=!![],this.fire(EventType.start),this[t(1575)].on(EventType.clockTick,this._onClockTickHandler,this)}_onClockTickHandler(e){const t={_0x57fafc:4385,_0x496e47:4241,_0x327a1b:866},i=_0x3a2b68;if(this.height+=this[i(t._0x57fafc)]/50,this[i(t._0x496e47)]>this.options.maxHeight){this.height=this.options.maxHeight,this.stop();return}if(this[i(4241)]<this.options.minHeight){this[i(4241)]=this.options.minHeight,this.stop();return}this.fire(EventType[i(t._0x327a1b)],{height:this.height})}stop(){const e={_0x23b85d:1109},t=_0x3a2b68;this.isStart&&(this._map.off(EventType.clockTick,this[t(3143)],this),this.isStart=![],this[t(e._0x23b85d)](EventType[t(2602)]))}restart(){this.start()}clear(){const e={_0x51871f:2126},t=_0x3a2b68;this.stop(),super[t(e._0x51871f)](),delete this._minHeight,delete this._currentHeight}_getCustomShader(e=![]){const t={_0xea9e87:2215,_0x1fec0c:4388,_0x144442:1148,_0x5ae75a:3543,_0xc9afb1:2958,_0x41373e:3692,_0x4e676c:1324,_0x546ac2:2299},i={_0x194e12:1962},s={_0x57ceaa:3904},r=_0x3a2b68,o=new Cesium__namespace[r(t._0xea9e87)]({fragmentShaderText:TilesetFloodFS}),c=this[r(1575)].scene._context[r(t._0x1fec0c)];return o.uniformMap.u_mars3d_flood_texture=()=>Cesium__namespace.defined(this._texture)?this._texture:c,o[r(2299)][r(t._0x144442)]=()=>this[r(s._0x57ceaa)],o.uniformMap.u_mars3d_flood_rangeNumber=()=>this._rangeNumber,o[r(2299)][r(1539)]=()=>this._maxRangeLength,o[r(2299)][r(t._0x5ae75a)]=()=>Cesium__namespace.defined(this._currentHeight),o.uniformMap[r(t._0xc9afb1)]=()=>this.floodAll,o.uniformMap.u_mars3d_flood_color=()=>this.color,o.uniformMap[r(t._0x41373e)]=()=>this._currentHeight,o.uniformMap[r(t._0x4e676c)]=()=>this[r(i._0x194e12)],o.uniformMap.u_mars3d_flood_limitMin=()=>this._limitMin,this.uniformMap=o[r(t._0x546ac2)],o}}class TilesetPlanClip extends BaseThing{get clipTarget(){return this[_0x3a2b68({_0x4eadcc:1964}._0x4eadcc)]}set clipTarget(e){const t={_0x2d1694:1964},i=_0x3a2b68;this[i(t._0x2d1694)]=e,this._inverseMatrix=null,Cesium__namespace.defined(this.options.positions)&&(this.positions=this.options.positions),Cesium__namespace.defined(this.options[i(1603)])&&(this.type=this.options.type),Cesium__namespace.defined(this.options.distance)&&(this[i(3481)]=this.options.distance)}get layer(){return this[_0x3a2b68({_0x9c5ff7:4053}._0x9c5ff7)]}set[_0x3a2b68(607)](e){this._layer=e,e.loadOk?this.clipTarget=e.tileset:e.on(EventType.load,t=>{this.clipTarget=e.tileset})}get[_0x3a2b68(1601)](){return this.clippingPlanes}get inverseMatrix(){const e={_0x3f9bbd:3732},t=_0x3a2b68;if(!this._inverseMatrix){let i;const s=this._tileset.root[t(3732)];s&&s.equals(Cesium__namespace.Matrix4[t(3709)])||!s?i=Cesium__namespace.Transforms.eastNorthUpToFixedFrame(this._tileset.boundingSphere.center):i=Cesium__namespace.Matrix4[t(1125)](this[t(1964)].root[t(e._0x3f9bbd)]),this._inverseMatrix=Cesium__namespace[t(2478)].inverseTransformation(i,new Cesium__namespace.Matrix4)}return this._inverseMatrix}get center(){const e={_0x11dc00:4053,_0x2776e2:2057},t=_0x3a2b68;return this._layer?this[t(e._0x11dc00)].position:this._tileset[t(e._0x2776e2)].center}get[_0x3a2b68(3481)](){return this._distance}set distance(e){const t={_0x1845bc:400,_0x4d0007:3481},i=_0x3a2b68;if(this._distance=e,this[i(496)]&&this.clippingPlanes[i(t._0x1845bc)]>0){const s=this.clippingPlanes.get(this.clippingPlanes[i(t._0x1845bc)]-1);s[i(t._0x4d0007)]=e}}get angle1(){return this[_0x3a2b68({_0x14bb7b:2896}._0x14bb7b)]||0}set angle1(e){const t={_0x260e78:1359},i=_0x3a2b68;if(this._normal_angle1=e,this.clippingPlanes&&this.clippingPlanes.length>0){const s=this[i(496)].get(this.clippingPlanes.length-1);this[i(t._0x260e78)](s,e,this.angle2)}}get angle2(){return this._normal_angle2||0}set angle2(e){const t=_0x3a2b68;if(this._normal_angle2=e,this.clippingPlanes&&this.clippingPlanes[t(400)]>0){const i=this.clippingPlanes[t(615)](this.clippingPlanes.length-1);this._updateNormal(i,this.angle1,e)}}get[_0x3a2b68(626)](){return this._normalZ||0}set[_0x3a2b68(626)](e){const t={_0x14f4f9:496,_0x2b7a93:496},i=_0x3a2b68;if(this[i(1113)]=e,this[i(t._0x14f4f9)]&&this[i(t._0x2b7a93)].length>0){const s=this.clippingPlanes.get(this.clippingPlanes.length-1);s.normal.z=e}}get type(){return this._type}set[_0x3a2b68(1603)](e){const t={_0x12332d:2978,_0x5d0ef6:4066},i=_0x3a2b68;this._type=e;let s;switch(e){case ClipType.Z:s=[new Cesium__namespace[i(4066)](new Cesium__namespace[i(t._0x12332d)](0,0,1),1)];break;case ClipType.ZR:s=[new Cesium__namespace[i(t._0x5d0ef6)](new Cesium__namespace.Cartesian3(0,0,-1),1)];break;case ClipType.X:s=[new Cesium__namespace.ClippingPlane(new Cesium__namespace.Cartesian3(1,0,0),1)];break;case ClipType.XR:s=[new Cesium__namespace[i(4066)](new Cesium__namespace[i(2978)](-1,0,0),1)];break;case ClipType.Y:s=[new Cesium__namespace[i(4066)](new Cesium__namespace[i(2978)](0,1,0),1)];break;case ClipType.YR:s=[new Cesium__namespace[i(t._0x5d0ef6)](new Cesium__namespace.Cartesian3(0,-1,0),1)];break}this.setPlanes(s)}get[_0x3a2b68(2694)](){return this._positions}set positions(e){const t={_0x105c70:3695},i=_0x3a2b68;this._positions=LngLatArray.toCartesians(e),this[i(t._0x105c70)](this._positions)}get clipOutSide(){const e={_0x44f309:1941},t=_0x3a2b68;return this[t(e._0x44f309)][t(705)]}set[_0x3a2b68(705)](e){const t={_0x3a62f4:705,_0x139148:3695},i=_0x3a2b68;this.options[i(t._0x3a62f4)]=e,this._map&&this._positions&&this[i(t._0x139148)](this[i(3965)])}_mountedHook(){const e={_0xcef61:2505,_0x148b47:2439,_0x56f560:607,_0x761d91:607},t=_0x3a2b68;this.options.showPlane&&(this[t(e._0xcef61)]=new GraphicLayer({...this.options,private:!![]}),this.options.editPlane&&this[t(e._0xcef61)][t(e._0x148b47)]([{text:this[t(1575)][t(3600)]("_删除"),icon:Icon.Delete,callback:i=>{const s=i.graphic;s&&(this._graphicLayer.removeGraphic(s),this.fire(EventType.remove,i))}}])),this.options[t(607)]?this[t(e._0x56f560)]=this.options[t(e._0x761d91)]:this.options.tileset&&(this.clipTarget=this.options[t(3466)])}_map_click(e){const t={_0x54ae9:3793},i=_0x3a2b68;this._last_planeGraphics&&(this._last_planeGraphics.hasEdit=![],this[i(2151)].material[i(2540)]=this[i(2151)][i(t._0x54ae9)].color_bak,delete this[i(2151)]),this._graphicLayer_leftUp(e)}_graphicLayer_click(e){const t=_0x3a2b68;var i,s;const r=(i=e.graphic)===null||i===void 0||(s=i.entity)===null||s===void 0?void 0:s.plane;Cesium__namespace.defined(r)&&(this._map_click(),r.hasEdit=!r.hasEdit,r.material.color_bak=r.material.color,r[t(3793)][t(2540)]=e.graphic.style.editColor,r[t(3031)]&&(this._last_planeGraphics=r),e.stopPropagation())}_graphicLayer_leftDown(e){const t={_0x132cbb:1068,_0xe20d06:3928,_0x48d466:4173},i=_0x3a2b68;var s,r;const o=(s=e.graphic)===null||s===void 0||(r=s[i(3764)])===null||r===void 0?void 0:r[i(1068)];Cesium__namespace.defined(o)&&o[i(3031)]&&(this[i(2903)]=o[i(t._0x132cbb)].getValue(),this._map[i(744)][i(t._0xe20d06)].enableInputs&&(this._map.scene.screenSpaceCameraController.enableInputs=![],this[i(t._0x48d466)]=!![]))}[_0x3a2b68(684)](e){Cesium__namespace[_0x3a2b68({_0x3ca6ba:407}._0x3ca6ba)](this._selectedPlane)&&(delete this._selectedPlane,this._hasChangeEnableInputs&&(this._map.scene.screenSpaceCameraController.enableInputs=!![],delete this._hasChangeEnableInputs))}_map_mouseMove(e){const t={_0x4a53e4:2349,_0x11aeda:1127},i=_0x3a2b68;if(Cesium__namespace[i(407)](this._selectedPlane)){const s=e.startPosition.x-e.endPosition.x,r=e[i(t._0x4a53e4)].y-e[i(t._0x11aeda)].y,o=(s+r)/2;this._selectedPlane.distance=(this._selectedPlane.distance||0)+o,this[i(1575)].openSmallTooltip(e.endPosition,this._map.getLangText(i(1610)))}else this._map.closeSmallTooltip()}_addedHook(){const e={_0x4ece7a:407,_0x8e3e6e:1603,_0x4c5c20:407,_0x1febd1:3481},t=_0x3a2b68;this._graphicLayer&&(this._map.addLayer(this._graphicLayer),this.options.editPlane&&(this[t(1575)].on(EventType.click,this._map_click,this),this._graphicLayer.on(EventType.click,this._graphicLayer_click,this),this._graphicLayer.on(EventType.leftDown,this._graphicLayer_leftDown,this),this[t(2505)].on(EventType.leftUp,this._graphicLayer_leftUp,this),this._map.on(EventType.mouseMove,this._map_mouseMove,this))),this[t(4127)]&&(Cesium__namespace[t(e._0x4ece7a)](this.options.positions)&&(this[t(2694)]=this.options.positions),Cesium__namespace[t(407)](this.options.type)&&(this[t(e._0x8e3e6e)]=this[t(1941)].type),Cesium__namespace[t(e._0x4c5c20)](this.options.distance)&&(this[t(e._0x1febd1)]=this.options.distance))}_removedHook(){const e={_0x4206a4:2505,_0x2dbe0c:1575},t=_0x3a2b68;this.clear(),this[t(e._0x4206a4)]&&(this.options[t(1584)]&&(this[t(e._0x2dbe0c)].off(EventType.click,this[t(3438)],this),this[t(e._0x4206a4)].off(EventType.click,this._graphicLayer_click,this),this._graphicLayer.off(EventType[t(3755)],this._graphicLayer_leftDown,this),this[t(e._0x4206a4)].off(EventType.leftUp,this._graphicLayer_leftUp,this),this[t(1575)].off(EventType.mouseMove,this._map_mouseMove,this)),this._map.removeLayer(this[t(2505)]))}_setPositions(e){const t={_0x1e3f92:4241,_0x13f75a:2978,_0x4deb06:1941},i=_0x3a2b68;if(e.length<2)return;const s=[];if(e.length===2){const r=this._createPlaneByLine(e[0],e[1]);r&&s.push(r)}else{let r;const o=formatNum$1(getAngle(e[0],e[1]),2);if(o>-.02&&o<.02)r=![];else{const _=formatNum$1(getAngle(e[0],e[2]),2);r=o<_}this.clipOutSide&&(r=!r);let c;for(let _=0,l=e.length;_<l;++_){const d=(_+1)%l;r?c=this._createPlaneByLine(e[d],e[_]):c=this._createPlaneByLine(e[_],e[d]),c&&((Cesium__namespace.defined(this._normal_angle1)||Cesium__namespace[i(407)](this._normal_angle2))&&this[i(1359)](c,this.angle1,this.angle2),s.push(c))}Cesium__namespace.defined(this.options[i(t._0x1e3f92)])&&(c=new Cesium__namespace.ClippingPlane(new Cesium__namespace[i(t._0x13f75a)](0,0,-1),this[i(t._0x4deb06)].height),s.push(c))}this[i(1354)](s)}[_0x3a2b68(3122)](e,t){const i={_0x7cc3df:3481,_0x37a795:3705},s=_0x3a2b68;if(Cesium__namespace.Cartesian3[s(i._0x7cc3df)](e,t)<.1)return null;const r=this.inverseMatrix,o=Cesium__namespace.Matrix4[s(i._0x37a795)](r,e,new Cesium__namespace.Cartesian3),c=Cesium__namespace.Matrix4.multiplyByPoint(r,t,new Cesium__namespace.Cartesian3),_=new Cesium__namespace.Cartesian3(0,0,10),l=Cesium__namespace.Cartesian3.subtract(c,o,new Cesium__namespace[s(2978)]);let d=Cesium__namespace.Cartesian3[s(2729)](l,_,new Cesium__namespace.Cartesian3);d=Cesium__namespace.Cartesian3.normalize(d,d);const f=Cesium__namespace[s(4135)].fromPointNormal(o,d);return Cesium__namespace.ClippingPlane.fromPlane(f)}[_0x3a2b68(1354)](e){const t={_0x3be82e:428,_0x4e3d26:705,_0x36d887:3848,_0x51d5fc:747,_0x1a3c7e:2092,_0x13eec1:2505},i=_0x3a2b68;if(!e)return;const s=new Cesium__namespace[i(t._0x3be82e)]({planes:e,edgeWidth:this.options.edgeWidth??0,edgeColor:this.options.edgeColor??Cesium__namespace.Color.WHITE,unionClippingRegions:this[i(t._0x4e3d26)]??![]});if(this.clippingPlanes=s,this.clipTarget&&(this.clipTarget.clippingPlanes=s),this.options[i(t._0x36d887)]){this._graphicLayer.clear();const o=this._tileset[i(2057)].radius;for(let c=0;c<s.length;++c){var r;const _=s.get(c),l=new PlaneEntity({position:this.center,style:{heading:360-(((r=this._layer)===null||r===void 0?void 0:r.rotation_z)??0),dimensions:new Cesium__namespace.Cartesian2(o,o),color:Cesium__namespace.Color.WHITE[i(t._0x51d5fc)](.2),editColor:Cesium__namespace[i(t._0x1a3c7e)].WHITE.withAlpha(.5),outline:!![],outlineColor:Cesium__namespace.Color.WHITE,...this.options.planeStyle,plane:new Cesium__namespace.CallbackProperty(createPlaneUpdateFunction(_),![])}});this[i(t._0x13eec1)].addGraphic(l)}}}clear(){const e={_0x48ce25:1113,_0xb6cee0:705,_0x1ee3a6:496,_0x49e12b:3174,_0x534707:496},t=_0x3a2b68;if(this[t(2505)]&&this[t(2505)].clear(),delete this[t(e._0x48ce25)],delete this._normal_angle1,delete this._normal_angle2,delete this._positions,this.options[t(e._0xb6cee0)]=![],this.clippingPlanes&&delete this.clippingPlanes,this.clipTarget){var i;(i=this.clipTarget[t(e._0x1ee3a6)])!==null&&i!==void 0&&i[t(e._0x49e12b)]&&(this.clipTarget[t(496)].enabled=![]),this.clipTarget[t(e._0x534707)]=void 0}}updateAllDistance(e){const t={_0x4e62e6:496,_0x3d121b:400},i=_0x3a2b68;if(this[i(t._0x4e62e6)]!=null)for(let s=0;s<this.clippingPlanes[i(t._0x3d121b)];s++){const r=this.clippingPlanes.get(s);r.distance=e}}updateAllNormal(e,t){const i={_0x35f203:496,_0x107ee9:400,_0xeb6299:496},s=_0x3a2b68;if(this.clippingPlanes!=null)for(let r=0;r<this[s(i._0x35f203)][s(i._0x107ee9)];r++){const o=this[s(i._0xeb6299)].get(r);this[s(1359)](o,e,t)}}_updateNormal(e,t,i){const s={_0x53c968:1185,_0x63397c:2519,_0x162640:1829},r=_0x3a2b68,o=Cesium__namespace.Math[r(s._0x53c968)](t),c=Cesium__namespace.Math.toRadians(i),_=Math.sin(o)*Math.cos(c),l=Math.sin(o)*Math.sin(c),d=Math[r(s._0x63397c)](o);e.normal.x=_,e.normal.y=l,e[r(s._0x162640)].z=d}toJSON(){const e={_0x428ad3:1941},t=_0x3a2b68,i=clone(this[t(e._0x428ad3)],["layer","eventParent"]);return this._positions&&(i.positions=LngLatArray[t(4205)](this.positions)),i}}TilesetPlanClip[_0x3a2b68(859)]=ClipType;function createPlaneUpdateFunction(n){return function(){return n}}class TilesetLayer extends BaseGraphicLayer{constructor(e={}){const t={_0x5ec9f9:3170},i=_0x3a2b68;super(e),this.orginRotation={x:0,y:0,z:0},this[i(t._0x5ec9f9)]=new LngLatPoint,this._hasEdit=e.hasEdit??!![],this._marsOptions={}}get layer(){return this._tileset}get tileset(){return this._tileset}get[_0x3a2b68(4238)](){const e={_0x57eef0:3732,_0x2b0628:1513,_0x346e5f:2205,_0x221d43:3737},t=_0x3a2b68;return this.loadOk?(!this._tilesetMatrix&&(this[t(e._0x57eef0)]?this[t(e._0x2b0628)]=this._tileset[t(e._0x346e5f)].transform:this._tilesetMatrix=Cesium__namespace[t(e._0x221d43)].eastNorthUpToFixedFrame(this._tileset.boundingSphere.center)),this._tilesetMatrix):Cesium__namespace[t(2478)].ZERO}get inverseMatrix(){return this.loadOk?(!this._inverseMatrix&&(this._inverseMatrix=Cesium__namespace.Matrix4.inverse(this.modelMatrix,new Cesium__namespace.Matrix4)),this._inverseMatrix):Cesium__namespace.Matrix4.ZERO}get[_0x3a2b68(4184)](){return this.options.highlight}set highlight(e){this.options.highlight=e,e?this.bindHighlight(this.options.highlight):this.unbindHighlight()}get marsJzwStyle(){const e=_0x3a2b68;return this.options[e(4080)]}set[_0x3a2b68(4080)](e){this.options.marsJzwStyle=e,this._conventMarsOptions()}get style(){return this[_0x3a2b68(1941)].style}set style(e){const t={_0x396ebb:3152},i=_0x3a2b68;this.options.style=e,this._tileset&&(e instanceof Cesium__namespace.Cesium3DTileStyle?this._tileset.style=e:typeof e=="function"?this._tileset.style=new Cesium__namespace[i(t._0x396ebb)]({color:{evaluateColor:function(s,r){const o=e(s);return o?Cesium__namespace.Color.clone(Cesium__namespace.Color.fromCssColorString(o),r):r}}}):this._tileset[i(2748)]=new Cesium__namespace.Cesium3DTileStyle(e))}get customShader(){return this.options.customShader}set customShader(e){const t=_0x3a2b68;this.options.customShader=e,this[t(1964)]&&(this._tileset.customShader=e)}get orginCenterPoint(){return this._orginCenterPoint}get orginCenterPosition(){return this._orginCenterPosition}get position(){return this._center.toCartesian()}set position(e){this.center=e}get center(){return this._center}set center(e){const t=_0x3a2b68;this._center=LngLatPoint[t(738)](e),this.updateMatrix()}get[_0x3a2b68(4241)](){return this.alt}set height(e){this.alt=e}get alt(){if(this[_0x3a2b68({_0x2e28d5:3747}._0x2e28d5)])return this.center.alt}set alt(e){const t={_0xe88a2d:3673},i=_0x3a2b68;this._tileset&&(this.center.alt=e,this[i(t._0xe88a2d)]())}get boundingSphere(){const e={_0x437eb7:2057},t=_0x3a2b68;var i;return(i=this._tileset)===null||i===void 0?void 0:i[t(e._0x437eb7)]}get upAxis(){const e={_0x362824:1964,_0x26fa1d:665},t=_0x3a2b68;var i,s;if(Cesium__namespace[t(407)]((i=this._tileset)===null||i===void 0?void 0:i._modelUpAxis)){var r;return(r=this._tileset)===null||r===void 0?void 0:r[t(3904)]}if(Cesium__namespace.defined((s=this[t(e._0x362824)])===null||s===void 0?void 0:s._gltfUpAxis)){var o;return(o=this._tileset)===null||o===void 0?void 0:o[t(e._0x26fa1d)]}}get[_0x3a2b68(1344)](){const e={_0x54e77d:1344},t=_0x3a2b68;return this.options[t(e._0x54e77d)]?this.options.rotation:this.orginRotation}set rotation(e){this.options.rotation=e,this.updateMatrix()}get rotation_x(){const e={_0x118d54:1941,_0x558207:1344,_0x452437:1777},t=_0x3a2b68;return this[t(e._0x118d54)][t(e._0x558207)]&&Cesium__namespace.defined(this[t(1941)].rotation.x)?this[t(1941)].rotation.x:this[t(e._0x452437)].x}set[_0x3a2b68(3302)](e){const t={_0x4959d5:1344},i=_0x3a2b68;this.options[i(1344)]=this[i(1941)][i(t._0x4959d5)]||{},this.options.rotation.x=e,this.updateMatrix()}get[_0x3a2b68(3546)](){const e=_0x3a2b68;return this[e(1941)].rotation&&Cesium__namespace.defined(this[e(1941)].rotation.y)?this.options[e(1344)].y:this.orginRotation.y}set rotation_y(e){const t={_0x239460:1941},i=_0x3a2b68;this.options.rotation=this[i(t._0x239460)].rotation||{},this.options.rotation.y=e,this.updateMatrix()}get[_0x3a2b68(3038)](){const e={_0x5afc6a:1941,_0x2a960a:1344},t=_0x3a2b68;return this[t(e._0x5afc6a)][t(e._0x2a960a)]&&Cesium__namespace[t(407)](this.options.rotation.z)?this.options.rotation.z:this.orginRotation.z}set rotation_z(e){const t={_0x3be8cf:1344},i=_0x3a2b68;this.options.rotation=this.options.rotation||{},this.options[i(t._0x3be8cf)].z=e,this[i(3673)]()}get axis(){return this[_0x3a2b68({_0xa5cfb6:1941}._0xa5cfb6)].axis||""}set axis(e){const t={_0x14688c:1941},i=_0x3a2b68;this[i(t._0x14688c)].axis=e,this[i(3673)]()}get scale(){const e=_0x3a2b68;return this[e(1941)][e(826)]||1}set scale(e){const t=_0x3a2b68;this.options[t(826)]=e,this.updateMatrix()}get allowDrillPick(){const e=_0x3a2b68;return this.options[e(1244)]}set allowDrillPick(e){const t={_0x337d8e:1941},i=_0x3a2b68;this[i(t._0x337d8e)].allowDrillPick=e}get[_0x3a2b68(3098)](){return this.options.luminanceAtZenith}set[_0x3a2b68(3098)](e){const t={_0x4de79e:1964,_0x12fd27:3098},i=_0x3a2b68;this.options.luminanceAtZenith=e,!this._tileset.imageBasedLighting&&(this._tileset.imageBasedLighting=new Cesium__namespace.ImageBasedLighting({luminanceAtZenith:e})),this[i(t._0x4de79e)].imageBasedLighting[i(t._0x12fd27)]=e}get[_0x3a2b68(3504)](){const e={_0xfe32f9:1325},t=_0x3a2b68;return this._map&&!this._tilesetPlanClip&&this._initTilesetPlanClip(),this[t(e._0xfe32f9)]}get hasEdit(){return this[_0x3a2b68(611)]&&this.transform}set hasEdit(e){this._hasEdit=e}_initTilesetPlanClip(){const e={_0x1a5903:1325},t=_0x3a2b68;this._tilesetPlanClip&&this[t(e._0x1a5903)].destroy(),this[t(e._0x1a5903)]=new TilesetPlanClip({...this.options.planClip,layer:this}),this._map.addThing(this._tilesetPlanClip)}get clip(){const e={_0x4cea1a:1839},t=_0x3a2b68;return this._map&&!this._tilesetClip&&(this.reload(),this[t(e._0x4cea1a)]()),this._tilesetClip}_initTilesetClip(){const e={_0x1feb9d:1941},t=_0x3a2b68;this._tilesetClip&&this._tilesetClip.destroy(),this._tilesetClip=new TilesetClip({...this[t(e._0x1feb9d)].clip,layer:this}),this[t(1575)].addThing(this._tilesetClip)}get[_0x3a2b68(359)](){const e={_0x4e0e3f:2084},t=_0x3a2b68;return this._map&&!this[t(1057)]&&(this.reload(),this[t(e._0x4e0e3f)]()),this._tilesetFlat}[_0x3a2b68(2084)](){const e={_0x5da417:1057,_0x3127b6:1057},t=_0x3a2b68;this[t(e._0x5da417)]&&this._tilesetFlat.destroy(),this[t(e._0x3127b6)]=new TilesetFlat({...this.options.flat,layer:this}),this._map.addThing(this[t(1057)])}get flood(){const e=_0x3a2b68;return this._map&&!this._tilesetFlood&&(this[e(2128)](),this[e(3032)]()),this._tilesetFlood}_initTilesetFlood(){this._tilesetFlood&&this._tilesetFlood.destroy(),this._tilesetFlood=new TilesetFlood({...this.options.flood,layer:this}),this._map.addThing(this._tilesetFlood)}get isEditing(){return this[_0x3a2b68({_0x4ba7ce:1671}._0x4ba7ce)]}async[_0x3a2b68(2584)](){const e={_0x10934f:4313},t=_0x3a2b68,i={...this.options,marsOptions:this[t(501)]};return delete i.url,await Cesium__namespace.Cesium3DTileset[t(e._0x10934f)](getUrlResource(this.options),i)}_addedHook(){const e={_0x597020:2084,_0x92a80c:694,_0x14dd07:400,_0x5c4cfe:3032,_0x5184bc:1839,_0x47746c:575},t=_0x3a2b68;var i,s,r,o,c,_,l,d,f,g,b,C;this[t(4324)]=![],super._addedHook(),this._conventMarsOptions(),(((i=this[t(1941)][t(359)])===null||i===void 0||(s=i.area)===null||s===void 0?void 0:s.length)>0||(r=this.options.flat)!==null&&r!==void 0&&r.enabled)&&this[t(e._0x597020)](),(((o=this.options[t(e._0x92a80c)])===null||o===void 0||(c=o.area)===null||c===void 0?void 0:c[t(e._0x14dd07)])>0||(_=this.options.flood)!==null&&_!==void 0&&_.enabled)&&this[t(e._0x5c4cfe)](),(((l=this.options[t(2069)])===null||l===void 0||(d=l.area)===null||d===void 0?void 0:d[t(400)])>0||(f=this.options.clip)!==null&&f!==void 0&&f.enabled)&&this[t(e._0x5184bc)](),(((g=this.options.planClip)===null||g===void 0||(b=g.positions)===null||b===void 0?void 0:b.length)>0||(C=this.options.planClip)!==null&&C!==void 0&&C[t(3174)])&&this[t(e._0x47746c)](),this._createCesium3DTileset()[t(4389)](P=>{const S=t;this.fire(EventType.loadBefore,{tileset:P}),this._initModel(P),this.loadOk=!![],this[S(1900)][S(583)](this),this.fire(EventType[S(432)],{tileset:P})})}_removedHook(){const e={_0x529af2:1575,_0x418fde:1575,_0x1170e0:3029,_0x4c5221:518},t=_0x3a2b68;this._tilesetClip&&(this[t(e._0x529af2)].removeThing(this._tilesetClip,!![]),delete this._tilesetClip),this._tilesetFlat&&(this._map[t(625)](this._tilesetFlat,!![]),delete this._tilesetFlat),this._tilesetFlood&&(this[t(e._0x418fde)].removeThing(this._tilesetFlood,!![]),delete this._tilesetFlood),this._tilesetPlanClip&&(this._map[t(625)](this._tilesetPlanClip,!![]),delete this._tilesetPlanClip),super._removedHook(),Cesium__namespace.defined(this.options[t(e._0x1170e0)])&&this[t(1575)][t(2971)](EventType[t(e._0x4c5221)],this[t(1238)],this),this._tileset&&(this[t(1575)][t(744)].primitives[t(1361)](this._tileset),delete this._tileset)}reload(){const e={_0x18e7d7:1900},t=_0x3a2b68;this[t(e._0x18e7d7)]=Cesium__namespace.defer(),this._removedHook(),this._addedHook()}_mergePostion(e){const t={_0x46c2ae:671,_0x31fe49:1879,_0x35a218:1879},i=_0x3a2b68;e&&((Array.isArray(e)||isString(e))&&(e=LngLatPoint.parse(e)),!this._center&&(this._center=new LngLatPoint),e.lat&&(this.center[i(t._0x46c2ae)]=e.lat),e.lng&&(this[i(3747)].lng=e.lng),Cesium__namespace.defined(e.alt_offset)&&(this.center[i(t._0x31fe49)]=this._orginCenterPoint.alt+e.alt_offset),Cesium__namespace.defined(e.alt)&&(this.center[i(t._0x35a218)]=e.alt))}_setOptionsHook(e,t){const i={_0x45c7ad:1018,_0x4f3c40:4184,_0x559574:2365,_0x456e53:1289},s=_0x3a2b68;if(!this._tileset)return;let r;for(const _ in t){const l=e[_];switch(_){case"highlight":{var o,c;(o=this[s(i._0x45c7ad)])!==null&&o!==void 0&&o.event&&!((c=t[s(i._0x4f3c40)])!==null&&c!==void 0&&c.type)?this._highlight_mouseEventHandler(this._last_picked[s(i._0x559574)]):super._setOptionsHook(e,t);return}case"classificationType":case"chinaCRS":case"flat":case"flood":case"clip":case"planClip":{this.reload();return}case s(4076):case"rotation":case"scale":case"axis":r=!![];break;case"opacity":case"luminanceAtZenith":case"style":case"marsJzwStyle":case s(i._0x456e53):this[_]=l;break;default:{try{this[s(3466)][_]=l}catch{this.reload()}break}}}r&&(this[s(1335)](this.options.position),this.updateMatrix())}_initModel(e){const t={_0x3ad5fc:442,_0x312921:1964,_0x300c4e:2057,_0x3cc382:1964,_0x13ba82:1572,_0x2ab13a:2478,_0xa84bb3:1168,_0x3f83bd:2431,_0x2a7330:2806,_0x47fe34:3307,_0x11ebf9:3002,_0x2eec01:2933,_0x545196:1941,_0x223e8c:4286},i={_0x5dad0f:726},s=_0x3a2b68;var r,o;this[s(1964)]=e,this[s(1964)].name=this.name,this._tileset.show=this[s(t._0x3ad5fc)],this._tileset._mars3d_layerId=this.id,this._map[s(744)].primitives.add(this._tileset),this._tileset.initialTilesLoaded.addEventListener(_=>{const l=s;this.fire(EventType[l(i._0x5dad0f)],_)}),this._tileset.allTilesLoaded.addEventListener(_=>{this.fire(EventType.allTilesLoaded,_)}),this._orginCenterPosition=Cesium__namespace.clone(this[s(t._0x312921)][s(t._0x300c4e)][s(3747)]);const c=(r=this[s(t._0x3cc382)].root)===null||r===void 0?void 0:r.transform;if(this.transform=this.options[s(3732)]??!!(c&&!c.equals(Cesium__namespace.Matrix4.IDENTITY)),this.transform){this[s(t._0x13ba82)]=Cesium__namespace[s(2478)].inverse(Cesium__namespace[s(t._0x2ab13a)].fromArray(this._tileset._root.transform),new Cesium__namespace.Matrix4);const _=Cesium__namespace.Matrix4.fromArray(this._tileset._root.transform),l=Cesium__namespace.Matrix4.getTranslation(_,new Cesium__namespace.Cartesian3);if(Cesium__namespace.defined(l)&&Cesium__namespace.Cartographic[s(2101)](l)){this._orginCenterPosition=l;const d=Cesium__namespace.Matrix4.getMatrix3(_,new Cesium__namespace[s(1168)]),f=Cesium__namespace.Matrix4.getMatrix3(Cesium__namespace.Transforms[s(778)](l),new Cesium__namespace.Matrix3),g=Cesium__namespace.Matrix3.getColumn(f,0,new Cesium__namespace.Cartesian3),b=Cesium__namespace[s(1168)].getColumn(f,1,new Cesium__namespace.Cartesian3),C=Cesium__namespace[s(t._0xa84bb3)][s(2431)](f,2,new Cesium__namespace.Cartesian3);let P=Cesium__namespace.Matrix3[s(t._0x3f83bd)](d,0,new Cesium__namespace.Cartesian3);P=Cesium__namespace.Cartesian3.cross(P,C,P),P=Cesium__namespace[s(2978)].cross(C,P,P),P=Cesium__namespace.Cartesian3.normalize(P,P);let S=Cesium__namespace.Cartesian3.angleBetween(g,P);Cesium__namespace.Cartesian3.angleBetween(b,P)>Math.PI*.5&&(S=2*Math.PI-S),this[s(1777)]={x:0,y:0,z:Number(Cesium__namespace[s(t._0x2a7330)].toDegrees(S).toFixed(1))}}else this.transform=![]}if(this._orginCenterPoint=LngLatPoint.fromCartesian(this[s(1204)]),logInfo((this[s(t._0x47fe34)]||"TilesetLayer")+" 模型中心位置:"+this._orginCenterPoint.toString()),(o=Cesium__namespace[s(4045)])!==null&&o!==void 0&&o.getCache){const _=Cesium__namespace.Mars3DEx[s(t._0x11ebf9)](this.id);_!=null&&_[s(4080)]&&_[s(4080)].setUniform(s(t._0x2eec01),this.upAxis===Cesium__namespace.Axis.Z)}if(Cesium__namespace.defined(this.options.style)&&(this.style=this[s(t._0x545196)].style),this[s(3248)]!==1&&this.setOpacity(this.opacity),this[s(t._0x223e8c)]=this._orginCenterPoint.clone(),this._mergePostion(this[s(t._0x545196)].position),this.options.chinaCRS){const _=this.transformCenter(this.center);this._mergePostion(_)}this._hasUpdateMater()&&this.updateMatrix(),Cesium__namespace.defined(this.options.distanceDisplayCondition_far)&&this.bindVisibleDistance(),this.options.clampToGround&&this.clampToGround(),this.options.flyTo&&this.flyToByAnimationEnd()}clampToGround(e=1){const t=_0x3a2b68;this._map&&this[t(1575)].hasTerrain?getSurfaceTerrainHeight(this[t(1575)].scene,this._orginCenterPosition).then(i=>{const s=t;Cesium__namespace.defined(i.height)&&(this[s(1879)]=i.height-this._orginCenterPoint.alt+e)}):this.alt=-this._orginCenterPoint.alt+e}[_0x3a2b68(2232)](){const e={_0x1de37b:1344},t=_0x3a2b68;return this.center[t(494)](this._orginCenterPoint)?this.options[t(e._0x1de37b)]?!![]:this.options.scale>0&&this.options.scale!==1?!![]:Cesium__namespace[t(407)](this.options[t(4362)])?!![]:![]:!![]}updateMatrix(){const e={_0x59e2a1:3673,_0x3d4918:1941,_0x61885e:1964,_0x24d17a:3302,_0x2c537e:1185,_0x8aba66:2806,_0x3b44c4:2478,_0x21cd58:2478,_0x3beb45:3172,_0x82e608:4362,_0x2c2687:1124,_0x2552a5:2207,_0x53197c:3561,_0x4c4b12:3161,_0x54055d:1109,_0x2ff417:1560},t=_0x3a2b68;if(!this._tileset)return;if(this[t(1941)][t(e._0x59e2a1)]){const s=this[t(e._0x3d4918)].updateMatrix(this.position,this);return this[t(e._0x61885e)].modelMatrix=s,s}if(!this.transform)return this.updateMatrix2();let i=Cesium__namespace.Transforms.eastNorthUpToFixedFrame(this[t(4076)]);if(this.options[t(1344)]){const s=Cesium__namespace.Matrix3.fromRotationX(Cesium__namespace[t(2806)].toRadians(this[t(e._0x24d17a)])),r=Cesium__namespace.Matrix3.fromRotationY(Cesium__namespace.Math[t(e._0x2c537e)](this.rotation_y)),o=Cesium__namespace.Matrix3[t(2997)](Cesium__namespace[t(e._0x8aba66)].toRadians(360-this[t(3038)])),c=Cesium__namespace.Matrix4.fromRotationTranslation(s),_=Cesium__namespace[t(2478)].fromRotationTranslation(r),l=Cesium__namespace[t(e._0x3b44c4)].fromRotationTranslation(o);Cesium__namespace.Matrix4[t(1144)](i,c,i),Cesium__namespace[t(e._0x21cd58)].multiply(i,_,i),Cesium__namespace.Matrix4.multiply(i,l,i)}if(this.options.scale>0&&this.options[t(826)]!==1&&Cesium__namespace.Matrix4[t(e._0x3beb45)](i,this.options.scale,i),Cesium__namespace.defined(this.options.axis)){let s;if(isString(this[t(1941)][t(e._0x82e608)]))switch(this.options.axis.toUpperCase()){case"Y_UP_TO_Z_UP":s=Cesium__namespace.Axis.Y_UP_TO_Z_UP;break;case"Z_UP_TO_Y_UP":s=Cesium__namespace.Axis[t(e._0x2c2687)];break;case"X_UP_TO_Z_UP":s=Cesium__namespace.Axis.X_UP_TO_Z_UP;break;case"Z_UP_TO_X_UP":s=Cesium__namespace.Axis.Z_UP_TO_X_UP;break;case"X_UP_TO_Y_UP":s=Cesium__namespace[t(e._0x2552a5)][t(e._0x53197c)];break;case t(e._0x4c4b12):s=Cesium__namespace.Axis.Y_UP_TO_X_UP;break}else this[t(e._0x3d4918)].axis instanceof Cesium__namespace.Axis&&(s=this.options[t(e._0x82e608)]);s&&(i=Cesium__namespace.Matrix4.multiplyTransformation(i,s,i))}return this._tileset._root.transform=i,this[t(e._0x54055d)](EventType[t(e._0x2ff417)],{position:this[t(4076)]}),i}[_0x3a2b68(2208)](){const e={_0x55d7e3:2057,_0x411294:4076,_0x3583ab:1964},t=_0x3a2b68;if(!this._tileset||!this._tileset._root)return;const i=Cesium__namespace.Cartographic.fromCartesian(this[t(1964)][t(e._0x55d7e3)][t(3747)]),s=Cesium__namespace.Cartesian3[t(1339)](i.longitude,i.latitude,0),r=this[t(e._0x411294)],o=Cesium__namespace[t(2978)][t(3420)](r,s,new Cesium__namespace.Cartesian3),c=Cesium__namespace.Matrix4.fromTranslation(o);return this[t(e._0x3583ab)][t(4238)]=c,this.fire(EventType[t(1560)],{position:this.position}),c}getPositionByOrginMatrix(e){const t={_0x5f0a53:1964,_0x1276e1:1572,_0x4b198b:2478},i=_0x3a2b68;if(this.orginMatrix){const s=Cesium__namespace.Matrix4[i(1144)](this[i(t._0x5f0a53)]._root.transform,this[i(t._0x1276e1)],new Cesium__namespace[i(t._0x4b198b)]);return Cesium__namespace[i(2478)].multiplyByPoint(s,e,new Cesium__namespace.Cartesian3)}return e}setOpacity(e){const t={_0x2ac37e:3833,_0x377340:3248},i=_0x3a2b68;this.options.onSetOpacity?this.options[i(t._0x2ac37e)](e):this._tileset&&(this.options[i(t._0x377340)]=e,this[i(1964)].style=new Cesium__namespace.Cesium3DTileStyle({color:"color() *vec4(1,1,1,"+e+")"}))}flyTo(e={}){const t={_0x439c43:2268,_0x35a5b5:3970,_0x26109d:1941},i={_0x4dffb7:2057},s=_0x3a2b68;return this[s(1575)]?(this._map[s(t._0x439c43)](),this.options.flyToOptions&&(e={...this[s(1941)].flyToOptions,...e}),this.options.center?this._map[s(3006)](this.options.center,e):this.options.extent?this._map[s(t._0x35a5b5)](this[s(t._0x26109d)].extent,e):this.loadOk&&this._tileset._root?this._map.flyToPoint(this._tileset[s(2057)].center,{radius:this[s(1964)].boundingSphere.radius*2,maxPitch:-45,...e}):this.readyPromise.then(r=>{const o=s;return this._map.flyToPoint(this._tileset.boundingSphere.center,{radius:this._tileset[o(i._0x4dffb7)][o(3878)]*2,maxPitch:-45,...e})})):Promise.resolve(![])}[_0x3a2b68(4182)](e){const t={_0x476485:3747,_0x4c8eab:1325,_0x5eb9e2:2099,_0x493b64:1909},i=_0x3a2b68;!this._tileset||!this.loadOk||(e.position=this[i(t._0x476485)].toArray(),this._tilesetPlanClip&&(e.planClip=this[i(t._0x4c8eab)][i(1909)]()),this._tilesetClip&&(e.clip=this[i(t._0x5eb9e2)].toJSON()),this._tilesetFlat&&(e.flat=this._tilesetFlat.toJSON()),this._tilesetFlood&&(e.flood=this._tilesetFlood[i(t._0x493b64)]()))}transformCenter(e){const t={_0x5d16d1:919,_0x202a22:671},i=_0x3a2b68;if(!e)return![];const s=this._map[i(t._0x5d16d1)],r=this.options[i(919)],o=getTransFun(r,s);if(!o)return![];const c=o([e.lng,e[i(t._0x202a22)]]);return{lng:c[0],lat:c[1],alt:e.alt}}bindVisibleDistance(){const e={_0x59b2b1:518},t=_0x3a2b68;this._map.on(EventType[t(e._0x59b2b1)],this.updateVisibleDistance,this)}[_0x3a2b68(1238)](){const e={_0x424f4b:4233},t=_0x3a2b68;if(!this._show||!this._tileset||!this[t(4324)]||this._map.scene.mode!==Cesium__namespace[t(3915)].SCENE3D)return;const i=Cesium__namespace.Cartesian3[t(3481)](this.position,this[t(1575)][t(e._0x424f4b)].positionWC);this._tileset[t(442)]=i<this.options[t(3029)]}_highlight_mouseEventHandler(e){const t={_0x3b3fd4:2962,_0x14867a:3519},i=_0x3a2b68;this._map[i(t._0x3b3fd4)]();const s=e[i(t._0x14867a)];if(s||this._highlightOptions.all){if(isFunction(this._highlightOptions.filter)&&this._highlightOptions.filter(e)===![])return;const r=this.allowDrillPick;if(isFunction(r)&&r(e)===!![])return;this._last_picked={feature:s,event:e},this._map.openHighlight(this,this._highlightOptions,e)}else this[i(1575)][i(2962)]()}openHighlight(e,t=!![],i){const s={_0x29aaac:1018,_0x14e6ac:2957,_0x210ac6:1304,_0x100b38:847,_0x56277a:413,_0x25ef1c:1964,_0x5b2425:3152,_0x307bc0:1964},r=_0x3a2b68;t&&(this._map.closeHighlight(),this._map.last_highlighGraphic=this),this._last_picked=this[r(s._0x29aaac)]||{event:{layer:this}},i&&(this._last_picked.feature=i);const o=e||this[r(3017)];if(o){var c,_;if((c=this._last_picked)!==null&&c!==void 0&&c[r(1745)]&&!o.all&&!o[r(413)]){var l;const f=this._last_picked.feature;if(f!=null&&f.color&&o.color)if(this._last_picked[r(3290)]=f.color[r(s._0x14e6ac)](),isFunction(o.color)){var d;f.color=getCesiumColor(o.color((d=this[r(1018)])===null||d===void 0?void 0:d.event))}else f.color=getColorByStyle(o);f!=null&&(l=f.content)!==null&&l!==void 0&&l._model&&o.model&&(this._last_picked.originalStyle=ModelStyleConver.toJSON(f.content[r(2121)]),ModelStyleConver[r(s._0x210ac6)](o[r(3992)],f.content[r(2121)],![]))}else{const f=Cesium__namespace.Color.fromCssColorString(o.color)[r(s._0x100b38)]();if(o[r(s._0x56277a)]){const g=this._last_picked.feature.getProperty(o.uniqueKey);this[r(s._0x25ef1c)][r(2748)]=new Cesium__namespace[r(s._0x5b2425)]({color:{conditions:[["${"+o.uniqueKey+"} ==='"+g+"'",f]]}})}else this[r(s._0x307bc0)].style=new Cesium__namespace.Cesium3DTileStyle({color:{conditions:[["true",f]]}});this[r(1665)]=!![]}this.fire(EventType.highlightOpen,(_=this._last_picked)===null||_===void 0?void 0:_.event,!![])}}[_0x3a2b68(2962)](){const e={_0x2e8ab5:1665,_0xde3f3d:1653,_0x2d17bd:1652},t=_0x3a2b68;var i,s;if(this._last_picked){if(this[t(e._0x2e8ab5)])this._highlightAll=![],this[t(1964)].style=this.style;else if((i=this._last_picked)!==null&&i!==void 0&&i.feature){var r;const o=this[t(1018)].feature;this[t(1018)][t(3290)]&&(o.color=this._last_picked[t(3290)]),o!=null&&(r=o[t(e._0xde3f3d)])!==null&&r!==void 0&&r._model&&this._last_picked.originalStyle&&ModelStyleConver.toCesiumVal(this._last_picked[t(e._0x2d17bd)],o[t(e._0xde3f3d)]._model,![])}this._map._clearLastHighlight(),this.fire(EventType.highlightClose,(s=this._last_picked)===null||s===void 0?void 0:s[t(2365)],!![]),delete this._last_picked}}hasPopup(){return this[_0x3a2b68(2876)]?!![]:![]}bindPopup(e,t){return this._popupConfig={content:e,options:t,layer:this},this._bindControl(),this}unbindPopup(){return this.closePopup(),this._popupConfig=null,this}[_0x3a2b68(2792)](){const e={_0x40cc5d:1575},t=_0x3a2b68;return this[t(e._0x40cc5d)]&&this.hasPopup()&&this[t(1575)].popup[t(4104)](null,this),this}_conventMarsOptions(){const e={_0x192576:2446,_0xe4d494:982,_0x511747:4080},t=_0x3a2b68;var i;if(!((i=Cesium__namespace.Mars3DEx)!==null&&i!==void 0&&i.getCacheOrAdd))return;this._marsOptions[t(e._0x192576)]=this.id;const s=Cesium__namespace.Mars3DEx.getCacheOrAdd(this.id);this.marsJzwStyle?s.marsJzwStyle=new Cesium__namespace.CustomShader({lightingModel:Cesium__namespace.LightingModel[t(717)],uniforms:{u_mars3d_jzw_upz:{type:Cesium__namespace[t(e._0xe4d494)].BOOL,value:!![]}},fragmentShaderText:isString(this.marsJzwStyle)?this[t(e._0x511747)]:JzwStyleFS}):delete s.marsJzwStyle}startEditing(){const e={_0x111513:3031},t=_0x3a2b68;if(this._enabledEdit||!this[t(e._0x111513)])return this;if(this._enabledEdit=!![],!this._map)throw new Error("编辑时_map不能为空,请将对象添加到Map");this._map.mouseEvent.noPickEntity=this._entity,this._map[t(1374)].enabledMoveTarget=![],!this.editing&&(this[t(770)]=new EditTileset(this)),this[t(770)].activate&&this.editing.activate()}stopEditing(){const e={_0x323f24:770,_0x12bc43:1575,_0x2efde8:952},t=_0x3a2b68;var i;if(!this._enabledEdit)return this;(i=this.editing)!==null&&i!==void 0&&i.disable&&this[t(e._0x323f24)].disable(),this[t(1575)]&&(this._map.closeSmallTooltip(),this._map.mouseEvent.noPickEntity=null,this[t(e._0x12bc43)].mouseEvent[t(e._0x2efde8)]=!![]),this._enabledEdit=![]}}register$2("tileset",TilesetLayer),register$2("3dtiles",TilesetLayer);class OsmBuildingsLayer extends TilesetLayer{async _createCesium3DTileset(){const e={_0x2a9fa3:1941},t=_0x3a2b68;return await Cesium__namespace.createOsmBuildingsAsync(this[t(e._0x2a9fa3)])}}register$2("osmBuildings",OsmBuildingsLayer);class I3SLayer extends BaseGraphicLayer{constructor(e={}){super(e),this._marsOptions={}}get layer(){return this._i3sProvider}get marsJzwStyle(){return this.options.marsJzwStyle}set marsJzwStyle(e){const t=_0x3a2b68;this.options[t(4080)]=e,this[t(4001)]()}get[_0x3a2b68(2326)](){const e={_0x3433fe:1084},t=_0x3a2b68,i=this[t(3299)][t(e._0x3433fe)];for(let s=0;s<i.length;s++){const r=i[s]._tileset;if(Cesium__namespace.defined(r))return r==null?void 0:r[t(3904)]}}eachTilesetLayer(e,t){const i={_0x369f75:400,_0x83331a:1964,_0x259713:4350},s=_0x3a2b68;if(!this._i3sProvider)return;const r=this._i3sProvider._layers;for(let o=0;o<r[s(i._0x369f75)];o++){const c=r[o][s(i._0x83331a)];Cesium__namespace.defined(c)&&e[s(i._0x259713)](t,c)}return this}async _createI3SDataProvider(){const e={_0x224ee9:1941,_0x341779:4313},t=_0x3a2b68;let i;this.options.geoidTiledTerrainProvider&&(this.options.geoidTiledTerrainProvider instanceof Cesium__namespace.ArcGISTiledElevationTerrainProvider?i=this.options.geoidTiledTerrainProvider:i=await Cesium__namespace[t(1280)].fromUrl(this[t(e._0x224ee9)].geoidTiledTerrainProvider[t(4023)],this[t(1941)][t(3626)])),this._marsOptions._mars3d_layerId=this.id;const s={...this[t(e._0x224ee9)],geoidTiledTerrainProvider:i,cesium3dTilesetOptions:{...this.options,marsOptions:this._marsOptions}};return delete s.url,await Cesium__namespace.I3SDataProvider[t(e._0x341779)](getUrlResource(this.options),s)}[_0x3a2b68(2679)](){const e={_0x3fcf70:2679,_0x5049f2:4001},t={_0xee4624:1900,_0x1aa948:583},i=_0x3a2b68;this[i(4324)]=![],super[i(e._0x3fcf70)](),this[i(e._0x5049f2)](),this._createI3SDataProvider().then(s=>{const r=i;this[r(1109)](EventType.loadBefore,{provider:s}),this._initModel(s),this.loadOk=!![],this[r(t._0xee4624)][r(t._0x1aa948)](this),this[r(1109)](EventType[r(432)],{provider:s,layers:s._layers})})}_removedHook(){const e={_0x11b3cf:3299,_0x3bec02:744},t=_0x3a2b68;super._removedHook(),this[t(e._0x11b3cf)]&&(this._map[t(e._0x3bec02)].primitives.remove(this[t(e._0x11b3cf)]),delete this._i3sProvider)}reload(){const e=_0x3a2b68;this._removedHook(),this[e(2679)]()}_initModel(e){const t={_0x36943a:3299,_0x26359c:889,_0x2c6ee4:3747,_0x5c0b6e:3170,_0x19346b:3170,_0x410da7:2330},i=_0x3a2b68;this._i3sProvider=e,this._i3sProvider._mars3d_layerId=this.id,this._i3sProvider.show=this.show,this[i(1575)][i(744)].primitives.add(this[i(t._0x36943a)]),this[i(t._0x26359c)]=this._i3sProvider.extent,this._orginCenterPoint=LngLatPoint.fromCartographic(Cesium__namespace[i(1983)][i(t._0x2c6ee4)](this._extent)),this._orginCenterPosition=this._orginCenterPoint.toCartesian(),logInfo((this[i(3307)]||i(3342))+" 模型中心位置:"+this[i(t._0x5c0b6e)][i(956)]()),this._center=this[i(t._0x19346b)].clone(),this.options.flyTo&&this[i(t._0x410da7)]()}flyTo(e={}){const t={_0x128393:3970},i=_0x3a2b68;if(!this._map)return Promise.resolve(![]);if(this._map.cancelFlyTo(),this.options.flyToOptions&&(e={...this.options.flyToOptions,...e}),this.options.center)return this._map.setCameraView(this.options.center,e);if(this.options.extent)return this._map[i(t._0x128393)](this.options.extent,e);if(this._center)return this[i(1575)].flyToPoint(this._center,{maxPitch:-45,...e})}[_0x3a2b68(4001)](){const e={_0x585cb7:4080,_0x33f6e5:3394},t=_0x3a2b68;var i;if(!((i=Cesium__namespace.Mars3DEx)!==null&&i!==void 0&&i.getCacheOrAdd))return;this._marsOptions.customShaders=this.id;const s=Cesium__namespace.Mars3DEx.getCacheOrAdd(this.id);this.marsJzwStyle?s[t(e._0x585cb7)]=new Cesium__namespace.CustomShader({lightingModel:Cesium__namespace.LightingModel.UNLIT,uniforms:{u_mars3d_jzw_upz:{type:Cesium__namespace[t(982)][t(e._0x33f6e5)],value:![]}},fragmentShaderText:isString(this[t(e._0x585cb7)])?this.marsJzwStyle:JzwStyleFS}):delete s.marsJzwStyle}}register$2("i3s",I3SLayer);class GraticuleProvider{constructor(e={}){const t={_0xa850d9:1967,_0x38f2b3:2913,_0x522d49:3674,_0x342e5b:679,_0x19ce87:4241},i={_0x2d062c:4116,_0x38bf80:1838},s={_0x1fb307:2806},r=_0x3a2b68;this.options=e,this._tilingScheme=e[r(1004)]||new Cesium__namespace.GeographicTilingScheme,this._tileWidth=e.tileWidth||256,this._tileHeight=e.tileHeight||256,this._sexagesimal=e[r(t._0xa850d9)]||![],this._scene=e.scene,this._ellipsoid=this._scene.globe.ellipsoid,this._labels=new Cesium__namespace.LabelCollection,this[r(t._0x38f2b3)].primitives[r(t._0x522d49)](this._labels),this._polylines=new Cesium__namespace.PolylineCollection,this._scene.primitives.add(this._polylines);const o=document.createElement(r(t._0x342e5b));o.width=256,o[r(t._0x19ce87)]=256,this._canvas=o;const c=e.steps||[.05,.1,.2,.5,1,2,5,10];this[r(4395)]=[],c.forEach(l=>{const d=r;this.steps[d(1754)](Cesium__namespace[d(s._0x1fb307)].toRadians(l))});const _=this;this._scene.camera.moveEnd.addEventListener(function(){const l=r;_[l(i._0x2d062c)]&&(_._polylines.removeAll(),_._labels.removeAll(),_._currentExtent=null,_._drawGrid(_[l(i._0x38bf80)]()))}),this._scene.imageryLayers.addImageryProvider(this),this._ready=!![]}get[_0x3a2b68(4023)](){}get proxy(){}get tileWidth(){return this._tileWidth}get[_0x3a2b68(669)](){return this._tileHeight}get maximumLevel(){return 18}get minimumLevel(){return 0}get tilingScheme(){return this._tilingScheme}get[_0x3a2b68(1531)](){return this[_0x3a2b68({_0xe9e6ab:3758}._0xe9e6ab)].rectangle}get tileDiscardPolicy(){}get errorEvent(){return this._errorEvent}get ready(){return this[_0x3a2b68({_0x6ef81c:2405}._0x6ef81c)]}get credit(){return this._credit}get hasAlphaChannel(){return!![]}[_0x3a2b68(1149)](e,t,i,s){const r={_0x5da3e3:2092,_0xfbf8f3:1408,_0x5b0099:1351,_0x65a1eb:4346,_0x5dc6b4:2228},o=_0x3a2b68,c=LabelStyleConver.toCesiumVal(this.options.labelStyle||{},{style:Cesium__namespace.LabelStyle.FILL_AND_OUTLINE,fillColor:Cesium__namespace[o(2092)][o(3465)],outlineColor:Cesium__namespace[o(r._0x5da3e3)].BLACK,outlineWidth:2,pixelOffset:s?new Cesium__namespace[o(3532)](5,15):new Cesium__namespace.Cartesian2(5,-30),eyeOffset:Cesium__namespace.Cartesian3.ZERO,horizontalOrigin:Cesium__namespace[o(2014)][o(r._0xfbf8f3)],verticalOrigin:Cesium__namespace[o(r._0x5b0099)].BOTTOM,scale:1});c.position=this[o(r._0x65a1eb)].cartographicToCartesian(new Cesium__namespace[o(r._0x5dc6b4)](e,t,10)),c.text=i,this._labels.add(c)}_drawGrid(e){const t={_0x551180:2764,_0x485655:962,_0x4783d5:2654,_0x6e78c6:802,_0x429d24:2654,_0x2febf3:2501,_0x4bbfa7:2501,_0x186cfa:1754,_0xe7f89b:2228,_0x4710c9:912,_0x140f30:1754},i=_0x3a2b68;if(this._currentExtent&&this[i(t._0x551180)].equals(e))return;this._currentExtent=e,this._polylines.removeAll(),this._labels.removeAll();let s,r=this.steps[0];for(s=0;s<this.steps[i(400)]&&r<e.width/10;s++)r=this.steps[s];let o=this.steps[0];for(s=0;s<this.steps.length&&o<e.height/10;s++)o=this.steps[s];let c=(e.west<0?Math.ceil(e.west/r):Math.floor(e.west/r))*r,_=(e.south<0?Math[i(4358)](e.south/o):Math.floor(e.south/o))*o,l=(e.east<0?Math.ceil(e[i(t._0x485655)]/o):Math[i(t._0x4783d5)](e.east/o))*o,d=(e[i(t._0x6e78c6)]<0?Math.ceil(e.north/r):Math[i(t._0x429d24)](e.north/r))*r;c=Math.max(c-2*r,-Math.PI),l=Math[i(t._0x2febf3)](l+2*r,Math.PI),_=Math[i(3198)](_-2*o,-Math.PI/2),d=Math[i(t._0x4bbfa7)](d+2*r,Math.PI/2),c>l&&(l+=Math.PI*2);const f=this._ellipsoid;let g,b;const C=Cesium__namespace[i(2806)].toRadians(1),P=r*.01,S=_+Math[i(t._0x429d24)]((d-_)/o/2)*o;for(b=c;b<l;b+=r){const E=[];for(g=_;g<d;g+=C)E[i(t._0x186cfa)](new Cesium__namespace[i(t._0xe7f89b)](b,g,10));E.push(new Cesium__namespace.Cartographic(b,d,10)),this._polylines.add(PolylineStyleConver.toCesiumVal(this.options.lineStyle||{},{positions:f[i(2948)](E),width:1}));let M=Cesium__namespace.Math.toDegrees(b);M>180&&(M=M-360),M!==-180&&this.makeLabel(b+P,S,this[i(t._0x4710c9)]?this._decToSex(M):M.toFixed(gridPrecision(r)),![])}const L=c+Math.floor((l-c)/r/2)*r;for(g=_;g<d;g+=o){const E=[];for(b=c;b<l;b+=C)E.push(new Cesium__namespace[i(2228)](b,g));E[i(t._0x140f30)](new Cesium__namespace.Cartographic(l,g)),this._polylines.add(PolylineStyleConver.toCesiumVal(this.options.lineStyle||{},{positions:f[i(2948)](E),width:1}));const M=Cesium__namespace[i(2806)][i(3501)](g);this.makeLabel(L,g,this._sexagesimal?this._decToSex(M):M[i(3265)](gridPrecision(o)),!![])}}requestImage(e,t,i){const s={_0x2accad:1838};return new Promise((r,o)=>{const c=_0x20dc;this[c(4116)]&&this._drawGrid(this[c(s._0x2accad)]()),r(this._canvas)})}setVisible(e){const t={_0x51627a:3485},i=_0x3a2b68;this._show=e,e?(this[i(2764)]=null,this._drawGrid(this._getExtentView())):(this[i(t._0x51627a)].removeAll(),this._labels[i(836)]())}isVisible(){return this[_0x3a2b68({_0x35a711:4116}._0x35a711)]}_decToSex(e){const t=_0x3a2b68;let i=Math.floor(e),s=((Math[t(2376)](e)-i)*60).toFixed(2);return s==="60.00"&&(i+=1,s="0.00"),[i,":",s].join("")}_getExtentView(){const e={_0x1c6685:517,_0x267500:4241,_0x402022:4346,_0x3ba67a:503},t=_0x3a2b68,i=this._scene.camera,s=this._scene.canvas;if(i.positionCartographic.height>1e7)return Cesium__namespace.Rectangle.MAX_VALUE;const r=[i.pickEllipsoid(new Cesium__namespace.Cartesian2(0,0),this._ellipsoid),i.pickEllipsoid(new Cesium__namespace.Cartesian2(s[t(e._0x1c6685)],0),this[t(4346)]),i.pickEllipsoid(new Cesium__namespace.Cartesian2(0,s.height),this._ellipsoid),i.pickEllipsoid(new Cesium__namespace[t(3532)](s.width,s[t(e._0x267500)]),this[t(4346)])];for(let o=0;o<4;o++)if(r[o]===void 0)return Cesium__namespace[t(1983)].MAX_VALUE;return Cesium__namespace.Rectangle.fromCartographicArray(this[t(e._0x402022)][t(e._0x3ba67a)](r))}}function gridPrecision(n){return n<.01?2:n<.1?1:(n<1,0)}class GraticuleLayer extends BaseLayer{get layer(){return this[_0x3a2b68({_0x1f6383:4257}._0x1f6383)]}_showHook(e){this[_0x3a2b68(4257)]&&this._graticuleProvider.setVisible(e)}[_0x3a2b68(585)](){const e={_0x5f2731:744,_0x2fe7dd:1941},t=_0x3a2b68;this[t(4257)]=new GraticuleProvider({scene:this._map[t(e._0x5f2731)],...this[t(e._0x2fe7dd)]})}_addedHook(){const e=_0x3a2b68;this[e(4257)][e(1006)](this.show)}[_0x3a2b68(3916)](){this._graticuleProvider.setVisible(![])}}register$2("graticule",GraticuleLayer);class LodGraphicLayer extends GraphicLayer{constructor(e={}){const t={_0x28cd46:3739,_0xe78998:3739,_0x5b0989:1781,_0x341185:1458},i=_0x3a2b68;super(e),!isMars3DCesium&&logError$1("该功能需要引入mars3d修改版Cesium库(mars3d-cesium库)才支持!",this),this[i(1941)][i(t._0x28cd46)]=this[i(1941)][i(t._0xe78998)]||"id",this.options.debuggerTileInfo&&this[i(t._0x5b0989)](function(s){var r;return((s==null||(r=s.graphic)===null||r===void 0?void 0:r.gridList)||[]).join("<br/>")}),this._cacheGrid={},this[i(t._0x341185)]={}}get isLoading(){for(const e in this._cacheGrid){const t=this._cacheGrid[e];if(!(!t||!t.grid)&&t.isLoading)return!![]}return![]}_showHook(e){const t={_0x3d5496:883},i=_0x3a2b68;super[i(840)](e),this[i(t._0x3d5496)]&&(this[i(883)][i(442)]=e)}_mountedHook(){const e={_0x1b0cee:585,_0x3714c7:4023,_0x55db4:1603},t=_0x3a2b68;super[t(e._0x1b0cee)]();const i={...this.options,private:!![]};delete i.id,delete i.name,delete i[t(e._0x3714c7)],delete i[t(e._0x55db4)],this[t(883)]=new EmptyTileLayer(i),this._tileLayer.readyPromise[t(4389)](()=>{this[t(1900)].resolve(this)})}_addedHook(){const e={_0x4f5100:883,_0x1b3a27:3103,_0x3d6bd0:1575,_0x5554ce:2531,_0x3e29c2:2449},t=_0x3a2b68;super._addedHook(),this[t(e._0x4f5100)].on(EventType[t(e._0x1b3a27)],this[t(2518)],this),this._tileLayer.on(EventType.removeTile,this._tileLayer_removeTileHandler,this);const i=this._map;Promise[t(1588)]([new Promise((s,r)=>{const o={_0x269814:2744};function c(_){const l=_0x20dc;_===0&&(i.off(EventType[l(o._0x269814)],c),s(!![]))}i.on(EventType.tileLoadProgress,c)}),this[t(e._0x3d6bd0)][t(e._0x5554ce)][t(e._0x3e29c2)]]).then(s=>{const r=t;this._map.addLayer(this[r(883)])})}_removedHook(){const e={_0x5eeb11:2971},t=_0x3a2b68;super._removedHook(),this._tileLayer[t(e._0x5eeb11)](EventType.addTile,this._tileLayer_addTileHandler,this),this._tileLayer.off(EventType.removeTile,this._tileLayer_removeTileHandler,this),this._map.removeLayer(this._tileLayer),this.clear()}getGridKey(e){return e[_0x3a2b68({_0x25ddc0:1800}._0x25ddc0)]+"_x"+e.x+"_y"+e.y}checkHasBreak(e){return!this.show||!this._cacheGrid[e]?!![]:![]}_tileLayer_addTileHandler(e){const t={_0xeecb59:883},i=_0x3a2b68;if(!this[i(t._0xeecb59)].isInRange(e[i(1800)]))return;const s=this.getGridKey(e);e.key=s,this._cacheGrid[s]={grid:e,isLoading:!![]},this[i(2839)](e).then(r=>{this.show&&this._showData(r)})}_getItemDataId(e){const t={_0x48f69d:370,_0x5ef410:1941,_0x2f6257:3739,_0x5a6939:1941},i=_0x3a2b68;return e.id?e.id:(e.type===i(t._0x48f69d)&&(e=e.properties),e[this[i(t._0x5ef410)][i(t._0x2f6257)]]?e[this[i(t._0x5a6939)].IdField]:null)}_showData(e){const t={_0x326b51:1069,_0x9e05c3:1624,_0x409a8d:3304,_0x36159f:2166},i=_0x3a2b68,s=e[i(t._0x326b51)],r=e[i(t._0x9e05c3)];if(this[i(t._0x409a8d)][r])return;const o=[],c=[];for(let _=0,l=s[i(400)];_<l;_++){const d=s[_],f=this._getItemDataId(d);!f&&logWarn("LodGraphicLayer: 数据的ID识别失败",d);const g=this[i(1458)][f];if(g)g.gridList.push(r),this.updateGraphic(g,d);else{const b=this.createGraphic(e,d);if(!b)continue;b.gridList=[r],this._cacheGraphic[f]=b,c.push(b)}o[i(1754)](f)}this._cacheGrid[r]=this[i(2166)][r]||{},this[i(t._0x36159f)][r].ids=o,this[i(t._0x36159f)][r].isLoading=![],this.fire(EventType.update,{graphics:c})}_tileLayer_removeTileHandler(e){const t={_0x44ae8d:2941,_0xa67ef:1458},i=_0x3a2b68;if(this._tileLayer.isAllOutRange(e[i(1800)])){this.clear();return}const s=this.getGridKey(e),r=this._cacheGrid[s];if(r){if(r.ids)for(let o=0;o<r.ids.length;o++){const c=r.ids[o],_=this[i(1458)][c];_&&(removeArrayItem(_.gridList,s),_[i(t._0x44ae8d)].length===0&&(this.removeGraphic(_),delete this[i(t._0xa67ef)][c]))}delete this._cacheGrid[s]}}queryGridData(e){if(this[_0x3a2b68(1941)].queryGridData)return this.options.queryGridData(e)}[_0x3a2b68(2072)](e,t){const i={_0x5ea4ce:2072},s=_0x3a2b68;return this.options.createGraphic?this.options[s(i._0x5ea4ce)](e,t):null}updateGraphic(e,t){const i={_0x57fba0:2086,_0x49c0cd:2086},s=_0x3a2b68;this.options[s(i._0x57fba0)]&&this.options[s(i._0x49c0cd)](e,t)}[_0x3a2b68(2126)](e){const t=_0x3a2b68;super.clear(e),this[t(1458)]={},this._cacheGrid={}}[_0x3a2b68(2128)](){const e=_0x3a2b68;this.clear(!![]),this._tileLayer&&this._tileLayer[e(2128)]()}[_0x3a2b68(1651)](e,t){const i={_0x2a3c27:1603},s=_0x3a2b68;if(super._setOptionsHook(e,t),this[s(2126)](!![]),this._tileLayer){const r={...t,private:!![]};delete r.id,delete r.name,delete r.url,delete r[s(i._0x2a3c27)],this[s(883)].setOptions(r)}}_toJsonEx(e){}}register$2(_0x3a2b68(3684),LodGraphicLayer);class GeodePoiLayer extends LodGraphicLayer{constructor(e={}){const t={_0x11e3a9:3208,_0x314bc9:3462},i=_0x3a2b68;super(e),this._key_index=0,this._keys=this.options.key||gaodeArr,this[i(1781)](function(s){const r=i;var o;const c=s==null||(o=s.graphic)===null||o===void 0?void 0:o[r(t._0x11e3a9)];return c?r(855)+c.name+"</div><div>地址："+c.address+"</div><div>区域："+c[r(t._0x314bc9)]+c.cityname+c.adname+r(1343)+"<div>类别："+c.type+"</div>":void 0},{anchor:[0,-10]})}get key(){const e={_0x4e5579:499},t=_0x3a2b68,i=this[t(e._0x4e5579)]++%this._keys[t(400)];return this[t(966)][i]}queryGridData(e){const t={_0x5e7ed3:528,_0x378d35:4087,_0xab23c9:3021,_0x378291:1128,_0x50ec72:1131},i=_0x3a2b68,s=wgs2gcj([e.extent[i(t._0x5e7ed3)],e[i(4087)].ymax]),r=wgs2gcj([e[i(t._0x378d35)][i(4353)],e.extent.ymin]),o=s[0]+","+s[1]+"|"+r[0]+","+r[1],c=this.options.filter||{};return c.output="json",c[i(1624)]=this.key,c.polygon=o,!c[i(t._0xab23c9)]&&(c.offset=25),!c.types&&(c[i(t._0x378291)]=i(t._0x50ec72)),new Promise((_,l)=>{fetchJson({url:"https://restapi.amap.com/v3/place/polygon",...this.options,queryParameters:c,proxy:this._proxy}).then(d=>{const f=_0x20dc;if(d.infocode!==f(3061)){logError$1("POI 请求失败",d),e.list=[],_(e);return}e.list=d[f(2278)],_(e)})})}createGraphic(e,t){const i={_0x152c50:3174,_0x3bfc78:1941},s=_0x3a2b68;var r;let o=t[s(2934)].split(",");o=gcj2wgs(o);const c=getSymbolStyle(this[s(1941)].symbol,t);c[s(3542)]=c.clampToGround??!![];let _;return(r=this.options.clustering)!==null&&r!==void 0&&r[s(i._0x152c50)]?c.image?_=new BillboardEntity({position:[o[0],o[1],this.options.height||0],style:c,attr:t}):_=new PointEntity({position:[o[0],o[1],this[s(i._0x3bfc78)].height||0],style:c,attr:t}):c.image?_=new BillboardPrimitive({position:[o[0],o[1],this.options.height||0],style:c,attr:t}):_=new PointPrimitive({position:[o[0],o[1],this.options.height||0],style:c,attr:t}),this.addGraphic(_),_}}register$2("gaodePOI",GeodePoiLayer);class WfsLayer extends LodGraphicLayer{[_0x3a2b68(585)](){const e={_0x104e7d:1941},t=_0x3a2b68;this.options.geometryName=this.options[t(2295)]||"the_geom",super._mountedHook(),Cesium__namespace.defaultValue(this[t(e._0x104e7d)][t(3200)],!![])&&this.getMetadata(),this.fire(EventType[t(432)])}[_0x3a2b68(3749)](){const e={_0x42c7b7:3424},t=_0x3a2b68,i={service:"WFS",request:"GetCapabilities",version:"1.0.0"};let s=this.options.url;this.options[t(e._0x42c7b7)]&&(s=template(s,this.options[t(3424)])),Cesium__namespace.Resource.fetchXML({...this.options,url:s,queryParameters:i,proxy:this._proxy}).then(r=>{const o=t;if(!(!r||this[o(874)])){this[o(4103)]=r;try{this[o(4310)](r)}catch(c){logInfo("解析GetCapabilities出错",c)}this.fire(EventType.loadConfig,{capabilities:r})}}).catch(r=>{logInfo("wfs请求GetCapabilities出错",r)})}_initByMetaData(e){const t={_0x4355b1:1941,_0x805cf4:2616,_0x10fdb1:941,_0x157e91:4353,_0x50f256:941},i=_0x3a2b68,s=this._readChildNode(e,i(1562));if(!s)return;const r=this._readNode(s,"FeatureType");if(r)for(let o=0,c=r.length;o<c;o++){const _=r[o];if(this._readChildNodeVal(_,"Name")===this.options.layer){const d=this._readChildNodeVal(_,"SRS");!this.options.crs&&d&&(this[i(t._0x4355b1)].crs=d);const f=this._readChildNode(_,i(t._0x805cf4));if(!this.options.rectangle&&f){const g=Number(f.getAttribute("minx")),b=Number(f[i(3306)](i(2703))),C=Number(f.getAttribute("maxx")),P=Number(f[i(3306)]("maxy"));let S={xmin:g,ymin:b,xmax:C,ymax:P};if(this[i(t._0x4355b1)].crs!==CRS.EPSG4326&&this.options.crs!==CRS.EPSG4490){const L=proj4Trans([S.xmin,S[i(t._0x10fdb1)]],this.options.crs),E=proj4Trans([S[i(t._0x157e91)],S.ymax],this.options.crs);S={xmin:L[0],ymin:L[1],xmax:E[0],ymax:E[1]}}this.options.extent=S,this._rectangle=Cesium__namespace.Rectangle.fromDegrees(S.xmin,S[i(t._0x50f256)],S.xmax,S.ymax),this._tileLayer&&(this._tileLayer.rectangle=this._rectangle),this.options[i(2961)]&&this.flyToByAnimationEnd()}break}}}_readNode(e,t){if(!e)return null;let i=e.getElementsByTagName(t);return(!i||i.length===0)&&(i=e.getElementsByTagName("wfs:"+t)),i}[_0x3a2b68(2029)](e,t){const i={_0xbb5b79:400},s=_0x3a2b68;if(!e)return null;const r=this._readNode(e,t);return r[s(i._0xbb5b79)]>0?r[0]:null}[_0x3a2b68(2399)](e,t){const i={_0x2e1859:416},s=_0x3a2b68;var r,o;if(!e)return null;let c=this._readChildNode(e,t);return!c&&(c=this._readChildNode(e,"wfs:"+t)),(r=c)!==null&&r!==void 0&&r.innerHTML?c[s(i._0x2e1859)]:(o=c)!==null&&o!==void 0&&o.getInnerHTML?c.getInnerHTML():null}[_0x3a2b68(2839)](e){const t={_0x596e82:1941,_0x36c989:3663,_0x462192:4281,_0x1264cb:2295},i={_0x50f597:2023},s={_0x2a3011:1069},r=_0x3a2b68;let o;if(this.options.crs!==CRS[r(1193)]&&this[r(t._0x596e82)].crs!==CRS.EPSG4490){const l=proj4Trans([e.extent[r(528)],e.extent[r(941)]],r(929),this[r(t._0x596e82)].crs),d=proj4Trans([e.extent.xmax,e.extent.ymax],"EPSG:4326",this[r(1941)][r(t._0x36c989)]);o=l[0]+","+l[1]+","+d[0]+","+d[1]}else o=e.extent.xmin+","+e.extent.ymin+","+e[r(4087)][r(4353)]+","+e.extent[r(2269)];const c={service:"WFS",request:"GetFeature",typeName:this[r(1941)].layer||this[r(1941)].typeName,version:"1.0.0",outputFormat:"application/json",srsName:this[r(1941)].crs||"EPSG:4326",bbox:o};if(Cesium__namespace.defined(this.options.parameters))for(const l in this.options[r(t._0x462192)])l.toLowerCase()==="cql_filter"?(delete c[r(3474)],c[l]=this.options.parameters[l]+" and BBOX("+this[r(1941)][r(t._0x1264cb)]+", "+o+")"):c[l]=this.options.parameters[l];let _=this.options[r(4023)];return this.options.templateValues&&(_=template(_,this.options.templateValues)),new Promise((l,d)=>{const f=r;fetchJson({...this.options,url:_,queryParameters:c,proxy:this[f(i._0x50f597)]}).then(g=>{const b=f;if(e.list=[],!this._show||!this[b(2166)][e.key]){l(e);return}if(g===void 0||g==null){l(e);return}g.type==="Feature"&&(g={type:"FeatureCollection",features:[g]}),e[b(s._0x2a3011)]=g.features,l(e)})[f(3596)](g=>{logError$1(f(2724),g)})})}[_0x3a2b68(2072)](e,t){const i=this.loadGeoJSON(t,{clear:![],flyTo:![]});return(i==null?void 0:i.length)>0?i[0]:null}}register$2("wfs",WfsLayer);class ArcGisWfsLayer extends LodGraphicLayer{_mountedHook(){super._mountedHook(),this.getMetadata()}[_0x3a2b68(3749)](){const e={_0x2e3cd0:4023,_0x4276ff:2864,_0x234ba1:1941},t={_0x474505:1109},i=_0x3a2b68;let s=this.options[i(e._0x2e3cd0)];this.options[i(e._0x4276ff)]&&this.options[i(2864)].length>0&&(s+="/"+this.options.layers[0]);const r={f:"json"};this[i(e._0x234ba1)][i(4207)]&&(r[i(4207)]=this.options[i(4207)]),sendAjax({...this[i(1941)],url:s,queryParameters:r,proxy:this._proxy}).then(o=>{const c=i;!o||this.isDestroy||(this[c(4310)](o),this[c(t._0x474505)](EventType.loadConfig,o))})[i(3596)](o=>{logInfo("wfs请求getMetadata出错",o)})}_initByMetaData(e){const t={_0x1caa14:1531,_0x488d45:2388,_0x1d6384:1193,_0x2c5e21:941,_0x522f2a:2269,_0x80806d:1983},i=_0x3a2b68;this.metaData=e;let s=e.fullExtent||e.extent;if(!this.options[i(t._0x1caa14)]&&s){var r,o;const c=((r=s)===null||r===void 0||(o=r.spatialReference)===null||o===void 0?void 0:o.wkid)||this.options.wkid;if(c&&!this.options.wkid&&(this.options[i(t._0x488d45)]=c),this.options.wkid){const _="EPSG:"+this.options.wkid;if(_!==CRS[i(t._0x1d6384)]&&_!==CRS.EPSG4490){const l=proj4Trans([s.xmin,s[i(t._0x2c5e21)]],_),d=proj4Trans([s.xmax,s[i(t._0x522f2a)]],_);s={xmin:l[0],ymin:l[1],xmax:d[0],ymax:d[1]}}this.options.extent=s,this._rectangle=Cesium__namespace[i(t._0x80806d)].fromDegrees(s.xmin,s[i(t._0x2c5e21)],s.xmax,s[i(2269)]),this._tileLayer&&(this[i(883)].rectangle=this._rectangle),this[i(1941)].flyTo&&this.flyToByAnimationEnd()}}}queryGridData(e){const t={_0x6410b2:1941,_0x4821ea:4087,_0x22a01d:4353},i=_0x3a2b68;let s=this[i(t._0x6410b2)].url;this.options.layers&&this.options.layers.length>0&&(s+="/"+this.options.layers[0]);const r={f:this.options.f||"json",inSr:4326,outSR:4326,outFields:"*",returnGeometry:!![],where:this.options.where||i(995),geometry:JSON.stringify({xmin:e.extent.xmin,ymin:e.extent.ymin,xmax:e[i(t._0x4821ea)][i(t._0x22a01d)],ymax:e.extent.ymax,spatialReference:{wkid:4326}}),geometryType:i(2939),spatialRel:"esriSpatialRelIntersects"};return this.options.token&&(r.token=this.options[i(4207)]),new Promise((o,c)=>{const _={_0x538051:1603,_0x463997:2332};sendAjax({...this.options,url:s+"/query",queryParameters:r,proxy:this._proxy}).then(l=>{const d=_0x20dc;if(e.list=[],!this.show||!this._cacheGrid[e.key]){o(e);return}if(l===void 0||l==null){o(e);return}let f=arcgisToGeoJSON$1(l);f[d(_._0x538051)]===d(370)&&(f={type:"FeatureCollection",features:[f]}),e.list=f[d(_._0x463997)],o(e)}).catch(l=>{logError$1(_0x20dc(4034),l)})})}[_0x3a2b68(2513)](e){const t={_0x57ee69:3211,_0x1d4086:4050,_0x4ad5f3:3307},i=_0x3a2b68;var s,r;if(e.id)return e.id;if(e.type==="Feature"&&(e=e[i(t._0x57ee69)]),e[this.options.IdField])return e[this.options.IdField];if(e.OBJECTID)return e.OBJECTID;if(e.objectid)return e.objectid;if(((s=this.metaData)===null||s===void 0||(r=s.fields)===null||r===void 0?void 0:r.length)>0){const o=this.metaData[i(t._0x1d4086)][0][i(t._0x4ad5f3)];if(e[o])return e[o]}return null}createGraphic(e,t){const i={_0x2e839b:2797},s=_0x3a2b68;if(this.options.createGraphic)return this.options.createGraphic(e,t);const r=this[s(i._0x2e839b)](t,{clear:![],flyTo:![]});return(r==null?void 0:r.length)>0?r[0]:null}[_0x3a2b68(3579)](e){const t={_0x3b0b36:1941},i=_0x3a2b68;this[i(t._0x3b0b36)].where=e,this.reload()}}register$2("arcgis_wfs",ArcGisWfsLayer);class ArcGisWfsSingleLayer extends GeoJsonLayer{[_0x3a2b68(432)](e={}){const t={_0x122a28:1941,_0x4662f5:1941,_0x134ee8:2406,_0x2542d0:4207,_0x4f86dc:4207,_0x1b8004:4389},i={_0x57196d:4034},s={_0x2041da:1109},r=_0x3a2b68;this[r(t._0x122a28)]={...this.options,...e};let o=this.options.url;this[r(1941)].layers&&this.options.layers.length>0&&(o+="/"+this.options.layers[0]);const c={f:"json",inSr:4326,outSR:4326,outFields:"*",returnGeometry:!![],where:this[r(t._0x4662f5)][r(t._0x134ee8)]||"1=1"};this[r(1941)][r(t._0x2542d0)]&&(c.token=this[r(t._0x122a28)][r(t._0x4f86dc)]),fetchJson({...this[r(1941)],url:o+"/query",queryParameters:c,proxy:this._proxy})[r(t._0x1b8004)](_=>{const l=r;if(!_){this[l(s._0x2041da)](EventType.load);return}const d=arcgisToGeoJSON$1(_);this._load_data(d)}).catch(_=>{logError$1(r(i._0x57196d),_)})}[_0x3a2b68(3579)](e){this.load({where:e})}}register$2("arcgis_wfs_single",ArcGisWfsSingleLayer);var index$4={__proto__:null,BaseLayer,GroupLayer,BaseTileLayer,BaseGraphicLayer,TerrainLayer,ArcGisCacheLayer,ArcGisTileLayer,ArcGisLayer,BaiduLayer,BingLayer,GaodeLayer,GeeLayer,GoogleLayer,ImageLayer,IonLayer,MapboxLayer,OsmLayer,TdtLayer,TencentLayer,TmsLayer,WmsLayer,WmtsLayer,XyzLayer,GridLayer,TileInfoLayer,EmptyTileLayer,CzmGeoJsonLayer,KmlLayer,CzmlLayer,GraphicLayer,GraphicGroupLayer,GeoJsonLayer,BusineDataLayer,TilesetLayer,OsmBuildingsLayer,I3SLayer,GraticuleLayer,LodGraphicLayer,GeodePoiLayer,WfsLayer,ArcGisWfsLayer,ArcGisWfsSingleLayer,register:register$2,create:create$2,createTerrainProvider,createImageryProvider:createImageryProvider$k};class Underground extends BaseThing{get translucency(){const e={_0x1a4ebd:1575,_0x63e1b:3885},t=_0x3a2b68;return this[t(e._0x1a4ebd)].scene[t(1462)][t(e._0x63e1b)]}get[_0x3a2b68(838)](){return this._alpha}set[_0x3a2b68(838)](e){const t={_0x18d95f:3885,_0x4e6302:885,_0x5e2b87:2801},i=_0x3a2b68;this._alpha=e,this[i(1575)]&&(this[i(t._0x18d95f)][i(t._0x4e6302)]=this[i(t._0x5e2b87)])}get color(){const e=_0x3a2b68;return this._map[e(744)].globe.undergroundColor}set color(e){const t=_0x3a2b68;this._map.scene[t(1462)].undergroundColor=e}get colorAlphaByDistance(){const e=_0x3a2b68;return this._map.scene.globe[e(814)]}set colorAlphaByDistance(e){const t={_0xe7d64a:1462},i=_0x3a2b68;this._map.scene[i(t._0xe7d64a)].undergroundColorAlphaByDistance=e}_enabledHook(e){const t={_0xaac0cc:1575,_0x436944:3174},i=_0x3a2b68;this[i(t._0xaac0cc)]&&(this._map.scene.globe.depthTestAgainstTerrain=e?!![]:this.depthTestOld,this._map.scene.screenSpaceCameraController.enableCollisionDetection=!e,this.translucency[i(t._0x436944)]=e)}_mountedHook(){const e={_0x4d35dd:3451,_0x4049d9:838},t=_0x3a2b68;this.translucency.frontFaceAlpha=1,this.translucency[t(e._0x4d35dd)]=0,this.alpha=this.options[t(e._0x4049d9)]??.5,this.color=this.options.color??Cesium__namespace.Color.BLACK}_addedHook(){const e={_0x13f84f:3589,_0x23fe6f:2957},t=_0x3a2b68;this[t(e._0x13f84f)]=Cesium__namespace[t(e._0x23fe6f)](this._map.scene.globe.depthTestAgainstTerrain),this._enabledHook(this.enabled)}_removedHook(){const e={_0x3d7b41:1575,_0x19c771:2677},t=_0x3a2b68;this[t(e._0x3d7b41)][t(744)].globe[t(e._0x19c771)]=this[t(3589)],this._enabledHook(![])}}class Sightline extends BaseThing{constructor(e={}){const t={_0x302199:2092},i=_0x3a2b68;super(e),this._visibleColor=e.visibleColor??new Cesium__namespace.Color(0,1,0,.5),this._hiddenColor=e[i(3560)]??new Cesium__namespace[i(t._0x302199)](1,0,0,.5),this._depthFailColor=e.depthFailColor,this.lines=[]}get visibleColor(){return this._visibleColor}set visibleColor(e){this._visibleColor=e}get hiddenColor(){return this._hiddenColor}set[_0x3a2b68(3560)](e){this._hiddenColor=e}get[_0x3a2b68(1478)](){return this._depthFailColor}set depthFailColor(e){const t=_0x3a2b68;this[t(1973)]=e}[_0x3a2b68(585)](){}[_0x3a2b68(2679)](){}[_0x3a2b68(3916)](){}add(e,t,i={}){const s={_0x245cbb:744,_0x2f4bf9:1085,_0x6f9d9a:3420,_0x356e6b:2978,_0x1d462b:1444,_0x28df62:407,_0x438b10:3481,_0x33c4b2:1109},r=_0x3a2b68;i.offsetHeight&&(e=addPositionsHeight(e,i[r(3367)])),this.fire(EventType.start),!this._map.scene.globe.depthTestAgainstTerrain&&(this[r(1575)][r(s._0x245cbb)][r(1462)].depthTestAgainstTerrain=!![],this.old_depthTestAgainstTerrain=this._map.scene.globe[r(2677)]),this._map.scene.requestRender();const o=Cesium__namespace.Cartesian3[r(s._0x2f4bf9)](Cesium__namespace.Cartesian3[r(s._0x6f9d9a)](t,e,new Cesium__namespace[r(s._0x356e6b)]),new Cesium__namespace.Cartesian3),c=new Cesium__namespace[r(3458)](e,o),_=this[r(1575)].scene[r(s._0x1d462b)](c,2,this[r(1257)]);if(Cesium__namespace[r(s._0x28df62)](_)&&_.length>0&&Cesium__namespace.defined(_[0])&&Cesium__namespace.defined(_[0].position)){const f=_[0].position,g=Cesium__namespace.Cartesian3[r(s._0x438b10)](e,t);if(Cesium__namespace.Cartesian3.distance(e,f)<g){const C=this[r(1589)](e,t,f),P={block:!![],position:f,entity:C};return this.fire(EventType.end,P),P}}const l=this._showPolyline(e,t),d={block:![],entity:l};return Cesium__namespace.defined(this.old_depthTestAgainstTerrain)&&(this._map.scene.globe.depthTestAgainstTerrain=this.old_depthTestAgainstTerrain,delete this.old_depthTestAgainstTerrain),this[r(s._0x33c4b2)](EventType.end,d),d}addAsync(e,t,i={}){const s={_0x25ebca:3384},r={_0x353b21:1575,_0x247eb3:4389},o={_0x119317:400,_0x22439e:4241,_0x161367:2602},c=_0x3a2b68;i.offsetHeight&&(e=addPositionsHeight(e,i[c(3367)]));const _=interLine([e,t],{splitNum:i[c(s._0x25ebca)]||50,minDistance:i.minDistance});return this.fire(EventType.start),new Promise((l,d)=>{const f=c;computeSurfacePoints({map:this[f(r._0x353b21)],positions:_})[f(r._0x247eb3)](g=>{const b=f;if(!g.noHeight)for(let S=0;S<_[b(o._0x119317)];S++){const L=_[S],E=Cesium__namespace.Cartographic.fromCartesian(L).height,M=Cesium__namespace.Cartographic.fromCartesian(g[b(2694)][S])[b(o._0x22439e)];if(E<=M){const D=this._showPolyline(e,t,L),R={block:!![],position:L,entity:D};this.fire(EventType[b(2602)],R),l(R);return}}const C=this._showPolyline(e,t),P={block:![],entity:C};this.fire(EventType[b(o._0x161367)],P),l(P)})})}_showPolyline(e,t,i){const s={_0x19c74d:3674,_0x272d3a:3060,_0x5150e8:1973,_0x57e83b:1257},r=_0x3a2b68;if(i){const o=this._map.entities[r(s._0x19c74d)](new Cesium__namespace[r(s._0x272d3a)]({polyline:{positions:[e,i],width:2,material:this._visibleColor,depthFailMaterial:this[r(s._0x5150e8)]}}));this.lines.push(o);const c=this._map.entities.add(new Cesium__namespace[r(3060)]({polyline:{positions:[i,t],width:2,material:this._hiddenColor,depthFailMaterial:this[r(1973)]}}));return this.lines.push(c),[o,c]}else{const o=this._map.entities[r(s._0x19c74d)](new Cesium__namespace[r(s._0x272d3a)]({polyline:{positions:[e,t],width:2,material:this._visibleColor,depthFailMaterial:this._depthFailColor}}));return this[r(s._0x57e83b)].push(o),[o]}}clear(){for(let e=0,t=this.lines.length;e<t;e++)this._map.entities.remove(this.lines[e]);this.lines=[]}}var fragmentShaderSource=`#extension GL_OES_standard_derivatives : enable
uniform sampler2D colorTexture;
uniform sampler2D depthTexture;
uniform float lineWidth;
uniform float height;
uniform bvec3 strokeType;
uniform vec3 tjxColor;
uniform vec3 bjColor;
uniform vec3 cameraPos;
uniform float mbDis;
in vec2 v_textureCoordinates;

vec4 toEye(in vec2 uv, in float depth) {
  vec2 xy = vec2((uv.x * 2.0 - 1.0), (uv.y * 2.0 - 1.0));
  vec4 posInCamera = czm_inverseProjection * vec4(xy, depth, 1.0);
  posInCamera = posInCamera / posInCamera.w;
  return posInCamera;
}
float getDepth(in vec4 depth) {
  float z_window = czm_unpackDepth(depth);
  z_window = czm_reverseLogDepth(z_window);
  float n_range = czm_depthRange.near;
  float f_range = czm_depthRange.far;
  return (2.0 * z_window - n_range - f_range) / (f_range - n_range);
}
bool isTJX(vec2 uv, float lw) {
  vec2 pixelSize = lw / czm_viewport.zw;
  float dx0 = -pixelSize.x;
  float dy0 = -pixelSize.y;
  float dx1 = pixelSize.x;
  float dy1 = pixelSize.y;

  vec2 currUV = uv + vec2(dx0, dy0);
  vec4 currDepth = texture(depthTexture, currUV);
  float depth = getDepth(currDepth);
  if(depth >= 1.0)
    return true;

  currUV = uv + vec2(0.0, dy0);
  currDepth = texture(depthTexture, currUV);
  depth = getDepth(currDepth);
  if(depth >= 1.0)
    return true;

  currUV = uv + vec2(dx1, dy0);
  currDepth = texture(depthTexture, currUV);
  depth = getDepth(currDepth);
  if(depth >= 1.0)
    return true;

  currUV = uv + vec2(dx0, 0.0);
  currDepth = texture(depthTexture, currUV);
  depth = getDepth(currDepth);
  if(depth >= 1.0)
    return true;

  currUV = uv + vec2(dx1, 0.0);
  currDepth = texture(depthTexture, currUV);
  depth = getDepth(currDepth);
  if(depth >= 1.0)
    return true;

  currUV = uv + vec2(dx0, dy1);
  currDepth = texture(depthTexture, currUV);
  depth = getDepth(currDepth);
  if(depth >= 1.0)
    return true;

  currUV = uv + vec2(0.0, dy1);
  currDepth = texture(depthTexture, currUV);
  depth = getDepth(currDepth);
  if(depth >= 1.0)
    return true;

  currUV = uv + vec2(dx1, dy1);
  currDepth = texture(depthTexture, currUV);
  depth = getDepth(currDepth);
  if(depth >= 1.0)
    return true;

  return false;
}

void main() {
  vec4 color = texture(colorTexture, v_textureCoordinates);
  if(height > 14102.0) {
    out_FragColor = color;
    return;
  }
  vec4 currD = texture(depthTexture, v_textureCoordinates);
  if(currD.r >= 1.0) {
    out_FragColor = color;
    return;
  }
  float depth = getDepth(currD);
  vec4 positionEC = toEye(v_textureCoordinates, depth);
  vec3 dx = dFdx(positionEC.xyz);
  vec3 dy = dFdy(positionEC.xyz);
  vec3 normal = normalize(cross(dx, dy));

  if(strokeType.y || strokeType.z) {
    vec4 wp = czm_inverseView * positionEC;
    if(distance(wp.xyz, cameraPos) > mbDis) {
      out_FragColor = color;
    } else {
      float dotNum = abs(dot(normal, normalize(positionEC.xyz)));
      if(dotNum < 0.05) {
        out_FragColor = vec4(bjColor, 1.0);
        return;
      }
    }
  }
  if(strokeType.x || strokeType.z) {
    bool tjx = isTJX(v_textureCoordinates, lineWidth);
    if(tjx) {
      out_FragColor = vec4(tjxColor, 1.0);
      return;
    }
  }
  out_FragColor = color;
}
`;class Skyline extends BaseThing{constructor(e={}){const t={_0x170821:2540,_0x23d3bd:2978},i=_0x3a2b68;super(e),this[i(t._0x170821)]=e.color??new Cesium__namespace[i(2092)](1,0,0),this.width=e.width??2,this.strokeType=e.strokeType??new Cesium__namespace[i(t._0x23d3bd)](!![],![],![]),this.bjColor=e.bjColor??new Cesium__namespace[i(2092)](0,0,1),this.distance=e[i(3481)]??500}_enabledHook(e){e?!this.postProcessStage&&this._addedHook():this.postProcessStage&&this._removedHook()}_addedHook(){const e={_0xbbe27f:4233,_0x2a8b11:590,_0x2bb005:1575},t={_0x87925a:517},i=_0x3a2b68,s=this._map[i(e._0xbbe27f)];this.postProcessStage=new Cesium__namespace[i(e._0x2a8b11)]({fragmentShader:fragmentShaderSource,uniforms:{height:()=>s.positionCartographic.height,lineWidth:()=>this[i(t._0x87925a)],strokeType:()=>this[i(1493)],tjxColor:()=>this.color,bjColor:()=>this.bjColor,cameraPos:()=>s.position,mbDis:()=>this.distance}}),this[i(e._0x2bb005)].scene.postProcessStages[i(3674)](this[i(3854)])}_removedHook(){const e={_0x4941e2:3854},t=_0x3a2b68;this[t(e._0x4941e2)]&&(this._map.scene[t(1505)].remove(this[t(e._0x4941e2)]),this.postProcessStage.destroy(),delete this[t(e._0x4941e2)])}}var ShadowRateFS=`precision highp float;
uniform sampler2D u_positionTexture;
uniform sampler2D shadowMap_texture;

in vec2 v_textureCoordinates;

vec4 getPositionEC(vec2 uv) {
  vec4 positionEC = texture(u_positionTexture, uv);
  return vec4(positionEC.xyz, 1.0);
}

void main() {
  vec2 uv = v_textureCoordinates;
  float maxDepth = shadowMap_cascadeSplits[1].w;
  vec4 positionEC = getPositionEC(uv);
  vec3 normalEC = vec3(1.0);
  float depth = -positionEC.z;

  if(depth > maxDepth) {
    out_FragColor = vec4(0.0);
  } else {
    vec4 weights = czm_cascadeWeights(depth);
    vec4 shadowPosition = czm_cascadeMatrix(weights) * positionEC;
    float deptha = czm_unpackDepth(texture(shadowMap_texture, shadowPosition.xy));
    out_FragColor = vec4(step(shadowPosition.z, deptha), 0.0, 1.0, 2.0);
  // out_FragColor = vec4(uv, 1.0, 2.0);
  }
}
`,ShadowRateVS=`in vec4 position;
in vec2 textureCoordinates;
out vec2 v_textureCoordinates;
void main() {
  gl_Position = position;
  v_textureCoordinates = textureCoordinates;
}
`;const texturePositions=new Float32Array([-1,-1,1,-1,1,1,-1,1]),textureUVs=new Float32Array([0,0,1,0,1,1,0,1]),textureIndices=new Uint16Array([0,1,2,0,2,3]);function createTextureVA(n){const e={_0x5dec5e:1834,_0x287e44:1179,_0x271075:1248},t=_0x3a2b68,i=Cesium__namespace[t(2261)][t(e._0x5dec5e)]({context:n,typedArray:texturePositions,usage:Cesium__namespace.BufferUsage[t(e._0x287e44)]}),s=Cesium__namespace.Buffer.createVertexBuffer({context:n,typedArray:textureUVs,usage:Cesium__namespace.BufferUsage.STATIC_DRAW}),r=Cesium__namespace.Buffer.createIndexBuffer({context:n,typedArray:textureIndices,usage:Cesium__namespace[t(2635)][t(e._0x287e44)],indexDatatype:Cesium__namespace.IndexDatatype[t(969)]}),o=[{index:0,vertexBuffer:i,componentsPerAttribute:2,componentDatatype:Cesium__namespace.ComponentDatatype[t(e._0x271075)]},{index:1,vertexBuffer:s,componentsPerAttribute:2,componentDatatype:Cesium__namespace.ComponentDatatype.FLOAT}];return new Cesium__namespace.VertexArray({context:n,attributes:o,indexBuffer:r})}function createFramebuffer(n,e){return new Cesium__namespace.Framebuffer({context:n,colorTextures:[e],destroyAttachments:![]})}function computeTextureResolution(n){const e=Cesium__namespace.ContextLimits.maximumTextureSize,t=Math.min(n,e),i=Math.ceil(n/t);return{x:t,y:i}}function completionBuffer(n,e){const t={_0xf61699:1754},i=_0x3a2b68,s=e.x*e.y,r=n[i(400)]/4;for(let o=r;o<s;o++)n.push(0),n[i(1754)](0),n[i(t._0xf61699)](0),n.push(0)}class ShadowRateDrawCommand{constructor(e,t){const i={_0x7fb195:1397,_0x41f98b:3197},s={_0x1ba74c:3041},r={_0x1a8d2f:3357},o=_0x3a2b68;this[o(i._0x7fb195)]=new Cesium__namespace.Event,this._scene=e,this._positions=t,this._stat=![];const c=t.length;this[o(4178)]=computeTextureResolution(c);const _=new Cesium__namespace[o(1626)]({context:e.context,source:{arrayBufferView:new Float32Array(this._requiredResolution.x*this._requiredResolution.y*4),width:this._requiredResolution.x,height:this._requiredResolution.y},pixelDatatype:Cesium__namespace[o(3784)].FLOAT,pixelFormat:Cesium__namespace.PixelFormat.RGBA,flipY:![]}),l=createTextureVA(e[o(3041)]),d=Cesium__namespace.ShaderProgram.fromCache({context:e.context,vertexShaderSource:ShadowRateVS,fragmentShaderSource:ShadowRateFS,attributeLocations:{position:0,textureCoordinates:1}});this.drawCommand=new Cesium__namespace[o(i._0x41f98b)]({vertexArray:l,shaderProgram:d,outputTexture:_,uniformMap:{shadowMap_cascadeSplits:()=>e.shadowMap._cascadeSplits,shadowMap_cascadeMatrices:()=>e.shadowMap._cascadeMatrices,shadowMap_texture:()=>{const f=o;return e[f(4057)][f(2659)]},u_positionTexture:()=>this[o(r._0x1a8d2f)]},persists:!![],owner:this,postExecute:f=>{const g=o,b=createFramebuffer(e.context,f),C=e[g(s._0x1ba74c)][g(1308)]({framebuffer:b,width:this._requiredResolution.x,height:this._requiredResolution.y});this[g(1397)][g(2157)](C.slice(0,c*4))}})}get[_0x3a2b68(2365)](){return this[_0x3a2b68(1397)]}[_0x3a2b68(3702)](){const e={_0x5708ec:3244,_0x474a76:4178},t=_0x3a2b68,i=this._scene.camera.viewMatrix,s=this._positions[t(e._0x5708ec)](o=>Cesium__namespace.Matrix4[t(3705)](i,o,new Cesium__namespace.Cartesian3)),r=[];s.forEach(o=>{r[t(1754)](o.x),r.push(o.y),r.push(o.z),r.push(0)}),this._positionTexture&&this._positionTexture.destroy(),completionBuffer(r,this._requiredResolution),this._positionTexture=new Cesium__namespace.Texture({context:this._scene.context,source:{width:this._requiredResolution.x,height:this[t(e._0x474a76)].y,arrayBufferView:new Float32Array(r)},pixelDatatype:Cesium__namespace.PixelDatatype.FLOAT,flipY:![]}),this._stat=!![]}update(e){const t={_0x176b8c:2898},i=_0x3a2b68;this.drawCommand&&this[i(t._0x176b8c)]&&(e.commandList[i(1754)](this.drawCommand),this._stat=![])}destroy(){const e={_0x395c7e:2619},t=_0x3a2b68;this._positionTexture&&this._positionTexture[t(e._0x395c7e)](),Cesium__namespace[t(1944)](this)}}class Shadows extends BaseThing{get shadowMap(){const e={_0x577418:1575},t=_0x3a2b68;return this[t(e._0x577418)].scene[t(4057)]}get[_0x3a2b68(1036)](){const e=_0x3a2b68,t=this._map.clock[e(545)];return Cesium__namespace.JulianDate.toDate(t)}set time(e){const t={_0x3c1831:557},i=_0x3a2b68;this._map.clock.currentTime=Cesium__namespace[i(t._0x3c1831)].fromDate(e),this.stop()}get isStart(){return this._map.clock.shouldAnimate}get multiplier(){const e={_0x5038b3:4199},t=_0x3a2b68;var i;return(i=this._map)===null||i===void 0?void 0:i.clock[t(e._0x5038b3)]}set multiplier(e){const t={_0x5cd7ce:2257},i=_0x3a2b68;this.options.multiplier=e,this._map&&(this._map[i(t._0x5cd7ce)].multiplier=e)}_enabledHook(e){const t={_0x1a4b2e:1941,_0x4f4305:1575,_0x4e50fd:3586},i=_0x3a2b68;this[i(1575)]&&(this._map.viewer.shadows=e,(this[i(t._0x1a4b2e)].terrain??!![])&&(this[i(t._0x4f4305)][i(t._0x4e50fd)].terrainShadows=e?Cesium__namespace.ShadowMode.ENABLED:Cesium__namespace.ShadowMode[i(1273)]),(this.options[i(3801)]??!![])&&(this._map.scene.globe[i(3498)]=e))}_mountedHook(){}[_0x3a2b68(2679)](){const e={_0x162e6f:4199,_0xcfb3e8:3586,_0x12830f:3174,_0x11ccd2:4199,_0x10552c:1941,_0x2353c9:1036},t=_0x3a2b68;this._last_startTime=this._map.clock.startTime,this._last_stopTime=this[t(1575)][t(2257)].stopTime,this[t(1081)]=this._map.clock.shouldAnimate,this._last_clockRange=this._map.clock.clockRange,this._last_multiplier=this._map.clock[t(e._0x162e6f)],this._last_shadows=this._map[t(e._0xcfb3e8)].shadows,this[t(2024)](this[t(e._0x12830f)]),this[t(1575)].clock.shouldAnimate=![],this._map[t(2257)].clockRange=this.options.clockRange??Cesium__namespace.ClockRange.CLAMPED,this._map.clock[t(e._0x11ccd2)]=this[t(e._0x10552c)].multiplier??1600,this.options[t(e._0x2353c9)]&&(this.time=this.options.time),this._map.on(EventType.clockTick,this[t(3022)],this)}_removedHook(){const e={_0x25b174:1575,_0x5c931f:1575},t=_0x3a2b68;this._map.off(EventType.clockTick,this._onClockTickHanlder,this),this.clear(),this._enabledHook(![]),this[t(e._0x25b174)].viewer.shadows=this._last_shadows,this._map.clock.clockRange=this._last_clockRange,this[t(e._0x5c931f)].clock.multiplier=this._last_multiplier,this._map.clock.shouldAnimate=this[t(1081)]}_onClockTickHanlder(){const e={_0x1b66aa:3702},t=_0x3a2b68;this._map.clock.shouldAnimate&&(this._drawCommand&&(this._drawCommand[t(e._0x1b66aa)](),this._rate_total+=1),this[t(1109)](EventType.change))}start(e,t,i){const s={_0x1a72be:2257},r=_0x3a2b68;this[r(1575)]&&(!e||!t||e>=t||(this._map[r(s._0x1a72be)].startTime=Cesium__namespace.JulianDate[r(673)](e),this._map.clock[r(545)]=Cesium__namespace.JulianDate.fromDate(i||e),this._map.clock.stopTime=Cesium__namespace.JulianDate[r(673)](t),this._map.clock.shouldAnimate=!![]))}[_0x3a2b68(3145)](){this._map&&(this._map.clock.shouldAnimate=![])}proceed(){this._map&&(this._map.clock.shouldAnimate=!![])}stop(){const e={_0x3191f5:2257},t=_0x3a2b68;this[t(1575)]&&(this._map[t(e._0x3191f5)][t(3356)]=![])}clear(){const e={_0x10f12e:868,_0x58e2a9:1575,_0x276699:2776},t=_0x3a2b68;this.stop(),this[t(545)]=new Date,this._map.clock.startTime=this[t(491)],this._map.clock.stopTime=this[t(e._0x10f12e)],this[t(e._0x58e2a9)].off(EventType[t(1171)],this._map_clockStopTickHandler,this),this[t(e._0x276699)]()}startRate(e){const t={_0x3f7e1a:1575,_0x2aedd3:2694,_0x16540b:1229,_0x6bcfae:1270,_0x449b26:731,_0x452449:1890,_0x3cd5cf:3782,_0x43d7bc:4298,_0x18bce7:653};return new Promise((i,s)=>{const r={_0x3b6541:930},o={_0x1828e6:671,_0x2e1bff:1879,_0x3883ec:1879},c={_0x47ad48:4079,_0x2e76f2:671},_=_0x20dc;if(!this[_(t._0x3f7e1a)]||!e[_(t._0x2aedd3)]||e.positions.length===0||!e[_(653)]||!e[_(t._0x16540b)]||e.startDate>=e[_(1229)])return i();this[_(t._0x6bcfae)]=i;const l=getGridPointsByPoly(e.positions,e[_(t._0x449b26)],e.minHeight),d=[];if(Cesium__namespace.defined(e.minHeight)&&Cesium__namespace[_(407)](e.maxHeight)&&e[_(1890)]!==e.maxHeight)for(let f=e[_(t._0x452449)];f<e.maxHeight;f+=e[_(731)])l[_(3782)](g=>{const b=_,C=Cesium__namespace.Cartesian3.fromDegrees(g[b(c._0x47ad48)],g[b(c._0x2e76f2)],f);C.lng=g.lng,C.lat=g.lat,C.alt=f,C.total=0,d.push(C)});else l[_(t._0x3cd5cf)](f=>{const g=_,b=Cesium__namespace.Cartesian3.fromDegrees(f.lng,f[g(o._0x1828e6)],f.alt);b[g(4079)]=f.lng,b[g(671)]=f[g(o._0x1828e6)],b[g(o._0x2e1bff)]=f[g(o._0x3883ec)],b.total=0,d.push(b)});this._rate_positions=d,this._clearDraw(),this._drawCommand=new ShadowRateDrawCommand(this._map.scene,this._rate_positions),this._map.scene.primitives.add(this[_(t._0x43d7bc)]),this._drawCommand.event.addEventListener(f=>{const g=_,b=f[g(400)];let C=0;for(let P=0;P<b;P+=4)this._rate_positions[C][g(r._0x3b6541)]+=f[P],C+=1}),this._map.on(EventType.clockStop,this._map_clockStopTickHandler,this),this.start(e[_(t._0x18bce7)],e.endDate),this.fire(EventType.start)})}_clearDraw(){const e=_0x3a2b68;if(this._rate_total=0,this._rate_positions)for(let t=0,i=this._rate_positions.length;t<i;t++)this._rate_positions[t].total=0;this._drawCommand&&(this._map.scene.primitives.remove(this._drawCommand),this[e(4298)][e(2619)](),delete this._drawCommand)}_map_clockStopTickHandler(e){const t={_0x5852d2:4298,_0x4c0378:2619,_0x479abc:2408,_0x57feec:899},i=_0x3a2b68;this._map.off(EventType.clockStop,this._map_clockStopTickHandler,this),this[i(4298)]&&(this._map.scene.primitives.remove(this._drawCommand),this[i(t._0x5852d2)][i(t._0x4c0378)](),delete this._drawCommand);for(let r=0,o=this[i(t._0x479abc)].length;r<o;r++)this._rate_positions[r][i(t._0x57feec)]=1-this._rate_positions[r].total/this._rate_total;const s={total:this._rate_total,positions:this[i(2408)]};this._promise_resolve&&(this[i(1270)](s),delete this._promise_resolve),this.fire(EventType.stop,s)}}class Measure extends BaseThing{get graphicLayer(){return this._graphicLayer}get graphics(){return this._graphicLayer.graphics}get hasMeasure(){return this._graphicLayer.length>0}_enabledHook(e){}_mountedHook(){const e={_0x5204b4:1802,_0x4b43a1:1575,_0x4ae132:2504},t={_0x689f91:2471,_0x15be82:1155},i=_0x3a2b68;this._graphicLayer=new GraphicLayer({hasEdit:!![],eventParent:this,isContinued:this.options[i(e._0x5204b4)],isAutoEditing:!this.options.isContinued,...this.options,private:!![]}),this._graphicLayer.hasEdit&&this._graphicLayer.bindContextMenu([{text:this[i(e._0x4b43a1)].getLangText(i(e._0x4ae132)),icon:Icon.Delete,show:s=>{const r=i,o=s[r(2471)];return o!=null&&o.inProgress&&!o.editing?![]:!![]},callback:s=>{const r=i,o=s[r(t._0x689f91)];if(!o)return;const c=o[r(3591)];this._graphicLayer[r(1155)](o),c&&this._graphicLayer[r(t._0x15be82)](c),this.fire(EventType.remove,{mtype:this._measureType,graphic:o})}}])}[_0x3a2b68(2679)](){const e={_0x28886f:4243},t=_0x3a2b68;this[t(1575)][t(e._0x28886f)](this._graphicLayer)}[_0x3a2b68(3916)](){const e={_0x38d46e:2505},t=_0x3a2b68;this._map.removeLayer(this[t(e._0x38d46e)])}[_0x3a2b68(3481)](e={}){const t={_0x28f3cc:1603},i=_0x3a2b68;return this.stopDraw(),e[i(t._0x28f3cc)]="distanceMeasure",this._graphicLayer.startDraw(e)}distanceSurface(e={}){const t={_0x2be9f6:2505},i=_0x3a2b68;return this.stopDraw(),e.type="distanceSurfaceMeasure",this[i(t._0x2be9f6)].startDraw(e)}section(e={}){const t={_0x41590d:2505},i=_0x3a2b68;return this.stopDraw(),e.type="sectionMeasure",this[i(t._0x41590d)].startDraw(e)}area(e={}){const t={_0x4ec384:3194},i=_0x3a2b68;return this.stopDraw(),e.type="areaMeasure",this._graphicLayer[i(t._0x4ec384)](e)}areaSurface(e={}){return this.stopDraw(),e.type="areaSurfaceMeasure",this._graphicLayer.startDraw(e)}[_0x3a2b68(820)](e={}){const t={_0x16a3cf:1743},i=_0x3a2b68;return this.stopDraw(),e.type=e.depth?i(3261):i(t._0x16a3cf),this._graphicLayer.startDraw(e)}height(e={}){const t={_0xf6517:608,_0x4a7820:1603},i=_0x3a2b68;return this[i(t._0xf6517)](),e[i(t._0x4a7820)]=i(4314),this._graphicLayer[i(3194)](e)}heightTriangle(e={}){const t={_0x4536a8:608,_0x5bd58f:1603},i=_0x3a2b68;return this[i(t._0x4536a8)](),e[i(t._0x5bd58f)]="heightTriangleMeasure",this._graphicLayer.startDraw(e)}[_0x3a2b68(2580)](e={}){const t=_0x3a2b68;return this.stopDraw(),e.type="angleMeasure",this[t(2505)].startDraw(e)}[_0x3a2b68(2879)](e={}){const t=_0x3a2b68;return this.stopDraw(),e.type="pointMeasure",this[t(2505)].startDraw(e)}[_0x3a2b68(608)](){return this._graphicLayer.stopDraw()}clearDrawing(){return this._graphicLayer.clearDrawing()}[_0x3a2b68(3344)](){return this._graphicLayer.endDraw()}clear(){const e=_0x3a2b68;return this._graphicLayer[e(2126)]()}updateUnit(e){const t={_0xc68071:1122};this._graphicLayer.eachGraphic(i=>{const s=_0x20dc;i.options.unit=e,i.showText&&i[s(t._0xc68071)](e)})}[_0x3a2b68(2619)](e){const t={_0x6071b2:2619},i=_0x3a2b68;this._graphicLayer.destroy(e),super[i(t._0x6071b2)](e)}}class FloodByGraphic extends BaseThing{get positions(){const e=_0x3a2b68;return this.options[e(2694)]}set[_0x3a2b68(2694)](e){const t={_0xde981b:1941,_0x53cf6f:892,_0x174c13:2677},i=_0x3a2b68;if(this[i(t._0xde981b)].positions=e,e){const s=[],r=[];e.forEach(o=>{const c=LngLatPoint.parse(o);!c||!c.valid()||(c._alt_bak=c.alt,r.push(c),s.push(c.toCartesian(!![])))}),this._poinst=r,this._hierarchyPositions=s,this[i(1575)]&&!(this.options.has3dtiles??Cesium__namespace.defined(this._map.pick3DTileset(s)))&&(!Cesium__namespace.defined(this[i(t._0x53cf6f)])&&(this._last_depthTestAgainstTerrain=this._map[i(744)].globe.depthTestAgainstTerrain),this._map.scene.globe[i(t._0x174c13)]=!![])}else this._hierarchyPositions=null}get height(){return this._extrudedHeight??this.options.minHeight}set height(e){const t={_0x4e4800:1879};if(this._extrudedHeight=e,this.options.perPositionHeight&&(!this._poinst&&this.options.positions&&(this.positions=this.options.positions),this._poinst)){const i=[];this._poinst.forEach(s=>{const r=_0x20dc,o=LngLatPoint.parse(s);!o||!o.valid()||(o[r(t._0x4e4800)]=o[r(3221)]+e,i.push(o.toCartesian(!![])))}),this._hierarchyPositions=i}this.fire(EventType.change,{height:this._extrudedHeight})}get speed(){const e=_0x3a2b68;return this[e(1941)][e(4385)]}set speed(e){const t={_0x1aad64:1941},i=_0x3a2b68;this[i(t._0x1aad64)].speed=e}[_0x3a2b68(585)](){const e={_0x4861ca:2116,_0x477d25:3441,_0x5bb853:2116,_0x2666a1:1941,_0x353734:2694},t={_0x32b89b:973},i=_0x3a2b68;this[i(2954)]=new GraphicLayer({name:"淹没分析",private:!![]}),this[i(e._0x4861ca)]=0;const s=new Cesium__namespace[i(2004)],r={color:i(e._0x477d25),opacity:.5,outline:![],...this[i(1941)].style,perPositionHeight:!![]};!this[i(1941)].perPositionHeight&&(r[i(4241)]=this[i(e._0x5bb853)],r.extrudedHeight=new Cesium__namespace.CallbackProperty(c=>this[i(2116)],![]));const o=new PolygonEntity({positions:new Cesium__namespace.CallbackProperty(c=>{const _=i;return this._hierarchyPositions?(s.positions=this[_(t._0x32b89b)],s):null},![]),style:r,allowDrillPick:!![]});this[i(2471)]=o,Cesium__namespace.defined(this[i(e._0x2666a1)].minHeight)&&Cesium__namespace.defined(this.options[i(2627)])&&Cesium__namespace[i(407)](this[i(e._0x2666a1)][i(e._0x353734)])&&this.setOptions()}[_0x3a2b68(2679)](){this._map.addLayer(this.graphicLayer),this.graphicLayer.addGraphic(this.graphic)}_removedHook(){const e={_0x41b29c:2033},t=_0x3a2b68;this._map[t(e._0x41b29c)](this.graphicLayer),this.clear()}[_0x3a2b68(3483)](e){const t={_0x4f7a33:2116},i=_0x3a2b68;e&&(this.options={...this[i(1941)],...e}),this.stop();let s=this[i(1941)].minHeight,r=this.options.maxHeight;if(!Cesium__namespace.defined(s)){logError$1(i(2574),s);return}if(!Cesium__namespace.defined(r)){logError$1("maxHeight 请传入有效数值！",r);return}if(s>r){const o=s;s=r,r=o}return this[i(t._0x4f7a33)]=s,this._maxHeight=r,this.positions=this.options[i(2694)],this}start(){const e={_0x5b0176:2682,_0x36709e:2116,_0x1187fb:2309,_0x190e32:4241},t=_0x3a2b68;if(!this._hierarchyPositions){logError$1("请传入淹没区域才能开始分析");return}this[t(2682)](),this.isStart=!![],this.fire(EventType.start),this._timeTik=setInterval(()=>{const i=t;if(this._extrudedHeight>=this._maxHeight){this[i(e._0x5b0176)]();return}const s=this[i(e._0x36709e)]+this.speed;s>this[i(e._0x1187fb)]?this[i(e._0x190e32)]=this._maxHeight:this.height=s},100)}stop(){const e=_0x3a2b68;this.isStart&&(this._timeTik&&(clearInterval(this._timeTik),delete this._timeTik),this[e(2199)]=![],this.fire(EventType.end))}restart(){const e={_0x14a999:3702},t=_0x3a2b68;this.setOptions(),this[t(e._0x14a999)]()}clear(){const e=_0x3a2b68;this.positions=null,this._last_depthTestAgainstTerrain!=null&&(this._map.scene[e(1462)].depthTestAgainstTerrain=this._last_depthTestAgainstTerrain,delete this._last_depthTestAgainstTerrain),this.stop()}destroy(e){this[_0x3a2b68(2954)]&&this.graphicLayer.destroy(e),super.destroy(e)}}class Slope extends BaseThing{constructor(e={}){const t={_0x174be9:3369,_0x30cec5:1941,_0x31fda4:1941,_0x325599:2092,_0x5bc259:3369},i=_0x3a2b68;super(e),this[i(1941)].arrow=this.options[i(t._0x174be9)]||{},this[i(t._0x30cec5)].arrow.show=this[i(t._0x31fda4)][i(3369)].show??!![],this.options.arrow.color=this[i(t._0x30cec5)][i(3369)].color??Cesium__namespace[i(t._0x325599)].YELLOW,this.options.arrow[i(517)]=this.options[i(3369)].width??15,this.options[i(t._0x5bc259)].scale=this[i(t._0x31fda4)].arrow.scale??.3}_mountedHook(){const e={_0x19f664:4068},t={_0xadd57a:3208,_0x22803a:2837,_0xb0843d:734},i=_0x3a2b68;this.graphicLayer=new GraphicLayer({name:i(e._0x19f664),tooltip:function(s){const r=i;var o;const c=(o=s.graphic)===null||o===void 0?void 0:o[r(t._0xadd57a)];if(c)return r(t._0x22803a)+c.slopeStr1+"  ("+c[r(t._0xb0843d)]+")<br />坡向: "+c.direction+"°"},...this.options,private:!![]})}[_0x3a2b68(2679)](){const e={_0x4b3ac5:2694,_0x56c212:1941},t=_0x3a2b68;this._map.addLayer(this.graphicLayer),this.options.positions&&this.options[t(e._0x4b3ac5)].length>0&&this.add(this[t(e._0x56c212)].positions,this.options)}_removedHook(){const e={_0x505f6c:1575,_0x3c4656:2126},t=_0x3a2b68;this[t(e._0x505f6c)][t(2033)](this.graphicLayer),this[t(e._0x3c4656)]()}add(e,t={}){const i={_0x430040:400,_0x4c5a51:744,_0x3fd98c:1663},s={_0x503f4f:3945,_0x1210eb:3369,_0x5e022d:744,_0x1e56c9:2627,_0x34bf45:2627,_0x38ff38:848,_0x5be89e:1069,_0x33c77:400},r=_0x3a2b68;if(!e||e[r(i._0x430040)]<1)return;e=LngLatArray[r(2249)](e),this._eventResult={positions:e},this._stateOkIndex=0,this._arrowInstances=[],this._arrData=[];const o=t.splitNum??8;if(e.length>2&&o>1)interPolygon({scene:this._map[r(i._0x4c5a51)],positions:e,has3dtiles:![],onlyPoint:!![],splitNum:o}).then(c=>{const _=r;this.options.arrow.length?this[_(s._0x503f4f)]=this.options[_(s._0x1210eb)].length:this._arrowLength=Cesium__namespace.Math.chordLength(c.granularity,this._map[_(s._0x5e022d)].globe.ellipsoid.maximumRadius)*this.options.arrow.scale,this._eventResult[_(s._0x1e56c9)]=c[_(s._0x34bf45)],this[_(s._0x38ff38)].minHeight=c.minHeight,e=[];for(let l=0;l<c[_(s._0x5be89e)][_(s._0x33c77)];l++)e[_(1754)](c.list[l].pointDM);this._stateAll=e[_(s._0x33c77)];for(let l=0;l<this[_(1663)];l++)this[_(1457)](e[l],t)});else{this._arrowLength=this.options[r(3369)].length??40,this[r(i._0x3fd98c)]=e.length;for(let c=0;c<this._stateAll;c++)this._fxOnePoint(e[c],t)}}_fxOnePoint(e,t){const i={_0x3295ba:1754,_0x1bf25a:1462,_0x155ad3:1575,_0x5f19af:4389},s={_0x7e1899:4241,_0x31e6ab:400,_0x34e186:3687},r=_0x3a2b68;if(!e)return;const o=getEllipseOuterPositions({position:e,radius:t.radius??2,count:t.count??4});o[r(i._0x3295ba)](e);const c=this[r(1575)][r(744)][r(i._0x1bf25a)].ellipsoid;computeSurfacePoints({scene:this[r(i._0x155ad3)].scene,positions:o,has3dtiles:t.has3dtiles,objectsToExclude:t.objectsToExclude,exact:t.exact})[r(i._0x5f19af)](_=>{const l=r;if(this._stateAll===0)return;_.noHeight&&logWarn("未获取到高度值，贴地高度计算存在误差");const d=c.cartesianArrayToCartographicArray(_.positions),f=d.pop();let g=0,b=d[0].height,C=0,P=d[0][l(s._0x7e1899)];for(let D=1;D<d[l(s._0x31e6ab)]-1;D++){const R=d[D];R[l(4241)]>b&&(b=R[l(4241)],g=D),R.height<P&&(P=R.height,C=D)}const S=d[g],L=d[C],E=this.getSlope(f,S),M=this.getSlope(f,L);E>M?this[l(s._0x34e186)](e,f,S,E):this._fxOnePointOk(e,f,L,M)})}[_0x3a2b68(3687)](e,t,i,s){const r={_0x4d0a6b:4241,_0xdf833:1754,_0x26337b:1109,_0x14d027:4102,_0x10f92e:1109},o=_0x3a2b68,c=Cesium__namespace.Cartographic.toCartesian(t);let _=Cesium__namespace.Cartographic.toCartesian(i);_=getOnLinePointByLen(c,_,this._arrowLength);let l;t.height>i[o(r._0x4d0a6b)]?l=[c,_]:l=[_,c];const d=getAngle(l[0],l[1],!![]);let f=Math.atan(s)*180/Math.PI;f=Number(f.toFixed(2));const g=f+"°",b=(s*100).toFixed(2)+"%",C={position:e,slope:f,slopeStr1:g,slopeStr2:b,direction:d};if(!this._arrData&&(this._arrData=[]),this._arrData[o(r._0xdf833)](C),this[o(r._0x26337b)](EventType[o(782)],{data:C,index:this[o(3461)]}),this.options.arrow.show&&this._arrowInstances[o(1754)]({positions:l,attr:C}),this._stateOkIndex++,this[o(3461)]>=this[o(1663)]){if(this.options.arrow.show&&this._arrowInstances.length>0){const P=new PolylineCombine({instances:this[o(r._0x14d027)],style:{materialType:PolylineArrow,...this.options.arrow}});this.graphicLayer.addGraphic(P)}this[o(r._0x10f92e)](EventType.end,{...this._eventResult,data:this._arrData})}}getSlope(e,t){const i={_0x16c399:4241},s=_0x3a2b68;if(!e||!t)return;const r=Math[s(2376)](e[s(i._0x16c399)]-t.height),o=Cesium__namespace.Cartesian3[s(3481)](Cesium__namespace.Cartographic[s(1378)](e),Cesium__namespace.Cartesian3.fromRadians(t.longitude,t.latitude,e.height));return r/o}clear(){const e={_0x41b50b:4102},t=_0x3a2b68;this.graphicLayer.clear(),this[t(e._0x41b50b)]=[],this._arrData=[],this._stateAll=0,this._stateOkIndex=0}static getSlope(e){const t={_0x292a17:3244},i={_0x3e8f00:2619};return new Promise((s,r)=>{const o=_0x20dc,c=new Slope({positions:e.positions,splitNum:1,radius:e.radius,count:e.count,has3dtiles:e.has3dtiles,point:{show:![]},arrow:{show:![]}});c.addTo(e[o(t._0x292a17)]),e.endItem&&c.on(EventType.endItem,e.endItem),c.on(EventType.end,_=>{c[o(i._0x3e8f00)](),e.callback&&e.callback(_),s(_)})})}}class TerrainPlanClip extends BaseThing{get positions(){return this._positions}set[_0x3a2b68(2694)](e){const t=_0x3a2b68;this.clear(),this[t(3965)]=e,this.setPositions(e)}get diffHeight(){const e={_0x1e1758:1882},t=_0x3a2b68;return this.options[t(e._0x1e1758)]}set diffHeight(e){this.options.diffHeight=e,this._graphicLayer&&this._graphicLayer.eachGraphic(t=>{const i=_0x20dc;t[i(1882)]=e})}get clipOutSide(){const e={_0x152de0:705},t=_0x3a2b68;return this.options[t(e._0x152de0)]}set[_0x3a2b68(705)](e){const t={_0xa18fba:1941,_0x2ef798:3965},i=_0x3a2b68;this[i(t._0xa18fba)].clipOutSide=e,this._map&&this._positions&&this.setPositions(this[i(t._0x2ef798)])}_enabledHook(e){const t={_0x2e2155:1462,_0x5a283e:3174,_0x3385a7:2505},i=_0x3a2b68;this._map.scene.globe.clippingPlanes&&(this._map.scene[i(t._0x2e2155)].clippingPlanes[i(t._0x5a283e)]=e),this[i(t._0x3385a7)]&&(this._graphicLayer.show=e)}_mountedHook(){}_addedHook(){const e={_0x40f507:4243,_0x1da493:1026},t=_0x3a2b68;this._graphicLayer=new GraphicLayer({...this[t(1941)],private:!![]}),this[t(1575)][t(e._0x40f507)](this._graphicLayer),this.options.positions&&this.options.positions[t(400)]>0&&this[t(e._0x1da493)](this.options.positions)}[_0x3a2b68(3916)](){const e={_0x87874f:2505},t=_0x3a2b68;this.clear(),this[t(e._0x87874f)]&&(this._map.removeLayer(this[t(2505)]),delete this._graphicLayer)}setPositions(e){const t={_0x4a2d2f:400,_0x261e8a:2978,_0x4dde10:1754,_0x3d76bc:496,_0x4bd053:2092,_0x3f5792:1793},i=_0x3a2b68;if(this.clear(),!e||e[i(t._0x4a2d2f)]<3){logError$1("挖地坐标数据存在问题！",e);return}e=LngLatArray.toCartesians(e),this._positions=e;const s=[],r=e.length;let o;const c=formatNum$1(getAngle(e[0],e[1]),2);if(c>-.02&&c<.02)o=![];else{const _=formatNum$1(getAngle(e[0],e[2]),2);o=c<_}this.clipOutSide&&(o=!o);for(let _=0;_<r;++_){const l=(_+1)%r,d=Cesium__namespace.Cartesian3[i(1028)](e[_],e[l],new Cesium__namespace[i(t._0x261e8a)]),f=Cesium__namespace.Cartesian3[i(1085)](d,new Cesium__namespace.Cartesian3);let g;o?g=Cesium__namespace[i(2978)].subtract(e[_],d,new Cesium__namespace.Cartesian3):g=Cesium__namespace.Cartesian3.subtract(e[l],d,new Cesium__namespace.Cartesian3),g=Cesium__namespace[i(2978)].normalize(g,g);let b=Cesium__namespace.Cartesian3.cross(g,f,new Cesium__namespace.Cartesian3);b=Cesium__namespace.Cartesian3.normalize(b,b);const C=new Cesium__namespace.Plane(b,0),P=Cesium__namespace.Plane.getPointDistance(C,d);s[i(t._0x4dde10)](new Cesium__namespace.ClippingPlane(b,P))}if(this._map.scene[i(1462)][i(t._0x3d76bc)]=new Cesium__namespace.ClippingPlaneCollection({planes:s,edgeWidth:this.options.edgeWidth??1,edgeColor:this.options.edgeColor??Cesium__namespace[i(t._0x4bd053)].WHITE,unionClippingRegions:this.clipOutSide,enabled:!![]}),this.options[i(t._0x3f5792)]){const _=new Pit({style:this[i(1941)],positions:e});this._graphicLayer.addGraphic(_)}}[_0x3a2b68(2126)](){const e={_0x2c3ee6:3965,_0x228287:2505,_0x498c0b:1575,_0x599496:3174,_0x3a825f:1462},t=_0x3a2b68;var i,s;this._map&&(this[t(e._0x2c3ee6)]=null,this[t(e._0x228287)]&&this[t(2505)].clear(),(i=this[t(e._0x498c0b)].scene.globe)!==null&&i!==void 0&&(s=i.clippingPlanes)!==null&&s!==void 0&&s[t(e._0x599496)]&&(this._map.scene.globe.clippingPlanes.enabled=![]),this[t(1575)][t(744)][t(e._0x3a825f)].clippingPlanes=void 0)}}class TerrainEditBase extends BaseThing{constructor(e={}){super(e),!isMars3DCesium&&logError$1("该功能需要引入mars3d修改版Cesium库(mars3d-cesium库)才支持!",this),this._areaList=[]}get[_0x3a2b68(1069)](){return this._areaList}get length(){if(this[_0x3a2b68({_0x3320db:2589}._0x3320db)]){var i;return(i=this._areaList)===null||i===void 0?void 0:i.length}else return 0}get[_0x3a2b68(2694)](){const e={_0x18b3e8:2589},t=_0x3a2b68;return this.length>0?this[t(e._0x18b3e8)][0].positions:null}set positions(e){this.clear(),this.addArea(e)}_enabledHook(e){const t={_0x5ec5f6:4073},i=_0x3a2b68;this[i(t._0x5ec5f6)][i(3174)]=e}_addedHook(){const e={_0x35336d:4073},t=_0x3a2b68;this.options.area?this.options.area[t(3782)](i=>{const s=t;this.addArea(i[s(2694)],i)}):this[t(1941)].positions&&this.addArea(this.options.positions),this[t(e._0x35336d)].enabled=this[t(3174)]}_removedHook(){this[_0x3a2b68({_0x26fd54:2126}._0x26fd54)](),this.analysisOptions.enabled=![]}clear(){const e=_0x3a2b68;this[e(2589)]=[],this.analysisOptions.clear(),this.analysisOptions.enabled=this.enabled}getAreaById(e){const t={_0x104af7:2589},i=_0x3a2b68;if(!isNumber(e))return e;for(let s=0;s<this[i(t._0x104af7)][i(400)];s++){const r=this[i(2589)][s];if(r.id===e)return r}return null}hideArea(e){const t=_0x3a2b68,i=this.getAreaById(e);i&&(i.show=![],i.downGraphic&&(i[t(1195)].show=![]),i.upGraphic&&(i.upGraphic.show=![]),this._update())}showArea(e){const t={_0x2e3e50:1195},i=_0x3a2b68,s=this.getAreaById(e);s&&(s.show=!![],s[i(1195)]&&(s[i(t._0x2e3e50)][i(442)]=!![]),s.upGraphic&&(s.upGraphic.show=!![]),this._update())}_removeAreaHook(e){}removeArea(e){isNumber(e)&&(e=this.getAreaById(e)),e&&(this._removeAreaHook(e),removeArrayItem(this._areaList,e),this._update())}[_0x3a2b68(414)](e){}[_0x3a2b68(3766)](e,t){const i={_0x38f440:2249,_0x4fb879:2589,_0x53a657:1754},s=_0x3a2b68;if(!e||e.length===0)return;t!=null&&t.simplify&&(e=simplifyPositions(e,t.simplify));const r={show:!![],id:getGlobalId(),...t,positions:LngLatArray[s(i._0x38f440)](e)};return this[s(i._0x4fb879)][s(i._0x53a657)](r),this._addAreaHook(r,t),this._update(),r}_update(){const e={_0x2e4c83:3174,_0x2ae5ba:991},t=_0x3a2b68;this[t(2589)].length>0?this._updateAnalysisOptions():(this[t(4073)].clear(),this.analysisOptions[t(e._0x2e4c83)]=this.enabled),this.analysisOptions[t(e._0x2ae5ba)]=!![]}_updateAnalysisOptions(){const e=_0x3a2b68,t=[],i=[];this[e(2589)][e(3782)](s=>{const r=e;if(!s.show||!s.positions)return;const o=this[r(1575)].scene.globe.ellipsoid.cartesianArrayToCartographicArray(s.positions);t.push(o),i.push(Cesium__namespace.Rectangle.fromCartographicArray(o))}),this[e(4073)].rectangles=i,this.analysisOptions[e(1908)]=t}}var GlobeFlodByMaterial=`uniform float u_flood_val;// 当前淹没高度
uniform vec4 u_flood_color;

czm_material czm_getMaterial(czm_materialInput materialInput) {
    czm_material material = czm_getDefaultMaterial(materialInput);
    material.alpha = (materialInput.height < u_flood_val) ? u_flood_color.a : 0.0;
    material.diffuse = u_flood_color.rgb;
    return material;
}
`;const FloodByMaterialType=_0x3a2b68(2972);class FloodByMaterial extends TerrainEditBase{get analysisOptions(){const e=_0x3a2b68;var t,i,s,r,o,c;return(t=this._map)===null||t===void 0||(i=t.scene)===null||i===void 0||(s=i.globe)===null||s===void 0||(r=s._surface)===null||r===void 0||(o=r[e(3207)])===null||o===void 0||(c=o.marsOptions)===null||c===void 0?void 0:c.flood}get height(){return this._height??this._minHeight??0}set[_0x3a2b68(4241)](e){const t={_0x3d1c4c:1603,_0xb2e540:2949},i=_0x3a2b68;var s;this._height=e,((s=this._map.scene[i(1462)].material)===null||s===void 0?void 0:s[i(t._0x3d1c4c)])===FloodByMaterialType&&(this._map.scene.globe.material[i(t._0xb2e540)][i(3602)]=e)}get speed(){return this.options.speed||1}set[_0x3a2b68(4385)](e){this.options.speed=Number(e)}get[_0x3a2b68(2540)](){return this[_0x3a2b68({_0x3bdf05:1596}._0x3bdf05)]}set[_0x3a2b68(2540)](e){const t={_0xc578f6:1462},i=_0x3a2b68;var s;this._color=getCesiumColor(e),((s=this._map[i(744)][i(t._0xc578f6)].material)===null||s===void 0?void 0:s.type)===FloodByMaterialType&&(this._map[i(744)].globe.material.uniforms.u_flood_color=this._color)}get showElseArea(){const e={_0x4ce49f:3096},t=_0x3a2b68;var i;return!((i=this.analysisOptions)!==null&&i!==void 0&&i[t(e._0x4ce49f)])}set showElseArea(e){const t=_0x3a2b68;this[t(4073)].onlySelf=!e}_addedHook(){const e={_0x4bf8ea:3793,_0x2be391:2092},t=_0x3a2b68;this._map.scene.globe[t(e._0x4bf8ea)]=Cesium__namespace[t(4208)].fromType(FloodByMaterialType),this.color=this[t(1941)].color??new Cesium__namespace[t(e._0x2be391)](.15,.7,.95,.5),this[t(2867)]=this.options[t(2867)]??!![],super[t(2679)]()}[_0x3a2b68(3483)](e){const t={_0x29535c:1941,_0x6c35ec:407},i=_0x3a2b68;e&&(this.options={...this[i(t._0x29535c)],...e}),this.stop();let s=this.options[i(1890)],r=this[i(1941)].maxHeight;if(!Cesium__namespace.defined(s)){logError$1(i(2574),s);return}if(!Cesium__namespace[i(t._0x6c35ec)](r)){logError$1(i(2810),r);return}if(s>r){const o=s;s=r,r=o}return this._minHeight=s,this._maxHeight=r,this._map.scene[i(1462)].material=Cesium__namespace.Material.fromType(FloodByMaterialType,{u_flood_val:this.height,u_flood_color:this.color}),this}_enabledHook(e){const t={_0x35891f:4241,_0x872722:744,_0x493814:1462,_0x4c76b7:3793},i=_0x3a2b68;var s;super[i(2024)](e),e?this._map.scene.globe.material=Cesium__namespace.Material.fromType(FloodByMaterialType,{u_flood_val:this[i(t._0x35891f)],u_flood_color:this.color}):((s=this._map[i(t._0x872722)][i(1462)].material)===null||s===void 0?void 0:s[i(1603)])===FloodByMaterialType&&(this[i(1575)].scene[i(t._0x493814)][i(t._0x4c76b7)]=null)}[_0x3a2b68(3702)](){const e={_0x371444:2682,_0x580828:1575},t=_0x3a2b68;this[t(e._0x371444)](),this[t(2199)]=!![],this.fire(EventType[t(3702)]),this[t(e._0x580828)].on(EventType[t(4273)],this._onClockTickHandler,this)}_onClockTickHandler(e){const t={_0x4b55b3:2682},i=_0x3a2b68;if(this.height+=this.speed/50,this.height>this._maxHeight){this[i(4241)]=this._maxHeight,this[i(t._0x4b55b3)]();return}if(this.height<this._minHeight){this.height=this._minHeight,this.stop();return}this[i(1109)](EventType.change,{height:this.height})}[_0x3a2b68(2682)](){const e=_0x3a2b68;this[e(2199)]&&(this._map.off(EventType.clockTick,this._onClockTickHandler,this),this[e(2199)]=![],this[e(1109)](EventType[e(2602)]))}restart(){const e=_0x3a2b68;this.setOptions(),this[e(3702)]()}clear(){const e=_0x3a2b68;var t;this[e(2682)](),((t=this._map.scene.globe.material)===null||t===void 0?void 0:t.type)===FloodByMaterialType&&(this[e(1575)].scene.globe.material=null),super.clear()}}Cesium__namespace.Material.FloodByMaterialType=FloodByMaterialType,Cesium__namespace.Material._materialCache[_0x3a2b68(430)](FloodByMaterialType,{fabric:{type:FloodByMaterialType,uniforms:{u_flood_color:new Cesium__namespace[_0x3a2b68(2092)](.15,.7,.95,.5),u_flood_val:0},source:GlobeFlodByMaterial},translucent:!![]});class ContourLine extends TerrainEditBase{constructor(e={}){const t={_0x26543f:2363,_0x1fd61c:1890},i=_0x3a2b68;super(e),this._contourShow=e.contourShow??!![],this[i(3421)]=e.spacing??100,this[i(3961)]=e.width??1.5,this[i(3890)]=getCesiumColor(e.color,Cesium__namespace.Color.RED),this._shadingType=e.shadingType??"none",this[i(555)]=e.shadingAlpha??.6,this.colorScheme=e[i(1977)]||{elevation:{step:[0,.045,.1,.15,.37,.54,1],color:["#000000","#2747E0",i(3748),i(1971),"#FF9742","#FF9742","#ffd700"]},slope:{step:[0,.29,.5,Math.sqrt(2)/2,.87,.91,1],color:["#000000","#2747E0","#D33B7D","#D33038","#FF9742",i(2663),i(696)]},aspect:{step:[0,.2,.4,.6,.8,.9,1],color:[i(t._0x26543f),"#2747E0","#D33B7D",i(1971),"#FF9742","#FF9742","#ffd700"]}},this.minHeight=e[i(t._0x1fd61c)]??-414,this.maxHeight=e.maxHeight??8777}get[_0x3a2b68(4073)](){const e={_0x396664:694},t=_0x3a2b68;var i,s,r,o,c,_;return(i=this._map)===null||i===void 0||(s=i.scene)===null||s===void 0||(r=s.globe)===null||r===void 0||(o=r._surface)===null||o===void 0||(c=o.tileProvider)===null||c===void 0||(_=c.marsOptions)===null||_===void 0?void 0:_[t(e._0x396664)]}get contourShow(){return this._contourShow}set contourShow(e){const t={_0x4441b5:1196},i=_0x3a2b68;this._contourShow=e,this[i(t._0x4441b5)]()}get shadingType(){return this._shadingType}set shadingType(e){this._shadingType=e,this.updateMaterial()}get shadingAlpha(){return this[_0x3a2b68(555)]}set shadingAlpha(e){this._shadingAlpha=e,this.updateMaterial()}get[_0x3a2b68(517)](){return this[_0x3a2b68({_0x43c362:3961}._0x43c362)]}set width(e){const t=_0x3a2b68;this[t(3961)]=e,this.contourUniforms&&(this.contourUniforms.width=e)}get spacing(){return this[_0x3a2b68(3421)]}set[_0x3a2b68(4369)](e){const t={_0x381fb6:3289,_0x1be5ea:4369},i=_0x3a2b68;this[i(3421)]=e,this[i(t._0x381fb6)]&&(this.contourUniforms[i(t._0x1be5ea)]=e)}get color(){return this._contourColor}set[_0x3a2b68(2540)](e){this._contourColor=getCesiumColor(e),this.contourUniforms&&(this.contourUniforms.color=e)}get[_0x3a2b68(2867)](){var e;return!((e=this.analysisOptions)!==null&&e!==void 0&&e.onlySelf)}set[_0x3a2b68(2867)](e){const t={_0x2abd01:4073},i=_0x3a2b68;this[i(t._0x2abd01)].onlySelf=!e}_enabledHook(e){super._enabledHook(e),this.updateMaterial()}[_0x3a2b68(2126)](){const e={_0x17efd2:790,_0x3f9c2c:744,_0x2b982a:818},t=_0x3a2b68;super.clear(),this._last_material&&(this._map.scene.globe.material=this[t(e._0x17efd2)],delete this._last_material),this[t(3289)]=null,this[t(818)]&&(this._map[t(e._0x3f9c2c)].globe.enableLighting=![],this._map.clock.currentTime=Cesium__namespace.JulianDate.now(),delete this[t(e._0x2b982a)])}[_0x3a2b68(414)](){this.updateMaterial()}updateMaterial(){const e={_0xf5a09b:3720,_0x22a556:1890,_0x1f3c93:1261,_0x39022c:2949,_0x4231e2:3809,_0x275117:1686,_0x14c26d:1261,_0x31d624:2583,_0x46495d:3809,_0x547d2a:3421,_0x2c4a83:1537,_0x45fc55:1609,_0x24f6ac:2410,_0x53d3fa:1462,_0x4ca4f6:2257,_0x548989:818,_0x18ec81:557,_0x19ac19:1575,_0x304a45:3793},t=_0x3a2b68;let i,s,r;const o=this._shadingType;if(this[t(e._0xf5a09b)]?(o==="elevation"?(i=this.getElevationContourMaterial(),r=i.materials[t(1087)][t(2949)],r.minimumHeight=this[t(e._0x22a556)],r.maximumHeight=this.maxHeight,s=i[t(e._0x1f3c93)].contourMaterial.uniforms):o==="slope"?(i=this.getSlopeContourMaterial(),r=i.materials.slopeRampMaterial[t(e._0x39022c)],s=i.materials[t(e._0x4231e2)].uniforms):o==="aspect"?(i=this[t(e._0x275117)](),r=i[t(e._0x14c26d)][t(e._0x31d624)].uniforms,s=i.materials[t(e._0x46495d)].uniforms):(i=Cesium__namespace.Material[t(1385)]("ElevationContour"),s=i[t(2949)]),s.width=this._contourWidth,s.spacing=this[t(e._0x547d2a)],s.color=this[t(3890)]):o==="elevation"?(i=Cesium__namespace.Material[t(1385)](t(e._0x2c4a83)),r=i.uniforms,r.minimumHeight=this[t(1890)],r.maximumHeight=this.maxHeight):o==="slope"?(i=Cesium__namespace.Material.fromType(t(e._0x45fc55)),r=i.uniforms):o==="aspect"&&(i=Cesium__namespace.Material[t(1385)](t(e._0x24f6ac)),r=i.uniforms),o!=="none"&&(r.image=this.getColorRamp(o)),o==="slope"||o==="aspect"){if(!this._map[t(744)].globe.enableLighting){this._map.scene[t(e._0x53d3fa)].enableLighting=!![];const c=new Date;c.setHours(10),this._map[t(e._0x4ca4f6)].currentTime=Cesium__namespace.JulianDate.fromDate(new Date(c)),this[t(e._0x548989)]=!![]}}else this._hasResetEnableLighting&&(this._map.scene.globe.enableLighting=![],this._map[t(e._0x4ca4f6)].currentTime=Cesium__namespace[t(e._0x18ec81)].now(),delete this._hasResetEnableLighting);this.contourUniforms=s,(!this._last_material||this[t(e._0x19ac19)].scene.globe[t(e._0x304a45)])&&(this[t(790)]=this[t(1575)].scene.globe.material),this._map.scene[t(e._0x53d3fa)][t(e._0x304a45)]=i}getColorRamp(e){const t={_0x3decdf:679,_0x201e15:400,_0x4ff55f:4088,_0x19ec58:1040},i=_0x3a2b68;var s;const r=document.createElement(i(t._0x3decdf));r.width=100,r.height=1;const o=r.getContext("2d",{willReadFrequently:!![]});o.globalAlpha=this.shadingAlpha;const c=o.createLinearGradient(0,0,100,0),_=this.colorScheme[e];if((_==null||(s=_.step)===null||s===void 0?void 0:s[i(t._0x201e15)])>0)for(let l=0,d=_.step.length;l<d;l++)c[i(t._0x4ff55f)](_.step[l],_[i(2540)][l]);return o[i(t._0x19ec58)]=c,o.fillRect(0,0,100,1),r}[_0x3a2b68(2523)](){const e=_0x3a2b68;return new Cesium__namespace.Material({fabric:{type:"ElevationColorContour",materials:{contourMaterial:{type:"ElevationContour"},elevationRampMaterial:{type:e(1537)}},components:{diffuse:"contourMaterial.alpha == 0.0 ? elevationRampMaterial.diffuse : contourMaterial.diffuse",alpha:"max(contourMaterial.alpha, elevationRampMaterial.alpha)"}},translucent:![]})}[_0x3a2b68(4248)](){const e={_0x42fb07:3264,_0x5b3cae:2123},t=_0x3a2b68;return new Cesium__namespace.Material({fabric:{type:t(e._0x42fb07),materials:{contourMaterial:{type:t(940)},slopeRampMaterial:{type:"SlopeRamp"}},components:{diffuse:t(e._0x5b3cae),alpha:"max(contourMaterial.alpha, slopeRampMaterial.alpha)"}},translucent:![]})}getAspectContourMaterial(){const e={_0x13814f:1296},t=_0x3a2b68;return new Cesium__namespace.Material({fabric:{type:"AspectColorContour",materials:{contourMaterial:{type:"ElevationContour"},aspectRampMaterial:{type:"AspectRamp"}},components:{diffuse:"contourMaterial.alpha == 0.0 ? aspectRampMaterial.diffuse : contourMaterial.diffuse",alpha:t(e._0x13814f)}},translucent:![]})}}class TerrainFlat extends TerrainEditBase{get analysisOptions(){const e={_0x1124e4:744},t=_0x3a2b68;var i,s,r,o,c,_;return(i=this._map)===null||i===void 0||(s=i[t(e._0x1124e4)])===null||s===void 0||(r=s.globe)===null||r===void 0||(o=r[t(921)])===null||o===void 0||(c=o.tileProvider)===null||c===void 0||(_=c.marsOptions)===null||_===void 0?void 0:_.flat}_enabledHook(e){this.analysisOptions.enabled=e}[_0x3a2b68(3916)](){const e=_0x3a2b68;this.clear(),this[e(4073)].enabled=![]}_updateAnalysisOptions(){const e=_0x3a2b68,t=[],i=[],s=[];this._areaList.forEach(r=>{const o=_0x20dc;if(!r.show||!r.positions)return;const c=this._map.scene.globe.ellipsoid.cartesianArrayToCartographicArray(r[o(2694)]);let _=c[0].height;c.forEach(l=>{_=Math.min(_,l.height)}),t.push(_-(r.height||0)),i[o(1754)](c),s.push(Cesium__namespace.Rectangle.fromCartographicArray(c))}),this.analysisOptions[e(1373)]=t,this.analysisOptions.rectangles=s,this.analysisOptions.areas=i}}class TerrainUplift extends TerrainEditBase{get analysisOptions(){const e={_0x77e738:1462,_0x5cb292:3207,_0x2ea594:4063},t=_0x3a2b68;var i,s,r,o,c,_;return(i=this._map)===null||i===void 0||(s=i[t(744)])===null||s===void 0||(r=s[t(e._0x77e738)])===null||r===void 0||(o=r[t(921)])===null||o===void 0||(c=o[t(e._0x5cb292)])===null||c===void 0||(_=c[t(e._0x2ea594)])===null||_===void 0?void 0:_.uplift}get showUp(){var e;return(e=this.analysisOptions)===null||e===void 0?void 0:e.showUp}set showUp(e){const t={_0x2a61c0:4073},i=_0x3a2b68;this[i(t._0x2a61c0)].showUp=e}get upHeight(){return this.options.upHeight??0}set upHeight(e){const t={_0x16e342:4073},i=_0x3a2b68;if(this.options.upHeight=e,this._areaList.length>0){this.analysisOptions.height=e,this[i(t._0x16e342)].hasUpdate=!![];for(let s=0;s<this._areaList.length;s++){const r=this._areaList[s];r[i(568)]&&r.upGraphic.setUpHeight(e)}}}_enabledHook(e){const t={_0x42ea86:3174},i=_0x3a2b68;this.analysisOptions[i(t._0x42ea86)]=e,this._graphicLayer&&(this._graphicLayer.show=e)}[_0x3a2b68(2679)](){const e={_0x31ca76:385,_0x33dd86:1462,_0x1c6e10:1575,_0x4610aa:4243},t=_0x3a2b68;this._map[t(744)].globe[t(e._0x31ca76)]===1&&(this._map.scene[t(e._0x33dd86)][t(e._0x31ca76)]=1.001),!this._map.scene.globe.depthTestAgainstTerrain&&(this[t(e._0x1c6e10)][t(744)].globe.depthTestAgainstTerrain=!![],this._hasChangeDepthTestAgainstTerrain=!![]),this[t(2505)]=new GraphicLayer({...this.options,private:!![]}),this._map[t(e._0x4610aa)](this._graphicLayer),super._addedHook()}[_0x3a2b68(3916)](){const e={_0x17b945:3174,_0x1118da:1575,_0x536e26:2033,_0x42a8d7:801,_0x323e59:744},t=_0x3a2b68;this.clear(),this.analysisOptions[t(e._0x17b945)]=![],this[t(e._0x1118da)][t(e._0x536e26)](this._graphicLayer,!![]),delete this._graphicLayer,this[t(e._0x42a8d7)]&&(this._map[t(e._0x323e59)].globe.depthTestAgainstTerrain=![],this._hasChangeDepthTestAgainstTerrain=![])}clear(){const e={_0x8b457d:2126},t=_0x3a2b68;super[t(e._0x8b457d)](),this[t(2505)].clear()}_addAreaHook(e,t){const i={_0x30dabf:1882,_0xf2855f:1575},s=_0x3a2b68;t={...this.options,...t},t.image&&t[s(i._0x30dabf)]&&computeSurfaceLine({map:this[s(i._0xf2855f)],positions:e.positions[s(4083)](e[s(2694)][0]),has3dtiles:![],splitNum:t.splitNum??30}).then(r=>{const o=s;e.positionsNew=r[o(2694)],this._addPitGraphic(e,t)})}[_0x3a2b68(2347)](e,t){const i={_0xf7f9d1:2164,_0x204163:1890,_0x156cc4:568},s=_0x3a2b68,r=e[s(592)],o=[];let c=Number.MAX_VALUE;for(let f=0,g=r.length;f<g;f++){const b=Cesium__namespace.Cartographic[s(2101)](r[f]);c=Math[s(2501)](c,b.height),o.push(b[s(4241)])}const _=c-t.diffHeight,l=Array(r[s(400)])[s(i._0xf7f9d1)](_);e[s(i._0x204163)]=c,e[s(1882)]=t.diffHeight,e.downGraphic=new PitEntity({style:t,data:{height:_,minHeight:c,positionsWall:r,minimumHeights:l,maximumHeights:o},positions:e.positions}),this._graphicLayer.addGraphic(e.downGraphic);const d=this.upHeight;this.showUp&&d!==0&&(e[s(568)]=new PitEntity({style:t,data:{height:_,minHeight:c,positionsWall:r,minimumHeights:l,maximumHeights:o},positions:e.positions}),this._graphicLayer[s(2847)](e[s(i._0x156cc4)]),e.upGraphic.setUpHeight(d))}_removeAreaHook(e){const t={_0x46c3a2:1195,_0x90092b:568},i=_0x3a2b68;e!=null&&e[i(t._0x46c3a2)]&&(this._graphicLayer.removeGraphic(e.downGraphic,!![]),delete e.downGraphic),e!=null&&e.upGraphic&&(this._graphicLayer[i(1155)](e[i(t._0x90092b)],!![]),delete e[i(568)])}[_0x3a2b68(450)](){const e={_0x59e8dd:4073,_0x140989:1908},t={_0x56583c:1462},i=_0x3a2b68,s=[],r=[];this._areaList.forEach(o=>{const c=_0x20dc;if(!o[c(442)]||!o.positions)return;const _=this._map.scene[c(t._0x56583c)].ellipsoid.cartesianArrayToCartographicArray(o.positions);s[c(1754)](_),r[c(1754)](Cesium__namespace[c(1983)].fromCartographicArray(_))}),this.analysisOptions.height=this.upHeight,this[i(e._0x59e8dd)].rectangles=r,this[i(4073)][i(e._0x140989)]=s}}class TerrainClip extends TerrainEditBase{get analysisOptions(){const e=_0x3a2b68;var t,i,s,r,o,c;return(t=this._map)===null||t===void 0||(i=t.scene)===null||i===void 0||(s=i.globe)===null||s===void 0||(r=s._surface)===null||r===void 0||(o=r.tileProvider)===null||o===void 0||(c=o.marsOptions)===null||c===void 0?void 0:c[e(2069)]}get clipOutSide(){const e=_0x3a2b68;var t;return(t=this[e(4073)])===null||t===void 0?void 0:t.onlySelf}set clipOutSide(e){this.analysisOptions.onlySelf=e}get diffHeight(){return this.options.diffHeight}set diffHeight(e){this.options.diffHeight=e,this._graphicLayer&&this._graphicLayer.eachGraphic(t=>{t.diffHeight=e})}[_0x3a2b68(2024)](e){const t=_0x3a2b68;this[t(4073)].enabled=e,this._graphicLayer&&(this[t(2505)].show=e)}[_0x3a2b68(2679)](){const e={_0x42e86d:1462,_0x28e2cd:705,_0x167ebe:2679},t=_0x3a2b68;!this._map.scene[t(e._0x42e86d)].depthTestAgainstTerrain&&(this._map.scene[t(1462)].depthTestAgainstTerrain=!![],this._hasChangeDepthTestAgainstTerrain=!![]),this[t(2505)]=new GraphicLayer({...this[t(1941)],private:!![]}),this._map[t(4243)](this[t(2505)]),this.clipOutSide=this.options[t(e._0x28e2cd)]??![],super[t(e._0x167ebe)]()}_removedHook(){const e=_0x3a2b68;this.clear(),this.analysisOptions.enabled=![],this._map.removeLayer(this._graphicLayer,!![]),delete this[e(2505)],this._hasChangeDepthTestAgainstTerrain&&(this._map.scene[e(1462)].depthTestAgainstTerrain=![],this._hasChangeDepthTestAgainstTerrain=![])}clear(){super.clear(),this._graphicLayer.clear()}[_0x3a2b68(414)](e,t){const i={_0x5c87b2:1882,_0x29ec91:2505},s=_0x3a2b68;t={...this.options,...t},t.image&&t[s(i._0x5c87b2)]&&(e.pitPrimitive=new Pit({style:t,positions:e.positions}),this[s(i._0x29ec91)].addGraphic(e[s(1792)]))}[_0x3a2b68(3186)](e){e!=null&&e.pitPrimitive&&(this._graphicLayer.removeGraphic(e.pitPrimitive,!![]),delete e.pitPrimitive)}}class LimitHeight extends BaseThing{get layer(){return this[_0x3a2b68(4053)]}get[_0x3a2b68(2694)](){return this.options.positions}set positions(e){this.options.positions=e,this._createGraphic()}get height(){const e=_0x3a2b68;return this.options[e(4241)]||0}set height(e){const t={_0x45af98:2929},i=_0x3a2b68;this.options.height=e,this[i(t._0x45af98)]()}get bottomHeight(){const e=_0x3a2b68;return this[e(1941)][e(2070)]||0}set[_0x3a2b68(2070)](e){const t={_0x50a3f6:2070},i=_0x3a2b68;this.options[i(t._0x50a3f6)]=e,this._createGraphic()}_mountedHook(){this._layer=new GraphicLayer({private:!![]})}_addedHook(){const e={_0x570538:1941},t=_0x3a2b68;this[t(1575)].addLayer(this._layer),this.options.positions&&(this[t(2694)]=this[t(e._0x570538)].positions)}[_0x3a2b68(3916)](){this._graphic&&(this._layer.removeGraphic(this._graphic),delete this._graphic),this._map.removeLayer(this._layer)}[_0x3a2b68(2929)](){const e={_0x499467:4053,_0x53501c:4227,_0xfd83f9:2694,_0x14b161:4241},t=_0x3a2b68;if(this._graphic&&(this[t(e._0x499467)].removeGraphic(this._graphic),delete this[t(e._0x53501c)]),!this.options[t(e._0xfd83f9)])return;const i=LngLatArray[t(2249)](this.options[t(2694)]);this[t(e._0x53501c)]=new PolygonPrimitive({positions:i,style:{...this.options,height:this.bottomHeight+this[t(e._0x14b161)],diffHeight:1e4,perPositionHeight:![],classification:!![],classificationType:Cesium__namespace.ClassificationType.CESIUM_3D_TILE},asynchronous:![]}),this._layer[t(2847)](this._graphic)}clear(){const e=_0x3a2b68;this.options.positions=null,this._graphic&&(this._layer.removeGraphic(this._graphic),delete this[e(4227)])}}class ModelPlanClip extends TilesetPlanClip{get clipTarget(){return this._model}set[_0x3a2b68(4127)](e){const t={_0x519ea4:496},i=_0x3a2b68;this._model=e,this._inverseMatrix=null,this[i(t._0x519ea4)]&&(this[i(2121)][i(t._0x519ea4)]=this.clippingPlanes)}get graphic(){return this._graphic}set[_0x3a2b68(2471)](e){const t={_0xeffe52:3737},i={_0xf97051:2362},s=_0x3a2b68;if(e.readyPromise){e[s(2449)].then(r=>{const o=s;this._model=e[o(i._0xf97051)],this._modelMatrix=e[o(4238)]});return}this._graphic=e,e.entity?(this[s(2121)]=e[s(3764)].model,this._modelMatrix=Cesium__namespace.Transforms[s(778)](getPositionValue(e.position))):e instanceof Cesium__namespace.Entity?(this._model=e.model,this._modelMatrix=Cesium__namespace[s(t._0xeffe52)].eastNorthUpToFixedFrame(getPositionValue(e.position))):e.primitive?(this._model=e.primitive,this[s(3140)]=e[s(4238)]):e instanceof Cesium__namespace.Model&&(this[s(2121)]=e,this._modelMatrix=e.modelMatrix)}get[_0x3a2b68(3205)](){const e={_0x238e5e:2478,_0x10f8cc:672},t=_0x3a2b68;return!this._inverseMatrix&&this._modelMatrix&&(this._inverseMatrix=Cesium__namespace[t(e._0x238e5e)].inverseTransformation(this._modelMatrix,new Cesium__namespace.Matrix4)),this[t(e._0x10f8cc)]}_mountedHook(){const e={_0x7d6985:1941},t=_0x3a2b68;this[t(e._0x7d6985)][t(2471)]&&(this.graphic=this.options.graphic)}}ModelPlanClip[_0x3a2b68(859)]=ClipType;class TilesetBoxClip extends BaseThing{get clipTarget(){return this._tileset}set[_0x3a2b68(4127)](e){const t={_0x77521e:672,_0x404917:4076},i=_0x3a2b68;this._tileset=e,this[i(t._0x77521e)]=null,Cesium__namespace.defined(this[i(1941)].position)&&(this[i(t._0x404917)]=this.options.position)}get[_0x3a2b68(607)](){return this._layer}set layer(e){const t=_0x3a2b68;this._layer=e,e.loadOk?this.clipTarget=e[t(3466)]:e.on(EventType.load,i=>{this.clipTarget=e.tileset})}get planes(){return this[_0x3a2b68({_0x219d9d:496}._0x219d9d)]}get inverseMatrix(){const e={_0xc645ea:1964,_0x446928:494,_0x291733:1964,_0x8fb909:2057,_0x5a3efb:672,_0xeef2b2:2478,_0x379a78:672},t=_0x3a2b68;if(!this[t(672)]){let i;const s=this[t(e._0xc645ea)].root[t(3732)];s&&s[t(e._0x446928)](Cesium__namespace.Matrix4.IDENTITY)||!s?i=Cesium__namespace.Transforms.eastNorthUpToFixedFrame(this[t(e._0x291733)][t(e._0x8fb909)].center):i=Cesium__namespace.Matrix4[t(1125)](this[t(1964)].root.transform),this[t(e._0x5a3efb)]=Cesium__namespace.Matrix4.inverseTransformation(i,new Cesium__namespace[t(e._0xeef2b2)])}return this[t(e._0x379a78)]}get center(){const e=_0x3a2b68;return this[e(4053)]?this[e(4053)].position:this._tileset.boundingSphere.center}get position(){return this._position}set position(e){const t={_0x4172a9:572},i=_0x3a2b68;this._position=LngLatPoint.toCartesian(e),this[i(t._0x4172a9)]()}get dimensions(){return this.options.dimensions}set dimensions(e){const t={_0xa93e7e:2698},i=_0x3a2b68;this.options[i(t._0xa93e7e)]=e,this.redraw()}get showBox(){return this.options.showBox}set showBox(e){const t={_0x44f3c2:442,_0x585e06:442},i=_0x3a2b68;this.options.showBox=e,this.options.showBox?(!this._graphicLayer&&(this[i(2505)]=new GraphicLayer({...this.options,private:!![]})),this._graphicLayer[i(t._0x44f3c2)]=!![]):this._graphicLayer&&(this._graphicLayer[i(t._0x585e06)]=![]),this.redraw()}_mountedHook(){const e={_0x5220aa:1941},t=_0x3a2b68;this.options.showBox&&(this._graphicLayer=new GraphicLayer({...this[t(1941)],private:!![]})),this[t(e._0x5220aa)][t(607)]?this.layer=this.options.layer:this.options.tileset&&(this.clipTarget=this.options.tileset)}[_0x3a2b68(2679)](){const e={_0x113ddd:4243},t=_0x3a2b68;this._graphicLayer&&this._map[t(e._0x113ddd)](this._graphicLayer),this.clipTarget&&Cesium__namespace.defined(this.options.position)&&(this.position=this.options.position)}_removedHook(){const e={_0x348409:2033,_0x43661b:2505},t=_0x3a2b68;this.clear(),this._graphicLayer&&this[t(1575)][t(e._0x348409)](this[t(e._0x43661b)])}redraw(){const e={_0xb5b363:3705,_0x332102:4066,_0xb74819:1941,_0x22ec10:598},t=_0x3a2b68;if(!this.position||!this.dimensions)return;const i=this.dimensions.x/2,s=this.dimensions.y/2,r=this.dimensions.z/2,o=this.inverseMatrix,c=Cesium__namespace[t(2478)].multiplyByPoint(o,this.center,new Cesium__namespace.Cartesian3),_=Cesium__namespace.Matrix4[t(e._0xb5b363)](o,this.position,new Cesium__namespace.Cartesian3),l=c.x-_.x,d=c.y-_.y,f=c.z-_.z,g=[new Cesium__namespace.ClippingPlane(new Cesium__namespace.Cartesian3(0,0,1),-r+f),new Cesium__namespace.ClippingPlane(new Cesium__namespace.Cartesian3(0,0,-1),-r-f),new Cesium__namespace.ClippingPlane(new Cesium__namespace.Cartesian3(1,0,0),-i+l),new Cesium__namespace.ClippingPlane(new Cesium__namespace.Cartesian3(-1,0,0),-i-l),new Cesium__namespace.ClippingPlane(new Cesium__namespace.Cartesian3(0,1,0),-s+d),new Cesium__namespace[t(e._0x332102)](new Cesium__namespace.Cartesian3(0,-1,0),-s-d)],b=new Cesium__namespace.ClippingPlaneCollection({planes:g,edgeWidth:this[t(e._0xb74819)].edgeWidth??0,edgeColor:this.options.edgeColor??Cesium__namespace.Color[t(1948)],unionClippingRegions:this.options.clipOutSide??![]});if(this.clippingPlanes=b,this[t(4127)]&&(this[t(4127)].clippingPlanes=b),this.options.showBox){this._graphicLayer.clear();const C=new BoxEntity({position:this[t(4076)],style:{dimensions:this.options.dimensions,color:Cesium__namespace.Color.WHITE.withAlpha(.2),...this[t(1941)][t(e._0x22ec10)]}});this._graphicLayer.addGraphic(C)}}clear(){const e={_0x57d99e:4127},t=_0x3a2b68;var i,s;this._graphicLayer&&this._graphicLayer.clear(),this.clippingPlanes&&delete this.clippingPlanes,(i=this.clipTarget)!==null&&i!==void 0&&(s=i.clippingPlanes)!==null&&s!==void 0&&s.enabled&&(this[t(e._0x57d99e)].clippingPlanes.enabled=![]),this.clipTarget.clippingPlanes=void 0}}var TilesetShakeVS=_0x3a2b68(4284),TilesetShakeFS=`void fragmentMain(FragmentInput fsInput, inout czm_modelMaterial material) {
  if(v_inRange > 0.0) {
    if(u_mars3d_snake_inRangeColor.a != 0.0)
      material.diffuse = mix(material.diffuse, u_mars3d_snake_inRangeColor.rgb, u_mars3d_snake_inRangeColor.a);
  } else if(u_mars3d_snake_outRangeColor.a != 0.0) {
    material.diffuse = mix(material.diffuse, u_mars3d_snake_outRangeColor.rgb, u_mars3d_snake_outRangeColor.a);
  }
}
`;const DEF_OPTIONS$1={maxDistance:10,duration:1e3,maxHeight:120,inRangeColor:_0x3a2b68(1713),outRangeColor:"rgba(0,0,0,0)"};class TilesetShake extends BaseThing{constructor(e={}){const t={_0xf08093:2784},i=_0x3a2b68;e={...DEF_OPTIONS$1,...e},super(e),!isMars3DCesium&&logError$1(i(t._0xf08093),this)}get layer(){return this[_0x3a2b68({_0x5eb10d:4053}._0x5eb10d)]}set layer(e){const t={_0xa85a65:2449},i=_0x3a2b68;this._layer=e,e[i(t._0xa85a65)].then(s=>{const r=i;this._center=e.center[r(1536)](),this._initLayer()})}get positions(){const e={_0x51c7b7:2694},t=_0x3a2b68;return this.options[t(e._0x51c7b7)]}set[_0x3a2b68(2694)](e){const t=_0x3a2b68;var i;this.options.positions=e,this._texture=this._getTexture(),this._uniforms[t(2751)].value=((i=this._texture)===null||i===void 0?void 0:i.width)||1}get[_0x3a2b68(2231)](){const e={_0x272389:2231},t=_0x3a2b68;return this.options[t(e._0x272389)]}set maxDistance(e){const t=_0x3a2b68;this.options[t(2231)]=e,this._uniforms.u_mars3d_snake_maxDistance.value=e}get duration(){const e={_0x3a199d:2096},t=_0x3a2b68;return this.options[t(e._0x3a199d)]}set duration(e){this.options.duration=e}get maxHeight(){return this[_0x3a2b68({_0x307407:1941}._0x307407)].maxHeight}set[_0x3a2b68(2627)](e){this.options.maxHeight=e,this._uniforms.u_mars3d_snake_maxHeight.value=e}get[_0x3a2b68(3540)](){return this.options.inRangeColor}set inRangeColor(e){const t=_0x3a2b68;this.options.inRangeColor=e,this[t(3439)].u_mars3d_snake_inRangeColor.value=getCesiumColor(e)}get outRangeColor(){return this.options.outRangeColor}set outRangeColor(e){const t={_0xda302a:1993,_0x2a6315:3757,_0x501b31:2251},i=_0x3a2b68;this[i(1941)][i(t._0xda302a)]=e,this._uniforms[i(t._0x2a6315)][i(t._0x501b31)]=getCesiumColor(e)}[_0x3a2b68(2679)](){const e=_0x3a2b68;this._texture=this._getTexture(),this.options.layer&&(this[e(607)]=this.options[e(607)])}_removedHook(){const e={_0x2d4a46:1771},t=_0x3a2b68;Cesium__namespace.defined(this._texture)&&(this._texture.destroy(),this._texture=void 0),this[t(1771)]&&this[t(e._0x2d4a46)]()}_initLayer(){const e={_0x49d9bd:4045,_0x33340b:607},t={_0xee8fdf:1173},i=_0x3a2b68;var s;const r=this._getCustomShader();if((s=Cesium__namespace[i(e._0x49d9bd)])!==null&&s!==void 0&&s.getCacheOrAdd){const o=Cesium__namespace.Mars3DEx.getCacheOrAdd(this[i(e._0x33340b)].id);o.shake=r,this[i(1771)]=function(){const c=i;delete o[c(t._0xee8fdf)]}}}[_0x3a2b68(2013)](){const e={_0x88ae46:768,_0x4dae5a:2778,_0x2860b9:2940,_0x5cd0de:2478,_0x15b0b7:1829,_0x1509d6:1248,_0xbcb667:1941,_0x3befe9:4112,_0x4c5c1d:982,_0x1c6bf2:2092},t=_0x3a2b68;var i;const s=Cesium__namespace.Cartesian3.fromRadians(this._center[t(e._0x88ae46)],this[t(4286)][t(3664)],40),r=Cesium__namespace[t(1245)][t(1859)][t(e._0x4dae5a)](s),o=Cesium__namespace.Plane[t(e._0x2860b9)](s,r),c=new Cesium__namespace.Cartesian3(0,1,0);Cesium__namespace.Cartesian3.cross(c,o.normal,c),Cesium__namespace.Cartesian3.normalize(c,c);const _=Cesium__namespace.Cartesian3.cross(o.normal,c,new Cesium__namespace[t(2978)]);Cesium__namespace[t(2978)].normalize(_,_);const l=new Cesium__namespace.Matrix4(c.x,_.x,o.normal.x,s.x,c.y,_.y,o.normal.y,s.y,c.z,_.z,o.normal.z,s.z,0,0,0,1),d=Cesium__namespace[t(e._0x5cd0de)][t(2853)](l,l),f=new Cesium__namespace.CustomShader({varyings:{v_inRange:Cesium__namespace[t(2802)][t(1248)]},uniforms:{u_mars3d_snake_planeNormal:{type:Cesium__namespace.UniformType.VEC3,value:o[t(e._0x15b0b7)]},u_mars3d_snake_planeDistance:{type:Cesium__namespace.UniformType.FLOAT,value:o.distance},u_mars3d_snake_maxHeight:{type:Cesium__namespace.UniformType[t(e._0x1509d6)],value:this.options.maxHeight},u_mars3d_snake_maxDistance:{type:Cesium__namespace.UniformType.FLOAT,value:this[t(e._0xbcb667)].maxDistance},u_mars3d_snake_inversePlaneMatrix:{type:Cesium__namespace.UniformType.MAT4,value:d},u_mars3d_snake_rangeLength:{type:Cesium__namespace.UniformType.INT,value:((i=this[t(e._0x3befe9)])===null||i===void 0?void 0:i[t(517)])||1},u_mars3d_snake_inRangeColor:{type:Cesium__namespace[t(e._0x4c5c1d)].VEC4,value:Cesium__namespace[t(e._0x1c6bf2)][t(523)].withAlpha(.5)},u_mars3d_snake_outRangeColor:{type:Cesium__namespace.UniformType.VEC4,value:Cesium__namespace.Color.TRANSPARENT}},fragmentShaderText:TilesetShakeFS,vertexShaderText:TilesetShakeVS});f.uniformMap.u_mars3d_snake_showAll=()=>!this._texture;const g=this._map.scene._context[t(4388)];return f.uniformMap[t(1883)]=()=>this._texture||g,f.uniformMap.u_mars3d_snake_time=()=>performance.now()/this.options.duration,this._uniforms=f.uniforms,f}_getTexture(){const e={_0x378bbc:1009,_0x31324d:4328,_0x38415f:4333,_0x30be4e:3768},t={_0x2c8bf6:1754},i=_0x3a2b68;if(Cesium__namespace.defined(this._texture)&&(this._texture.destroy(),this._texture=void 0),!this.options.positions||this.options.positions.length<3)return null;const s=LngLatArray.toCartesians(this[i(1941)].positions),r=[];return s.forEach(c=>{const _=i,l=Cesium__namespace.Cartesian3[_(1085)](c,new Cesium__namespace.Cartesian3);r[_(1754)](l.x),r.push(l.y),r[_(t._0x2c8bf6)](l.z),r.push(c.x/l.x)}),new Cesium__namespace.Texture({context:this._map.scene._context,pixelFormat:Cesium__namespace.PixelFormat.RGBA,pixelDatatype:Cesium__namespace.PixelDatatype.FLOAT,sampler:new Cesium__namespace[i(e._0x378bbc)]({wrapS:Cesium__namespace.TextureWrap.CLAMP_TO_EDGE,wrapT:Cesium__namespace.TextureWrap.CLAMP_TO_EDGE,minificationFilter:Cesium__namespace[i(e._0x31324d)][i(e._0x38415f)],magnificationFilter:Cesium__namespace[i(e._0x30be4e)].NEAREST}),flipY:![],source:{width:s.length,height:1,arrayBufferView:new Float32Array(r)}})}}const scratchCurrentDirection=new Cesium__namespace[_0x3a2b68(2978)],scratchDeltaPosition=new Cesium__namespace.Cartesian3,scratchNextPosition=new Cesium__namespace.Cartesian3,scratchTerrainConsideredNextPosition=new Cesium__namespace.Cartesian3,scratchNextCartographic=new Cesium__namespace.Cartographic,RoamType={DIRECTION_NONE:0,DIRECTION_FORWARD:1,DIRECTION_BACKWARD:2,DIRECTION_LEFT:3,DIRECTION_RIGHT:4};class FirstPersonRoam extends BaseThing{constructor(e={}){const t={_0x152a29:1941,_0x2ef8b3:4241,_0x3d0234:1941},i=_0x3a2b68;super(e),this[i(4385)]=this[i(t._0x152a29)][i(4385)]??1.5,this[i(1060)]=this[i(1941)].rotateSpeed??-5,this[i(t._0x2ef8b3)]=this[i(t._0x3d0234)].height??10,this.maxPitch=this[i(1941)].maxPitch??88}_enabledHook(e){e?this.activate():this.disable()}_mountedHook(){}_addedHook(){const e={_0x5e8edb:1840},t=_0x3a2b68;this.enabled&&this[t(1669)](),this._map.on(EventType.leftDown,this._onLeftDownHandler,this),this[t(1575)].on(EventType.leftUp,this._onLeftUpHandler,this),this._map.on(EventType[t(e._0x5e8edb)],this._onMouseMoveHandler,this),this._map.on(EventType.dblClick,this._onDbClickHandler,this),this._map.on(EventType[t(4185)],this._onKeyDown,this),this[t(1575)].on(EventType[t(2182)],this._onKeyUp,this),this._map.on(EventType.clockTick,this[t(2334)],this)}_removedHook(){const e={_0x55d4ef:3921,_0x176ef0:1459,_0x4f2ca0:3767,_0x14c4d4:2971,_0x456722:4273},t=_0x3a2b68;this.disable(),this[t(1575)].off(EventType.leftDown,this._onLeftDownHandler,this),this._map.off(EventType[t(e._0x55d4ef)],this[t(1594)],this),this._map.off(EventType[t(1840)],this._onMouseMoveHandler,this),this._map.off(EventType[t(e._0x176ef0)],this[t(e._0x4f2ca0)],this),this._map.off(EventType.keydown,this._onKeyDown,this),this._map[t(e._0x14c4d4)](EventType.keyup,this._onKeyUp,this),this._map.off(EventType[t(e._0x456722)],this._onClockTick,this)}[_0x3a2b68(1011)](e){const t={_0x47c0e3:2978},i=_0x3a2b68;this.enabled&&(this[i(612)]=!![],this._startMousePosition=Cesium__namespace[i(t._0x47c0e3)].clone(e[i(4076)]),this[i(3250)]=this._startMousePosition)}[_0x3a2b68(3767)](e){this.enabled&&(this._looking=!![],this._startMousePosition=Cesium__namespace.Cartesian3.clone(e.position),this._mousePosition=this._startMousePosition)}_onLeftUpHandler(e){this._looking=![]}[_0x3a2b68(841)](e){const t=_0x3a2b68;this._mousePosition=e[t(1127)]}[_0x3a2b68(1491)](e){const t=_0x3a2b68;if(!this.enabled)return;const i=e.keyCode;switch(this._direction=RoamType.DIRECTION_NONE,i){case"W"[t(1982)](0):this[t(544)]=RoamType.DIRECTION_FORWARD;break;case"S".charCodeAt(0):this._direction=RoamType.DIRECTION_BACKWARD;break;case"D".charCodeAt(0):this[t(544)]=RoamType[t(871)];break;case"A".charCodeAt(0):this._direction=RoamType.DIRECTION_LEFT;break}}[_0x3a2b68(1696)](){const e=_0x3a2b68;this[e(3174)]&&(this._direction=RoamType[e(570)])}_onClockTick(e){const t={_0x5b2128:544,_0x49a881:3294,_0x525c45:2978,_0x3ee72b:3763,_0x4564ea:3045,_0x419ee0:1575,_0x3c74a3:595,_0x42c3d5:4241,_0x20c727:2336,_0x396b04:1575,_0x42ba1b:1630},i=_0x3a2b68;if(!this.enabled)return;const s=e[i(1102)];if(this[i(612)]&&this._changeHeadingPitch(s),this._direction===RoamType.DIRECTION_NONE)return;const r=this.speed*s;this[i(t._0x5b2128)]===RoamType[i(t._0x49a881)]?Cesium__namespace[i(t._0x525c45)].multiplyByScalar(this._map[i(4233)][i(t._0x3ee72b)],1,scratchCurrentDirection):this._direction===RoamType.DIRECTION_BACKWARD?Cesium__namespace.Cartesian3.multiplyByScalar(this._map.camera.direction,-1,scratchCurrentDirection):this._direction===RoamType[i(t._0x4564ea)]?Cesium__namespace.Cartesian3[i(2080)](this[i(t._0x419ee0)].camera.right,-1,scratchCurrentDirection):this._direction===RoamType.DIRECTION_RIGHT&&Cesium__namespace.Cartesian3.multiplyByScalar(this[i(1575)].camera[i(t._0x3c74a3)],1,scratchCurrentDirection),Cesium__namespace.Cartesian3[i(2080)](scratchCurrentDirection,r,scratchDeltaPosition);const o=this._map[i(4233)].position;Cesium__namespace.Cartesian3[i(3674)](o,scratchDeltaPosition,scratchNextPosition);const c=this[i(1575)].scene.globe,_=c[i(3404)];_.cartesianToCartographic(scratchNextPosition,scratchNextCartographic);const l=c[i(4026)](scratchNextCartographic);l!==void 0&&(scratchNextCartographic.height=l+this[i(t._0x42c3d5)],_.cartographicToCartesian(scratchNextCartographic,scratchTerrainConsideredNextPosition),this._map.camera[i(t._0x20c727)]({destination:scratchTerrainConsideredNextPosition,orientation:new Cesium__namespace.HeadingPitchRoll(this[i(t._0x396b04)].camera.heading,this._map[i(4233)][i(t._0x42ba1b)],this._map.camera.roll),endTransform:Cesium__namespace.Matrix4.IDENTITY}))}_changeHeadingPitch(e){const t={_0x4e06cc:3250,_0x225114:2806,_0x4499bf:1630,_0x47fafd:4244},i=_0x3a2b68,s=this._map.canvas.clientWidth,r=this._map.canvas.clientHeight,o=(this._mousePosition.x-this._startMousePosition.x)/s,c=-(this[i(t._0x4e06cc)].y-this[i(3558)].y)/r,_=Cesium__namespace.Math.toDegrees(this._map.camera.heading),l=o*this[i(1060)],d=_+l,f=Cesium__namespace[i(t._0x225114)].toDegrees(this._map[i(4233)][i(t._0x4499bf)]),g=c*this.rotateSpeed;let b=f+g;b>this.maxPitch*2&&b<360-this.maxPitch?b=360-this[i(t._0x47fafd)]:b>this.maxPitch&&b<360-this[i(t._0x47fafd)]&&(b=this[i(4244)]),this._map.camera[i(2336)]({orientation:{heading:Cesium__namespace.Math.toRadians(d),pitch:Cesium__namespace.Math.toRadians(b),roll:this._map.camera.roll}})}[_0x3a2b68(3520)](e){const t={_0x465051:3928,_0x1b728a:1796,_0x42db6c:2312},i=_0x3a2b68,s=this._map[i(744)];s[i(3928)].enableRotate=e,s[i(t._0x465051)][i(t._0x1b728a)]=e,s[i(3928)][i(t._0x42db6c)]=e,s[i(3928)].enableTilt=e,s.screenSpaceCameraController[i(1445)]=e}activate(){const e={_0xd5af78:3402,_0x5bb9c6:4026,_0x43a9cf:1666,_0x4faa93:1575,_0xf94ab3:1185},t=_0x3a2b68;this._enabled=!![],this._enableScreenSpaceCameraController(![]);const i=this[t(1575)].camera.position,s=new Cesium__namespace.Cartographic,r=this._map[t(744)].globe;r.ellipsoid[t(e._0xd5af78)](i,s);const o=r[t(e._0x5bb9c6)](s);if(o===void 0)return![];s.height=o+this.height;const c=new Cesium__namespace.Cartesian3;r.ellipsoid[t(e._0x43a9cf)](s,c);const _=this._map.camera[t(2782)];return this._heading=_,this[t(e._0x4faa93)].camera[t(2961)]({destination:c,orientation:{heading:_,pitch:Cesium__namespace.Math[t(e._0xf94ab3)](0),roll:0}}),!![]}disable(){this._enabled=![],this._enableScreenSpaceCameraController(!![])}startAutoForward(){const e=_0x3a2b68;!this[e(3174)]&&this.activate(),this._direction=RoamType[e(3294)]}stopAutoForward(){const e=_0x3a2b68;this._direction=RoamType[e(570)]}}class RotatePoint extends BaseThing{constructor(e={}){const t={_0x401892:1941,_0x25034a:1941},i=_0x3a2b68;super(e),this._direction=this[i(t._0x401892)].direction?1:-1,this._angle=360/(60*(this.options.time||60)),this[i(3616)]=this[i(t._0x25034a)].autoStopAngle}get isStart(){return this._isStart}_enabledHook(e){e?this[_0x3a2b68({_0x4876af:3702}._0x4876af)]():this.stop()}_mountedHook(){}_addedHook(){const e={_0x5d075d:2960,_0x1078d0:3030},t=_0x3a2b68;this._map.on(EventType[t(3085)],this[t(774)],this),this._map.on(EventType[t(e._0x5d075d)],this._map_mouseUpHandler,this),this[t(e._0x1078d0)]=![]}[_0x3a2b68(774)](e){this._mouseDown=!![]}_map_mouseUpHandler(e){const t={_0x5949da:2901,_0x1df233:1575,_0x4eda84:4233,_0x1f08eb:2782,_0x39bebc:860},i=_0x3a2b68;this._mouseDown=![];const s=this._map[i(4159)]();!s||s.alt>5e5||(this[i(t._0x5949da)]=0,this._center=s.toCartesian(),this[i(2577)]=this[i(t._0x1df233)][i(t._0x4eda84)][i(t._0x1f08eb)],this[i(t._0x39bebc)]=this._map.camera.pitch,this._distance=Cesium__namespace.Cartesian3.distance(this[i(4286)],this._map.camera[i(440)]))}_removedHook(){this._map.off(EventType.mouseDown,this._map_mouseDownHandler,this),this._map.off(EventType.mouseUp,this._map_mouseUpHandler,this),this.stop()}start(e){const t={_0x3fd73e:2978,_0x2e2da7:440,_0x4fb082:2577,_0xc777c1:2782,_0x3c6480:860,_0x31ad83:2978,_0x475e14:1575},i={_0x484683:2901,_0x3bc443:1575},s=_0x3a2b68;var r;this._isStart&&this[s(2682)](),this._isStart=!![];const o=(r=this._map.getCenter())===null||r===void 0?void 0:r.toCartesian();e?e instanceof Cesium__namespace.Cartesian3?this._center=e:this._center=LngLatPoint[s(738)](e).toCartesian():this._center=o,this._distance=this.options.distance||Cesium__namespace[s(t._0x3fd73e)].distance(this._center,this[s(1575)].camera[s(t._0x2e2da7)]),this[s(t._0x4fb082)]=this._map.camera[s(t._0xc777c1)],this[s(t._0x3c6480)]=this._map[s(4233)].pitch;let c=2;Cesium__namespace[s(t._0x31ad83)].distance(o,this[s(4286)])<this._distance*.01&&(c=0),this.fire(EventType.start),this[s(t._0x475e14)].flyToPoint(this._center,{radius:this._distance,duration:c,complete:_=>{const l=s;this[l(3967)]=!![],this[l(i._0x484683)]=0,this[l(i._0x3bc443)].on(EventType.preRender,this[l(1274)],this)}})}_onPreRenderHandler(e){const t={_0x5796dd:2577,_0x65e649:4286,_0xfaf056:744},i=_0x3a2b68;if(this._mouseDown)return;this._tikRender++;const s=this[i(2901)]*this._angle;this._autoStopAngle&&s>=this._autoStopAngle&&this.stop();const r=Cesium__namespace.Math.toRadians(s*this._direction)+this[i(t._0x5796dd)];this._map.scene.camera[i(2336)]({destination:this[i(t._0x65e649)],orientation:{heading:r,pitch:this[i(860)]}}),this[i(1575)][i(t._0xfaf056)].camera.moveBackward(this[i(3847)]),this[i(1109)](EventType.change)}stop(){const e={_0x199ea9:1109},t=_0x3a2b68;this._isStart&&(this._isStart=![],this._map.off(EventType.preRender,this._onPreRenderHandler,this),this[t(e._0x199ea9)](EventType.stop))}}const MAX_PITCH_IN_DEGREE=88;class StreetView extends BaseThing{constructor(e={}){const t={_0x1197b5:3756,_0x34a637:1935},i=_0x3a2b68;super(e),this.rotateSpeed=e.rotateSpeed??30,this[i(t._0x1197b5)]=e.heightStep??.2,this[i(t._0x34a637)]=e[i(1935)]??.1}_enabledHook(e){const t={_0x5ccf4f:2831,_0x5df158:744,_0xcbe5e5:976,_0x54c7bc:1946,_0x5aca26:2190,_0x4dd7d7:1575},i=_0x3a2b68;this._map[i(t._0x5ccf4f)]&&(this[i(1575)][i(t._0x5ccf4f)].enabled=!e),e?(this._default_zoomEventTypes=this[i(1575)][i(t._0x5df158)].screenSpaceCameraController[i(t._0xcbe5e5)],this._default_tiltEventTypes=this._map[i(744)].screenSpaceCameraController.tiltEventTypes,this._map[i(744)].screenSpaceCameraController.zoomEventTypes=[Cesium__namespace.CameraEventType[i(1726)],Cesium__namespace.CameraEventType.PINCH,{eventType:Cesium__namespace.CameraEventType.RIGHT_DRAG,modifier:Cesium__namespace.KeyboardEventModifier[i(t._0x54c7bc)]}],this._map[i(t._0x5df158)].screenSpaceCameraController[i(t._0x5aca26)]=[{eventType:Cesium__namespace.CameraEventType.MIDDLE_DRAG,modifier:Cesium__namespace.KeyboardEventModifier[i(1946)]}]):(this._default_zoomEventTypes&&(this[i(t._0x4dd7d7)].scene[i(3928)].zoomEventTypes=this._default_zoomEventTypes,delete this._default_zoomEventTypes),this._default_tiltEventTypes&&(this[i(1575)].scene.screenSpaceCameraController.tiltEventTypes=this._default_tiltEventTypes,delete this._default_tiltEventTypes))}[_0x3a2b68(585)](){}_addedHook(){const e={_0x3ac00e:1854,_0x23d4f6:1575,_0x334d07:1441,_0x37f354:1575,_0x5edb04:1575},t=_0x3a2b68;this._enabledHook(this.enabled),this[t(1575)].on(EventType[t(2395)],this._onRightDownHandler,this),this._map.on(EventType[t(1840)],this[t(e._0x3ac00e)],this),this[t(e._0x23d4f6)].on(EventType[t(e._0x334d07)],this._onRightUpHandler,this),this[t(e._0x37f354)].on(EventType[t(3718)],this[t(993)],this),this[t(e._0x5edb04)].on(EventType.middleUp,this._onMiddleUpHandler,this),this._map.on(EventType.click,this._onClickHandler,this),this._map.on(EventType[t(1459)],this._onDbClickHandler,this),this[t(1575)].on(EventType.rightClick,this._onRightClickHandler,this)}[_0x3a2b68(3916)](){const e={_0x278c67:1575,_0x3f1c28:2971,_0x555c9c:1575,_0x53a444:625,_0x173224:349},t=_0x3a2b68;this._enabledHook(![]),this[t(e._0x278c67)].off(EventType.rightDown,this._onRightDownHandler,this),this[t(1575)][t(e._0x3f1c28)](EventType.mouseMove,this._onMouseMove,this),this[t(e._0x555c9c)].off(EventType.rightUp,this[t(1163)],this),this[t(1575)].off(EventType[t(3718)],this._onMiddleDownHandler,this),this._map.off(EventType.middleUp,this[t(3386)],this),this._map.off(EventType.click,this._onClickHandler,this),this[t(e._0x278c67)][t(2971)](EventType.dblClick,this._onDbClickHandler,this),this._map.off(EventType.rightClick,this._onRightClickHandler,this),this.rotatePoint&&(this._map[t(e._0x53a444)](this[t(349)],!![]),delete this[t(e._0x173224)])}_onRightDownHandler(e){const t={_0x1f3eba:2957,_0x1d73d0:2806},i=_0x3a2b68;this.enabled&&(this[i(349)]&&this.rotatePoint.stop(),this._isMouseLeftButtonPressed=!![],this[i(3250)]=this._startMousePosition=Cesium__namespace.Cartesian3[i(t._0x1f3eba)](e.position),this[i(3759)]=Cesium__namespace[i(t._0x1d73d0)].toDegrees(this[i(1575)].camera.heading),this._pitchWhenLeftClicked=Cesium__namespace.Math[i(3501)](this._map[i(4233)].pitch))}_onMouseMove(e){const t={_0x417a8e:1934,_0x5cfb69:424,_0x597c17:4233,_0x439e7f:2336,_0x18d9d8:2806,_0x21d396:4241,_0x2efcb7:1575},i=_0x3a2b68;if(this.enabled){if(this._mousePosition=e.endPosition,this[i(t._0x417a8e)]){const s=this._map.canvas.clientWidth,r=this[i(1575)].canvas[i(t._0x5cfb69)],o=(this._mousePosition.x-this._startMousePosition.x)/s,c=-(this._mousePosition.y-this[i(3558)].y)/r;if(Cesium__namespace.Math[i(2991)](o,0,Cesium__namespace[i(2806)].EPSILON6)&&Cesium__namespace[i(2806)].equalsEpsilon(c,0,Cesium__namespace.Math.EPSILON6))return;const _=o*this.rotateSpeed,l=this._headingWhenLeftClicked+_,d=c*this.rotateSpeed;let f=this._pitchWhenLeftClicked+d;f>MAX_PITCH_IN_DEGREE*2&&f<360-MAX_PITCH_IN_DEGREE?f=360-MAX_PITCH_IN_DEGREE:f>MAX_PITCH_IN_DEGREE&&f<360-MAX_PITCH_IN_DEGREE&&(f=MAX_PITCH_IN_DEGREE),this._map[i(t._0x597c17)][i(t._0x439e7f)]({orientation:{heading:Cesium__namespace.Math.toRadians(l),pitch:Cesium__namespace[i(t._0x18d9d8)].toRadians(f),roll:this._map.camera.roll}})}else if(this._isMouseUpdownPressed){const s=-(this._mousePosition.y-this[i(3558)].y)/this._map[i(679)][i(424)],r=this[i(1575)].camera.positionCartographic[i(t._0x21d396)]*this.heightStep;this[i(t._0x2efcb7)].camera.moveDown(s*r)}}}_onRightUpHandler(e){this._isMouseLeftButtonPressed=![]}_onMiddleDownHandler(e){const t={_0x408821:4076},i=_0x3a2b68;this[i(3174)]&&(this.rotatePoint&&this.rotatePoint.stop(),this._isMouseUpdownPressed=!![],this[i(3558)]=Cesium__namespace.Cartesian3.clone(e[i(t._0x408821)]),this._mousePosition=this[i(3558)])}_onMiddleUpHandler(e){const t={_0x58ad0c:2568},i=_0x3a2b68;this[i(t._0x58ad0c)]=![]}_onClickHandler(e){this[_0x3a2b68({_0x4b5df3:3174}._0x4b5df3)]&&this.rotatePoint&&this.rotatePoint.stop()}_onDbClickHandler(e){const t={_0x4b8642:1575,_0x1199ad:2978,_0x4a5c1a:2258,_0x4e6dad:1941},i=_0x3a2b68;if(!this.enabled)return;this.rotatePoint&&this.rotatePoint.stop();const s=getCurrentMousePosition(this[i(t._0x4b8642)][i(744)],e.position);if(s){const r=Cesium__namespace[i(t._0x1199ad)].distance(s,this._map.camera.positionWC)*this.moveStep;this._map[i(t._0x4a5c1a)](s,{radius:r,maximumHeight:this._map.camera[i(2863)][i(4241)],duration:this[i(t._0x4e6dad)].moveDuration})}}_onRightClickHandler(e){const t={_0x446e1f:3174,_0x14c38b:1036,_0xae938b:2257,_0x117f25:349,_0x5acb89:545},i=_0x3a2b68;this[i(t._0x446e1f)]&&(this[i(t._0x14c38b)]&&Cesium__namespace.JulianDate[i(3345)](this[i(1575)][i(t._0xae938b)].currentTime,this[i(t._0x14c38b)])<.5&&(this._map.closeContextMenu(),!this[i(349)]&&(this.rotatePoint=new RotatePoint(this.options[i(349)]),this._map.addThing(this.rotatePoint)),this[i(t._0x117f25)].start(e.cartesian)),this.time=this._map.clock[i(t._0x5acb89)].clone())}}class CameraHistory extends BaseThing{constructor(e={}){const t=_0x3a2b68;super(e),this.step=0,this[t(1200)]=[],this.maxCacheCount=this[t(1941)].maxCacheCount??99}get debugExtent(){const e=_0x3a2b68;return this.options.limit&&this[e(1941)].limit.debugExtent}set debugExtent(e){const t={_0x9ee266:1941,_0x5366b2:2061},i=_0x3a2b68;if(this.options.limit){if(this.options.limit.debugExtent=e,!this.debugExtentEntity){const s=this[i(t._0x9ee266)].limit.radius,r=this.options[i(4376)].position;this.debugExtentEntity=this._map.entities.add({name:"限定的范围",position:r,ellipsoid:{radii:new Cesium__namespace.Cartesian3(s,s,s),maximumCone:Cesium__namespace.Math[i(t._0x5366b2)],slicePartitions:45,stackPartitions:45,material:new Cesium__namespace.Color(0,1,1,0),outline:!![],outlineColor:new Cesium__namespace.Color(0,1,1,1)}})}this[i(1893)].show=e}}[_0x3a2b68(585)](){const e={_0x55ed71:998},t=_0x3a2b68;this[t(1941)].limit&&this[t(1941)].limit[t(1381)]&&(this.debugExtent=this.options.limit[t(1381)]),this[t(e._0x55ed71)]()}[_0x3a2b68(2679)](){const e=_0x3a2b68;this._map.on(EventType[e(975)],this._cameraMoveStartHandler,this),this._map.on(EventType.cameraMoveEnd,this._cameraMoveEndHandler,this)}_removedHook(){const e={_0x2e817c:1575,_0xc70c28:1200},t=_0x3a2b68;this._map.off(EventType.cameraMoveStart,this._cameraMoveStartHandler,this),this[t(e._0x2e817c)].off(EventType.cameraMoveEnd,this[t(2815)],this),this[t(e._0xc70c28)]=[],this.debugExtentEntity&&(this._map.entities[t(1361)](this.debugExtentEntity),delete this.debugExtentEntity)}_cameraMoveStartHandler(){const e={_0x16949e:3733},t=_0x3a2b68;this._map&&(this[t(e._0x16949e)]=!![],this.lastCameraView=this._map.getCameraView())}_cameraMoveEndHandler(){this._limitGlobe(),this.isInPush&&this._addCameraView()}_limitGlobe(){const e={_0x11ef46:4376,_0x21cbe1:1575,_0x57f0c5:4233,_0x20ab5c:4376,_0xeb5b5d:3733,_0x45bb61:3006},t=_0x3a2b68;if(!this.options.limit)return;const i=this[t(1941)].limit.position,s=this.options[t(e._0x11ef46)].radius,r=Cesium__namespace.Cartesian3.distance(i,this[t(e._0x21cbe1)][t(e._0x57f0c5)].position);this.options[t(e._0x20ab5c)].debugExtent,!(r<=s)&&(this[t(e._0xeb5b5d)]=![],this.lastCameraView?this[t(1575)][t(e._0x45bb61)](this.lastCameraView,{duration:.5,complete:()=>{const o=t;this[o(3042)]=null,this[o(3733)]=!![]}}):this._map[t(2258)](i,{radius:s*.6,pitch:-60,duration:.5,complete:()=>{const o=t;this.lastCameraView=null,this[o(3733)]=!![]}}))}_addCameraView(){const e={_0x2db39a:1575,_0x5e1532:400},t=_0x3a2b68,i=this[t(e._0x2db39a)].getCameraView();this[t(1200)].push(i),this.views[t(e._0x5e1532)]>this.maxCacheCount&&this.views.splice(0,1),this.step=this.views.length-1,this.fire(EventType.change,{index:this.step,count:this.views.length})}[_0x3a2b68(2943)](){const e={_0x34d892:4233},t={_0x52f27b:731},i=_0x3a2b68;this[i(1575)][i(e._0x34d892)][i(1177)][i(1680)](this._cameraMoveStartHandler,this),this._map[i(4233)].moveEnd[i(1680)](this._cameraMoveEndHandler,this),this.isInPush=![],this._map.setCameraView(this.views[this.step],{complete:()=>{const s=i;this._map.camera.moveStart.addEventListener(this[s(1364)],this),this._map.camera[s(3413)].addEventListener(this._cameraMoveEndHandler,this),this.fire(EventType.change,{index:this[s(t._0x52f27b)],count:this[s(1200)].length})}})}goNext(){const e={_0x59e319:1200,_0x4f18ee:400},t=_0x3a2b68;return this[t(731)]>=this[t(e._0x59e319)][t(e._0x4f18ee)]-1?![]:(this.step++,this._goHistoryView(),!![])}goLast(){return this.step<=0?![]:(this.step--,this._goHistoryView(),!![])}goNow(){return this[_0x3a2b68(731)]===this.views.length-1?![]:(this.step=this.views.length-1,this._goHistoryView(),!![])}goFirst(){return this[_0x3a2b68({_0x4b936a:731}._0x4b936a)]<=0?![]:(this.step=0,this._goHistoryView(),!![])}}class RotateOut extends BaseThing{constructor(e={}){const t={_0xddd568:2720,_0x58af9a:3616},i=_0x3a2b68;super(e),this[i(t._0xddd568)]=360/(60*this.options.time||60),this._direction=this.options.direction?-1:1,this[i(t._0x58af9a)]=this.options.autoStopAngle}get isStart(){return this[_0x3a2b68({_0x5251e8:3967}._0x5251e8)]}[_0x3a2b68(2024)](e){e?this[_0x3a2b68(3702)]():this.stop()}_mountedHook(){}_addedHook(){}_removedHook(){this.stop()}[_0x3a2b68(3702)](){const e={_0xf82a8f:4233},t=_0x3a2b68;this._isStart&&this.stop(),this._isStart=!![],this[t(2901)]=0,this._startHeading=this._map[t(e._0xf82a8f)].heading,this._startPitch=this._map.camera.pitch,this[t(1575)].on(EventType[t(1896)],this[t(1274)],this),this.fire(EventType.start)}_onPreRenderHandler(e){const t={_0x2a4b63:2720,_0x59f585:1575,_0x54c67a:860},i=_0x3a2b68;this._tikRender++;const s=this[i(2901)]*this[i(t._0x2a4b63)];this._autoStopAngle&&s>=this._autoStopAngle&&this.stop();const r=Cesium__namespace.Math.toRadians(s*this[i(544)])+this._startHeading;this[i(t._0x59f585)].scene.camera.setView({orientation:{heading:r,pitch:this[i(t._0x54c67a)]}}),this.fire(EventType.change)}stop(){const e={_0x304624:3967,_0x1ed8cf:2971},t=_0x3a2b68;this._isStart&&(this[t(e._0x304624)]=![],this._map[t(e._0x1ed8cf)](EventType.preRender,this._onPreRenderHandler,this),this[t(1109)](EventType.stop))}}const PointEditElementColors={X_TRANSLATION_COLOR:Cesium__namespace.Color.RED[_0x3a2b68(747)](.6),Y_TRANSLATION_COLOR:Cesium__namespace.Color.GREEN[_0x3a2b68(747)](.6),Z_TRANSLATION_COLOR:Cesium__namespace.Color.BLUE.withAlpha(.6),XY_TRANSLATION_COLOR:Cesium__namespace.Color.BLUE[_0x3a2b68(747)](.6),YZ_TRANSLATION_COLOR:Cesium__namespace[_0x3a2b68(2092)].RED.withAlpha(.6),XZ_TRANSLATION_COLOR:Cesium__namespace.Color.GREEN.withAlpha(.6)},HighlightColor=Cesium__namespace.Color[_0x3a2b68(1399)];class MatrixMove2 extends BaseThing{constructor(e={}){const t={_0x3ad09b:3077,_0x2b282e:4258,_0x1db5cb:1534,_0x4635dd:4033,_0x4c131d:3878,_0x2deef4:4082},i=_0x3a2b68;super(e),this[i(t._0x3ad09b)]={X_TRANSLATION:this.id+"_PointEdit_X_TRANSLATION",Y_TRANSLATION:this.id+"_PointEdit_Y_TRANSLATION",Z_TRANSLATION:this.id+"_PointEdit_Z_TRANSLATION",XY_TRANSLATION:this.id+"_PointEdit_XY_TRANSLATION",YZ_TRANSLATION:this.id+i(t._0x2b282e),XZ_TRANSLATION:this.id+"_PointEdit_XZ_TRANSLATION"},this[i(t._0x1db5cb)]={X_TRANSLATION:!![],Y_TRANSLATION:!![],Z_TRANSLATION:!![],XY_TRANSLATION:!![],XZ_TRANSLATION:!![],YZ_TRANSLATION:!![]},this[i(t._0x4635dd)]=Cesium__namespace[i(2623)](e[i(t._0x4c131d)],100),this[i(t._0x2deef4)]=new Cesium__namespace.Matrix4,this._isLeftDown=![],this._pickedId="",this._oldPickedId="",this._oldPickPrimitive=void 0,e.position&&(this.position=e.position)}get position(){return this[_0x3a2b68({_0x4ddbe4:1187}._0x4ddbe4)]}set position(e){const t={_0x51523b:4082},i=_0x3a2b68;this._position=LngLatPoint.toCartesian(e),this[i(t._0x51523b)]=Cesium__namespace.Matrix4.multiplyByUniformScale(Cesium__namespace[i(3737)].eastNorthUpToFixedFrame(this._position),this._radius,this._editMatrix),this._createGraphics()}get radius(){return this._radius}set radius(e){const t={_0x4c830b:3737},i=_0x3a2b68;this[i(4033)]=e,this._editMatrix=Cesium__namespace.Matrix4.multiplyByUniformScale(Cesium__namespace[i(t._0x4c830b)].eastNorthUpToFixedFrame(this._position),this._radius,this._editMatrix),this[i(4056)]()}get isMoveing(){return this._map?this._hasChangeEnableInputs:![]}_enabledHook(e){this._drawLayer.show=e,e?this._bindEvent():this._unbindEvent()}_mountedHook(){this._drawLayer=new Cesium__namespace.PrimitiveCollection,this._drawLayer.show=this.show??!![]}_addedHook(){const e={_0x69153f:3674},t=_0x3a2b68;this._map.scene.primitives[t(e._0x69153f)](this._drawLayer),this._createGraphics(),this._bindEvent()}_removedHook(){const e={_0x1183b6:1361,_0x2222c9:1770},t=_0x3a2b68;this[t(2293)](),this._drawLayer.removeAll(),this._map.scene.primitives[t(e._0x1183b6)](this[t(e._0x2222c9)])}[_0x3a2b68(4056)](){const e={_0x452d99:1770,_0x4826af:3674,_0x397352:3077,_0x1f29fd:3260,_0x1e8e3d:3213},t=_0x3a2b68;if(!this[t(1770)]||(this[t(e._0x452d99)].removeAll(),!this._position))return;const i=Cesium__namespace.Matrix4.clone(this._editMatrix);this[t(1534)][t(1455)]&&this[t(e._0x452d99)][t(e._0x4826af)](createPolylinePrimitive({positions:[Cesium__namespace.Cartesian3.ZERO,Cesium__namespace.Cartesian3.UNIT_X],modelMatrix:i,id:this._pointEditElementIDs.X_TRANSLATION,color:PointEditElementColors.X_TRANSLATION_COLOR})),this._hideFeatures.Y_TRANSLATION&&this._drawLayer[t(e._0x4826af)](createPolylinePrimitive({positions:[Cesium__namespace.Cartesian3[t(4210)],Cesium__namespace.Cartesian3.UNIT_Y],modelMatrix:i,id:this[t(e._0x397352)][t(2305)],color:PointEditElementColors.Y_TRANSLATION_COLOR})),this[t(1534)].Z_TRANSLATION&&this._drawLayer.add(createPolylinePrimitive({positions:[Cesium__namespace.Cartesian3[t(4210)],Cesium__namespace.Cartesian3.UNIT_Z],modelMatrix:i,id:this._pointEditElementIDs[t(4014)],color:PointEditElementColors.Z_TRANSLATION_COLOR})),this._hideFeatures.XY_TRANSLATION&&this._drawLayer.add(createPlanePrimitive({positions:[.1,.1,0,.1,.3,0,.3,.3,0,.3,.1,0],normals:[0,0,1,0,0,1,0,0,1,0,0,1],modelMatrix:i,id:this._pointEditElementIDs[t(1072)],color:PointEditElementColors.XY_TRANSLATION_COLOR})),this[t(1534)].YZ_TRANSLATION&&this._drawLayer.add(createPlanePrimitive({positions:[0,.1,.1,0,.1,.3,0,.3,.3,0,.3,.1],normals:[1,0,0,1,0,0,1,0,0,1,0,0],modelMatrix:i,id:this._pointEditElementIDs.YZ_TRANSLATION,color:PointEditElementColors[t(e._0x1f29fd)]})),this._hideFeatures[t(e._0x1e8e3d)]&&this._drawLayer.add(createPlanePrimitive({positions:[.1,0,.1,.1,0,.3,.3,0,.3,.3,0,.1],normals:[0,1,0,0,1,0,0,1,0,0,1,0],modelMatrix:i,id:this._pointEditElementIDs.XZ_TRANSLATION,color:PointEditElementColors.XZ_TRANSLATION_COLOR}))}_bindEvent(){const e={_0x5117e6:1575},t={_0x2950af:3077,_0x224d08:3908,_0x243aca:3544,_0x4c569a:744,_0x2eae1a:1127,_0x3bd77a:424,_0x20d28b:1127,_0x307565:4288,_0x58c5df:1575,_0x3b27da:2362,_0x50d6a4:3793},i={_0xe1465:407,_0x1805f6:3908,_0x50ca24:3077},s={_0x35352f:1575},r=_0x3a2b68;this._unbindEvent(),this[r(1551)]=new Cesium__namespace.ScreenSpaceEventHandler(this[r(e._0x5117e6)].canvas),this._handler.setInputAction(o=>{const c=r,_=drillPickTransformHelperComponent(this[c(s._0x35352f)].scene,o.position,this._pointEditElementIDs);_&&(this._map.scene[c(3928)].enableInputs=![],this[c(1093)]=!![],this[c(3544)]=_.id)},Cesium__namespace.ScreenSpaceEventType[r(769)]),this._handler[r(1138)](()=>{const o=r;this._map.scene.screenSpaceCameraController.enableInputs=!![],this._isLeftDown=![],this._pickedId="",Cesium__namespace[o(i._0xe1465)](this._oldPickedId)&&this[o(i._0x1805f6)]!==""&&(setPointEditElementColorsForId(this._oldPickedId,getPointEditElementColorsForId(this._oldPickedId,this[o(i._0x50ca24)]),this._pointEditElementIDs),this._oldPickedId="",this._createGraphics())},Cesium__namespace.ScreenSpaceEventType.LEFT_UP),this._handler.setInputAction(o=>{const c=r;let _=![];if(Cesium__namespace.defined(this._oldPickPrimitive)){var l;const d=(l=this[c(3403)])===null||l===void 0?void 0:l._instanceIds;if(d&&d[0]){const f=this._oldPickPrimitive.appearance[c(3793)].uniforms;f.color=getPointEditElementColorsForId(d[0],this._pointEditElementIDs),this._oldPickPrimitive=void 0}}if(this._isLeftDown){Cesium__namespace.defined(this._pickedId)&&this._pickedId!==""&&(setPointEditElementColorsForId(this._pickedId,HighlightColor,this[c(t._0x2950af)]),this[c(t._0x224d08)]=this[c(t._0x243aca)],_=!![]);const d=this._map[c(t._0x4c569a)];let f=d.pickPosition(o.startPosition),g=d[c(2087)](o[c(t._0x2eae1a)]);const b=new Cesium__namespace.Cartesian2;if(!Cesium__namespace.defined(f)&&(b.x=o.startPosition.x,b.y=d.canvas.clientHeight-o.startPosition.y,f=getWorldPositionFromWindowPosition(d,b)),!Cesium__namespace[c(407)](g)&&(b.x=o.endPosition.x,b.y=d.canvas[c(t._0x3bd77a)]-o[c(t._0x20d28b)].y,g=getWorldPositionFromWindowPosition(d,b)),Cesium__namespace[c(407)](f)&&Cesium__namespace.defined(g)){const C=getChangeMatrixByMovingMouse(this,f,g,this._pointEditElementIDs);Cesium__namespace.defined(C)&&(this._editMatrix=Cesium__namespace.Matrix4.multiply(this._editMatrix,C,new Cesium__namespace.Matrix4),this._position=Cesium__namespace.Matrix4.getTranslation(this[c(4082)],this._position),this[c(t._0x307565)]({position:this._position}),_=!![])}_&&this._createGraphics()}else{const d=drillPickTransformHelperComponent(this[c(t._0x58c5df)][c(744)],o[c(t._0x2eae1a)],this[c(3077)]);if(d){const f=d[c(t._0x3b27da)].appearance[c(t._0x50d6a4)].uniforms;f.color=HighlightColor,this._oldPickPrimitive=d.primitive}}},Cesium__namespace.ScreenSpaceEventType.MOUSE_MOVE)}_unbindEvent(){const e={_0x516ccf:1551,_0x5eff3f:1551,_0xec8b32:2619},t=_0x3a2b68;this[t(e._0x516ccf)]&&(this[t(e._0x5eff3f)][t(e._0xec8b32)](),delete this._handler)}onChange(e){const t={_0x4af163:4288},i=_0x3a2b68;this.options[i(t._0x4af163)]&&this.options.onChange(e),this.fire(EventType.change,e,!![])}}function createPolylinePrimitive(n){const e={_0xd13a85:4208},t=_0x3a2b68,{positions:i,modelMatrix:s,color:r,id:o}=n,c=new Cesium__namespace.PolylineMaterialAppearance({material:Cesium__namespace[t(4208)].fromType(Cesium__namespace[t(e._0xd13a85)].PolylineArrowType,{color:r})});return new Cesium__namespace.Primitive({geometryInstances:new Cesium__namespace.GeometryInstance({geometry:new Cesium__namespace.PolylineGeometry({positions:i,width:15,vertexFormat:Cesium__namespace.PolylineMaterialAppearance.VERTEX_FORMAT,arcType:Cesium__namespace.ArcType.NONE}),modelMatrix:s,id:o}),appearance:c,depthFailAppearance:c,asynchronous:![]})}function createPlanePrimitive(n){const e={_0x17901d:3633,_0x4f684e:1075,_0x2e0037:1862},t=_0x3a2b68,{positions:i,modelMatrix:s,normals:r,color:o,id:c}=n,_=new Cesium__namespace[t(e._0x17901d)]({closed:![],flat:!![],materialSupport:Cesium__namespace.MaterialAppearance.MaterialSupport.BASIC,material:Cesium__namespace.Material.fromType(Cesium__namespace.Material.ColorType,{color:o})});return new Cesium__namespace.Primitive({geometryInstances:new Cesium__namespace.GeometryInstance({geometry:new Cesium__namespace.Geometry({attributes:{position:new Cesium__namespace.GeometryAttribute({componentDatatype:Cesium__namespace[t(e._0x4f684e)].DOUBLE,componentsPerAttribute:3,values:new Float64Array(i)}),normal:new Cesium__namespace.GeometryAttribute({componentDatatype:Cesium__namespace.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:new Float32Array(r)})},indices:new Uint16Array([0,1,2,0,2,3]),primitiveType:Cesium__namespace.PrimitiveType[t(e._0x2e0037)],boundingSphere:Cesium__namespace[t(3353)].fromVertices(i)}),modelMatrix:s,id:c}),appearance:_,depthFailAppearance:_,asynchronous:![]})}function isTransformHelperComponent(n,e){for(const t in e)if(Object.hasOwnProperty.call(e,t)){const i=e[t];if(n===i)return!![]}return![]}function getWorldPositionFromWindowPosition(n,e){const t=_0x3a2b68,i=.1,s=Cesium__namespace.SceneTransforms.transformWindowToDrawingBuffer(n,e,new Cesium__namespace.Cartesian2);return Cesium__namespace.SceneTransforms[t(2488)](n,s,i)}function getChangeMatrixByMovingMouse(n,e,t,i){const s={_0x2a1afd:2978,_0x309eb3:4210,_0x80b1aa:2978,_0x4629ca:4071,_0x307971:4014,_0x3aa01f:407,_0x39d1f3:2978,_0xc3d697:3420,_0x544701:2305,_0x5ed6de:1072,_0x3ad932:2478},r=_0x3a2b68,o=n._pickedId,c=Cesium__namespace.Matrix4.clone(n[r(4082)]),_=Cesium__namespace.Matrix4[r(2853)](c,new Cesium__namespace.Matrix4),l=n._map.camera.positionWC,d=Cesium__namespace[r(2478)].multiplyByPoint(_,l,new Cesium__namespace[r(2978)]);Cesium__namespace[r(2978)][r(1085)](d,d);const f=Cesium__namespace.Cartesian3[r(3420)](e,l,new Cesium__namespace.Cartesian3),g=Cesium__namespace.Cartesian3[r(3420)](t,l,new Cesium__namespace.Cartesian3),b=new Cesium__namespace.Ray(l,f),C=new Cesium__namespace.Ray(l,g),P=new Cesium__namespace[r(2978)];if(o===i.XY_TRANSLATION)Cesium__namespace.Cartesian3.clone(Cesium__namespace.Cartesian3[r(1604)],P);else if(o===i.YZ_TRANSLATION)Cesium__namespace.Cartesian3.clone(Cesium__namespace.Cartesian3.UNIT_X,P);else if(o===i.XZ_TRANSLATION)Cesium__namespace[r(2978)][r(2957)](Cesium__namespace.Cartesian3.UNIT_Y,P);else if(o===i.X_TRANSLATION||o===i.Y_TRANSLATION||o===i.Z_TRANSLATION){let k=Cesium__namespace[r(s._0x2a1afd)][r(s._0x309eb3)];o===i[r(1455)]?k=Cesium__namespace.Cartesian3[r(434)]:o===i.Y_TRANSLATION?k=Cesium__namespace[r(s._0x80b1aa)][r(s._0x4629ca)]:o===i[r(s._0x307971)]&&(k=Cesium__namespace.Cartesian3.UNIT_Z);const N=new Cesium__namespace.Cartesian3;Cesium__namespace.Cartesian3.cross(d,k,N),Cesium__namespace.Cartesian3.cross(k,N,P),Cesium__namespace.Cartesian3.normalize(P,P)}const S=new Cesium__namespace.Plane(P,0);Cesium__namespace.Plane.transform(S,c,S);const L=Cesium__namespace.IntersectionTests.rayPlane(b,S),E=Cesium__namespace.IntersectionTests.rayPlane(C,S);if(!Cesium__namespace.defined(L)||!Cesium__namespace[r(s._0x3aa01f)](E))return;const M=Cesium__namespace.Matrix4.multiplyByPoint(_,L,new Cesium__namespace[r(2978)]),D=Cesium__namespace.Matrix4.multiplyByPoint(_,E,new Cesium__namespace.Cartesian3),R=new Cesium__namespace[r(s._0x39d1f3)];return Cesium__namespace[r(2978)][r(s._0xc3d697)](D,M,R),o===i.X_TRANSLATION?(R.y=0,R.z=0):o===i[r(s._0x544701)]?(R.x=0,R.z=0):o===i.Z_TRANSLATION?(R.x=0,R.y=0):o===i[r(s._0x5ed6de)]?R.z=0:o===i.YZ_TRANSLATION?R.x=0:o===i.XZ_TRANSLATION&&(R.y=0),Cesium__namespace.Matrix4.fromTranslation(R,new Cesium__namespace[r(s._0x3ad932)])}function setPointEditElementColorsForId(n,e,t){const i={_0x33c7a5:2456},s=_0x3a2b68;switch(n){case t.X_TRANSLATION:PointEditElementColors[s(1780)]=e;break;case t.Y_TRANSLATION:PointEditElementColors.Y_TRANSLATION_COLOR=e;break;case t.Z_TRANSLATION:PointEditElementColors.Z_TRANSLATION_COLOR=e;break;case t.XZ_TRANSLATION:PointEditElementColors.XZ_TRANSLATION_COLOR=e;break;case t.XY_TRANSLATION:PointEditElementColors.XY_TRANSLATION_COLOR=e;break;case t[s(i._0x33c7a5)]:PointEditElementColors.YZ_TRANSLATION_COLOR=e;break}}function getPointEditElementColorsForId(n,e){const t={_0x495244:3213,_0x4792e1:2092,_0x527d97:2092},i=_0x3a2b68;let s;switch(n){case e.X_TRANSLATION:case e.YZ_TRANSLATION:s=Cesium__namespace.Color.RED[i(747)](.6);break;case e[i(2305)]:case e[i(t._0x495244)]:s=Cesium__namespace[i(t._0x4792e1)].GREEN.withAlpha(.6);break;case e.Z_TRANSLATION:case e[i(1072)]:s=Cesium__namespace[i(t._0x527d97)].BLUE[i(747)](.6);break}return s}function drillPickTransformHelperComponent(n,e,t){const i={_0x297c68:3708},s=_0x3a2b68,r=n[s(i._0x297c68)](e),o=r.length;let c;for(let _=0;_<o;_++){const l=r[_];if(l&&l.id&&isTransformHelperComponent(l.id,t)){c=l;break}}return c}var index$3={__proto__:null,Underground,Sightline,Skyline,Shadows,Measure,FloodByGraphic,Slope,TerrainPlanClip,FloodByMaterial,ContourLine,TerrainFlat,TerrainUplift,TerrainClip,LimitHeight,TilesetPlanClip,ModelPlanClip,TilesetBoxClip,TilesetClip,TilesetFlood,TilesetFlat,TilesetShake,FirstPersonRoam,StreetView,CameraHistory,RotatePoint,RotateOut,MatrixMove,MatrixRotate,MatrixMove2};class BaseEffect extends BaseThing{get type(){return this._type}get target(){return this._postProcessStage}get uniforms(){const e=_0x3a2b68;var t;return(t=this._postProcessStage)===null||t===void 0?void 0:t[e(2949)]}addTo(e){return e&&e.addEffect&&e.addEffect(this),this}remove(e){this[_0x3a2b68({_0x35ed4b:1575}._0x35ed4b)]&&this._map.removeEffect(this,e)}_enabledHook(e){const t={_0x2ca0bf:2490},i=_0x3a2b68;this[i(2490)]&&(this[i(t._0x2ca0bf)].enabled=e)}_setOptionsHook(e,t){for(const i in t)i!=="enabled"&&(this[i]=t[i])}_addedBaseHook(){const e={_0x57f4d7:2490},t=_0x3a2b68;!this._postProcessStage&&this._mountedHook(),this._enabledHook(this.enabled),this[t(e._0x57f4d7)]&&this._map.scene.postProcessStages.add(this._postProcessStage)}_removedBaseHook(){const e={_0x3ac828:2490,_0x53a3bd:2490},t=_0x3a2b68;this[t(e._0x3ac828)]&&(this._map.scene[t(1505)].remove(this[t(e._0x53a3bd)]),this[t(e._0x3ac828)].isDestroyed()&&delete this[t(e._0x53a3bd)])}fire(e,t={},i){const s=_0x3a2b68;return!t[s(3685)]&&(t[s(3685)]=this),super.fire(e,t,i)}_getPickIds(e){const t={_0x49e7d7:3409,_0x5c12b2:3495,_0x19282f:1754};let i=[];return e.forEach(s=>{const r=_0x20dc;s.czmObject&&(s=s[r(t._0x49e7d7)]),s._pickIds?i=i.concat(this._getPickIds(s[r(t._0x5c12b2)])):s[r(2219)]?i=i[r(4083)](this._getPickIds([s.pickId])):i[r(t._0x19282f)]({pickId:s})}),i}}var FogFS=`float getDistance(sampler2D depthTexture, vec2 texCoords) {
  float depth = czm_unpackDepth(texture(depthTexture, texCoords));
  if(depth == 0.0) {
    return czm_infinity;
  }
  vec4 eyeCoordinate = czm_windowToEyeCoordinates(gl_FragCoord.xy, depth);
  return -eyeCoordinate.z / eyeCoordinate.w;
}
float interpolateByDistance(vec4 nearFarScalar, float distance) {
  float startDistance = nearFarScalar.x;
  float startValue = nearFarScalar.y;
  float endDistance = nearFarScalar.z;
  float endValue = nearFarScalar.w;
  float t = clamp((distance - startDistance) / (endDistance - startDistance), 0.0, 1.0);
  return mix(startValue, endValue, t);
}
vec4 alphaBlend(vec4 sourceColor, vec4 destinationColor) {
  return sourceColor * vec4(sourceColor.aaa, 1.0) + destinationColor * (1.0 - sourceColor.a);
}
uniform sampler2D colorTexture;
uniform sampler2D depthTexture;
uniform vec4 fogByDistance;
uniform vec4 fogColor;
in vec2 v_textureCoordinates;
void main(void) {
  float distance = getDistance(depthTexture, v_textureCoordinates);
  vec4 sceneColor = texture(colorTexture, v_textureCoordinates);
  float blendAmount = interpolateByDistance(fogByDistance, distance);
  vec4 finalFogColor = vec4(fogColor.rgb, fogColor.a * blendAmount);
  out_FragColor = alphaBlend(finalFogColor, sceneColor);
}
`;class FogEffect extends BaseEffect{constructor(e={}){const t={_0x4633ac:2540,_0x5d97ab:2540,_0x4326e6:1651},i=_0x3a2b68;super(e),this[i(3321)]=e.fogByDistance??new Cesium__namespace.Cartesian4(10,0,1e3,.9),this[i(t._0x4633ac)]=getCesiumColor(e[i(t._0x5d97ab)],Cesium__namespace[i(2092)][i(1948)]),this.maxHeight=e[i(2627)]??9e3,this[i(t._0x4326e6)](e)}_setOptionsHook(e,t){const i={_0x22fac5:407,_0x3f5329:3321,_0x3bbe80:2627},s=_0x3a2b68;Cesium__namespace.defined(e.fogByDistance_near)&&(this[s(3321)].x=e[s(2462)]),Cesium__namespace[s(i._0x22fac5)](e[s(2937)])&&(this.fogByDistance.y=e.fogByDistance_nearValue),Cesium__namespace.defined(e.fogByDistance_far)&&(this.fogByDistance.z=e.fogByDistance_far),Cesium__namespace.defined(e.fogByDistance_farValue)&&(this[s(i._0x3f5329)].w=e.fogByDistance_farValue),Cesium__namespace.defined(t==null?void 0:t.color)&&(this.color=getCesiumColor(e[s(2540)],Cesium__namespace.Color.WHITE)),this[s(i._0x3bbe80)]=e.maxHeight??9e3}_mountedHook(){const e=_0x3a2b68;this._postProcessStage=new Cesium__namespace[e(590)]({name:this._id,fragmentShader:FogFS,uniforms:{fogByDistance:()=>this[e(3321)],fogColor:()=>this.color},enabled:this.enabled})}_addedHook(){const e={_0x9eff7e:1575,_0x169cfe:1844},t=_0x3a2b68;this[t(e._0x9eff7e)][t(744)][t(4233)].changed[t(e._0x169cfe)](this.camera_changedHandler,this)}_removedHook(){const e=_0x3a2b68;this._map.scene[e(4233)].changed.removeEventListener(this[e(2740)],this)}camera_changedHandler(e){const t={_0x57e695:1575,_0xfa7cb7:4233},i=_0x3a2b68;this[i(t._0x57e695)][i(t._0xfa7cb7)][i(2863)].height<this.maxHeight?this._postProcessStage.enabled=this.enabled:this._postProcessStage.enabled=![]}}register("fog",FogEffect);var RainShader=_0x3a2b68(4157);class RainEffect extends BaseEffect{get speed(){const e={_0x2e8073:4385},t=_0x3a2b68;var i;return(i=this[t(2490)])===null||i===void 0?void 0:i.uniforms[t(e._0x2e8073)]}set speed(e){this[_0x3a2b68(2490)]&&(this._postProcessStage.uniforms.speed=e)}get size(){var e;return(e=this._postProcessStage)===null||e===void 0?void 0:e.uniforms.size}set size(e){const t={_0x4241d4:2490},i=_0x3a2b68;this._postProcessStage&&(this[i(t._0x4241d4)].uniforms.size=e)}get direction(){const e={_0x4aa9cc:2949,_0x28fb27:3763},t=_0x3a2b68;var i;return(i=this._postProcessStage)===null||i===void 0?void 0:i[t(e._0x4aa9cc)][t(e._0x28fb27)]}set[_0x3a2b68(3763)](e){const t={_0x5ae7a9:3763,_0x68b505:1185},i=_0x3a2b68;this._postProcessStage&&(this._postProcessStage.uniforms[i(t._0x5ae7a9)]=Cesium__namespace[i(2806)][i(t._0x68b505)](e))}_mountedHook(){const e={_0x3fb1de:590,_0x2cf342:1185,_0x5d21bd:3763},t=_0x3a2b68;this._postProcessStage=new Cesium__namespace[t(e._0x3fb1de)]({fragmentShader:RainShader,uniforms:{speed:this[t(1941)].speed??10,size:this.options.size??20,direction:Cesium__namespace.Math[t(e._0x2cf342)](this.options[t(e._0x5d21bd)]??-30)},enabled:this.enabled})}}register("rain",RainEffect);var SnowShader=`uniform sampler2D colorTexture; //输入的场景渲染照片
in vec2 v_textureCoordinates;
uniform float speed;

float snow(vec2 uv, float scale) {
  float time = czm_frameNumber * speed / 1000.0;
  float w = smoothstep(1.0, 0.0, -uv.y * (scale / 10.0));
  if(w < 0.1)
    return 0.0;
  uv += time / scale;
  uv.y += time * 2.0 / scale;
  uv.x += sin(uv.y + time * 0.5) / scale;
  uv *= scale;

  vec2 s = floor(uv), f = fract(uv), p;
  float k = 3.0, d;
  p = 0.5 + 0.35 * sin(11.0 * fract(sin((s + p + scale) * mat2(7, 3, 6, 5)) * 5.0)) - f;
  d = length(p);
  k = min(d, k);
  k = smoothstep(0.0, k, sin(f.x + f.y) * 0.01);
  return k * w;
}

void main(void) {
  vec2 resolution = czm_viewport.zw;
  vec2 uv = (gl_FragCoord.xy * 2. - resolution.xy) / min(resolution.x, resolution.y);

  float c = 0.0;
  c += snow(uv, 15.);
  c += snow(uv, 10.);
  c += snow(uv, 9.);
  c += snow(uv, 8.);
  c += snow(uv, 7.);
  c += snow(uv, 6.);
  c += snow(uv, 5.);
  c += snow(uv, 4.);

  vec3 finalColor = (vec3(c)); //屏幕上雪的颜色

  out_FragColor = mix(texture(colorTexture, v_textureCoordinates), vec4(finalColor, 1.0), 0.5);  //将雪和三维场景融合

}
`;class SnowEffect extends BaseEffect{get[_0x3a2b68(4385)](){const e=_0x3a2b68;var t;return(t=this._postProcessStage)===null||t===void 0?void 0:t.uniforms[e(4385)]}set speed(e){this._postProcessStage&&(this._postProcessStage.uniforms.speed=e)}_mountedHook(){const e={_0x2710be:2490},t=_0x3a2b68;this[t(e._0x2710be)]=new Cesium__namespace.PostProcessStage({fragmentShader:SnowShader,uniforms:{speed:this.options.speed??10},enabled:this.enabled})}}register("snow",SnowEffect);var SnowCoverFS=_0x3a2b68(3388),CustomSnowCoverFS=_0x3a2b68(2458);class SnowCoverEffect extends BaseEffect{constructor(e={}){const t={_0x4e9154:2627},i=_0x3a2b68;super(e),this[i(t._0x4e9154)]=e[i(2627)]??9e3}get[_0x3a2b68(838)](){const e={_0x2dafe9:2490,_0x21df78:2949,_0xa5f758:3439},t=_0x3a2b68;if(this[t(e._0x2dafe9)]){var i,s;return(i=this[t(e._0x2dafe9)])===null||i===void 0||(s=i[t(e._0x21df78)])===null||s===void 0?void 0:s.alpha}if(this[t(e._0xa5f758)]){var r;return(r=this[t(3439)])===null||r===void 0?void 0:r.alpha[t(2251)]}}set alpha(e){const t={_0x49061d:3439,_0x303d3e:838},i=_0x3a2b68;this._postProcessStage&&(this[i(2490)].uniforms[i(838)]=e),this[i(t._0x49061d)]&&(this._uniforms[i(t._0x303d3e)][i(2251)]=e)}_enabledHook(e){const t=_0x3a2b68;this._postProcessStage&&(this._postProcessStage.enabled=e),this[t(3439)]&&(this._uniforms.enabled.value=e)}[_0x3a2b68(585)](){const e=_0x3a2b68;this.options[e(607)]?this._bindToLayer(this.options.layer):this._postProcessStage=new Cesium__namespace[e(590)]({name:this._id,fragmentShader:SnowCoverFS,uniforms:{alpha:this.options.alpha??1},enabled:this.enabled})}[_0x3a2b68(2679)](){this._map.scene.camera.changed.addEventListener(this.camera_changedHandler,this)}[_0x3a2b68(3916)](){const e={_0x2087cd:744,_0x447b7e:4233},t=_0x3a2b68;this._map[t(e._0x2087cd)][t(e._0x447b7e)].changed.removeEventListener(this[t(2740)],this)}camera_changedHandler(e){const t={_0x32a7de:2863,_0x4ebc8c:2490,_0x4be5db:2490},i=_0x3a2b68;this._map.camera[i(t._0x32a7de)].height<this.maxHeight?(this[i(t._0x4ebc8c)]&&(this[i(t._0x4be5db)].enabled=this.enabled),this._uniforms&&(this._uniforms.enabled.value=this.enabled)):(this._postProcessStage&&(this[i(2490)].enabled=![]),this._uniforms&&(this._uniforms[i(3174)].value=![]))}_bindToLayer(e){const t={_0x1b09d1:1248,_0x46199d:982,_0x4a6b30:3439,_0x34f50f:4045},i=_0x3a2b68;var s;if((s=Cesium__namespace.Mars3DEx)!==null&&s!==void 0&&s[i(884)])if(this.enabled){const r=new Cesium__namespace.CustomShader({lightingModel:Cesium__namespace.LightingModel[i(717)],uniforms:{alpha:{value:1,type:Cesium__namespace.UniformType[i(t._0x1b09d1)]},enabled:{value:!![],type:Cesium__namespace[i(t._0x46199d)].BOOL}},fragmentShaderText:CustomSnowCoverFS});this._uniforms=r.uniforms;const o=Cesium__namespace.Mars3DEx.getCacheOrAdd(e.id);o.snowCover=r}else{delete this[i(t._0x4a6b30)];const r=Cesium__namespace[i(t._0x34f50f)].getCache(e.id);r&&delete r.snowCover}}}register("snowCover",SnowCoverEffect);var InvertedSceneFS=`#extension GL_OES_standard_derivatives : enable
uniform sampler2D colorTexture;
uniform sampler2D depthTexture;
in vec2 v_textureCoordinates;
vec4 toEye(in vec2 uv, in float depth) {
  vec2 xy = vec2((uv.x * 2.0 - 1.0), (uv.y * 2.0 - 1.0));
  vec4 posInCamera = czm_inverseProjection * vec4(xy, depth, 1.0);
  posInCamera = posInCamera / posInCamera.w;
  return posInCamera;
}
float getDepth(in vec4 depth) {
  float z_window = czm_unpackDepth(depth);
  z_window = czm_reverseLogDepth(z_window);
  float n_range = czm_depthRange.near;
  float f_range = czm_depthRange.far;
  return (2.0 * z_window - n_range - f_range) / (f_range - n_range);
}
vec3 guussColor(vec2 uv) {
  vec2 pixelSize = 1.0 / czm_viewport.zw;
  float dx0 = -pixelSize.x;
  float dy0 = -pixelSize.y;
  float dx1 = pixelSize.x;
  float dy1 = pixelSize.y;
  vec4 gc = (texture(colorTexture, uv) +
    texture(colorTexture, uv + vec2(dx0, dy0)) +
    texture(colorTexture, uv + vec2(0.0, dy0)) +
    texture(colorTexture, uv + vec2(dx1, dy0)) +
    texture(colorTexture, uv + vec2(dx0, 0.0)) +
    texture(colorTexture, uv + vec2(dx1, 0.0)) +
    texture(colorTexture, uv + vec2(dx0, dy1)) +
    texture(colorTexture, uv + vec2(0.0, dy1)) +
    texture(colorTexture, uv + vec2(dx1, dy1))) * (1.0 / 9.0);
  return gc.rgb;
}
void main() {
    // mat4 dither = mat4(
    //     0,       0.5,    0.125,  0.625,
    //     0.75,    0.25,   0.875,  0.375,
    //     0.1875,  0.6875, 0.0625, 0.5625,
    //     0.9375,  0.4375, 0.8125, 0.3125
    // );
    // int sampleCoordX = int(mod((gl_FragCoord.x * v_textureCoordinates.x),4.0));
    // int sampleCoordY = int(mod((gl_FragCoord.y * v_textureCoordinates.y),4.0));
  float offset = 0.0;

  vec4 color = texture(colorTexture, v_textureCoordinates);
  vec4 currD = texture(depthTexture, v_textureCoordinates);
    // out_FragColor = currD;
    // return;
  if(currD.r >= 1.0) {
    out_FragColor = color;
    return;
  }
  float depth = getDepth(currD);
    // out_FragColor = vec4(depth,0.0,0.0,1.0);
    // return;

  vec4 positionEC = toEye(v_textureCoordinates, depth);
  vec3 dx = dFdx(positionEC.xyz);
  vec3 dy = dFdy(positionEC.xyz);
  vec3 normal = normalize(cross(dx, dy));

  vec4 positionWC = normalize(czm_inverseView * positionEC);
  vec3 normalWC = normalize(czm_inverseViewRotation * normal);
  float fotNumWC = dot(positionWC.xyz, normalWC);
  if(fotNumWC <= 0.5) {
    out_FragColor = color;
    return;
  }

    // float dotNum = dot(normal,vec3(0.0,1.0,0.0));
    // out_FragColor = mix(color,vec4(1.0),dotNum*0.8);
    // return;

  vec3 viewDir = normalize(positionEC.xyz);
  vec3 reflectDir = reflect(viewDir, normal);
    // vec3 viewReflectDir = czm_viewRotation * reflectDir;
  vec3 viewReflectDir = reflectDir;

  float step = 0.05;
  int stepNum = int(20.0 / step);
  vec3 pos;
  vec3 albedo;
  bool jd = false;
  for(float i = 1.0; i <= 400.0; i+=1.0) {
    float delta = step * i + offset;
    pos = positionEC.xyz + viewReflectDir * delta;
    float d = -pos.z;

    vec4 tmp = czm_projection * vec4(pos, 1.0);
    vec3 screenPos = tmp.xyz / tmp.w;
    vec2 uv = vec2(screenPos.x, screenPos.y) * 0.5 + vec2(0.5, 0.5);

    if(uv.x > 0.0 && uv.x < 1.0 && uv.y > 0.0 && uv.y < 1.0) {
      float dd = getDepth(texture(depthTexture, uv));
      vec4 jzc = toEye(uv, dd);
      dd = -jzc.z;
      if(d > dd) {
        if(abs(abs(d) - abs(dd)) <= step) {
          jd = true;
                    // albedo = texture(colorTexture, uv).rgb;
          albedo = guussColor(uv);
        }
        break;
      }
    }
  }
  if(jd) {
    out_FragColor = vec4(mix(color.xyz, albedo, 0.5), 1.0);
  } else {
    out_FragColor = color;
  }
}
`;class InvertedEffect extends BaseEffect{_mountedHook(){const e=_0x3a2b68;this._postProcessStage=new Cesium__namespace[e(590)]({fragmentShader:InvertedSceneFS,enabled:this.enabled})}}register("inverted",InvertedEffect);class NightVisionEffect extends BaseEffect{[_0x3a2b68(585)](){const e={_0x16f3b1:2490,_0x1b73fe:3166},t=_0x3a2b68;this[t(e._0x16f3b1)]=Cesium__namespace[t(e._0x1b73fe)].createNightVisionStage()}}register("nightVision",NightVisionEffect);class BloomEffect extends BaseEffect{get contrast(){const e={_0x48ad5e:2490},t=_0x3a2b68;var i;return(i=this[t(e._0x48ad5e)])===null||i===void 0?void 0:i.uniforms.contrast}set contrast(e){this._postProcessStage&&(this._postProcessStage.uniforms.contrast=e)}get brightness(){const e=_0x3a2b68;var t;return(t=this[e(2490)])===null||t===void 0?void 0:t.uniforms.brightness}set[_0x3a2b68(2071)](e){this._postProcessStage&&(this._postProcessStage.uniforms.brightness=e)}get delta(){const e={_0x51fdbd:2949},t=_0x3a2b68;var i;return(i=this._postProcessStage)===null||i===void 0?void 0:i[t(e._0x51fdbd)].delta}set delta(e){const t={_0x3c00a0:2490},i=_0x3a2b68;this[i(t._0x3c00a0)]&&(this[i(2490)].uniforms.delta=e)}get[_0x3a2b68(746)](){const e=_0x3a2b68;var t;return(t=this._postProcessStage)===null||t===void 0?void 0:t.uniforms[e(746)]}set sigma(e){this[_0x3a2b68({_0x314f72:2490}._0x314f72)]&&(this._postProcessStage.uniforms.sigma=e)}get stepSize(){const e={_0x445e42:2949},t=_0x3a2b68;var i;return(i=this._postProcessStage)===null||i===void 0?void 0:i[t(e._0x445e42)].stepSize}set stepSize(e){const t=_0x3a2b68;this[t(2490)]&&(this._postProcessStage[t(2949)].stepSize=e)}[_0x3a2b68(585)](){const e={_0x36a27f:2490,_0x84e14f:744,_0x20fec1:945,_0x366a05:2949,_0x41cc71:2071},t=_0x3a2b68;this[t(e._0x36a27f)]=this[t(1575)][t(e._0x84e14f)].postProcessStages[t(e._0x20fec1)],this._postProcessStage[t(2949)].glowOnly=![],this._postProcessStage[t(e._0x366a05)][t(3243)]=this.options.contrast??128,this._postProcessStage.uniforms.brightness=this.options[t(e._0x41cc71)]??-.3,this._postProcessStage.uniforms.delta=this.options.delta??1,this[t(e._0x36a27f)].uniforms.sigma=this[t(1941)].sigma??3.78,this._postProcessStage[t(e._0x366a05)].stepSize=this.options[t(3598)]??5}_addedBaseHook(e){this._postProcessStage.enabled=this.enabled}_removedBaseHook(){const e={_0x47ecd3:2490},t=_0x3a2b68;this[t(e._0x47ecd3)].enabled=![]}}register("bloom",BloomEffect);class BrightnessEffect extends BaseEffect{get[_0x3a2b68(2071)](){const e={_0x3898ff:2490},t=_0x3a2b68;var i;return(i=this[t(e._0x3898ff)])===null||i===void 0?void 0:i.uniforms.brightness}set brightness(e){const t={_0x2632d5:2071},i=_0x3a2b68;this[i(2490)]&&(this._postProcessStage.uniforms[i(t._0x2632d5)]=e)}_mountedHook(){const e={_0x5bb0c7:3166,_0x38410c:1941},t=_0x3a2b68;this._postProcessStage=Cesium__namespace[t(e._0x5bb0c7)].createBrightnessStage(),this._postProcessStage[t(2949)].brightness=this[t(e._0x38410c)].brightness??2}}register("brightness",BrightnessEffect);class BlackAndWhiteEffect extends BaseEffect{get gradations(){const e=_0x3a2b68;var t;return(t=this[e(2490)])===null||t===void 0?void 0:t.uniforms.gradations}set[_0x3a2b68(1818)](e){const t=_0x3a2b68;this._postProcessStage&&(this._postProcessStage.uniforms[t(1818)]=e)}_mountedHook(){const e=_0x3a2b68;this._postProcessStage=Cesium__namespace[e(3166)].createBlackAndWhiteStage(),this._postProcessStage.uniforms.gradations=this.options.gradations??4}}register("blackAndWhite",BlackAndWhiteEffect);var MosaicShader=_0x3a2b68(426);class MosaicEffect extends BaseEffect{_mountedHook(){const e={_0x3e0b91:3174},t=_0x3a2b68;this._postProcessStage=new Cesium__namespace.PostProcessStage({fragmentShader:MosaicShader,enabled:this[t(e._0x3e0b91)]})}}register("mosaic",MosaicEffect);class DepthOfFieldEffect extends BaseEffect{get focalDistance(){const e={_0xa029b:401},t=_0x3a2b68;var i;return(i=this._postProcessStage)===null||i===void 0?void 0:i.uniforms[t(e._0xa029b)]}set focalDistance(e){this._postProcessStage&&(this._postProcessStage.uniforms.focalDistance=e)}get delta(){var e;return(e=this._postProcessStage)===null||e===void 0?void 0:e.uniforms.delta}set delta(e){const t={_0x2a8d42:2490,_0x22463e:3883},i=_0x3a2b68;this._postProcessStage&&(this[i(t._0x2a8d42)].uniforms[i(t._0x22463e)]=e)}get sigma(){const e=_0x3a2b68;var t;return(t=this._postProcessStage)===null||t===void 0?void 0:t[e(2949)].sigma}set[_0x3a2b68(746)](e){const t={_0x489af2:746},i=_0x3a2b68;this._postProcessStage&&(this[i(2490)].uniforms[i(t._0x489af2)]=e)}get stepSize(){var e;return(e=this._postProcessStage)===null||e===void 0?void 0:e.uniforms.stepSize}set stepSize(e){const t=_0x3a2b68;this[t(2490)]&&(this._postProcessStage.uniforms[t(3598)]=e)}_mountedHook(){const e={_0x5ddd16:3166,_0x4949b1:1941},t=_0x3a2b68;this[t(2490)]=Cesium__namespace[t(e._0x5ddd16)].createDepthOfFieldStage(),this[t(2490)].uniforms.focalDistance=this.options.focalDistance??87,this._postProcessStage.uniforms.delta=this.options.delta??1,this._postProcessStage.uniforms.sigma=this[t(e._0x4949b1)].sigma??3.78,this[t(2490)].uniforms.stepSize=this.options.stepSize??2.46}}register("depthOfField",DepthOfFieldEffect);const packing_glsl=`
vec3 packNormalToRGB(const in vec3 normal) {
  return normalize(normal) * 0.5 + 0.5;
}

vec3 unpackRGBToNormal(const in vec3 rgb) {
  return 2.0 * rgb.xyz - 1.0;
}

const float PackUpscale = 256. / 255.;
const float UnpackDownscale = 255. / 256.;

const vec3 PackFactors = vec3(256. * 256. * 256., 256. * 256., 256.);
const vec4 UnpackFactors = UnpackDownscale / vec4(PackFactors, 1.);

const float ShiftRight8 = 1. / 256.;

vec4 packDepthToRGBA(const in float v) {
  vec4 r = vec4(fract(v * PackFactors), v);
  r.yzw -= r.xyz * ShiftRight8;
  return r * PackUpscale;
}

float unpackRGBAToDepth(const in vec4 v) {
  return dot(v, UnpackFactors);
}

vec4 pack2HalfToRGBA(vec2 v) {
  vec4 r = vec4(v.x, fract(v.x * 255.0), v.y, fract(v.y * 255.0));
  return vec4(r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);
}
vec2 unpackRGBATo2Half(vec4 v) {
  return vec2(v.x + (v.y / 255.0), v.z + (v.w / 255.0));
}

float viewZToOrthographicDepth(const in float viewZ, const in float near, const in float far) {
  return (viewZ + near) / (near - far);
}
float orthographicDepthToViewZ(const in float linearClipZ, const in float near, const in float far) {
  return linearClipZ * (near - far) - near;
}

float viewZToPerspectiveDepth(const in float viewZ, const in float near, const in float far) {
  return ((near + viewZ) * far) / ((far - near) * viewZ);
}
float perspectiveDepthToViewZ(const in float invClipZ, const in float near, const in float far) {
  return (near * far) / ((far - near) * invClipZ - far);
}
`,cmz_selected_glsl=_0x3a2b68(1835);function CesiumRenderPass(n){const e={_0x5e1877:2957,_0x314425:3674},t={_0x183989:3396},i={_0x2d7f81:1655,_0x52e025:3255},s={_0x335b15:2356,_0x2d8a35:2299,_0x3d49b6:2219,_0x184509:2092},r={_0x53b7ce:2356},o={_0x56f0f0:1782},c={_0x5c883a:1626,_0x4761f2:2691,_0x1b8f71:1480,_0x26470e:345},_={_0x48566d:1655,_0x45d5de:2372},l={_0x13eeb9:3120},d={_0x118fbc:517},f={_0x45af99:2179,_0x1ffed0:2187,_0x5a23b0:1251,_0x592705:2338,_0xb12e72:407,_0x3f8deb:2361,_0x48890e:1251,_0x558fc5:1739},g={_0x5b0142:1782,_0x6e0d7f:4350},b={_0x512d65:4065,_0x51ce62:2540,_0x38ae30:1066,_0x5bf72b:1066,_0x29868a:838,_0x5b74d9:3004,_0x51d2f8:2131,_0x185540:1754,_0x165f2c:2325},C=_0x3a2b68;let{name:P,vertexShader:S,fragmentShader:L,uniforms:E,renderStateProcess:M,beforeUpdate:D,renderType:R,textureScale:k,pixelFormat:N,pixelDatatype:$,sampler:B,shaderRedefine:F,overrideViewport:z}=n;this._selectedIdTexture=null;const Y=C(2922)+P.replace(/[\.\\\/\-]/g,"_"),J="czm_non_"+Y+"_main",q="czm_"+Y+"_main",le="_cache_"+Y,j=Y+"Command";let ie=null,te=null,ce=null,xe=null,he;const Q=this,fe=new Cesium__namespace.ClearCommand({color:Cesium__namespace.Color[C(4384)],depth:1});let Ae=new Cesium__namespace.BoundingRectangle;if(z&&Cesium__namespace[C(655)][C(e._0x5e1877)](z,Ae),F=F||C(e._0x314425),R=R||"all",k=k||1,k<0||k>8)throw new Cesium__namespace.DeveloperError("CesiumRenderPass：textureScale必须大于0小于等于8");function me(W,U,X,oe){const _e=C;let Pe=W.shaderCache.getDerivedShaderProgram(U,Y);if(!Cesium__namespace.defined(Pe)){const De=U[_e(1963)];let Me=U.fragmentShaderSource,Ve=U.vertexShaderSource;const Ze=U._vertexShaderText;let Ue=Me.sources,xt=Ue.length,ht=!!xe&&$e();Cesium__namespace.defined(X)?Object.prototype.toString.call(X)===_e(b._0x512d65)&&(X.color?X="vec4("+Cesium__namespace.Color.floatToByte(X[_e(b._0x51ce62)].red)+", "+Cesium__namespace.Color[_e(b._0x38ae30)](X.color.green)+", "+Cesium__namespace.Color.floatToByte(X[_e(2540)].blue)+", "+Cesium__namespace.Color[_e(b._0x5bf72b)](X.color[_e(b._0x29868a)])+")":X="vec4(1.0)"):X="vec4(1.0)";let Pt=cmz_selected_glsl;const Et=/texture\s?\(\s?model_pickTexture\s?,\s?selectedFeature.st\s?\)/.test(X);oe==="varying"&&!Et?Pt+=`
#ifdef CZM_SELECTED_FEATURE
in float me_isSelected;
bool czm_selected(){
    bool isSelected= me_isSelected>0.0000001;
    if(!isSelected){
        isSelected= czm_selected(`+X+`);
    }
    return isSelected;
}
#endif `:Pt+=`
#ifdef CZM_SELECTED_FEATURE
bool czm_selected(){
    return czm_selected(`+X+`);
}
#endif `;const Tt=cmz_selected_glsl+(_e(2317)+X+`);
}
#endif  `);let Rt=![],Bt=![];if(/in\s?vec3\s?normal\s?;/.test(Ze)||/\n\s?vec3\s?normal\s?;/.test(Ze)?Rt=!![]:/out\s?vec3\s?v_normal\s?;/.test(Ze)&&(Bt=!![]),L){let Vt=![];for(let Ht=0;Ht<xt;++Ht)if(/vec4\s?packDepthToRGBA\s?\(/.test(Ue[Ht])){Vt=!![];break}const zt=(Vt?"":packing_glsl)+(ht?Pt:"")+Cesium__namespace.ShaderSource.replaceMain(L,q)+`void main() 
{ 
`+(F!=="replace"?"    "+J+`(); 
`:"")+("    "+q+`(); 
`)+_e(b._0x5b74d9),It=new Array(xt+1);for(let Ht=0;Ht<xt;++Ht)It[Ht]=Cesium__namespace.ShaderSource.replaceMain(Ue[Ht],J);It[xt]=zt,Rt?Me.defines.push("HAS_NORMAL_MARS3D"):Bt&&Me.defines.push("HAS_V_NORMAL_MARS3D"),Me=new Cesium__namespace.ShaderSource({sources:It,defines:Me.defines})}if(S||L){Ue=Ve.sources,xt=Ue.length;let Vt=![];for(let Ht=0;Ht<xt;++Ht)if(/vec4\s?packDepthToRGBA\s?\(/[_e(2361)](Ue[Ht])){Vt=!![];break}ht=ht&&oe===_e(b._0x51d2f8)&&!Et,Rt?Ve.defines[_e(b._0x185540)]("HAS_NORMAL_MARS3D"):Bt&&Ve.defines.push(_e(3806));const zt=(Vt?"":packing_glsl)+(ht?Tt:"")+Cesium__namespace.ShaderSource.replaceMain(S||"void main(){}",q)+`void main() 
{ 
`+(F!=="replace"?"    "+J+`(); 
`:"")+(ht?` me_isSelected = 0.0;
 #ifdef CZM_SELECTED_FEATURE
   me_isSelected=czm_selected()?1.0:0.0;
 #endif
`:"")+(_e(4120)+q+_e(b._0x165f2c))+`} 
`,It=new Array(xt+1);for(let Ht=0;Ht<xt;++Ht)It[Ht]=Cesium__namespace.ShaderSource.replaceMain(Ue[Ht],J);It[xt]=zt,Ve=new Cesium__namespace.ShaderSource({sources:It,defines:Ve[_e(2079)]})}Pe=W.shaderCache.createDerivedShaderProgram(U,Y,{vertexShaderSource:Ve,fragmentShaderSource:Me,attributeLocations:De})}return Pe}function Se(W,U){const X=C;W._renderPassCache=W[X(3683)]||{},W._renderPassCache[le]=W._renderPassCache[le]||{};const oe=W._renderPassCache[le];let _e=oe[U.id];if(!Cesium__namespace.defined(_e)){const Pe=Cesium__namespace.RenderState.getState(U);typeof M===X(g._0x5b0142)&&M[X(g._0x6e0d7f)](Q,Pe),_e=Cesium__namespace.RenderState.fromCache(Pe),oe[U.id]=_e}return _e}function Ie(W,U,X){const oe=C,_e=W,Pe=U._frameState;let De=W[oe(f._0x45af99)];if(!Cesium__namespace.defined(De))return;Pe.useLogDepth&&Cesium__namespace.defined(De.logDepth)&&(W=De[oe(f._0x1ffed0)].command),De=W[oe(f._0x45af99)];let Me=De.renderPass;!Cesium__namespace.defined(De[oe(4334)])&&(Me=De.renderPass={});let Ve,Ze;if(Cesium__namespace.defined(Me[j])&&(Ve=Me[j][oe(4187)],Ze=Me[j][oe(f._0x5a23b0)]),Me[j]=Cesium__namespace[oe(f._0x592705)].shallowClone(W,Me[j]),!Cesium__namespace[oe(f._0xb12e72)](Ve)||Me.shaderProgramId!==W.shaderProgram.id){const xt=W.shaderProgram,ht=_e._pickIdQualifier=new RegExp(oe(3385)+W.pickId,"g")[oe(f._0x3f8deb)](xt._fragmentShaderText)?"uniform":oe(2131);Me[j].shaderProgram=me(X,xt,W.pickId,ht),Me[j].renderState=Se(U,W[oe(f._0x48890e)]),Me[oe(f._0x558fc5)]=W.shaderProgram.id}else Me[j].shaderProgram=Ve,Me[j].renderState=Ze;const Ue=Me[j].uniformMap;ye(Ue)}function pe(W){return function(){const U=E[W];return typeof U=="function"?U():U}}function Te(W,U){return function(){const X=W[U]();if(Cesium__namespace.defined(X))return X.dimensions}}function ye(W){const U=C;if(!W.__created&&(W[U(l._0x13eeb9)]=function(){return xe[U(2263)]},W.czm_selectedIdTextureWidth=function(){var X;return((X=xe._selectedIdTexture)===null||X===void 0?void 0:X.width)??0},W.czm_selectedIdTextureStep=function(){const X=U;var oe;return(oe=xe._selectedIdTexture)!==null&&oe!==void 0&&oe[X(d._0x118fbc)]?1/xe[X(2263)].width:-1},!!E)){W[U(1139)]=!![];for(const X in E)if(E.hasOwnProperty(X)){typeof E[X]!==U(1782)?W[X]=pe(X):W[X]=E[X];const oe=W[X]();(typeof oe=="string"||oe instanceof Cesium__namespace.Texture||oe instanceof HTMLImageElement||oe instanceof HTMLCanvasElement||oe instanceof HTMLVideoElement)&&(W[X+"Dimensions"]=Te(W,X))}}}function ge(W){const U=C,X=W[U(_._0x48566d)],oe=X[U(1769)],_e=oe.length;let Pe,De,Me;for(let Ve=0;Ve<_e;++Ve){const Ze=_e-Ve-1,Ue=oe[Ze];for(De=0;De<Ue.commands.length;De++){const xt=Ue.commands[De];if(Me=Ue.indices[De],!(xe&&De===Cesium__namespace.Pass.GLOBE))for(Pe=0;Pe<Me;++Pe){const ht=xt[Pe];Ie(ht,W,W[U(_._0x45d5de)])}}}}function ae(){const W=C;te&&(te[W(2619)](),ie[W(2619)](),ie=void 0,te=void 0),ce&&(ce.destroy(),ce=void 0)}function we(W,U,X,oe){const _e=C,Pe=U.width,De=U.height;te&&te.width===Pe&&te.height===De&&X===he||(he=X,ae(),te=new Cesium__namespace[_e(c._0x5c883a)]({context:W,width:Pe,height:De,pixelFormat:N??Cesium__namespace[_e(c._0x4761f2)].RGBA,pixelDatatype:$??Cesium__namespace.PixelDatatype[_e(1248)],sampler:B??Cesium__namespace.Sampler.NEAREST}),ce=new Cesium__namespace.Texture({context:W,width:Pe,height:De,pixelFormat:Cesium__namespace.PixelFormat[_e(c._0x1b8f71)],pixelDatatype:Cesium__namespace.PixelDatatype.UNSIGNED_SHORT,sampler:Cesium__namespace.Sampler.NEAREST}),ie=new Cesium__namespace[_e(c._0x26470e)]({colorTextures:[te],context:W,destroyAttachments:![],depthTexture:ce}))}function ke(W){Ae=Cesium__namespace.BoundingRectangle.clone(W.viewport,Ae);const U=Object.assign({},W.passState);return U.viewport=Ae,U}function Ne(W,U){const X=C,oe=W._us._frameState,_e=oe.camera,Pe=_e._scene,De=Pe._view;try{if(!S&&!L){const Me=ke(De);typeof D===X(o._0x56f0f0)&&D.call(Q,Pe,U),we(W,Ae,Pe.hdr,De.sceneFramebuffer),executeDerivedCommandList(W,ie,Me)}else{const Me=ke(De);typeof D=="function"&&D.call(Q,Pe,U),we(W,Ae,Pe.hdr,De.sceneFramebuffer),ge(Pe),executeDerivedCommandList(W,ie,Me,"renderPass",j,R==="all"||!xe||!xe._selectedIdTexture?null:qe)}}catch{}}function $e(){const W=C;if(!xe)return;const U=xe[W(r._0x53b7ce)]||xe.parentSelected;if(U.length)return U}function qe(W,U){const X=C,oe=xe&&(xe[X(s._0x335b15)]||xe.parentSelected);if(!xe||!oe||!oe.length)return![];if(!W.pickId||W._pickIdQualifier!=="uniform")return!![];let _e=!![];const Pe=W.owner,De=R==="selected";if(Pe&&Pe.isObject3D){for(let Ve=0;Ve<oe.length;Ve++)if(oe[Ve]===Pe)return De;return!De}const Me=W[X(s._0x2d8a35)];if(Me[W.pickId]){const Ve=Me[W[X(2219)]]();_e=!De;for(let Ze=0;Ze<oe.length;Ze++){const Ue=oe[Ze],xt=Ue[X(2219)]?[Ue[X(s._0x3d49b6)]]:Ue[X(942)]||Ue._pickIds;for(let ht=0;ht<xt.length;ht++){const Pt=xt[ht];if(Pt.color===Ve||Cesium__namespace[X(s._0x184509)].equals(Pt.color,Ve))return De}}}return _e}function Je(W){const U=C;if(ie){const X=W._us[U(2331)].camera._scene[U(i._0x2d7f81)];fe.framebuffer=ie,fe[U(i._0x52e025)](W,X.passState),fe.framebuffer=void 0}}function ve(W){const U={_0x5e2628:4350,_0x39714f:400},X=C;if(xe&&Q.prevStageUpdate&&(xe[X(3396)]=Q.prevStageUpdate,Q[X(1587)]=null,Q.prevStageExecute=null),xe=W,!xe)return;const oe=xe[X(t._0x183989)];Q.prevStageUpdate=oe,xe.update=function(_e,Pe){const De=X;if(Je(_e),oe[De(U._0x5e2628)](xe,_e,Pe),!!xe.enabled)if(!S&&!L)Ne(_e,Pe);else{const Me=xe[De(2356)]||xe.parentSelected;Me&&Me[De(U._0x39714f)]&&Ne(_e,Pe)}}}this.update=Ne,this.clear=Je,Object.defineProperties(this,{texture:{get(){return te}},depthTexture:{get(){return ce}},stage:{get(){return xe},set(W){xe!==W&&ve(W)}}})}let scratchPerspectiveFrustum,scratchPerspectiveOffCenterFrustum,scratchOrthographicFrustum,scratchOrthographicOffCenterFrustum;function executeDerivedCommand(n,e,t,i,s,r){const o={_0x350011:2179,_0x35f7f9:3255},c=_0x3a2b68,_=Cesium__namespace.defined,l=i._frameState;let d=n.derivedCommands;_(d)&&(l.useLogDepth&&_(d.logDepth)&&(n=d.logDepth.command),d=n[c(o._0x350011)],_(d[e])&&(n=d[e][t],n[c(o._0x35f7f9)](s,r)))}function executeDerivedCommandList(n,e,t,i,s,r){const o={_0x480891:524,_0xcc49bf:3569,_0x40f901:1550,_0x22c1d4:2902,_0x51ff71:1153,_0x1ee2b2:2183,_0x12bfbf:1920,_0xcaebb0:1153,_0x2597cb:2796},c=_0x3a2b68,{Pass:_,defined:l,PerspectiveFrustum:d,PerspectiveOffCenterFrustum:f,OrthographicFrustum:g,OrthographicOffCenterFrustum:b}=Cesium__namespace;scratchPerspectiveFrustum=scratchPerspectiveFrustum||new d,scratchPerspectiveOffCenterFrustum=scratchPerspectiveOffCenterFrustum||new f,scratchOrthographicFrustum=scratchOrthographicFrustum||new g,scratchOrthographicOffCenterFrustum=scratchOrthographicOffCenterFrustum||new b;const C=n._us,P=C._frameState,S=P.camera,L=S._scene,E=L[c(1655)],M=E.frustumCommandsList,D=M.length,R=L[c(o._0x480891)],k=R[c(3943)],N=L._view.globeTranslucencyFramebuffer;let $;l(S.frustum.fov)?$=S[c(3569)].clone(scratchPerspectiveFrustum):l(S[c(o._0xcc49bf)].infiniteProjectionMatrix)?$=S.frustum.clone(scratchPerspectiveOffCenterFrustum):l(S.frustum.width)?$=S.frustum.clone(scratchOrthographicFrustum):$=S.frustum.clone(scratchOrthographicOffCenterFrustum);function B(J,q,le,j){if(r?r(J,q):!![])try{i&&s?executeDerivedCommand(J,i,s,q,le,j):J.execute(le,j)}catch{}}let F,z,Y;for(let J=0;J<D;++J){const q=D-J-1,le=M[q],j=t.framebuffer;if(t.framebuffer=e,$.near=q!==0?le.near*L.opaqueFrustumNearOffset:le.near,$.far=le[c(o._0x40f901)],C[c(o._0x22c1d4)]($),C[c(o._0x51ff71)](_[c(o._0x1ee2b2)]),Y=le.commands[_.GLOBE],z=le.indices[_.GLOBE],k)R[c(2857)](le,B,N,L,t);else for(F=0;F<z;++F)B(Y[F],L,n,t);for(C[c(o._0x51ff71)](_[c(o._0x12bfbf)]),Y=le.commands[_.CESIUM_3D_TILE],z=le[c(2796)][_.CESIUM_3D_TILE],F=0;F<z;++F)B(Y[F],L,n,t);for(C[c(o._0xcaebb0)](_.OPAQUE),Y=le.commands[_[c(513)]],z=le.indices[_.OPAQUE],F=0;F<z;++F)B(Y[F],L,n,t);for(C.updatePass(_.TRANSLUCENT),Y=le.commands[_.TRANSLUCENT],z=le[c(o._0x2597cb)][_.TRANSLUCENT],F=0;F<z;++F)B(Y[F],L,n,t);t.framebuffer=j}}class OutlineEffect extends BaseEffect{constructor(e={}){super(e),this._setOptionsHook(e)}get selected(){const e=_0x3a2b68;var t;return(t=this[e(2490)])===null||t===void 0?void 0:t.selected}set selected(e){const t=_0x3a2b68;let i=[];e&&(Array.isArray(e)?i=this._getPickIds(e):i=this[t(3917)]([e])),this._postProcessStage&&(this._postProcessStage.selected=i,this._postProcessStage.enabled=this.enabled&&this[t(2356)].length>0)}get color(){return this._color}set color(e){const t={_0x2fd02d:1596},i=_0x3a2b68;this._color=getCesiumColor(e),this._useSingleColor=!this._colorHidden||this[i(t._0x2fd02d)].equals(this._colorHidden)}get colorHidden(){return Cesium__namespace[_0x3a2b68(407)](this._colorHidden)?this._colorHidden:this._color}set[_0x3a2b68(2681)](e){const t={_0x25b3e0:3696},i=_0x3a2b68;this._colorHidden=getCesiumColor(e),this[i(t._0x25b3e0)]=!this._colorHidden||this._color.equals(this._colorHidden)}get[_0x3a2b68(2947)](){return this._planeAngle}set planeAngle(e){const t={_0x11b1dd:2806},i=_0x3a2b68;this._planeAngle=e,this._planeAngleRadians=Cesium__namespace[i(t._0x11b1dd)].toRadians(e)}_enabledHook(e){this._postProcessStage&&(this._postProcessStage.enabled=e&&this.selected.length>0)}_setOptionsHook(e,t){const i={_0x12a72e:3571,_0x293597:383,_0x1f94ab:3848,_0x121ea5:2947,_0x615de8:865,_0x3d2d9b:1143},s=_0x3a2b68;this[s(i._0x12a72e)]=e.eventType??EventType[s(i._0x293597)],this.width=e[s(517)]??6,this[s(2540)]=getCesiumColor(e.color,Cesium__namespace[s(2092)].WHITE),this.colorHidden=e.colorHidden,this[s(3848)]=e[s(i._0x1f94ab)]??![],this.planeAngle=e[s(i._0x121ea5)]??10,this[s(i._0x615de8)]=e[s(865)]??![],this[s(i._0x3d2d9b)]=e[s(1143)]??1,this.glowStrength=e[s(2453)]??3,this.onlySelected=e.onlySelected??![]}[_0x3a2b68(585)](){const e={_0x327581:2170,_0x3f0569:674,_0x4b0666:3307,_0x1b0272:2321,_0x135b4f:2490},t={_0x615e7d:517},i={_0x208d74:3870},s={_0x1f004c:3696},r=_0x3a2b68,o=this,c=this.name||this.type||"",_=new CesiumRenderPass({name:c+r(e._0x327581),vertexShader:`
          out vec3 vOutlineNormal_mars3d;
          void main(){
              #ifdef HAS_NORMAL_MARS3D
                  vOutlineNormal_mars3d = normal;
              #else
                  #ifdef HAS_V_NORMAL_MARS3D
                      vOutlineNormal_mars3d = v_normal;
                  #else
                      vOutlineNormal_mars3d=vec3(0.0);
                  #endif
              #endif
          } `,fragmentShader:`
        in vec3 vOutlineNormal_mars3d;
        void main(){
            #ifdef CZM_SELECTED_FEATURE
            if(!czm_selected())discard;
            #endif

            if(length(vOutlineNormal_mars3d)>0.0)
              out_FragColor=vec4( vOutlineNormal_mars3d ,out_FragColor.a);
        }`,sampler:new Cesium__namespace.Sampler({minificationFilter:Cesium__namespace.TextureMinificationFilter.LINEAR,magnificationFilter:Cesium__namespace.TextureMagnificationFilter.LINEAR})}),l=new Cesium__namespace.PostProcessStage({name:c+r(3955),uniforms:{outlineWidth(){return o.width},devicePixelRatio,thresholdAngle:function(){return o[r(3414)]},useSingleColor:function(){return o[r(s._0x1f004c)]},showOutlineOnly:function(){return!o.showPlane},visibleEdgeColor:function(){return o[r(2540)]},hiddenEdgeColor:function(){return o.colorHidden},maskTexture(){return _.texture},maskDepthTexture(){return _.depthTexture}},fragmentShader:`
    uniform sampler2D colorTexture;
    uniform vec2 colorTextureDimensions;
    uniform sampler2D depthTexture;

    uniform sampler2D maskTexture;
    uniform sampler2D maskDepthTexture;
    uniform float thresholdAngle;
    uniform bool showOutlineOnly;

    uniform float outlineWidth;
    uniform float devicePixelRatio;
    uniform vec3 visibleEdgeColor;
    uniform vec3 hiddenEdgeColor;
    uniform bool useSingleColor;

    in vec2 v_textureCoordinates;

    float lengthSq(vec3 v){
        return v.x * v.x + v.y * v.y + v.z * v.z;
    }
    float normal_angleTo(vec3 a,vec3 b){
        float denominator =  sqrt(  lengthSq(a) * lengthSq(b) );
        if ( denominator == 0. ) return czm_pi / 2.;
        float theta = dot(a, b ) / denominator;
        // clamp, to handle numerical problems
        return  acos(  clamp( theta, - 1., 1. ) );
    }

    float compareNormal(vec4 n1,vec4 n2){
          if(  abs (  normal_angleTo( n1.xyz , n2.xyz ) ) < thresholdAngle ){
              return 0.;
          }else{
              return 1.;
          }
    }

    float compareDepth(const in vec2 uv){
        float maskDepth = czm_readDepth( maskDepthTexture, uv);
        float nonDepth = czm_readDepth( depthTexture, uv);
        return maskDepth>nonDepth?1.:0.;
    }

    void main(){

        vec2 vUv=v_textureCoordinates;

        // vec4 color = texture( colorTexture, vUv);
        vec4 maskColor = texture( maskTexture, vUv);

        if( maskColor.a < 0.0001){
            // out_FragColor =color;
            discard;
            return;
        }

        vec2 invSize = outlineWidth / colorTextureDimensions;
        vec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);

        vec4 c1 = texture( maskTexture, vUv + uvOffset.xy);
        vec4 c2 = texture( maskTexture, vUv - uvOffset.xy);
        vec4 c3 = texture( maskTexture, vUv + uvOffset.yw);
        vec4 c4 = texture( maskTexture, vUv - uvOffset.yw);

        float d;
        if(showOutlineOnly){
            float diff1 = (c1.a - c2.a)*0.5;
            float diff2 = (c3.a - c4.a)*0.5;
            d = length( vec2(diff1, diff2) );
        }
        else{
            float diff1 = compareNormal(c1,c2)*0.5;
            float diff2 = compareNormal(c3,c4)*0.5;
            d = length( vec2(diff1, diff2) );
        }

        if(useSingleColor==false){
            float dp1 = compareDepth( vUv + uvOffset.xy);
            float dp2 = compareDepth( vUv - uvOffset.xy);
            float dp3 = compareDepth( vUv + uvOffset.yw);
            float dp4 = compareDepth( vUv - uvOffset.yw);

            float a1 = min(dp1, dp2);
            float a2 = min(dp3, dp4);
            float visibilityFactor = min(a1, a2);
            vec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;

            // out_FragColor =color+ vec4( edgeColor , 1. ) * vec4(d);
            out_FragColor = vec4( edgeColor , 1. ) * vec4(d);
        }else{
            // out_FragColor =color+ vec4( visibleEdgeColor , 1. ) * vec4(d);
            out_FragColor =  vec4( visibleEdgeColor , 1. ) * vec4(d);
        }
    }
    `});_.stage=l;const d=createBlurStage(c+"Blur1",4,1,.75),f=createBlurStage(c+r(e._0x3f0569),4,4,.5),g=new Cesium__namespace.PostProcessStageComposite({name:c+"BlurComposite",stages:[l,d,f],inputPreviousStageTexture:!![]}),b=new Cesium__namespace.PostProcessStage({name:c+r(630),uniforms:{showGlow:function(){return o.glow},edgeGlow:function(){return o[r(1143)]},edgeStrength:function(){return o.glowStrength},edgeOnly(){return o.onlySelected},maskTexture(){return _[r(i._0x208d74)]},lineTexture:l[r(e._0x4b0666)],edgeTexture1:d.name,edgeTexture2:g.name},fragmentShader:r(2874)}),C=new Cesium__namespace.PostProcessStageComposite({name:c+r(e._0x1b0272),stages:[g,b],inputPreviousStageTexture:![]});function P(S){const L={_0x440633:3696},E={_0x2e47af:3848};Object.defineProperties(S,{showGlow:{get(){return o.glow},set(M){const D=_0x20dc;o[D(865)]=M}},edgeGlow:{get(){return o.glowPower},set(M){const D=_0x20dc;o[D(1143)]=M}},edgeStrength:{get(){return o.glowStrength},set(M){o.glowStrength=M}},thresholdAngle:{get(){return o._planeAngleRadians},set(M){o._planeAngleRadians=M}},showOutlineOnly:{get(){return!o[_0x20dc(E._0x2e47af)]},set(M){o.showPlane=!M}},edgeOnly:{get(){return o.onlySelected},set(M){o.onlySelected=M}},useSingleColor:{get(){return o[_0x20dc(L._0x440633)]}},outlineWidth:{get(){return o[_0x20dc(t._0x615e7d)]},set(M){o.width=M}},visibleEdgeColor:{get(){return o.color},set(M){o.color=M}},hiddenEdgeColor:{get(){return o.colorHidden},set(M){o.colorHidden=M}}})}P(C),C._uniforms=C._uniforms||{},P(C._uniforms),C.selected=[],C.enabled=![],this[r(e._0x135b4f)]=C}_addedHook(){const e=_0x3a2b68;this.eventType&&this[e(1575)].on(this.eventType,this._map_clickHandler,this)}[_0x3a2b68(3916)](){const e=_0x3a2b68;this[e(3571)]&&this[e(1575)].off(this[e(3571)],this._map_clickHandler,this)}[_0x3a2b68(825)](e){const t={_0x28fd07:1941},i=_0x3a2b68,s=this[i(t._0x28fd07)].objectsToExclude;if(s)for(let o=0,c=s[i(400)];o<c;o++){const _=s[o];if(e.graphic===_||e[i(607)]===_)return}const r=this._map.mouseEvent.getPicked(e);this.selected=r}}register("outline",OutlineEffect);function createBlurStage(n,e,t,i){const s={_0x272fd2:3975,_0x1df004:1916,_0x7bcfe4:637,_0x1c0b48:3068,_0x517fa6:4307},r=_0x3a2b68,o={fragmentShader:`
    #define MAX_RADIUS `+e+r(4348)},c=new Cesium__namespace.PostProcessStage({name:n+r(s._0x272fd2),fragmentShader:o.fragmentShader,textureScale:i,forcePowerOfTwo:!![],uniforms:{kernelRadius:t,direction:new Cesium__namespace[r(3532)](1,0)},sampleMode:Cesium__namespace.PostProcessStageSampleMode.LINEAR}),_=new Cesium__namespace[r(590)]({name:n+r(s._0x1df004),fragmentShader:o.fragmentShader,textureScale:i,forcePowerOfTwo:!![],uniforms:{kernelRadius:t,direction:new Cesium__namespace.Cartesian2(0,1)},sampleMode:Cesium__namespace[r(s._0x7bcfe4)][r(s._0x1c0b48)]});return new Cesium__namespace[r(s._0x517fa6)]({name:n,stages:[c,_],inputPreviousStageTexture:!![]})}class BloomTargetEffect extends BaseEffect{constructor(e={}){const t={_0x4e7486:1948},i=_0x3a2b68;e={contrast:128,brightness:-.3,blurSamples:32,delta:1,sigma:3.78,stepSize:5,ratio:2,threshold:0,smoothWidth:.01,...e},super(e),this.color=getCesiumColor(e.color,Cesium__namespace.Color[i(t._0x4e7486)]),this.eventType=e.eventType??EventType.click}get[_0x3a2b68(2356)](){var e;return(e=this._postProcessStage)===null||e===void 0?void 0:e.selected}set[_0x3a2b68(2356)](e){const t={_0x138be3:2490,_0x316963:3174},i=_0x3a2b68;let s=[];e&&(Array.isArray(e)?s=this._getPickIds(e):s=this._getPickIds([e])),this[i(2490)]&&(this[i(t._0x138be3)].selected=s,this._postProcessStage.enabled=this[i(t._0x316963)]&&this.selected[i(400)]>0)}_enabledHook(e){this._postProcessStage&&(this._postProcessStage.enabled=e&&this.selected.length>0)}_mountedHook(){const e={_0x8f3589:590,_0x69816c:3068,_0xe36312:4307},t={_0x5d6c8f:1892},i={_0x319734:1941},s={_0x2e4f08:746},r=_0x3a2b68,o=new Cesium__namespace.PostProcessStage({name:this.name+"high",fragmentShader:`
        uniform sampler2D colorTexture;
        uniform vec3 marsColor;
        uniform float marsOpacity;
        uniform float threshold;
        uniform float smoothWidth;

        in vec2 v_textureCoordinates;
        void main() {
          vec4 marstexel = texture( colorTexture, v_textureCoordinates );

          #ifdef CZM_SELECTED_FEATURE
            if (!czm_selected()) {
                marstexel = vec4(0.);
            }
          #endif

          vec3 luma = vec3( 0.299, 0.587, 0.114 );
          float marsv = dot( marstexel.xyz, luma );
          vec4 outputColor = vec4(marsColor.rgb,marsOpacity);
          float alpha = smoothstep(threshold, threshold + smoothWidth, marsv);
          out_FragColor = mix( outputColor, marstexel, alpha );
        }`,uniforms:{marsColor:Cesium__namespace[r(2092)].BLACK,marsOpacity:1,smoothWidth:()=>this.options.smoothWidth,threshold:()=>this.options.threshold}}),c=`
    #define SAMPLES `+this.options.blurSamples+`
    uniform sampler2D colorTexture;
    uniform float direction;

    uniform float delta;
    uniform float sigma;
    uniform float stepSize;

    in vec2 v_textureCoordinates;
    void main()
    {
      vec2 st = v_textureCoordinates;
      vec2 dir = vec2(1.0 - direction, direction);
      vec2 step = vec2(stepSize * (czm_pixelRatio / czm_viewport.zw));

      vec3 g;
      g.x = 1.0 / (sqrt(czm_twoPi) * sigma);
      g.y = exp((-0.5 * delta * delta) / (sigma * sigma));
      g.z = g.y * g.y;
      vec4 result = texture(colorTexture, st) * g.x;

      for (float i = 1.0; i < float(SAMPLES); i+=1.0)
      {
        g.xy *= g.yz;
        vec2 offset = i * dir * step;
        result += texture(colorTexture, st - offset) * g.x;
        result += texture(colorTexture, st + offset) * g.x;
      }
      out_FragColor = result;
    }
    `,_=new Cesium__namespace.PostProcessStage({name:this[r(3307)]+"blur_x",fragmentShader:c,uniforms:{delta:()=>{const P=r;return this.options[P(3883)]},sigma:()=>{const P=r;return this.options[P(s._0x2e4f08)]},stepSize:()=>this[r(i._0x319734)].stepSize,direction:0},sampleMode:Cesium__namespace.PostProcessStageSampleMode.LINEAR}),l=new Cesium__namespace[r(e._0x8f3589)]({name:this.name+"blur_y",fragmentShader:c,uniforms:{delta:()=>this.options.delta,sigma:()=>this.options.sigma,stepSize:()=>this.options.stepSize,direction:1},sampleMode:Cesium__namespace.PostProcessStageSampleMode[r(e._0x69816c)]}),d=new Cesium__namespace.PostProcessStageComposite({name:this.name+"blur",stages:[_,l]}),f=new Cesium__namespace[r(e._0xe36312)]({name:this.name+"_blur_comp",stages:[o,d],inputPreviousStageTexture:!![]}),g=new Cesium__namespace.PostProcessStage({name:this.name+"contrast_bias",fragmentShader:`
        uniform sampler2D colorTexture;
        in vec2 v_textureCoordinates;
        uniform float contrast;
        uniform float brightness;
        void main(void)
        {
            vec3 sceneColor = texture(colorTexture, v_textureCoordinates).xyz;
            sceneColor = czm_RGBToHSB(sceneColor);
            sceneColor.z += brightness;
            sceneColor = czm_HSBToRGB(sceneColor);
            float factor = (259.0 * (contrast + 255.0)) / (255.0 * (259.0 - contrast));
            sceneColor = factor * (sceneColor - vec3(0.5)) + vec3(0.5);
            out_FragColor = vec4(sceneColor, 1.0);
        }`,uniforms:{contrast:()=>{const P=r;return this[P(1941)][P(3243)]},brightness:()=>this.options.brightness}}),b=new Cesium__namespace.PostProcessStageComposite({name:this.name+"contrast_bias_blur",stages:[g,f]}),C=new Cesium__namespace.PostProcessStage({name:this.name+"generate_composite",fragmentShader:`
      uniform sampler2D colorTexture;
      uniform sampler2D bloomTexture;
      uniform float ratio;
      uniform vec4 color;
      in vec2 v_textureCoordinates;
      void main(void)
      {
        vec4 color1 = texture(colorTexture, v_textureCoordinates);
        vec4 bloom = texture(bloomTexture, v_textureCoordinates);
        bloom *= color ;
        #ifdef CZM_SELECTED_FEATURE
          if (czm_selected()) {
            bloom *= ratio;
          }
        #endif
        out_FragColor = bloom + color1;
      }`,uniforms:{bloomTexture:b.name,ratio:()=>{const P=r;return this.options[P(t._0x5d6c8f)]},color:()=>this[r(2540)]}});this._postProcessStage=new Cesium__namespace.PostProcessStageComposite({name:this.name,stages:[b,C],inputPreviousStageTexture:![]}),this._postProcessStage.selected=[]}[_0x3a2b68(2679)](){const e=_0x3a2b68;this.eventType&&this[e(1575)].on(this.eventType,this._map_clickHandler,this)}[_0x3a2b68(3916)](){const e=_0x3a2b68;this.eventType&&this._map.off(this[e(3571)],this._map_clickHandler,this)}_map_clickHandler(e){const t={_0x17c39b:1575},i=_0x3a2b68,s=this.options[i(3361)];if(s)for(let o=0,c=s.length;o<c;o++){const _=s[o];if(e[i(2471)]===_||e.layer===_)return}const r=this[i(t._0x17c39b)][i(1374)].getPicked(e);this.selected=r}}register(_0x3a2b68(3603),BloomTargetEffect);var index$2={__proto__:null,BaseEffect,FogEffect,RainEffect,SnowEffect,SnowCoverEffect,InvertedEffect,NightVisionEffect,BloomEffect,BrightnessEffect,BlackAndWhiteEffect,MosaicEffect,DepthOfFieldEffect,OutlineEffect,BloomTargetEffect};class BaseControl extends BaseThing{constructor(e={}){super(e),this._show=e.show??!![]}get show(){return this._show}set show(e){const t={_0x3ec2cd:2094},i=_0x3a2b68;this._show!==e&&(this._show=e,this[i(2094)]&&(this[i(t._0x3ec2cd)][i(2748)][i(2085)]=e?"block":"none"),this._showHook&&this[i(840)](e),this._map.fire(EventType.updateControl,{control:this}))}get[_0x3a2b68(1603)](){return this._type}get container(){return this._container}get parentContainer(){const e={_0x1899b3:1941,_0x2059a9:527},t=_0x3a2b68;var i;return this.options.parentContainer?this[t(e._0x1899b3)].parentContainer:(i=this._map)===null||i===void 0?void 0:i[t(e._0x2059a9)]}get parentContainerId(){var e;return(e=this.parentContainer)===null||e===void 0?void 0:e.id}_enabledHook(e){const t={_0x2af292:1305,_0x506410:840},i=_0x3a2b68;this[i(2094)]&&(this[i(2094)].style.display=e?i(t._0x2af292):"none"),this.isAdded&&this[i(t._0x506410)]&&this._showHook(e)}setOptions(e){const t=_0x3a2b68;if(!isBoolean(e))return this[t(1941)]=merge(this.options,e),this[t(2128)](),this}reload(){const e=_0x3a2b68,t=this[e(1575)];t&&(this._onRemove(),delete this._container,this._onAdd(t))}addTo(e){return e&&e[_0x3a2b68({_0xf1ba93:3116}._0xf1ba93)]&&e.addControl(this),this}remove(e){this[_0x3a2b68(1575)]&&this._map.removeControl(this,e)}_onAdd(e){const t={_0x4a7f81:3422,_0x119e8b:2094,_0x1d813d:1844},i=_0x3a2b68;this.isAdded||this[i(2006)]===State.ADD||(this._state=State[i(843)],this._map=e,this[i(2094)]?!this[i(2094)].parentNode&&this._addChildContainer(this._container):(this[i(585)]&&this._mountedHook(),this._container&&this[i(t._0x4a7f81)](this[i(t._0x119e8b)])),this._addedHook&&this._addedHook(),this[i(2094)]&&this[i(2094)][i(t._0x1d813d)]("click",this._container_onClickHandler.bind(this)),this[i(2006)]=State.ADDED)}_addChildContainer(e){const t={_0x5b1c7c:1941,_0x4824f3:3490},i=_0x3a2b68;if(this[i(t._0x5b1c7c)][i(3775)])this.parentContainer.insertBefore(e,this.options.insertBefore);else if(Cesium__namespace.defined(this[i(t._0x5b1c7c)].insertIndex)){const s=this[i(t._0x4824f3)].childNodes;s.length<this[i(1941)].insertIndex&&(this.options[i(2716)]=0),this.parentContainer.insertBefore(e,s[this[i(t._0x5b1c7c)].insertIndex])}else this.parentContainer.appendChild(e)}[_0x3a2b68(1370)](){const e={_0x474b24:1575,_0x367515:383,_0x34f2a0:1654},t=_0x3a2b68;this._state===State.ADDED&&this[t(e._0x474b24)]&&(this._removedBeforeHook&&this._removedBeforeHook(),this._container&&this._container.parentNode&&(this._container.removeEventListener(t(e._0x367515),this._container_onClickHandler),this._container[t(3594)][t(e._0x34f2a0)](this._container)),this._removedHook&&this._removedHook(),this[t(1575)]=null,this._state=State.REMOVED)}_mountedHook(){}[_0x3a2b68(2679)](){}_removedHook(){}_container_onClickHandler(e){const t={_0x581353:3174,_0x5223b5:1941},i=_0x3a2b68;this[i(t._0x581353)]&&(this.options.click&&this.options[i(383)](this.options),this.fire(EventType.click,{...this[i(t._0x5223b5)],mouseEvent:e}))}setStyle(e){const t={_0x6f34e6:2094},i=_0x3a2b68;return this._container&&merge(this[i(t._0x6f34e6)].style,e),this}[_0x3a2b68(1446)](e,t,i=""){const s={_0xf2a548:433,_0x1f3399:2377},r=_0x3a2b68;return e?(!t&&(t=create$3("div")),e=trim(e),e[r(s._0xf2a548)]("<?xml")||e.startsWith("<svg")?t.appendChild(parseDom(e,!![],i)):e[r(433)]("data:image")||e.endsWith(r(781))||e.endsWith(".png")||e.endsWith(".jpg")?create$3("img",i,t)[r(s._0x1f3399)]("src",e):create$3("i",i+" "+e,t),t[r(416)]):""}[_0x3a2b68(1109)](e,t={},i){return!t.control&&(t.control=this),super.fire(e,t,i)}destroy(e){const t={_0x264a7c:3174},i=_0x3a2b68;this[i(t._0x264a7c)]=![],super.destroy(e)}}class BaseCzmControl extends BaseControl{get viewer(){return this[_0x3a2b68({_0x4d8f7a:1575}._0x4d8f7a)].viewer}_mountedHook(){const e={_0x4bf34a:1575,_0x4910bd:3455,_0x46f2ab:2748},t=_0x3a2b68,i=this[t(e._0x4bf34a)].viewer[this._czmControlKey];if(i){if(this[t(e._0x4910bd)])try{this[t(3455)](i[this._czmContainerKey]),delete this[t(e._0x4910bd)]}catch{}}else this._container=this._createCzmContainer(),this.options[t(2748)]&&this.setStyle(this.options[t(e._0x46f2ab)])}_addedHook(){const e={_0x40e87a:2409,_0x2a7fd2:3076,_0x3812c9:3857},t=_0x3a2b68;let i=this._map.viewer[this._czmControlKey];!i&&(i=this[t(4254)](this._container)),this[t(e._0x40e87a)]=i,this._container=i[this._czmContainerKey],this._container.style.display=this.show?t(1305):"none",this[t(e._0x2a7fd2)]&&(this._map[t(e._0x3812c9)]===LangType.ZH||this._map.lang===LangType.ZHHK)&&this._toChineseLang(this._map.container),this.options.insertIndex&&this[t(548)](this.options.insertIndex)}_removedHook(){const e={_0x196c0b:2619,_0x21fa6f:3662},t=_0x3a2b68;if(this[t(1941)].destroyCzm??!![]){try{this._czmContrl[t(e._0x196c0b)]()}catch{}delete this._map.viewer[this[t(3148)]],delete this._czmContrl}else this._container.style.display=t(e._0x21fa6f)}_setInsertIndex(e=0){const t=_0x3a2b68,i=this.parentContainer.childNodes;i[t(400)]<e&&(e=0),this.parentContainer.removeChild(this._container),this.parentContainer.insertBefore(this._container,i[e])}_rebindCzmContainer(e){}_createCzmContainer(){return null}_createCzmControl(){return null}_updateDomInnerHtml(e,t,i){const s={_0x32b1c5:416},r=_0x3a2b68,o=e.getElementsByClassName(i);for(let c=0;c<o.length;c++)t[o[c][r(s._0x32b1c5)]]&&(o[c].innerHTML=t[o[c][r(416)]])}_updateDomByTagName(e,t,i){const s=_0x3a2b68,r=e.getElementsByTagName(i);for(let o=0;o<r.length;o++)t[r[o].innerHTML]&&(r[o].innerHTML=t[r[o][s(416)]])}[_0x3a2b68(2420)](e,t,i,s){const r={_0x45a1e6:3306},o=_0x3a2b68;!e&&(e=document);const c=e.getElementsByClassName(i);for(let _=0;_<c.length;_++)t[c[_].getAttribute(s)]&&c[_].setAttribute(s,t[c[_][o(r._0x45a1e6)](s)])}[_0x3a2b68(2569)](e,t,i,s,r){const o={_0x17939a:400},c={_0x4a4109:2377},_=_0x3a2b68,l=e.getElementsByClassName(i);if(l[_(o._0x17939a)]>0)for(let d=0;d<l[_(o._0x17939a)];d++)l[d][r]=function(f){const g=_,b=f.currentTarget.getAttribute(s);t[b]&&f.currentTarget[g(c._0x4a4109)](s,t[b])}}}class Animation extends BaseCzmControl{constructor(e={}){const t={_0x25b28b:3332},i=_0x3a2b68;super(e),this._czmControlKey="_animation",this[i(t._0x25b28b)]=i(2094)}[_0x3a2b68(1894)](){return create$3("div",_0x3a2b68({_0x238956:1180}._0x238956))}_createCzmControl(){const e={_0x19b187:870},t=_0x3a2b68;return Cesium__namespace.AnimationViewModel.defaultTicks=this.options[t(e._0x19b187)]||[.1,.25,.5,1,2,5,10,15,30,60,120,300,600,900,1800,3600],new Cesium__namespace[t(861)](this._container,new Cesium__namespace[t(3157)](this.viewer.clockViewModel))}_toChineseLang(e){const t={_0x2804e2:4141,_0x5c89b0:2335},i=_0x3a2b68;let s=e[i(t._0x2804e2)]("cesium-viewer-animationContainer");if(s.length>0){s=s[0];const r={Today:"今天","Today (real-time)":"今天（实际时间）",Pause:"暂停","Play Reverse":i(t._0x5c89b0),"Play Forward":i(4163),"Current time not in range":"当前时间不在范围内"};this._updateDomByTagName(s,r,"title")}}}register$1(_0x3a2b68(2346),Animation);class BaseLayerPicker extends BaseCzmControl{constructor(e={}){const t=_0x3a2b68;super(e),this._czmControlKey="_baseLayerPicker",this._czmContainerKey=t(4399),this.options.insertIndex=this.options.insertIndex??1}get parentContainer(){const e={_0x20c8c5:1010},t=_0x3a2b68;return this.options.parentContainer?this.options.parentContainer:this._map[t(e._0x20c8c5)]}_createCzmControl(){const e={_0x4c00cf:1575,_0x3af9f1:2916,_0x2197aa:2916,_0xc97296:1941,_0x113daf:2779,_0x4797d2:3109,_0xfa8334:1010},t=_0x3a2b68;var i;const s=this[t(e._0x4c00cf)][t(1941)].control||{},r=this.options,o={map:this._map,globe:this._map.scene.globe,imageryProviderViewModels:r[t(e._0x3af9f1)]||s[t(e._0x2197aa)],selectedImageryProviderViewModel:r.selectedImageryProviderViewModel||s.selectedImageryProviderViewModel,terrainProviderViewModels:r[t(443)]||s.terrainProviderViewModels,selectedTerrainProviderViewModel:r.selectedTerrainProviderViewModel||s.selectedTerrainProviderViewModel};if(!o.imageryProviderViewModels&&((i=this._map[t(e._0xc97296)].basemaps)===null||i===void 0?void 0:i.length)>0){const _=getImageryProviderViewModels(this[t(1575)][t(e._0xc97296)].basemaps,this[t(1575)].options.templateValues);o[t(2916)]=_[t(2916)],_.selectedIndex!==-1&&(o.selectedImageryProviderViewModel=_[t(e._0x2197aa)][_.selectedIndex])}if(!o.terrainProviderViewModels){var c;o[t(443)]=getTerrainProviderViewModels(this._map[t(e._0x113daf)]()),o.selectedTerrainProviderViewModel=o.terrainProviderViewModels[(c=this._map[t(1941)][t(e._0x4797d2)])!==null&&c!==void 0&&c[t(442)]?1:0]}return new Cesium__namespace[t(1789)](this._map[t(e._0xfa8334)],o)}[_0x3a2b68(3076)](e){const t={_0x4b3ed8:4299,_0x5613c8:1321},i={_0x2db59d:988,_0x1e561c:3666},s=_0x3a2b68;let r=e.getElementsByClassName("cesium-baseLayerPicker-dropDown");if(r.length>0){r=r[0];const o={Imagery:"影像","Cesium ion":"官方ION",Other:"其他",Terrain:"地形服务","WGS84 Ellipsoid":"WGS84 椭球","Cesium World Terrain":"Cesium 世界地形图","WGS84 standard ellipsoid, also known as EPSG:4326":s(3933),"High-resolution global terrain tileset curated from several datasources and hosted by Cesium ion":"高分辨率全球地形图块集由几个数据源组成，由Cesium ion托管"};this[s(t._0x4b3ed8)](r,o,s(1732)),this._updateDomInnerHtml(r,o,s(2670)),this._updateDomInnerHtml(r,o,s(4070)),this._updateDomAttribute(r,o,s(742),"title");const c=e.getElementsByClassName("cesium-baseLayerPicker-selected");c.length>0&&(c[0].parentElement[s(t._0x5613c8)]=function(_){const l=s,d=_.currentTarget.getAttribute(l(i._0x2db59d)),f=d.split(`
`);let g="",b="";o[f[0]]?g+=o[f[0]]:g+=f[0],o[f[0]]?b+=o[f[1]]:b+=f[1],_[l(i._0x1e561c)][l(2377)]("title",g+`
`+b)})}}}register$1("baseLayerPicker",BaseLayerPicker);class FullscreenButton extends BaseCzmControl{constructor(e={}){const t=_0x3a2b68;super(e),this[t(3148)]="_fullscreenButton",this[t(3332)]="_container"}get[_0x3a2b68(3490)](){const e={_0x1b2b7c:1941},t=_0x3a2b68;return this.options.parentContainer?this[t(e._0x1b2b7c)].parentContainer:this._map.toolbar}_createCzmContainer(){const e={_0x1d787a:3206,_0x495a5c:2085},t=_0x3a2b68,i=create$3(t(e._0x1d787a),"cesium-button cesium-toolbar-button");return i.style[t(e._0x495a5c)]="inline-block",i}_createCzmControl(){const e=_0x3a2b68;return new Cesium__namespace.FullscreenButton(this._container,this[e(1941)].fullscreenElement)}[_0x3a2b68(3455)](e){const t={_0x3b6331:2085},i=_0x3a2b68;var s;removeClass(e,"cesium-viewer-fullscreenContainer"),addClass(e,"cesium-button cesium-toolbar-button"),e.style[i(t._0x3b6331)]="inline-block",e.parentNode.removeChild(e);const r=(s=this.viewer[i(2582)])===null||s===void 0?void 0:s._wrapper;r?this.parentContainer.insertBefore(e,r):this.parentContainer.appendChild(e)}_toChineseLang(e){const t={_0x4ac8b3:4339,_0x597948:1321},i=_0x3a2b68,s={"Full screen":"全屏","Exit full screen":i(t._0x4ac8b3),"Full screen unavailable":"全屏不可用"};this[i(2569)](e,s,"cesium-fullscreenButton","title",i(t._0x597948))}}register$1("fullscreenButton",FullscreenButton);class GaodePOIGeocoder{constructor(e={}){const t={_0x598389:1941,_0x45697c:1805},i=_0x3a2b68;this[i(t._0x598389)]=e,this[i(t._0x45697c)]=e[i(1624)]||gaodeArr}getArrayRandomOne(){const e={_0x16aa68:412},t=_0x3a2b68,i=this.gaodekey,s=Math.floor(Math[t(e._0x16aa68)]()*i.length+1)-1;return i[s]}geocode(e){const t={_0x46cfce:2278,_0x1946a0:3118,_0x3844f9:4233},i=_0x3a2b68,s=this.getArrayRandomOne(),r=new Cesium__namespace.Resource({url:i(4317),queryParameters:{count:20,key:s,keywords:e,types:"110000|120000|130000|140000|180000|190000|",...this[i(1941)].parameters}}),o=this;return r.fetchJson().then(function(c){const _={_0x11c730:4275},l=i;if(c.infocode!=="10000")return logError$1(l(4147)+c.infocode+")："+c.info),{};if(c[l(t._0x46cfce)][l(400)]===0)return logInfo(l(t._0x1946a0)+e+"”相关数据！"),{};let d=3e3;return o.map[l(t._0x3844f9)].positionCartographic.height<d&&(d=o.map[l(4233)].positionCartographic.height),c.pois.map(function(f){const g=l;let b=f[g(2934)].split(",");return b=gcj2wgs(b),{displayName:f.name,destination:Cesium__namespace[g(2978)][g(_._0x11c730)](b[0],b[1],d)}})})}}class Geocoder extends BaseCzmControl{constructor(e={}){const t=_0x3a2b68;super(e),this._czmControlKey="_geocoder",this[t(3332)]="_form"}get parentContainer(){const e={_0x8adb67:3490,_0x3c58a3:1941},t=_0x3a2b68;return this.options[t(e._0x8adb67)]?this[t(e._0x3c58a3)].parentContainer:this._map.toolbar}_createCzmContainer(){return create$3("div","cesium-viewer-geocoderContainer")}_createCzmControl(){const e={_0x7f5069:2094},t=_0x3a2b68;let i=this.options[t(3115)];if(!i){const s=new GaodePOIGeocoder(this.options.geocoderConfig);s.map=this,i=[s]}return new Cesium__namespace.Geocoder({container:this[t(e._0x7f5069)],geocoderServices:i,scene:this._map.scene})}_toChineseLang(e){const t=_0x3a2b68,i={"Enter an address or landmark...":"请输入地址...","Searching...":"查询中..."};this._updateDomAttribute(e,i,"cesium-geocoder-input",t(3346))}}register$1("geocoder",Geocoder);class HomeButton extends BaseCzmControl{constructor(e={}){const t={_0x30f551:1704,_0x3bb489:2716},i=_0x3a2b68;super(e),this._czmControlKey=i(t._0x30f551),this._czmContainerKey="_element",this.options[i(t._0x3bb489)]=this[i(1941)].insertIndex??0}get parentContainer(){const e=_0x3a2b68;return this.options[e(3490)]?this.options[e(3490)]:this[e(1575)][e(1010)]}_createCzmControl(){const e=_0x3a2b68;return new Cesium__namespace.HomeButton(this._map.toolbar,this._map[e(744)])}_toChineseLang(e){this[_0x3a2b68({_0x123ca8:2420}._0x123ca8)](e,{"View Home":this.options.title??"初始视图"},"cesium-home-button","title")}}register$1(_0x3a2b68(1134),HomeButton);class NavigationHelpButton extends BaseCzmControl{constructor(e={}){const t=_0x3a2b68;super(e),this[t(3148)]="_navigationHelpButton",this._czmContainerKey="_wrapper"}get[_0x3a2b68(3490)](){const e=_0x3a2b68;return this.options.parentContainer?this.options[e(3490)]:this._map.toolbar}[_0x3a2b68(4254)](){const e={_0x1a504c:1575,_0x4e2080:2623},t=_0x3a2b68;let i=!![];try{if(Cesium__namespace.defined(window.localStorage)){const s=window.localStorage.getItem("cesium-hasSeenNavHelp");Cesium__namespace.defined(s)&&s?i=![]:window.localStorage.setItem("cesium-hasSeenNavHelp","true")}}catch{}return new Cesium__namespace.NavigationHelpButton({container:this[t(e._0x1a504c)].toolbar,instructionsInitiallyVisible:Cesium__namespace[t(e._0x4e2080)](this.options.navigationInstructionsInitiallyVisible,i)})}_toChineseLang(e){const t={_0xcfbe06:4264,_0x4bb8a7:2201,_0x106255:3189,_0x37ceca:4019,_0x12ebd9:4141,_0x3d1a29:686,_0x3714b8:797},i=_0x3a2b68;this._updateDomAttribute(e,{"Navigation Instructions":"帮助"},i(t._0xcfbe06),"title");const s={Mouse:"鼠标操作",Touch:"触摸手势","Pan view":i(2536),"Left click + drag":"鼠标左键+拖拽","Zoom view":i(t._0x4bb8a7),"Right click + drag, or":i(2790),"Mouse wheel scroll":i(2102),"Rotate view":i(t._0x106255),"Middle click + drag, or":"中键按下拖拽，或者","CTRL + Left/Right click + drag":"按Ctrl键 同时 左/右键拖拽","One finger drag":i(t._0x37ceca),"Two finger pinch":"双指向内或向外滑动","Tilt view":"倾斜视图","Two finger drag, same direction":"双指按相同方向拖动","Two finger drag, opposite direction":"双指按相反方向拖动"};let r=e[i(t._0x12ebd9)]("cesium-navigation-button-left");r.length>0&&(r=r[0],s[r.textContent]&&(r.innerHTML=r.children[0].outerHTML+s[r.textContent]));let o=e.getElementsByClassName("cesium-navigation-button-right");o.length>0&&(o=o[0],s[o[i(t._0x3d1a29)]]&&(o.innerHTML=o.children[0][i(t._0x3714b8)]+s[o.textContent])),this._updateDomInnerHtml(e,s,"cesium-navigation-help-pan"),this._updateDomInnerHtml(e,s,"cesium-navigation-help-details"),this[i(4299)](e,s,"cesium-navigation-help-zoom"),this._updateDomInnerHtml(e,s,"cesium-navigation-help-rotate"),this._updateDomInnerHtml(e,s,"cesium-navigation-help-tilt")}}register$1("navigationHelpButton",NavigationHelpButton);class ProjectionPicker extends BaseCzmControl{constructor(e={}){const t=_0x3a2b68;super(e),this._czmControlKey=t(903),this._czmContainerKey="_wrapper"}get parentContainer(){const e={_0x592926:1010},t=_0x3a2b68;return this[t(1941)].parentContainer?this[t(1941)][t(3490)]:this._map[t(e._0x592926)]}_createCzmControl(){return new Cesium__namespace.ProjectionPicker(this._map.toolbar,this._map.scene)}_toChineseLang(e){const t={_0x3a04d6:2420},i=_0x3a2b68,s={"Perspective Projection":"透视投影","Orthographic Projection":"正射投影"};this[i(t._0x3a04d6)](e,s,i(2196),"title"),this[i(t._0x3a04d6)](e,s,"cesium-projectionPicker-dropDown-icon",i(988))}}register$1(_0x3a2b68(2416),ProjectionPicker);class SceneModePicker extends BaseCzmControl{constructor(e={}){super(e),this._czmControlKey="_sceneModePicker",this._czmContainerKey="_wrapper"}get[_0x3a2b68(3490)](){return this.options.parentContainer?this.options.parentContainer:this._map.toolbar}[_0x3a2b68(4254)](){const e={_0x267966:1010},t=_0x3a2b68;return new Cesium__namespace.SceneModePicker(this._map[t(e._0x267966)],this._map.scene)}_toChineseLang(e){const t={_0x2695d0:3026},i=_0x3a2b68,s={"2D":"二维视图","3D":"三维视图","Columbus View":i(t._0x2695d0)};this._updateDomAttributeByEvent(e,s,"cesium-sceneModePicker-button3D","title",i(1321)),this._updateDomAttribute(e,s,"cesium-sceneModePicker-dropDown-icon","title")}}register$1(_0x3a2b68(3117),SceneModePicker);class Timeline extends BaseCzmControl{constructor(e={}){const t=_0x3a2b68;super(e),this._czmControlKey=t(949),this._czmContainerKey=t(527)}_createCzmContainer(){const e={_0x48c9d5:3408},t=_0x3a2b68,i=create$3(t(3206),"cesium-viewer-timelineContainer");return i.style.right=t(e._0x48c9d5),i}[_0x3a2b68(4254)](){const e=_0x3a2b68;return new Cesium__namespace.Timeline(this._container,this[e(1575)].clock)}_addedHook(){const e={_0x4908e1:2679,_0x5e3726:2257},t=_0x3a2b68;super[t(e._0x4908e1)]();const i=(this.options.maxSpan??1)*10,s=this[t(2409)][t(1001)];this._czmContrl[t(1001)]=function(r,o){if(Cesium__namespace.JulianDate.secondsDifference(o,r)>i)return s.bind(this)(r,o)},this._czmContrl.addEventListener("settime",this.onTimelineScrubfunction,![]),this.zoomTo(this._map[t(e._0x5e3726)].startTime,this[t(1575)].clock.stopTime)}onTimelineScrubfunction(e){const t={_0x485f06:2257},i=_0x3a2b68,s=e[i(t._0x485f06)];s.currentTime=e.timeJulian,s.shouldAnimate=![]}[_0x3a2b68(1001)](e,t){const i={_0x1ba611:2409};clearTimeout(this._timeTik),this._timeTik=setTimeout(()=>{const s=_0x20dc;this.isAdded&&this[s(i._0x1ba611)].zoomTo(e,t)},600)}[_0x3a2b68(4067)](){this._czmContrl.resize()}[_0x3a2b68(3916)](){const e=_0x3a2b68;this[e(2409)].removeEventListener("settime",this.onTimelineScrubfunction,![]),super[e(3916)]()}_rebindCzmContainer(e){const t={_0x4024eb:2748},i=_0x3a2b68;e[i(t._0x4024eb)][i(595)]="0px"}}register$1("timeline",Timeline);class VRButton extends BaseCzmControl{constructor(e={}){const t={_0x15287c:2094},i=_0x3a2b68;super(e),this._czmControlKey="_vrButton",this._czmContainerKey=i(t._0x15287c)}get parentContainer(){return this.options.parentContainer?this.options.parentContainer:this._map.toolbar}_createCzmContainer(){return create$3(_0x3a2b68({_0x58c697:3206}._0x58c697),"cesium-button cesium-toolbar-button mars3d-vrButton")}_createCzmControl(){const e={_0x3bb787:3771},t=_0x3a2b68;return new Cesium__namespace.VRButton(this._container,this[t(1575)].scene,this.options[t(e._0x3bb787)])}[_0x3a2b68(3455)](e){const t={_0x215d11:3594,_0x29bcd7:1955},i=_0x3a2b68;var s;removeClass(e,"cesium-viewer-vrContainer"),addClass(e,"cesium-button cesium-toolbar-button mars3d-vrButton"),e[i(t._0x215d11)].removeChild(e);const r=(s=this.viewer.navigationHelpButton)===null||s===void 0?void 0:s[i(t._0x29bcd7)];r?this.parentContainer.insertBefore(e,r):this.parentContainer.appendChild(e)}[_0x3a2b68(3076)](e){const t={_0x1cad59:485,_0x598a0b:2233,_0x48b38e:4092},i=_0x3a2b68,s={"Enter VR mode":i(639),"Exit VR mode":i(t._0x1cad59),"VR mode is unavailable":i(t._0x598a0b)};this._updateDomAttributeByEvent(e,s,i(t._0x48b38e),i(988),"onmouseover")}}register$1(_0x3a2b68(362),VRButton);class LocationBar extends BaseControl{constructor(e={}){const t={_0x59ddf5:1688},i=_0x3a2b68;super(e),this.options[i(t._0x59ddf5)]=this.options.cacheTime??50,this[i(2301)]={}}_mountedHook(){const e={_0x335a3c:2612,_0xa9a49b:407,_0x421b49:3663,_0x2bf528:2612,_0x2b19ea:2612,_0x33cb8a:767,_0x1b89a2:2094,_0x2cb5cb:1575,_0x45d4ab:1764},t={_0x14ef27:744,_0x1a3b0e:3728,_0x3bc30a:527,_0x568369:2553},i=_0x3a2b68;if(Cesium__namespace.defined(this.options.template)?Array.isArray(this.options[i(e._0x335a3c)])?this.template=this.options.template[this[i(1575)].lang]:this.template=this.options.template:this[i(2612)]="<div>经度:{lng}</div> <div>纬度:{lat}</div><div>海拔：{alt}米</div> <div class='hide700'>层级：{level}</div><div>方向：{heading}°</div> <div>俯仰角：{pitch}°</div><div class='hide700'>视高：{cameraHeight}米</div>",Cesium__namespace[i(e._0xa9a49b)](this.options.crs)?isString(this.options[i(3663)])?this._crs=this.options[i(e._0x421b49)]:this.options[i(3663)]&&(this._crs=CRS.CGCS2000_GK_Zone_3):isString(this[i(e._0x2bf528)])&&this[i(e._0x2b19ea)].indexOf("{crsx}")!==-1&&(this[i(e._0x33cb8a)]=CRS.CGCS2000_GK_Zone_3),this._container=create$3(i(3206),"mars3d-locationbar no-print"),this[i(1423)]=create$3("div",i(2952),this[i(e._0x1b89a2)]),this.options.style?this.setStyle(this.options.style):(this._autoStyle=!![],this._updateControlHandler()),this.options.fps){this[i(e._0x2cb5cb)].scene[i(e._0x45d4ab)]=!![];const s=setInterval(()=>{const r=i;if(!this._map||!this[r(1575)][r(t._0x14ef27)][r(t._0x1a3b0e)])return;clearInterval(s),this[r(2935)]=null;const o=this._map[r(t._0x3bc30a)].querySelector(".cesium-performanceDisplay");if(o){addClass(o,"mars3d-locationbar-content"),removeClass(o,r(816));const c=o.querySelector(r(t._0x568369));remove(c),o.parentNode[r(1654)](o),this._container.insertBefore(o,this._containerCon)}},100);this.timeTik=s}else this.timeTik&&(clearInterval(this.timeTik),this.timeTik=null),this[i(1575)].scene.debugShowFramesPerSecond=![]}[_0x3a2b68(2679)](){const e=_0x3a2b68;this._map.on(EventType.mouseMove,this._mouseMoveHandler,this),this._map.on(EventType.cameraMoveEnd,this._cameraHandler,this),this._map.on(EventType.addControl,this._updateControlHandler,this),this._map.on(EventType[e(1852)],this._updateControlHandler,this),this._cameraHandler()}[_0x3a2b68(3916)](){const e={_0x8b4170:1277,_0x1b8121:1575,_0x43b8dc:2971,_0x45b394:1852,_0x52e346:980,_0x172959:1575},t=_0x3a2b68;this._map.off(EventType.mouseMove,this[t(e._0x8b4170)],this),this._map.off(EventType[t(3272)],this._cameraHandler,this),this[t(e._0x1b8121)].off(EventType[t(3116)],this._updateControlHandler,this),this._map[t(e._0x43b8dc)](EventType[t(e._0x45b394)],this[t(e._0x52e346)],this),this.timeTik&&(clearInterval(this.timeTik),this.timeTik=null),this.options.fps&&(this[t(e._0x172959)].scene.debugShowFramesPerSecond=![],this._map.scene[t(3728)]&&(this._map[t(744)]._performanceDisplay.destroy(),this[t(1575)].scene[t(3728)]=void 0))}_cameraHandler(){const e=_0x3a2b68;if(!this.enabled)return;const t=this._map.getCenter();t&&this[e(4111)](t)}_mouseMoveHandler(e){const t={_0x4ddb19:815,_0x2eef2b:1688},i=_0x3a2b68;this[i(t._0x4ddb19)]&&(clearTimeout(this.moveTimer),delete this.moveTimer),this.moveTimer=setTimeout(()=>{if(delete this.moveTimer,!this.enabled)return;const s=e.cartesian;s&&this._templateHtml(LngLatPoint.fromCartesian(s))},this.options[i(t._0x2eef2b)])}_templateHtml(e){const t={_0x3e7e1e:3265,_0x10ff98:4233,_0x340073:1630,_0x33bc80:1575,_0x2ddace:406,_0x15ddc7:2637,_0x4b0c3f:671,_0x56bac3:3265,_0x164ee7:1782,_0x416523:2612,_0x3482e3:1941},i=_0x3a2b68;this.locationData[i(2448)]=this._map.camera.positionCartographic.height.toFixed(LngLatPoint.FormatAltLength),this.locationData.heading=Cesium__namespace.Math.toDegrees(this._map.camera.heading)[i(t._0x3e7e1e)](0),this.locationData[i(1630)]=Cesium__namespace.Math.toDegrees(this._map[i(t._0x10ff98)][i(t._0x340073)])[i(3265)](0),this[i(2301)].level=this[i(t._0x33bc80)][i(1800)],this[i(2301)][i(1879)]=formatNum$1(this._map.getRealAlt(e.alt),LngLatPoint.FormatAltLength);const s=this.options[i(t._0x2ddace)]??LngLatPoint[i(t._0x15ddc7)];if(this.locationData.lng=e[i(4079)].toFixed(s),this.locationData.lat=e[i(t._0x4b0c3f)].toFixed(s),this[i(767)]){const o=this.options.crsDecimal??1,c=proj4Trans([e.lng,e.lat],"EPSG:4326",this._crs);c[0]===e.lng?this[i(2301)][i(4031)]="":this.locationData.crsx=c[0].toFixed(o),c[1]===e.lat?this.locationData.crsy="":this.locationData.crsy=c[1][i(t._0x56bac3)](o)}let r;typeof this.template===i(t._0x164ee7)?r=this[i(t._0x416523)](this[i(2301)]):(this[i(t._0x3482e3)].formatData&&(this.locationData=this[i(t._0x3482e3)].formatData(this[i(2301)])),r=template(this.template,this.locationData)),this[i(1423)][i(416)]=r,this[i(1109)](EventType.change)}_updateControlHandler(e){const t={_0x12a4a9:2346,_0x21a5a2:1110,_0x1f3512:442,_0xe22f50:1575},i=_0x3a2b68;var s,r;if(this._autoStyle&&(!e||((s=e.control)===null||s===void 0?void 0:s.type)===i(t._0x12a4a9)||((r=e[i(2732)])===null||r===void 0?void 0:r.type)===i(974))){var o,c,_;this[i(t._0x21a5a2)]({left:(o=this._map.controls.animation)!==null&&o!==void 0&&o.show||(c=this._map[i(3028)].clockAnimate)!==null&&c!==void 0&&c[i(t._0x1f3512)]?"170px":"0",right:"0",bottom:(_=this[i(t._0xe22f50)].controls.timeline)!==null&&_!==void 0&&_.show?i(3609):"0"})}}}register$1("locationBar",LocationBar);class MouseDownView extends BaseControl{_mountedHook(){this._container=create$3("div","mars3d-mousedownview"),this._container.id=this.parentContainerId+"-mars3d-mousedownview",create$3("div","mars3d-mousedownview-img",this._container)}changeMouseModel(){const e=_0x3a2b68;this.isAdded&&(this._removedHook(),this[e(2679)]())}_addedHook(){const e={_0x142f33:2125,_0x11fd6a:1441,_0x517ccf:3718},t=_0x3a2b68;isPCBroswer()&&(this[t(1575)].on(EventType.wheel,this[t(3057)],this),this._map[t(e._0x142f33)]?(this._map.on(EventType.rightDown,this._mousMiddleDownHandler,this),this._map.on(EventType[t(e._0x11fd6a)],this._mousMiddleUpHandler,this)):(this._map.on(EventType[t(e._0x517ccf)],this._mousMiddleDownHandler,this),this._map.on(EventType.middleUp,this._mousMiddleUpHandler,this)),this._mousMiddleUpHandler())}_removedHook(){const e={_0x3cafde:2660},t=_0x3a2b68;isPCBroswer()&&(this._map.off(EventType.wheel,this[t(3057)],this),this._map._hasRightTilt?(this._map[t(2971)](EventType.rightDown,this._mousMiddleDownHandler,this),this[t(1575)].off(EventType.rightUp,this[t(e._0x3cafde)],this)):(this._map.off(EventType[t(3718)],this._mousMiddleDownHandler,this),this._map.off(EventType.middleUp,this._mousMiddleUpHandler,this)),this._map.off(EventType[t(1840)],this._mouseMoveHandler,this),clearTimeout(this[t(3575)]))}[_0x3a2b68(3057)](e){this.enabled&&(addClass(this._container,"mars3d-mousedownview-show"),clearTimeout(this.timetik),this.timetik=setTimeout(()=>{removeClass(this[_0x20dc(2094)],"mars3d-mousedownview-show")},200))}_mousMiddleDownHandler(e){const t={_0x18c788:1575,_0x3a24b1:1840,_0x27ecdc:901,_0x358671:4076,_0x1a17a3:4076},i=_0x3a2b68;!this.enabled||!getCurrentMousePosition(this._map.scene,e.position)||this[i(t._0x18c788)].camera[i(2863)].height>this._map.scene[i(3928)].minimumCollisionTerrainHeight||(this._map.off(EventType[i(t._0x3a24b1)],this._mouseMoveHandler,this),clearTimeout(this[i(3575)]),this._container.style[i(t._0x27ecdc)]=e[i(t._0x358671)].y+"px",this._container.style.left=e[i(t._0x1a17a3)].x+"px",addClass(this._container,i(3541)))}[_0x3a2b68(2660)](e){const t={_0x2f0848:1575,_0x14b76e:1277},i=_0x3a2b68;removeClass(this._container,"mars3d-mousedownview-show"),this[i(t._0x2f0848)].on(EventType.mouseMove,this[i(t._0x14b76e)],this)}_mouseMoveHandler(e){const t={_0x25f3a6:2748,_0x128c73:901,_0x45298c:2772},i=_0x3a2b68;this._container[i(t._0x25f3a6)][i(t._0x128c73)]=e.endPosition.y+"px",this._container.style[i(t._0x45298c)]=e.endPosition.x+"px"}}register$1("mouseDownView",MouseDownView);const icon$7=`<?xml version="1.0" encoding="UTF-8"?>
<svg width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <rect width="48" height="48" fill="white" fill-opacity="0.01"/>
  <path d="M24.0607 10L24.024 38" stroke="#ffffff" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"/>
  <path d="M10 24L38 24" stroke="#ffffff" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>`,icon$6=`<?xml version="1.0" encoding="UTF-8"?>
<svg width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <rect width="48" height="48" fill="white" fill-opacity="0.01"/>
  <path d="M10.5 24L38.5 24" stroke="#ffffff" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>`;class Zoom extends BaseControl{get parentContainer(){return this[_0x3a2b68({_0x2024c7:1575}._0x2024c7)]?this._map.toolbar:document.getElementsByClassName("cesium-viewer-toolbar")[0]}_showHook(e){const t=_0x3a2b68;this._container2&&(this._container2.style[t(2085)]=e?"block":"none")}[_0x3a2b68(585)](){const e={_0x1bfae1:2094,_0x4633b5:2085,_0x302ac7:2377,_0x5941a9:1575,_0x28129c:3937,_0x1fc804:383},t={_0x293d48:1575},i=_0x3a2b68;this[i(e._0x1bfae1)]=create$3("div","cesium-button cesium-toolbar-button mar3d-toolButton"),this._container.style[i(e._0x4633b5)]="inline-block",this._container[i(e._0x302ac7)](i(988),this._map.getLangText(i(2830))),this._createIcon(this[i(1941)][i(393)]||icon$6,this._container),this[i(e._0x1bfae1)].addEventListener("click",s=>{const r=i;this.enabled&&this[r(t._0x293d48)].zoomOut(this.options.relativeAmount)}),this._container2=create$3("div","cesium-button cesium-toolbar-button mar3d-toolButton"),this._container2.style[i(2085)]="inline-block",this._container2.setAttribute(i(988),this[i(e._0x5941a9)].getLangText("_放大")),this[i(1446)](this.options.zoomInIcon||icon$7,this[i(3937)]),this[i(e._0x28129c)][i(1844)](i(e._0x1fc804),s=>{this.enabled&&this._map.zoomIn(this.options.relativeAmount)})}_addedHook(){this[_0x3a2b68(3490)].insertBefore(this._container2,this._container)}[_0x3a2b68(3916)](){this.parentContainer.removeChild(this._container2)}}register$1(_0x3a2b68(1874),Zoom);class ToolButton extends BaseControl{constructor(e={}){super(e),this._type="toolButton"+getGlobalId()}get[_0x3a2b68(3490)](){return this._map?this._map.toolbar:document.getElementsByClassName("cesium-viewer-toolbar")[0]}[_0x3a2b68(585)](){const e={_0x13b675:1728},t=_0x3a2b68;this._container=create$3("div","cesium-button cesium-toolbar-button mar3d-toolButton"),this._container.id=this.id,this._container.style.display="inline-block",this[t(2094)].setAttribute("title",this.options.title||""),this._createIcon(this.options[t(3807)],this[t(2094)]);let i;this._container.addEventListener("mouseover",s=>{this.enabled&&i!==this.id&&(i=this.id,this.options.mouseOver&&this.options.mouseOver(this.options),this.fire(EventType.mouseOver,{...this.options}))}),this._container.addEventListener(t(e._0x13b675),s=>{const r=t;i=null,this.enabled&&(this[r(1941)].mouseOut&&this.options.mouseOut(this.options),this.fire(EventType.mouseOut,{...this.options}))})}setIcon(e){const t={_0x1f3fd2:2094},i=_0x3a2b68;this.options.icon=e,empty(this[i(2094)]),this._createIcon(e,this[i(t._0x1f3fd2)])}}register$1("toolButton",ToolButton);const icon$5=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="162px" height="162px" viewBox="0 0 162 162" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <title>拖拽调整四周方向角，双击回正北</title>
    <desc>mars3d.cn</desc>
    <defs></defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill-rule="evenodd">
        <g id="compass-outer" fill-rule="nonzero">
            <path d="M80.8410544,161.682109 C36.1937731,161.682109 0,125.488336 0,80.8410544 C0,36.1937731 36.1937731,0 80.8410544,0 C125.488336,0 161.682109,36.1937731 161.682109,80.8410544 C161.682109,125.488336 125.488336,161.682109 80.8410544,161.682109 Z M81.1836011,134.620909 C110.696211,134.620909 134.620909,110.696211 134.620909,81.1836011 C134.620909,51.6709916 110.696211,27.7462941 81.1836011,27.7462941 C51.6709916,27.7462941 27.7462941,51.6709916 27.7462941,81.1836011 C27.7462941,110.696211 51.6709916,134.620909 81.1836011,134.620909 Z" id="Oval-108"></path>
            <circle id="Oval-74" fill="#FFFFFF" cx="129.493683" cy="127.952092" r="1.54159147"></circle>
            <circle id="Oval-74-Copy-3" fill="#FFFFFF" cx="129.493683" cy="35.4566038" r="1.54159147"></circle>
            <circle id="Oval-74-Copy-5" fill="#FFFFFF" cx="30.8318294" cy="127.952092" r="1.54159147"></circle>
            <circle id="Oval-74-Copy-4" fill="#FFFFFF" cx="30.8318294" cy="35.4566038" r="1.54159147"></circle>
            <polygon id="N" fill="#FFFFFF" points="84.9318072 23.1238721 84.9318072 13.1321362 82.5623385 13.1321362 82.5623385 19.2984646 77.951866 13.1321362 75.7108625 13.1321362 75.7108625 23.1238721 78.0946053 23.1238721 78.0946053 16.9718176 82.6908037 23.1238721"></polygon>
            <polygon id="Line" fill="#FFFFFF" points="143.368007 82.1093476 152.617555 82.1093476 152.617555 81.2993476 143.368007 81.2993476"></polygon>
            <polygon id="Line-Copy-8" fill="#FFFFFF" points="9.24954884 82.1093476 18.4990976 82.1093476 18.4990976 81.2993476 9.24954884 81.2993476"></polygon>
            <polygon id="Line" fill="#FFFFFF" points="81.2993476 143.368007 81.2993476 152.617555 82.1093476 152.617555 82.1093476 143.368007"></polygon>
        </g>
    </g>
</svg>
`,icon$4=_0x3a2b68(3939),icon$3=`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="53px" height="53px" viewBox="0 0 53 53" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
    <title>导航球</title>
    <desc>mars3d.cn</desc>
    <defs></defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="compass-rotation-marker">
            <path d="M52.4399986,26.2199993 C52.4399986,11.7390936 40.7009051,0 26.2199993,0 C11.7390936,0 0,11.7390936 0,26.2199993 C0,40.7009051 11.7390936,52.4399986 26.2199993,52.4399986 C40.7009051,52.4399986 52.4399986,40.7009051 52.4399986,26.2199993 Z" id="rotator" stroke-opacity="0.135841259" stroke="#E2A549" stroke-width="9" opacity="0.201434235"></path>
            <path d="M0,26.2199993 C0,11.7390936 11.7390936,0 26.2199993,0 L26.2199993,9 C16.7096563,9 9,16.7096563 9,26.2199993" id="Shape" opacity="0.634561567" fill="#4990E2"></path>
        </g>
    </g>
</svg>
`;class Compass extends BaseControl{constructor(e={}){const t={_0x4486f8:4244,_0x324764:1344},i=_0x3a2b68;super(e),this._orbitCursorAngle=0,this._orbitCursorOpacity=0,this._orbitLastTimestamp=0,this._pitch_max=Cesium__namespace.Math.toRadians(e[i(t._0x4486f8)]??0),this._pitch_min=Cesium__namespace.Math.toRadians(e.minPitch??-90),this.options.rotation=this.options[i(t._0x324764)]??!![]}_getCssText(){const e={_0x332bdc:2772},t=_0x3a2b68,i={};if(Cesium__namespace.defined(this[t(1941)].top)&&this[t(1941)].top!=="")i.top=this.options.top;else if(Cesium__namespace.defined(this.options.bottom)&&this.options.bottom!==""&&(i.bottom=this.options.bottom,i[t(454)]==="toolbar")){const r=this._map.toolbar;if(r){const o=r.offsetHeight+40;i.bottom=o+"px",this.domToolbar=r}}Cesium__namespace[t(407)](this[t(1941)].left)&&this.options.left!==""?i.left=this.options[t(e._0x332bdc)]:Cesium__namespace.defined(this.options.right)&&this[t(1941)].right!==""&&(i.right=this[t(1941)].right);let s="";for(const r in i)s+=r+": "+i[r]+";";return s||"top: 10px;right: 10px;"}[_0x3a2b68(585)](){const e={_0x432d1f:3892,_0xa8cb60:3882},t={_0xa19349:1575,_0x4f8999:4233,_0x262b0b:2336},i=_0x3a2b68;this._container=create$3("div",this.options.className||"mars3d-compass"),this._container.style.cssText=this._getCssText(),this._container_outer=parseDom(this.options.outerSvg||icon$5,!![],"mars3d-compass-outer"),this._container.appendChild(this._container_outer),this[i(e._0x432d1f)]=parseDom(this.options[i(4191)]||icon$4,!![],"mars3d-compass-inner"),this._container.appendChild(this._container_inner),this.options.rotation&&(this[i(4319)]=parseDom(this.options.rotationArcSvg||icon$3,!![],i(1464)),this._container.appendChild(this._container_rotationArc),this[i(4319)].style.visibility=i(e._0xa8cb60)),isPCBroswer()?(this._container.onmousedown=s=>{this[i(1620)](s)},this._container_outer.ondblclick=s=>{const r=i;this._map.camera[r(2336)]({orientation:{heading:0}})},this[i(e._0x432d1f)].ondblclick=s=>{this._map.flyHome()}):(this._container[i(2613)]=s=>{this[i(1620)](s)},this[i(3102)][i(3688)]=s=>{const r=i;this[r(t._0xa19349)][r(t._0x4f8999)][r(t._0x262b0b)]({orientation:{heading:0}})},this._container_inner[i(3688)]=s=>{const r=i;this._map[r(4393)]()})}[_0x3a2b68(1400)](e){this._container_outer.innerHTML=e}setInnerSvg(e){this._container_inner.innerHTML=e}[_0x3a2b68(3201)](e){const t=_0x3a2b68;this[t(4319)].innerHTML=e}_addedHook(){const e={_0x436d64:1575,_0x15cd4d:1575,_0xe6ba0d:980},t=_0x3a2b68;this[t(e._0x436d64)].on(EventType.postRender,this._postRenderHandler,this),this[t(e._0x436d64)].on(EventType.addControl,this._updateControlHandler,this),this[t(e._0x15cd4d)].on(EventType.updateControl,this[t(e._0xe6ba0d)],this)}_removedHook(){const e={_0x281052:1575,_0x2a238a:1575},t=_0x3a2b68;this._map.off(EventType.postRender,this[t(2861)],this),this[t(e._0x281052)].off(EventType.addControl,this._updateControlHandler,this),this._map.off(EventType.addControl,this._updateControlHandler,this),this[t(e._0x2a238a)].off(EventType.updateControl,this._updateControlHandler,this)}_updateControlHandler(){const e={_0x4ab647:3635},t=_0x3a2b68;if(this.domToolbar){const i=this[t(e._0x4ab647)].offsetHeight+40;this._container[t(2748)][t(454)]=i+"px"}}[_0x3a2b68(2861)](){const e={_0x26f824:3102},t=_0x3a2b68,i=this._map[t(4233)].heading;this[t(e._0x26f824)]&&(this[t(e._0x26f824)].style.cssText=`
      transform : rotate(-`+i+`rad);
      -webkit-transform : rotate(-`+i+`rad);
      `)}_handleMouseDown(e){const t={_0x4ac651:744,_0x2aede9:2668,_0x248928:2306},i=_0x3a2b68;if(this._map[i(t._0x4ac651)].mode===Cesium__namespace.SceneMode[i(t._0x2aede9)])return!![];this._compassRectangle=e.currentTarget.getBoundingClientRect();const r=this._compassRectangle.width/2,o=this._getVector(e),c=Cesium__namespace[i(3532)].magnitude(o)/r;if(this[i(1941)].rotation&&c<50/145)this[i(t._0x248928)](o);else if(c<1)this._rotate(o);else return!![]}[_0x3a2b68(3070)](e){const t={_0x317990:2978,_0x423a8a:1575,_0x435116:3428,_0x3825ff:1575,_0x22c814:545,_0x1c677d:3915,_0x461c88:2402,_0x4d20d7:1462},i=_0x3a2b68;let s=new Cesium__namespace[i(t._0x317990)];const r=this[i(1575)].scene,o=r.camera;if(r.mode!==Cesium__namespace.SceneMode[i(2668)]){if(this[i(t._0x423a8a)].trackedEntity)s=this._map[i(t._0x435116)].position.getValue(this[i(t._0x3825ff)][i(2257)][i(t._0x22c814)]);else{const c=new Cesium__namespace.Ray;c[i(1787)]=o[i(440)],c.direction=o.directionWC,s=r.globe.pick(c,r)}if(s){if(r.mode===Cesium__namespace.SceneMode.SCENE2D||r.mode===Cesium__namespace[i(t._0x1c677d)][i(3292)]){s=o[i(t._0x461c88)](s);const c=new Cesium__namespace.Cartographic;e&&(s=r[i(t._0x4d20d7)].ellipsoid[i(1666)](r.mapProjection.unproject(s,c)))}else!e&&(s=o.worldToCameraCoordinatesPoint(s));return s}}}[_0x3a2b68(2306)](e){const t={_0x9593d2:4233,_0xd2a063:3915,_0x781d2a:687,_0x52c58e:1250,_0x5c409e:1462,_0x395389:3404,_0x16b5c9:4002,_0xc26205:1104},i={_0x558ceb:403},s=_0x3a2b68,r=this._map[s(744)],o=r.screenSpaceCameraController,c=r[s(t._0x9593d2)];if(!(r.mode===Cesium__namespace.SceneMode[s(2668)]||!o.enableInputs)){switch(r.mode){case Cesium__namespace.SceneMode.SCENE2D:if(!o.enableTranslate)return;break;case Cesium__namespace[s(t._0xd2a063)][s(3292)]:if(o[s(1445)])break;if(!o.enableTranslate||!o[s(t._0x781d2a)])return;break;case Cesium__namespace.SceneMode[s(t._0x52c58e)]:default:if(o.enableLook)break;if(!o[s(687)]||!o.enableRotate)return;break}if(this._unbindDocumentEvent(),this._mouseMoveHandle=_=>{this[s(i._0x558ceb)](_)},this._mouseUpHandle=()=>{this._orbitMouseUpFunction()},this._orbitLastTimestamp=Cesium__namespace.getTimestamp(),this._map.trackedEntity)this[s(2643)]=void 0,this._orbitIsLook=![];else{const _=this._getCameraFocus(!![]);_?(this._orbitFrame=Cesium__namespace.Transforms.eastNorthUpToFixedFrame(_,r.globe[s(t._0x395389)]),this[s(t._0x16b5c9)]=![]):(this._orbitFrame=Cesium__namespace.Transforms.eastNorthUpToFixedFrame(c.positionWC,r[s(t._0x5c409e)][s(t._0x395389)]),this._orbitIsLook=!![])}this._container_rotationArc[s(2748)].visibility="visible",this._container_inner.className+=s(t._0xc26205),this._bindDocumentEvent(),this._map.on(EventType.clockTick,this._orbitTickFunction,this),this._updateAngleAndOpacity(e,this._compassRectangle.width)}}[_0x3a2b68(1486)](e){const t={_0x3f6474:1575,_0x1f8b38:3877,_0x1e1ef4:2038,_0x4ede29:2643,_0x325ca5:3198,_0x1455fc:1365,_0x179ebc:1336,_0x3a0e9a:3895},i=_0x3a2b68,s=this._map.scene,r=this[i(t._0x3f6474)].camera,o=Cesium__namespace.getTimestamp(),c=o-this._orbitLastTimestamp,_=(this._orbitCursorOpacity-.5)*2.5/1e3,l=c*_,d=this[i(t._0x1f8b38)]+Cesium__namespace[i(2806)][i(2061)],f=Math.cos(d)*l,g=Math.sin(d)*l;if(g>0&&r.pitch>this._pitch_max||g<0&&r.pitch<this[i(t._0x1e1ef4)])return;let b;this[i(2643)]&&(b=Cesium__namespace.Matrix4.clone(r.transform),r.lookAtTransform(this[i(t._0x4ede29)])),s.mode===Cesium__namespace.SceneMode.SCENE2D?r.move(new Cesium__namespace.Cartesian3(f,g,0),Math[i(t._0x325ca5)](s.canvas[i(t._0x1455fc)],s[i(679)].clientHeight)/100*r.positionCartographic.height*l):this._orbitIsLook?(r.look(Cesium__namespace.Cartesian3.UNIT_Z,-f),r.look(r[i(595)],-g)):(r.rotateLeft(f),r[i(t._0x179ebc)](g)),this[i(2643)]&&b&&r.lookAtTransform(b),this[i(t._0x3a0e9a)]=o}_updateAngleAndOpacity(e,t){const i={_0x435524:2806,_0x47c108:2806,_0x1dc9c0:2135,_0x38e7c8:2748},s=_0x3a2b68,r=Math.atan2(-e.y,e.x);this._orbitCursorAngle=Cesium__namespace[s(i._0x435524)].zeroToTwoPi(r-Cesium__namespace[s(i._0x47c108)][s(2061)]);const o=Cesium__namespace.Cartesian2.magnitude(e),c=t/2,_=Math.min(o/c,1);this[s(i._0x1dc9c0)]=.5*_*_+.5,this[s(4319)][s(i._0x38e7c8)].cssText=`
      transform: rotate(-`+this._orbitCursorAngle+s(2524)+this._orbitCursorOpacity}_orbitMouseMoveFunction(e){const t=_0x3a2b68;this._updateAngleAndOpacity(this._getVector(e),this[t(2840)].width)}_orbitMouseUpFunction(){const e={_0x452620:1738,_0x23868d:3892,_0x2db03d:997,_0x3b6218:4262},t=_0x3a2b68;this._unbindDocumentEvent(),this._map.off(EventType.clockTick,this[t(1486)],this),this._container_rotationArc[t(2748)][t(e._0x452620)]="hidden",this._container_inner.className=this[t(e._0x23868d)][t(e._0x2db03d)][t(e._0x3b6218)]("compass-inner-active","")}_rotate(e){const t={_0x4d428c:1575,_0x2e259c:1640,_0x1122a5:3428,_0x3edc08:1445,_0x133eea:1796,_0x1eecde:3376,_0x32f068:2478},i=_0x3a2b68,s=this[i(t._0x4d428c)].scene,r=s.camera,o=s.screenSpaceCameraController;if(s.mode===Cesium__namespace.SceneMode.MORPHING||s.mode===Cesium__namespace.SceneMode.SCENE2D||!o.enableInputs||!o.enableLook&&(s[i(t._0x2e259c)]===Cesium__namespace.SceneMode.COLUMBUS_VIEW||s.mode===Cesium__namespace.SceneMode[i(1250)]&&!o.enableRotate))return;if(this._unbindDocumentEvent(),this._mouseMoveHandle=_=>{this._rotateMouseMoveFunction(_)},this[i(852)]=()=>{this._unbindDocumentEvent()},this._rotateInitialCursorAngle=Math.atan2(-e.y,e.x),this._map[i(t._0x1122a5)])this._rotateFrame=void 0;else{const _=this._getCameraFocus(!![]);!_||s.mode===Cesium__namespace.SceneMode.COLUMBUS_VIEW&&!o[i(t._0x3edc08)]&&!o[i(t._0x133eea)]?this._rotateFrame=Cesium__namespace[i(3737)][i(778)](r[i(440)],s.globe.ellipsoid):this[i(t._0x1eecde)]=Cesium__namespace.Transforms.eastNorthUpToFixedFrame(_,s.globe.ellipsoid)}let c;this._rotateFrame&&(c=Cesium__namespace[i(t._0x32f068)].clone(r.transform),r.lookAtTransform(this[i(3376)])),this._rotateInitialCameraAngle=-r.heading,this._rotateFrame&&c&&r.lookAtTransform(c),this._bindDocumentEvent()}[_0x3a2b68(1008)](){const e={_0x179b6c:1844,_0x17c08b:1844},t=_0x3a2b68;this._mouseMoveHandle&&(document[t(e._0x179b6c)]("mousemove",this._mouseMoveHandle,![]),document.addEventListener("touchmove",this._mouseMoveHandle,![])),this._mouseUpHandle&&(document[t(e._0x17c08b)]("mouseup",this._mouseUpHandle,![]),document.addEventListener("touchend",this._mouseUpHandle,![]),document.addEventListener("touchcancel",this._mouseUpHandle,![]))}[_0x3a2b68(1508)](){const e={_0x214a59:2842,_0x25c7e0:852},t=_0x3a2b68;this._mouseMoveHandle&&(document.removeEventListener(t(1044),this._mouseMoveHandle,![]),document.removeEventListener(t(e._0x214a59),this._mouseMoveHandle,![]),this._mouseMoveHandle=void 0),this[t(852)]&&(document.removeEventListener("mouseup",this._mouseUpHandle,![]),document.removeEventListener(t(2562),this._mouseUpHandle,![]),document.removeEventListener(t(628),this[t(852)],![]),this[t(e._0x25c7e0)]=void 0)}_rotateMouseMoveFunction(e){const t={_0x248d1a:3732,_0xf7ca63:3084,_0x54f7c1:4398},i=_0x3a2b68,s=this[i(1575)].camera,r=this._getVector(e),o=Math[i(1349)](-r.y,r.x),c=o-this[i(4252)],_=Cesium__namespace[i(2806)].zeroToTwoPi(this._rotateInitialCameraAngle-c);let l;this._rotateFrame&&(l=Cesium__namespace.Matrix4.clone(s[i(t._0x248d1a)]),s.lookAtTransform(this[i(3376)]));const d=-s[i(2782)];s[i(t._0xf7ca63)](_-d),this[i(3376)]&&l&&s[i(t._0x54f7c1)](l)}[_0x3a2b68(937)](e){const t={_0x5955c4:2357,_0x1a1de0:901,_0x2d7e2b:3420},i=_0x3a2b68;var s;const r=this._compassRectangle,o=new Cesium__namespace[i(3532)]((r[i(595)]-r.left)/2,(r.bottom-r[i(901)])/2);let c=e.clientX,_=e.clientY;((s=e[i(t._0x5955c4)])===null||s===void 0?void 0:s[i(400)])>0&&(c=e[i(2357)][0].clientX,_=e.touches[0][i(872)]);const l=new Cesium__namespace.Cartesian2(c-r.left,_-r[i(t._0x1a1de0)]),d=new Cesium__namespace.Cartesian2;return Cesium__namespace.Cartesian2[i(t._0x2d7e2b)](l,o,d),d}}register$1("compass",Compass);const geodesic=new Cesium__namespace.EllipsoidGeodesic,BASE=[1,2,3,5],DIS=[...BASE,...BASE.map(n=>n*10),...BASE.map(n=>n*100),...BASE.map(n=>n*1e3),...BASE.map(n=>n*1e4),...BASE.map(n=>n*1e5),...BASE.map(n=>n*1e6)];class DistanceLegend extends BaseControl{get[_0x3a2b68(3481)](){return this._currDistance}[_0x3a2b68(585)](){const e={_0x2b307a:944,_0x1b5b04:2094,_0x5d7bd9:1579},t=_0x3a2b68;this._container=create$3("div","mars3d-distance-legend"),this._container.style.cssText=this[t(e._0x2b307a)](),this._labelEl=create$3("div","legend-label",this._container),this._scaleBarEl=create$3(t(3206),"legend-scale-bar",this._container),this[t(e._0x1b5b04)].style.visibility="hidden",this[t(e._0x5d7bd9)]=Cesium__namespace.getTimestamp()}_getCssText(){const e={_0x5c7668:901,_0x234002:454,_0x515e5c:1941,_0x1e91cd:595,_0x5b8154:3468},t=_0x3a2b68;var i;const s={};Cesium__namespace.defined(this.options[t(e._0x5c7668)])&&this.options.top!==""?s.top=this[t(1941)][t(e._0x5c7668)]:Cesium__namespace.defined(this[t(1941)][t(e._0x234002)])&&this[t(e._0x515e5c)].bottom!==""&&(s.bottom=this[t(1941)][t(454)]),Cesium__namespace.defined(this.options.left)&&this.options.left!==""?s.left=this.options.left:Cesium__namespace.defined(this.options[t(e._0x1e91cd)])&&this.options.right!==""&&(s[t(595)]=this.options[t(e._0x1e91cd)]);let r="";for(const o in s)r+=o+": "+s[o]+";";return r||"left: 120px; bottom: "+((i=this[t(1575)][t(3028)].timeline)!==null&&i!==void 0&&i.show?"27":"2")+t(e._0x5b8154)}_addedHook(){const e={_0x5dacf5:3547},t=_0x3a2b68;this._map.on(EventType[t(e._0x5dacf5)],this._updateContent,this)}[_0x3a2b68(3916)](){this[_0x3a2b68({_0x4ff38a:1575}._0x4ff38a)].off(EventType.postRender,this._updateContent,this)}_updateContent(e,t){const i={_0x150869:424,_0x3ef21f:1462,_0x495ee6:2094,_0x112695:3266,_0x3ab9e0:2992},s=_0x3a2b68,r=Cesium__namespace.getTimestamp();if(r<this._lastUpdate+250||!this._labelEl||!this[s(3823)])return;this._lastUpdate=r;const o=e.canvas.clientWidth,c=e[s(679)][s(i._0x150869)],_=e.camera.getPickRay(new Cesium__namespace.Cartesian2(o/2|0,c-1)),l=e.camera.getPickRay(new Cesium__namespace.Cartesian2(1+o/2|0,c-1)),d=e.globe.pick(_,e),f=e[s(i._0x3ef21f)].pick(l,e);if(!d||!f){this[s(i._0x495ee6)].style.visibility=s(3882);return}geodesic.setEndPoints(e.globe.ellipsoid[s(3402)](d),e.globe[s(3404)].cartesianToCartographic(f));const g=geodesic.surfaceDistance,b=100;let C=0;for(let P=DIS.length-1;P>=0;--P)if(DIS[P]/g<b){C=DIS[P];break}if(C){this._currDistance!==C&&(this[s(i._0x112695)]=C,this.fire(EventType.change,{distance:C})),this._container.style.visibility="visible",this[s(i._0x3ab9e0)][s(416)]=C>=1e3?C/1e3+" km":C+" m";const P=C/g|0;this._scaleBarEl.style.cssText=s(1467)+P+"px; left: "+(125-P)/2+"px;"}}}register$1("distanceLegend",DistanceLegend);const icon$2=_0x3a2b68(2115);class MapSplit extends BaseControl{get type(){return"mapSplit"}get leftLayer(){return this._leftLayer}set[_0x3a2b68(2615)](e){const t={_0x3cbcc2:1408},i={_0x1a1772:1361},s=_0x3a2b68;this._leftLayer&&(this._leftLayer.forEach(r=>{const o=_0x20dc;r._hasRemoveByMapSplit&&r[o(i._0x1a1772)]()}),this._leftLayer=null),e&&(!Array.isArray(e)&&(e=[e]),this._leftLayer=[],e[s(3782)](r=>{const o=s;r=this.setLayerSplitDirection(r,Cesium__namespace.SplitDirection[o(t._0x3cbcc2)]),this[o(1422)].push(r)}))}get[_0x3a2b68(2441)](){return this._rightLayer}set[_0x3a2b68(2441)](e){const t={_0x5d38df:2095};this._rightLayer&&(this._rightLayer.forEach(i=>{const s=_0x20dc;i[s(t._0x5d38df)]&&i[s(1361)]()}),this._rightLayer=null),e&&(!Array.isArray(e)&&(e=[e]),this._rightLayer=[],e.forEach(i=>{const s=_0x20dc;i=this.setLayerSplitDirection(i,Cesium__namespace.SplitDirection.RIGHT),this._rightLayer[s(1754)](i)}))}_mountedHook(){const e={_0x1c3b92:688,_0xb8c038:1138,_0x518ce4:3039,_0x483534:1138},t={_0x1d5b6b:582},i=_0x3a2b68;this._container=create$3("div","mars3d-slider");const s=parseDom(icon$2,!![],"slider-splitter");this._container[i(e._0x1c3b92)](s);const r=new Cesium__namespace[i(2749)](s),o=this;r[i(e._0xb8c038)](()=>{o._moveActive=!![]},Cesium__namespace[i(e._0x518ce4)].LEFT_DOWN),r.setInputAction(()=>{o._moveActive=!![]},Cesium__namespace.ScreenSpaceEventType.PINCH_START),r.setInputAction(c=>{o._moveHandler(c)},Cesium__namespace.ScreenSpaceEventType[i(4188)]),r[i(1138)](c=>{o[i(t._0x1d5b6b)](c)},Cesium__namespace[i(3039)].PINCH_MOVE),r.setInputAction(()=>{const c=i;o[c(3288)]=![]},Cesium__namespace.ScreenSpaceEventType.LEFT_UP),r[i(e._0x483534)](()=>{o._moveActive=![]},Cesium__namespace.ScreenSpaceEventType.PINCH_END)}_addedHook(){const e={_0x32e8d2:1941,_0x240b62:2615,_0x4e3b34:2441},t=_0x3a2b68;this._map.scene.splitPosition=.5,this._container.style[t(2772)]="50%",this[t(582)](),this.options.leftLayer&&(this.leftLayer=this[t(e._0x32e8d2)][t(e._0x240b62)]),this.options[t(e._0x4e3b34)]&&(this.rightLayer=this.options.rightLayer)}[_0x3a2b68(3916)](){const e={_0x8141e0:2441},t=_0x3a2b68;this._map.scene.splitPosition=0,this.leftLayer=null,this[t(e._0x8141e0)]=null}_moveHandler(e){const t={_0x360fd6:1575},i=_0x3a2b68;if(!this._moveActive||!this[i(3174)])return;const s=e?e.endPosition.x:0,r=(this[i(2094)].offsetLeft-15+s)/this._container.parentElement.offsetWidth;r<0||r>1||(this._container.style.left=100*r+"%",this[i(t._0x360fd6)][i(744)].splitPosition=r,this.fire(EventType.mouseMove,{splitPosition:r}))}[_0x3a2b68(2888)](e,t){const i={_0x55761c:1603,_0x5c350d:2449},s={_0x4705b2:1007,_0x3549f1:400},r=_0x3a2b68;return!e.isAdded&&this._map&&(e[r(i._0x55761c)]&&!e._onAdd&&(e=create$2(e)),this._map.addLayer(e),e._hasRemoveByMapSplit=!![]),e[r(i._0x5c350d)].then(o=>{const c=r;if(o.toTop&&o.toTop(),o[c(s._0x4705b2)])for(let _=0;_<o[c(963)][c(s._0x3549f1)];_++){const l=o.arrLayer[_][c(607)];l&&(l.splitDirection=t)}else{const _=o.layer;_&&(_.splitDirection=t)}}),e}}register$1("mapSplit",MapSplit);class SceneEvent{constructor(e){const t={_0x8aa187:1545},i=_0x3a2b68;this[i(1575)]=e,this._camera=e.camera,this._scene=e.scene,this._globe=e.scene.globe,this[i(t._0x8aa187)]=e.clock}[_0x3a2b68(1927)](e){const t={_0x1465b8:3413,_0x435ac2:518,_0x212604:3665,_0x404a35:3547,_0x1ba3fb:2547,_0x1efcab:1545,_0x183201:1062,_0x4c4501:4301},i=_0x3a2b68;switch(e){case EventType[i(975)]:return this._camera.moveStart;case EventType.cameraMoveEnd:return this._camera[i(t._0x1465b8)];case EventType[i(t._0x435ac2)]:return this._camera.changed;case EventType.preUpdate:return this._scene[i(3738)];case EventType[i(t._0x212604)]:return this._scene.postUpdate;case EventType.preRender:return this._scene[i(1896)];case EventType[i(t._0x404a35)]:return this._scene[i(3547)];case EventType.renderError:return this._scene[i(t._0x1ba3fb)];case EventType.morphStart:return this._scene.morphStart;case EventType.morphComplete:return this._scene.morphComplete;case EventType.clockTick:return this[i(t._0x1efcab)].onTick;case EventType.clockStop:return this._clock.onStop;case EventType[i(t._0x183201)]:return this._globe[i(t._0x4c4501)];case EventType.tileLoadProgress:return this._globe.tileLoadProgressEvent;default:return null}}hasType(e){return!!this._getEventByType(e)}on(e,t,i){const s={_0x4eccf1:1927},r=_0x3a2b68;if(!t)return;const o=this[r(s._0x4eccf1)](e);if(o)return o[r(1844)](t,i||this)}[_0x3a2b68(2971)](e,t,i){const s={_0x174f71:1927},r=_0x3a2b68,o=this[r(s._0x174f71)](e);if(o)return o.removeEventListener(t,i||this)}[_0x3a2b68(1643)](e){const t=_0x3a2b68,i=this._getEventByType(e);if(!i||i.numberOfListeners===0)return![];for(let s=0;s<i._scopes[t(400)];s++)if(i._scopes[s]===this._map)return!![];return![]}}const DEF_OPTIONS={enabledMoveTarget:!![],moveDelay:30,pickWidth:4,pickHeight:4,pickLimit:9};class MouseEvent{constructor(e,t={}){const i=_0x3a2b68;t={...DEF_OPTIONS,...t},this._map=e,this._viewer=e.viewer,this.options=t,this.moveDelay=t.moveDelay,this[i(1876)]=t.enabledMoveTarget,this._selected=void 0,this._setInputAction()}get enabledMoveTarget(){return this[_0x3a2b68(1876)]}set enabledMoveTarget(e){const t={_0x4b7bed:1876},i=_0x3a2b68;this[i(t._0x4b7bed)]=e,this.clearMoveTargetDelay()}get noPickEntity(){return this._noPickEntity}set noPickEntity(e){this._noPickEntity=e}setOptions(e){const t={_0x445110:952},i=_0x3a2b68;return!e||Object.keys(e).length===0?this:(this.options=merge(this.options,e),this[i(2588)]=this.options[i(2588)],this._enabledMoveTarget=this[i(1941)][i(t._0x445110)],this)}[_0x3a2b68(2841)](){this._moveDelayTik&&(clearTimeout(this._moveDelayTik),this._moveDelayTik=null)}_setInputAction(){const e={_0x2bb77a:566,_0x585cf0:1726,_0x4baeae:566,_0x5d4e3d:3039,_0x563e3b:1138,_0x1feffc:3039,_0xc81bd0:1491,_0x54c973:2509,_0x25331e:2374,_0x23c48d:679,_0x551ca2:1728},t={_0x112d15:1327,_0x2ae076:3779},i={_0x1770e5:1327},s={_0x5dd296:1109},r={_0x207885:614},o={_0x28ef2c:3085},c=_0x3a2b68;this.handler=new Cesium__namespace.ScreenSpaceEventHandler(this._viewer.canvas),this[c(e._0x2bb77a)].setInputAction(_=>{this[c(1120)](_)},Cesium__namespace.ScreenSpaceEventType[c(1857)]),this.handler[c(1138)](_=>{this[c(1327)](_,EventType.dblClick)},Cesium__namespace.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),this.handler.setInputAction(_=>{const l=c;this._globeMouseHandler(_,[EventType.leftDown,EventType[l(o._0x28ef2c)]])},Cesium__namespace[c(3039)].LEFT_DOWN),this[c(566)].setInputAction(_=>{const l=c;this._globeMouseHandler(_,[EventType.leftUp,EventType[l(2960)]])},Cesium__namespace.ScreenSpaceEventType.LEFT_UP),this.handler.setInputAction(_=>{const l={_0x5997bd:4078},d=c,f=_.endPosition;_.windowPosition=f;const g=this;Object.defineProperty(_,d(3628),{configurable:!![],get(){const b=d;return this._cartesian||getCurrentMousePosition(g._viewer.scene,f,g[b(l._0x5997bd)])},set(b){this._cartesian=b}}),_.cloneProperty=!![],this.enabledMoveTarget&&(this.clearMoveTargetDelay(),this[d(2588)]>0?this[d(r._0x207885)]=setTimeout(b=>{this._moveDelayTik=null,this._mouseMoveHandler(_)},this.moveDelay):this._mouseMoveHandler(_)),this[d(1575)].fire(EventType.mouseMove,_)},Cesium__namespace.ScreenSpaceEventType.MOUSE_MOVE),this.handler.setInputAction(_=>{const l=c;this._map[l(s._0x5dd296)](EventType.wheel,_)},Cesium__namespace[c(3039)][c(e._0x585cf0)]),this.handler.setInputAction(_=>{this._globeMouseHandler(_,EventType.rightClick)},Cesium__namespace.ScreenSpaceEventType.RIGHT_CLICK),this[c(e._0x4baeae)].setInputAction(_=>{const l=c;this._globeMouseHandler(_,[EventType.rightDown,EventType[l(3085)]])},Cesium__namespace[c(e._0x5d4e3d)].RIGHT_DOWN),this.handler[c(e._0x563e3b)](_=>{this._globeMouseHandler(_,[EventType.rightUp,EventType.mouseUp])},Cesium__namespace.ScreenSpaceEventType[c(3335)]),this.handler[c(e._0x563e3b)](_=>{const l=c;this[l(1327)](_,EventType[l(1547)])},Cesium__namespace.ScreenSpaceEventType[c(3001)]),this.handler[c(e._0x563e3b)](_=>{this._globeMouseHandler(_,[EventType.middleDown,EventType.mouseDown])},Cesium__namespace[c(e._0x1feffc)][c(3655)]),this[c(566)].setInputAction(_=>{this._globeMouseHandler(_,[EventType.middleUp,EventType.mouseUp])},Cesium__namespace.ScreenSpaceEventType.MIDDLE_UP),this.handler.setInputAction(_=>{this[c(i._0x1770e5)](_,EventType.pinchStart)},Cesium__namespace.ScreenSpaceEventType.PINCH_START),this.handler.setInputAction(_=>{const l=c;this[l(t._0x112d15)](_,EventType[l(t._0x2ae076)])},Cesium__namespace.ScreenSpaceEventType.PINCH_END),this.handler.setInputAction(_=>{this[c(1575)].fire(EventType.pinchMove,_)},Cesium__namespace.ScreenSpaceEventType.PINCH_MOVE),this._map.canvas.addEventListener("keydown",this[c(e._0xc81bd0)][c(698)](this)),this._map.canvas.addEventListener(c(2182),this._onKeyUp.bind(this)),this._map.canvas.addEventListener(c(e._0x54c973),this[c(e._0x25331e)].bind(this)),this._map[c(e._0x23c48d)][c(1844)](c(e._0x551ca2),this._onMouseOut.bind(this))}_onMouseOver(e){this._map.fire(EventType.mouseOver,{mouseEvent:e})}[_0x3a2b68(3879)](e){const t=_0x3a2b68;this._map.fire(EventType[t(2987)],{mouseEvent:e})}_onKeyDown(e){const t={_0x5ce59f:3187,_0x437b5f:1624},i=_0x3a2b68;this[i(1575)].fire(EventType.keydown,{mouseEvent:e,ctrlKey:e.ctrlKey,altKey:e[i(t._0x5ce59f)],metaKey:e[i(3176)],shiftKey:e.shiftKey,code:e.code,key:e[i(t._0x437b5f)],keyCode:e.keyCode})}[_0x3a2b68(1696)](e){const t=_0x3a2b68;this._map.fire(EventType.keyup,{mouseEvent:e,ctrlKey:e.ctrlKey,altKey:e.altKey,metaKey:e.metaKey,shiftKey:e.shiftKey,code:e[t(1965)],key:e.key,keyCode:e.keyCode})}getPickTarget(e,t){const i={_0x15fe3a:1095,_0x4cd89c:2911,_0x28958d:744,_0x26f40f:2911,_0x4a139c:2239,_0x40efd5:744,_0x5674b0:1941,_0x17cfa9:1754},s=_0x3a2b68;if(t!=null&&t.graphic)return t;let r;try{r=this._viewer.scene.pick(e,this.options.pickWidth,this.options[s(i._0x15fe3a)])}catch{}if(this[s(i._0x4cd89c)]&&r&&this[s(i._0x4cd89c)].pickedObject===r){let f=t==null?void 0:t.cartesian;if(!f){var o,c;if(((o=this._lastPickedInfo)===null||o===void 0||(c=o.layer)===null||c===void 0?void 0:c.type)==="3dtiles"){const g=this._viewer.scene.onlyPickModelPosition;this[s(3453)].scene.onlyPickModelPosition=!![],f=getCurrentMousePosition(this._viewer[s(i._0x28958d)],e,this.noPickEntity),this[s(3453)][s(744)].onlyPickModelPosition=g}else f=getCurrentMousePosition(this._viewer[s(i._0x28958d)],e,this.noPickEntity)}return{...t,...this[s(i._0x26f40f)],cartesian:f,windowPosition:e}}let _=this[s(i._0x4a139c)](r,e);if(r&&this[s(2983)](_)){const f=this[s(3453)][s(i._0x40efd5)].drillPick(e,this[s(1941)].pickLimit,this[s(i._0x5674b0)].pickWidth,this[s(1941)][s(1095)]),g=[];if(f&&f.length>0)for(let b=0,C=f.length;b<C;b++){const P=f[b];if(r===P){var l;g.push((l=_)===null||l===void 0?void 0:l.graphic);continue}const S=this._getTargetInfo(P,e);if(g[s(i._0x17cfa9)](S==null?void 0:S[s(2471)]),!(this._allowDrillPick(S)&&b!==C-1)){_=S,_.pickedObjects=f,_[s(1929)]=g;break}}}else this[s(i._0x4cd89c)]=_;let d=t==null?void 0:t.cartesian;return!d&&(d=getCurrentMousePosition(this._viewer.scene,e,this[s(4078)])),{...t,..._,cartesian:d,windowPosition:e}}_allowDrillPick(e){const t={_0x21b664:607},i=_0x3a2b68;var s,r;let o=(s=e.graphic)===null||s===void 0?void 0:s[i(1244)];return o?isFunction(o)?o(e):!![]:(o=(r=e[i(t._0x21b664)])===null||r===void 0?void 0:r.allowDrillPick,o?isFunction(o)?o(e):!![]:![])}_getTargetInfo(e,t){const i={_0x4d1e4b:1698,_0x54e437:1575,_0x5f12c7:1653,_0x455cb5:2271,_0x2a1305:981,_0x49295b:2362,_0x36ba75:4389,_0x3d6096:1546,_0x2374f7:3e3,_0x12b51d:662,_0x711479:1070},s={_0x4527d2:2471,_0x38c7df:1197},r=_0x3a2b68;var o,c;if(!Cesium__namespace.defined(e))return{};let _,l,d,f;if(Cesium__namespace.defined(e.id)&&e.id instanceof Cesium__namespace.Entity)_=e.id,f=_.id;else if(e instanceof Cesium__namespace.Cesium3DTileFeature){_=e,f=r(i._0x4d1e4b)+e._batchId;const S=e.tileset;l=this[r(i._0x54e437)][r(1070)](S._mars3d_layerId),d={attr:get3DTileFeatureAttr(e),feature:e}}else if(e[r(i._0x5f12c7)]&&e[r(1653)]instanceof(Cesium__namespace.PointCloud3DTileContent||Cesium__namespace.PointCloud)){var g,b;_=e.content,f=r(i._0x455cb5)+((g=e.content)===null||g===void 0||(b=g[r(i._0x2a1305)])===null||b===void 0?void 0:b[r(1624)])||0;const S=e[r(i._0x49295b)];l=this[r(1575)].getLayerById(S._mars3d_layerId),e.batchTable}else if((o=e[r(i._0x5f12c7)])!==null&&o!==void 0&&(c=o.tile)!==null&&c!==void 0&&c[r(3866)]){const S=e.content[r(1766)].i3sNode,L=this[r(3453)].scene.pickPosition(t);L&&(d={attr:S.loadFields()[r(i._0x36ba75)](function(){return S.getFieldsForPickedPosition(L)}),feature:S}),_=S,f="i3s_"+S[r(i._0x3d6096)]||0,l=this._map.getLayerById(S[r(i._0x2374f7)][r(i._0x12b51d)])}else Cesium__namespace[r(407)](e.primitive)?(_=e.primitive,f=e.id):logInfo("getPickTarget:拾取到了对象，请确认是否要做处理",e);if(_&&(l=l||this._map[r(i._0x711479)](_._mars3d_layerId),l&&l.getGraphicById))if(d=d||l[r(2974)](_._mars3d_graphicId),d){if(f=d.id,d.getPickedObject){const S=e.id||e.instanceId;if(S){var C;f=S,e.data=d.getPickedObject(S),d.attr=(C=e.data)===null||C===void 0?void 0:C[r(3208)]}}}else{var P;(P=_)!==null&&P!==void 0&&P._clusterData&&(d=_[r(2423)])}return{id:f,pickedObject:e,sourceTarget:_,czmObject:_,layer:l,graphic:d,hasClickEvent:function(){const S=r;if(this.graphic){if(isFunction(this.graphic.listens)&&this.graphic.listens(EventType.click))return!![];if(isFunction(this[S(s._0x4527d2)][S(s._0x38c7df)])&&d.hasPopup())return!![]}if(this.layer){var L;if(isFunction(this[S(607)].listens)&&this.layer.listens(EventType.click))return!![];if(isFunction(this.layer[S(1197)])&&(L=l)!==null&&L!==void 0&&L.hasPopup())return!![]}return![]}}}getPicked(e){const t={_0x40bdae:3495,_0xdafa0e:1323,_0x2631c2:2362,_0x374efb:2219,_0x371f9b:2121,_0x4d8cf9:3495},i=_0x3a2b68;if(!e||!e.pickedObject)return;const s=e.pickedObject,r=e.czmObject;if(r instanceof Cesium__namespace.Entity){const f=s.primitive[i(t._0x40bdae)];if((f==null?void 0:f.length)>0)return f.find(b=>b[i(2770)]===s)}else if(r instanceof Cesium__namespace.Cesium3DTileFeature){if(s[i(2219)])return s.pickId}else if(s.content&&s.content instanceof(Cesium__namespace.PointCloud3DTileContent||Cesium__namespace[i(t._0xdafa0e)])){var o;return(o=s.content)===null||o===void 0?void 0:o[i(981)]}else{var c,_;if(s[i(t._0x2631c2)].pickId)return s.primitive[i(t._0x374efb)];if(s.primitive._pickIds)return s.primitive._pickIds;if((c=s.content)!==null&&c!==void 0&&(_=c[i(t._0x371f9b)])!==null&&_!==void 0&&_[i(t._0x4d8cf9)]){var l,d;return(l=s.content)===null||l===void 0||(d=l._model)===null||d===void 0?void 0:d._pickIds}}}[_0x3a2b68(352)](e){const t={_0x2c3d48:1176,_0x5628ee:744},i=_0x3a2b68,s=LngLatPoint.toCartesian(e),r=Cesium__namespace.SceneTransforms[i(t._0x2c3d48)](this._viewer[i(t._0x5628ee)],s);return this[i(4361)](r,{cartesian:s})}_pickImageryLayerFeatures(e,t){const i={_0x44a797:352},s={_0x4a8c96:3628},r=_0x3a2b68,o=this._viewer[r(744)],c=o.camera.getPickRay(e),_=o.imageryLayers[r(i._0x44a797)](c,o);return _&&_[r(4389)]?_[r(4389)](l=>{const d=r;return this._clickTileGraphic(l,e,t==null?void 0:t[d(s._0x4a8c96)])}):Promise.resolve()}[_0x3a2b68(3368)](e,t,i){const s={_0x1ad5fa:2602,_0x23de99:400,_0x3c8c81:1924,_0x2cbc70:1643,_0x2b2bdd:391,_0x315f25:2471,_0x4317f2:3208,_0x4bcc6a:3663,_0x2f75bb:1109},r=_0x3a2b68;var o,c,_;if(!Cesium__namespace.defined(e)||e.length===0)return;let l=e[0];const d=l.imageryLayer,f=this._map[r(1070)](d[r(662)]);if(f&&(o=f.options)!==null&&o!==void 0&&o.featureIndex){var g;const E=f.options.featureIndex;((g=f.options)===null||g===void 0?void 0:g[r(3533)])===r(s._0x1ad5fa)?l=e[e[r(s._0x23de99)]-1]:isNumber(E)?l=e[E]||l:isFunction(E)&&(l=E(e)||l)}const b={sourceTarget:d,layer:f,features:e,attr:l[r(3211)]||((c=l[r(s._0x3c8c81)])===null||c===void 0?void 0:c[r(3211)]),cartesian:i,windowPosition:t};if(l.data&&f&&((_=f[r(1941)])!==null&&_!==void 0&&_.highlight||f[r(s._0x2cbc70)](EventType.click)))if(f.options.featureToGraphic){const E=f.options.featureToGraphic(l,b);if(E){var C;Array[r(s._0x2b2bdd)](E)?(b.graphic=E.length>0?E[0]:null,b.graphics=E):(b.graphic=E,b.graphics=[E]),(C=b[r(s._0x315f25)])!==null&&C!==void 0&&C[r(s._0x4317f2)]&&(b[r(3208)]=b[r(s._0x315f25)].attr)}}else{const E=f[r(1941)][r(1202)]??5e3;let M=!![];if(isBoolean(E))M=E;else if(isNumber(E)){var P;M=JSON[r(1477)](((P=l.data)===null||P===void 0?void 0:P[r(2152)])||{}).length<E}else isFunction(E)&&(M=E(l));if(M){var S;const D=f==null||(S=f.options)===null||S===void 0?void 0:S.highlight,R=geoJsonToGraphics(l.data,{type:D==null?void 0:D[r(1603)],crs:l[r(3663)]||(f==null?void 0:f[r(s._0x4bcc6a)]),style:D});b.graphic=R.length>0?R[0]:null,b.graphics=R}else{var L;logInfo("_clickTileGraphic: 当前数据太大，避免卡顿未进行解析，如需展示矢量对象，请在图层配置加 hasToGraphic:true 参数 ",f==null?void 0:f.options,(L=l[r(s._0x3c8c81)])===null||L===void 0?void 0:L.geometry)}}return f&&f.fire(EventType.click,b,![]),this._map[r(s._0x2f75bb)](EventType.clickTileGraphic,b),b}_clickHandler(e){const t={_0x3cf9c1:932,_0x23c0e9:1109},i=_0x3a2b68;if(!e||!e.position)return![];const s=e.position,r=this.getPickTarget(s,e);if(this._map[i(2962)](r),r[i(t._0x3cf9c1)]){var o;this[i(1483)](EventType.click,r),this._map.fire(EventType.clickGraphic,r),(o=r.layer)!==null&&o!==void 0&&o.allowDrillPick&&this._pickImageryLayerFeatures(s,r)}else this._map[i(t._0x23c0e9)](EventType.click,r),this._map.fire(EventType.clickMap,r),this._pickImageryLayerFeatures(s,r)}_mouseMoveHandler(e){const t={_0x5c0f5c:1750,_0x5e7014:1541},i=_0x3a2b68;if(!e||!e[i(1127)])return![];const s=e.endPosition,r=this[i(t._0x5c0f5c)](s,e),o=r.sourceTarget;o&&!o.noMouseMove?this.activateMouseOver(r):this[i(t._0x5e7014)](),this._map.fire(EventType.mouseMoveTarget,{czmObject:o,...e,...r})}activateMouseOver(e){const t={_0x173be0:3131,_0x718903:1575},i=_0x3a2b68;if(!(this[i(4069)]&&e.id&&e.id===this._lastMouseOverItem.id)){if(this[i(1541)](),e.hasClickEvent&&e.hasClickEvent()){var s,r;let o=i(t._0x173be0);(s=e.graphic)!==null&&s!==void 0&&(r=s.style)!==null&&r!==void 0&&r.cursorCSS&&(o=e.graphic.style.cursorCSS),this[i(t._0x718903)].container.style.cursor=o}this[i(1483)](EventType.mouseOver,e),this._lastMouseOverItem=e}}activateMouseOut(){const e={_0x4c56ee:4069,_0xe6e8f1:1575},t=_0x3a2b68;this[t(e._0x4c56ee)]!=null&&(this[t(e._0xe6e8f1)][t(621)](![]),this.fireTargetEvent(EventType.mouseOut,this._lastMouseOverItem),this._lastMouseOverItem=null)}_globeMouseHandler(e,t){const i={_0x491762:3782},s={_0x3f1ff2:1109},r=_0x3a2b68;if(!e||!e.position)return![];const o=e.position,c=this.getPickTarget(o,e);Array[r(391)](t)?t[r(i._0x491762)](_=>{const l=r;c.sourceTarget?this[l(1483)](_,c):this._map[l(s._0x3f1ff2)](_,c)}):c.sourceTarget?this.fireTargetEvent(t,c):this._map.fire(t,c)}fireTargetEvent(e,t){const i=_0x3a2b68;var s,r,o;const c=t.sourceTarget[e];c&&typeof c=="function"&&c(t),(s=t.czmObject.eventTarget)===null||s===void 0||s.fire(e,t),(r=t.graphic)!==null&&r!==void 0&&r.fire?t.graphic.fire(e,t,!![]):(o=t[i(607)])!==null&&o!==void 0&&o.fire?t.layer.fire(e,t,!![]):this._map.fire(e,t)}destroy(){const e={_0x503604:2505,_0x49796e:1575,_0x396e33:4185,_0x4df2e6:2182},t=_0x3a2b68;!this[t(e._0x503604)]&&(this[t(e._0x49796e)].removeLayer(this._graphicLayer,!![]),delete this._graphicLayer),this[t(566)].destroy(),delete this.handler,this._map[t(679)].removeEventListener(t(e._0x396e33),this._onKeyDown),this[t(1575)].canvas.removeEventListener(t(e._0x4df2e6),this._onKeyUp)}}new Cesium__namespace.Cartographic;const rayScratch=new Cesium__namespace.Ray,cartesian3Scratch=new Cesium__namespace.Cartesian3;class ZoomNavigation{constructor(e){this.viewer=e}zoomIn(e=2,t){return e=1/e,this.zoom(e,t)}[_0x3a2b68(699)](e=2,t){return this.zoom(e,t)}[_0x3a2b68(1874)](e,t){const i={_0x294d97:4241,_0x361fa8:699,_0x25ea1f:4022,_0x50b0dd:2522,_0xbc40f9:2402,_0x106c68:3404,_0x215f1c:407,_0x5bf9b0:2782,_0x261632:2341,_0x5e6e4f:3674,_0x59f00f:3052},s=_0x3a2b68,r=this.viewer.scene,o=r.screenSpaceCameraController;if(!t&&(!o.enableInputs||!o.enableZoom))return![];const c=r.camera;let _;switch(r[s(1640)]){case Cesium__namespace.SceneMode.COLUMBUS_VIEW:case Cesium__namespace.SceneMode.MORPHING:case Cesium__namespace.SceneMode.SCENE2D:{const l=c.positionCartographic[s(4241)]*(1-e);c.zoomIn(l);const d=o.minimumZoomDistance,f=o.maximumZoomDistance,g=c.positionCartographic[s(i._0x294d97)];if(g<d)return c[s(i._0x361fa8)](l),![];if(g<o[s(3052)]){const b=o._scene[s(i._0x25ea1f)];if(Cesium__namespace.defined(b)&&g<=b+d)return c.zoomOut(l),![]}return f&&g>f?(c.zoomOut(l),![]):!![]}default:{let l;if(Cesium__namespace.defined(this.viewer.trackedEntity)?l=new Cesium__namespace.Cartesian3:(rayScratch.origin=c.positionWC,rayScratch.direction=c[s(i._0x50b0dd)],l=r.globe.pick(rayScratch,r,new Cesium__namespace[s(2978)]),Cesium__namespace.defined(l)&&(l=c.worldToCameraCoordinatesPoint(l,l))),Cesium__namespace.defined(l))_={direction:c[s(3763)],up:c.up};else{const S=new Cesium__namespace[s(3458)](c[s(i._0xbc40f9)](r.globe[s(i._0x106c68)].cartographicToCartesian(c.positionCartographic)),c[s(2522)]);if(l=Cesium__namespace[s(1170)].grazingAltitudeLocation(S,r[s(1462)].ellipsoid),!Cesium__namespace[s(i._0x215f1c)](l))return![];_={heading:c[s(i._0x5bf9b0)],pitch:c[s(1630)],roll:c[s(i._0x261632)]}}const d=Cesium__namespace.Cartesian3[s(3420)](c.position,l,cartesian3Scratch),f=Cesium__namespace[s(2978)].multiplyByScalar(d,e,d),g=Cesium__namespace.Cartesian3[s(i._0x5e6e4f)](l,f,l);if(!Cesium__namespace.defined(g))return![];const b=o[s(3849)],C=o.maximumZoomDistance,P=Cesium__namespace.Cartographic.fromCartesian(g).height;if(P<b)return![];if(P<o[s(i._0x59f00f)]){const S=o._scene.globeHeight;if(Cesium__namespace.defined(S)&&P<=S+b)return![]}return C&&P>C?![]:(Cesium__namespace.defined(this.viewer[s(3428)])||r[s(1640)]===Cesium__namespace.SceneMode.COLUMBUS_VIEW?c[s(4076)]=g:c.flyTo({destination:g,orientation:_,duration:.5,convert:![]}),!![])}}}}class SceneOption{constructor(e){const t=_0x3a2b68;this._map=e,this[t(3453)]=e.viewer,this.options={},this._init()}_init(){const e={_0x4e25ae:2092,_0x4c838e:4384,_0x54b672:3453,_0x1c5277:1134,_0x46d396:3987,_0x583a3e:2822,_0x460fdb:3453},t={_0x269c47:1575},i=_0x3a2b68;var s,r;if(this._viewer.cesiumWidget.creditContainer.style.display=i(3662),this[i(3453)][i(744)].screenSpaceCameraController.maximumZoomDistance=5e7,this._viewer[i(744)].backgroundColor=Cesium__namespace[i(e._0x4e25ae)][i(e._0x4c838e)],this._viewer.sceneModePicker&&(this[i(e._0x54b672)].sceneModePicker.viewModel[i(2096)]=0),(s=this._viewer)===null||s===void 0||(r=s[i(e._0x1c5277)])===null||r===void 0||r[i(3095)].command[i(e._0x46d396)].addEventListener(o=>{this[i(t._0x269c47)].flyHome(),o.cancel=!![]}),this._viewer._cesiumWidget[i(3853)]=Cesium__namespace[i(e._0x583a3e)].supportsImageRenderingPixelated(),this[i(3453)]._cesiumWidget._forceResize=!![],Cesium__namespace.FeatureDetection.supportsImageRenderingPixelated()){let o=window[i(4047)];for(;o>=2;)o/=2;this[i(e._0x460fdb)].resolutionScale=o}}setOptions(e,t){const i=_0x3a2b68;return e=e||{},t=t||{},this.options=e,this._setViewerOption(t)._setCanvasOption(t)._setSceneOption(t)._setGlobeOption(t)[i(1217)](t)._setClockOption(t),this}[_0x3a2b68(2442)](e){const t={_0x66979e:3006,_0x5d55f7:3747,_0x3e3002:3453,_0x44e09b:955,_0x206a85:2636,_0x3b9b4c:407,_0x17fa55:4156,_0x4b8b2c:1941,_0x55a919:1273},i=_0x3a2b68;return e.center?this._map[i(t._0x66979e)](this.options[i(t._0x5d55f7)],{duration:0}):e.extent&&this._map.flyToExtent(this.options.extent,{duration:0}),this[i(t._0x3e3002)][i(t._0x44e09b)]=this.options.shadows??![],(this.options.removeDblClick??!![])&&this._viewer.screenSpaceEventHandler.removeInputAction(Cesium__namespace[i(3039)][i(t._0x206a85)]),this[i(1941)].resolutionScale&&(this[i(3453)].resolutionScale=this.options.resolutionScale),Cesium__namespace[i(t._0x3b9b4c)](this.options[i(t._0x17fa55)])&&(isBoolean(this.options.terrainShadows)?this[i(3453)].terrainShadows=this[i(t._0x4b8b2c)].terrainShadows?Cesium__namespace.ShadowMode.ENABLED:Cesium__namespace.ShadowMode[i(t._0x55a919)]:this._viewer[i(4156)]=this.options.terrainShadows),this}_setCanvasOption(e){const t={_0x22a1b0:1941,_0x418dfe:2260},i=_0x3a2b68,s=this._viewer.canvas;return s.setAttribute("tabindex",this[i(t._0x22a1b0)][i(t._0x418dfe)]??0),s[i(3688)]=r=>{s.focus()},this}[_0x3a2b68(3445)](e){const t={_0x10ec56:3453,_0x1cc815:1741,_0x5d5148:4110,_0x25b2ac:3401,_0x259a39:2092,_0x6c805:2161,_0x9f11cb:3915},i=_0x3a2b68,s=this[i(t._0x10ec56)].scene,r=this.options;switch(s.sun.show=r[i(695)]??!![],s.moon.show=r[i(t._0x1cc815)]??!![],s.skyBox.show=r.showSkyBox??!![],s.skyAtmosphere.show=!!(r[i(t._0x5d5148)]??!![]),s.fog.enabled=r[i(3497)]??!![],s.postProcessStages[i(t._0x25b2ac)].enabled=r.fxaa??!![],s.highDynamicRange=r[i(4154)]??![],r.backgroundColor&&(s.backgroundColor=Cesium__namespace[i(t._0x259a39)].fromCssColorString(r.backgroundColor)),Cesium__namespace.defined(r.orderIndependentTranslucency)&&(s._useOIT=r.orderIndependentTranslucency),r[i(t._0x6c805)]){case Cesium__namespace.SceneMode[i(3676)]:s.morphTo2D(0);break;case Cesium__namespace[i(t._0x9f11cb)].COLUMBUS_VIEW:s.morphToColumbusView(0);break;case Cesium__namespace[i(3915)].SCENE3D:s.morphTo3D(0);break}return this}_setGlobeOption(e){const t={_0x2ad48b:760,_0x248e55:3498},i=_0x3a2b68,s=this._viewer.scene.globe,r=this[i(1941)].globe??{};return merge(s,{...r,show:r.show??!![],depthTestAgainstTerrain:r.depthTestAgainstTerrain??![],baseColor:Cesium__namespace.Color[i(2849)](r.baseColor||"#546a53"),showGroundAtmosphere:r[i(t._0x2ad48b)]??!![],enableLighting:r[i(t._0x248e55)]??![]}),this}[_0x3a2b68(1217)](e){const t={_0x10a02d:3359},i=_0x3a2b68,s=this._viewer[i(744)].screenSpaceCameraController,r=this.options[i(3025)]??{};return merge(s,{...r,_zoomFactor:r[i(t._0x10a02d)]||3,minimumZoomDistance:r.minimumZoomDistance??1,maximumZoomDistance:r.maximumZoomDistance??5e7,minimumCollisionTerrainHeight:r.minimumCollisionTerrainHeight??15e3,enableRotate:r[i(3794)]??!![],enableTranslate:r.enableTranslate??!![],enableTilt:r.enableTilt??!![],enableZoom:r[i(2312)]??!![],enableCollisionDetection:r.enableCollisionDetection??!![]}),r.constrainedAxis===![]&&(this._viewer[i(4233)][i(549)]=void 0),this}_setClockOption(e){const t={_0x230c6f:1941,_0x4e1883:2257,_0x4e993b:3356,_0x46e670:545,_0x370c20:1439,_0x32fcfa:1439},i=_0x3a2b68,s=this._viewer.clock,r=this[i(t._0x230c6f)][i(t._0x4e1883)]??{};return r.shouldAnimate=r[i(3356)]??this[i(1941)][i(t._0x4e993b)]??!![],s.shouldAnimate=r.shouldAnimate,r.startTime&&(s.startTime=this[i(3889)](r.startTime),s[i(t._0x46e670)]=s.startTime),r[i(t._0x370c20)]&&(s.stopTime=this._getJulianDate(r[i(t._0x32fcfa)])),r.currentTime&&(s[i(t._0x46e670)]=this._getJulianDate(r.currentTime),!r.startTime&&(s.startTime=s[i(545)].clone()),!r[i(1439)]&&(s.stopTime=Cesium__namespace.JulianDate.addDays(s.currentTime,1,new Cesium__namespace.JulianDate))),r.multiplier&&(s.multiplier=r.multiplier),this}_getJulianDate(e){const t=_0x3a2b68;return isString(e)?e.indexOf("Z")===-1?Cesium__namespace[t(557)].fromDate(new Date(e)):Cesium__namespace[t(557)].fromIso8601(e):e}}function initBeforeCreateDefaultValue(n){const e={_0x67698a:744},t=_0x3a2b68;var i;Cesium__namespace.Ion.defaultAccessToken=(n==null||(i=n[t(e._0x67698a)])===null||i===void 0?void 0:i.ionToken)||ion,Cesium__namespace.Camera.DEFAULT_VIEW_RECTANGLE=Cesium__namespace.Rectangle.fromDegrees(89.5,20.4,110.4,61.2),Cesium__namespace.RequestScheduler.maximumRequests=100,Cesium__namespace.RequestScheduler.maximumRequestsPerServer=20}class PopupMgr extends BaseControl{constructor(e={}){const t=_0x3a2b68;super(e),this._depthTest=e[t(474)]??!![]}get depthTest(){return this._depthTest}set[_0x3a2b68(474)](e){this._depthTest=e}_mountedHook(){this._layer=new GraphicLayer({private:!![]}),this._layer._closeAllControl=function(){}}[_0x3a2b68(2024)](e){const t={_0x3663da:442},i=_0x3a2b68;this._layer[i(t._0x3663da)]=e}_addedHook(){this._map.addLayer(this._layer),this._bindEvent()}_removedHook(){this[_0x3a2b68({_0x323dcc:2293}._0x323dcc)](),this._map.removeLayer(this._layer)}_bindEvent(){const e={_0x5aac52:1575},t=_0x3a2b68;this[t(e._0x5aac52)].on(EventType.click,this._mouseClickHandler,this),this._map.on(EventType[t(1119)],this[t(388)],this)}_unbindEvent(){const e={_0x140e95:388,_0x376f28:2971},t=_0x3a2b68;this[t(1575)].off(EventType[t(383)],this[t(e._0x140e95)],this),this._map[t(e._0x376f28)](EventType.clickTileGraphic,this[t(388)],this)}_mouseClickHandler(e){const t={_0x3b1604:607,_0x5c679d:4053},i=_0x3a2b68;var s,r;if(!this.enabled||this._openByMouseEvent(e.czmObject,e)||this._openByMouseEvent(e.graphic,e)||this._openByMouseEvent((s=e[i(2471)])===null||s===void 0?void 0:s.parent,e)||this._openByMouseEvent(e[i(607)],e)||this._openByMouseEvent((r=e[i(t._0x3b1604)])===null||r===void 0?void 0:r.parent,e))return;const o=this[i(t._0x5c679d)][i(863)]();for(let c=0,_=o[i(400)];c<_;c++){const l=o[c];l.options.closeOnClick!==![]&&l.remove(!![])}}[_0x3a2b68(2558)](e){const t=_0x3a2b68;return e._popupConfig||e.getPopupConfig&&e[t(3562)]()}[_0x3a2b68(2234)](e,t){const i={_0x19fc3f:2558,_0x1bd524:3628},s=_0x3a2b68;if(!e)return![];let r=this[s(i._0x19fc3f)](e);return r===![]?!![]:r?(r={...r,...t},this.open(t[s(i._0x1bd524)],r),!![]):![]}[_0x3a2b68(4104)](e,t){const i={_0x5d044c:1984,_0x4ca6e3:1984,_0x460d36:1941,_0x44267c:2471,_0x50d7d8:1361},s=_0x3a2b68;if(!this._layer)return;if(e){const b=this._layer.getGraphics();for(let C=0,P=b.length;C<P;C++){var r,o;const S=b[C];if(S.options[s(i._0x5d044c)]){var c;S[s(1941)][s(i._0x4ca6e3)]((c=S[s(i._0x460d36)])===null||c===void 0?void 0:c.attr,e)&&S[s(1361)](!![])}else e===((r=S.options)===null||r===void 0||(o=r[s(2365)])===null||o===void 0?void 0:o[s(i._0x44267c)])&&S[s(1361)](!![])}return}if(t){const b=this._layer.getGraphics();for(let C=0,P=b.length;C<P;C++){var _,l;const S=b[C];if(S.options.checkData){var d;S.options.checkData((d=S.options)===null||d===void 0?void 0:d.attr,t)&&S[s(i._0x50d7d8)](!![])}else t===((_=S.options)===null||_===void 0||(l=_.event)===null||l===void 0?void 0:l.layer)&&S.remove(!![])}return}const f=this._layer.getGraphics();for(let b=0,C=f.length;b<C;b++){var g;const P=f[b];(((g=P.options)===null||g===void 0?void 0:g.autoClose)??!![])&&P.remove(!![])}}[_0x3a2b68(1140)](){const e={_0x451d78:2126},t=_0x3a2b68;this._layer&&this[t(4053)][t(e._0x451d78)]()}[_0x3a2b68(2591)](e,t={}){const i={_0x3019b0:446,_0x12b75f:607,_0xe034fc:2471,_0x28d1e0:4280,_0x587dcc:4076,_0x3ab427:808,_0x1c892a:3472,_0x17ab34:1653,_0x5bd0a3:1313,_0x2681d9:2847},s=_0x3a2b68;var r;const o=t.options||{};(o==null?void 0:o.autoClose)??!![]?this[s(4104)]():t!=null&&t.graphic&&this.close(t.graphic);let c=t[s(i._0x3019b0)];t.layer&&t[s(i._0x12b75f)][s(1109)]&&(c=t.layer),t.graphic&&t[s(i._0xe034fc)].fire&&(c=t.graphic);let _=Cesium__namespace.HeightReference[s(i._0x28d1e0)];if(t.czmObject){const b=t[s(3409)];_=this.getHeightReference(b,_),(b.billboard||b.point||b[s(i._0x587dcc)]&&!(b.position instanceof Cesium__namespace.ConstantPositionProperty))&&(e=b.position)}if(t.graphic){if(t.graphic.isPoint){var l,d;_=(l=t[s(i._0xe034fc)].style)===null||l===void 0?void 0:l[s(3868)],(d=t[s(2471)].style)!==null&&d!==void 0&&d.clampToGround&&(_=Cesium__namespace[s(i._0x3ab427)][s(i._0x1c892a)])}t[s(446)]&&t.graphic.property&&(e=t[s(i._0xe034fc)][s(396)]())}const f={...o,heightReference:_,html:t[s(i._0x17ab34)]},g=this[s(i._0x5bd0a3)]({depthTest:this.depthTest,...o,position:e,style:f,attr:(r=t.graphic)===null||r===void 0?void 0:r.attr,target:c,event:t},c);this._layer[s(i._0x2681d9)](g)}getPopup(e){return this[_0x3a2b68({_0x26da72:4053}._0x26da72)].getGraphicById(e._popupId)}_createDivGraphic(e,t){const i=new Popup(e);return t&&(t._popupId=i.id),i}getHeightReference(e,t){const i={_0x24a230:3846,_0xc6c08c:3992,_0x4d7a4a:3868},s=_0x3a2b68;if(!e)return t;if(Cesium__namespace.defined(e[s(i._0x24a230)]))return e[s(3846)];const r=e.billboard||e[s(2879)]||e[s(i._0xc6c08c)]||e.label;return Cesium__namespace.defined(r==null?void 0:r.heightReference)?r[s(i._0x4d7a4a)]._value:t}}register$1("popup",PopupMgr);class TooltipMgr extends PopupMgr{constructor(e={}){const t={_0x2fb1ee:1941},i=_0x3a2b68;super(e),this.options.cacheTime=this[i(t._0x2fb1ee)].cacheTime??20}_enabledHook(e){super._enabledHook(e),this.moveTimer&&!e&&(clearTimeout(this.moveTimer),delete this.moveTimer)}_bindEvent(){const e={_0x2a6e49:1277,_0x427962:1575},t=_0x3a2b68;this._map.on(EventType.mouseMoveTarget,this[t(e._0x2a6e49)],this),this._map.on(EventType[t(3085)],this._mouseDownHandler,this),this[t(e._0x427962)].on(EventType.mouseUp,this._mouseUpHandler,this)}_unbindEvent(){const e={_0x1a986d:1489},t=_0x3a2b68;this._map.off(EventType.mouseMoveTarget,this._mouseMoveHandler,this),this._map.off(EventType[t(3085)],this[t(e._0x1a986d)],this),this._map.off(EventType[t(2960)],this._mouseUpHandler,this)}_mouseDownHandler(e){this.enabled&&(this._isMouseUpdownPressed=!![],this.close())}_mouseUpHandler(e){this[_0x3a2b68(3174)]&&(this._isMouseUpdownPressed=![])}_mouseMoveHandler(e){const t={_0x55de0b:3174,_0x1db952:815},i=_0x3a2b68;if(this[i(t._0x55de0b)]){if(this.moveTimer&&(clearTimeout(this.moveTimer),delete this[i(t._0x1db952)]),this._isMouseUpdownPressed||!this._enabled){this.close();return}this.moveTimer=setTimeout(()=>{delete this.moveTimer,this._mouseClickHandler(e)},this.options.cacheTime)}}_getConfig(e){return e._tooltipConfig||e.getTooltipConfig&&e.getTooltipConfig()}_createDivGraphic(e,t){const i={_0x29f74d:2142},s=_0x3a2b68,r=new Tooltip(e);return t&&(t[s(i._0x29f74d)]=r.id),r}getTooltip(e){const t=_0x3a2b68;return this._layer[t(2974)](e._tooltipId)}}register$1("tooltip",TooltipMgr);class SmallTooltip extends BaseControl{get direction(){return this[_0x3a2b68(1941)].direction}set direction(e){const t={_0x3c80d3:3763,_0x4e5335:1831},i=_0x3a2b68;this.options[i(t._0x3c80d3)]=e,e?(addClass(this._containerArrow,i(958)),removeClass(this._containerArrow,"mars3d-smallTooltip-rightArrow")):(addClass(this._containerArrow,i(t._0x4e5335)),removeClass(this._containerArrow,"mars3d-smallTooltip-leftArrow"))}_enabledHook(e){this.show=e}_mountedHook(){const e={_0x33913a:3206,_0x1b516c:1864,_0x5c8f19:1844},t=_0x3a2b68;this._container=create$3(t(3206),"mars3d-smallTooltip"),this._container.style.display="none",this._containerArrow=create$3(t(e._0x33913a),t(e._0x1b516c),this._container),this._containerContent=create$3(t(3206),"mars3d-smallTooltip-inner",this._container),this._container[t(e._0x5c8f19)]("click",i=>{this.close()})}[_0x3a2b68(4104)](){const e={_0x1d895a:2094},t=_0x3a2b68;this[t(e._0x1d895a)]&&(this._container.style[t(2085)]=t(3662))}open(e,t){const i={_0x39877d:2094,_0x1df015:1941},s=_0x3a2b68;this.enabled&&(t&&(this._containerContent.innerHTML=t),e?(e instanceof Cesium__namespace.Cartesian3&&(e=Cesium__namespace.SceneTransforms.wgs84ToWindowCoordinates(this[s(1575)].scene,e)),this[s(2094)].style.display=s(1305),this._container.style.top=e.y-this[s(i._0x39877d)].clientHeight/2+"px",this[s(i._0x1df015)][s(3763)]?this._container.style.left=e.x-this._container.clientWidth-25+"px":this._container.style.left=e.x+25+"px"):this[s(2094)].style.display="none")}}register$1("smallTooltip",SmallTooltip);class ContextMenu extends BaseControl{constructor(n={}){super(n),this._menuIndex=0,this._menuObj={}}get[_0x3a2b68(446)](){return this[_0x3a2b68({_0x277bfd:2238}._0x277bfd)]}[_0x3a2b68(2024)](){this._target=null}_mountedHook(){const n={_0x51b562:4099},e={_0x43cea6:3985},t=_0x3a2b68;Cesium__namespace.defaultValue(this.options.preventDefault,!![])&&(this._map.container[t(n._0x51b562)]=function(i){i[t(e._0x43cea6)]()}),this._container=create$3("div","mars3d-contextmenu"),this._container.style.display="none",this._containerUl=create$3("ul","mars3d-contextmenu-ul",this._container),this._containerUl.id=this.parentContainerId+"-mars3d-contextmenu-ul"}_addedHook(){const n={_0x419eea:3950},e=_0x3a2b68;this._map.on(EventType.leftDown,this._downHandler,this),this._map.on(EventType.middleDown,this._downHandler,this),this._map.on(EventType[e(n._0x419eea)],this._downHandler,this),this._map.on(EventType.rightClick,this._rightClickHandler,this)}[_0x3a2b68(3916)](){const n={_0x3c9976:1575,_0x384df1:2971,_0xea230e:1241},e=_0x3a2b68;this[e(n._0x3c9976)][e(2971)](EventType.leftDown,this._downHandler,this),this._map[e(n._0x384df1)](EventType.middleDown,this._downHandler,this),this._map.off(EventType[e(3950)],this[e(n._0xea230e)],this),this._map.off(EventType.rightClick,this._rightClickHandler,this),this._target=null,this._eventResult=null}_downHandler(n){this.close()}_rightClickHandler(n){const e={_0x42d7dc:3591},t=_0x3a2b68;var i,s;this.close(),this[t(3174)]&&(this._openByClick(n.czmObject,n)||this._openByClick(n.graphic,n)||this._openByClick((i=n.graphic)===null||i===void 0?void 0:i[t(e._0x42d7dc)],n)||this._openByClick(n.layer,n)||this._openByClick((s=n[t(607)])===null||s===void 0?void 0:s.parent,n)||this._openByClick(this[t(1575)],n))}[_0x3a2b68(1877)](n,e){const t=_0x3a2b68;if(!n)return![];let i=n._contextmenuConfig||n[t(1593)]&&n.getContextMenu();return i===![]?!![]:i?(i={...i,...e},this[t(2591)](e[t(3628)],i),!![]):![]}close(n,e){const t={_0x44874a:607},i=_0x3a2b68;var s,r,o;this._show!==![]&&(n&&n!==((s=this._eventResult)===null||s===void 0?void 0:s.graphic)||e&&e!==((r=this._eventResult)===null||r===void 0?void 0:r[i(t._0x44874a)])||(this.show=![],(o=this.target)!==null&&o!==void 0&&o.fire?this.target.fire(EventType.contextMenuClose,{},!![]):this._map.fire(EventType.contextMenuClose)))}[_0x3a2b68(2591)](_0xa70048,_0xd05844={}){const _0x5f3b3f={_0x1eccbb:1027,_0x4285fc:400,_0x2b7aac:2771,_0x2fb9b5:1575,_0x3684aa:2094,_0xd8b15e:3306,_0x1ea933:454,_0x161875:901,_0x112ede:454,_0xe50745:1109,_0x29fb35:446},_0x335fda={_0x17e618:2472,_0x3d35a9:2472,_0x4daee8:1403},_0x271b5a={_0xe8824:2767,_0x27a4de:1497,_0x45e878:2290,_0x53a2d1:1497,_0x26e107:446,_0x13f856:4104},_0xf3842d=_0x3a2b68;var _0x43ccbd;const _0x67608b=_0xd05844[_0xf3842d(1941)]||{},_0x27818b=_0xd05844.content;if(!_0x27818b||_0x27818b.length===0){this.close();return}const _0x4612bd=_0xd05844.windowPosition||Cesium__namespace[_0xf3842d(_0x5f3b3f._0x1eccbb)][_0xf3842d(1176)](this._map.scene,_0xa70048),_0x15be18={..._0xd05844,windowPosition:_0x4612bd,position:_0xa70048};if(_0xd05844.layer&&_0xd05844.layer.fire&&(_0x15be18.target=_0xd05844.layer),_0xd05844.graphic&&_0xd05844.graphic.fire){_0x15be18.target=_0xd05844.graphic;const n=_0xd05844[_0xf3842d(2471)].parent;n&&n.fire&&(_0x15be18.graphic_parent=n)}this._eventResult=_0x15be18;let _0x392d75="";for(let n=0,e=_0x27818b[_0xf3842d(_0x5f3b3f._0x4285fc)];n<e;n++){const t=_0x27818b[n],i=this._getItemHtml(t,_0x15be18);i&&(_0x392d75+=i)}if(_0x392d75===""){this.close();return}this[_0xf3842d(2883)].innerHTML=_0x392d75;const _0x3c0c41=this._containerUl.querySelectorAll(".contextmenu-item"),_0x3c56e2=this;for(let _0x2bb6ef=0;_0x2bb6ef<_0x3c0c41.length;_0x2bb6ef++){const _0x482316=_0x3c0c41[_0x2bb6ef];_0x482316.addEventListener("click",function(_0xeba398){const _0x3a7b7d=_0xf3842d;var _0x2de8e6;_0xeba398.stopPropagation&&_0xeba398[_0x3a7b7d(3443)]();const _0x2a0f76=Number(this.getAttribute("data-index")),_0x1a952b=_0x3c56e2._menuObj[_0x2a0f76],_0x1eb43f={..._0x15be18,data:_0x1a952b},_0x817349=_0x1a952b[_0x3a7b7d(_0x271b5a._0xe8824)];_0x817349&&(isFunction(_0x817349)?_0x817349(_0x1eb43f):isString(_0x817349)&&(window[_0x3a7b7d(_0x271b5a._0x27a4de)]=_0x1eb43f,eval(_0x817349+_0x3a7b7d(_0x271b5a._0x45e878)),delete window[_0x3a7b7d(_0x271b5a._0x53a2d1)])),(_0x2de8e6=_0x3c56e2[_0x3a7b7d(_0x271b5a._0x26e107)])!==null&&_0x2de8e6!==void 0&&_0x2de8e6.fire?_0x3c56e2[_0x3a7b7d(446)][_0x3a7b7d(1109)](EventType.contextMenuClick,_0x1eb43f,!![]):_0x3c56e2._map[_0x3a7b7d(1109)](EventType.contextMenuClick,_0x1eb43f);const _0x45ebc2=Number(this.getAttribute("data-count")||0);_0x45ebc2===0&&_0x3c56e2[_0x3a7b7d(_0x271b5a._0x13f856)]()}),_0x482316.addEventListener("mouseover",function(n){const e=_0xf3842d,t=_0x3c56e2[e(2094)].querySelectorAll(".mars3d-sub-menu");for(let s=0;s<t.length;s++)t[s][e(2748)][e(2085)]=e(3662);const i=this[e(_0x335fda._0x17e618)](".mars3d-sub-menu");i&&(i[e(2748)].display=e(1305)),removeClass(_0x3c56e2._containerUl[e(_0x335fda._0x3d35a9)](e(_0x335fda._0x4daee8)),"active"),addClass(this,"active")})}this.show=!![],this._target=_0x15be18.target;let _0xf99c2f=_0x4612bd.y,_0x4bbd0a=_0x4612bd.x;_0x67608b[_0xf3842d(3278)]?(_0x4bbd0a+=_0x67608b.anchor[0],_0xf99c2f+=_0x67608b.anchor[1]):(_0x67608b.offsetX&&(_0x4bbd0a+=_0x67608b[_0xf3842d(_0x5f3b3f._0x2b7aac)]),_0x67608b.offsetY&&(_0xf99c2f+=_0x67608b.offsetY));const _0x2c2ba0=this._container.offsetHeight,_0x6158b=this[_0xf3842d(2094)].offsetWidth;_0xf99c2f+_0x2c2ba0>this[_0xf3842d(_0x5f3b3f._0x2fb9b5)].scene[_0xf3842d(679)][_0xf3842d(424)]?(_0xf99c2f-=_0x2c2ba0-10,_0xf99c2f<=0&&(_0xf99c2f=0)):_0xf99c2f+=10;let _0xf3a656=!![];_0x4bbd0a+_0x6158b>this._map.scene.canvas.clientWidth?(_0x4bbd0a-=_0x6158b-10,_0xf3a656=![],_0x4bbd0a<=0&&(_0x4bbd0a=0)):_0x4bbd0a+=10,this._container.style.left=_0x4bbd0a+"px",this[_0xf3842d(_0x5f3b3f._0x3684aa)][_0xf3842d(2748)].top=_0xf99c2f+"px";const _0x3efa4f=this._containerUl.querySelectorAll(_0xf3842d(4190));for(let n=0;n<_0x3efa4f[_0xf3842d(400)];n++){const e=_0x3efa4f[n],t=Number(e[_0xf3842d(_0x5f3b3f._0xd8b15e)]("data-count")||1)*34;let i=_0xf99c2f+e.parentElement.offsetTop;e.style.top="0",e[_0xf3842d(2748)][_0xf3842d(_0x5f3b3f._0x1ea933)]="auto",i+t>this._map.scene.canvas.clientHeight&&(i-=t,i>0&&(e.style[_0xf3842d(_0x5f3b3f._0x161875)]="auto",e.style[_0xf3842d(_0x5f3b3f._0x112ede)]="0")),_0xf3a656?e.style.left=_0x6158b+10+"px":e.style[_0xf3842d(595)]=_0x6158b+10+"px"}(_0x43ccbd=_0x15be18.target)!==null&&_0x43ccbd!==void 0&&_0x43ccbd[_0xf3842d(_0x5f3b3f._0xe50745)]?_0x15be18[_0xf3842d(_0x5f3b3f._0x29fb35)].fire(EventType[_0xf3842d(3169)],{},!![]):this._map[_0xf3842d(1109)](EventType.contextMenuOpen)}_getItemHtml(_0x1714a5,_0x3e5027){const _0x5caaef={_0x34cbf3:442,_0x18bcd1:1924,_0x3288a7:3994,_0x129c01:400,_0x46b044:3994,_0x306d98:3807,_0x43c663:1340,_0x19fcda:3640},_0x583385=_0x3a2b68;if(_0x1714a5.hasOwnProperty(_0x583385(_0x5caaef._0x34cbf3))){let _0x1e5739=_0x1714a5[_0x583385(442)];try{_0x3e5027[_0x583385(_0x5caaef._0x18bcd1)]=_0x1714a5,isFunction(_0x1e5739)?_0x1e5739=_0x1714a5.show(_0x3e5027):isString(_0x1e5739)&&(window[_0x583385(4304)]=_0x3e5027,_0x1e5739=eval(_0x1e5739+"(window._contextmenuItemClickShowResult)"),delete window[_0x583385(4304)])}catch(n){logError$1("右键菜单操作出错",n)}if(!_0x1e5739)return}let _0x31f8dd;if(_0x1714a5.text){let n="",e="",t=0;if(_0x1714a5.children){for(let s=0,r=_0x1714a5[_0x583385(_0x5caaef._0x3288a7)][_0x583385(_0x5caaef._0x129c01)];s<r;s++){const o=_0x1714a5[_0x583385(_0x5caaef._0x46b044)][s];_0x3e5027.data=o;const c=this._getItemHtml(o,_0x3e5027);c&&(n+=c,t++)}if(t===0)return;n='<ul class="mars3d-contextmenu-ul mars3d-sub-menu" data-count="'+t+'">'+n+"</ul>",e=`
            <span  class="contextmenu-arrow" >
              <svg width="20" height="20" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="48" height="48" fill="white" fill-opacity="0.01"/><path d="M20 12L32 24L20 36V12Z" fill="#ffffff" stroke="#ffffff" stroke-width="4" stroke-linejoin="round"/></svg>
            </span>  `}this[_0x583385(3899)]++,this._menuObj[this._menuIndex]=_0x1714a5;const i=this._createIcon(_0x1714a5[_0x583385(_0x5caaef._0x306d98)]||_0x1714a5[_0x583385(_0x5caaef._0x43c663)],null,"contextmenu-icon");_0x31f8dd='<li class="contextmenu-item" data-index="'+this[_0x583385(3899)]+'" data-count="'+t+`">
                    <a href="javascript:void(0)">`+i+_0x1714a5[_0x583385(_0x5caaef._0x19fcda)]+e+_0x583385(2673)+n+`
                </li>`}else _0x31f8dd='<li class="line"></li>';return _0x31f8dd}}register$1(_0x3a2b68(594),ContextMenu);class KeyboardRoam extends BaseControl{constructor(e={}){const t={_0x463254:3483},i=_0x3a2b68;super(e),this[i(t._0x463254)](e),this.flags={moveForward:![],moveBackward:![],moveUp:![],moveDown:![],moveLeft:![],moveRight:![]}}get moveStep(){return this._moveStep}set moveStep(e){this._moveStep=e}get dirStep(){return this._dirStep}set[_0x3a2b68(3238)](e){this._dirStep=e}get rotateStep(){return this._rotateStep}set rotateStep(e){this._rotateStep=e}get minPitch(){return this._minPitch}set minPitch(e){const t=_0x3a2b68;this[t(2076)]=e}get maxPitch(){return this._maxPitch}set maxPitch(e){this._maxPitch=e}get minHeight(){return this._minHeight}set minHeight(e){this._minHeight=e}setOptions(e){const t={_0x4e517b:1941,_0x4e65ba:1941,_0x455db5:4244},i=_0x3a2b68;return this[i(1941)]={...this[i(1941)],...e},this[i(3606)]=this.options[i(1935)]??10,this._dirStep=this[i(t._0x4e517b)].dirStep??25,this._rotateStep=this[i(t._0x4e65ba)].rotateStep??1,this._minPitch=this.options.minPitch??.01,this._maxPitch=this.options[i(t._0x455db5)]??.95,this._minHeight=this.options.minHeight??0,this}_addedHook(){const e={_0x56c40d:2182},t=_0x3a2b68;this._map.on(EventType.keydown,this[t(1491)],this),this._map.on(EventType[t(e._0x56c40d)],this._onKeyUp,this),this._map.on(EventType.clockTick,this._onClockTick,this)}_removedHook(){const e={_0x356d4c:4185,_0x2403da:1491,_0xeb293d:1696},t=_0x3a2b68;this._map.off(EventType[t(e._0x356d4c)],this[t(e._0x2403da)],this),this._map[t(2971)](EventType.keyup,this[t(e._0xeb293d)],this),this[t(1575)][t(2971)](EventType.clockTick,this[t(2334)],this)}[_0x3a2b68(1491)](e){const t={_0x3e0259:1050},i=_0x3a2b68;if(!this.enabled)return;const s=this._getFlagForKeyCode(e.keyCode);typeof s!==i(t._0x3e0259)&&(this.flags[s]=!![])}[_0x3a2b68(1696)](e){if(!this[_0x3a2b68({_0x1fa31b:3174}._0x1fa31b)])return;const s=this._getFlagForKeyCode(e.keyCode);typeof s<"u"&&(this.flags[s]=![])}_getFlagForKeyCode(e){const t={_0x5e07f8:1583,_0x43769e:1923,_0x5d7865:3619},i=_0x3a2b68;switch(e){case 87:return"moveForward";case 83:return"moveBackward";case 68:return"moveRight";case 65:return i(3715);case 81:return"moveUp";case 69:return"moveDown";case 38:this[i(t._0x5e07f8)](MoveType.TOP_ROTATE);break;case 37:this.rotateCamera(MoveType.LEFT_ROTATE);break;case 39:this.rotateCamera(MoveType[i(t._0x43769e)]);break;case 40:this.rotateCamera(MoveType[i(t._0x5d7865)]);break;case 73:case 104:this.moveCamera(MoveType.ENLARGE);break;case 75:case 101:this.moveCamera(MoveType.NARROW);break;case 74:case 100:this.moveCamera(MoveType[i(4203)]);break;case 76:case 102:this.moveCamera(MoveType.RIGHT_ROTATE);break;case 85:case 103:this.moveCamera(MoveType[i(3275)]);break;case 79:case 105:this.moveCamera(MoveType.BOTTOM_ROTATE);break}}startMoveForward(){const e={_0x58420d:2235},t=_0x3a2b68;!this.enabled&&(this.enabled=!![]),this.flags[t(e._0x58420d)]=!![]}stopMoveForward(){const e={_0xebc387:3174,_0x3068b8:2235},t=_0x3a2b68;!this[t(e._0xebc387)]&&(this.enabled=!![]),this[t(1372)][t(e._0x3068b8)]=![]}startMoveBackward(){const e=_0x3a2b68;!this.enabled&&(this[e(3174)]=!![]),this[e(1372)][e(3865)]=!![]}stopMoveBackward(){const e={_0x7e9209:3174,_0x49440c:1372,_0x337a6f:3865},t=_0x3a2b68;!this[t(e._0x7e9209)]&&(this.enabled=!![]),this[t(e._0x49440c)][t(e._0x337a6f)]=![]}startMoveRight(){const e={_0x1c3e73:1372},t=_0x3a2b68;!this.enabled&&(this.enabled=!![]),this[t(e._0x1c3e73)].moveRight=!![]}stopMoveRight(){const e={_0x84ed:3174},t=_0x3a2b68;!this[t(3174)]&&(this[t(e._0x84ed)]=!![]),this.flags.moveRight=![]}[_0x3a2b68(3305)](){const e=_0x3a2b68;!this.enabled&&(this[e(3174)]=!![]),this.flags[e(3715)]=!![]}stopMoveLeft(){const e=_0x3a2b68;!this.enabled&&(this[e(3174)]=!![]),this[e(1372)].moveLeft=![]}moveForward(e){const t={_0x28ec89:1575,_0x1d9722:3763},i=_0x3a2b68,s=this[i(t._0x28ec89)].camera;let r=s[i(t._0x1d9722)];const o=Cesium__namespace.Cartesian3.normalize(s.position,new Cesium__namespace.Cartesian3),c=Cesium__namespace[i(2978)].cross(r,o,new Cesium__namespace[i(2978)]);r=Cesium__namespace[i(2978)].cross(o,c,new Cesium__namespace.Cartesian3),r=Cesium__namespace.Cartesian3.normalize(r,r),r=Cesium__namespace.Cartesian3[i(2080)](r,e,r),s.position=Cesium__namespace.Cartesian3[i(3674)](s.position,r,s.position)}[_0x3a2b68(2334)](e){const t={_0x12326e:3174,_0x5aa672:1912},i=_0x3a2b68;if(!this[i(t._0x12326e)])return;const s=this._map.camera,r=this.moveStep;this.flags.moveForward&&this.moveForward(r),this.flags.moveBackward&&this.moveForward(-r),this.flags.moveUp&&s.moveUp(r),this.flags[i(t._0x5aa672)]&&s.positionCartographic[i(4241)]-r>=this.minHeight&&s.moveDown(r),this.flags[i(3715)]&&s.moveLeft(r),this[i(1372)].moveRight&&s.moveRight(r)}_resetCamera(e){const t={_0x3745f1:4076,_0x134148:744,_0x492c72:3763,_0x500392:744},i=_0x3a2b68;e&&(this._map.scene.camera.position=e[i(t._0x3745f1)],this[i(1575)][i(t._0x134148)].camera[i(t._0x492c72)]=e.direction,this._map.scene.camera.right=e[i(595)],this._map[i(t._0x500392)].camera.up=e.up)}_limitAngle(e,t,i){const s={_0x36c6eb:1085},r=_0x3a2b68,o=Cesium__namespace.Cartesian3.dot(e,Cesium__namespace[r(2978)][r(s._0x36c6eb)](t,new Cesium__namespace.Cartesian3));return i==="up"&&o<this[r(435)]?![]:i==="down"&&o>this.maxPitch?![]:!![]}_computedNewPos(e,t,i){const s={_0x2301a0:3458,_0x2ad5b5:1544,_0x2913f0:595,_0x26f65f:1544,_0x4f8f3f:2978},r=_0x3a2b68,o=e[r(4076)],c=this._map[r(4159)]();if(!c)return;const _=c.toCartesian();if(!_)return;const l=Cesium__namespace.Cartesian3.distance(_,o);let d=l/100;d=i?d*this.rotateStep:d;const f={};let g=new Cesium__namespace[r(s._0x2301a0)](o,t);if(f.position=Cesium__namespace.Ray[r(s._0x2ad5b5)](g,d),f.direction=e.direction,f[r(595)]=e[r(s._0x2913f0)],f.up=e.up,i){const b=Cesium__namespace.Cartesian3.normalize(Cesium__namespace.Cartesian3.subtract(f[r(4076)],_,new Cesium__namespace.Cartesian3),new Cesium__namespace[r(2978)]);g=new Cesium__namespace[r(3458)](_,b),f.position=Cesium__namespace.Ray[r(s._0x26f65f)](g,l),f[r(3763)]=Cesium__namespace[r(s._0x4f8f3f)].negate(b,new Cesium__namespace.Cartesian3),f.up=Cesium__namespace[r(2978)].normalize(f[r(4076)],new Cesium__namespace[r(2978)]),f.right=Cesium__namespace.Cartesian3.cross(f.direction,f.up,new Cesium__namespace.Cartesian3)}return f}moveCamera(e){const t={_0x4a4f6d:2978,_0x167378:776},i=_0x3a2b68,s=this._map[i(744)].camera;let r;switch(e){case MoveType.NARROW:r=this._computedNewPos(s,Cesium__namespace.Cartesian3.negate(s.direction,new Cesium__namespace[i(t._0x4a4f6d)]));break;case MoveType.LEFT_ROTATE:r=this[i(t._0x167378)](s,Cesium__namespace.Cartesian3.negate(s.right,new Cesium__namespace.Cartesian3),!![]);break;case MoveType.RIGHT_ROTATE:r=this._computedNewPos(s,s.right,!![]);break;case MoveType.TOP_ROTATE:if(!this._limitAngle(Cesium__namespace.clone(s.up),Cesium__namespace.clone(s.position),"up"))return;r=this._computedNewPos(s,Cesium__namespace[i(2957)](s.up),!![]);break;case MoveType.BOTTOM_ROTATE:if(!this._limitAngle(Cesium__namespace.clone(s.up),Cesium__namespace.clone(s[i(4076)]),"down"))return;r=this[i(776)](s,Cesium__namespace[i(t._0x4a4f6d)].negate(s.up,new Cesium__namespace.Cartesian3),!![]);break;case MoveType.ENLARGE:default:r=this._computedNewPos(s,s.direction);break}r&&this._resetCamera(r)}rotateCamera(e){const t={_0x4d361b:1365,_0x43788c:1575,_0x37b4b9:424,_0x9bf056:3275,_0x52364f:2421,_0x48a50d:2978,_0x4553a1:595},i=_0x3a2b68;let s=[0,0];const r=this._map[i(744)].canvas[i(t._0x4d361b)],o=this[i(t._0x43788c)].scene.canvas[i(t._0x37b4b9)],c=(r+o)/this.dirStep;switch(e){case MoveType.LEFT_ROTATE:s=[-c*r/o,0];break;case MoveType.RIGHT_ROTATE:s=[c*r/o,0];break;case MoveType[i(t._0x9bf056)]:s=[0,c];break;case MoveType.BOTTOM_ROTATE:s=[0,-c];break;default:return}const _=s[0]/r,l=s[1]/o,d=.05,f=this._map.camera;f.lookRight(_*d),f[i(t._0x52364f)](l*d);const g=f.direction;let b=Cesium__namespace[i(2978)].normalize(f.position,new Cesium__namespace[i(2978)]);const C=Cesium__namespace[i(2978)].cross(g,b,new Cesium__namespace.Cartesian3);b=Cesium__namespace[i(t._0x48a50d)].cross(C,g,new Cesium__namespace.Cartesian3),f.up=b,f[i(t._0x4553a1)]=C}}register$1(_0x3a2b68(3309),KeyboardRoam),KeyboardRoam.MoveType=MoveType;function getDefaultContextMenu(n){const e={_0x5b4074:3600,_0x2a6984:1729,_0x4fcb31:365,_0x19c375:2156,_0x54ef6a:4180,_0x222f67:984,_0x312bda:3837,_0x2cc54f:650,_0x3caa87:3524,_0x4c2874:505,_0x1a2604:2504,_0x49a3eb:357,_0xd7fa76:837,_0x1c7685:2391,_0x1e98c2:3600,_0x13a354:3780,_0x505cd9:3600,_0x3ebb2d:1612,_0x605197:3245,_0x1030c1:3600,_0x180fa6:3488,_0x49c052:1213,_0x5d7604:1154,_0x2bd1ea:3448},t={_0x3c55c9:442},i={_0x5b8fdd:887},s={_0xe6bfb4:3586},r={_0x59edca:744,_0x3ed921:442},o={_0x47e255:744},c={_0x1b2ff8:2677},_={_0x49f6c2:744,_0x12e328:2677},l={_0x6fba59:744,_0x5ab37e:1462},d={_0x92241c:1462,_0x49db59:2677},f={_0x54fab4:4085},g={_0x34d8c6:4048},b={_0x334bb0:4048},C={_0x494f17:1247,_0x4346d4:1247},P={_0x4a9ee8:3774},S={_0x3802f1:1097},L={_0x3255e1:1328},E={_0x114fa3:1097},M={_0x5e7671:3944},D={_0x3db8f2:2954},R={_0x374279:979},k={_0x188864:4383,_0x50d7dc:1972},N={_0x1f83ec:1477},$={_0x3fa624:2954},B={_0x10b085:2879},F={_0x1a91c8:1477,_0x12f3c6:918},z={_0x5f0bd3:3607},Y={_0x1a60e0:2580},J={_0x1d9615:3607,_0x5ec0a4:3820},q={_0x2ed1fa:3607,_0x547f5b:3254},le={_0x2f54ac:744},j={_0x2ec303:2451},ie={_0x587ea3:3628},te={_0x2910a8:3060},ce={_0xb5f654:3174},xe={_0x3c2c5e:3174},he={_0x20b997:407},Q={_0x56f837:3628},fe={_0x3d4d90:349},Ae={_0x4a4cb7:3928},me={_0x11bc78:714},Se={_0x20e99:2101,_0x46e627:3628,_0x51e961:3600,_0x480bab:565,_0x11b780:1879},Ie={_0xcab24c:3628},pe=_0x3a2b68,Te=n.contextmenu;return[{text:n[pe(e._0x5b4074)]("_查看此处坐标"),icon:Icon.Coordinates,show:function(ye){const ge=pe;return Cesium__namespace.defined(ye[ge(Ie._0xcab24c)])},callback:function(ye){const ge=pe,ae=LngLatPoint[ge(Se._0x20e99)](ye[ge(Se._0x46e627)]),we=proj4Trans([ae.lng,ae.lat],"EPSG:4326",CRS.CGCS2000_GK_Zone_3),ke=`
         `+n[ge(Se._0x51e961)]("_经度")+":"+ae.lng+", "+n.getLangText("_纬度")+":"+ae.lat+", "+n.getLangText(ge(Se._0x480bab))+":"+ae[ge(Se._0x11b780)]+`,
         `+n[ge(3600)]("_横坐标")+":"+we[0].toFixed(1)+", "+n.getLangText("_纵坐标")+":"+we[1].toFixed(1)+` (CGCS2000)
        `;alert(ke,n[ge(3600)]("_位置信息"));const Ne=formatNum$1(ye.cartesian.x,1),$e=formatNum$1(ye.cartesian.y,1),qe=formatNum$1(ye.cartesian.z,1);logInfo("经纬度："+ae.toString()+" , 笛卡尔："+Ne+","+$e+","+qe)}},{text:n.getLangText("_查看当前视角"),icon:Icon.CameraInfo,callback:function(ye){const ge=pe,ae=JSON[ge(1477)](n.getCameraView());logInfo(ae),alert(ae,n[ge(3600)](ge(me._0x11bc78)))}},{text:n.getLangText("_视角切换"),icon:Icon[pe(1133)],children:[{text:n.getLangText("_允许进入地下"),icon:Icon.UndergroundYes,show:function(ye){return n.scene.screenSpaceCameraController.enableCollisionDetection},callback:function(ye){const ge=pe;n.scene[ge(3928)].enableCollisionDetection=![]}},{text:n.getLangText(pe(e._0x2a6984)),icon:Icon[pe(e._0x4fcb31)],show:function(ye){const ge=pe;return!n.scene[ge(Ae._0x4a4cb7)][ge(4164)]},callback:function(ye){const ge=pe;n[ge(744)][ge(3928)][ge(4164)]=!![]}},{text:n[pe(e._0x5b4074)](pe(e._0x19c375)),icon:Icon[pe(3159)],show:function(ye){const ge=pe;var ae;return ye.cartesian&&(!Te.rotatePoint||!((ae=Te[ge(fe._0x3d4d90)])!==null&&ae!==void 0&&ae.isStart))},callback:function(ye){const ge=pe;!Te.rotatePoint&&(Te[ge(349)]=new RotatePoint,n.addThing(Te[ge(349)])),Te.rotatePoint.start(ye[ge(Q._0x56f837)])}},{text:n[pe(3600)]("_关闭环绕飞行"),icon:Icon.RotatePointStop,show:function(ye){var ge;return(ge=Te.rotatePoint)===null||ge===void 0?void 0:ge.isStart},callback:function(ye){const ge=pe;Te.rotatePoint&&Te.rotatePoint[ge(2682)]()}},{text:n[pe(3600)]("_移动到此处"),icon:Icon[pe(e._0x54ef6a)],show:function(ye){return Cesium__namespace[pe(he._0x20b997)](ye.cartesian)},callback:function(ye){const ge=pe,ae=Cesium__namespace[ge(2978)].distance(ye.cartesian,n.camera.positionWC)*.1;n.flyToPoint(ye.cartesian,{radius:ae,maximumHeight:n[ge(4233)].positionCartographic.height})}},{text:n.getLangText("_第一视角站到此处"),icon:Icon.FirstPerspective,show:function(ye){return Cesium__namespace.defined(ye.cartesian)},callback:function(ye){const ge=pe;n[ge(4233)][ge(2961)]({destination:addPositionsHeight(ye.cartesian,10),orientation:{heading:n.camera.heading,pitch:0,roll:0},maximumHeight:n.camera.positionCartographic.height})}},{text:n.getLangText("_开启键盘漫游"),icon:Icon.KeyboardRoamYes,show:function(ye){const ge=pe;return!n.keyboardRoam[ge(xe._0x3c2c5e)]},callback:function(ye){n.keyboardRoam.enabled=!![]}},{text:n.getLangText("_关闭键盘漫游"),icon:Icon.KeyboardRoamNo,show:function(ye){const ge=pe;return n[ge(3309)][ge(ce._0xb5f654)]},callback:function(ye){n.keyboardRoam.enabled=![]}},{text:n.getLangText("_跟踪锁定"),icon:Icon[pe(2035)],show:function(ye){const ge=pe,ae=ye.graphic;return ae?ae.entity instanceof Cesium__namespace.Entity?!![]:ae.trackedEntity instanceof Cesium__namespace[ge(te._0x2910a8)]?!![]:![]:![]},callback:function(ye){const ge=pe;n.trackedEntity=ye[ge(2471)]}},{text:n.getLangText("_取消锁定"),icon:Icon[pe(2596)],show:function(ye){return n.trackedEntity!==void 0},callback:function(ye){n.trackedEntity=void 0}}]},{text:n.getLangText("_三维模型"),icon:Icon[pe(e._0x222f67)],show:function(ye){const ge=n.pick3DTileset(ye.cartesian);return Cesium__namespace.defined(ge)},children:[{text:n.getLangText("_显示三角网"),icon:Icon[pe(e._0x312bda)],show:function(ye){const ge=pe,ae=n.pick3DTileset(ye.cartesian);return!ae[ge(2811)]&&ae._enableDebugWireframe},callback:function(ye){const ge=n.pick3DTileset(ye.cartesian);ge.debugWireframe=!![]}},{text:n[pe(e._0x5b4074)]("_关闭三角网"),icon:Icon.TilesetWireframeNo,show:function(ye){const ge=pe,ae=n[ge(3785)](ye[ge(3628)]);return ae.debugWireframe&&ae[ge(2893)]},callback:function(ye){const ge=pe,ae=n[ge(3785)](ye[ge(3628)]);ae.debugWireframe=![]}},{text:n[pe(3600)]("_显示包围盒"),icon:Icon.TilesetBoundingVolumeYes,show:function(ye){return!n.pick3DTileset(ye.cartesian).debugShowBoundingVolume},callback:function(ye){const ge=pe,ae=n.pick3DTileset(ye[ge(ie._0x587ea3)]);ae.debugShowBoundingVolume=!![]}},{text:n[pe(3600)]("_关闭包围盒"),icon:Icon[pe(2912)],show:function(ye){const ge=pe;return n.pick3DTileset(ye[ge(3628)])[ge(2451)]},callback:function(ye){const ge=pe,ae=n.pick3DTileset(ye.cartesian);ae[ge(j._0x2ec303)]=![]}}]},{text:n.getLangText("_地形服务"),icon:Icon[pe(1302)],show:function(ye){const ge=pe;return Cesium__namespace.defined(ye[ge(3628)])},children:[{text:n.getLangText("_开启地形"),icon:Icon.TerrainYes,show:function(ye){return!n.hasTerrain},callback:function(ye){n.hasTerrain=!![]}},{text:n.getLangText(pe(e._0x2cc54f)),icon:Icon[pe(3745)],show:function(ye){return n.hasTerrain},callback:function(ye){n.hasTerrain=![]}},{text:n.getLangText("_显示三角网"),icon:Icon.TerrainWireframeYes,show:function(ye){return!n[pe(744)].globe._surface.tileProvider._debug.wireframe},callback:function(ye){const ge=pe;n.scene.globe._surface[ge(3207)]._debug[ge(3365)]=!![]}},{text:n.getLangText("_关闭三角网"),icon:Icon.TerrainWireframeNo,show:function(ye){return n.scene.globe._surface.tileProvider._debug.wireframe},callback:function(ye){const ge=pe;n[ge(le._0x2f54ac)][ge(1462)]._surface.tileProvider[ge(4345)].wireframe=![]}}]},{text:n[pe(3600)](pe(e._0x3caa87)),icon:Icon.Measure,children:[{text:n[pe(e._0x5b4074)]("_距离"),icon:Icon.MeasureDistance,callback:function(ye){const ge=pe;!Te.measure&&(Te[ge(3607)]=new Measure,n[ge(3820)](Te.measure)),Te.measure[ge(3481)]()}},{text:n.getLangText(pe(2727)),icon:Icon.MeasureArea,callback:function(ye){const ge=pe;!Te.measure&&(Te.measure=new Measure,n.addThing(Te.measure)),Te[ge(q._0x2ed1fa)][ge(q._0x547f5b)]()}},{text:n[pe(3600)]("_高度差"),icon:Icon.MeasureHeight,callback:function(ye){const ge=pe;!Te[ge(J._0x1d9615)]&&(Te.measure=new Measure,n[ge(J._0x5ec0a4)](Te[ge(J._0x1d9615)])),Te.measure[ge(3869)]()}},{text:n.getLangText("_角度"),icon:Icon[pe(e._0x4c2874)],callback:function(ye){const ge=pe;!Te.measure&&(Te.measure=new Measure,n.addThing(Te.measure)),Te.measure[ge(Y._0x1a60e0)]()}},{text:n[pe(e._0x5b4074)](pe(e._0x1a2604)),icon:Icon.Delete,show:function(ye){const ge=pe;return Te.measure&&Te[ge(z._0x5f0bd3)].hasMeasure},callback:function(ye){const ge=pe;Te[ge(3607)]&&Te[ge(3607)].clear()}}]},{text:n.getLangText(pe(4035)),icon:Icon.Draw,children:[{text:n.getLangText("_标记点"),icon:Icon.DrawPoint,callback:function(ye){const ge=pe;n[ge(2954)].startDraw({type:ge(B._0x10b085),style:{pixelSize:12,color:ge(2507)},success:function(ae){const we=ge;console.log(JSON[we(F._0x1a91c8)](ae[we(F._0x12f3c6)]))}})}},{text:n.getLangText("_标记线"),icon:Icon[pe(2527)],callback:function(ye){const ge=pe;n[ge($._0x3fa624)].startDraw({type:ge(553),style:{color:"#55ff33",width:3},success:function(ae){console.log(JSON[ge(1477)](ae.coordinates))}})}},{text:n[pe(3600)]("_标记面"),icon:Icon[pe(e._0x49a3eb)],callback:function(ye){const ge=pe;n[ge(2954)].startDraw({type:ge(k._0x188864),style:{color:ge(k._0x50d7dc),opacity:.5,outline:!![],outlineWidth:2},success:function(ae){console.log(JSON[ge(N._0x1f83ec)](ae.coordinates))}})}},{text:n[pe(e._0x5b4074)](pe(1814)),icon:Icon.DrawCircle,callback:function(ye){const ge={_0x54eeb1:1477},ae=pe;n[ae(2954)].startDraw({type:"circle",style:{color:ae(R._0x374279),opacity:.6},success:function(we){const ke=ae;console[ke(1798)](JSON[ke(ge._0x54eeb1)](we.coordinates))}})}},{text:n.getLangText("_标记矩形"),icon:Icon[pe(e._0xd7fa76)],callback:function(ye){const ge=pe;n[ge(2954)][ge(3194)]({type:"rectangle",style:{color:"#ffff00",opacity:.6},success:function(ae){console.log(JSON.stringify(ae.coordinates))}})}},{text:n[pe(3600)]("_允许编辑"),icon:Icon.DrawEditYes,show:function(ye){const ge=pe;return!n[ge(2954)][ge(3031)]},callback:function(ye){n.graphicLayer.hasEdit=!![]}},{text:n[pe(3600)]("_禁止编辑"),icon:Icon.DrawEditNo,show:function(ye){return n[pe(D._0x3db8f2)].hasEdit},callback:function(ye){const ge=pe;n.graphicLayer[ge(3031)]=![]}},{text:n.getLangText("_导出GeoJSON"),icon:Icon.DrawDownJson,show:function(ye){return n[pe(2954)].length>0},callback:function(ye){const ge=pe;downloadFile("图上标记.json",JSON.stringify(n.graphicLayer[ge(458)]()))}},{text:n.getLangText(pe(e._0x1c7685)),icon:Icon.Delete,show:function(ye){return n.graphicLayer.length>0},callback:function(ye){n.graphicLayer.clear()}}]},{text:n[pe(e._0x1e98c2)](pe(e._0x13a354)),icon:Icon.Effect,children:[{text:n[pe(e._0x5b4074)]("_开启下雨"),icon:Icon.RainEffectYes,show:function(ye){return!Te.rainEffect},callback:function(ye){const ge=pe;!Te.rainEffect&&(Te[ge(M._0x5e7671)]=new RainEffect,n.addEffect(Te[ge(M._0x5e7671)]))}},{text:n[pe(e._0x505cd9)]("_关闭下雨"),icon:Icon[pe(e._0x3ebb2d)],show:function(ye){return Te.rainEffect},callback:function(ye){Te.rainEffect&&(n.removeEffect(Te.rainEffect,!![]),delete Te.rainEffect)}},{text:n.getLangText("_开启下雪"),icon:Icon[pe(e._0x605197)],show:function(ye){return!Te.snowEffect},callback:function(ye){const ge=pe;!Te.snowEffect&&(Te[ge(1328)]=new SnowEffect,n[ge(E._0x114fa3)](Te.snowEffect))}},{text:n.getLangText("_关闭下雪"),icon:Icon.SnowEffectNo,show:function(ye){return Te[pe(1328)]},callback:function(ye){const ge=pe;Te.snowEffect&&(n.removeEffect(Te[ge(L._0x3255e1)],!![]),delete Te[ge(1328)])}},{text:n.getLangText("_开启雾天气"),icon:Icon.FogEffectYes,show:function(ye){return!Te[pe(1813)]},callback:function(ye){const ge=pe;if(!Te[ge(1813)]){const ae=n.camera.positionCartographic.height*2;Te.fogEffect=new FogEffect({fogByDistance:new Cesium__namespace.Cartesian4(.1*ae,.1,ae,.8)}),n[ge(S._0x3802f1)](Te.fogEffect)}}},{text:n.getLangText("_关闭雾天气"),icon:Icon[pe(1331)],show:function(ye){return Te.fogEffect},callback:function(ye){Te.fogEffect&&(n.removeEffect(Te.fogEffect,!![]),delete Te.fogEffect)}},{text:n.getLangText("_开启泛光"),icon:Icon.BloomEffectYes,show:function(ye){return!Te.bloomEffect},callback:function(ye){!Te.bloomEffect&&(Te.bloomEffect=new BloomEffect,n.addEffect(Te.bloomEffect))}},{text:n.getLangText("_关闭泛光"),icon:Icon.BloomEffectNo,show:function(ye){return Te[pe(P._0x4a9ee8)]},callback:function(ye){const ge=pe;Te.bloomEffect&&(n.removeEffect(Te.bloomEffect,!![]),delete Te[ge(3774)])}},{text:n[pe(3600)]("_开启亮度"),icon:Icon.BrightnessEffectYes,show:function(ye){return!Te.brightnessEffect},callback:function(ye){const ge=pe;!Te[ge(C._0x494f17)]&&(Te.brightnessEffect=new BrightnessEffect,n.addEffect(Te[ge(C._0x4346d4)]))}},{text:n.getLangText("_关闭亮度"),icon:Icon[pe(3215)],show:function(ye){return Te[pe(1247)]},callback:function(ye){Te.brightnessEffect&&(n.removeEffect(Te.brightnessEffect,!![]),delete Te.brightnessEffect)}},{text:n.getLangText("_开启夜视"),icon:Icon.NightVisionEffectYes,show:function(ye){return!Te.nightVisionEffect},callback:function(ye){const ge=pe;!Te[ge(b._0x334bb0)]&&(Te[ge(b._0x334bb0)]=new NightVisionEffect,n.addEffect(Te.nightVisionEffect))}},{text:n[pe(e._0x1030c1)]("_关闭夜视"),icon:Icon.NightVisionEffectNo,show:function(ye){return Te.nightVisionEffect},callback:function(ye){const ge=pe;Te.nightVisionEffect&&(n.removeEffect(Te[ge(g._0x34d8c6)],!![]),delete Te.nightVisionEffect)}},{text:n.getLangText("_开启黑白"),icon:Icon[pe(e._0x180fa6)],show:function(ye){return!Te.blackAndWhiteEffect},callback:function(ye){const ge=pe;!Te.blackAndWhiteEffect&&(Te[ge(4085)]=new BlackAndWhiteEffect,n.addEffect(Te.blackAndWhiteEffect))}},{text:n.getLangText(pe(2380)),icon:Icon.BlackAndWhiteEffectNo,show:function(ye){return Te.blackAndWhiteEffect},callback:function(ye){const ge=pe;Te.blackAndWhiteEffect&&(n[ge(3449)](Te[ge(f._0x54fab4)],!![]),delete Te.blackAndWhiteEffect)}},{text:n.getLangText("_开启拾取高亮"),icon:Icon.OutlineEffectYes,show:function(ye){return!Te.outlineEffect},callback:function(ye){const ge=pe;!Te.outlineEffect&&(Te.outlineEffect=new OutlineEffect,n.addEffect(Te[ge(1720)]))}},{text:n.getLangText("_关闭拾取高亮"),icon:Icon.OutlineEffectNo,show:function(ye){return Te[pe(1720)]},callback:function(ye){const ge=pe;Te.outlineEffect&&(n[ge(3449)](Te[ge(1720)],!![]),delete Te.outlineEffect)}}]},{text:n.getLangText("_场景设置"),icon:Icon.Scene,children:[{text:n[pe(e._0x1030c1)](pe(e._0x49c052)),icon:Icon[pe(e._0x5d7604)],show:function(ye){const ge=pe;return!n.scene[ge(d._0x92241c)][ge(d._0x49db59)]},callback:function(ye){const ge=pe;n[ge(l._0x6fba59)][ge(l._0x5ab37e)][ge(2677)]=!![]}},{text:n.getLangText(pe(2289)),icon:Icon.DepthTestNo,show:function(ye){const ge=pe;return n[ge(_._0x49f6c2)].globe[ge(_._0x12e328)]},callback:function(ye){const ge=pe;n.scene.globe[ge(c._0x1b2ff8)]=![]}},{text:n.getLangText("_显示星空背景"),icon:Icon.SkyBoxYes,show:function(ye){return!n[pe(o._0x47e255)].skyBox.show},callback:function(ye){const ge=pe;n[ge(r._0x59edca)].skyBox[ge(r._0x3ed921)]=!![],n.scene.moon.show=!![],n.scene.sun.show=!![]}},{text:n.getLangText(pe(e._0x2bd1ea)),icon:Icon.SkyBoxNo,show:function(ye){return n[pe(744)].skyBox.show},callback:function(ye){const ge=pe;n[ge(744)].skyBox.show=![],n.scene.moon.show=![],n.scene.sun.show=![]}},{text:n.getLangText("_开启日照阴影"),icon:Icon.ShadowYes,show:function(ye){return!n.viewer.shadows},callback:function(ye){const ge=pe;n[ge(s._0xe6bfb4)].shadows=!![],n[ge(3586)].terrainShadows=Cesium__namespace.ShadowMode.ENABLED,n.scene.globe.enableLighting=!![]}},{text:n[pe(3600)]("_关闭日照阴影"),icon:Icon.ShadowNo,show:function(ye){return n.viewer.shadows},callback:function(ye){const ge=pe;n.viewer[ge(955)]=![],n[ge(3586)][ge(4156)]=Cesium__namespace[ge(i._0x5b8fdd)].RECEIVE_ONLY,n.scene.globe[ge(3498)]=![]}},{text:n.getLangText("_开启大气渲染"),icon:Icon.SkyAtmosphereYes,show:function(ye){const ge=pe;return!n[ge(744)].skyAtmosphere[ge(442)]},callback:function(ye){const ge=pe;n.scene.skyAtmosphere.show=!![],n.scene[ge(1462)].showGroundAtmosphere=!![]}},{text:n[pe(3600)]("_关闭大气渲染"),icon:Icon.SkyAtmosphereNo,show:function(ye){const ge=pe;return n.scene[ge(2548)][ge(t._0x3c55c9)]},callback:function(ye){const ge=pe;n[ge(744)].skyAtmosphere[ge(442)]=![],n.scene.globe[ge(760)]=![]}},{text:n.getLangText(pe(1812)),icon:Icon.ExpImage,callback:function(ye){n.expImage()}}]}]}function toChineseBeforeCreate(n){const e={_0x346771:557,_0x49d6b3:649,_0x1f2865:4039},t={_0x52dc9e:3836},i={_0x2b5782:1822};Cesium__namespace.AnimationViewModel.defaultDateFormatter=function(s,r){const o=_0x20dc,c=Cesium__namespace.JulianDate[o(3836)](s);return formatDate(c,o(i._0x2b5782))},Cesium__namespace.AnimationViewModel.defaultTimeFormatter=function(s,r){const o=_0x20dc,c=Cesium__namespace.JulianDate[o(t._0x52dc9e)](s);return formatDate(c,"HH:mm:ss")},Cesium__namespace.Timeline.prototype.makeLabel=function(s){const r=_0x20dc,o=Cesium__namespace.JulianDate.toDate(this._startJulian),c=Cesium__namespace[r(e._0x346771)].toDate(this._endJulian),_=c.getFullYear()-o.getFullYear(),l=c.getMonth()-o.getMonth(),d=c[r(e._0x49d6b3)]()-o.getDate(),f=c.getHours()-o[r(2565)](),g=c.getMinutes()-o.getMinutes(),b=c[r(e._0x1f2865)]()-o.getSeconds(),C=Cesium__namespace[r(557)][r(3836)](s);return _===0?l===0&&d<10?d===0?f===0&&g===0&&b<10?b===0?formatDate(C,"S"):formatDate(C,"HH:mm:ss S"):formatDate(C,"HH:mm:ss"):formatDate(C,"MM月dd日 HH:mm"):formatDate(C,"MM月dd日"):formatDate(C,"yyyy-MM-dd")}}function toChineseCreateEnd(n,e){const t={_0x3d473d:744},i={_0x130cfa:3595},s=_0x3a2b68,r=e.container;e[s(t._0x3d473d)].renderError.addEventListener(function(o,c){_updateDomInnerHtml(r,{"An error occurred while rendering.  Rendering has stopped.":"WebGL发生渲染错误,渲染已经停止,请刷新页面。","Error constructing CesiumWidget.":"构造CesiumWidget时出错"},s(i._0x130cfa))})}function _updateDomInnerHtml(n,e,t){const i=_0x3a2b68,s=n.getElementsByClassName(t);for(let r=0;r<s.length;r++)e[s[r][i(416)]]&&(s[r][i(416)]=e[s[r][i(416)]])}class TraversalDetails{constructor(){this.allAreRenderable=!![],this.anyWereRenderedLastFrame=![],this.notYetRenderableCount=0}}class TraversalQuadDetails{constructor(){const e=_0x3a2b68;this.southwest=new TraversalDetails,this[e(512)]=new TraversalDetails,this.northwest=new TraversalDetails,this.northeast=new TraversalDetails}[_0x3a2b68(374)](e){const t={_0x294984:4115,_0x1dfa8a:2463},i=_0x3a2b68,s=this.southwest,r=this.southeast,o=this[i(t._0x294984)],c=this[i(1430)];e.allAreRenderable=s.allAreRenderable&&r.allAreRenderable&&o[i(t._0x1dfa8a)]&&c[i(2463)],e[i(3230)]=s.anyWereRenderedLastFrame||r.anyWereRenderedLastFrame||o.anyWereRenderedLastFrame||c.anyWereRenderedLastFrame,e.notYetRenderableCount=s.notYetRenderableCount+r.notYetRenderableCount+o[i(2119)]+c.notYetRenderableCount}}function prepareNewTile(n,e,t){const i=_0x3a2b68;for(let s=0,r=t.length;s<r;++s){const o=t.get(s);o[i(442)]&&o._createTileImagerySkeletons(n,e)}}function requestTileGeometry(n,e,t,i){const s=_0x3a2b68;n.primitive=n[s(2671)](e,i.classificationType),n[s(2362)]&&(n.geometryState=Cesium__namespace.TerrainState.RECEIVED,n.primitive.update(t))}function processGeometryStateMachine(n,e,t,i){const s={_0x351670:4051,_0x306c70:835},r=_0x3a2b68;if(!t)return;const o=n[r(1924)];o[r(s._0x351670)]===Cesium__namespace[r(3217)][r(3920)]&&(o[r(4051)]=Cesium__namespace[r(3217)].RECEIVING,requestTileGeometry(o,n.rectangle,i,e)),o.geometryState===Cesium__namespace.TerrainState.RECEIVED&&(o.geometryState=Cesium__namespace.TerrainState[r(s._0x306c70)])}function getMaterial(n,e){const t={_0xfd3240:4323,_0x164be0:407,_0x44cd2f:1145,_0xbff94c:1717,_0x5a525a:3043,_0x120b3b:2687},i=_0x3a2b68,s={u_tileRectangle:new Cesium__namespace.Cartesian4};for(let c=0;c<n;c++)s[i(1166)+c]=Cesium__namespace.Material.DefaultImageId,s["u_textureTranslationAndScale"+c]=new Cesium__namespace.Cartesian4,s["u_textureCoordinateRectangle"+c]=new Cesium__namespace.Cartesian4,s["u_textureUseWebMercatorT"+c]=!![],s[i(t._0xfd3240)+c]=1;const r=e+""+n,o=Cesium__namespace[i(4208)]._materialCache.getMaterial(r);if(!Cesium__namespace[i(t._0x164be0)](o)){const c=`
    vec4 sampleAndBlend(
      vec4 previousColor,
      sampler2D textureToSample,
      vec2 tileTextureCoordinates,
      vec4 textureCoordinateRectangle,
      vec4 textureCoordinateTranslationAndScale,
      float textureAlpha
    ) {
      vec2 alphaMultiplier = step(textureCoordinateRectangle.st, tileTextureCoordinates);
      textureAlpha = textureAlpha * alphaMultiplier.x * alphaMultiplier.y;

      alphaMultiplier = step(vec2(0.0), textureCoordinateRectangle.pq - tileTextureCoordinates);
      textureAlpha = textureAlpha * alphaMultiplier.x * alphaMultiplier.y;

      vec2 translation = textureCoordinateTranslationAndScale.xy;
      vec2 scale = textureCoordinateTranslationAndScale.zw;
      vec2 textureCoordinates = tileTextureCoordinates * scale + translation;
      vec4 value = texture(textureToSample, textureCoordinates);
      vec3 color = value.rgb;
      float alpha = value.a;

      vec4 tempColor = czm_gammaCorrect(vec4(color, alpha));
      color = tempColor.rgb;
      alpha = tempColor.a;

      float sourceAlpha = alpha * textureAlpha;
      float outAlpha = mix(previousColor.a, 1.0, sourceAlpha);
      outAlpha += sign(outAlpha) - 1.0;

      vec3 outColor = mix(previousColor.rgb * previousColor.a, color, sourceAlpha) / outAlpha;

      return vec4(outColor, max(outAlpha, 0.0));
    }
      `;let _=`
    vec4 computeColor(vec4 initialColor, vec3 textureCoordinates)
    {
      vec4 color = initialColor;
    `;for(let d=0;d<n;d++)_+=i(t._0x44cd2f),_+=`
        color,
        u_textures`+d+i(t._0xbff94c)+d+i(2726)+d+i(3517)+d+i(t._0x5a525a)+d+`
      );`;_+=`
      return color;
    }`;const l=`
        #define MaximumLatitude 1.4844222297453322

        float geodeticLatitudeToMercatorAngle(float latitude) {
          latitude = min(latitude, MaximumLatitude);
          latitude = max(latitude, -MaximumLatitude);
          float sinLatitude = sin(latitude);
          return 0.5 * log((1.0 + sinLatitude) / (1.0 - sinLatitude));
        }

        float getMercatorY(vec2 uv, float south, float north) {
          vec2 geographicUV = uv;

          float southMercatorY = geodeticLatitudeToMercatorAngle(south);

          float northMercatorY = geodeticLatitudeToMercatorAngle(north);

          float fraction = mix(south, north, geographicUV.y);
          float mercatorY = geodeticLatitudeToMercatorAngle(fraction);

          float oneOverMercatorHeight = 1.0 / (northMercatorY - southMercatorY);
          float mercatorFraction = (mercatorY - southMercatorY) * oneOverMercatorHeight;
          return mercatorFraction;
        }

        `+c+`

        `+_+i(t._0x120b3b);Cesium__namespace.Material[i(4237)].addMaterial(r,{fabric:{type:r,uniforms:s,source:l}})}return Cesium__namespace[i(4208)][i(1385)](r,s)}class GroundSurfaceTile{constructor(e){const t={_0x405b03:4051,_0x5aa9fd:3920,_0x51a494:4263},i=_0x3a2b68;this.imagery=[],this.primitive=void 0,this.boundingVolumeSourceTile=void 0,this.clippedByBoundaries=![],this[i(t._0x405b03)]=Cesium__namespace.TerrainState[i(t._0x5aa9fd)],this.orientedBoundingBox=Cesium__namespace.OrientedBoundingBox[i(t._0x51a494)](e,0,1e4,Cesium__namespace.Ellipsoid.WGS84),this[i(663)]=new Cesium__namespace.TileBoundingRegion({computeBoundingVolumes:![],rectangle:e,ellipsoid:Cesium__namespace.Ellipsoid.WGS84,minimumHeight:0,maximumHeight:0})}freeResources(){const e={_0x5af300:400},t=_0x3a2b68;this.geometryState=Cesium__namespace.TerrainState.UNLOADED,this.primitive&&this.primitive.destroy(),this.primitive=void 0;const i=this[t(897)];for(let s=0,r=i[t(e._0x5af300)];s<r;++s)i[s].freeResources();this.imagery.length=0}static[_0x3a2b68(1557)](e,t,i){const s={_0x51b77b:498},r=_0x3a2b68;let o=e.data;!Cesium__namespace.defined(o)&&(o=e.data=new GroundSurfaceTile(e[r(1531)])),e[r(498)]===Cesium__namespace.QuadtreeTileLoadState.START&&(prepareNewTile(e,t,i),e[r(s._0x51b77b)]=Cesium__namespace.QuadtreeTileLoadState[r(1939)])}static processStateMachine(e,t,i,s){const r={_0x285ff8:2134},o=_0x3a2b68;GroundSurfaceTile.initialize(e,i,s);const c=e.data,_=c[o(r._0x285ff8)](e,i,t);e[o(498)]===Cesium__namespace.QuadtreeTileLoadState[o(1939)]&&processGeometryStateMachine(e,i,_,t);const l=e.renderable;e.renderable=Cesium__namespace.defined(c.primitive);const d=e.data.geometryState===Cesium__namespace[o(3217)][o(835)];if(e[o(798)]=![],_&&d){const f=e._loadedCallbacks,g={};for(const b in f)f[o(2139)](b)&&!f[b](e)&&(g[b]=f[b]);e._loadedCallbacks=g,e[o(498)]=Cesium__namespace.QuadtreeTileLoadState.DONE}l&&(e[o(3819)]=!![])}[_0x3a2b68(2134)](e,t,i,s){const r={_0x534dd8:407,_0x1f5e7d:498},o=_0x3a2b68,c=e.data;let _=e[o(798)],l=![],d=!![];const f=c[o(897)];let g,b;for(g=0,b=f.length;g<b;++g){const C=f[g];if(!Cesium__namespace[o(407)](C.loadingImagery)){_=![];continue}if(C.loadingImagery.state===Cesium__namespace.ImageryState.PLACEHOLDER){const S=C.loadingImagery.imageryLayer;if(S[o(3287)]){C.freeResources(),f.splice(g,1),S._createTileImagerySkeletons(e,t,g),--g,b=f.length;continue}else _=![]}const P=C[o(2447)](e,i,s);d=d&&P,l=l||P||Cesium__namespace[o(r._0x534dd8)](C.readyImagery),_=_&&Cesium__namespace[o(407)](C.loadingImagery)&&(C.loadingImagery[o(r._0x1f5e7d)]===Cesium__namespace.ImageryState.FAILED||C.loadingImagery.state===Cesium__namespace.ImageryState.INVALID)}return e.upsampledFromParent=_,e.renderable=e.renderable&&(l||d),d}createRectanglePrimitive(e,t){const i=_0x3a2b68;let s=![];return this.imagery.length>0&&(s=this[i(897)][0].useWebMercatorT),new Cesium__namespace.GroundPrimitive({geometryInstances:new Cesium__namespace.GeometryInstance({geometry:new Cesium__namespace.RectangleGeometry({rectangle:e,vertexFormat:Cesium__namespace.VertexFormat.POSITION_AND_ST,height:0,extrudedHeight:2e4})}),appearance:new Cesium__namespace.MaterialAppearance({translucent:![],material:getMaterial(this.imagery.length,s)}),asynchronous:![],classificationType:t})}}function sortTileImageryByLayerIndex(n,e){const t=_0x3a2b68;let i=n.loadingImagery;!Cesium__namespace.defined(i)&&(i=n.readyImagery);let s=e.loadingImagery;return!Cesium__namespace[t(407)](s)&&(s=e.readyImagery),i.imageryLayer._layerIndex-s.imageryLayer._layerIndex}const rectangleIntersectionScratch=new Cesium__namespace.Rectangle,splitCartographicLimitRectangleScratch=new Cesium__namespace[_0x3a2b68(1983)],rectangleCenterScratch=new Cesium__namespace[_0x3a2b68(2228)];function clipRectangleAntimeridian(n,e){const t={_0x14236f:1983,_0x28b2e8:768,_0x2858a0:1878},i=_0x3a2b68;if(e[i(1878)]<e.east)return e;const s=Cesium__namespace.Rectangle.clone(e,splitCartographicLimitRectangleScratch);return Cesium__namespace[i(t._0x14236f)].center(n,rectangleCenterScratch)[i(t._0x28b2e8)]>0?s.east=Cesium__namespace.Math.PI:s[i(t._0x2858a0)]=-Cesium__namespace[i(2806)].PI,s}const readyImageryScratch=[],canRenderTraversalStack=[],tileDirectionScratch=new Cesium__namespace[_0x3a2b68(2978)];function updateTileBoundingRegion(n,e){const t={_0x4d1d01:1924},i=_0x3a2b68;let s=n.data;return s===void 0&&(s=n.data=new GroundSurfaceTile(n.rectangle)),n[i(t._0x4d1d01)].orientedBoundingBox.distanceSquaredTo(e.camera.positionWC)}function getTileReadyCallback(n,e,t){const i={_0x4d4591:400,_0x1ce1f6:2593,_0x212ad1:407};return s=>{const r=_0x20dc;let o,c,_=-1;const l=s.data.imagery,d=l[r(i._0x4d4591)];let f;for(f=0;f<d;++f)if(o=l[f],c=Cesium__namespace.defaultValue(o[r(i._0x1ce1f6)],o[r(2077)]),c.imageryLayer===e){_=f;break}if(_!==-1){const g=_+n;if(o=l[g],c=Cesium__namespace[r(i._0x212ad1)](o)?Cesium__namespace[r(2623)](o.readyImagery,o[r(2077)]):void 0,!Cesium__namespace[r(407)](c)||c.imageryLayer!==e)return!e._createTileImagerySkeletons(s,t,g);for(f=_;f<g;++f)l[f].freeResources();l.splice(_,n)}return!![]}}const scratchCartesian4=new Cesium__namespace.Cartesian4;function updateTileDataRectanglePrimitive(n,e,t){const i={_0x3eb382:407,_0x3df406:2957,_0x42dac6:4323,_0x681e85:654,_0x1c2501:2813},s=_0x3a2b68,r=n[s(1924)],o=r.imagery,c=r[s(2362)],_=c.appearance[s(3793)][s(2949)];let l=![];for(let f=0,g=o.length;f<g;f++){const b=o[f],C=b.readyImagery;if(Cesium__namespace.defined(C)){var d;const P=b.useWebMercatorT?C.textureWebMercator:C.texture;c.appearance[s(3793)][s(3789)]["u_textures"+f]=P,!Cesium__namespace[s(i._0x3eb382)](b[s(4365)])&&(b[s(4365)]=b.imageryLayer._calculateTextureTranslationAndScale(n,b)),Cesium__namespace.Cartesian4.clone(b.textureTranslationAndScale,_["u_textureTranslationAndScale"+f]),Cesium__namespace.Cartesian4[s(i._0x3df406)](b.textureCoordinateRectangle,_["u_textureCoordinateRectangle"+f]),_[s(1402)+f]=b.useWebMercatorT,_[s(i._0x42dac6)+f]=((d=C.imageryLayer)===null||d===void 0?void 0:d.alpha)??1,Cesium__namespace[s(i._0x681e85)].fromElements(n[s(1531)].west,n.rectangle.south,n.rectangle.east,n.rectangle.north,scratchCartesian4),Cesium__namespace.Cartesian4[s(2957)](scratchCartesian4,_[s(i._0x1c2501)]),l=!![]}}l&&(c.classificationType=t,c.update(e))}class GlobeSurfaceTileProvider{constructor(e){const t={_0x379d5e:3727,_0x3687ca:4061,_0x15b959:1042,_0x2d50fb:1761,_0x4bdaf4:3364,_0x4cd5b1:2957,_0x38caa5:2617},i=_0x3a2b68;this[i(t._0x379d5e)]=void 0,this[i(2178)]=new Cesium__namespace.EllipsoidTerrainProvider,this.classificationType=Cesium__namespace[i(t._0x3687ca)].BOTH,this._imageryLayers=e,this[i(960)]=new Cesium__namespace.Event,this._removeLayerAddedListener=this._imageryLayers.layerAdded.addEventListener(GlobeSurfaceTileProvider[i(4390)]._onLayerAdded,this),this._removeLayerRemovedListener=this[i(1613)].layerRemoved.addEventListener(GlobeSurfaceTileProvider.prototype._onLayerRemoved,this),this[i(2658)]=this._imageryLayers.layerMoved.addEventListener(GlobeSurfaceTileProvider.prototype._onLayerMoved,this),this._removeLayerShownListener=this._imageryLayers.layerShownOrHidden.addEventListener(GlobeSurfaceTileProvider[i(4390)]._onLayerShownOrHidden,this),this[i(t._0x15b959)]=new Cesium__namespace.Event,this._layerOrderChanged=![],this._tilesToRenderByTextureCount=[],this._debug={wireframe:![],boundingSphereTile:void 0},this[i(t._0x2d50fb)]=new Cesium__namespace.Color(0,0,.5,1),this._firstPassInitialColor=void 0,this[i(t._0x4bdaf4)]=Cesium__namespace.Rectangle[i(t._0x4cd5b1)](Cesium__namespace.Rectangle[i(t._0x38caa5)])}get[_0x3a2b68(658)](){return this._baseColor}set baseColor(e){const t=_0x3a2b68;this[t(1761)]=e,this._firstPassInitialColor=Cesium__namespace.Cartesian4[t(1382)](e,this[t(1427)])}get quadtree(){return this[_0x3a2b68({_0x636b98:3727}._0x636b98)]}set quadtree(e){this._quadtree=e}get tilingScheme(){const e=_0x3a2b68;if(Cesium__namespace.defined(this._terrainProvider))return this[e(2178)].tilingScheme}get errorEvent(){return this[_0x3a2b68(960)]}get imageryLayersUpdatedEvent(){return this._imageryLayersUpdatedEvent}update(e){this._imageryLayers._update()}initialize(e){const t={_0xf39712:3727},i={_0x103ab6:4105},s=_0x3a2b68;this._imageryLayers.queueReprojectionCommands(e),this[s(605)]&&(this._layerOrderChanged=![],this[s(t._0xf39712)].forEachLoadedTile(r=>{const o=s;r.data.imagery[o(i._0x103ab6)](sortTileImageryByLayerIndex)}))}[_0x3a2b68(4032)](e){const t={_0x4631e3:4086,_0x238e4e:400},i=_0x3a2b68,s=this[i(t._0x4631e3)];for(let r=0,o=s.length;r<o;++r){const c=s[r];Cesium__namespace.defined(c)&&(c[i(t._0x238e4e)]=0)}}endUpdate(e){const t={_0x2273dd:400,_0x517a4d:400},i=_0x3a2b68,s=this._tilesToRenderByTextureCount;for(let r=0,o=s[i(t._0x2273dd)];r<o;++r){const c=s[r];if(Cesium__namespace.defined(c))for(let _=0,l=c[i(t._0x517a4d)];_<l;++_){const d=c[_];d.data.primitive instanceof Cesium__namespace[i(2303)]&&updateTileDataRectanglePrimitive(d,e,this[i(1268)])}}}cancelReprojections(){const e={_0xa9f458:1903},t=_0x3a2b68;this._imageryLayers[t(e._0xa9f458)]()}getLevelMaximumGeometricError(e){const t={_0x47e559:2285},i=_0x3a2b68;return Cesium__namespace.defined(this._terrainProvider)?this._terrainProvider[i(t._0x47e559)](e):0}[_0x3a2b68(1347)](e,t){const i={_0x140ef6:1924,_0x312a1b:4280},s=_0x3a2b68;let r=t.data,o;Cesium__namespace.defined(r)&&(o=r.geometryState),GroundSurfaceTile.processStateMachine(t,e,this._terrainProvider,this._imageryLayers),r=t[s(i._0x140ef6)],o!==t.data.geometryState&&this.computeTileVisibility(t,e,this.quadtree.occluders)!==Cesium__namespace.Visibility[s(i._0x312a1b)]&&r.boundingVolumeSourceTile===t&&GroundSurfaceTile[s(2447)](t,e,this[s(2178)],this[s(1613)])}computeTileVisibility(e,t,i){const s={_0x30c77f:663,_0x289e66:1983,_0x3a79fc:2256,_0x301751:1531,_0x11fcf8:2814,_0x33af4b:1826,_0x394f2d:4280},r=_0x3a2b68,o=this.computeDistanceToTile(e,t);e._distance=o;const c=e.data,_=c[r(s._0x30c77f)];if(c.boundingVolumeSourceTile===void 0)return Cesium__namespace.Visibility.PARTIAL;const l=t[r(2481)];let d=_.boundingVolume;!Cesium__namespace.defined(d)&&(d=_.boundingSphere),c.clippedByBoundaries=![];const f=clipRectangleAntimeridian(e[r(1531)],this.cartographicLimitRectangle),g=Cesium__namespace[r(s._0x289e66)][r(s._0x3a79fc)](f,e.rectangle,rectangleIntersectionScratch);if(!Cesium__namespace[r(407)](g))return Cesium__namespace.Visibility.NONE;if(!Cesium__namespace[r(s._0x289e66)].equals(g,e[r(s._0x301751)])&&(c.clippedByBoundaries=!![]),!Cesium__namespace.defined(d))return Cesium__namespace.Visibility[r(s._0x11fcf8)];let b;const C=l.computeVisibility(d);return C===Cesium__namespace.Intersect[r(486)]?b=Cesium__namespace.Visibility.NONE:C===Cesium__namespace.Intersect[r(2567)]?b=Cesium__namespace[r(1284)].PARTIAL:C===Cesium__namespace[r(1316)][r(s._0x33af4b)]&&(b=Cesium__namespace.Visibility[r(4386)]),b===Cesium__namespace.Visibility[r(s._0x394f2d)],b}[_0x3a2b68(4228)](e){const t=_0x3a2b68;return Cesium__namespace.defined(e.data[t(2362)])?!![]:this._terrainProvider.getTileDataAvailable(e.x*2,e.y*2,e.level+1)!==void 0}canRenderWithoutLosingDetail(e,t){const i={_0x526565:1924,_0x242c37:1613,_0x515185:400,_0x345d49:407,_0x42e43a:1130,_0xdcb09e:4280,_0x41dfba:1130,_0x381b27:986},s=_0x3a2b68,r=e[s(i._0x526565)],o=readyImageryScratch;o[s(400)]=this[s(i._0x242c37)].length;let c=![],_=![],l;Cesium__namespace[s(407)](r)&&(c=r.geometryState===Cesium__namespace.TerrainState.READY,_=!![],l=r.imagery);let d,f;for(d=0,f=o[s(i._0x515185)];d<f;++d)o[d]=_;if(Cesium__namespace[s(i._0x345d49)](l))for(d=0,f=l.length;d<f;++d){const C=l[d],P=C.loadingImagery,S=!Cesium__namespace[s(407)](P)||P.state===Cesium__namespace.ImageryState.FAILED||P.state===Cesium__namespace[s(3651)].INVALID,L=(C.loadingImagery||C.readyImagery).imageryLayer[s(i._0x42e43a)];o[L]=S&&o[L]}const g=this.quadtree._lastSelectionFrameNumber,b=canRenderTraversalStack;for(b.length=0,b.push(e.southwestChild,e.southeastChild,e.northwestChild,e.northeastChild);b.length>0;){const C=b[s(2980)](),P=C._lastSelectionResultFrame===g?C[s(4042)]:Cesium__namespace.TileSelectionResult[s(i._0xdcb09e)];if(P===Cesium__namespace.TileSelectionResult.RENDERED){const S=C[s(1924)];if(!Cesium__namespace[s(407)](S))continue;if(!c&&C[s(1924)][s(4051)]===Cesium__namespace.TerrainState.READY)return![];const L=C.data.imagery;for(d=0,f=L.length;d<f;++d){const E=L[d],M=E.loadingImagery,D=!Cesium__namespace.defined(M)||M.state===Cesium__namespace.ImageryState[s(2930)]||M.state===Cesium__namespace[s(3651)][s(2270)],R=(E[s(2077)]||E.readyImagery).imageryLayer[s(i._0x41dfba)];if(D&&!o[R])return![]}}else P===Cesium__namespace.TileSelectionResult.REFINED&&b.push(C[s(i._0x381b27)],C.southeastChild,C[s(1312)],C.northeastChild)}return!![]}[_0x3a2b68(2986)](e,t){const i={_0x195f54:3056,_0x4ab218:4233,_0x2bc696:440,_0x3986cb:2978,_0x3df773:2701},s=_0x3a2b68,r=e.data;if(r===void 0)return 0;const o=r.tileBoundingRegion[s(i._0x195f54)];if(o===void 0)return 0;const c=t[s(i._0x4ab218)][s(i._0x2bc696)],_=t.camera.directionWC,l=Cesium__namespace.Cartesian3.subtract(o.center,c,tileDirectionScratch),d=Cesium__namespace[s(i._0x3986cb)][s(1527)](l);return d<Cesium__namespace.Math[s(i._0x3df773)]?0:(Cesium__namespace.Cartesian3.divideByScalar(l,d,l),(1-Cesium__namespace.Cartesian3.dot(l,_))*e._distance)}showTileThisFrame(e,t){const i={_0x27ae68:400,_0xb6744b:1156},s=_0x3a2b68;let r=0;const o=e.data.imagery;for(let l=0,d=o[s(i._0x27ae68)];l<d;++l){const f=o[l];Cesium__namespace.defined(f.readyImagery)&&f.readyImagery[s(i._0xb6744b)].alpha!==0&&++r}let c=this._tilesToRenderByTextureCount[r];!Cesium__namespace.defined(c)&&(c=[],this._tilesToRenderByTextureCount[r]=c),c.push(e);const _=this._debug;++_.tilesRendered,_.texturesRendered+=r}computeDistanceToTile(e,t){const i={_0x1a219f:1924},s=_0x3a2b68;return updateTileBoundingRegion(e,t),e[s(i._0x1a219f)][s(663)][s(4020)](t)}isDestroyed(){return![]}destroy(){const e={_0x109a85:2658,_0x7986ef:2658},t=_0x3a2b68;return this._removeLayerAddedListener=this._removeLayerAddedListener&&this._removeLayerAddedListener(),this._removeLayerRemovedListener=this._removeLayerRemovedListener&&this._removeLayerRemovedListener(),this[t(e._0x109a85)]=this._removeLayerMovedListener&&this[t(e._0x7986ef)](),this._removeLayerShownListener=this._removeLayerShownListener&&this._removeLayerShownListener(),Cesium__namespace[t(1944)](this)}_onLayerAdded(e,t){const i={_0x1897d8:2560,_0x29972f:3727,_0x11aa3c:605},s={_0x18c2a6:498,_0x3df168:3273,_0x5220ef:4240,_0x599bc9:3819},r={_0x3d4406:3251},o={_0x2173eb:407},c=_0x3a2b68;if(e.show){const _=this[c(2178)],l=this,d=this._imageryLayersUpdatedEvent,f=function(){const g=c;e[g(r._0x3d4406)]={},l._quadtree.forEachLoadedTile(b=>{const C=g;if(Cesium__namespace[C(o._0x2173eb)](b._loadedCallbacks[e._layerIndex]))return;let P;const S=b.data.imagery,L=S.length;let E=-1,M=0;for(P=0;P<L;++P){const R=S[P];if(Cesium__namespace.defaultValue(R.readyImagery,R.loadingImagery).imageryLayer===e)E===-1&&(E=P),++M;else if(E!==-1)break}if(E===-1)return;const D=E+M;e._createTileImagerySkeletons(b,_,D)&&(b[C(915)][e._layerIndex]=getTileReadyCallback(M,e,_),b.state=Cesium__namespace[C(1228)].LOADING)})};if(e.ready){const g=e[c(i._0x1897d8)];g._reload=f}this[c(i._0x29972f)][c(675)](g=>{const b=c;e._createTileImagerySkeletons(g,_)&&(g[b(s._0x18c2a6)]=Cesium__namespace.QuadtreeTileLoadState.LOADING,g.level!==0&&(g._lastSelectionResultFrame!==l.quadtree[b(3573)]||g._lastSelectionResult!==Cesium__namespace[b(s._0x3df168)][b(s._0x5220ef)])&&(g[b(s._0x599bc9)]=![]))}),this[c(i._0x11aa3c)]=!![],d.raiseEvent()}}_onLayerRemoved(e,t){const i={_0x361962:1456},s={_0x50e570:897,_0x4a9db2:400,_0x4bf1f8:2077},r=_0x3a2b68;this._quadtree.forEachLoadedTile(o=>{const c=_0x20dc,_=o.data[c(s._0x50e570)];let l=-1,d=0;for(let f=0,g=_[c(s._0x4a9db2)];f<g;++f){const b=_[f];let C=b[c(s._0x4bf1f8)];if(!Cesium__namespace.defined(C)&&(C=b.readyImagery),C.imageryLayer===e)l===-1&&(l=f),b.freeResources(),++d;else if(l!==-1)break}l!==-1&&_.splice(l,d)}),Cesium__namespace.defined(e.imageryProvider)&&(e.imageryProvider[r(i._0x361962)]=void 0),this._imageryLayersUpdatedEvent[r(2157)]()}[_0x3a2b68(473)](e,t,i){this._layerOrderChanged=!![],this._imageryLayersUpdatedEvent.raiseEvent()}_onLayerShownOrHidden(e,t,i){i?this._onLayerAdded(e,t):this._onLayerRemoved(e,t)}}const Cartesian3=Cesium__namespace.Cartesian3,defaultValue=Cesium__namespace.defaultValue,defined=Cesium__namespace.defined,getTimestamp=Cesium__namespace.getTimestamp,Matrix4=Cesium__namespace.Matrix4,OrthographicFrustum=Cesium__namespace[_0x3a2b68(2674)],OrthographicOffCenterFrustum=Cesium__namespace.OrthographicOffCenterFrustum,Ray=Cesium__namespace.Ray,Rectangle=Cesium__namespace[_0x3a2b68(1983)],Visibility=Cesium__namespace[_0x3a2b68(1284)],QuadtreeOccluders=Cesium__namespace[_0x3a2b68(1237)],QuadtreeTile=Cesium__namespace.QuadtreeTile,QuadtreeTileLoadState=Cesium__namespace.QuadtreeTileLoadState,SceneMode=Cesium__namespace.SceneMode,TileReplacementQueue=Cesium__namespace.TileReplacementQueue,TileSelectionResult=Cesium__namespace.TileSelectionResult;function clearTileLoadQueue(n){const e={_0x39061:2050},t=_0x3a2b68,i=n._debug;i[t(2411)]=0,i[t(3887)]=0,i.tilesVisited=0,i.tilesCulled=0,i.tilesRendered=0,i.tilesWaitingForChildren=0,n._tileLoadQueueHigh.length=0,n[t(e._0x39061)].length=0,n._tileLoadQueueLow.length=0}function invalidateAllTiles(n){const e={_0x20736e:354,_0x485b42:4198,_0x394de0:1231},t=_0x3a2b68,i=n[t(e._0x20736e)];i[t(e._0x485b42)]=void 0,i.tail=void 0,i[t(2969)]=0,clearTileLoadQueue(n);const s=n._levelZeroTiles;if(defined(s))for(let r=0;r<s.length;++r){const o=s[r],c=o.customData,_=c.length;for(let l=0;l<_;++l){const d=c[l];d.level=0,n._addHeightCallbacks.push(d)}s[r][t(e._0x394de0)]()}n[t(2314)]=void 0,n._tileProvider[t(1903)]()}function updateTileLoadProgress(n,e){const t={_0x59247c:400,_0x42051d:3007,_0xb197b9:1542,_0x3adac3:2773,_0x339f0e:2851,_0x559e30:530,_0x20fe5a:2622,_0x1b443b:3563,_0x80c192:1996,_0x5d1892:3099},i=_0x3a2b68,s=n._tileLoadQueueHigh[i(t._0x59247c)]+n._tileLoadQueueMedium.length+n._tileLoadQueueLow.length;if(s!==n[i(t._0x42051d)]||n._tilesInvalidated){const o=Cesium__namespace.Event.prototype.raiseEvent.bind(n._tileLoadProgressEvent,s);e[i(t._0xb197b9)].push(()=>(o(),!![])),n._lastTileLoadQueueLength=s}const r=n[i(4345)];r.enableDebugOutput&&!r.suspendLodUpdate&&(r[i(2411)]=n[i(2851)][i(t._0x3adac3)]((o,c)=>Math.max(o,c.level),-1),r.tilesRendered=n[i(t._0x339f0e)].length,(r.tilesVisited!==r[i(t._0x559e30)]||r[i(t._0x20fe5a)]!==r.lastTilesRendered||r.tilesCulled!==r[i(t._0x1b443b)]||r.maxDepth!==r.lastMaxDepth||r.tilesWaitingForChildren!==r[i(t._0x80c192)]||r.maxDepthVisited!==r.lastMaxDepthVisited)&&(console[i(1798)](i(1953)+r[i(3769)]+", Rendered: "+r.tilesRendered+", Culled: "+r[i(t._0x5d1892)]+", Max Depth Rendered: "+r.maxDepth+", Max Depth Visited: "+r.maxDepthVisited+", Waiting for children: "+r.tilesWaitingForChildren),r.lastTilesVisited=r.tilesVisited,r.lastTilesRendered=r.tilesRendered,r[i(3563)]=r.tilesCulled,r.lastMaxDepth=r.maxDepth,r[i(1996)]=r[i(4143)],r.lastMaxDepthVisited=r.maxDepthVisited))}let comparisonPoint;const centerScratch=new Cesium__namespace.Cartographic;function compareDistanceToPoint(n,e){const t={_0x241d0f:768,_0x369458:3664},i=_0x3a2b68;let s=Rectangle.center(n.rectangle,centerScratch);const r=s.longitude-comparisonPoint[i(t._0x241d0f)],o=s.latitude-comparisonPoint.latitude;s=Rectangle.center(e.rectangle,centerScratch);const c=s.longitude-comparisonPoint.longitude,_=s[i(t._0x369458)]-comparisonPoint[i(t._0x369458)];return r*r+o*o-(c*c+_*_)}const cameraOriginScratch=new Cartesian3;let rootTraversalDetails=[];function selectTilesForRendering(n,e){const t={_0x37ab2b:400,_0x3af19d:1519,_0x580456:3329,_0x5769ed:3844,_0x163b38:400,_0x1080b3:515,_0x21de66:3404,_0x56bd37:2549,_0x1afa62:354},i=_0x3a2b68,s=n._debug;if(s.suspendLodUpdate)return;const r=n._tilesToRender;r[i(t._0x37ab2b)]=0;let o;const c=n[i(t._0x3af19d)];if(!defined(n[i(2314)])){const L=c.tilingScheme;if(defined(L)){n._levelZeroTiles=QuadtreeTile.createLevelZeroTiles(L);const E=n._levelZeroTiles[i(t._0x37ab2b)];if(rootTraversalDetails.length<E)for(rootTraversalDetails=new Array(E),o=0;o<E;++o)rootTraversalDetails[o]===void 0&&(rootTraversalDetails[o]=new TraversalDetails)}else return}n._occluders.ellipsoid[i(t._0x580456)]=e[i(4233)][i(440)];let _;const l=n._levelZeroTiles,d=l.length>1?n[i(3706)]:void 0;comparisonPoint=e[i(4233)].positionCartographic,l.sort(compareDistanceToPoint);const f=n[i(t._0x5769ed)],g=n._removeHeightCallbacks,b=e.frameNumber;let C;if(f.length>0||g[i(t._0x163b38)]>0){for(o=0,C=l.length;o<C;++o)_=l[o],_._updateCustomData(b,f,g);f[i(400)]=0,g.length=0}const P=e.camera;n[i(1186)]=P.positionCartographic;const S=Matrix4[i(t._0x1080b3)](P.transform,cameraOriginScratch);for(n._cameraReferenceFrameOriginCartographic=n.tileProvider.tilingScheme[i(t._0x21de66)].cartesianToCartographic(S,n[i(t._0x56bd37)]),o=0,C=l.length;o<C;++o)_=l[o],n[i(t._0x1afa62)].markTileRendered(_),_.renderable?visitIfVisible(n,_,c,e,d,![],rootTraversalDetails[o]):(queueTileLoad(n,n._tileLoadQueueHigh,_,e),++s[i(4143)]);n._lastSelectionFrameNumber=b}function queueTileLoad(n,e,t,i){const s={_0x31fcd9:3207},r=_0x3a2b68;t.needsLoading&&(n.tileProvider.computeTileLoadPriority!==void 0&&(t._loadPriority=n[r(s._0x31fcd9)].computeTileLoadPriority(t,i)),e[r(1754)](t))}const traversalQuadsByLevel=new Array(31);for(let n=0;n<traversalQuadsByLevel.length;++n)traversalQuadsByLevel[n]=new TraversalQuadDetails;function visitTile(n,e,t,i,s){const r={_0x41a836:1293,_0x31f219:3573,_0x15811c:2320,_0x442f2d:4042,_0x4777a7:1942,_0x7937c1:2050,_0x1f9720:2463,_0x16a1d3:4240,_0x538b94:2320,_0x21aa6b:581,_0x59a7ea:2851,_0x1869e8:400,_0x3fa908:2119,_0x36688e:2851,_0x256175:3924,_0x14f668:2050,_0x33f541:3167,_0x3a4e46:3819,_0x2e87c3:2463},o=_0x3a2b68,c=n[o(4345)];++c.tilesVisited,n._tileReplacementQueue[o(r._0x41a836)](t),t._updateCustomData(e.frameNumber),t.level>c.maxDepthVisited&&(c[o(3887)]=t.level);const _=screenSpaceError(n,e,t)<n.maximumScreenSpaceError,l=t.southwestChild,d=t.southeastChild,f=t.northwestChild,g=t[o(3323)],b=n[o(r._0x31f219)],C=t[o(r._0x15811c)]===b?t[o(r._0x442f2d)]:TileSelectionResult.NONE,P=n.tileProvider;if(_||i){const S=TileSelectionResult.originalResult(C)===TileSelectionResult.RENDERED,L=TileSelectionResult.originalResult(C)===TileSelectionResult[o(2272)]||C===TileSelectionResult.NONE,E=t.state===QuadtreeTileLoadState.DONE;let M=S||L||E;if(!M&&defined(P.canRenderWithoutLosingDetail)&&(M=P[o(r._0x4777a7)](t)),M){_&&queueTileLoad(n,n[o(r._0x7937c1)],t,e),addTileToRenderList(n,t),s[o(2463)]=t.renderable,s[o(3230)]=C===TileSelectionResult[o(4240)],s.notYetRenderableCount=t.renderable?0:1,t[o(r._0x15811c)]=e.frameNumber,t[o(r._0x442f2d)]=TileSelectionResult.RENDERED,!s.anyWereRenderedLastFrame&&n._tileToUpdateHeights.push(t);return}i=!![],_&&queueTileLoad(n,n._tileLoadQueueHigh,t,e)}if(P.canRefine(t)){if(l[o(798)]&&d[o(798)]&&f.upsampledFromParent&&g.upsampledFromParent){addTileToRenderList(n,t),queueTileLoad(n,n._tileLoadQueueMedium,t,e),n._tileReplacementQueue[o(1293)](l),n[o(354)].markTileRendered(d),n._tileReplacementQueue.markTileRendered(f),n._tileReplacementQueue.markTileRendered(g),s[o(r._0x1f9720)]=t.renderable,s[o(3230)]=C===TileSelectionResult[o(r._0x16a1d3)],s[o(2119)]=t[o(3819)]?0:1,t[o(r._0x538b94)]=e.frameNumber,t._lastSelectionResult=TileSelectionResult.RENDERED,!s.anyWereRenderedLastFrame&&n._tileToUpdateHeights.push(t);return}t._lastSelectionResultFrame=e[o(3691)],t._lastSelectionResult=TileSelectionResult[o(r._0x21aa6b)];const L=n[o(r._0x59a7ea)].length,E=n._tileLoadQueueLow[o(r._0x1869e8)],M=n._tileLoadQueueMedium.length,D=n._tileLoadQueueHigh.length,R=n._tileToUpdateHeights.length;if(visitVisibleChildrenNearToFar(n,l,d,f,g,e,i,s),L!==n[o(2851)][o(400)]){const k=s.allAreRenderable,N=s.anyWereRenderedLastFrame,$=s[o(r._0x3fa908)];let B=![];if(!k&&!N){const F=n._tilesToRender;for(let Y=L;Y<F.length;++Y){let J=F[Y];for(;J!==void 0&&J[o(4042)]!==TileSelectionResult.KICKED&&J!==t;)J._lastSelectionResult=TileSelectionResult[o(4268)](J[o(r._0x442f2d)]),J=J.parent}n[o(r._0x36688e)][o(400)]=L,n[o(r._0x256175)].length=R,addTileToRenderList(n,t),t._lastSelectionResult=TileSelectionResult.RENDERED;const z=C===TileSelectionResult.RENDERED;!z&&$>n[o(1533)]&&(n._tileLoadQueueLow.length=E,n[o(r._0x14f668)][o(400)]=M,n[o(r._0x33f541)].length=D,queueTileLoad(n,n[o(2050)],t,e),s.notYetRenderableCount=t[o(r._0x3a4e46)]?0:1,B=!![]),s.allAreRenderable=t.renderable,s.anyWereRenderedLastFrame=z,!z&&n._tileToUpdateHeights.push(t),++c.tilesWaitingForChildren}n.preloadAncestors&&!B&&queueTileLoad(n,n._tileLoadQueueLow,t,e)}return}t._lastSelectionResultFrame=e[o(3691)],t._lastSelectionResult=TileSelectionResult[o(r._0x16a1d3)],addTileToRenderList(n,t),queueTileLoad(n,n._tileLoadQueueHigh,t,e),s[o(r._0x2e87c3)]=t.renderable,s.anyWereRenderedLastFrame=C===TileSelectionResult.RENDERED,s[o(2119)]=t.renderable?0:1}function visitVisibleChildrenNearToFar(n,e,t,i,s,r,o,c){const _={_0x157c7c:2863,_0x4dc310:3269},l=_0x3a2b68,d=r.camera[l(_._0x157c7c)],f=n._tileProvider,g=n[l(3706)],b=traversalQuadsByLevel[e.level],C=b[l(_._0x4dc310)],P=b.southeast,S=b.northwest,L=b[l(1430)];d.longitude<e[l(1531)][l(962)]?d.latitude<e[l(1531)].north?(visitIfVisible(n,e,f,r,g,o,C),visitIfVisible(n,t,f,r,g,o,P),visitIfVisible(n,i,f,r,g,o,S),visitIfVisible(n,s,f,r,g,o,L)):(visitIfVisible(n,i,f,r,g,o,S),visitIfVisible(n,e,f,r,g,o,C),visitIfVisible(n,s,f,r,g,o,L),visitIfVisible(n,t,f,r,g,o,P)):d.latitude<e.rectangle.north?(visitIfVisible(n,t,f,r,g,o,P),visitIfVisible(n,e,f,r,g,o,C),visitIfVisible(n,s,f,r,g,o,L),visitIfVisible(n,i,f,r,g,o,S)):(visitIfVisible(n,s,f,r,g,o,L),visitIfVisible(n,i,f,r,g,o,S),visitIfVisible(n,t,f,r,g,o,P),visitIfVisible(n,e,f,r,g,o,C)),b.combine(c)}function containsNeededPosition(n,e){const t={_0x1b1bee:1012},i=_0x3a2b68,s=e.rectangle;return defined(n._cameraPositionCartographic)&&Rectangle[i(t._0x1b1bee)](s,n._cameraPositionCartographic)||defined(n._cameraReferenceFrameOriginCartographic)&&Rectangle[i(t._0x1b1bee)](s,n._cameraReferenceFrameOriginCartographic)}function visitIfVisible(n,e,t,i,s,r,o){const c={_0x85c3b6:691,_0x449cf8:3924,_0x51cd62:4042,_0x560196:2272},_=_0x3a2b68;if(t[_(c._0x85c3b6)](e,i,s)!==Visibility.NONE)return visitTile(n,i,e,r,o);if(++n[_(4345)].tilesCulled,n._tileReplacementQueue.markTileRendered(e),o.allAreRenderable=!![],o[_(3230)]=![],o.notYetRenderableCount=0,containsNeededPosition(n,e)){(!defined(e.data)||!defined(e.data.vertexArray))&&queueTileLoad(n,n._tileLoadQueueMedium,e,i);const l=n._lastSelectionFrameNumber,d=e._lastSelectionResultFrame===l?e._lastSelectionResult:TileSelectionResult.NONE;d!==TileSelectionResult.CULLED_BUT_NEEDED&&d!==TileSelectionResult[_(4240)]&&n[_(c._0x449cf8)].push(e),e._lastSelectionResult=TileSelectionResult.CULLED_BUT_NEEDED}else n[_(3162)]||e.level===0?(queueTileLoad(n,n._tileLoadQueueLow,e,i),e[_(c._0x51cd62)]=TileSelectionResult[_(c._0x560196)]):e._lastSelectionResult=TileSelectionResult[_(c._0x560196)];e._lastSelectionResultFrame=i.frameNumber}function screenSpaceError(n,e,t){const i={_0x282950:4233,_0x5eb1ba:3569,_0x4595e1:817,_0x38a4b6:3497,_0x5ff6ff:3829},s=_0x3a2b68;if(e[s(1640)]===SceneMode.SCENE2D||e[s(4233)].frustum instanceof OrthographicFrustum||e.camera.frustum instanceof OrthographicOffCenterFrustum)return screenSpaceError2D(n,e,t);const r=n[s(1519)][s(2285)](t.level),o=t[s(3847)],c=e.context.drawingBufferHeight,_=e[s(i._0x282950)][s(i._0x5eb1ba)][s(i._0x4595e1)];let l=r*c/(o*_);return e[s(3497)].enabled&&(l-=Cesium__namespace.Math[s(i._0x38a4b6)](o,e.fog[s(i._0x5ff6ff)])*e.fog.sse),l/=e[s(985)],l}function screenSpaceError2D(n,e,t){const i={_0x3c8dee:4233,_0xdf10ce:3497,_0x26733a:985},s=_0x3a2b68;let o=e[s(i._0x3c8dee)].frustum;const c=o.offCenterFrustum;defined(c)&&(o=c);const _=e.context,l=_.drawingBufferWidth,d=_[s(3776)],f=n._tileProvider.getLevelMaximumGeometricError(t.level),g=Math.max(o[s(901)]-o[s(454)],o.right-o.left)/Math.max(l,d);let b=f/g;return e.fog.enabled&&e.mode!==SceneMode.SCENE2D&&(b-=Cesium__namespace.Math[s(i._0xdf10ce)](t._distance,e.fog.density)*e.fog.sse),b/=e[s(i._0x26733a)],b}function addTileToRenderList(n,e){n._tilesToRender.push(e)}function processTileLoadQueue(n,e){const t={_0x40a956:3500},i=_0x3a2b68,s=n[i(3167)],r=n[i(2050)],o=n[i(4214)];if(s.length===0&&r.length===0&&o.length===0)return;n._tileReplacementQueue[i(t._0x40a956)](n.tileCacheSize);const c=getTimestamp()+n._loadQueueTimeSlice,_=n._tileProvider;let l=processSinglePriorityLoadQueue(n,e,_,c,s,![]);l=processSinglePriorityLoadQueue(n,e,_,c,r,l),processSinglePriorityLoadQueue(n,e,_,c,o,l)}function sortByLoadPriority(n,e){return n._loadPriority-e._loadPriority}function processSinglePriorityLoadQueue(n,e,t,i,s,r){const o={_0x5e337a:2986},c=_0x3a2b68;t[c(o._0x5e337a)]!==void 0&&s.sort(sortByLoadPriority);for(let _=0,l=s.length;_<l&&(getTimestamp()<i||!r);++_){const d=s[_];n[c(354)][c(1293)](d),t.loadTile(e,d),r=!![]}return r}const scratchRay=new Ray,scratchCartographic=new Cesium__namespace.Cartographic,scratchPosition=new Cartesian3,scratchArray=[];function updateHeights(n,e){const t={_0xe7d36c:4042,_0x56ba27:1754,_0x30fd91:1096,_0x3c9583:1621,_0x37131b:1924,_0x1cdbd2:2863,_0x14da09:1250,_0x200fe9:663,_0xfa12ae:2957,_0x2272df:400},i=_0x3a2b68;if(!defined(n.tileProvider.tilingScheme))return;const s=scratchArray;s.length=0;const r=n._tileToUpdateHeights,o=getTimestamp(),c=n._updateHeightsTimeSlice,_=o+c,l=e.mode,d=e.mapProjection,f=n.tileProvider[i(1004)].ellipsoid;let g;for(;r.length>0;){const b=r[0];if(!defined(b.data)||!defined(b.data.mesh)){const L=b._lastSelectionResultFrame===n[i(3573)]?b[i(t._0xe7d36c)]:TileSelectionResult[i(4280)];(L===TileSelectionResult.RENDERED||L===TileSelectionResult.CULLED_BUT_NEEDED)&&s[i(t._0x56ba27)](b),r[i(t._0x30fd91)](),n._lastTileIndex=0;continue}const C=b.customData,P=C.length;let S=![];for(g=n[i(t._0x3c9583)];g<P;++g){const L=C[g],E=b[i(t._0x37131b)][i(3092)],M=defined(E)&&E.wasCreatedByUpsampling();if(b.level>L[i(1800)]&&!M){if(!defined(L.positionOnEllipsoidSurface)&&(L.positionOnEllipsoidSurface=Cartesian3[i(1339)](L[i(t._0x1cdbd2)].longitude,L[i(t._0x1cdbd2)].latitude,0,f)),l===SceneMode[i(t._0x14da09)]){const R=f[i(2778)](L[i(1285)],scratchRay[i(3763)]),k=f.getSurfaceNormalIntersectionWithZAxis(L.positionOnEllipsoidSurface,11500,scratchRay.origin);if(!defined(k)){let N=0;defined(b.data[i(t._0x200fe9)])&&(N=b.data.tileBoundingRegion.minimumHeight);const $=Math.min(N,-11500),B=Cartesian3.multiplyByScalar(R,Math.abs($)+1,scratchPosition);Cartesian3[i(3420)](L[i(1285)],B,scratchRay.origin)}}else Cesium__namespace[i(2228)].clone(L.positionCartographic,scratchCartographic),scratchCartographic[i(4241)]=-11500,d.project(scratchCartographic,scratchPosition),Cartesian3.fromElements(scratchPosition.z,scratchPosition.x,scratchPosition.y,scratchPosition),Cartesian3[i(t._0xfa12ae)](scratchPosition,scratchRay.origin),Cartesian3.clone(Cartesian3.UNIT_X,scratchRay.direction);const D=b.data.pick(scratchRay,l,d,![],scratchPosition);defined(D)&&(defined(L.callback)&&L[i(2767)](D),L.level=b.level)}if(getTimestamp()>=_){S=!![];break}}if(S){n._lastTileIndex=g;break}else n[i(1621)]=0,r.shift()}for(g=0;g<s[i(t._0x2272df)];g++)r[i(1754)](s[g])}function createRenderCommandsForSelectedTiles(n,e){const t={_0x242fab:2851,_0x2bd296:400},i=_0x3a2b68,s=n._tileProvider,r=n[i(t._0x242fab)];for(let o=0,c=r[i(t._0x2bd296)];o<c;++o){const _=r[o];s.showTileThisFrame(_,e)}}class QuadtreePrimitive{constructor(e){const t={_0x4ae565:1519,_0x162756:2243,_0x5f02c3:1519,_0x586aa5:2050,_0x3b0407:4214,_0x204043:1564},i={_0x471e09:451},s=_0x3a2b68;this._tileProvider=new GlobeSurfaceTileProvider(e[s(3011)]),this[s(t._0x4ae565)].quadtree=this,this[s(1519)][s(t._0x162756)].addEventListener(()=>{this._tilesInvalidated=!![]}),this._debug={enableDebugOutput:![],maxDepth:0,maxDepthVisited:0,tilesVisited:0,tilesCulled:0,tilesRendered:0,tilesWaitingForChildren:0,lastMaxDepth:-1,lastMaxDepthVisited:-1,lastTilesVisited:-1,lastTilesCulled:-1,lastTilesRendered:-1,lastTilesWaitingForChildren:-1,suspendLodUpdate:![]};const r=this[s(t._0x5f02c3)].tilingScheme,o=r[s(3404)];this._tilesToRender=[],this[s(3167)]=[],this[s(t._0x586aa5)]=[],this[s(t._0x3b0407)]=[],this._tileReplacementQueue=new TileReplacementQueue,this._levelZeroTiles=void 0,this._loadQueueTimeSlice=5,this[s(4329)]=![],this._addHeightCallbacks=[],this[s(1342)]=[],this._tileToUpdateHeights=[],this._lastTileIndex=0,this[s(996)]=2,this[s(1186)]=void 0,this[s(2549)]=void 0,this[s(t._0x204043)]=defaultValue(e.maximumScreenSpaceError,2),this.tileCacheSize=defaultValue(e.tileCacheSize,100),this.loadingDescendantLimit=20,this.preloadAncestors=!![],this.preloadSiblings=![],this._occluders=new QuadtreeOccluders({ellipsoid:o}),this._tileLoadProgressEvent=new Cesium__namespace.Event,this._lastTileLoadQueueLength=0,this._lastSelectionFrameNumber=void 0,this.isReady=![],Cesium__namespace.ApproximateTerrainHeights[s(2620)]?this.isReady=!![]:Cesium__namespace[s(2303)].initializeTerrainHeights().then(()=>{const c=s;this[c(i._0x471e09)]=!![]})}get[_0x3a2b68(3207)](){return this._tileProvider}get tileLoadProgressEvent(){return this._tileLoadProgressEvent}get occluders(){return this._occluders}get classificationType(){return this[_0x3a2b68(1519)].classificationType}set classificationType(e){this._tileProvider.classificationType=e}invalidateAllTiles(){this._tilesInvalidated=!![]}forEachLoadedTile(e){const t={_0x1fb891:2743},i=_0x3a2b68;let s=this[i(354)].head;for(;defined(s);)s.state!==QuadtreeTileLoadState.START&&e(s),s=s[i(t._0x1fb891)]}prePassesUpdate(e){const t={_0x27de81:4359,_0x2ce375:1234},i=_0x3a2b68;!this.isReady||(defined(this[i(1519)][i(3396)])&&this._tileProvider.update(e),!e.passes[i(t._0x27de81)])||(this._tilesInvalidated&&(invalidateAllTiles(this),this._tilesInvalidated=![]),this._tileProvider[i(1557)](e),clearTileLoadQueue(this),!this._debug[i(2998)]&&this._tileReplacementQueue[i(t._0x2ce375)]())}[_0x3a2b68(3396)](e){const t={_0x212b3a:2002},i=_0x3a2b68;if(!this.isReady)return;const s=e.passes,r=this._tileProvider;s.render&&(r.beginUpdate(e),selectTilesForRendering(this,e),createRenderCommandsForSelectedTiles(this,e),r[i(t._0x212b3a)](e))}[_0x3a2b68(1038)](e){const t={_0x324182:2651},i=_0x3a2b68;!this.isReady||!e[i(t._0x324182)].render||e.mode===SceneMode.MORPHING||(processTileLoadQueue(this,e),updateHeights(this,e),updateTileLoadProgress(this,e))}isDestroyed(){return![]}destroy(){const e={_0x1dae80:2619},t=_0x3a2b68;this._tileProvider=this._tileProvider&&this._tileProvider[t(e._0x1dae80)]()}}const DefaultOptions={animation:![],timeline:![],fullscreenButton:![],vrButton:![],geocoder:![],sceneModePicker:![],homeButton:![],navigationHelpButton:![],navigationInstructionsInitiallyVisible:![],infoBox:![],selectionIndicator:![],shouldAnimate:!![],showRenderLoopErrors:!![],baseLayerPicker:![],requestRenderMode:![]};class Map extends BaseClass{constructor(e,t={}){const i={_0x15e646:3857,_0x1505e7:3453,_0x3a7b87:919,_0xaa45bc:800},s=_0x3a2b68;super(t),this.options=t,this[s(1590)]=0,this._controls={},this[s(4265)]={},t.token&&updateAll(t[s(4207)]),t[s(3857)]=t[s(3857)]??LangType.ZH,(t[s(i._0x15e646)]===LangType.ZH||t.lang===LangType.ZHHK)&&toChineseBeforeCreate(),initBeforeCreateDefaultValue(t),e instanceof Cesium__namespace[s(2766)]?this[s(i._0x1505e7)]=e:this._createViewer(e,t),this._isFlyAnimation=![],this._highlightEnabled=!![],this._controlList=new MarsArray,this[s(2542)]=new MarsArray,this._layerList=new MarsArray,this._optionsBasemapsList=new MarsArray,this._optionsLayersList=new MarsArray,this.chinaCRS=this.options[s(i._0x3a7b87)]||ChinaCRS[s(1859)],(t.lang===LangType.ZH||t.lang===LangType.ZHHK)&&toChineseCreateEnd(t,this._viewer),this[s(3942)]=new SceneEvent(this),this._mouseEvent=new MouseEvent(this,t.mouse),this[s(i._0xaa45bc)]=new SceneOption(this),this._zoomNavigation=new ZoomNavigation(this._viewer),this._initLayers(),this._initControls(),this._initEffect(),this._sceneOption.setOptions(this.options.scene,this.options.scene)}get[_0x3a2b68(3586)](){return this._viewer}get[_0x3a2b68(527)](){const e={_0x1343ad:527},t=_0x3a2b68;return this[t(3453)][t(e._0x1343ad)]}get[_0x3a2b68(1010)](){return this._viewer._toolbar}get canvas(){const e={_0x3133e3:3453},t=_0x3a2b68;var i;return(i=this[t(e._0x3133e3)])===null||i===void 0?void 0:i[t(744)][t(679)]}get[_0x3a2b68(744)](){const e={_0x28de84:3453},t=_0x3a2b68;var i;return(i=this[t(e._0x28de84)])===null||i===void 0?void 0:i.scene}get camera(){return this[_0x3a2b68(3453)].camera}get[_0x3a2b68(3011)](){const e=_0x3a2b68;return this._viewer[e(3011)]}get dataSources(){const e=_0x3a2b68;return this._viewer[e(2160)]}get entities(){return this._viewer.entities}get clock(){return this._viewer.clock}get currentTime(){const e={_0x10ca01:2257,_0xa37dd4:545},t=_0x3a2b68;return this._viewer[t(e._0x10ca01)][t(e._0xa37dd4)]}set currentTime(e){this._viewer.clock.currentTime=e}get cesiumWidget(){return this._viewer.cesiumWidget}get trackedEntity(){const e=_0x3a2b68;return this._viewer[e(3428)]}set trackedEntity(e){const t={_0xec3797:3764,_0x7b0940:3453,_0x209490:3428},i=_0x3a2b68;e?e instanceof Cesium__namespace.Entity?this._viewer.trackedEntity=e:e[i(t._0xec3797)]instanceof Cesium__namespace.Entity?this._viewer[i(3428)]=e.entity:e.czmObject instanceof Cesium__namespace.Entity?this[i(t._0x7b0940)].trackedEntity=e.czmObject:e.trackedEntity instanceof Cesium__namespace[i(3060)]&&(this[i(3453)][i(t._0x209490)]=e.trackedEntity):this._viewer.trackedEntity=void 0}get terrainProvider(){const e=_0x3a2b68;return this._viewer[e(2531)]}set terrainProvider(e){this._updateTerrainProvider(e)}async _updateTerrainProvider(e){const t={_0x2c6380:4193,_0x30b80c:3453,_0x457c1c:1109},i=_0x3a2b68;try{if(this._terrainProviderIndex++,e&&e.then){this[i(3453)].scene._terrainProviderPromise=e;const s=this._terrainProviderIndex;if(e=await e,delete this._viewer.scene[i(t._0x2c6380)],s!==this._terrainProviderIndex)return}this[i(t._0x30b80c)].terrainProvider=e,this._defaultTerrainProvider=e,this[i(t._0x457c1c)](EventType.terrainLoadSuccess,{terrain:e})}catch(s){this.fire(EventType.terrainLoadError,{error:s})}}get[_0x3a2b68(2213)](){return!(this._viewer.terrainProvider instanceof Cesium__namespace.EllipsoidTerrainProvider)}set[_0x3a2b68(2213)](e){const t={_0x2ccb6d:2531,_0x31ecf8:3389},i=_0x3a2b68;e?this._defaultTerrainProvider==null?this.terrainProvider=createTerrainProvider(this[i(2779)]()):(this._terrainProviderIndex++,this._viewer[i(t._0x2ccb6d)]=this[i(t._0x31ecf8)]):(this._terrainProviderIndex++,this._viewer.terrainProvider=getNoTerrainProvider(),this.fire(EventType.terrainLoadSuccess))}get basemap(){const e={_0x5b6e9d:3453,_0xf70c77:1291},t=_0x3a2b68,i=this._optionsBasemapsList.values;if(i[t(400)]===0)return this[t(e._0x5b6e9d)][t(e._0xf70c77)]?this[t(3453)][t(1291)].viewModel.selectedImagery:void 0;for(let s=0;s<i.length;s++){const r=i[s];if(!r.hasEmptyGroup&&r[t(4326)])return r}}set basemap(e){const t={_0x3f8258:1291,_0x13ae2c:3095,_0x381dc8:400,_0x6fe383:1941,_0xc91450:2864,_0x1a61e9:3307,_0xf351e0:4389,_0x15286b:442},i=_0x3a2b68;let s,r;e&&isObject(e)?(s=e.id,r=e[i(3307)]):(s=e,r=e);const o=this._optionsBasemapsList.values;if(o.length===0){if(this._viewer[i(t._0x3f8258)]){const c=this._viewer[i(t._0x3f8258)][i(t._0x13ae2c)];let _;if(e){let l,d=-1;for(let f=0;f<this[i(1941)][i(3253)][i(t._0x381dc8)];f++){const g=this[i(t._0x6fe383)].basemaps[f];if(!(g.type==="group"&&g[i(t._0xc91450)]==null)&&(d++,r==g.name||s==g.id)){l=d;break}}Cesium__namespace.defined(l)&&(_=c.imageryProviderViewModels[l])}c.selectedImagery=_,this[i(1109)](EventType.changeBasemap,{layer:_})}return}for(let c=0;c<o[i(t._0x381dc8)];c++){const _=o[c];_.hasEmptyGroup||(r==_[i(t._0x1a61e9)]||s==_.id?!_.isAdded&&(_.options.show=!![],this[i(4243)](_)[i(t._0xf351e0)](l=>{_.toBottom&&_.toBottom(),this.fire(EventType.changeBasemap,{layer:l})})):_.isAdded&&(delete _[i(1941)][i(t._0x15286b)],this.removeLayer(_)))}}get onlyPickModelPosition(){const e=_0x3a2b68;var t;return(t=this[e(3453)])===null||t===void 0?void 0:t.scene.onlyPickModelPosition}set onlyPickModelPosition(e){const t={_0x390710:1881},i=_0x3a2b68;this._viewer.scene[i(t._0x390710)]=e}get onlyPickTerrainPosition(){const e=_0x3a2b68;var t;return(t=this._viewer)===null||t===void 0?void 0:t.scene[e(2480)]}set onlyPickTerrainPosition(e){const t={_0x585f4e:3453},i=_0x3a2b68;this[i(t._0x585f4e)].scene.onlyPickTerrainPosition=e}get mouseEvent(){return this._mouseEvent}get[_0x3a2b68(676)](){return this._popupMgr}get[_0x3a2b68(951)](){return this._tooltipMgr}get smallTooltip(){return this._smallTooltip}get contextmenu(){return this._contextmenuMgr}get keyboardRoam(){return this[_0x3a2b68(4373)]}get controls(){return this._controls}get[_0x3a2b68(1685)](){return this[_0x3a2b68({_0x34c42a:4265}._0x34c42a)]}get graphicLayer(){const e={_0x583b2e:2505},t=_0x3a2b68;return this[t(e._0x583b2e)]==null&&(this._graphicLayer=new GraphicLayer({name:"默认数据图层",private:!![]}),this.addLayer(this[t(2505)])),this._graphicLayer}get level(){const e={_0x232b23:4241,_0x48b7e1:2477,_0x2a1ada:3395},t=_0x3a2b68,i=Math.abs(this._viewer.camera.positionCartographic[t(e._0x232b23)]);return i===this[t(e._0x48b7e1)]?this[t(3395)]:(this[t(3395)]=heightToZoom(i),this._prevCameraHeight=i,this[t(e._0x2a1ada)])}get fixedLight(){return this[_0x3a2b68(1032)]}set fixedLight(e){if(this._fixedLight=e,!this._sunlight&&(this._sunlight=this.scene.light),e){const t=new Cesium__namespace.DirectionalLight({direction:new Cesium__namespace.Cartesian3(.35492591601301104,-.8909182691839401,-.2833588392420772)});this.scene.light=t}else this.scene.light=this._sunlight}get[_0x3a2b68(3857)](){const e=_0x3a2b68;return this.options[e(3857)]||LangType.ZH}set[_0x3a2b68(3857)](e){this.options.lang=e}get zoomFactor(){const e=_0x3a2b68;return this.scene[e(3928)]._zoomFactor}set zoomFactor(e){const t={_0x1b42da:744,_0x460381:1715},i=_0x3a2b68;this[i(t._0x1b42da)].screenSpaceCameraController[i(t._0x460381)]=e}get highlightEnabled(){return this._highlightEnabled}set[_0x3a2b68(3351)](e){const t={_0x42ff65:2962},i=_0x3a2b68;this._highlightEnabled=e,!e&&this[i(t._0x42ff65)]()}get imageryLayersForClamp(){const e={_0x53c5ab:3515,_0x21f824:744},t=_0x3a2b68;if(!this._imageryLayersForClamp){this._imageryLayersForClamp=new Cesium__namespace[t(e._0x53c5ab)];const i=new QuadtreePrimitive({imageryLayers:this._imageryLayersForClamp});this[t(e._0x21f824)][t(3326)].add(i)}return this._imageryLayersForClamp}_createViewer(e,t){const i={_0x41c0c8:2732,_0x19dc65:3173,_0x3ff0c5:2221,_0xcfd1a6:3404,_0x24705b:1462,_0xa1e628:407,_0x889abb:3020,_0x30aed8:1933,_0x13c8b6:3020,_0x2ff55e:2467,_0x4e6b27:3744,_0xea3976:1299,_0x45d951:1116,_0xeecc4e:1299,_0x385be5:443,_0x50579a:3109,_0x46dadd:2560,_0x4f45ef:2531,_0x1a2016:400},s=_0x3a2b68;if(!e)throw new Error(s(2795));const r={...DefaultOptions,...t[s(i._0x41c0c8)],...t[s(744)],baseLayerPicker:![],timeline:![]};if(r.globe&&!(r.globe instanceof Cesium__namespace.Globe)&&delete r[s(1462)],r[s(3025)]&&delete r.cameraController,r.contextmenu&&delete r.contextmenu,r.location&&delete r.location,r.mouseDownView&&delete r[s(3613)],r.navigation&&delete r.navigation,Cesium__namespace.defined(r.mapProjection)&&(r[s(i._0x19dc65)]===CRS[s(4270)]?r.mapProjection=new Cesium__namespace.WebMercatorProjection(r.ellipsoid):r.mapProjection=new Cesium__namespace[s(i._0x3ff0c5)](r[s(i._0xcfd1a6)])),Cesium__namespace.defined(r.ellipsoid)&&(r[s(i._0x24705b)]=new Cesium__namespace.Globe(r.ellipsoid)),Cesium__namespace[s(i._0xa1e628)](r[s(i._0x889abb)])&&isPlainObject(r.skyBox))switch(r.skyBox.type){case s(i._0x30aed8):case s(425):r[s(i._0x13c8b6)]=new GroundSkyBox(r.skyBox);break;case s(i._0x2ff55e):case"MultipleSkyBox":r.skyBox=new MultipleSkyBox(r.skyBox);break;default:r.skyBox=new Cesium__namespace[s(i._0x4e6b27)](r.skyBox);break}r.geocoder==="gaode"&&t.lang===LangType.ZH&&(r.geocoder=new GaodePOIGeocoder(r.geocoderConfig),r.geocoder.map=this);let o=![],c=![];if(r.baseLayerPicker){var _;if(!r.imageryProviderViewModels&&((_=t.basemaps)===null||_===void 0?void 0:_.length)>0){const f=getImageryProviderViewModels(t.basemaps,this.options.templateValues);r.imageryProviderViewModels=f.imageryProviderViewModels,f[s(i._0xea3976)]===-1?o=!![]:r[s(i._0x45d951)]=f.imageryProviderViewModels[f[s(i._0xeecc4e)]]}if(!r.terrainProviderViewModels){var l;r[s(i._0x385be5)]=getTerrainProviderViewModels(this._getTerrainOptions()),r.selectedTerrainProviderViewModel=r[s(443)][(l=t[s(i._0x50579a)])!==null&&l!==void 0&&l.show?1:0]}}else{var d;r[s(i._0x46dadd)]==null&&(o=!![],r.baseLayer=Cesium__namespace[s(1074)].fromProviderAsync(Cesium__namespace[s(1450)].fromUrl(Cesium__namespace.buildModuleUrl("Assets/Textures/NaturalEarthII")))),(d=t.terrain)!==null&&d!==void 0&&d.show?c=!![]:r.terrainProvider=getNoTerrainProvider()}if(this[s(3453)]=new Cesium__namespace.Viewer(e,r),c&&(this[s(i._0x4f45ef)]=createTerrainProvider(this._getTerrainOptions())),o){const f=this._viewer.imageryLayers,g=f[s(i._0x1a2016)];for(let b=0;b<g;b++){const C=f[s(615)](0);f[s(1361)](C,!![])}}}_getTerrainOptions(){const e={_0x3dfea7:3109,_0x204bd0:1941,_0x12e0e2:3109},t=_0x3a2b68;return this.options.terrain?{templateValues:this.options.templateValues,...this[t(e._0x204bd0)][t(e._0x12e0e2)]}:this.options[t(e._0x3dfea7)]}setOptions(e){const t={_0x2cd36e:2953,_0x29ab5d:400,_0xa9491b:800,_0x299129:3723,_0x17c5c2:1941,_0x3f00e3:919,_0x1e3b1d:4207,_0x4774ef:1975,_0x19303d:3685,_0x284376:1097},i=_0x3a2b68;if(!e||Object[i(t._0x2cd36e)](e)[i(t._0x29ab5d)]===0)return this;this.options=merge(this.options,e);for(const s in e){const r=e[s];switch(s){case"scene":{this[i(t._0xa9491b)].setOptions(this.options.scene,r);break}case i(t._0x299129):{this._mouseEvent.setOptions(this[i(t._0x17c5c2)][i(t._0x299129)]);break}case"terrain":{this[i(2531)]=createTerrainProvider(this._getTerrainOptions());break}case"basemaps":{this.setBasemapsOptions(r);break}case i(2864):{this.setLayersOptions(r);break}case i(t._0x3f00e3):{this.chinaCRS=r||ChinaCRS.WGS84;break}case"lang":{(r===LangType.ZH||r===LangType.ZHHK)&&toChineseBeforeCreate(this.options);break}case i(t._0x1e3b1d):{updateAll(r);break}case"control":{for(const o in r){const c=this.options.control[o],_=this[i(t._0x4774ef)][o];if(_)!c||(c==null?void 0:c.enabled)===![]?(_[i(442)]=![],_.enabled=![]):(_.show=!![],_.enabled=!![],_.setOptions&&c!==!![]&&_.setOptions(c));else{if(!c||c.enabled===![])continue;const l=create$1(o,c);l?this.addControl(l):logWarn("createControl:无该类型控件暂不能创建",o,c)}}break}case i(t._0x19303d):{for(const o in r){const c=this[i(1941)].effect[o],_=this._effects[o];if(_)!c||(c==null?void 0:c.enabled)===![]?_.enabled=![]:(_.enabled=!![],_.setOptions&&_.setOptions(c));else{if(!c||c.enabled===![])continue;const l=create(o,c);l&&this[i(t._0x284376)](l)}}break}default:{logWarn("未处理参数",r);break}}}return this}setSceneOptions(e){const t=_0x3a2b68;return!e||Object.keys(e).length===0?this:(this.options.scene=merge(this.options.scene,e),this._sceneOption.setOptions(this.options[t(744)],e),this)}getOptions(){const e={_0x43595a:3591},t=_0x3a2b68;return clone(this.options,[t(e._0x43595a),"eventParent"])}[_0x3a2b68(579)](){const e={_0x20f8bb:744,_0x4dccce:1909},t=_0x3a2b68,i=this.getOptions();i[t(e._0x20f8bb)].center=this.getCameraView(),i.layers=[];const s=this.getLayers({basemaps:![]});for(let r=s[t(400)]-1;r>=0;r--){const o=s[r];o.isPrivate||o[t(3591)]||i.layers.push(o[t(e._0x4dccce)]())}return i}getDefaultContextMenu(){return getDefaultContextMenu(this)}getCenter(){return getCenter(this.scene)}getCameraDistance(){const e={_0x441541:1378,_0x5e0b24:3453},t=_0x3a2b68,i=this.getCenter();return i?Cesium__namespace.Cartesian3.distance(i[t(e._0x441541)](),this[t(e._0x5e0b24)].camera.positionWC):0}getExtent(e){return getExtent(this,e)}getRealAlt(e){var t,i;if(!((t=this.options.scene)!==null&&t!==void 0&&(i=t.globe)!==null&&i!==void 0&&i.realAlt))return e;const s=this._viewer.scene.globe.terrainExaggeration||this._viewer.scene.terrainExaggeration;return s?e/s:e}[_0x3a2b68(2812)](e){return expImage(this[_0x3a2b68(3453)],e)}setCursor(e=""){const t={_0xbec523:535,_0x44e4a0:527},i=_0x3a2b68;this[i(t._0xbec523)]=e,this[i(t._0x44e4a0)].style.cursor=e}_setEditCursor(e){const t={_0x1a9a9d:2748},i=_0x3a2b68;this.container&&(e?this[i(527)].style.cursor="crosshair":this.container[i(t._0x1a9a9d)].cursor=this._default_cursor||"")}[_0x3a2b68(3785)](e){return pick3DTileset(this.scene,e)}pickTilesetLayer(e){const t=_0x3a2b68,i=pick3DTileset(this.scene,e);return i?this.getLayerById(i[t(662)]):null}on(e,t,i){return!this._sceneEvent.on(e,t,i||this)&&super.on(e,t,i),this}[_0x3a2b68(2971)](e,t,i){const s={_0x2425e7:2971},r=_0x3a2b68;return!this._sceneEvent[r(s._0x2425e7)](e,t,i||this)&&super[r(2971)](e,t,i),this}[_0x3a2b68(1643)](e,t){const i={_0x1f57f3:3942},s=_0x3a2b68;return this[s(3942)].hasType(e)?this[s(i._0x1f57f3)].listens(e):super.listens(e,t)}_initLayers(){const e={_0x631f40:1941,_0x34d994:2864,_0x3ed58a:4046,_0x50e311:2051,_0x1a7e14:1754,_0x1ec218:3223,_0x167db2:1007,_0x226809:400,_0x5128fa:1941,_0x56e9cb:3247,_0x42bfc4:442,_0x4bd273:4243,_0x4eccdd:3591,_0x10a849:1266,_0x367fc1:1754,_0x3b302c:1588},t={_0x2e74bb:432},i=_0x3a2b68;this.options.basemaps=this[i(e._0x631f40)].basemaps||[],this.options[i(e._0x34d994)]=this.options.layers||[],this[i(e._0x3ed58a)]=1,this._arrLayerIdx=[];const s=this[i(e._0x631f40)].basemaps,r=this.options.layers;for(let _=0;_<s[i(400)];_++){const l=s[_];l.id&&(this._arrLayerIdx[i(e._0x50e311)](l.id)!==-1&&(delete l.id,logWarn("addLayer:图层id存在冲突，已重新赋值id",l)),this._arrLayerIdx[i(e._0x1a7e14)](l.id))}for(let _=0;_<r[i(400)];_++){const l=r[_];l.id&&(this._arrLayerIdx.indexOf(l.id)!==-1&&(delete l.id,logWarn(i(571),l)),this._arrLayerIdx.push(l.id))}const o=[],c=[];if(!this._viewer.baseLayerPicker)for(let _=0;_<s.length;_++){const l=s[_];!l[i(3307)]&&(l.name=""),!l.id&&(l.id=this[i(4114)]());const d=create$2(l,this.options.templateValues);if(d){if(d._hasMapInit=!![],l.show){const f=this.addLayer(d);c.push(f)}else delete l.show;if(this[i(e._0x1ec218)].set(l.id,d),o.push(l),d[i(e._0x167db2)]&&l.layers)for(let f=0;f<l.layers[i(e._0x226809)];f++){const g=l[i(2864)][f];g.pid=l.id,g.parent=d,!g.id&&(g.id=this.getNextLayerId()),o.push(g)}}}for(let _=0;_<r.length;_++){const l=r[_];!l.id&&(l.id=this.getNextLayerId());const d=create$2(l,this[i(e._0x5128fa)].templateValues);if(d){if(d[i(e._0x56e9cb)]=!![],l[i(e._0x42bfc4)]){const f=this[i(e._0x4bd273)](d);c.push(f)}else delete l.show;if(this._optionsLayersList[i(507)](l.id,d),o.push(l),d.hasChildLayer&&l.layers)for(let f=0;f<l.layers.length;f++){const g=l.layers[f];g[i(1466)]=l.id,g[i(e._0x4eccdd)]=d,!g.id&&(g.id=this[i(4114)]()),o.push(g)}}}for(let _=0;_<o[i(400)];_++){const l=o[_];let d=Number(l[i(1266)]);isNaN(d)&&(d=_),l[i(e._0x10a849)]=d;const f=this[i(1985)].get(l.id);f&&(f[i(e._0x10a849)]=d)}c[i(e._0x367fc1)](new Promise((_,l)=>{function d(f){f===0&&(this.off(EventType.tileLoadProgress,d),_(!![]))}this.on(EventType.tileLoadProgress,d)})),this._viewer.scene._terrainProviderPromise&&c.push(this[i(3453)].scene._terrainProviderPromise),Promise[i(e._0x3b302c)](c).then(_=>{const l=i;this.fire(EventType[l(t._0x2e74bb)],{list:_})})}setBasemapsOptions(e,t=!![]){const i={_0x334e44:4243,_0x490ec5:4114,_0x5baf3f:3028,_0x39c368:3826},s={_0x23d31c:2619},r=_0x3a2b68;if(!(!e||e.length===0)){if(this.options[r(3253)]=e,t){this._optionsBasemapsList.forEach(o=>{o[r(s._0x23d31c)]()}),this._optionsBasemapsList[r(836)]();for(let o=0;o<e.length;o++){const c=e[o];!c[r(3307)]&&(c.name=""),!c.id&&(c.id=this.getNextLayerId());let _=Number(c.zIndex);isNaN(_)&&(_=o),c.zIndex=_;const l=create$2(c,this.options[r(3424)]);if(l&&(c.show&&(this[r(i._0x334e44)](l),l[r(2449)][r(4389)](function(d){d.toBottom&&d.toBottom()})),this._optionsBasemapsList.set(c.id,l),l.hasChildLayer&&c.layers))for(let d=0;d<c.layers.length;d++){const f=c.layers[d];f.pid=c.id,f.parent=l,!f.id&&(f.id=this[r(i._0x490ec5)]())}}}return this.controls.baseLayerPicker&&this[r(i._0x5baf3f)].baseLayerPicker.reload(),this._optionsBasemapsList[r(i._0x39c368)]}}setLayersOptions(e){const t={_0x8e355b:2864},i=_0x3a2b68;if(!(!e||e.length===0)){this[i(3062)][i(3782)](s=>{s.destroy()}),this._optionsLayersList.removeAll(),this.options.layers=e;for(let s=0;s<e.length;s++){const r=e[s];!r.id&&(r.id=this.getNextLayerId());const o=create$2(r,this.options.templateValues);if(o&&(r.show&&this.addLayer(o),this._optionsLayersList.set(r.id,o),o[i(1007)]&&r.layers))for(let c=0;c<r.layers.length;c++){const _=r[i(t._0x8e355b)][c];_.pid=r.id,_[i(3591)]=o,!_.id&&(_.id=this.getNextLayerId())}}return this._optionsLayersList.values}}getNextLayerId(){const e={_0x4422b0:2185,_0x49f06e:4046},t=_0x3a2b68;for(;this[t(e._0x4422b0)].indexOf(this[t(e._0x49f06e)])!==-1;)this._layerIdx++;return this[t(2185)].push(this._layerIdx),this._layerIdx}[_0x3a2b68(4243)](e,t){const i={_0x5e427f:3104,_0x315bb2:4114,_0x1c45b9:4389};return new Promise((s,r)=>{const o=_0x20dc;if(!e||!e._onAdd){s(![]);return}if(Cesium__namespace.defined(t)&&(e.show=t),e._state===State[o(i._0x5e427f)]){s(![]);return}e._onAdd(this);const c=this[o(1985)].get(e.id);c&&c!==e&&(e.id=this[o(i._0x315bb2)](),logWarn("addLayer:图层id存在冲突，已重新赋值id",e)),this._layerList.set(e.id,e),e.readyPromise[o(i._0x1c45b9)](function(_){s(!![])})})}[_0x3a2b68(2033)](e,t){const i={_0x5c19f6:4326,_0x52b370:1370,_0x5ed335:1361},s=_0x3a2b68;if(!e)return this;if((isString(e)||isNumber(e))&&(e=this._layerList.get(e),!e))return this;if(e[s(i._0x5c19f6)])return this._layerList.remove(e.id),t&&e.clear&&e.clear(),e[s(i._0x52b370)](),t&&(this._optionsBasemapsList.remove(e.id),this._optionsLayersList[s(i._0x5ed335)](e.id),e.destroy()),this}[_0x3a2b68(2109)](e){const t=_0x3a2b68;return e?(isObject(e)&&(e=e.id),this[t(1985)].contains(e)):![]}eachLayer(e,t){return this._layerList.forEach(e,t||this),this}getLayer(e,t){return isObject(e)&&(e=e.id),this.getLayerByAttr(e,t)}getLayerById(e){const t={_0x1484ea:615,_0x5af4ce:400,_0x215bd1:963,_0xa1a387:963},i=_0x3a2b68;let s=this._layerList.get(e);if(s||(s=this[i(3062)][i(t._0x1484ea)](e),s)||(s=this._optionsBasemapsList.get(e),s))return s;const r=this.getLayers({basemaps:!![],layers:!![]});for(let o=0,c=r[i(t._0x5af4ce)];o<c;o++){const _=r[o];if(_.id===e)return _;if(_.hasChildLayer&&_[i(t._0x215bd1)])for(let l=0;l<_[i(t._0xa1a387)].length;l++){const d=_.arrLayer[l];if(d.id===e)return d}}}getLayerByAttr(e,t){let i=this._layerList.getByAttr(e,t);if(i||(i=this._optionsLayersList.getByAttr(e,t),i)||(i=this._optionsBasemapsList.getByAttr(e,t),i))return i}[_0x3a2b68(2526)](e,t){const i={_0x3f1206:1985},s=_0x3a2b68,r=this._layerList.getListByAttr(e,t);let o=this._optionsLayersList.getListByAttr(e,t);for(let c=0,_=o[s(400)];c<_;c++){const l=o[c];!this[s(i._0x3f1206)].contains(l.id)&&r.push(l)}o=this._optionsBasemapsList[s(387)](e,t);for(let c=0,_=o.length;c<_;c++){const l=o[c];!this._layerList.contains(l.id)&&r.push(l)}return r}getLayers(e={}){const t={_0x5aed40:407,_0x70253d:3062},i=_0x3a2b68;let s=[];return e.basemaps&&(s=s.concat(this._optionsBasemapsList.values)),e.layers&&(s=s.concat(this[i(3062)].values)),e.filter&&(e.basemaps=![],e.layers=![]),this._layerList.forEach(r=>{const o=i;r.isPrivate||e.childs===![]&&r.parent||Cesium__namespace[o(t._0x5aed40)](e.basemaps)&&this[o(3223)].contains(r.id)||Cesium__namespace[o(407)](e[o(2864)])&&this[o(t._0x70253d)].contains(r.id)||s[o(1754)](r)}),s}getBasemaps(e){const t={_0x5d6a15:1798,_0x27ad7e:3223},i=_0x3a2b68;if(this._viewer.baseLayerPicker)return console[i(t._0x5d6a15)]("baseLayerPicker打开时，由baseLayerPicker机制决定，无法获取底图图层。"),[];if(e){const s=[];return this._optionsBasemapsList[i(3782)](r=>{r.hasEmptyGroup||s.push(r)}),s}else return this[i(t._0x27ad7e)].values}getTileLayers(){const e={_0x11abcb:3231},t=_0x3a2b68;let i=[];return i=i.concat(this[t(e._0x11abcb)](!![])),this[t(3062)][t(3782)](s=>{s.isTile&&!s.isPrivate&&i.push(s)}),this._layerList.forEach(s=>{const r=t;!s[r(2788)]||s.isPrivate||this[r(3223)].contains(s.id)||this[r(3062)].contains(s.id)||i.push(s)}),i}_initControls(){const e={_0x4527c0:3990,_0x34d2e9:676,_0x4e6371:3309},t=_0x3a2b68;var i,s,r;const o=((i=this.options)===null||i===void 0?void 0:i[t(2732)])||{};add((s=this._viewer)===null||s===void 0?void 0:s.scene,this[t(1941)][t(e._0x4527c0)]),this._popupMgr=new PopupMgr(o[t(e._0x34d2e9)]),this._popupMgr.isPrivate=!![],this.addControl(this._popupMgr),this._tooltipMgr=new TooltipMgr(o.tooltip),this._tooltipMgr[t(702)]=!![],this.addControl(this._tooltipMgr),this._contextmenuMgr=new ContextMenu(o.contextmenu),this._contextmenuMgr.isPrivate=!![],this[t(3116)](this._contextmenuMgr),(((r=o.contextmenu)===null||r===void 0?void 0:r.hasDefault)??!![])&&this.bindContextMenu(this.getDefaultContextMenu()),this[t(934)]=new SmallTooltip(o.smallTooltip),this._smallTooltip[t(702)]=!![],this.addControl(this._smallTooltip),this._keyboardRoam=new KeyboardRoam({enabled:![],...o[t(e._0x4e6371)]}),this._keyboardRoam.isPrivate=!![],this.addControl(this[t(4373)]);for(const c in o){const _=o[c];if(!_||_.enabled===![])continue;const l=create$1(c,_);l&&this.addControl(l)}}addControl(e,t){const i={_0x4fc34a:1603,_0x5e5084:3174},s=_0x3a2b68;return!e||!e._onAdd?this:e.type&&this._controls[e[s(1603)]]?(logWarn("地图上已有"+e[s(i._0x4fc34a)]+"控件,请直接使用 map.controls."+e.type+" 对象 ",this),this):(Cesium__namespace.defined(t)&&(e[s(i._0x5e5084)]=t),e._onAdd(this),this._controlList.set(e.id,e),this._controls[e.type]=e,this[s(1109)](EventType.addControl,{control:e}),this)}removeControl(e,t){const i=_0x3a2b68;return e?(this._controlList[i(1361)](e.id),delete this[i(1975)][e.type],e[i(1370)](),this.fire(EventType.removeControl,{control:e}),t&&e.destroy(),this):this}hasControl(e){const t={_0x4d31b8:1012},i=_0x3a2b68;return this._controlList[i(t._0x4d31b8)]((e==null?void 0:e.id)||e)}[_0x3a2b68(2124)](e,t){const i=_0x3a2b68;return this._controlList[i(3782)](e,t||this),this}[_0x3a2b68(1657)](e,t="type"){return this._controlList.getByAttr(e,t)}_initEffect(){const e={_0x5c8046:3174},t=_0x3a2b68;var i;const s=(i=this[t(1941)])===null||i===void 0?void 0:i.effect;if(s)for(const r in s){const o=s[r];if(!o||o[t(e._0x5c8046)]===![])continue;const c=create(r,o);c&&this.addEffect(c)}}addEffect(e){const t={_0x4451a5:4265},i=_0x3a2b68;if(!e||!e._onAdd)return this;if(this._effects[e.type]){logError$1("地图上已有"+e.type+i(2283)+e.type+" 对象 ",this);return}this.addThing(e),this[i(t._0x4451a5)][e.type]=e,this.fire(EventType.addEffect,{effect:e})}removeEffect(e,t){const i={_0x3c1696:1603},s=_0x3a2b68;delete this._effects[e[s(i._0x3c1696)]],this.fire(EventType.removeEffect,{effect:e}),this[s(625)](e,t)}getEffect(e,t="type"){return this[_0x3a2b68(1886)](e,t)}[_0x3a2b68(3820)](e){const t={_0x4328b3:507},i=_0x3a2b68;return!e||!e._onAdd?this:(e._onAdd(this),this._thingList[i(t._0x4328b3)](e.id,e),this)}removeThing(e,t){const i={_0x454d44:2542},s=_0x3a2b68;return e?(this[s(i._0x454d44)].remove(e.id),t&&e.clear&&e.clear(),e._onRemove(),t&&e.destroy(),this):this}hasThing(e){return this._thingList.contains((e==null?void 0:e.id)||e)}[_0x3a2b68(476)](e,t){return this._thingList.forEach(e,t||this),this}[_0x3a2b68(1886)](e,t){return this._thingList.getByAttr(e,t)}getLangText(e){return getLangText(e,this[_0x3a2b68(3857)])}zoomIn(e,t){const i={_0x1f8727:890},s=_0x3a2b68,r=this._zoomNavigation.zoomIn(e,t);return r&&this.fire(EventType.zoom,{ztype:s(i._0x1f8727),relativeAmount:e,mandatory:t}),r}[_0x3a2b68(699)](e,t){const i=_0x3a2b68,s=this._zoomNavigation.zoomOut(e,t);return s&&this.fire(EventType[i(1874)],{ztype:"zoomOut",relativeAmount:e,mandatory:t}),s}[_0x3a2b68(741)](e){const t={_0x1efe9b:4285,_0x1b090d:2259,_0xdae47:4285,_0x54aa58:2556,_0x267be2:2510,_0x8f29c2:2460,_0x28a822:3928},i=_0x3a2b68;this._hasRightTilt=e,e?(this._viewer[i(744)].screenSpaceCameraController.tiltEventTypes=[Cesium__namespace.CameraEventType[i(t._0x1efe9b)],Cesium__namespace.CameraEventType.PINCH,{eventType:Cesium__namespace[i(t._0x1b090d)].LEFT_DRAG,modifier:Cesium__namespace.KeyboardEventModifier.CTRL},{eventType:Cesium__namespace.CameraEventType[i(t._0xdae47)],modifier:Cesium__namespace[i(2460)][i(1946)]}],this._viewer[i(744)][i(3928)].zoomEventTypes=[Cesium__namespace.CameraEventType[i(t._0x54aa58)],Cesium__namespace.CameraEventType.WHEEL,Cesium__namespace.CameraEventType.PINCH]):(this._viewer[i(744)].screenSpaceCameraController.tiltEventTypes=[Cesium__namespace[i(2259)].MIDDLE_DRAG,Cesium__namespace.CameraEventType[i(t._0x267be2)],{eventType:Cesium__namespace.CameraEventType.LEFT_DRAG,modifier:Cesium__namespace[i(t._0x8f29c2)].CTRL},{eventType:Cesium__namespace.CameraEventType.RIGHT_DRAG,modifier:Cesium__namespace.KeyboardEventModifier.CTRL}],this._viewer.scene[i(t._0x28a822)].zoomEventTypes=[Cesium__namespace.CameraEventType.RIGHT_DRAG,Cesium__namespace.CameraEventType.WHEEL,Cesium__namespace.CameraEventType.PINCH]),this.controls.mouseDownView&&this.controls.mouseDownView.changeMouseModel()}[_0x3a2b68(1710)](){const e={_0x51cba3:4142},t=_0x3a2b68;delete this._pitch_max,delete this[t(2038)],delete this[t(4251)],this._viewer.scene.screenSpaceCameraController.inertiaSpin=.9,this._viewer.scene[t(3928)][t(e._0x51cba3)]=.9,this[t(2971)](EventType.mouseDown,this[t(4097)],this),this.off(EventType.mouseUp,this._setPitchRange_rightUpHandler,this),this.off(EventType.mouseMove,this._setPitchRange_mouseMoveHandler,this),this.off(EventType.cameraMoveStart,this._setPitchRange_cameraChangedHandler,this)}setPitchRange(e,t=-90){const i={_0x423d15:4230},s=_0x3a2b68;this.clearPitchRange(),this._viewer.scene.screenSpaceCameraController[s(3249)]=0,this._viewer.scene.screenSpaceCameraController.inertiaTranslate=0,this[s(i._0x423d15)]=Cesium__namespace.Math.toRadians(e),this._pitch_min=Cesium__namespace.Math.toRadians(t),this.on(EventType.mouseDown,this[s(4097)],this),this.on(EventType.mouseUp,this._setPitchRange_rightUpHandler,this)}_setPitchRange_rightDownHandler(e){const t={_0x56960f:4233,_0x5a9cd6:2863,_0x185fa8:4241,_0x8e4cce:3453,_0x651954:2533},i=_0x3a2b68;this[i(3453)].scene.mode===Cesium__namespace.SceneMode.SCENE3D&&(this._viewer[i(t._0x56960f)][i(t._0x5a9cd6)][i(t._0x185fa8)]>this[i(t._0x8e4cce)].scene.screenSpaceCameraController.minimumCollisionTerrainHeight||(this._pitch_minHeight=this._viewer.camera.positionCartographic.height,this.on(EventType.mouseMove,this[i(t._0x651954)],this),this.on(EventType[i(518)],this._setPitchRange_cameraChangedHandler,this)))}_setPitchRange_rightUpHandler(e){const t=_0x3a2b68;this._viewer.scene.screenSpaceCameraController[t(687)]=!![],this.off(EventType.mouseMove,this._setPitchRange_mouseMoveHandler,this),this.off(EventType.cameraChanged,this._setPitchRange_cameraChangedHandler,this)}[_0x3a2b68(2533)](e){const t={_0x1bfd30:1127,_0x4772fe:4230,_0x10a09c:2038},i=_0x3a2b68;let s=!![];const r=e[i(t._0x1bfd30)].y<e.startPosition.y;r&&this._viewer.camera.pitch>this[i(t._0x4772fe)]?s=![]:!r&&this._viewer.camera.pitch<this[i(t._0x10a09c)]?s=![]:s=!![],this._viewer[i(744)].screenSpaceCameraController[i(687)]=s}_setPitchRange_cameraChangedHandler(e){const t={_0x432dd8:1640,_0x58e98c:2863,_0x40c92e:4230,_0x591bfe:3928,_0x591bf0:2038,_0x4085ba:3664,_0x2c5e85:2863,_0x25cc0a:4233,_0x592e78:3928},i=_0x3a2b68;if(this._viewer.scene[i(t._0x432dd8)]!==Cesium__namespace[i(3915)].SCENE3D||this[i(3453)].camera[i(t._0x58e98c)][i(4241)]>this._viewer[i(744)].screenSpaceCameraController.minimumCollisionTerrainHeight)return;let s=this._viewer.camera.pitch;if(s>this[i(t._0x40c92e)]||s<this._pitch_min){this._viewer.scene[i(t._0x591bfe)].enableTilt=![],s>this._pitch_max?s=this[i(4230)]:s<this[i(t._0x591bf0)]&&(s=this[i(2038)]);const r=Cesium__namespace.Cartesian3.fromRadians(this[i(3453)].camera[i(2863)].longitude,this._viewer[i(4233)][i(2863)][i(t._0x4085ba)],Math.max(this._viewer.camera[i(t._0x2c5e85)].height,this._pitch_minHeight));this._viewer[i(t._0x25cc0a)].cancelFlight(),this._viewer.camera.setView({destination:r,orientation:{pitch:s}}),this._viewer.scene[i(t._0x592e78)].enableTilt=!![]}}setPitch(e,t={}){const i={_0x4ae995:3481},s=_0x3a2b68,r=this.getCenter();if(!r)return Promise.resolve(![]);const o=Cesium__namespace.Cartesian3[s(i._0x4ae995)](r.toCartesian(),this._viewer.camera.positionWC);return this.flyToPoint(r,{...t,radius:o,pitch:e})}[_0x3a2b68(2268)](){const e={_0x3898f6:3453},t=_0x3a2b68;return Route.clearLastCamera(),this._setCameraViewListState=![],this[t(e._0x3898f6)][t(4233)].cancelFlight(),this}cancelFlight(){return this.cancelFlyTo()}getCameraView(e){return getCameraView(this.camera,e)}setCameraView(e,t={}){const i={_0x48798b:1890,_0x3f0f4f:4079,_0x126411:671,_0x5b9a3d:4233,_0x39b951:2096,_0x2f3bbc:3453,_0x1471b8:4233};return new Promise((s,r)=>{const o=_0x20dc;if(!e||e[o(4079)]===0&&e.lat===0&&e[o(1879)]===0){s(![]);return}isNumber(t)&&(t={duration:t});let c=t[o(i._0x48798b)]??2500;this._viewer.camera[o(2863)][o(4241)]<c&&(c=this._viewer[o(4233)].positionCartographic.height),Cesium__namespace.defined(e.alt)&&(c=e.alt);let _;Cesium__namespace.defined(e[o(i._0x3f0f4f)])&&Cesium__namespace.defined(e[o(i._0x126411)])?_=Cesium__namespace.Cartesian3.fromDegrees(e.lng,e.lat,c):Cesium__namespace.defined(e.x)&&Cesium__namespace[o(407)](e.y)?(Cesium__namespace.defined(e.z)&&(c=e.z),_=Cesium__namespace.Cartesian3.fromDegrees(e.x,e.y,c)):_=this._viewer[o(i._0x5b9a3d)].position;const l={...t,destination:_,orientation:{heading:Cesium__namespace.Math.toRadians(e[o(2782)]??0),pitch:Cesium__namespace.Math[o(1185)](e.pitch??-90),roll:Cesium__namespace.Math.toRadians(e.roll??0)},complete:()=>{t.complete&&t.complete(),s(!![])},cancel:()=>{t.cancel&&t.cancel(),s(![])}};t[o(i._0x39b951)]===0?(this[o(i._0x2f3bbc)][o(i._0x1471b8)].setView(l),t[o(2352)]&&t.complete(),s(!![])):this._viewer.camera.flyTo(l)})}centerAt(e,t){return this.setCameraView(e,t)}flyHome(e){const t={_0x408f7a:3970,_0x4628db:4087},i=_0x3a2b68;var s,r,o,c;(s=this.options)!==null&&s!==void 0&&(r=s.scene)!==null&&r!==void 0&&r.center?this[i(3006)](this.options[i(744)].center,e):(o=this.options)!==null&&o!==void 0&&(c=o.scene)!==null&&c!==void 0&&c.extent&&this[i(t._0x408f7a)](this[i(1941)].scene[i(t._0x4628db)],e)}setCameraViewList(e,t={}){const i={_0x443bc2:2343},s=_0x3a2b68;this.cancelFlyTo(),this._setCameraViewListArr=e,this._setCameraViewListOptions=t,this[s(i._0x443bc2)]=!![],this._setCameraViewListItem(0,t)}pauseCameraViewList(){this[_0x3a2b68(2268)]()}proceedCameraViewList(){const e=_0x3a2b68;this._setCameraViewListState=!![],this._setCameraViewListItem(this[e(1938)],this._setCameraViewListOptions)}[_0x3a2b68(3339)](e,t){const i={_0x345d12:1162,_0xc19e0:1938,_0x3eab0e:3006,_0x57283a:2096},s={_0x54f4e3:3400},r=_0x3a2b68,o=this;if(!this._setCameraViewListState||e<0||e>=this[r(i._0x345d12)][r(400)]){this._setCameraViewListState=![],t!=null&&t.complete&&t.complete();return}this[r(i._0xc19e0)]=e;const c=this._setCameraViewListArr[e];c.onStart&&c.onStart();let _;this[r(i._0x3eab0e)](c,{easingFunction:Cesium__namespace[r(1298)].LINEAR_NONE,...t,duration:c[r(i._0x57283a)],complete:function(){c[r(s._0x54f4e3)]&&c.onEnd();const d=c.stop??1;_=setTimeout(()=>{o._setCameraViewListItem(++e,t)},d*1e3)},cancle:function(){this._setCameraViewListState=![],clearTimeout(_),t!=null&&t.cancel&&t.cancel()}})}[_0x3a2b68(2961)](e,t){if(e)return this._viewer.flyTo(e,t)}[_0x3a2b68(3525)](e,t={}){const i={_0x417e5c:2961,_0x24123e:3542,_0x49cf9c:2961,_0x3bc3d5:1737},s=_0x3a2b68;if(!e||e[s(400)]===0)return Promise[s(583)](![]);if(e[s(i._0x417e5c)]){var r;return t[s(i._0x24123e)]=(r=e.style)===null||r===void 0?void 0:r.clampToGround,e[s(i._0x49cf9c)](t)}if(!Array.isArray(e))return Promise[s(583)](![]);if(e.length===1)return e[0].flyTo(t);let o;for(let c=0,_=e.length;c<_;c++){const l=e[c];if(!l.getRectangle)continue;const d=l[s(i._0x3bc3d5)]();Cesium__namespace.defined(d)&&(o?o=Cesium__namespace[s(1983)].union(d,o):o=d)}return this.flyToExtent(o,t)}flyToPositions(e,t={}){const i={_0x304218:400,_0x32eab1:2258,_0x189339:4353,_0x1e967a:4241},s=_0x3a2b68;if(!e||e.length===0)return Promise.resolve(![]);if(e[s(i._0x304218)]===1)return this[s(i._0x32eab1)](e[0],t);const r=getRectangle(e,!![]);return r?r.xmin===r[s(i._0x189339)]&&r.ymin===r.ymax||r.xmax-r.xmin>200?this.flyToPoint([r.xmin,r.ymin,r[s(i._0x1e967a)]],t):(r.height=getMaxHeight(e),t.scale=t.scale||1.2,this[s(3970)](r,t)):Promise.resolve(![])}flyToExtent(e,t={}){const i={_0x2c5e48:1983,_0xd264d5:4353,_0xd46e24:2269,_0x190916:3878,_0x114bac:2806,_0x4a3017:3404},s=_0x3a2b68;e instanceof Cesium__namespace[s(i._0x2c5e48)]&&(e=formatRectangle(e));const r=e.xmin,o=e[s(i._0xd264d5)],c=e.ymin,_=e[s(i._0xd46e24)],l=(r+o)/2,d=(c+_)/2;if(l===0&&d===0)return Promise[s(583)](![]);let f=e.height??t.height??0;if(f===0){var g;f=getHeight((g=this._viewer)===null||g===void 0?void 0:g.scene,Cesium__namespace.Cartesian3.fromDegrees(l,d))}const b=Cesium__namespace[s(i._0x2c5e48)].fromDegrees(r,c,o,_),C=Math.max(b.height,b.width);if(C>0){var P;t.radius=(t[s(i._0x190916)]??0)+Cesium__namespace[s(i._0x114bac)].chordLength(C,(P=this._viewer)===null||P===void 0?void 0:P.scene.globe[s(i._0x4a3017)].maximumRadius)}return this.flyToPoint(new LngLatPoint(l,d,f),t)}flyToPoint(e,t={}){const i={_0x381b57:1890,_0x4450ce:4233,_0x3d78a8:407,_0x38637f:4244,_0x3eddba:3453,_0x162ed2:4233,_0x1d8041:4398};return new Promise((s,r)=>{const o={_0x4a03ea:1462,_0x50aa55:385,_0x46b0a3:4389},c=_0x20dc;if(!e){s(![]);return}e=LngLatPoint.parse(e);let _=e.toCartesian();if(t.clampToGround)if(this.hasTerrain){getSurfaceHeight(this._viewer.scene,_,{has3dtiles:!![]}).then(C=>{const P=_0x20dc;e.alt=C.height*(this._viewer[P(744)][P(o._0x4a03ea)][P(o._0x50aa55)]||1),delete t.clampToGround,this.flyToPoint(e,t)[P(o._0x46b0a3)](S=>{s(S)})});return}else e[c(1879)]=0,_=e.toCartesian();let l=t.radius||this.getCameraDistance()||100;Cesium__namespace.defined(t.scale)&&t.scale>0&&(l*=t.scale),Cesium__namespace.defined(t[c(1890)])&&l<t[c(i._0x381b57)]&&(l=t.minHeight),Cesium__namespace.defined(t.maxHeight)&&l>t[c(2627)]&&(l=t.maxHeight);let d;if(Cesium__namespace.defined(t[c(1630)]))d=Cesium__namespace[c(2806)].toRadians(t.pitch);else{d=this[c(3453)][c(i._0x4450ce)].pitch;const C=Cesium__namespace[c(2806)].toDegrees(d);Cesium__namespace[c(i._0x3d78a8)](t[c(435)])&&C<t.minPitch&&(d=Cesium__namespace.Math.toRadians(t.minPitch)),Cesium__namespace[c(i._0x3d78a8)](t[c(i._0x38637f)])&&C>t[c(i._0x38637f)]&&(d=Cesium__namespace.Math.toRadians(t.maxPitch))}const f=Cesium__namespace.defined(t.heading)?Cesium__namespace.Math.toRadians(t.heading):this._viewer.camera.heading,g=new Cesium__namespace.HeadingPitchRange(f,d,l),b=new Cesium__namespace.BoundingSphere(_,0);t.duration===0?(this[c(i._0x3eddba)].camera.lookAt(_,g),!t.lock&&!this._viewer.trackedEntity&&this._viewer[c(i._0x162ed2)][c(i._0x1d8041)](Cesium__namespace.Matrix4[c(3709)]),t.complete&&t.complete(),s(!![])):this[c(i._0x3eddba)].camera.flyToBoundingSphere(b,{...t,offset:g,complete:()=>{t[c(2352)]&&t.complete(),s(!![])},cancel:()=>{t.cancel&&t.cancel(),s(![])}})})}isFlyAnimation(){return this._isFlyAnimation}openFlyAnimation(e={}){const t={_0x234d61:953,_0x126ee6:4233,_0x1458ee:4233},i=_0x3a2b68,s=this._viewer,r=e.center||this[i(4202)]();return new Promise((o,c)=>{const _={_0xb54413:4233,_0x353e62:671,_0x20095:1194},l={_0x4747d2:1449},d={_0x33f1ea:3480,_0x2ecc99:3480},f=i;this[f(t._0x234d61)]=!![];const g=this;function b(C){const P=f;o(C),e[P(2767)]&&e.callback(C),g._isFlyAnimation=![],g[P(d._0x33f1ea)]&&(g[P(d._0x2ecc99)](),delete g[P(3480)])}s[f(t._0x126ee6)].setView({destination:Cesium__namespace.Cartesian3.fromDegrees(-85.16,13.71,23e6)}),s[f(t._0x1458ee)].flyTo({destination:Cesium__namespace.Cartesian3[f(4275)](r.lng,r[f(671)],23e6),duration:e[f(3996)]||2,easingFunction:e.easingFunction1||Cesium__namespace.EasingFunction.LINEAR_NONE,complete:()=>{const C=f;let P=r.alt??9e4;P<2e5&&r.pitch!==-90?(P=P*1.2+8e3,s[C(_._0xb54413)].flyTo({destination:Cesium__namespace.Cartesian3.fromDegrees(r.lng,r[C(_._0x353e62)],P),duration:e[C(_._0x20095)],easingFunction:e.easingFunction2,complete:()=>{const S=C;this.setCameraView(r,{duration:e[S(l._0x4747d2)]||2,easingFunction:e.easingFunction3,complete:()=>{b(!![])},cancel:()=>{b(![])}})},cancel:()=>{b(![])}})):this.setCameraView(r,{duration:e.duration3||2,easingFunction:e.easingFunction3,complete:()=>{b(!![])},cancel:()=>{b(![])}})},cancel:()=>{b(![])}})})}rotateAnimation(e={}){const t={_0x221777:2096},i={_0x47d4ca:2978,_0x4ed698:4275,_0x35c90c:4079},s={_0x285fd9:1185,_0xe093aa:2806,_0x510deb:2341,_0x7a8759:1298},r=_0x3a2b68,o=this._viewer,c=e.center||this.getCameraView({simplify:![]}),_=(e[r(t._0x221777)]??10)/3;return new Promise((l,d)=>{const f=r;o[f(4233)].flyTo({destination:Cesium__namespace[f(i._0x47d4ca)][f(i._0x4ed698)](c[f(i._0x35c90c)]+120,c.lat,c.alt),orientation:{heading:Cesium__namespace.Math.toRadians(c.heading),pitch:Cesium__namespace.Math.toRadians(c.pitch),roll:Cesium__namespace.Math.toRadians(c.roll||0)},duration:_,easingFunction:Cesium__namespace.EasingFunction.LINEAR_NONE,complete:function(){const g=f;o[g(4233)].flyTo({destination:Cesium__namespace.Cartesian3.fromDegrees(c.lng+240,c.lat,c[g(1879)]),orientation:{heading:Cesium__namespace.Math[g(1185)](c[g(2782)]),pitch:Cesium__namespace.Math[g(s._0x285fd9)](c.pitch),roll:Cesium__namespace[g(s._0xe093aa)].toRadians(c[g(s._0x510deb)]||0)},duration:_,easingFunction:Cesium__namespace[g(s._0x7a8759)].LINEAR_NONE,complete:function(){const b=g;o.camera.flyTo({destination:Cesium__namespace.Cartesian3.fromDegrees(c.lng,c.lat,c.alt),orientation:{heading:Cesium__namespace.Math.toRadians(c.heading),pitch:Cesium__namespace.Math.toRadians(c.pitch),roll:Cesium__namespace.Math.toRadians(c.roll||0)},duration:_,easingFunction:Cesium__namespace[b(1298)].LINEAR_NONE,complete:function(){l(!![])},cancel:()=>{l(![])}})},cancel:()=>{l(![])}})},cancel:()=>{l(![])}})})}[_0x3a2b68(2962)](e){const t={_0x2a12a8:2359},i=_0x3a2b68;(e==null?void 0:e[i(2471)])!==this.last_highlighGraphic&&(this.last_highlighGraphic&&this.last_highlighGraphic.closeHighlight&&this[i(t._0x2a12a8)].closeHighlight(),this._clearLastHighlight())}[_0x3a2b68(1767)](){const e={_0x48dcd4:2359},t=_0x3a2b68;this[t(2359)]&&(this[t(e._0x48dcd4)]=null),this.outlineEffect&&(this.outlineEffect.selected=[])}openHighlight(e,t,i){const s={_0x22cb17:1720},r=_0x3a2b68;if(this[r(439)]){if(!e[r(3694)]){logInfo(r(427),e);return}this.closeHighlight(),t.outlineEffect?(!this[r(s._0x22cb17)]&&(this.outlineEffect=new OutlineEffect({eventType:![]}),this.addEffect(this.outlineEffect)),this.outlineEffect.setOptions(t),this.outlineEffect.selected=this.mouseEvent[r(710)](i)):e.openHighlight(t,![],i==null?void 0:i.pickedObject),this.last_highlighGraphic=e,this._viewer[r(744)][r(1223)]()}}openPopup(e,t,i){const s={_0x2c8dbb:2591},r=_0x3a2b68;return this._popupMgr[r(s._0x2c8dbb)](e,{content:t,options:i}),this}closePopup(){const e={_0x2348f5:2202,_0x307b75:2202},t=_0x3a2b68;return this[t(e._0x2348f5)]&&this[t(e._0x307b75)].closeAll(),this}[_0x3a2b68(845)](e,t,i={}){const s={_0x1a51ab:2591},r=_0x3a2b68;return this._tooltipMgr[r(s._0x1a51ab)](e,{content:t,options:i,target:this}),this}closeTooltip(){const e={_0x181c5e:4104},t=_0x3a2b68;return this[t(3489)]&&this._tooltipMgr[t(e._0x181c5e)](),this}getContextMenu(){var e;return(e=this._contextmenuConfig)===null||e===void 0?void 0:e.content}bindContextMenu(e,t){return this._contextmenuConfig={content:e,options:t},this}[_0x3a2b68(2001)](){return this._contextmenuConfig=null,this}openContextMenu(e){return this[_0x3a2b68({_0x5997c9:1159}._0x5997c9)].open(e,this._contextmenuConfig),this}closeContextMenu(){const e={_0x436fa0:4104},t=_0x3a2b68;return this._contextmenuMgr&&this._contextmenuMgr[t(e._0x436fa0)](),this}[_0x3a2b68(1379)](e,t){return this._smallTooltip.open(e,t),this}closeSmallTooltip(){if(this._smallTooltip)return this._smallTooltip.close(),this}[_0x3a2b68(2126)](e=!![]){const t={_0x481fe7:3782,_0x543e43:3782},i=_0x3a2b68;this._thingList[i(t._0x481fe7)](s=>{this.removeThing(s,e)},this,!![]),this._thingList.removeAll(),this._controlList[i(t._0x543e43)](s=>{!s||s.isPrivate||this.removeControl(s,e)},this,!![]),this._controlList.removeAll(),this._layerList[i(t._0x481fe7)](s=>{!s||s.isPrivate||this.removeLayer(s,e)},this,!![]),this._layerList.removeAll(),this.hasTerrain=![],this._controls={},this[i(4265)]={}}[_0x3a2b68(2619)](){const e={_0x3041a5:3453,_0x335a24:1303,_0x1dfd6c:2542,_0x1eb0b4:1692,_0x4943e8:3179},t=_0x3a2b68;if(this[t(e._0x3041a5)]){try{this[t(e._0x335a24)].destroy()}catch(i){logWarn("_controlList.destroy 异常",i)}try{this[t(e._0x1dfd6c)].destroy()}catch(i){logWarn("_thingList.destroy 异常",i)}try{this[t(e._0x1eb0b4)].destroy()}catch(i){logWarn("_mouseEvent.destroy 异常",i)}try{this._layerList.destroy()}catch(i){logWarn(t(e._0x4943e8),i)}try{this._viewer[t(2619)]()}catch(i){logWarn("_viewer.destroy异常",i)}for(const i in this)delete this[i]}}}class MapCompare extends BaseControl{get mapEx(){return this._mapEx}[_0x3a2b68(585)](){const e={_0x56283d:2094},t=_0x3a2b68;this[t(e._0x56283d)]=create$3("div",this.options.className||"mars3d-container  mars3d-mapCompare")}[_0x3a2b68(2679)](){const e={_0x204ec0:2428,_0x3205e7:2748,_0x15050f:1291,_0x9a2dc6:518,_0x5789f7:3218},t=_0x3a2b68;!this.options.parentContainer&&(this._map[t(527)][t(e._0x204ec0)][t(e._0x3205e7)][t(517)]=t(4132));let i={...this.options};!i.basemaps&&!i.layers&&(i=merge(i,this._map.getCurrentOptions()),i.control=i[t(2732)]||{},i.control[t(e._0x15050f)]=!![],i.control.sceneModePicker=![]),this._mapEx=new Map(this._container,i),this._map.on(EventType.morphComplete,this._morphCompleteHandler,this),this._map.on(EventType[t(e._0x9a2dc6)],this._map_extentChangeHandler,this),this._map.camera.percentageChanged=.001,this[t(1632)].on(EventType.cameraChanged,this._mapEx_extentChangeHandler,this),this._mapEx.camera[t(e._0x5789f7)]=.001,this._map_extentChangeHandler()}_removedBeforeHook(){const e={_0x5d461c:2318,_0x3e0494:518,_0xd76919:2971},t=_0x3a2b68;this._map.off(EventType[t(e._0x5d461c)],this._morphCompleteHandler,this),this._map[t(2971)](EventType[t(e._0x3e0494)],this._map_extentChangeHandler,this),this._mapEx[t(e._0xd76919)](EventType[t(518)],this._mapEx_extentChangeHandler,this),this._mapEx.destroy(),delete this._mapEx}_morphCompleteHandler(e){const t={_0x237efb:687},i=_0x3a2b68;this._map.scene.mode===Cesium__namespace.SceneMode.SCENE2D?this._mapEx.scene.screenSpaceCameraController.enableTilt=![]:this._mapEx.scene[i(3928)][i(t._0x237efb)]=!![]}_map_extentChangeHandler(e){const t={_0x42c8bb:2476,_0x462093:1785},i=_0x3a2b68;clearTimeout(this._map_timeTik),this._mapEx.off(EventType.cameraChanged,this[i(t._0x42c8bb)],this),this[i(t._0x462093)](this._map,this._mapEx),this._map_timeTik=setTimeout(()=>{const s=i;this[s(1632)].on(EventType.cameraChanged,this[s(2476)],this)},10)}_mapEx_extentChangeHandler(e){const t={_0x16c777:1575},i={_0x1a06fb:1756},s=_0x3a2b68;clearTimeout(this._mapEx_timeTik),this[s(1575)].off(EventType.cameraChanged,this[s(1756)],this),this._updateView(this._mapEx,this[s(t._0x16c777)]),this[s(1880)]=setTimeout(()=>{const r=s;this[r(1575)].on(EventType.cameraChanged,this[r(i._0x1a06fb)],this)},10)}_updateView(e,t){const i={_0x2577b5:4202},s=_0x3a2b68,r=e[s(i._0x2577b5)]({simplify:![]});t.setCameraView(r,{duration:0})}}register$1("mapCompare",MapCompare);class OverviewMap extends BaseControl{get smallMap(){return this._smallMap}get center(){return this._center}[_0x3a2b68(585)](){const e={_0x4ca782:1941,_0x3e2631:935},t=_0x3a2b68;this.options[t(1553)]=this[t(1941)].flyToOptions||{},this._container=create$3("div","mars3d-overviewMap"),this.setStyle(this[t(e._0x4ca782)].style||{right:t(e._0x3e2631),top:t(e._0x3e2631)})}_addedHook(){const e={_0x32acf9:3123},t=_0x3a2b68;this[t(e._0x32acf9)](),this._map[t(4233)].percentageChanged=.01,this._map.on(EventType.cameraChanged,this._map_cameraChanged,this),this._map_cameraChanged()}_removedHook(){const e=_0x3a2b68;this[e(1575)][e(2971)](EventType[e(518)],this._map_cameraChanged,this),this._smallMap.destroy(),delete this[e(1757)]}_map_cameraChanged(){const e={_0x292a21:3747,_0x2554fc:1941,_0x2643f1:1553},t=_0x3a2b68,i=this._map.getExtent();this._rectangle=Cesium__namespace.Rectangle.fromDegrees(i.xmin,i.ymin,i.xmax,i.ymax),this._center=Cesium__namespace.Cartographic.toCartesian(Cesium__namespace.Rectangle[t(e._0x292a21)](this._rectangle)),this._smallMap[t(3970)](i,{duration:0,scale:2,...this[t(e._0x2554fc)][t(e._0x2643f1)]}),this.fire(EventType.change)}initMinMap(){const e={_0x12eb3b:1841,_0x34b533:4275,_0x5cc38e:4353,_0x20bef5:2191},t=_0x3a2b68,i=this._map[t(e._0x12eb3b)](),s={scene:{sceneMode:Cesium__namespace.SceneMode.SCENE2D,cameraController:{enableRotate:![],enableTranslate:![],enableTilt:![],enableZoom:![]},...this.options.scene,extent:i},control:{contextmenu:{hasDefault:![]},...this.options.control},basemaps:[{...this.options[t(1246)],show:!![]}],layers:this.options[t(2864)]};this._smallMap=new Map(this._container,s),this.options.rectangle&&(this._rectangle=Cesium__namespace.Rectangle[t(e._0x34b533)](i.xmin,i.ymin,i[t(e._0x5cc38e)],i.ymax),this._extentGraphic=new RectangleEntity({rectangle:new Cesium__namespace[t(e._0x20bef5)](r=>this._rectangle,![]),style:{color:"rgba(0,0,255,0.2)",outline:!![],outlineWidth:1,outlineColor:"#ff7800",...this.options[t(1531)]}}),this._smallMap.graphicLayer[t(2847)](this._extentGraphic))}}register$1("overviewMap",OverviewMap);const icon$1=_0x3a2b68(3175),icon=_0x3a2b68(1751);class ClockAnimate extends BaseControl{_mountedHook(){const e=_0x3a2b68;this[e(2094)]=create$3("div","mars3d-clockAnimate"),this._container.innerHTML=`
      <button id="btn-clockAnimate-start" class="mars3d-clockAnimate-btn" title="暂停">
        `+icon$1+`
      </button>
      <button id="btn-clockAnimate-now" class="mars3d-clockAnimate-btn" title="返回到当前时间" >
        <svg width="20" height="20" style="margin-top: 5px;" viewBox="0 0 48 58" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect width="48" height="48" fill="white" fill-opacity="0.01"/><rect width="48" height="58" fill="white" fill-opacity="0.01"/>
          <path d="M34.0234 6.68921C31.0764 4.97912 27.6525 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44C35.0457 44 44 35.0457 44 24C44 20.3727 43.0344 16.9709 41.3461 14.0377" stroke="#ffffff" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M31.9498 16.0502C31.9498 16.0502 28.5621 25.0947 27.0001 26.6568C25.438 28.2189 22.9053 28.2189 21.3432 26.6568C19.7811 25.0947 19.7811 22.562 21.3432 20.9999C22.9053 19.4378 31.9498 16.0502 31.9498 16.0502Z" fill="none" stroke="#ffffff" stroke-width="4" stroke-linejoin="round"/>
        </svg>
      </button>
      <span id="txt-clockAnimate-time" class="time" title="当前时间"> 2017-08-25 00:00:00 </span>
      <input id="txt-clockAnimate-speed" type="number" class="mars3d-clockAnimate-speed" value="1" title="速度（倍率）" />
    `}_addedHook(){const e={_0x5ae338:383,_0x2d8026:470,_0x2fa383:2472,_0xa9cdcb:2472,_0x34d9f8:2257,_0x19425a:1844},t={_0x565d1a:1575},i={_0x31f576:3203},s={_0x168846:3356},r={_0x4f9160:2257,_0x1c1e4d:545},o=_0x3a2b68;this._container.querySelector("#btn-clockAnimate-now").addEventListener("click",l=>{const d=_0x20dc;this._map[d(r._0x4f9160)].currentTime=Cesium__namespace.JulianDate.now(),this[d(4303)](),this.fire(EventType.click,{mouseEvent:l,targetType:"now",time:this._map.clock[d(r._0x1c1e4d)]})});const _=this._container[o(2472)](o(1067));_.addEventListener(o(e._0x5ae338),l=>{const d=o;this[d(1575)].clock.shouldAnimate=!this._map.clock[d(s._0x168846)],this[d(4303)](),this.fire(EventType.click,{mouseEvent:l,targetType:"state",state:this._map[d(2257)].shouldAnimate})}),this._containerBtnStart=_,this[o(e._0x2d8026)]=this._container[o(e._0x2fa383)]("#txt-clockAnimate-time"),this._containerTime.addEventListener(o(383),l=>{const d=o;this.fire(EventType.click,{mouseEvent:l,targetType:d(i._0x31f576)})}),this[o(2512)]=this._container[o(e._0xa9cdcb)]("#txt-clockAnimate-speed"),this._containerSpeed.setAttribute("value",this._map[o(e._0x34d9f8)].multiplier),this._containerSpeed[o(e._0x19425a)]("change",l=>{const d=o,f=Number(this._containerSpeed[d(2251)]||1);!isNaN(f)&&(this[d(t._0x565d1a)].clock.multiplier=f,this[d(1109)](EventType.change,{mouseEvent:l,speed:f}))}),setTimeout(()=>{const l=o;this.isAdded&&this[l(840)](!![])},1e3),this.timeTik=setInterval(()=>{this.isAdded&&this.clock_onTickHandler()},500),this.clock_onTickHandler()}[_0x3a2b68(840)](e){const t={_0x213fd0:2081},i=_0x3a2b68;var s,r,o;const c=this._map.controls.timeline,_=c==null?void 0:c[i(527)];_&&!Cesium__namespace.defined((s=c.options)===null||s===void 0||(r=s.style)===null||r===void 0?void 0:r.left)&&(_.style.left=e?this._container.offsetWidth+1+"px":"0",c.resize());const l=(o=this._map.controls)===null||o===void 0?void 0:o.distanceLegend;if(l&&!Cesium__namespace.defined(l.options.bottom)){const d=e||_&&_[i(2748)][i(2085)]!=="none";l[i(1110)]({bottom:d?i(t._0x213fd0):"2px"})}}[_0x3a2b68(3916)](){const e=_0x3a2b68;this.timeTik&&(clearInterval(this.timeTik),this[e(2935)]=null)}clock_onTickHandler(){const e={_0x520ebf:1575,_0x500dca:1575},t=_0x3a2b68;this.updateStatus();const i=Number(this[t(2512)].value);this[t(e._0x520ebf)][t(2257)].multiplier!==i&&this._containerSpeed.setAttribute("value",this._map[t(2257)].multiplier);const s=Cesium__namespace[t(557)].toDate(this[t(e._0x500dca)].clock[t(545)]);this._containerTime.innerHTML=formatDate(s,this[t(1941)][t(1775)]||"yyyy-MM-dd HH:mm:ss")}[_0x3a2b68(4303)](){const e={_0xcad634:1192,_0x57d921:2748},t=_0x3a2b68;var i,s;if(this.isAnimate===this._map.clock.shouldAnimate)return;this[t(e._0xcad634)]=this._map.clock.shouldAnimate,this.isAnimate?(this._containerBtnStart.setAttribute(t(988),"暂停"),this._containerBtnStart[t(416)]=icon$1,this._containerSpeed[t(2748)].display="inline"):(this[t(2942)].setAttribute("title","继续"),this._containerBtnStart[t(416)]=icon,this._containerSpeed[t(e._0x57d921)].display=t(3662));const r=this._map.controls.timeline,o=r==null?void 0:r.container;o&&!Cesium__namespace.defined((i=r.options)===null||i===void 0||(s=i.style)===null||s===void 0?void 0:s.left)&&(o.style.left=this[t(2094)][t(727)]+1+"px",r[t(4067)]())}}register$1("clockAnimate",ClockAnimate);var index$1={__proto__:null,BaseControl,Animation,BaseLayerPicker,FullscreenButton,Geocoder,HomeButton,NavigationHelpButton,ProjectionPicker,SceneModePicker,Timeline,VRButton,LocationBar,MouseDownView,Zoom,ToolButton,Compass,DistanceLegend,MapSplit,MapCompare,OverviewMap,ClockAnimate};class BaiduPOI{constructor(e={}){const t={_0x2f787a:966,_0x583457:3550},i=_0x3a2b68;this[i(1941)]=e,this._key_index=0,this[i(t._0x2f787a)]=e[i(1624)]||baiduArr,this[i(t._0x583457)]=e.city||"全国"}get[_0x3a2b68(2953)](){return this._keys}set keys(e){this._keys=e}get key(){const e=_0x3a2b68,t=this[e(499)]++%this._keys.length;return this._keys[t]}_formatPOIData(e){const t={_0x2c344d:2934,_0x179e15:3055},i=_0x3a2b68,s=[];for(let c=0;c<e.length;c++){var r,o;const _=e[c];let l=[];_.location&&(l=gcj2wgs([_.location.lng,_[i(t._0x2c344d)].lat])),s.push({id:_.uid,name:_.name,lng:l[0],lat:l[1],type:((r=_.detail_info)===null||r===void 0?void 0:r[i(t._0x179e15)])??_.tag,xzqh:_.province+_.city+(_.district||_[i(3254)]||""),address:_.address,tel:_.telephone||"",detailUrl:(o=_[i(2044)])===null||o===void 0?void 0:o.detail_url,info:_,x:l[0],y:l[1],detail_info:_.detail_info})}return s}[_0x3a2b68(3049)](e){return isString(e)?e.replace(/ /gm,"$").replace(/,/gm,"$"):Array.isArray(e)?e.join("$"):e}getAddress(e){const t={_0x540427:738,_0x50b186:4079,_0x2720fa:2882,_0x450ef1:1941,_0xa83e47:3596},i=_0x3a2b68;if(this[i(2882)])return Promise.resolve();const s={ak:this[i(1624)],output:"json",language:"zh-CN",coordtype:"wgs84ll",ret_coordtype:"gcj02ll"},r=LngLatPoint[i(t._0x540427)](e.location);return s.location=r[i(671)]+","+r[i(t._0x50b186)],this[i(t._0x2720fa)]=!![],Cesium__namespace.Resource.fetchJsonp({url:"https://api.map.baidu.com/reverse_geocoding/v3/",...this[i(t._0x450ef1)],queryParameters:s}).then(o=>{const c=i;if(this._getAddress_ing=![],o.status!==0){console.log("未查询到相关结果！",o);return}const _=o[c(3110)],l={address:_.formatted_address,city:_[c(2988)],component:_.addressComponent};return e.success&&e.success(l),l})[i(t._0xa83e47)](o=>{const c=i;this[c(2882)]=![],logError$1("BaiduPOI 请求出错",o),e.error&&e.error("请求出错",o)})}autoTip(e){const t={_0x54532e:1776,_0x5d6b87:3550,_0x1746f1:1388,_0x52b443:2011,_0xcdee9a:3049,_0x4f25e2:3640,_0x3fe6c6:4079,_0x6a28ce:4357},i=_0x3a2b68,s={ak:this.key,output:i(t._0x54532e),ret_coordtype:"gcj02ll"};if(Cesium__namespace.defined(this._city)&&(s.region=this[i(t._0x5d6b87)],s.city_limit=!![]),Cesium__namespace[i(407)](e[i(t._0x1746f1)])&&(s.region=e[i(t._0x1746f1)],s.city_limit=!![]),Cesium__namespace.defined(e.citylimit)&&(s[i(t._0x52b443)]=e.citylimit),e.text&&(s.query=this[i(t._0xcdee9a)](e[i(t._0x4f25e2)])),e.location){s.coord_type=1;const r=LngLatPoint.parse(e.location);s.location=r.lat+","+r[i(t._0x3fe6c6)]}return Cesium__namespace[i(t._0x6a28ce)].fetchJsonp({url:"https://api.map.baidu.com/place/v2/suggestion",...this.options,queryParameters:s}).then(r=>{const o=i;if(r.status!==0){console.log(o(2655),r);return}const c=this._formatPOIData(r[o(3110)]),_={allcount:r.total,count:c[o(400)],list:c};return e.success&&e.success(_),_}).catch(r=>{logError$1("BaiduPOI 请求出错",r),e.error&&e.error("请求出错",r)})}detail(e){const t={_0x4ef89c:1853},i={_0x291144:2655},s=_0x3a2b68,r={ak:this.key,output:"json",ret_coordtype:"gcj02ll",uid:e.id};return Cesium__namespace.Resource.fetchJsonp({url:"https://api.map.baidu.com/place/v2/detail",queryParameters:r,...this.options}).then(o=>{const c=_0x20dc;if(o.status!==0){console.log(c(i._0x291144),o);return}if(!o.pois||o.pois[c(400)]===0){e[c(4094)]&&e.error("未查询到相关结果！",o);return}const _=o;return e.success&&e[c(1512)](_),_})[s(3596)](o=>{logError$1(s(t._0x4ef89c),o),e.error&&e.error("请求出错",o)})}[_0x3a2b68(1292)](e){const t={_0x10f765:827,_0x268457:4383},i=_0x3a2b68,s=e[i(2471)];return s?s[i(1603)]==="rectangle"?(e.polygon=s.outlineCoordinates,this.queryPolygon(e)):s.type==="polygon"?(e.polygon=s.coordinates,this[i(t._0x10f765)](e)):s.type==="circle"?(e.location=s.point,e.radius=s.radius,this[i(2900)](e)):Promise.resolve(![]):e[i(t._0x268457)]?this.queryPolygon(e):this.queryText(e)}queryText(e){const t={_0x3e3c34:3550,_0x578223:407,_0x3c8d23:1388,_0x1d0bd3:2011,_0x21c693:3640,_0x2488e1:3640,_0x125cdc:2934,_0x227307:3075},i={_0x3682d7:1853,_0x40e751:1693},s={_0x5ee70b:1786,_0x149ef8:3859,_0x541aa7:400,_0x5a38af:1512},r=_0x3a2b68,o={ak:this.key,output:"json",ret_coordtype:"gcj02ll",scope:2,page_num:e.page||0,page_size:e[r(2969)]||20,tag:e.types||""};if(Cesium__namespace[r(407)](this[r(t._0x3e3c34)])&&(o.region=this[r(3550)],o.city_limit=!![]),Cesium__namespace[r(t._0x578223)](e[r(t._0x3c8d23)])&&(o.region=e[r(1388)],o[r(t._0x1d0bd3)]=!![]),Cesium__namespace[r(407)](e.citylimit)&&(o.city_limit=e.citylimit),e[r(t._0x21c693)]&&(o.query=this._getKeywords(e[r(t._0x2488e1)])),e[r(2934)]){o[r(1375)]=1;const c=LngLatPoint.parse(e[r(t._0x125cdc)]);o.location=c.lat+","+c.lng}return Cesium__namespace.defined(e.radius)&&(e.radius>5e6?delete o[r(2934)]:o.radius=e[r(3878)],Cesium__namespace.defined(e.radiuslimit)&&(o[r(t._0x227307)]=e.radiuslimit)),Cesium__namespace.Resource.fetchJsonp({url:r(2276),...this.options,queryParameters:o}).then(c=>{const _=r;if(c[_(s._0x5ee70b)]!==0){const f=_(2579)+c.status+")："+c.message;e.error&&e.error(f);return}if(!c.results||c.result_type==="city_type"||c[_(s._0x149ef8)][_(s._0x541aa7)]===0)if(e._sendCount){const f={allcount:0,count:0,list:[]};return e.success&&e.success(f),f}else return delete e.radius,delete e.location,e._sendCount=1,this[_(1249)](e);const l=this._formatPOIData(c.results),d={allcount:c.total,count:l.length,list:l};return e[_(s._0x5a38af)]&&e.success(d),d}).catch(c=>{const _=r;logError$1(_(i._0x3682d7),c),e.error&&e[_(4094)](_(i._0x40e751),c)})}queryCircle(e){const t={_0x193ce0:1624,_0x146c40:2414,_0xdbe871:1375,_0x199834:2934,_0x31593c:1292,_0x4a2cea:1941},i={_0x327326:2579},s=_0x3a2b68,r={ak:this[s(t._0x193ce0)],output:"json",ret_coordtype:"gcj02ll",scope:2,radius:e.radius||3e3,radius_limit:e[s(4376)],page_num:e[s(t._0x146c40)]||0,page_size:e.count||20,tag:e[s(1128)]||""};if(e.location){r[s(t._0xdbe871)]=1;const o=LngLatPoint.parse(e[s(t._0x199834)]);r.location=o.lat+","+o.lng}else logError$1("BaiduPOI: 请传入参location数");return e.text?r[s(1292)]=this._getKeywords(e.text):r[s(t._0x31593c)]=s(668),Cesium__namespace.Resource.fetchJsonp({url:"https://api.map.baidu.com/place/v2/search",...this[s(t._0x4a2cea)],queryParameters:r})[s(4389)](o=>{const c=s;if(o.status!==0){const f=c(i._0x327326)+o[c(1786)]+")："+o[c(3995)];e.error&&e[c(4094)](f);return}if(!o.results||o[c(500)]==="city_type"||o.results.length===0){e.error&&e.error("未查询到相关结果！",o);return}const _=this._formatPOIData(o.results);let l;e[c(4376)]?l=this._filterPOIData_circle(_,e[c(2934)],r[c(3878)]):l=_;const d={allcount:o.total,count:l.length,list:l};return e.success&&e.success(d),d})[s(3596)](o=>{logError$1("BaiduPOI 请求出错",o),e.error&&e.error("请求出错",o)})}[_0x3a2b68(2539)](e,t,i){const s=_0x3a2b68;if(!e||!t||!i)return e;const r=t.toCartesian(),o=[];for(let c=0;c<e.length;c++){const _=e[c],l=Cesium__namespace.Cartesian3.fromDegrees(_.x,_.y,t[s(1879)]);Cesium__namespace.Cartesian3.distance(l,r)<i&&o.push(_)}return o}queryPolygon(e){const t={_0x28e839:1128,_0x2a6012:941,_0x552d66:3640,_0x10b3d5:1292},i={_0x2714cc:1693},s={_0xe8ebdd:3859,_0x554c83:4094},r=_0x3a2b68,o={ak:this.key,output:"json",ret_coordtype:"gcj02ll",scope:2,radius:e.radius||3e3,radius_limit:e.limit,page_num:e.page||0,page_size:e.count||20,tag:e[r(t._0x28e839)]||""},c=e[r(4383)];let _=c;if(c.length===2){const l=c[0][0],d=c[1][0],f=c[0][1],g=c[1][1],b=(l+d)/2,C=(f+g)/2;_=[[l,g],[l,f],[d,f],[d,g],[l,g]],o.coord_type=1,o[r(2934)]=C+","+b,o.radius=Math.max(getDistance([[b,C],c[0]]),getDistance([[b,C],c[1]]))}else{const l=getExtentByGeoJSON({type:"Feature",properties:{},geometry:{type:"LineString",coordinates:c}}),d=(l.xmin+l.xmax)/2,f=(l.ymin+l[r(2269)])/2;o.coord_type=1,o.location=f+","+d,o.radius=Math.max(getDistance([[d,f],[l.xmin,l[r(t._0x2a6012)]]]),getDistance([[d,f],[l.xmax,l.ymax]]))}return e.text?o.query=this[r(3049)](e[r(t._0x552d66)]):o[r(t._0x10b3d5)]="行政地标",Cesium__namespace.Resource[r(487)]({url:"https://api.map.baidu.com/place/v2/search",queryParameters:o,...this.options}).then(l=>{const d=r;if(l.status!==0){const C="POI 请求失败("+l.status+")："+l.message;e.error&&e.error(C);return}if(!l[d(s._0xe8ebdd)]||l.result_type==="city_type"||l.results.length===0){e.error&&e[d(s._0x554c83)]("未查询到相关结果！",l);return}const f=this._formatPOIData(l[d(3859)]);let g;e.limit?g=this._filterPOIData_polygon(f,_):g=f;const b={allcount:l.total,count:g[d(400)],list:g};return e[d(1512)]&&e.success(b),b}).catch(l=>{const d=r;logError$1("BaiduPOI 请求出错",l),e.error&&e.error(d(i._0x2714cc),l)})}_filterPOIData_polygon(e,t){const i={_0x46763b:4083,_0x1c6fdf:370},s=_0x3a2b68;if(!e||!t)return;t=t[s(i._0x46763b)]([t[0]]);const r={type:"Polygon",coordinates:[t]},o=[];for(let c=0;c<e[s(400)];c++){const _=e[c],l={type:s(i._0x1c6fdf),geometry:{type:"Point",coordinates:[_.x,_.y]}};booleanPointInPolygon(l,r)&&o.push(_)}return o}}class GaodePOI{constructor(e={}){this.options=e,this._key_index=0,this._keys=e.key||gaodeArr}get keys(){return this[_0x3a2b68(966)]}set[_0x3a2b68(2953)](e){this._keys=e}get[_0x3a2b68(1624)](){const e=this._key_index++%this._keys.length;return this._keys[e]}_formatPOIData(e){const t={_0x275028:1672},i=_0x3a2b68,s=[];for(let r=0;r<e.length;r++){const o=e[r];let c=[];o.location&&o.location.length>0&&(c=gcj2wgs(o.location.split(","))),s[i(1754)]({id:o.id,name:o.name,lng:Number(c[0]),lat:Number(c[1]),type:o.type,xzqh:o[i(3462)]+o[i(t._0x275028)]+o.adname,address:o.address,tel:o.tel||"",info:o,x:Number(c[0]),y:Number(c[1])})}return s}_getKeywords(e){const t={_0xe2db09:4262,_0x45a495:391},i=_0x3a2b68;return isString(e)?e[i(t._0xe2db09)](/ /gm,"|").replace(/,/gm,"|"):Array[i(t._0x45a495)](e)?e.join("|"):e}[_0x3a2b68(2869)](e){const t={_0x2d32fd:2934,_0x2b382e:487},i={_0x21f141:3061,_0x7afa06:1512},s=_0x3a2b68;if(this._getAddress_ing)return Promise.resolve();const r={key:this.key,output:"json"};e[s(2934)]=LngLatPoint.parse(e[s(t._0x2d32fd)]);const o=wgs2gcj([e.location.lng,e.location.lat]);return r.location=o[0]+","+o[1],this._getAddress_ing=!![],Cesium__namespace[s(4357)][s(t._0x2b382e)]({url:"https://restapi.amap.com/v3/geocode/regeo",...this[s(1941)],queryParameters:r}).then(c=>{const _=s;var l;if(this._getAddress_ing=![],c.infocode!==_(i._0x21f141)){console.log("未查询到相关结果！",c);return}const d=c.regeocode,f={address:d.formatted_address,city:(l=d[_(856)])===null||l===void 0?void 0:l.adcode,component:d.addressComponent};return e.success&&e[_(i._0x7afa06)](f),f}).catch(c=>{const _=s;this._getAddress_ing=![],logError$1("GaodePOI 请求出错",c),e.error&&e[_(4094)]("请求出错",c)})}[_0x3a2b68(3460)](e){const t={_0x1dc8b8:1388,_0x32104e:2529,_0x3a95e2:738,_0x3915be:1941},i={_0x1d3fee:2881},s=_0x3a2b68,r={key:this[s(1624)],output:"json"};if(Cesium__namespace.defined(e.city)&&(r.city=e[s(t._0x1dc8b8)],r.citylimit=!![]),Cesium__namespace.defined(e[s(2529)])&&(r[s(t._0x32104e)]=e.citylimit),e.text&&(r.keywords=this._getKeywords(e.text)),e.location){e.location=LngLatPoint[s(t._0x3a95e2)](e.location);const o=wgs2gcj([e.location[s(4079)],e.location.lat]);r.location=o[0]+","+o[1]}return fetchJson({url:"https://restapi.amap.com/v3/assistant/inputtips",queryParameters:r,...this[s(t._0x3915be)]}).then(o=>{const c=s;if(!o.tips){console.log("未查询到相关结果！",o);return}const _=this[c(i._0x1d3fee)](o.tips),l={allcount:o.count,count:_.length,list:_};return e.success&&e.success(l),l}).catch(o=>{logError$1("GaodePOI 请求出错",o),e.error&&e.error("请求出错",o)})}detail(e){const t={_0x563158:3948,_0x18a602:1941},i={_0x48aacf:1366,_0x190866:2278},s=_0x3a2b68,r={key:this.key,id:e.id,output:s(1776)};return fetchJson({url:s(t._0x563158),queryParameters:r,...this[s(t._0x18a602)]}).then(o=>{const c=s;if(o[c(3972)]!==c(3061)){const l="POI 请求失败("+o.infocode+")："+o[c(i._0x48aacf)];e[c(4094)]&&e.error(l);return}if(!o.pois||o[c(i._0x190866)][c(400)]===0){e.error&&e.error("未查询到相关结果！",o);return}const _=o.pois[0];return e[c(1512)]&&e.success(_),_}).catch(o=>{const c=s;logError$1("GaodePOI 请求出错",o),e.error&&e[c(4094)]("请求出错",o)})}[_0x3a2b68(1292)](e){const t={_0x302a76:827,_0x31a82b:3811,_0x4f88c4:583},i=_0x3a2b68,s=e.graphic;return s?s.type==="rectangle"?(e[i(4383)]=s.outlineCoordinates,this.queryPolygon(e)):s.type==="polygon"?(e.polygon=s.coordinates,this[i(t._0x302a76)](e)):s[i(1603)]===i(t._0x31a82b)?(e.location=s.point,e.radius=s.radius,this.queryCircle(e)):Promise[i(t._0x4f88c4)]():e.polygon?this.queryPolygon(e):this.queryText(e)}queryText(e){const t={_0x51cc18:2414,_0xd668c3:1388,_0x5af8c0:3585,_0x47a94c:1941},i={_0x4fdb1d:2655,_0xdb46ba:400},s=_0x3a2b68,r={key:this.key,output:"json",page:(e[s(t._0x51cc18)]||0)+1,offset:e[s(2969)]||20,types:e.types||""};return Cesium__namespace[s(407)](e[s(t._0xd668c3)])&&(r.city=e.city,r.citylimit=!![]),Cesium__namespace[s(407)](e[s(2529)])&&(r[s(2529)]=e.citylimit),e.text?r[s(t._0x5af8c0)]=this[s(3049)](e.text):!r.types&&(r.types="120000|130000|190000"),fetchJson({url:"https://restapi.amap.com/v3/place/text",queryParameters:r,...this[s(t._0x47a94c)]}).then(o=>{const c=s;if(o.infocode!=="10000"){const d="POI 请求失败("+o.infocode+")："+o.info;e[c(4094)]&&e[c(4094)](d);return}if(!o.pois){e.error&&e.error(c(i._0x4fdb1d),o);return}const _=this._formatPOIData(o.pois),l={allcount:o.count,count:_[c(i._0xdb46ba)],list:_};return e.success&&e.success(l),l}).catch(o=>{const c=s;logError$1("GaodePOI 请求出错",o),e.error&&e[c(4094)](c(1693),o)})}queryCircle(e){const t={_0x6dc5a9:2969,_0x3862ea:1128,_0x53e2d4:4079,_0x1f5d70:671},i={_0x4c9be5:4094},s={_0x299fd2:2969,_0x54194c:400},r=_0x3a2b68,o={output:"json",key:this.key,radius:e.radius||3e3,page:(e.page||0)+1,offset:e[r(t._0x6dc5a9)]||20,types:e[r(t._0x3862ea)]||""};if(e.location){e.location=LngLatPoint.parse(e.location);const c=wgs2gcj([e.location[r(t._0x53e2d4)],e.location[r(t._0x1f5d70)]]);o.location=c[0]+","+c[1]}else logError$1("GaodePOI: 请传入参location数");return e.text?o.keywords=this._getKeywords(e[r(3640)]):!o[r(t._0x3862ea)]&&(o[r(t._0x3862ea)]="120000|130000|190000"),fetchJson({url:"https://restapi.amap.com/v3/place/around",queryParameters:o,...this.options}).then(c=>{const _=r;if(c.infocode!=="10000"){if(e[_(4094)]){const g="POI 请求失败("+c.infocode+")："+c.info;e.error(g)}return}if(!c.pois){e.error&&e[_(4094)]("未查询到相关结果！",c);return}const l=this[_(2881)](c.pois);let d;e.limit?d=this._filterPOIData_circle(l,e.location,o.radius):d=l;const f={allcount:c[_(s._0x299fd2)],count:d[_(s._0x54194c)],list:d};return e.success&&e.success(f),f}).catch(c=>{const _=r;logError$1(_(4151),c),e.error&&e[_(i._0x4c9be5)]("请求出错",c)})}_filterPOIData_circle(e,t,i){const s={_0x2324b0:1378,_0x21d31d:2978},r=_0x3a2b68;if(!e||!t||!i)return e;const o=t[r(s._0x2324b0)](),c=[];for(let _=0;_<e.length;_++){const l=e[_],d=Cesium__namespace[r(s._0x21d31d)].fromDegrees(l.x,l.y,t.alt);Cesium__namespace[r(s._0x21d31d)].distance(d,o)<i&&c[r(1754)](l)}return c}queryPolygon(e){const t={_0x4ef0f4:4383,_0x4d59ff:400},i={_0x2c41b8:2579,_0x451ec8:4094,_0x393eff:2278,_0x79bcf2:2881,_0x582b8a:1512},s=_0x3a2b68,r={key:this.key,output:s(1776),page:(e[s(2414)]||0)+1,offset:e[s(2969)]||20,types:e.types||""},o=e[s(4383)];let c=[];if(o.length===2){const _=wgs2gcj(o[0]),l=wgs2gcj(o[1]);r[s(t._0x4ef0f4)]=_[0]+","+_[1]+"|"+l[0]+","+l[1],c=[o[0],[o[0][0],o[1][1]],o[1],[o[1][0],o[0][1]]]}else{c=o;let _="";const l=o[s(4083)]([o[0]]);for(let d=0;d<l[s(t._0x4d59ff)];d++){const f=wgs2gcj(l[d]);d===l.length-1?_+=f[0]+","+f[1]:_+=f[0]+","+f[1]+"|"}r.polygon=_}return e.text?r.keywords=this._getKeywords(e.text):!r.types&&(r.types="120000|130000|190000"),fetchJson({url:"https://restapi.amap.com/v3/place/polygon",queryParameters:r,...this[s(1941)]}).then(_=>{const l=s;if(_.infocode!=="10000"){if(e.error){const b=l(i._0x2c41b8)+_[l(3972)]+")："+_.info;e[l(i._0x451ec8)](b)}return}if(!_[l(i._0x393eff)]){e[l(4094)]&&e.error(l(2655),_);return}const d=this[l(i._0x79bcf2)](_.pois);let f;e.limit?f=this._filterPOIData_polygon(d,c):f=d;const g={allcount:_[l(2969)],count:f.length,list:f};return e[l(i._0x582b8a)]&&e.success(g),g})[s(3596)](_=>{const l=s;logError$1(l(4151),_),e.error&&e[l(4094)]("请求出错",_)})}[_0x3a2b68(2067)](e,t){const i={_0x98f5ff:370},s=_0x3a2b68;if(!e||!t)return;t=t.concat([t[0]]);const r={type:"Polygon",coordinates:[t]},o=[];for(let c=0;c<e.length;c++){const _=e[c],l={type:s(i._0x98f5ff),geometry:{type:"Point",coordinates:[_.x,_.y]}};booleanPointInPolygon(l,r)&&o.push(_)}return o}}class TdtPOI{constructor(e={}){const t=_0x3a2b68;this.options=e,this[t(499)]=0,this._keys=e.key||tiandituArr}get keys(){return this[_0x3a2b68(966)]}set keys(e){this._keys=e}get key(){const e=_0x3a2b68,t=this._key_index++%this._keys[e(400)];return this._keys[t]}_formatPOIData(e){const t=_0x3a2b68,i=[];for(let s=0;s<e.length;s++){const r=e[s];let o=[];r.lonlat&&r.lonlat.length>0&&(o=r.lonlat[t(821)](",")),i.push({id:r[t(824)],name:r.name,lng:Number(o[0]),lat:Number(o[1]),type:r.typeName,xzqh:r.province+r[t(1388)]+r.county,address:r.address,tel:r.phone||"",info:r,x:Number(o[0]),y:Number(o[1])})}return i}_getKeywords(e){return isString(e)?e.replace(/ /gm,"|").replace(/,/gm,"|"):Array.isArray(e)?e.join("|"):e}[_0x3a2b68(2869)](e){const t={_0xc87b96:1624,_0x5adccc:3596},i={_0x37389d:1512},s=_0x3a2b68;if(this._getAddress_ing)return Promise.resolve();const r={ver:1};return e.location=LngLatPoint.parse(e.location),r.lon=e[s(2934)].lng,r.lat=e[s(2934)].lat,this._getAddress_ing=!![],sendAjax({url:"http://api.tianditu.gov.cn/geocoder",...this.options,queryParameters:{type:"geocode",tk:this[s(t._0xc87b96)],postStr:JSON.stringify(r)}}).then(o=>{const c=s;var _,l;if(this._getAddress_ing=![],((_=o.status)===null||_===void 0?void 0:_.infocode)!==1e3){console[c(1798)]("未查询到相关结果！",o);return}const d=o.result,f={address:d.formatted_address,city:(((l=d.addressComponent)===null||l===void 0?void 0:l.county_code)||"").replace(c(2508),""),component:d.addressComponent};return e.success&&e[c(i._0x37389d)](f),f})[s(t._0x5adccc)](o=>{const c=s;this._getAddress_ing=![],logError$1("TdtPOI 请求出错",o),e.error&&e.error(c(1693),o)})}autoTip(e){const t={_0x292c85:1624,_0x2a6ba4:1941},i={_0x53ba04:4094},s={_0x514035:4094,_0x471cb2:2278,_0x2bc6c4:1512},r=_0x3a2b68,o={queryType:7,show:1,level:e.level||18,mapBound:e.mapBound||"70,18,134,51",start:0,offset:10};return Cesium__namespace.defined(e.city)&&(o[r(2415)]="156"+e.city),Cesium__namespace[r(407)](e.types)&&(o[r(1411)]=e.types),e.text&&(o.keyWord=this._getKeywords(e.text)),fetchJson({url:r(3713),queryParameters:{type:"query",tk:this[r(t._0x292c85)],postStr:JSON.stringify(o)},...this[r(t._0x2a6ba4)]})[r(4389)](c=>{const _=r;var l;if(((l=c.status)===null||l===void 0?void 0:l.infocode)!==1e3){console.log("未查询到相关结果！",c),e.error&&e[_(s._0x514035)](c.status.cndesc,c);return}if(!c.pois){e.error&&e.error(_(2655),c);return}const d=this._formatPOIData(c[_(s._0x471cb2)]),f={allcount:c.count,count:d[_(400)],list:d};return e[_(1512)]&&e[_(s._0x2bc6c4)](f),f}).catch(c=>{const _=r;logError$1(_(3259),c),e[_(i._0x53ba04)]&&e.error("请求出错",c)})}query(e){const t={_0x1f3b1a:1603,_0x172931:4383,_0x1890e0:3811,_0x24fddd:2879,_0x6bed58:2900,_0x254492:1249},i=_0x3a2b68,s=e.graphic;return s?s.type==="rectangle"?(e.polygon=s.outlineCoordinates,this.queryPolygon(e)):s[i(t._0x1f3b1a)]===i(t._0x172931)?(e.polygon=s.coordinates,this.queryPolygon(e)):s.type===i(t._0x1890e0)?(e.location=s[i(t._0x24fddd)],e.radius=s.radius,this[i(t._0x6bed58)](e)):Promise.resolve():e.polygon?this[i(827)](e):this[i(t._0x254492)](e)}queryText(e){const t={_0x5d1b82:1e3,_0x29b952:1384,_0x139507:2414,_0x2f133f:2508,_0x4754b2:1411},i={_0x4c295e:3259,_0x222bc2:4094},s={_0xff5d78:2881,_0x4a8e28:2969},r=_0x3a2b68,o=e.count||20,c={queryType:7,show:2,level:e.level||18,mapBound:e[r(t._0x5d1b82)]||r(t._0x29b952),start:(e[r(t._0x139507)]||0)*o,offset:o};return Cesium__namespace.defined(e.city)&&(c.specify=r(t._0x2f133f)+e.city),Cesium__namespace.defined(e.types)&&(c[r(t._0x4754b2)]=e.types),e.text&&(c.keyWord=this._getKeywords(e.text)),fetchJson({url:"http://api.tianditu.gov.cn/v2/search",queryParameters:{type:r(1292),tk:this[r(1624)],postStr:JSON.stringify(c)},...this[r(1941)]}).then(_=>{const l=r;var d;if(((d=_.status)===null||d===void 0?void 0:d.infocode)!==1e3){console.log("未查询到相关结果！",_),e.error&&e.error(_.status.cndesc,_);return}if(!_.pois){e.error&&e.error("未查询到相关结果！",_);return}const f=this[l(s._0xff5d78)](_.pois),g={allcount:_[l(s._0x4a8e28)],count:f[l(400)],list:f};return e.success&&e.success(g),g})[r(3596)](_=>{const l=r;logError$1(l(i._0x4c295e),_),e.error&&e[l(i._0x222bc2)]("请求出错",_)})}[_0x3a2b68(2900)](e){const t={_0x800942:4079,_0x2ed446:3640,_0x42b166:3049},i={_0x29a320:4094,_0x2a0ab4:400},s=_0x3a2b68,r=e.count||20,o={queryType:3,show:2,queryRadius:formatNum$1(e.radius||3e3,0),start:(e.page||0)*r,offset:r};return e.location?(e[s(2934)]=LngLatPoint.parse(e.location),o.pointLonlat=e.location[s(t._0x800942)]+","+e[s(2934)].lat):logError$1(s(2927)),Cesium__namespace.defined(e.types)&&(o.dataTypes=e.types),e[s(t._0x2ed446)]&&(o.keyWord=this[s(t._0x42b166)](e.text)),fetchJson({url:"http://api.tianditu.gov.cn/v2/search",queryParameters:{type:"query",tk:this[s(1624)],postStr:JSON.stringify(o)},...this.options})[s(4389)](c=>{const _=s;var l;if(((l=c.status)===null||l===void 0?void 0:l.infocode)!==1e3){e[_(i._0x29a320)]&&e[_(4094)](c.status.cndesc,c);return}if(!c[_(2278)]){e.error&&e.error("未查询到相关结果！",c);return}const d=this._formatPOIData(c.pois);let f;e.limit?f=this._filterPOIData_circle(d,e.location,o.radius):f=d;const g={allcount:c.count,count:f[_(i._0x2a0ab4)],list:f};return e.success&&e.success(g),g}).catch(c=>{const _=s;logError$1("TdtPOI 请求出错",c),e.error&&e.error(_(1693),c)})}_filterPOIData_circle(e,t,i){const s={_0x32155b:1378,_0x17f0c8:1879,_0x5e06c5:3481},r=_0x3a2b68;if(!e||!t||!i)return e;const o=t[r(s._0x32155b)](),c=[];for(let _=0;_<e.length;_++){const l=e[_],d=Cesium__namespace.Cartesian3.fromDegrees(l.x,l.y,t[r(s._0x17f0c8)]);Cesium__namespace.Cartesian3[r(s._0x5e06c5)](d,o)<i&&c.push(l)}return c}queryPolygon(e){const t={_0x5b25e3:4383,_0x4adf2e:3049,_0x17492f:3713,_0x440337:1624},i={_0x5960a9:3972,_0x5c7d7f:2278,_0x7b0b55:1512},s=_0x3a2b68,r=e[s(2969)]||20,o={queryType:10,show:2,start:(e.page||0)*r,offset:r},c=LngLatArray.toArray(e.polygon);if(c.length===2)return e.extent=e[s(t._0x5b25e3)],this[s(1471)](e);let _="";const l=c.concat([c[0]]);for(let d=0;d<l.length;d++){const f=l[d];d===l.length-1?_+=f[0]+","+f[1]:_+=f[0]+","+f[1]+","}return o.polygon=_,Cesium__namespace.defined(e.types)&&(o.dataTypes=e.types),e.text&&(o.keyWord=this[s(t._0x4adf2e)](e.text)),fetchJson({url:s(t._0x17492f),queryParameters:{type:"query",tk:this[s(t._0x440337)],postStr:JSON.stringify(o)},...this[s(1941)]}).then(d=>{const f=s;var g;if(((g=d.status)===null||g===void 0?void 0:g[f(i._0x5960a9)])!==1e3){e.error&&e.error(d.status.cndesc,d);return}if(!d[f(i._0x5c7d7f)]){e[f(4094)]&&e.error(f(2655),d);return}const b=this._formatPOIData(d.pois);let C;e[f(4376)]?C=this._filterPOIData_polygon(b,c):C=b;const P={allcount:d.count,count:C.length,list:C};return e[f(i._0x7b0b55)]&&e.success(P),P}).catch(d=>{const f=s;logError$1(f(3259),d),e.error&&e[f(4094)](f(1693),d)})}[_0x3a2b68(2067)](e,t){if(!e||!t)return;t=t.concat([t[0]]);const i={type:"Polygon",coordinates:[t]},s=[];for(let r=0;r<e.length;r++){const o=e[r],c={type:"Feature",geometry:{type:"Point",coordinates:[o.x,o.y]}};booleanPointInPolygon(c,i)&&s.push(o)}return s}queryExtent(e){const t={_0x5e1143:2414,_0x2fd9a9:1411},i={_0x45df48:1786,_0x4e1af0:4094,_0x5bf7dd:2655},s=_0x3a2b68,r=e[s(2969)]||20,o={queryType:2,show:2,level:18,start:(e[s(t._0x5e1143)]||0)*r,offset:r},c=e.extent[0],_=e.extent[1];return o[s(1e3)]=c[0]+","+c[1]+","+_[0]+","+_[1],Cesium__namespace[s(407)](e[s(1128)])&&(o[s(t._0x2fd9a9)]=e[s(1128)]),e.text&&(o.keyWord=this._getKeywords(e.text)),fetchJson({url:"http://api.tianditu.gov.cn/v2/search",queryParameters:{type:"query",tk:this.key,postStr:JSON.stringify(o)},...this.options}).then(l=>{const d=s;var f;if(((f=l[d(i._0x45df48)])===null||f===void 0?void 0:f.infocode)!==1e3){e.error&&e.error(l.status.cndesc,l);return}if(!l.pois){e[d(i._0x4e1af0)]&&e.error(d(i._0x5bf7dd),l);return}const g=this._formatPOIData(l.pois),b={allcount:l.count,count:g.length,list:g};return e.success&&e[d(1512)](b),b}).catch(l=>{const d=s;logError$1("TdtPOI 请求出错",l),e.error&&e[d(4094)]("请求出错",l)})}}const RouteType={Walking:1,Bicycling:2,Driving:3};class GaodeRoute{constructor(e={}){const t=_0x3a2b68;this[t(1941)]=e,this[t(499)]=0,this._keys=e.key||gaodeArr}get keys(){return this._keys}set[_0x3a2b68(2953)](e){this._keys=e}get key(){const e={_0x5a8fcb:966},t=_0x3a2b68,i=this._key_index++%this[t(e._0x5a8fcb)].length;return this[t(966)][i]}[_0x3a2b68(1392)](e,t,i){const s={_0x50ecd6:400,_0x3273d4:1048},r=_0x3a2b68;let o,c;const _=[];if(e&&(o=gcj2wgs(e[r(821)](","))),t&&(c=gcj2wgs(t.split(","))),i&&i[r(s._0x50ecd6)]>0)for(let l=0;l<i.length;l++){const d=[];d.push(o);const f=i[l],g=f[r(4395)],b=[],C=[];for(let P=0;P<g.length;P++){const S={instruction:g[P].instruction,distance:g[P].distance,duration:g[P].duration,points:[],route:g[P][r(408)]},L=g[P].polyline,E=L.split(";");for(let M=0;M<E.length;M++){const D=E[M],R=gcj2wgs(D[r(821)](","));d.push(R),S.points.push(R)}C.push(S[r(s._0x3273d4)]),b.push(S)}d.push(c),_.push({allDistance:f.distance,allDuration:f[r(2096)],steps:b,points:d,road:C})}return{origin:o,destination:c,paths:_}}query(e){const t={_0xef2c66:759},i=_0x3a2b68;switch(e.type){case RouteType.Bicycling:return this.queryBicycling(e);case RouteType[i(3830)]:return this[i(1024)](e);case RouteType.Walking:default:return this[i(t._0xef2c66)](e)}}queryArr(e){return new Promise((t,i)=>{const s=_0x20dc,r=this;let o=-1;const c={};for(const f in e)f==="points"||f==="success"||f==="error"||(c[f]=e[f]);const _=e[s(4274)],l=[];function d(){const f={_0x245154:400,_0x57d95a:1512},g=s;o++,c.points=_[o],c.success=function(b){const C=_0x20dc;b&&b[C(1774)]&&b.paths[C(400)]>0?l.push(b.paths[0]):l.push(null),o>=_[C(f._0x245154)]-1?(e[C(f._0x57d95a)]&&e.success(l),t(l)):d()},c.error=c[g(1512)],r.query(c)}d()})}[_0x3a2b68(2118)](e){const t=_0x3a2b68;let i=Number[t(2617)],s=null,r=-1;for(let o=0;o<e.length;o++){const c=e[o];c&&c.allDistance<=i&&(s=c,r=o,i=c[t(2216)])}return{lineData:s,index:r}}queryWalking(e){const t={_0x13240a:2655,_0x4a688f:1512},i=_0x3a2b68,s={key:this.key,output:i(1776)},r=wgs2gcj(e.points[0]),o=wgs2gcj(e.points[e.points.length-1]);return s.origin=r[0]+","+r[1],s[i(1898)]=o[0]+","+o[1],fetchJson({url:"https://restapi.amap.com/v3/direction/walking",queryParameters:s,...this[i(1941)]}).then(c=>{const _=i;if(c.infocode!=="10000"){if(e.error){const d="路径规划 请求失败("+c[_(3972)]+")："+c.info;e.error(d)}return}if(!c.route||!c.route.paths){e[_(4094)]&&e[_(4094)](_(t._0x13240a));return}const l=this._formatRouteData(s.origin,s.destination,c[_(1048)][_(1774)]);return e.success&&e[_(t._0x4a688f)](l),l})[i(3596)](c=>{logError$1(i(552),c),e.error&&e.error("请求出错",c)})}queryBicycling(e){const t={_0x270d12:1776,_0x3c3268:4274,_0x507bea:1898},i={_0x4acf8e:4094,_0xa11cd5:1787},s=_0x3a2b68,r={key:this.key,output:s(t._0x270d12)},o=wgs2gcj(e.points[0]),c=wgs2gcj(e[s(t._0x3c3268)][e.points.length-1]);return r.origin=o[0]+","+o[1],r[s(t._0x507bea)]=c[0]+","+c[1],fetchJson({url:"https://restapi.amap.com/v4/direction/bicycling",queryParameters:r,...this.options}).then(_=>{const l=s;if(_.infocode!=="10000"){const f="路径规划 请求失败("+_.infocode+")："+_.info;e[l(4094)]&&e[l(i._0x4acf8e)](f);return}if(!_.route||!_.route.paths){e[l(4094)]&&e.error("未查询到相关结果！");return}const d=this._formatRouteData(r[l(i._0xa11cd5)],r[l(1898)],_.route[l(1774)]);return e[l(1512)]&&e.success(d),d}).catch(_=>{logError$1("GaodeRoute 请求出错",_),e.error&&e.error("请求出错",_)})}[_0x3a2b68(1024)](e){const t={_0x426b44:539,_0x1643ff:1577,_0x296faa:4274,_0x1c0f7d:400,_0x493128:2432,_0x1cbb74:4290},i={_0x157701:3061,_0x54f223:1048,_0x1fa49e:1774,_0x3e54a4:4094},s=_0x3a2b68;var r;const o={key:this.key,output:"json",extensions:e.extensions||s(t._0x426b44),strategy:e[s(t._0x1643ff)]||0},c=wgs2gcj(e[s(t._0x296faa)][0]),_=wgs2gcj(e.points[e.points.length-1]);if(o.origin=c[0]+","+c[1],o.destination=_[0]+","+_[1],e.points.length>2){let l="";for(let d=1,f=e[s(4274)][s(t._0x1c0f7d)]-1;d<f;d++){const g=wgs2gcj(e.points[d]);l+=g[0]+","+g[1]+";"}o[s(t._0x493128)]=l}if(((r=e.avoidpolygons)===null||r===void 0?void 0:r.length)>0){let l="";for(let d=0,f=e.avoidpolygons.length;d<f;d++){d>0&&(l+="|");const g=e[s(t._0x1cbb74)][d];for(let b=0,C=g.length;b<C;b++){const P=wgs2gcj(g[b]);l+=P[0]+","+P[1]+";"}}o.avoidpolygons=l}return fetchJson({url:"https://restapi.amap.com/v3/direction/driving",queryParameters:o,...this.options}).then(l=>{const d=s;if(l.infocode!==d(i._0x157701)){if(e.error){const g="路径规划 请求失败("+l[d(3972)]+")："+l.info;e.error(g)}return}if(!l[d(1048)]||!l.route[d(1774)]||l[d(i._0x54f223)][d(i._0x1fa49e)].length===0){e.error&&e[d(i._0x3e54a4)]("未查询到相关结果！");return}const f=this[d(1392)](o.origin,o.destination,l.route.paths);return e.success&&e.success(f),f}).catch(l=>{logError$1("GaodeRoute 请求出错",l),e.error&&e.error("请求出错",l)})}}GaodeRoute.RouteType=RouteType;const Def_Parameters={service:"WFS",request:"GetFeature",version:_0x3a2b68(1694),outputFormat:"application/json",maxFeatures:1e3};class QueryGeoServer extends BaseClass{get layer(){const e={_0x286d08:4023,_0x533696:2645,_0x1fe865:383},t=_0x3a2b68;if(!this._geoJsonLayer){const i={...this.options};delete i[t(e._0x286d08)],delete i.data,this._geoJsonLayer=new GeoJsonLayer(i),this._geoJsonLayer.on(EventType.load,this[t(e._0x533696)],this),this._geoJsonLayer.on(EventType[t(e._0x1fe865)],this.geoJsonLayer_onClickHandler,this)}return this._geoJsonLayer}query(e){const t={_0x4be502:2623,_0x15aeaa:987,_0x183c32:1603,_0x222c39:407,_0x1d7356:407,_0x5103b9:407},i={_0x28a163:4389},s=_0x3a2b68;let r='<Filter xmlns="http://www.opengis.net/ogc" xmlns:gml="http://www.opengis.net/gml"><And>';if(e.text&&(Cesium__namespace[s(t._0x4be502)](e[s(t._0x15aeaa)],!![])?r+=` <PropertyIsLike wildCard="*" singleChar="#" escapeChar="!">
            <PropertyName>`+e[s(1501)]+`</PropertyName>
            <Literal>*`+e[s(3640)]+`*</Literal>
        </PropertyIsLike>`:r+=`<PropertyIsEqualTo>
                <PropertyName>`+e.column+`</PropertyName>
                <Literal>`+e.text+s(2381)),e.graphic){const c=e.graphic;let _;if(c[s(t._0x183c32)]==="rectangle"?_=c.outlineCoordinates:c[s(1603)]==="polygon"?_=c.coordinates:c.type==="circle"?_=c[s(2181)](!![],30):Cesium__namespace[s(t._0x222c39)](c.xmax)&&Cesium__namespace.defined(c[s(528)])&&Cesium__namespace[s(t._0x1d7356)](c.ymin)&&Cesium__namespace[s(t._0x5103b9)](c.ymax)&&(_=[[c.xmin,c.ymax],[c.xmin,c.ymin],[c.xmax,c.ymin],[c[s(4353)],c.ymax]]),_){_[s(1754)](_[0]);let l="";for(let d=0;d<_.length;d++){let f=_[d];this.options.crs&&this[s(1941)].crs!==CRS.EPSG4326&&this[s(1941)].crs!==CRS.EPSG4490&&(f=proj4Trans(f,"EPSG:4326",this.options.crs)),l+=f[0]+","+f[1]+" "}r+=s(3012)+(e[s(2295)]||"the_geom")+`</PropertyName>
                      <gml:Polygon>
                          <gml:outerBoundaryIs>
                              <gml:LinearRing>
                                  <gml:coordinates>`+l+`</gml:coordinates>
                              </gml:LinearRing>
                          </gml:outerBoundaryIs>
                      </gml:Polygon>
                  </Intersects>`}}r+=s(3059);const o={...Def_Parameters,...e,typeName:this.options[s(607)],filter:r};return delete o.success,delete o.error,delete o[s(2471)],delete o.text,delete o.column,new Promise((c,_)=>{const l=s;sendAjax({...this.options,queryParameters:o})[l(i._0x28a163)](d=>{e._promise={resolve:c,reject:_},this.processFeatureCollection(d,e)}).catch(d=>{logError$1("QueryGeoServer 请求出错",d),e.error&&e.error("请求出错",d)})})}queryBySql(e){const t={_0x40ee57:1737,_0x1ce156:528,_0x4d5d0c:3811,_0x156369:941,_0x1f9adb:2269,_0x73b86d:2393,_0x1a4d30:3139,_0x2b7c9f:1941,_0x5ba0d6:607,_0x345fe0:2471},i={_0x3b2d98:1693},s=_0x3a2b68;let r=e.cql_filter||"1=1";if(e.graphic){let c=e[s(2471)];const _=e.geometryName||s(4200);let l;if(c.type===s(1531)){c=c[s(t._0x40ee57)]({isFormat:!![]});const d=c[s(t._0x1ce156)]+","+c.ymin+","+c.xmax+","+c.ymax;r+=" and BBOX("+_+", "+d+")"}else if(c[s(1603)]===s(4383))l=c.coordinates;else if(c.type===s(t._0x4d5d0c))l=c.getOutlineCoordinates(!![],30);else if(Cesium__namespace[s(407)](c.xmax)&&Cesium__namespace.defined(c.xmin)&&Cesium__namespace.defined(c[s(t._0x156369)])&&Cesium__namespace.defined(c[s(t._0x1f9adb)])){const d=c.xmin+","+c.ymin+","+c[s(4353)]+","+c.ymax;r+=" and BBOX("+_+", "+d+")"}if(l){l.push(l[0]);const d=[];for(let f=0;f<l.length;f++)d.push(l[f][0]+" "+l[f][1]);r+=" and INTERSECTS ("+_+",POLYGON(("+d[s(t._0x73b86d)](",")+s(t._0x1a4d30)}}const o={...Def_Parameters,...e,typeName:this[s(t._0x2b7c9f)][s(t._0x5ba0d6)],cql_filter:r};return delete o.success,delete o.error,delete o[s(t._0x345fe0)],new Promise((c,_)=>{const l=s;sendAjax({...this.options,queryParameters:o})[l(4389)](d=>{const f=l;e._promise={resolve:c,reject:_},this[f(589)](d,e)}).catch(d=>{const f=l;logError$1("QueryGeoServer 请求出错",d),e[f(4094)]&&e.error(f(i._0x3b2d98),d)})})}processFeatureCollection(e,t){const i={_0x564902:3531,_0x3f8518:2332,_0x474858:400},s=_0x3a2b68;if(e&&e.type==="Feature"&&(e={type:"FeatureCollection",features:[e]}),!e||!e.features||e.features.length===0){var r;t.success&&t.success({count:0}),(r=t._promise)!==null&&r!==void 0&&r.resolve&&t[s(i._0x564902)].resolve({count:0})}else{const l=[];for(let d=0;d<e[s(i._0x3f8518)][s(i._0x474858)];d++){var o,c;const f=e[s(i._0x3f8518)][d];(f==null||(o=f.geometry)===null||o===void 0||(c=o.coordinates)===null||c===void 0?void 0:c.length)>0&&l.push(f)}if(e.features=l,this._geoJsonLayer)this._last_success=d=>{const f=s;var g;const b={geojson:e,count:e.features.length,list:d};t.success&&t.success(b),(g=t[f(3531)])!==null&&g!==void 0&&g.resolve&&t._promise.resolve(b)},this._geoJsonLayer.load({data:e});else{var _;const d={geojson:e,count:e[s(2332)].length};t[s(1512)]&&t.success(d),(_=t._promise)!==null&&_!==void 0&&_[s(583)]&&t[s(3531)].resolve(d)}}}geoJsonLayer_onLoadHandler(e){const t={_0x395883:3506,_0xfd8f03:3506,_0x466569:432},i=_0x3a2b68;this[i(t._0x395883)]&&(this[i(t._0xfd8f03)](e.list),this._last_success=null),this.fire(EventType[i(t._0x466569)],e)}geoJsonLayer_onClickHandler(e){this.fire(EventType.click,{...e,layer:this._geoJsonLayer})}clear(){const e={_0x24172f:1824},t=_0x3a2b68;this[t(3506)]&&(this._last_success=null),this[t(e._0x24172f)]&&this[t(1824)][t(2126)]()}}class QueryArcServer extends BaseClass{constructor(e={}){const t=_0x3a2b68;super(e),this[t(1941)]=e,this._pageSize=e.pageSize??10,this._allCount=0,this._allPage=0,this[t(532)]=1,this.arrIDS=[]}get url(){return this.options.url}set url(e){this.options.url=e}get[_0x3a2b68(2803)](){return this._pageSize}set pageSize(e){this._pageSize=e}get allCount(){return this._allCount}get allPage(){return this._allPage}get[_0x3a2b68(3926)](){return this._pageIndex}set pageIndex(e){this._pageIndex=e,this.showPage(e)}get layer(){const e=_0x3a2b68;if(!this._geoJsonLayer){const t={...this.options};delete t[e(4023)],delete t[e(1924)],this[e(1824)]=new GeoJsonLayer(t),this._geoJsonLayer.on(EventType[e(432)],this[e(2645)],this),this._geoJsonLayer.on(EventType.click,this.geoJsonLayer_onClickHandler,this)}return this._geoJsonLayer}showFirstPage(){this.showPage(1)}showPretPage(){const e=_0x3a2b68;this._pageIndex=this._pageIndex-1,this[e(532)]<1&&(this._pageIndex=1),this.showPage(this._pageIndex)}showNextPage(){const e={_0x5d462a:3670},t=_0x3a2b68;this[t(532)]=this._pageIndex+1,this[t(532)]>this.allPage&&(this._pageIndex=this.allPage),this[t(e._0x5d462a)](this[t(532)])}showPage(e){this._pageIndex=e,this._queryPageByIds()}query(e){const t={_0x173b03:2406,_0x255940:1501,_0x23b721:2471,_0x565e7d:3914,_0x7488aa:2152,_0x2b281e:407,_0x4b38e4:1477,_0x4f34fb:3491},i={_0x4592c1:1941,_0xfcb9e4:4023,_0x54f3fe:4389},s={_0xe59862:1598},r=_0x3a2b68;this._pageIndex=1,this.arrIDS=[];const o={f:"json",inSr:4326,outSR:4326,outFields:"*",returnGeometry:!![],where:e[r(t._0x173b03)]||"1=1",...e.parameters};if(this.options.token&&(o.token=this[r(1941)][r(4207)]),e[r(t._0x255940)]){let c="";e.like??!![]?c=e.column+"  like '%"+e.text+"%' ":c=e.column+"='"+e.text+"'",o[r(2406)]=c}if(e[r(2471)]){const c=e[r(t._0x23b721)];if(o.spatialRel=r(t._0x565e7d),c.type===r(1531)){const _=c.outlineCoordinates;o.geometryType="esriGeometryEnvelope",o[r(t._0x7488aa)]=JSON.stringify({xmin:_[0][0],ymin:_[0][1],xmax:_[2][0],ymax:_[2][1],spatialReference:{wkid:4326}})}else if(Cesium__namespace.defined(c.xmax)&&Cesium__namespace.defined(c.xmin)&&Cesium__namespace[r(t._0x2b281e)](c.ymin)&&Cesium__namespace.defined(c.ymax))o.geometryType="esriGeometryEnvelope",o.geometry=JSON[r(1477)]({xmin:c.xmin,ymin:c[r(941)],xmax:c.xmax,ymax:c.ymax,spatialReference:{wkid:4326}});else{let _;c.type===r(4383)?_=c.toGeoJSON():c.type===r(3811)?_={type:"Feature",geometry:{type:"Polygon",coordinates:[c.outlineCoordinates]}}:_=e[r(2471)],o.geometry=JSON[r(t._0x4b38e4)](geojsonToArcGIS$1(_.geometry)),o[r(t._0x4f34fb)]=geojsonTypeToArcGIS(_.geometry.type)}}return new Promise((c,_)=>{const l={_0x6b7e80:1645},d=r;e._promise={resolve:c,reject:_},e.page??!![]?(o.returnIdsOnly=!![],sendAjax({...this[d(i._0x4592c1)],url:this[d(i._0xfcb9e4)]+"/query",queryParameters:o})[d(i._0x54f3fe)](f=>{const g=d,b=f.objectIds;b&&(this.arrIDS=b,this[g(1961)]=b.length,this._allPage=Math.ceil(this._allCount/this[g(2132)])),delete o.returnIdsOnly,this[g(l._0x6b7e80)](o,e)}).catch(f=>{const g=d;logError$1("QueryArcServer 请求出错",f),e.error&&e.error(f,f[g(3995)])})):sendAjax({...this[d(1941)],url:this.url+"/query",queryParameters:o}).then(f=>{const g=arcgisToGeoJSON$1(f);this.processFeatureCollection(g,e)})[d(3596)](f=>{const g=d;logError$1(g(s._0xe59862),f),e.error&&e.error(f,f[g(3995)])})})}_queryPageByIds(e,t){const i={_0x29c265:2667,_0x14a438:532,_0x1fd2e4:3531,_0x4a8946:1931},s=_0x3a2b68;if(e?this.lastParameters=e:this.lastParameters&&(e=this[s(i._0x29c265)]),t?this.lastQueryOpts=t:this.lastParameters&&(t=this.lastQueryOpts),!this.arrIDS||this[s(1549)].length===0||this[s(i._0x14a438)]<1||this._pageIndex>this.allPage){var r;const l={geojson:null,count:0,allCount:this.allCount,pageSize:this.pageSize,allPage:this.allPage,pageIndex:this.pageIndex};t.success&&t.success(l),(r=t[s(i._0x1fd2e4)])!==null&&r!==void 0&&r.resolve&&t._promise.resolve(l);return}const o=(this[s(532)]-1)*this._pageSize,c=this._pageIndex*this._pageSize,_=this.arrIDS.slice(o,c);e[s(i._0x4a8946)]=_.join(","),sendAjax({...this.options,url:this.url+"/query",queryParameters:e}).then(l=>{const d=arcgisToGeoJSON$1(l);this.processFeatureCollection(d,t)}).catch(l=>{const d=s;logError$1("QueryArcServer 请求出错",l),t[d(4094)]&&t.error(l,l.message)})}processFeatureCollection(e,t){const i={_0x44e728:2332,_0x14021a:3531,_0x3f38b6:583},s={_0x456498:3531,_0x2e49c4:583},r=_0x3a2b68;if(!e||!e[r(i._0x44e728)]||e.features[r(400)]===0){var o;const d={geojson:null,count:0,allCount:this.allCount,pageSize:this.pageSize,allPage:this.allPage,pageIndex:this.pageIndex};t.success&&t.success(d),(o=t._promise)!==null&&o!==void 0&&o.resolve&&t[r(i._0x14021a)].resolve(d)}else{const d=[];for(let g=0;g<e.features.length;g++){var c,_;const b=e.features[g];(b==null||(c=b.geometry)===null||c===void 0||(_=c[r(918)])===null||_===void 0?void 0:_.length)>0&&d.push(b)}e.features=d;const f={geojson:e,count:e.features.length,allCount:this.allCount,pageSize:this[r(2803)],allPage:this.allPage,pageIndex:this.pageIndex};if(this._geoJsonLayer)this._last_success=g=>{const b=r;var C;f[b(1069)]=g,t.success&&t.success(f),(C=t[b(s._0x456498)])!==null&&C!==void 0&&C[b(583)]&&t[b(3531)][b(s._0x2e49c4)](f)},this._geoJsonLayer.load({data:e});else{var l;t.success&&t.success(f),(l=t._promise)!==null&&l!==void 0&&l.resolve&&t._promise[r(i._0x3f38b6)](f)}}}[_0x3a2b68(2645)](e){const t={_0x4c5e41:1069,_0x4aaa50:432},i=_0x3a2b68;this._last_success&&(this[i(3506)](e[i(t._0x4c5e41)]),this._last_success=null),this[i(1109)](EventType[i(t._0x4aaa50)],e)}geoJsonLayer_onClickHandler(e){this.fire(EventType.click,{...e,layer:this._geoJsonLayer})}clear(){const e={_0x23eaf7:3506},t=_0x3a2b68;this[t(3506)]&&(this[t(e._0x23eaf7)]=null),this._geoJsonLayer&&this[t(1824)][t(2126)]()}}function geojsonTypeToArcGIS(n){const e={_0x15e0e3:4166,_0x24f5f0:1045,_0x2d0032:2267,_0x22cb85:1910},t=_0x3a2b68;let i;switch(n){case"MultiPoint":i=t(928);break;case t(e._0x15e0e3):i=t(e._0x24f5f0);break;case t(828):i=t(1045);break;case"Polygon":i="esriGeometryPolygon";break;case"MultiPolygon":i=t(e._0x2d0032);break;case t(e._0x22cb85):default:i=t(3893);break}return i}var index={__proto__:null,BaiduPOI,GaodePOI,TdtPOI,GaodeRoute,QueryGeoServer,QueryArcServer};const name=_0x3a2b68(1300),website=_0x3a2b68(2959),author=_0x3a2b68(2337);exports.Cesium=Cesium__namespace,Object.defineProperty(exports,_0x3a2b68(4357),{enumerable:!![],get:function(){return Cesium.Resource}}),exports[_0x3a2b68(3661)]=BaseClass,exports.BaseMaterialConver=BaseMaterialConver,exports.BaseStyleConver=BaseStyleConver,exports.BaseThing=BaseThing,exports.BillboardStyleConver=BillboardStyleConver,exports[_0x3a2b68(3063)]=BoxStyleConver,exports.CRS=CRS,exports.ChinaCRS=ChinaCRS,exports[_0x3a2b68(2800)]=CircleStyleConver,exports[_0x3a2b68(4126)]=ClipType,exports[_0x3a2b68(353)]=CloudStyleConver,exports[_0x3a2b68(3736)]=ColorOptsConver,exports.ControlType=ControlType,exports[_0x3a2b68(1895)]=ControlUtil,exports.CorridorStyleConver=CorridorStyleConver,exports.CylinderStyleConver=CylinderStyleConver,exports.DivGraphicStyleConver=DivGraphicStyleConver,exports.DomUtil=DomUtil,exports[_0x3a2b68(1019)]=DrawUtil,exports.EffectType=EffectType,exports.EffectUtil=EffectUtil,exports.EllipsoidStyleConver=EllipsoidStyleConver,exports.EventType=EventType,exports[_0x3a2b68(3539)]=GraphicType,exports.GraphicUtil=GraphicUtil,exports.GroundSkyBox=GroundSkyBox,exports.GroupThing=GroupThing,exports.Icon=Icon,exports.ImageOptsConver=ImageOptsConver,exports[_0x3a2b68(2315)]=LabelStyleConver,exports.Lang=Lang,exports.LangType=LangType,exports.LayerType=LayerType,exports.LayerUtil=LayerUtil,exports[_0x3a2b68(2280)]=LngLatArray,exports.LngLatPoint=LngLatPoint,exports[_0x3a2b68(729)]=LocalWorldTransform,exports[_0x3a2b68(2058)]=Log,exports.Map=Map,exports.MarsArray=MarsArray,exports.MaterialType=MaterialType$1,exports.MaterialUtil=MaterialUtil,exports[_0x3a2b68(2661)]=MeasureUtil,exports[_0x3a2b68(3998)]=ModelStyleConver,exports.MoveType=MoveType,exports.MultipleSkyBox=MultipleSkyBox,exports.PathStyleConver=PathStyleConver,exports[_0x3a2b68(351)]=PlaneStyleConver,exports.PointStyleConver=PointStyleConver,exports.PointTrans=PointTrans,exports[_0x3a2b68(1152)]=PointUtil,exports.PolyUtil=PolyUtil,exports.PolygonStyleConver=PolygonStyleConver,exports.PolylineStyleConver=PolylineStyleConver,exports.PolylineVolumeStyleConver=PolylineVolumeStyleConver,exports[_0x3a2b68(2609)]=RectangleStyleConver,exports.RectangularSensorStyleConver=RectangularSensorStyleConver,exports.State=State,exports[_0x3a2b68(3142)]=Texture3,exports[_0x3a2b68(733)]=Token,exports.Util=Util,exports.WallStyleConver=WallStyleConver,exports.author=author,exports.control=index$1,exports.effect=index$2,exports.graphic=index$6,exports[_0x3a2b68(607)]=index$4,exports[_0x3a2b68(3793)]=index$7,exports.name=name,exports.proj4=proj4,exports.provider=index$5,exports.query=index,exports[_0x3a2b68(2443)]=index$3,exports[_0x3a2b68(3396)]=update,exports.version=version,exports.website=website,Object.defineProperty(exports,"__esModule",{value:!![]})})})(mars3d$1,mars3dExports);const mars3d="",widgets="",_hoisted_1={id:"mars3dContainer",class:"mars3d-container"},_sfc_main=defineComponent({__name:"App",setup(n){return onMounted(()=>{var e={terrain:{url:"http://192.168.2.125:8080/mars3d-data/terrain",show:!0},basemaps:[{name:"底图",url:"http://192.168.2.125:8080/mars3d-data/tile/googleImg/{z}/{x}/{y}.jpg",type:"xyz",minimumLevel:0,maximumLevel:12,show:!0}],layers:[{name:"模型名称",type:"3dtiles",url:"http://192.168.2.125:8080/mars3d-data/3dtiles/qx-dyt/tileset.json",maximumScreenSpaceError:1,maximumMemoryUsage:1024,position:{alt:452.9},center:{lat:34.216894,lng:108.959834,alt:17036414,heading:0,pitch:-90},show:!0}],scene:{center:{lat:34.216894,lng:108.959834,alt:17036414,heading:0,pitch:-90}}};new mars3dExports.Map("mars3dContainer",e)}),(e,t)=>(openBlock(),createElementBlock("div",_hoisted_1))}}),scriptRel="modulepreload",assetsURL=function(n,e){return new URL(n,e).href},seen={},__vitePreload=function n(e,t,i){if(!t||t.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(t.map(r=>{if(r=assetsURL(r,i),r in seen)return;seen[r]=!0;const o=r.endsWith(".css"),c=o?'[rel="stylesheet"]':"";if(!!i)for(let d=s.length-1;d>=0;d--){const f=s[d];if(f.href===r&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${c}`))return;const l=document.createElement("link");if(l.rel=o?"stylesheet":scriptRel,o||(l.as="script",l.crossOrigin=""),l.href=r,document.head.appendChild(l),o)return new Promise((d,f)=>{l.addEventListener("load",d),l.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>e())};function getDevtoolsGlobalHook(){return getTarget().__VUE_DEVTOOLS_GLOBAL_HOOK__}function getTarget(){return typeof navigator<"u"&&typeof window<"u"?window:typeof global<"u"?global:{}}const isProxyAvailable=typeof Proxy=="function",HOOK_SETUP="devtools-plugin:setup",HOOK_PLUGIN_SETTINGS_SET="plugin:settings:set";let supported,perf;function isPerformanceSupported(){var n;return supported!==void 0||(typeof window<"u"&&window.performance?(supported=!0,perf=window.performance):typeof global<"u"&&(!((n=global.perf_hooks)===null||n===void 0)&&n.performance)?(supported=!0,perf=global.perf_hooks.performance):supported=!1),supported}function now(){return isPerformanceSupported()?perf.now():Date.now()}class ApiProxy{constructor(e,t){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=t;const i={};if(e.settings)for(const o in e.settings){const c=e.settings[o];i[o]=c.defaultValue}const s=`__vue-devtools-plugin-settings__${e.id}`;let r=Object.assign({},i);try{const o=localStorage.getItem(s),c=JSON.parse(o);Object.assign(r,c)}catch{}this.fallbacks={getSettings(){return r},setSettings(o){try{localStorage.setItem(s,JSON.stringify(o))}catch{}r=o},now(){return now()}},t&&t.on(HOOK_PLUGIN_SETTINGS_SET,(o,c)=>{o===this.plugin.id&&this.fallbacks.setSettings(c)}),this.proxiedOn=new Proxy({},{get:(o,c)=>this.target?this.target.on[c]:(..._)=>{this.onQueue.push({method:c,args:_})}}),this.proxiedTarget=new Proxy({},{get:(o,c)=>this.target?this.target[c]:c==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(c)?(..._)=>(this.targetQueue.push({method:c,args:_,resolve:()=>{}}),this.fallbacks[c](..._)):(..._)=>new Promise(l=>{this.targetQueue.push({method:c,args:_,resolve:l})})})}async setRealTarget(e){this.target=e;for(const t of this.onQueue)this.target.on[t.method](...t.args);for(const t of this.targetQueue)t.resolve(await this.target[t.method](...t.args))}}function setupDevtoolsPlugin(n,e){const t=n,i=getTarget(),s=getDevtoolsGlobalHook(),r=isProxyAvailable&&t.enableEarlyProxy;if(s&&(i.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!r))s.emit(HOOK_SETUP,n,e);else{const o=r?new ApiProxy(t,s):null;(i.__VUE_DEVTOOLS_PLUGINS__=i.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:t,setupFn:e,proxy:o}),o&&e(o.proxiedTarget)}}/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const isBrowser=typeof window<"u";function isESModule(n){return n.__esModule||n[Symbol.toStringTag]==="Module"}const assign=Object.assign;function applyToParams(n,e){const t={};for(const i in e){const s=e[i];t[i]=isArray(s)?s.map(n):n(s)}return t}const noop=()=>{},isArray=Array.isArray,TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=n=>n.replace(TRAILING_SLASH_RE,"");function parseURL(n,e,t="/"){let i,s={},r="",o="";const c=e.indexOf("#");let _=e.indexOf("?");return c<_&&c>=0&&(_=-1),_>-1&&(i=e.slice(0,_),r=e.slice(_+1,c>-1?c:e.length),s=n(r)),c>-1&&(i=i||e.slice(0,c),o=e.slice(c,e.length)),i=resolveRelativePath(i??e,t),{fullPath:i+(r&&"?")+r+o,path:i,query:s,hash:o}}function stringifyURL(n,e){const t=e.query?n(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function stripBase(n,e){return!e||!n.toLowerCase().startsWith(e.toLowerCase())?n:n.slice(e.length)||"/"}function isSameRouteLocation(n,e,t){const i=e.matched.length-1,s=t.matched.length-1;return i>-1&&i===s&&isSameRouteRecord(e.matched[i],t.matched[s])&&isSameRouteLocationParams(e.params,t.params)&&n(e.query)===n(t.query)&&e.hash===t.hash}function isSameRouteRecord(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function isSameRouteLocationParams(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(!isSameRouteLocationParamsValue(n[t],e[t]))return!1;return!0}function isSameRouteLocationParamsValue(n,e){return isArray(n)?isEquivalentArray(n,e):isArray(e)?isEquivalentArray(e,n):n===e}function isEquivalentArray(n,e){return isArray(e)?n.length===e.length&&n.every((t,i)=>t===e[i]):n.length===1&&n[0]===e}function resolveRelativePath(n,e){if(n.startsWith("/"))return n;if(!n)return e;const t=e.split("/"),i=n.split("/");let s=t.length-1,r,o;for(r=0;r<i.length;r++)if(o=i[r],o!==".")if(o==="..")s>1&&s--;else break;return t.slice(0,s).join("/")+"/"+i.slice(r-(r===i.length?1:0)).join("/")}var NavigationType;(function(n){n.pop="pop",n.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(n){n.back="back",n.forward="forward",n.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(n){if(!n)if(isBrowser){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),removeTrailingSlash(n)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(n,e){return n.replace(BEFORE_HASH_RE,"#")+e}function getElementPosition(n,e){const t=document.documentElement.getBoundingClientRect(),i=n.getBoundingClientRect();return{behavior:e.behavior,left:i.left-t.left-(e.left||0),top:i.top-t.top-(e.top||0)}}const computeScrollPosition=()=>({left:window.pageXOffset,top:window.pageYOffset});function scrollToPosition(n){let e;if("el"in n){const t=n.el,i=typeof t=="string"&&t.startsWith("#"),s=typeof t=="string"?i?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!s)return;e=getElementPosition(s,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function getScrollKey(n,e){return(history.state?history.state.position-e:-1)+n}const scrollPositions=new Map;function saveScrollPosition(n,e){scrollPositions.set(n,e)}function getSavedScrollPosition(n){const e=scrollPositions.get(n);return scrollPositions.delete(n),e}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(n,e){const{pathname:t,search:i,hash:s}=e,r=n.indexOf("#");if(r>-1){let c=s.includes(n.slice(r))?n.slice(r).length:1,_=s.slice(c);return _[0]!=="/"&&(_="/"+_),stripBase(_,"")}return stripBase(t,n)+i+s}function useHistoryListeners(n,e,t,i){let s=[],r=[],o=null;const c=({state:g})=>{const b=createCurrentLocation(n,location),C=t.value,P=e.value;let S=0;if(g){if(t.value=b,e.value=g,o&&o===C){o=null;return}S=P?g.position-P.position:0}else i(b);s.forEach(L=>{L(t.value,C,{delta:S,type:NavigationType.pop,direction:S?S>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function _(){o=t.value}function l(g){s.push(g);const b=()=>{const C=s.indexOf(g);C>-1&&s.splice(C,1)};return r.push(b),b}function d(){const{history:g}=window;g.state&&g.replaceState(assign({},g.state,{scroll:computeScrollPosition()}),"")}function f(){for(const g of r)g();r=[],window.removeEventListener("popstate",c),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",c),window.addEventListener("beforeunload",d),{pauseListeners:_,listen:l,destroy:f}}function buildState(n,e,t,i=!1,s=!1){return{back:n,current:e,forward:t,replaced:i,position:window.history.length,scroll:s?computeScrollPosition():null}}function useHistoryStateNavigation(n){const{history:e,location:t}=window,i={value:createCurrentLocation(n,t)},s={value:e.state};s.value||r(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function r(_,l,d){const f=n.indexOf("#"),g=f>-1?(t.host&&document.querySelector("base")?n:n.slice(f))+_:createBaseLocation()+n+_;try{e[d?"replaceState":"pushState"](l,"",g),s.value=l}catch(b){console.error(b),t[d?"replace":"assign"](g)}}function o(_,l){const d=assign({},e.state,buildState(s.value.back,_,s.value.forward,!0),l,{position:s.value.position});r(_,d,!0),i.value=_}function c(_,l){const d=assign({},s.value,e.state,{forward:_,scroll:computeScrollPosition()});r(d.current,d,!0);const f=assign({},buildState(i.value,_,null),{position:d.position+1},l);r(_,f,!1),i.value=_}return{location:i,state:s,push:c,replace:o}}function createWebHistory(n){n=normalizeBase(n);const e=useHistoryStateNavigation(n),t=useHistoryListeners(n,e.state,e.location,e.replace);function i(r,o=!0){o||t.pauseListeners(),history.go(r)}const s=assign({location:"",base:n,go:i,createHref:createHref.bind(null,n)},e,t);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function isRouteLocation(n){return typeof n=="string"||n&&typeof n=="object"}function isRouteName(n){return typeof n=="string"||typeof n=="symbol"}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},NavigationFailureSymbol=Symbol("");var NavigationFailureType;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(n,e){return assign(new Error,{type:n,[NavigationFailureSymbol]:!0},e)}function isNavigationFailure(n,e){return n instanceof Error&&NavigationFailureSymbol in n&&(e==null||!!(n.type&e))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(n,e){const t=assign({},BASE_PATH_PARSER_OPTIONS,e),i=[];let s=t.start?"^":"";const r=[];for(const l of n){const d=l.length?[]:[90];t.strict&&!l.length&&(s+="/");for(let f=0;f<l.length;f++){const g=l[f];let b=40+(t.sensitive?.25:0);if(g.type===0)f||(s+="/"),s+=g.value.replace(REGEX_CHARS_RE,"\\$&"),b+=40;else if(g.type===1){const{value:C,repeatable:P,optional:S,regexp:L}=g;r.push({name:C,repeatable:P,optional:S});const E=L||BASE_PARAM_PATTERN;if(E!==BASE_PARAM_PATTERN){b+=10;try{new RegExp(`(${E})`)}catch(D){throw new Error(`Invalid custom RegExp for param "${C}" (${E}): `+D.message)}}let M=P?`((?:${E})(?:/(?:${E}))*)`:`(${E})`;f||(M=S&&l.length<2?`(?:/${M})`:"/"+M),S&&(M+="?"),s+=M,b+=20,S&&(b+=-8),P&&(b+=-20),E===".*"&&(b+=-50)}d.push(b)}i.push(d)}if(t.strict&&t.end){const l=i.length-1;i[l][i[l].length-1]+=.7000000000000001}t.strict||(s+="/?"),t.end?s+="$":t.strict&&(s+="(?:/|$)");const o=new RegExp(s,t.sensitive?"":"i");function c(l){const d=l.match(o),f={};if(!d)return null;for(let g=1;g<d.length;g++){const b=d[g]||"",C=r[g-1];f[C.name]=b&&C.repeatable?b.split("/"):b}return f}function _(l){let d="",f=!1;for(const g of n){(!f||!d.endsWith("/"))&&(d+="/"),f=!1;for(const b of g)if(b.type===0)d+=b.value;else if(b.type===1){const{value:C,repeatable:P,optional:S}=b,L=C in l?l[C]:"";if(isArray(L)&&!P)throw new Error(`Provided param "${C}" is an array but it is not repeatable (* or + modifiers)`);const E=isArray(L)?L.join("/"):L;if(!E)if(S)g.length<2&&(d.endsWith("/")?d=d.slice(0,-1):f=!0);else throw new Error(`Missing required param "${C}"`);d+=E}}return d||"/"}return{re:o,score:i,keys:r,parse:c,stringify:_}}function compareScoreArray(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=e[t]-n[t];if(i)return i;t++}return n.length<e.length?n.length===1&&n[0]===40+40?-1:1:n.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function comparePathParserScore(n,e){let t=0;const i=n.score,s=e.score;for(;t<i.length&&t<s.length;){const r=compareScoreArray(i[t],s[t]);if(r)return r;t++}if(Math.abs(s.length-i.length)===1){if(isLastScoreNegative(i))return 1;if(isLastScoreNegative(s))return-1}return s.length-i.length}function isLastScoreNegative(n){const e=n[n.length-1];return n.length>0&&e[e.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(n){if(!n)return[[]];if(n==="/")return[[ROOT_TOKEN]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function e(b){throw new Error(`ERR (${t})/"${l}": ${b}`)}let t=0,i=t;const s=[];let r;function o(){r&&s.push(r),r=[]}let c=0,_,l="",d="";function f(){l&&(t===0?r.push({type:0,value:l}):t===1||t===2||t===3?(r.length>1&&(_==="*"||_==="+")&&e(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:l,regexp:d,repeatable:_==="*"||_==="+",optional:_==="*"||_==="?"})):e("Invalid state to consume buffer"),l="")}function g(){l+=_}for(;c<n.length;){if(_=n[c++],_==="\\"&&t!==2){i=t,t=4;continue}switch(t){case 0:_==="/"?(l&&f(),o()):_===":"?(f(),t=1):g();break;case 4:g(),t=i;break;case 1:_==="("?t=2:VALID_PARAM_RE.test(_)?g():(f(),t=0,_!=="*"&&_!=="?"&&_!=="+"&&c--);break;case 2:_===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+_:t=3:d+=_;break;case 3:f(),t=0,_!=="*"&&_!=="?"&&_!=="+"&&c--,d="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${l}"`),f(),o(),s}function createRouteRecordMatcher(n,e,t){const i=tokensToParser(tokenizePath(n.path),t),s=assign(i,{record:n,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function createRouterMatcher(n,e){const t=[],i=new Map;e=mergeOptions({strict:!1,end:!0,sensitive:!1},e);function s(d){return i.get(d)}function r(d,f,g){const b=!g,C=normalizeRouteRecord(d);C.aliasOf=g&&g.record;const P=mergeOptions(e,d),S=[C];if("alias"in d){const M=typeof d.alias=="string"?[d.alias]:d.alias;for(const D of M)S.push(assign({},C,{components:g?g.record.components:C.components,path:D,aliasOf:g?g.record:C}))}let L,E;for(const M of S){const{path:D}=M;if(f&&D[0]!=="/"){const R=f.record.path,k=R[R.length-1]==="/"?"":"/";M.path=f.record.path+(D&&k+D)}if(L=createRouteRecordMatcher(M,f,P),g?g.alias.push(L):(E=E||L,E!==L&&E.alias.push(L),b&&d.name&&!isAliasRecord(L)&&o(d.name)),C.children){const R=C.children;for(let k=0;k<R.length;k++)r(R[k],L,g&&g.children[k])}g=g||L,(L.record.components&&Object.keys(L.record.components).length||L.record.name||L.record.redirect)&&_(L)}return E?()=>{o(E)}:noop}function o(d){if(isRouteName(d)){const f=i.get(d);f&&(i.delete(d),t.splice(t.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=t.indexOf(d);f>-1&&(t.splice(f,1),d.record.name&&i.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function c(){return t}function _(d){let f=0;for(;f<t.length&&comparePathParserScore(d,t[f])>=0&&(d.record.path!==t[f].record.path||!isRecordChildOf(d,t[f]));)f++;t.splice(f,0,d),d.record.name&&!isAliasRecord(d)&&i.set(d.record.name,d)}function l(d,f){let g,b={},C,P;if("name"in d&&d.name){if(g=i.get(d.name),!g)throw createRouterError(1,{location:d});P=g.record.name,b=assign(paramsFromLocation(f.params,g.keys.filter(E=>!E.optional).map(E=>E.name)),d.params&&paramsFromLocation(d.params,g.keys.map(E=>E.name))),C=g.stringify(b)}else if("path"in d)C=d.path,g=t.find(E=>E.re.test(C)),g&&(b=g.parse(C),P=g.record.name);else{if(g=f.name?i.get(f.name):t.find(E=>E.re.test(f.path)),!g)throw createRouterError(1,{location:d,currentLocation:f});P=g.record.name,b=assign({},f.params,d.params),C=g.stringify(b)}const S=[];let L=g;for(;L;)S.unshift(L.record),L=L.parent;return{name:P,path:C,params:b,matched:S,meta:mergeMetaFields(S)}}return n.forEach(d=>r(d)),{addRoute:r,resolve:l,removeRoute:o,getRoutes:c,getRecordMatcher:s}}function paramsFromLocation(n,e){const t={};for(const i of e)i in n&&(t[i]=n[i]);return t}function normalizeRouteRecord(n){return{path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:void 0,beforeEnter:n.beforeEnter,props:normalizeRecordProps(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}}}function normalizeRecordProps(n){const e={},t=n.props||!1;if("component"in n)e.default=t;else for(const i in n.components)e[i]=typeof t=="boolean"?t:t[i];return e}function isAliasRecord(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function mergeMetaFields(n){return n.reduce((e,t)=>assign(e,t.meta),{})}function mergeOptions(n,e){const t={};for(const i in n)t[i]=i in e?e[i]:n[i];return t}function isRecordChildOf(n,e){return e.children.some(t=>t===n||isRecordChildOf(n,t))}const HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(n){return encodeURI(""+n).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(n){return commonEncode(n).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(n){return commonEncode(n).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(n){return encodeQueryValue(n).replace(EQUAL_RE,"%3D")}function encodePath(n){return commonEncode(n).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(n){return n==null?"":encodePath(n).replace(SLASH_RE,"%2F")}function decode(n){try{return decodeURIComponent(""+n)}catch{}return""+n}function parseQuery(n){const e={};if(n===""||n==="?")return e;const i=(n[0]==="?"?n.slice(1):n).split("&");for(let s=0;s<i.length;++s){const r=i[s].replace(PLUS_RE," "),o=r.indexOf("="),c=decode(o<0?r:r.slice(0,o)),_=o<0?null:decode(r.slice(o+1));if(c in e){let l=e[c];isArray(l)||(l=e[c]=[l]),l.push(_)}else e[c]=_}return e}function stringifyQuery(n){let e="";for(let t in n){const i=n[t];if(t=encodeQueryKey(t),i==null){i!==void 0&&(e+=(e.length?"&":"")+t);continue}(isArray(i)?i.map(r=>r&&encodeQueryValue(r)):[i&&encodeQueryValue(i)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+t,r!=null&&(e+="="+r))})}return e}function normalizeQuery(n){const e={};for(const t in n){const i=n[t];i!==void 0&&(e[t]=isArray(i)?i.map(s=>s==null?null:""+s):i==null?i:""+i)}return e}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let n=[];function e(i){return n.push(i),()=>{const s=n.indexOf(i);s>-1&&n.splice(s,1)}}function t(){n=[]}return{add:e,list:()=>n,reset:t}}function guardToPromiseFn(n,e,t,i,s){const r=i&&(i.enterCallbacks[s]=i.enterCallbacks[s]||[]);return()=>new Promise((o,c)=>{const _=f=>{f===!1?c(createRouterError(4,{from:t,to:e})):f instanceof Error?c(f):isRouteLocation(f)?c(createRouterError(2,{from:e,to:f})):(r&&i.enterCallbacks[s]===r&&typeof f=="function"&&r.push(f),o())},l=n.call(i&&i.instances[s],e,t,_);let d=Promise.resolve(l);n.length<3&&(d=d.then(_)),d.catch(f=>c(f))})}function extractComponentsGuards(n,e,t,i){const s=[];for(const r of n)for(const o in r.components){let c=r.components[o];if(!(e!=="beforeRouteEnter"&&!r.instances[o]))if(isRouteComponent(c)){const l=(c.__vccOpts||c)[e];l&&s.push(guardToPromiseFn(l,t,i,r,o))}else{let _=c();s.push(()=>_.then(l=>{if(!l)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${r.path}"`));const d=isESModule(l)?l.default:l;r.components[o]=d;const g=(d.__vccOpts||d)[e];return g&&guardToPromiseFn(g,t,i,r,o)()}))}}return s}function isRouteComponent(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function useLink(n){const e=inject(routerKey),t=inject(routeLocationKey),i=computed(()=>e.resolve(unref(n.to))),s=computed(()=>{const{matched:_}=i.value,{length:l}=_,d=_[l-1],f=t.matched;if(!d||!f.length)return-1;const g=f.findIndex(isSameRouteRecord.bind(null,d));if(g>-1)return g;const b=getOriginalPath(_[l-2]);return l>1&&getOriginalPath(d)===b&&f[f.length-1].path!==b?f.findIndex(isSameRouteRecord.bind(null,_[l-2])):g}),r=computed(()=>s.value>-1&&includesParams(t.params,i.value.params)),o=computed(()=>s.value>-1&&s.value===t.matched.length-1&&isSameRouteLocationParams(t.params,i.value.params));function c(_={}){return guardEvent(_)?e[unref(n.replace)?"replace":"push"](unref(n.to)).catch(noop):Promise.resolve()}return{route:i,href:computed(()=>i.value.href),isActive:r,isExactActive:o,navigate:c}}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(n,{slots:e}){const t=reactive(useLink(n)),{options:i}=inject(routerKey),s=computed(()=>({[getLinkClass(n.activeClass,i.linkActiveClass,"router-link-active")]:t.isActive,[getLinkClass(n.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const r=e.default&&e.default(t);return n.custom?r:h("a",{"aria-current":t.isExactActive?n.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:s.value},r)}}}),RouterLink=RouterLinkImpl;function guardEvent(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function includesParams(n,e){for(const t in e){const i=e[t],s=n[t];if(typeof i=="string"){if(i!==s)return!1}else if(!isArray(s)||s.length!==i.length||i.some((r,o)=>r!==s[o]))return!1}return!0}function getOriginalPath(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const getLinkClass=(n,e,t)=>n??e??t,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:e,slots:t}){const i=inject(routerViewLocationKey),s=computed(()=>n.route||i.value),r=inject(viewDepthKey,0),o=computed(()=>{let l=unref(r);const{matched:d}=s.value;let f;for(;(f=d[l])&&!f.components;)l++;return l}),c=computed(()=>s.value.matched[o.value]);provide(viewDepthKey,computed(()=>o.value+1)),provide(matchedRouteKey,c),provide(routerViewLocationKey,s);const _=ref();return watch(()=>[_.value,c.value,n.name],([l,d,f],[g,b,C])=>{d&&(d.instances[f]=l,b&&b!==d&&l&&l===g&&(d.leaveGuards.size||(d.leaveGuards=b.leaveGuards),d.updateGuards.size||(d.updateGuards=b.updateGuards))),l&&d&&(!b||!isSameRouteRecord(d,b)||!g)&&(d.enterCallbacks[f]||[]).forEach(P=>P(l))},{flush:"post"}),()=>{const l=s.value,d=n.name,f=c.value,g=f&&f.components[d];if(!g)return normalizeSlot(t.default,{Component:g,route:l});const b=f.props[d],C=b?b===!0?l.params:typeof b=="function"?b(l):b:null,S=h(g,assign({},C,e,{onVnodeUnmounted:L=>{L.component.isUnmounted&&(f.instances[d]=null)},ref:_}));return normalizeSlot(t.default,{Component:S,route:l})||S}}});function normalizeSlot(n,e){if(!n)return null;const t=n(e);return t.length===1?t[0]:t}const RouterView=RouterViewImpl;function createRouter(n){const e=createRouterMatcher(n.routes,n),t=n.parseQuery||parseQuery,i=n.stringifyQuery||stringifyQuery,s=n.history,r=useCallbacks(),o=useCallbacks(),c=useCallbacks(),_=shallowRef(START_LOCATION_NORMALIZED);let l=START_LOCATION_NORMALIZED;isBrowser&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=applyToParams.bind(null,me=>""+me),f=applyToParams.bind(null,encodeParam),g=applyToParams.bind(null,decode);function b(me,Se){let Ie,pe;return isRouteName(me)?(Ie=e.getRecordMatcher(me),pe=Se):pe=me,e.addRoute(pe,Ie)}function C(me){const Se=e.getRecordMatcher(me);Se&&e.removeRoute(Se)}function P(){return e.getRoutes().map(me=>me.record)}function S(me){return!!e.getRecordMatcher(me)}function L(me,Se){if(Se=assign({},Se||_.value),typeof me=="string"){const ae=parseURL(t,me,Se.path),we=e.resolve({path:ae.path},Se),ke=s.createHref(ae.fullPath);return assign(ae,we,{params:g(we.params),hash:decode(ae.hash),redirectedFrom:void 0,href:ke})}let Ie;if("path"in me)Ie=assign({},me,{path:parseURL(t,me.path,Se.path).path});else{const ae=assign({},me.params);for(const we in ae)ae[we]==null&&delete ae[we];Ie=assign({},me,{params:f(me.params)}),Se.params=f(Se.params)}const pe=e.resolve(Ie,Se),Te=me.hash||"";pe.params=d(g(pe.params));const ye=stringifyURL(i,assign({},me,{hash:encodeHash(Te),path:pe.path})),ge=s.createHref(ye);return assign({fullPath:ye,hash:Te,query:i===stringifyQuery?normalizeQuery(me.query):me.query||{}},pe,{redirectedFrom:void 0,href:ge})}function E(me){return typeof me=="string"?parseURL(t,me,_.value.path):assign({},me)}function M(me,Se){if(l!==me)return createRouterError(8,{from:Se,to:me})}function D(me){return N(me)}function R(me){return D(assign(E(me),{replace:!0}))}function k(me){const Se=me.matched[me.matched.length-1];if(Se&&Se.redirect){const{redirect:Ie}=Se;let pe=typeof Ie=="function"?Ie(me):Ie;return typeof pe=="string"&&(pe=pe.includes("?")||pe.includes("#")?pe=E(pe):{path:pe},pe.params={}),assign({query:me.query,hash:me.hash,params:"path"in pe?{}:me.params},pe)}}function N(me,Se){const Ie=l=L(me),pe=_.value,Te=me.state,ye=me.force,ge=me.replace===!0,ae=k(Ie);if(ae)return N(assign(E(ae),{state:typeof ae=="object"?assign({},Te,ae.state):Te,force:ye,replace:ge}),Se||Ie);const we=Ie;we.redirectedFrom=Se;let ke;return!ye&&isSameRouteLocation(i,pe,Ie)&&(ke=createRouterError(16,{to:we,from:pe}),xe(pe,pe,!0,!1)),(ke?Promise.resolve(ke):B(we,pe)).catch(Ne=>isNavigationFailure(Ne)?isNavigationFailure(Ne,2)?Ne:ce(Ne):ie(Ne,we,pe)).then(Ne=>{if(Ne){if(isNavigationFailure(Ne,2))return N(assign({replace:ge},E(Ne.to),{state:typeof Ne.to=="object"?assign({},Te,Ne.to.state):Te,force:ye}),Se||we)}else Ne=z(we,pe,!0,ge,Te);return F(we,pe,Ne),Ne})}function $(me,Se){const Ie=M(me,Se);return Ie?Promise.reject(Ie):Promise.resolve()}function B(me,Se){let Ie;const[pe,Te,ye]=extractChangingRecords(me,Se);Ie=extractComponentsGuards(pe.reverse(),"beforeRouteLeave",me,Se);for(const ae of pe)ae.leaveGuards.forEach(we=>{Ie.push(guardToPromiseFn(we,me,Se))});const ge=$.bind(null,me,Se);return Ie.push(ge),runGuardQueue(Ie).then(()=>{Ie=[];for(const ae of r.list())Ie.push(guardToPromiseFn(ae,me,Se));return Ie.push(ge),runGuardQueue(Ie)}).then(()=>{Ie=extractComponentsGuards(Te,"beforeRouteUpdate",me,Se);for(const ae of Te)ae.updateGuards.forEach(we=>{Ie.push(guardToPromiseFn(we,me,Se))});return Ie.push(ge),runGuardQueue(Ie)}).then(()=>{Ie=[];for(const ae of me.matched)if(ae.beforeEnter&&!Se.matched.includes(ae))if(isArray(ae.beforeEnter))for(const we of ae.beforeEnter)Ie.push(guardToPromiseFn(we,me,Se));else Ie.push(guardToPromiseFn(ae.beforeEnter,me,Se));return Ie.push(ge),runGuardQueue(Ie)}).then(()=>(me.matched.forEach(ae=>ae.enterCallbacks={}),Ie=extractComponentsGuards(ye,"beforeRouteEnter",me,Se),Ie.push(ge),runGuardQueue(Ie))).then(()=>{Ie=[];for(const ae of o.list())Ie.push(guardToPromiseFn(ae,me,Se));return Ie.push(ge),runGuardQueue(Ie)}).catch(ae=>isNavigationFailure(ae,8)?ae:Promise.reject(ae))}function F(me,Se,Ie){for(const pe of c.list())pe(me,Se,Ie)}function z(me,Se,Ie,pe,Te){const ye=M(me,Se);if(ye)return ye;const ge=Se===START_LOCATION_NORMALIZED,ae=isBrowser?history.state:{};Ie&&(pe||ge?s.replace(me.fullPath,assign({scroll:ge&&ae&&ae.scroll},Te)):s.push(me.fullPath,Te)),_.value=me,xe(me,Se,Ie,ge),ce()}let Y;function J(){Y||(Y=s.listen((me,Se,Ie)=>{if(!Ae.listening)return;const pe=L(me),Te=k(pe);if(Te){N(assign(Te,{replace:!0}),pe).catch(noop);return}l=pe;const ye=_.value;isBrowser&&saveScrollPosition(getScrollKey(ye.fullPath,Ie.delta),computeScrollPosition()),B(pe,ye).catch(ge=>isNavigationFailure(ge,12)?ge:isNavigationFailure(ge,2)?(N(ge.to,pe).then(ae=>{isNavigationFailure(ae,20)&&!Ie.delta&&Ie.type===NavigationType.pop&&s.go(-1,!1)}).catch(noop),Promise.reject()):(Ie.delta&&s.go(-Ie.delta,!1),ie(ge,pe,ye))).then(ge=>{ge=ge||z(pe,ye,!1),ge&&(Ie.delta&&!isNavigationFailure(ge,8)?s.go(-Ie.delta,!1):Ie.type===NavigationType.pop&&isNavigationFailure(ge,20)&&s.go(-1,!1)),F(pe,ye,ge)}).catch(noop)}))}let q=useCallbacks(),le=useCallbacks(),j;function ie(me,Se,Ie){ce(me);const pe=le.list();return pe.length?pe.forEach(Te=>Te(me,Se,Ie)):console.error(me),Promise.reject(me)}function te(){return j&&_.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((me,Se)=>{q.add([me,Se])})}function ce(me){return j||(j=!me,J(),q.list().forEach(([Se,Ie])=>me?Ie(me):Se()),q.reset()),me}function xe(me,Se,Ie,pe){const{scrollBehavior:Te}=n;if(!isBrowser||!Te)return Promise.resolve();const ye=!Ie&&getSavedScrollPosition(getScrollKey(me.fullPath,0))||(pe||!Ie)&&history.state&&history.state.scroll||null;return nextTick().then(()=>Te(me,Se,ye)).then(ge=>ge&&scrollToPosition(ge)).catch(ge=>ie(ge,me,Se))}const he=me=>s.go(me);let Q;const fe=new Set,Ae={currentRoute:_,listening:!0,addRoute:b,removeRoute:C,hasRoute:S,getRoutes:P,resolve:L,options:n,push:D,replace:R,go:he,back:()=>he(-1),forward:()=>he(1),beforeEach:r.add,beforeResolve:o.add,afterEach:c.add,onError:le.add,isReady:te,install(me){const Se=this;me.component("RouterLink",RouterLink),me.component("RouterView",RouterView),me.config.globalProperties.$router=Se,Object.defineProperty(me.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(_)}),isBrowser&&!Q&&_.value===START_LOCATION_NORMALIZED&&(Q=!0,D(s.location).catch(Te=>{}));const Ie={};for(const Te in START_LOCATION_NORMALIZED)Ie[Te]=computed(()=>_.value[Te]);me.provide(routerKey,Se),me.provide(routeLocationKey,reactive(Ie)),me.provide(routerViewLocationKey,_);const pe=me.unmount;fe.add(me),me.unmount=function(){fe.delete(me),fe.size<1&&(l=START_LOCATION_NORMALIZED,Y&&Y(),Y=null,_.value=START_LOCATION_NORMALIZED,Q=!1,j=!1),pe()}}};return Ae}function runGuardQueue(n){return n.reduce((e,t)=>e.then(()=>t()),Promise.resolve())}function extractChangingRecords(n,e){const t=[],i=[],s=[],r=Math.max(e.matched.length,n.matched.length);for(let o=0;o<r;o++){const c=e.matched[o];c&&(n.matched.find(l=>isSameRouteRecord(l,c))?i.push(c):t.push(c));const _=n.matched[o];_&&(e.matched.find(l=>isSameRouteRecord(l,_))||s.push(_))}return[t,i,s]}const routes=[{path:"/",name:"HelloWorld",component:()=>__vitePreload(()=>import("./home-6c857d09.js"),[],import.meta.url)}],router=createRouter({history:createWebHistory(),routes});/*!
 * vuex v4.0.2
 * (c) 2021 Evan You
 * @license MIT
 */var storeKey="store";function forEachValue(n,e){Object.keys(n).forEach(function(t){return e(n[t],t)})}function isObject(n){return n!==null&&typeof n=="object"}function isPromise(n){return n&&typeof n.then=="function"}function partial(n,e){return function(){return n(e)}}function genericSubscribe(n,e,t){return e.indexOf(n)<0&&(t&&t.prepend?e.unshift(n):e.push(n)),function(){var i=e.indexOf(n);i>-1&&e.splice(i,1)}}function resetStore(n,e){n._actions=Object.create(null),n._mutations=Object.create(null),n._wrappedGetters=Object.create(null),n._modulesNamespaceMap=Object.create(null);var t=n.state;installModule(n,t,[],n._modules.root,!0),resetStoreState(n,t,e)}function resetStoreState(n,e,t){var i=n._state;n.getters={},n._makeLocalGettersCache=Object.create(null);var s=n._wrappedGetters,r={};forEachValue(s,function(o,c){r[c]=partial(o,n),Object.defineProperty(n.getters,c,{get:function(){return r[c]()},enumerable:!0})}),n._state=reactive({data:e}),n.strict&&enableStrictMode(n),i&&t&&n._withCommit(function(){i.data=null})}function installModule(n,e,t,i,s){var r=!t.length,o=n._modules.getNamespace(t);if(i.namespaced&&(n._modulesNamespaceMap[o],n._modulesNamespaceMap[o]=i),!r&&!s){var c=getNestedState(e,t.slice(0,-1)),_=t[t.length-1];n._withCommit(function(){c[_]=i.state})}var l=i.context=makeLocalContext(n,o,t);i.forEachMutation(function(d,f){var g=o+f;registerMutation(n,g,d,l)}),i.forEachAction(function(d,f){var g=d.root?f:o+f,b=d.handler||d;registerAction(n,g,b,l)}),i.forEachGetter(function(d,f){var g=o+f;registerGetter(n,g,d,l)}),i.forEachChild(function(d,f){installModule(n,e,t.concat(f),d,s)})}function makeLocalContext(n,e,t){var i=e==="",s={dispatch:i?n.dispatch:function(r,o,c){var _=unifyObjectStyle(r,o,c),l=_.payload,d=_.options,f=_.type;return(!d||!d.root)&&(f=e+f),n.dispatch(f,l)},commit:i?n.commit:function(r,o,c){var _=unifyObjectStyle(r,o,c),l=_.payload,d=_.options,f=_.type;(!d||!d.root)&&(f=e+f),n.commit(f,l,d)}};return Object.defineProperties(s,{getters:{get:i?function(){return n.getters}:function(){return makeLocalGetters(n,e)}},state:{get:function(){return getNestedState(n.state,t)}}}),s}function makeLocalGetters(n,e){if(!n._makeLocalGettersCache[e]){var t={},i=e.length;Object.keys(n.getters).forEach(function(s){if(s.slice(0,i)===e){var r=s.slice(i);Object.defineProperty(t,r,{get:function(){return n.getters[s]},enumerable:!0})}}),n._makeLocalGettersCache[e]=t}return n._makeLocalGettersCache[e]}function registerMutation(n,e,t,i){var s=n._mutations[e]||(n._mutations[e]=[]);s.push(function(o){t.call(n,i.state,o)})}function registerAction(n,e,t,i){var s=n._actions[e]||(n._actions[e]=[]);s.push(function(o){var c=t.call(n,{dispatch:i.dispatch,commit:i.commit,getters:i.getters,state:i.state,rootGetters:n.getters,rootState:n.state},o);return isPromise(c)||(c=Promise.resolve(c)),n._devtoolHook?c.catch(function(_){throw n._devtoolHook.emit("vuex:error",_),_}):c})}function registerGetter(n,e,t,i){n._wrappedGetters[e]||(n._wrappedGetters[e]=function(r){return t(i.state,i.getters,r.state,r.getters)})}function enableStrictMode(n){watch(function(){return n._state.data},function(){},{deep:!0,flush:"sync"})}function getNestedState(n,e){return e.reduce(function(t,i){return t[i]},n)}function unifyObjectStyle(n,e,t){return isObject(n)&&n.type&&(t=e,e=n,n=n.type),{type:n,payload:e,options:t}}var LABEL_VUEX_BINDINGS="vuex bindings",MUTATIONS_LAYER_ID="vuex:mutations",ACTIONS_LAYER_ID="vuex:actions",INSPECTOR_ID="vuex",actionId=0;function addDevtools(n,e){setupDevtoolsPlugin({id:"org.vuejs.vuex",app:n,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[LABEL_VUEX_BINDINGS]},function(t){t.addTimelineLayer({id:MUTATIONS_LAYER_ID,label:"Vuex Mutations",color:COLOR_LIME_500}),t.addTimelineLayer({id:ACTIONS_LAYER_ID,label:"Vuex Actions",color:COLOR_LIME_500}),t.addInspector({id:INSPECTOR_ID,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),t.on.getInspectorTree(function(i){if(i.app===n&&i.inspectorId===INSPECTOR_ID)if(i.filter){var s=[];flattenStoreForInspectorTree(s,e._modules.root,i.filter,""),i.rootNodes=s}else i.rootNodes=[formatStoreForInspectorTree(e._modules.root,"")]}),t.on.getInspectorState(function(i){if(i.app===n&&i.inspectorId===INSPECTOR_ID){var s=i.nodeId;makeLocalGetters(e,s),i.state=formatStoreForInspectorState(getStoreModule(e._modules,s),s==="root"?e.getters:e._makeLocalGettersCache,s)}}),t.on.editInspectorState(function(i){if(i.app===n&&i.inspectorId===INSPECTOR_ID){var s=i.nodeId,r=i.path;s!=="root"&&(r=s.split("/").filter(Boolean).concat(r)),e._withCommit(function(){i.set(e._state.data,r,i.state.value)})}}),e.subscribe(function(i,s){var r={};i.payload&&(r.payload=i.payload),r.state=s,t.notifyComponentUpdate(),t.sendInspectorTree(INSPECTOR_ID),t.sendInspectorState(INSPECTOR_ID),t.addTimelineEvent({layerId:MUTATIONS_LAYER_ID,event:{time:Date.now(),title:i.type,data:r}})}),e.subscribeAction({before:function(i,s){var r={};i.payload&&(r.payload=i.payload),i._id=actionId++,i._time=Date.now(),r.state=s,t.addTimelineEvent({layerId:ACTIONS_LAYER_ID,event:{time:i._time,title:i.type,groupId:i._id,subtitle:"start",data:r}})},after:function(i,s){var r={},o=Date.now()-i._time;r.duration={_custom:{type:"duration",display:o+"ms",tooltip:"Action duration",value:o}},i.payload&&(r.payload=i.payload),r.state=s,t.addTimelineEvent({layerId:ACTIONS_LAYER_ID,event:{time:Date.now(),title:i.type,groupId:i._id,subtitle:"end",data:r}})}})})}var COLOR_LIME_500=8702998,COLOR_DARK=6710886,COLOR_WHITE=16777215,TAG_NAMESPACED={label:"namespaced",textColor:COLOR_WHITE,backgroundColor:COLOR_DARK};function extractNameFromPath(n){return n&&n!=="root"?n.split("/").slice(-2,-1)[0]:"Root"}function formatStoreForInspectorTree(n,e){return{id:e||"root",label:extractNameFromPath(e),tags:n.namespaced?[TAG_NAMESPACED]:[],children:Object.keys(n._children).map(function(t){return formatStoreForInspectorTree(n._children[t],e+t+"/")})}}function flattenStoreForInspectorTree(n,e,t,i){i.includes(t)&&n.push({id:i||"root",label:i.endsWith("/")?i.slice(0,i.length-1):i||"Root",tags:e.namespaced?[TAG_NAMESPACED]:[]}),Object.keys(e._children).forEach(function(s){flattenStoreForInspectorTree(n,e._children[s],t,i+s+"/")})}function formatStoreForInspectorState(n,e,t){e=t==="root"?e:e[t];var i=Object.keys(e),s={state:Object.keys(n.state).map(function(o){return{key:o,editable:!0,value:n.state[o]}})};if(i.length){var r=transformPathsToObjectTree(e);s.getters=Object.keys(r).map(function(o){return{key:o.endsWith("/")?extractNameFromPath(o):o,editable:!1,value:canThrow(function(){return r[o]})}})}return s}function transformPathsToObjectTree(n){var e={};return Object.keys(n).forEach(function(t){var i=t.split("/");if(i.length>1){var s=e,r=i.pop();i.forEach(function(o){s[o]||(s[o]={_custom:{value:{},display:o,tooltip:"Module",abstract:!0}}),s=s[o]._custom.value}),s[r]=canThrow(function(){return n[t]})}else e[t]=canThrow(function(){return n[t]})}),e}function getStoreModule(n,e){var t=e.split("/").filter(function(i){return i});return t.reduce(function(i,s,r){var o=i[s];if(!o)throw new Error('Missing module "'+s+'" for path "'+e+'".');return r===t.length-1?o:o._children},e==="root"?n:n.root._children)}function canThrow(n){try{return n()}catch(e){return e}}var Module=function n(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e;var i=e.state;this.state=(typeof i=="function"?i():i)||{}},prototypeAccessors$1={namespaced:{configurable:!0}};prototypeAccessors$1.namespaced.get=function(){return!!this._rawModule.namespaced};Module.prototype.addChild=function n(e,t){this._children[e]=t};Module.prototype.removeChild=function n(e){delete this._children[e]};Module.prototype.getChild=function n(e){return this._children[e]};Module.prototype.hasChild=function n(e){return e in this._children};Module.prototype.update=function n(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)};Module.prototype.forEachChild=function n(e){forEachValue(this._children,e)};Module.prototype.forEachGetter=function n(e){this._rawModule.getters&&forEachValue(this._rawModule.getters,e)};Module.prototype.forEachAction=function n(e){this._rawModule.actions&&forEachValue(this._rawModule.actions,e)};Module.prototype.forEachMutation=function n(e){this._rawModule.mutations&&forEachValue(this._rawModule.mutations,e)};Object.defineProperties(Module.prototype,prototypeAccessors$1);var ModuleCollection=function n(e){this.register([],e,!1)};ModuleCollection.prototype.get=function n(e){return e.reduce(function(t,i){return t.getChild(i)},this.root)};ModuleCollection.prototype.getNamespace=function n(e){var t=this.root;return e.reduce(function(i,s){return t=t.getChild(s),i+(t.namespaced?s+"/":"")},"")};ModuleCollection.prototype.update=function n(e){update([],this.root,e)};ModuleCollection.prototype.register=function n(e,t,i){var s=this;i===void 0&&(i=!0);var r=new Module(t,i);if(e.length===0)this.root=r;else{var o=this.get(e.slice(0,-1));o.addChild(e[e.length-1],r)}t.modules&&forEachValue(t.modules,function(c,_){s.register(e.concat(_),c,i)})};ModuleCollection.prototype.unregister=function n(e){var t=this.get(e.slice(0,-1)),i=e[e.length-1],s=t.getChild(i);s&&s.runtime&&t.removeChild(i)};ModuleCollection.prototype.isRegistered=function n(e){var t=this.get(e.slice(0,-1)),i=e[e.length-1];return t?t.hasChild(i):!1};function update(n,e,t){if(e.update(t),t.modules)for(var i in t.modules){if(!e.getChild(i))return;update(n.concat(i),e.getChild(i),t.modules[i])}}function createStore(n){return new Store(n)}var Store=function n(e){var t=this;e===void 0&&(e={});var i=e.plugins;i===void 0&&(i=[]);var s=e.strict;s===void 0&&(s=!1);var r=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new ModuleCollection(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._devtools=r;var o=this,c=this,_=c.dispatch,l=c.commit;this.dispatch=function(g,b){return _.call(o,g,b)},this.commit=function(g,b,C){return l.call(o,g,b,C)},this.strict=s;var d=this._modules.root.state;installModule(this,d,[],this._modules.root),resetStoreState(this,d),i.forEach(function(f){return f(t)})},prototypeAccessors={state:{configurable:!0}};Store.prototype.install=function n(e,t){e.provide(t||storeKey,this),e.config.globalProperties.$store=this;var i=this._devtools!==void 0?this._devtools:!1;i&&addDevtools(e,this)};prototypeAccessors.state.get=function(){return this._state.data};prototypeAccessors.state.set=function(n){};Store.prototype.commit=function n(e,t,i){var s=this,r=unifyObjectStyle(e,t,i),o=r.type,c=r.payload,_={type:o,payload:c},l=this._mutations[o];l&&(this._withCommit(function(){l.forEach(function(f){f(c)})}),this._subscribers.slice().forEach(function(d){return d(_,s.state)}))};Store.prototype.dispatch=function n(e,t){var i=this,s=unifyObjectStyle(e,t),r=s.type,o=s.payload,c={type:r,payload:o},_=this._actions[r];if(_){try{this._actionSubscribers.slice().filter(function(d){return d.before}).forEach(function(d){return d.before(c,i.state)})}catch{}var l=_.length>1?Promise.all(_.map(function(d){return d(o)})):_[0](o);return new Promise(function(d,f){l.then(function(g){try{i._actionSubscribers.filter(function(b){return b.after}).forEach(function(b){return b.after(c,i.state)})}catch{}d(g)},function(g){try{i._actionSubscribers.filter(function(b){return b.error}).forEach(function(b){return b.error(c,i.state,g)})}catch{}f(g)})})}};Store.prototype.subscribe=function n(e,t){return genericSubscribe(e,this._subscribers,t)};Store.prototype.subscribeAction=function n(e,t){var i=typeof e=="function"?{before:e}:e;return genericSubscribe(i,this._actionSubscribers,t)};Store.prototype.watch=function n(e,t,i){var s=this;return watch(function(){return e(s.state,s.getters)},t,Object.assign({},i))};Store.prototype.replaceState=function n(e){var t=this;this._withCommit(function(){t._state.data=e})};Store.prototype.registerModule=function n(e,t,i){i===void 0&&(i={}),typeof e=="string"&&(e=[e]),this._modules.register(e,t),installModule(this,this.state,e,this._modules.get(e),i.preserveState),resetStoreState(this,this.state)};Store.prototype.unregisterModule=function n(e){var t=this;typeof e=="string"&&(e=[e]),this._modules.unregister(e),this._withCommit(function(){var i=getNestedState(t.state,e.slice(0,-1));delete i[e[e.length-1]]}),resetStore(this)};Store.prototype.hasModule=function n(e){return typeof e=="string"&&(e=[e]),this._modules.isRegistered(e)};Store.prototype.hotUpdate=function n(e){this._modules.update(e),resetStore(this,!0)};Store.prototype._withCommit=function n(e){var t=this._committing;this._committing=!0,e(),this._committing=t};Object.defineProperties(Store.prototype,prototypeAccessors);const store=createStore({state:{userInfo:{name:"yk"}},mutations:{getUserInfo(n,e){n.userInfo.name=e}},actions:{},getters:{}});createApp(_sfc_main).use(store).use(router).mount("#app");export{openBlock as a,createElementBlock as c,defineComponent as d,mars3dExports as m,onMounted as o};
